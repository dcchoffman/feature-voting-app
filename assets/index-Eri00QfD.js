var ZI=Object.defineProperty;var eD=(e,t,r)=>t in e?ZI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Zg=(e,t,r)=>eD(e,typeof t!="symbol"?t+"":t,r);function tD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function ai(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ey={exports:{}},Ju={},ty={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ij;function nD(){if(Ij)return jr;Ij=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,j={};function b(U,ee,ue){this.props=U,this.context=ee,this.refs=j,this.updater=ue||x}b.prototype.isReactComponent={},b.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},b.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function _(){}_.prototype=b.prototype;function C(U,ee,ue){this.props=U,this.context=ee,this.refs=j,this.updater=ue||x}var N=C.prototype=new _;N.constructor=C,w(N,b.prototype),N.isPureReactComponent=!0;var T=Array.isArray,A=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function F(U,ee,ue){var $e,Oe={},_e=null,Ie=null;if(ee!=null)for($e in ee.ref!==void 0&&(Ie=ee.ref),ee.key!==void 0&&(_e=""+ee.key),ee)A.call(ee,$e)&&!M.hasOwnProperty($e)&&(Oe[$e]=ee[$e]);var Ke=arguments.length-2;if(Ke===1)Oe.children=ue;else if(1<Ke){for(var B=Array(Ke),ve=0;ve<Ke;ve++)B[ve]=arguments[ve+2];Oe.children=B}if(U&&U.defaultProps)for($e in Ke=U.defaultProps,Ke)Oe[$e]===void 0&&(Oe[$e]=Ke[$e]);return{$$typeof:e,type:U,key:_e,ref:Ie,props:Oe,_owner:P.current}}function Q(U,ee){return{$$typeof:e,type:U.type,key:ee,ref:U.ref,props:U.props,_owner:U._owner}}function q(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function ae(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ue){return ee[ue]})}var Y=/\/+/g;function oe(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?ae(""+U.key):ee.toString(36)}function V(U,ee,ue,$e,Oe){var _e=typeof U;(_e==="undefined"||_e==="boolean")&&(U=null);var Ie=!1;if(U===null)Ie=!0;else switch(_e){case"string":case"number":Ie=!0;break;case"object":switch(U.$$typeof){case e:case t:Ie=!0}}if(Ie)return Ie=U,Oe=Oe(Ie),U=$e===""?"."+oe(Ie,0):$e,T(Oe)?(ue="",U!=null&&(ue=U.replace(Y,"$&/")+"/"),V(Oe,ee,ue,"",function(ve){return ve})):Oe!=null&&(q(Oe)&&(Oe=Q(Oe,ue+(!Oe.key||Ie&&Ie.key===Oe.key?"":(""+Oe.key).replace(Y,"$&/")+"/")+U)),ee.push(Oe)),1;if(Ie=0,$e=$e===""?".":$e+":",T(U))for(var Ke=0;Ke<U.length;Ke++){_e=U[Ke];var B=$e+oe(_e,Ke);Ie+=V(_e,ee,ue,B,Oe)}else if(B=v(U),typeof B=="function")for(U=B.call(U),Ke=0;!(_e=U.next()).done;)_e=_e.value,B=$e+oe(_e,Ke++),Ie+=V(_e,ee,ue,B,Oe);else if(_e==="object")throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ie}function K(U,ee,ue){if(U==null)return U;var $e=[],Oe=0;return V(U,$e,"","",function(_e){return ee.call(ue,_e,Oe++)}),$e}function ge(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(ue){(U._status===0||U._status===-1)&&(U._status=1,U._result=ue)},function(ue){(U._status===0||U._status===-1)&&(U._status=2,U._result=ue)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var $={current:null},G={transition:null},ce={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:G,ReactCurrentOwner:P};function le(){throw Error("act(...) is not supported in production builds of React.")}return jr.Children={map:K,forEach:function(U,ee,ue){K(U,function(){ee.apply(this,arguments)},ue)},count:function(U){var ee=0;return K(U,function(){ee++}),ee},toArray:function(U){return K(U,function(ee){return ee})||[]},only:function(U){if(!q(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},jr.Component=b,jr.Fragment=r,jr.Profiler=s,jr.PureComponent=C,jr.StrictMode=n,jr.Suspense=d,jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,jr.act=le,jr.cloneElement=function(U,ee,ue){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var $e=w({},U.props),Oe=U.key,_e=U.ref,Ie=U._owner;if(ee!=null){if(ee.ref!==void 0&&(_e=ee.ref,Ie=P.current),ee.key!==void 0&&(Oe=""+ee.key),U.type&&U.type.defaultProps)var Ke=U.type.defaultProps;for(B in ee)A.call(ee,B)&&!M.hasOwnProperty(B)&&($e[B]=ee[B]===void 0&&Ke!==void 0?Ke[B]:ee[B])}var B=arguments.length-2;if(B===1)$e.children=ue;else if(1<B){Ke=Array(B);for(var ve=0;ve<B;ve++)Ke[ve]=arguments[ve+2];$e.children=Ke}return{$$typeof:e,type:U.type,key:Oe,ref:_e,props:$e,_owner:Ie}},jr.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},jr.createElement=F,jr.createFactory=function(U){var ee=F.bind(null,U);return ee.type=U,ee},jr.createRef=function(){return{current:null}},jr.forwardRef=function(U){return{$$typeof:u,render:U}},jr.isValidElement=q,jr.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ge}},jr.memo=function(U,ee){return{$$typeof:m,type:U,compare:ee===void 0?null:ee}},jr.startTransition=function(U){var ee=G.transition;G.transition={};try{U()}finally{G.transition=ee}},jr.unstable_act=le,jr.useCallback=function(U,ee){return $.current.useCallback(U,ee)},jr.useContext=function(U){return $.current.useContext(U)},jr.useDebugValue=function(){},jr.useDeferredValue=function(U){return $.current.useDeferredValue(U)},jr.useEffect=function(U,ee){return $.current.useEffect(U,ee)},jr.useId=function(){return $.current.useId()},jr.useImperativeHandle=function(U,ee,ue){return $.current.useImperativeHandle(U,ee,ue)},jr.useInsertionEffect=function(U,ee){return $.current.useInsertionEffect(U,ee)},jr.useLayoutEffect=function(U,ee){return $.current.useLayoutEffect(U,ee)},jr.useMemo=function(U,ee){return $.current.useMemo(U,ee)},jr.useReducer=function(U,ee,ue){return $.current.useReducer(U,ee,ue)},jr.useRef=function(U){return $.current.useRef(U)},jr.useState=function(U){return $.current.useState(U)},jr.useSyncExternalStore=function(U,ee,ue){return $.current.useSyncExternalStore(U,ee,ue)},jr.useTransition=function(){return $.current.useTransition()},jr.version="18.3.1",jr}var Dj;function iu(){return Dj||(Dj=1,ty.exports=nD()),ty.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function sD(){if($j)return Ju;$j=1;var e=iu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},v=null,x=null;m!==void 0&&(v=""+m),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:v,ref:x,props:p,_owner:s.current}}return Ju.Fragment=r,Ju.jsx=l,Ju.jsxs=l,Ju}var Rj;function aD(){return Rj||(Rj=1,ey.exports=sD()),ey.exports}var i=aD(),y=iu();const Ft=ai(y),iD=tD({__proto__:null,default:Ft},[y]);var Zf={},ry={exports:{}},Ks={},ny={exports:{}},sy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj;function oD(){return Mj||(Mj=1,(function(e){function t(G,ce){var le=G.length;G.push(ce);e:for(;0<le;){var U=le-1>>>1,ee=G[U];if(0<s(ee,ce))G[U]=ce,G[le]=ee,le=U;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var ce=G[0],le=G.pop();if(le!==ce){G[0]=le;e:for(var U=0,ee=G.length,ue=ee>>>1;U<ue;){var $e=2*(U+1)-1,Oe=G[$e],_e=$e+1,Ie=G[_e];if(0>s(Oe,le))_e<ee&&0>s(Ie,Oe)?(G[U]=Ie,G[_e]=le,U=_e):(G[U]=Oe,G[$e]=le,U=$e);else if(_e<ee&&0>s(Ie,le))G[U]=Ie,G[_e]=le,U=_e;else break e}}return ce}function s(G,ce){var le=G.sortIndex-ce.sortIndex;return le!==0?le:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,v=3,x=!1,w=!1,j=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(G){for(var ce=r(m);ce!==null;){if(ce.callback===null)n(m);else if(ce.startTime<=G)n(m),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(m)}}function T(G){if(j=!1,N(G),!w)if(r(d)!==null)w=!0,ge(A);else{var ce=r(m);ce!==null&&$(T,ce.startTime-G)}}function A(G,ce){w=!1,j&&(j=!1,_(F),F=-1),x=!0;var le=v;try{for(N(ce),p=r(d);p!==null&&(!(p.expirationTime>ce)||G&&!ae());){var U=p.callback;if(typeof U=="function"){p.callback=null,v=p.priorityLevel;var ee=U(p.expirationTime<=ce);ce=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(d)&&n(d),N(ce)}else n(d);p=r(d)}if(p!==null)var ue=!0;else{var $e=r(m);$e!==null&&$(T,$e.startTime-ce),ue=!1}return ue}finally{p=null,v=le,x=!1}}var P=!1,M=null,F=-1,Q=5,q=-1;function ae(){return!(e.unstable_now()-q<Q)}function Y(){if(M!==null){var G=e.unstable_now();q=G;var ce=!0;try{ce=M(!0,G)}finally{ce?oe():(P=!1,M=null)}}else P=!1}var oe;if(typeof C=="function")oe=function(){C(Y)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=Y,oe=function(){K.postMessage(null)}}else oe=function(){b(Y,0)};function ge(G){M=G,P||(P=!0,oe())}function $(G,ce){F=b(function(){G(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,ge(A))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var le=v;v=ce;try{return G()}finally{v=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=v;v=G;try{return ce()}finally{v=le}},e.unstable_scheduleCallback=function(G,ce,le){var U=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,G){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,G={id:f++,callback:ce,priorityLevel:G,startTime:le,expirationTime:ee,sortIndex:-1},le>U?(G.sortIndex=le,t(m,G),r(d)===null&&G===r(m)&&(j?(_(F),F=-1):j=!0,$(T,le-U))):(G.sortIndex=ee,t(d,G),w||x||(w=!0,ge(A))),G},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(G){var ce=v;return function(){var le=v;v=ce;try{return G.apply(this,arguments)}finally{v=le}}}})(sy)),sy}var Fj;function lD(){return Fj||(Fj=1,ny.exports=oD()),ny.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj;function cD(){if(Lj)return Ks;Lj=1;var e=iu(),t=lD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function j(o,c,h,g,k,S,E){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=k,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=S,this.removeEmptyString=E}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){b[o]=new j(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];b[c]=new j(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){b[o]=new j(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){b[o]=new j(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){b[o]=new j(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){b[o]=new j(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){b[o]=new j(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){b[o]=new j(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){b[o]=new j(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,C);b[c]=new j(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,C);b[c]=new j(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,C);b[c]=new j(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){b[o]=new j(o,1,!1,o.toLowerCase(),null,!1,!1)}),b.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){b[o]=new j(o,1,!1,o.toLowerCase(),null,!0,!0)});function N(o,c,h,g){var k=b.hasOwnProperty(c)?b[c]:null;(k!==null?k.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,h,k,g)&&(h=null),g||k===null?v(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):k.mustUseProperty?o[k.propertyName]=h===null?k.type===3?!1:"":h:(c=k.attributeName,g=k.attributeNamespace,h===null?o.removeAttribute(c):(k=k.type,h=k===3||k===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),ae=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),G=Symbol.iterator;function ce(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var le=Object.assign,U;function ee(o){if(U===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var ue=!1;function $e(o,c){if(!o||ue)return"";ue=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var g=xe}Reflect.construct(o,[],c)}else{try{c.call()}catch(xe){g=xe}o.call(c.prototype)}else{try{throw Error()}catch(xe){g=xe}o()}}catch(xe){if(xe&&g&&typeof xe.stack=="string"){for(var k=xe.stack.split(`
`),S=g.stack.split(`
`),E=k.length-1,z=S.length-1;1<=E&&0<=z&&k[E]!==S[z];)z--;for(;1<=E&&0<=z;E--,z--)if(k[E]!==S[z]){if(E!==1||z!==1)do if(E--,z--,0>z||k[E]!==S[z]){var X=`
`+k[E].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=E&&0<=z);break}}}finally{ue=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?ee(o):""}function Oe(o){switch(o.tag){case 5:return ee(o.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return o=$e(o.type,!1),o;case 11:return o=$e(o.type.render,!1),o;case 1:return o=$e(o.type,!0),o;default:return""}}function _e(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case P:return"Portal";case Q:return"Profiler";case F:return"StrictMode";case oe:return"Suspense";case V:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ae:return(o.displayName||"Context")+".Consumer";case q:return(o._context.displayName||"Context")+".Provider";case Y:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case K:return c=o.displayName||null,c!==null?c:_e(o.type)||"Memo";case ge:c=o._payload,o=o._init;try{return _e(o(c))}catch{}}return null}function Ie(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(c);case 8:return c===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ke(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function B(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ve(o){var c=B(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var k=h.get,S=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(E){g=""+E,S.call(this,E)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function ie(o){o._valueTracker||(o._valueTracker=ve(o))}function ne(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=B(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function pt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function et(o,c){var h=c.checked;return le({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Be(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Ke(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ft(o,c){c=c.checked,c!=null&&N(o,"checked",c,!1)}function De(o,c){ft(o,c);var h=Ke(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?rr(o,c.type,h):c.hasOwnProperty("defaultValue")&&rr(o,c.type,Ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function rt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function rr(o,c,h){(c!=="number"||pt(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var R=Array.isArray;function L(o,c,h,g){if(o=o.options,c){c={};for(var k=0;k<h.length;k++)c["$"+h[k]]=!0;for(h=0;h<o.length;h++)k=c.hasOwnProperty("$"+o[h].value),o[h].selected!==k&&(o[h].selected=k),k&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Ke(h),c=null,k=0;k<o.length;k++){if(o[k].value===h){o[k].selected=!0,g&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function H(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return le({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ke(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(R(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Ke(h)}}function Ee(o,c){var h=Ke(c.value),g=Ke(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Te(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Fe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Fe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Me,ze=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,k){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,k)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Me.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function bt(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(o){ar.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Et[c]=Et[o]})});function $t(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Et.hasOwnProperty(o)&&Et[o]?(""+c).trim():c+"px"}function We(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,k=$t(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,k):o[h]=k}}var Ye=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function at(o,c){if(c){if(Ye[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function jt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gt=null;function Xt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ht=null,vr=null,Zt=null;function lr(o){if(o=$u(o)){if(typeof Ht!="function")throw Error(r(280));var c=o.stateNode;c&&(c=mf(c),Ht(o.stateNode,o.type,c))}}function Qt(o){vr?Zt?Zt.push(o):Zt=[o]:vr=o}function hr(){if(vr){var o=vr,c=Zt;if(Zt=vr=null,lr(o),c)for(o=0;o<c.length;o++)lr(c[o])}}function cr(o,c){return o(c)}function te(){}var Xe=!1;function ot(o,c,h){if(Xe)return o(c,h);Xe=!0;try{return cr(o,c,h)}finally{Xe=!1,(vr!==null||Zt!==null)&&(te(),hr())}}function At(o,c){var h=o.stateNode;if(h===null)return null;var g=mf(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var er=!1;if(u)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){er=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{er=!1}function Dr(o,c,h,g,k,S,E,z,X){var xe=Array.prototype.slice.call(arguments,3);try{c.apply(h,xe)}catch(Ue){this.onError(Ue)}}var ir=!1,Kt=null,ur=!1,xr=null,Er={onError:function(o){ir=!0,Kt=o}};function fr(o,c,h,g,k,S,E,z,X){ir=!1,Kt=null,Dr.apply(Er,arguments)}function br(o,c,h,g,k,S,E,z,X){if(fr.apply(this,arguments),ir){if(ir){var xe=Kt;ir=!1,Kt=null}else throw Error(r(198));ur||(ur=!0,xr=xe)}}function Gt(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Lt(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function $r(o){if(Gt(o)!==o)throw Error(r(188))}function or(o){var c=o.alternate;if(!c){if(c=Gt(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var k=h.return;if(k===null)break;var S=k.alternate;if(S===null){if(g=k.return,g!==null){h=g;continue}break}if(k.child===S.child){for(S=k.child;S;){if(S===h)return $r(k),o;if(S===g)return $r(k),c;S=S.sibling}throw Error(r(188))}if(h.return!==g.return)h=k,g=S;else{for(var E=!1,z=k.child;z;){if(z===h){E=!0,h=k,g=S;break}if(z===g){E=!0,g=k,h=S;break}z=z.sibling}if(!E){for(z=S.child;z;){if(z===h){E=!0,h=S,g=k;break}if(z===g){E=!0,g=S,h=k;break}z=z.sibling}if(!E)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function Lr(o){return o=or(o),o!==null?Wn(o):null}function Wn(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Wn(o);if(c!==null)return c;o=o.sibling}return null}var cs=t.unstable_scheduleCallback,An=t.unstable_cancelCallback,es=t.unstable_shouldYield,us=t.unstable_requestPaint,nr=t.unstable_now,xn=t.unstable_getCurrentPriorityLevel,kr=t.unstable_ImmediatePriority,Pn=t.unstable_UserBlockingPriority,ds=t.unstable_NormalPriority,On=t.unstable_LowPriority,js=t.unstable_IdlePriority,Tn=null,Vr=null;function J(o){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Tn,o,void 0,(o.current.flags&128)===128)}catch{}}var ye=Math.clz32?Math.clz32:I,He=Math.log,Pe=Math.LN2;function I(o){return o>>>=0,o===0?32:31-(He(o)/Pe|0)|0}var W=64,Z=4194304;function Ce(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ge(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,k=o.suspendedLanes,S=o.pingedLanes,E=h&268435455;if(E!==0){var z=E&~k;z!==0?g=Ce(z):(S&=E,S!==0&&(g=Ce(S)))}else E=h&~k,E!==0?g=Ce(E):S!==0&&(g=Ce(S));if(g===0)return 0;if(c!==0&&c!==g&&(c&k)===0&&(k=g&-g,S=c&-c,k>=S||k===16&&(S&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-ye(c),k=1<<h,g|=o[h],c&=~k;return g}function Se(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,k=o.expirationTimes,S=o.pendingLanes;0<S;){var E=31-ye(S),z=1<<E,X=k[E];X===-1?((z&h)===0||(z&g)!==0)&&(k[E]=Se(z,c)):X<=c&&(o.expiredLanes|=z),S&=~z}}function Vt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Nr(){var o=W;return W<<=1,(W&4194240)===0&&(W=64),o}function Ve(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function kt(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ye(c),o[c]=h}function yt(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var k=31-ye(h),S=1<<k;c[k]=0,g[k]=-1,o[k]=-1,h&=~S}}function Sr(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-ye(h),k=1<<g;k&c|o[g]&c&&(o[g]|=c),h&=~k}}var ht=0;function mr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var pr,fn,hn,Us,va,fs=!1,In=[],Br=null,ks=null,Dn=null,qr=new Map,$n=new Map,wn=[],yo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ps(o,c){switch(o){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":qr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(c.pointerId)}}function ci(o,c,h,g,k,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[k]},c!==null&&(c=$u(c),c!==null&&fn(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function vo(o,c,h,g,k){switch(c){case"focusin":return Br=ci(Br,o,c,h,g,k),!0;case"dragenter":return ks=ci(ks,o,c,h,g,k),!0;case"mouseover":return Dn=ci(Dn,o,c,h,g,k),!0;case"pointerover":var S=k.pointerId;return qr.set(S,ci(qr.get(S)||null,o,c,h,g,k)),!0;case"gotpointercapture":return S=k.pointerId,$n.set(S,ci($n.get(S)||null,o,c,h,g,k)),!0}return!1}function ll(o){var c=cl(o.target);if(c!==null){var h=Gt(c);if(h!==null){if(c=h.tag,c===13){if(c=Lt(h),c!==null){o.blockedOn=c,va(o.priority,function(){hn(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ui(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=hi(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);gt=g,h.target.dispatchEvent(g),gt=null}else return c=$u(h),c!==null&&fn(c),o.blockedOn=h,!1;c.shift()}return!0}function xo(o,c,h){ui(o)&&h.delete(c)}function di(){fs=!1,Br!==null&&ui(Br)&&(Br=null),ks!==null&&ui(ks)&&(ks=null),Dn!==null&&ui(Dn)&&(Dn=null),qr.forEach(xo),$n.forEach(xo)}function fi(o,c){o.blockedOn===c&&(o.blockedOn=null,fs||(fs=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,di)))}function xa(o){function c(k){return fi(k,o)}if(0<In.length){fi(In[0],o);for(var h=1;h<In.length;h++){var g=In[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Br!==null&&fi(Br,o),ks!==null&&fi(ks,o),Dn!==null&&fi(Dn,o),qr.forEach(c),$n.forEach(c),h=0;h<wn.length;h++)g=wn[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<wn.length&&(h=wn[0],h.blockedOn===null);)ll(h),h.blockedOn===null&&wn.shift()}var Os=T.ReactCurrentBatchConfig,wa=!0;function Su(o,c,h,g){var k=ht,S=Os.transition;Os.transition=null;try{ht=1,wo(o,c,h,g)}finally{ht=k,Os.transition=S}}function _u(o,c,h,g){var k=ht,S=Os.transition;Os.transition=null;try{ht=4,wo(o,c,h,g)}finally{ht=k,Os.transition=S}}function wo(o,c,h,g){if(wa){var k=hi(o,c,h,g);if(k===null)Wp(o,c,g,bo,h),Ps(o,g);else if(vo(k,o,c,h,g))g.stopPropagation();else if(Ps(o,g),c&4&&-1<yo.indexOf(o)){for(;k!==null;){var S=$u(k);if(S!==null&&pr(S),S=hi(o,c,h,g),S===null&&Wp(o,c,g,bo,h),S===k)break;k=S}k!==null&&g.stopPropagation()}else Wp(o,c,g,null,h)}}var bo=null;function hi(o,c,h,g){if(bo=null,o=Xt(g),o=cl(o),o!==null)if(c=Gt(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Lt(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return bo=o,null}function Ii(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xn()){case kr:return 1;case Pn:return 4;case ds:case On:return 16;case js:return 536870912;default:return 16}default:return 16}}var Ss=null,mi=null,Ts=null;function jo(){if(Ts)return Ts;var o,c=mi,h=c.length,g,k="value"in Ss?Ss.value:Ss.textContent,S=k.length;for(o=0;o<h&&c[o]===k[o];o++);var E=h-o;for(g=1;g<=E&&c[h-g]===k[S-g];g++);return Ts=k.slice(o,1<g?1-g:void 0)}function Di(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Is(){return!0}function ko(){return!1}function hs(o){function c(h,g,k,S,E){this._reactName=h,this._targetInst=k,this.type=g,this.nativeEvent=S,this.target=E,this.currentTarget=null;for(var z in o)o.hasOwnProperty(z)&&(h=o[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Is:ko,this.isPropagationStopped=ko,this}return le(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),c}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ba=hs(ms),ja=le({},ms,{view:0,detail:0}),D=hs(ja),se,fe,Ae,Qe=le({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:St,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ae&&(Ae&&o.type==="mousemove"?(se=o.screenX-Ae.screenX,fe=o.screenY-Ae.screenY):fe=se=0,Ae=o),se)},movementY:function(o){return"movementY"in o?o.movementY:fe}}),tt=hs(Qe),we=le({},Qe,{dataTransfer:0}),pe=hs(we),lt=le({},ja,{relatedTarget:0}),Rt=hs(lt),ut=le({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Pt=hs(ut),Mt=le({},ms,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Re=hs(Mt),Yt=le({},ms,{data:0}),st=hs(Yt),it={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},It={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tr(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=dt[o])?!!c[o]:!1}function St(){return tr}var O=le({},ja,{key:function(o){if(o.key){var c=it[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Di(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?It[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:St,charCode:function(o){return o.type==="keypress"?Di(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Di(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),he=hs(O),Ne=le({},Qe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nt=hs(Ne),_t=le({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:St}),wr=hs(_t),Jr=le({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),ta=hs(Jr),on=le({},Qe,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=hs(on),Tp=[9,13,27,32],Ip=u&&"CompositionEvent"in window,Nu=null;u&&"documentMode"in document&&(Nu=document.documentMode);var YT=u&&"TextEvent"in window&&!Nu,_b=u&&(!Ip||Nu&&8<Nu&&11>=Nu),Nb=" ",Cb=!1;function Eb(o,c){switch(o){case"keyup":return Tp.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ab(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ec=!1;function JT(o,c){switch(o){case"compositionend":return Ab(c);case"keypress":return c.which!==32?null:(Cb=!0,Nb);case"textInput":return o=c.data,o===Nb&&Cb?null:o;default:return null}}function XT(o,c){if(ec)return o==="compositionend"||!Ip&&Eb(o,c)?(o=jo(),Ts=mi=Ss=null,ec=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return _b&&c.locale!=="ko"?null:c.data;default:return null}}var QT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!QT[o.type]:c==="textarea"}function Ob(o,c,h,g){Qt(g),c=df(c,"onChange"),0<c.length&&(h=new ba("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Cu=null,Eu=null;function ZT(o){Yb(o,0)}function of(o){var c=ac(o);if(ne(c))return o}function eI(o,c){if(o==="change")return c}var Tb=!1;if(u){var Dp;if(u){var $p="oninput"in document;if(!$p){var Ib=document.createElement("div");Ib.setAttribute("oninput","return;"),$p=typeof Ib.oninput=="function"}Dp=$p}else Dp=!1;Tb=Dp&&(!document.documentMode||9<document.documentMode)}function Db(){Cu&&(Cu.detachEvent("onpropertychange",$b),Eu=Cu=null)}function $b(o){if(o.propertyName==="value"&&of(Eu)){var c=[];Ob(c,Eu,o,Xt(o)),ot(ZT,c)}}function tI(o,c,h){o==="focusin"?(Db(),Cu=c,Eu=h,Cu.attachEvent("onpropertychange",$b)):o==="focusout"&&Db()}function rI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return of(Eu)}function nI(o,c){if(o==="click")return of(c)}function sI(o,c){if(o==="input"||o==="change")return of(c)}function aI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Wa=typeof Object.is=="function"?Object.is:aI;function Au(o,c){if(Wa(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var k=h[g];if(!d.call(c,k)||!Wa(o[k],c[k]))return!1}return!0}function Rb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Mb(o,c){var h=Rb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Rb(h)}}function Fb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Fb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Lb(){for(var o=window,c=pt();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=pt(o.document)}return c}function Rp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function iI(o){var c=Lb(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Fb(h.ownerDocument.documentElement,h)){if(g!==null&&Rp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var k=h.textContent.length,S=Math.min(g.start,k);g=g.end===void 0?S:Math.min(g.end,k),!o.extend&&S>g&&(k=g,g=S,S=k),k=Mb(h,S);var E=Mb(h,g);k&&E&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==E.node||o.focusOffset!==E.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),o.removeAllRanges(),S>g?(o.addRange(c),o.extend(E.node,E.offset)):(c.setEnd(E.node,E.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var oI=u&&"documentMode"in document&&11>=document.documentMode,tc=null,Mp=null,Pu=null,Fp=!1;function zb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Fp||tc==null||tc!==pt(g)||(g=tc,"selectionStart"in g&&Rp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Pu&&Au(Pu,g)||(Pu=g,g=df(Mp,"onSelect"),0<g.length&&(c=new ba("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=tc)))}function lf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var rc={animationend:lf("Animation","AnimationEnd"),animationiteration:lf("Animation","AnimationIteration"),animationstart:lf("Animation","AnimationStart"),transitionend:lf("Transition","TransitionEnd")},Lp={},Ub={};u&&(Ub=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function cf(o){if(Lp[o])return Lp[o];if(!rc[o])return o;var c=rc[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Ub)return Lp[o]=c[h];return o}var Bb=cf("animationend"),Wb=cf("animationiteration"),Vb=cf("animationstart"),qb=cf("transitionend"),Hb=new Map,Kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(o,c){Hb.set(o,c),a(c,[o])}for(var zp=0;zp<Kb.length;zp++){var Up=Kb[zp],lI=Up.toLowerCase(),cI=Up[0].toUpperCase()+Up.slice(1);So(lI,"on"+cI)}So(Bb,"onAnimationEnd"),So(Wb,"onAnimationIteration"),So(Vb,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(qb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function Gb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,br(g,c,void 0,o),o.currentTarget=null}function Yb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],k=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var E=g.length-1;0<=E;E--){var z=g[E],X=z.instance,xe=z.currentTarget;if(z=z.listener,X!==S&&k.isPropagationStopped())break e;Gb(k,z,xe),S=X}else for(E=0;E<g.length;E++){if(z=g[E],X=z.instance,xe=z.currentTarget,z=z.listener,X!==S&&k.isPropagationStopped())break e;Gb(k,z,xe),S=X}}}if(ur)throw o=xr,ur=!1,xr=null,o}function Xr(o,c){var h=c[Yp];h===void 0&&(h=c[Yp]=new Set);var g=o+"__bubble";h.has(g)||(Jb(c,o,2,!1),h.add(g))}function Bp(o,c,h){var g=0;c&&(g|=4),Jb(h,o,g,c)}var uf="_reactListening"+Math.random().toString(36).slice(2);function Tu(o){if(!o[uf]){o[uf]=!0,n.forEach(function(h){h!=="selectionchange"&&(uI.has(h)||Bp(h,!1,o),Bp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[uf]||(c[uf]=!0,Bp("selectionchange",!1,c))}}function Jb(o,c,h,g){switch(Ii(c)){case 1:var k=Su;break;case 4:k=_u;break;default:k=wo}h=k.bind(null,c,h,o),k=void 0,!er||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),g?k!==void 0?o.addEventListener(c,h,{capture:!0,passive:k}):o.addEventListener(c,h,!0):k!==void 0?o.addEventListener(c,h,{passive:k}):o.addEventListener(c,h,!1)}function Wp(o,c,h,g,k){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var z=g.stateNode.containerInfo;if(z===k||z.nodeType===8&&z.parentNode===k)break;if(E===4)for(E=g.return;E!==null;){var X=E.tag;if((X===3||X===4)&&(X=E.stateNode.containerInfo,X===k||X.nodeType===8&&X.parentNode===k))return;E=E.return}for(;z!==null;){if(E=cl(z),E===null)return;if(X=E.tag,X===5||X===6){g=S=E;continue e}z=z.parentNode}}g=g.return}ot(function(){var xe=S,Ue=Xt(h),qe=[];e:{var Le=Hb.get(o);if(Le!==void 0){var mt=ba,Nt=o;switch(o){case"keypress":if(Di(h)===0)break e;case"keydown":case"keyup":mt=he;break;case"focusin":Nt="focus",mt=Rt;break;case"focusout":Nt="blur",mt=Rt;break;case"beforeblur":case"afterblur":mt=Rt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=tt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=pe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=wr;break;case Bb:case Wb:case Vb:mt=Pt;break;case qb:mt=ta;break;case"scroll":mt=D;break;case"wheel":mt=ka;break;case"copy":case"cut":case"paste":mt=Re;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=nt}var Ct=(c&4)!==0,bn=!Ct&&o==="scroll",de=Ct?Le!==null?Le+"Capture":null:Le;Ct=[];for(var re=xe,me;re!==null;){me=re;var Je=me.stateNode;if(me.tag===5&&Je!==null&&(me=Je,de!==null&&(Je=At(re,de),Je!=null&&Ct.push(Iu(re,Je,me)))),bn)break;re=re.return}0<Ct.length&&(Le=new mt(Le,Nt,null,h,Ue),qe.push({event:Le,listeners:Ct}))}}if((c&7)===0){e:{if(Le=o==="mouseover"||o==="pointerover",mt=o==="mouseout"||o==="pointerout",Le&&h!==gt&&(Nt=h.relatedTarget||h.fromElement)&&(cl(Nt)||Nt[$i]))break e;if((mt||Le)&&(Le=Ue.window===Ue?Ue:(Le=Ue.ownerDocument)?Le.defaultView||Le.parentWindow:window,mt?(Nt=h.relatedTarget||h.toElement,mt=xe,Nt=Nt?cl(Nt):null,Nt!==null&&(bn=Gt(Nt),Nt!==bn||Nt.tag!==5&&Nt.tag!==6)&&(Nt=null)):(mt=null,Nt=xe),mt!==Nt)){if(Ct=tt,Je="onMouseLeave",de="onMouseEnter",re="mouse",(o==="pointerout"||o==="pointerover")&&(Ct=nt,Je="onPointerLeave",de="onPointerEnter",re="pointer"),bn=mt==null?Le:ac(mt),me=Nt==null?Le:ac(Nt),Le=new Ct(Je,re+"leave",mt,h,Ue),Le.target=bn,Le.relatedTarget=me,Je=null,cl(Ue)===xe&&(Ct=new Ct(de,re+"enter",Nt,h,Ue),Ct.target=me,Ct.relatedTarget=bn,Je=Ct),bn=Je,mt&&Nt)t:{for(Ct=mt,de=Nt,re=0,me=Ct;me;me=nc(me))re++;for(me=0,Je=de;Je;Je=nc(Je))me++;for(;0<re-me;)Ct=nc(Ct),re--;for(;0<me-re;)de=nc(de),me--;for(;re--;){if(Ct===de||de!==null&&Ct===de.alternate)break t;Ct=nc(Ct),de=nc(de)}Ct=null}else Ct=null;mt!==null&&Xb(qe,Le,mt,Ct,!1),Nt!==null&&bn!==null&&Xb(qe,bn,Nt,Ct,!0)}}e:{if(Le=xe?ac(xe):window,mt=Le.nodeName&&Le.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Le.type==="file")var Ot=eI;else if(Pb(Le))if(Tb)Ot=sI;else{Ot=rI;var Ut=tI}else(mt=Le.nodeName)&&mt.toLowerCase()==="input"&&(Le.type==="checkbox"||Le.type==="radio")&&(Ot=nI);if(Ot&&(Ot=Ot(o,xe))){Ob(qe,Ot,h,Ue);break e}Ut&&Ut(o,Le,xe),o==="focusout"&&(Ut=Le._wrapperState)&&Ut.controlled&&Le.type==="number"&&rr(Le,"number",Le.value)}switch(Ut=xe?ac(xe):window,o){case"focusin":(Pb(Ut)||Ut.contentEditable==="true")&&(tc=Ut,Mp=xe,Pu=null);break;case"focusout":Pu=Mp=tc=null;break;case"mousedown":Fp=!0;break;case"contextmenu":case"mouseup":case"dragend":Fp=!1,zb(qe,h,Ue);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":zb(qe,h,Ue)}var Bt;if(Ip)e:{switch(o){case"compositionstart":var sr="onCompositionStart";break e;case"compositionend":sr="onCompositionEnd";break e;case"compositionupdate":sr="onCompositionUpdate";break e}sr=void 0}else ec?Eb(o,h)&&(sr="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(sr="onCompositionStart");sr&&(_b&&h.locale!=="ko"&&(ec||sr!=="onCompositionStart"?sr==="onCompositionEnd"&&ec&&(Bt=jo()):(Ss=Ue,mi="value"in Ss?Ss.value:Ss.textContent,ec=!0)),Ut=df(xe,sr),0<Ut.length&&(sr=new st(sr,o,null,h,Ue),qe.push({event:sr,listeners:Ut}),Bt?sr.data=Bt:(Bt=Ab(h),Bt!==null&&(sr.data=Bt)))),(Bt=YT?JT(o,h):XT(o,h))&&(xe=df(xe,"onBeforeInput"),0<xe.length&&(Ue=new st("onBeforeInput","beforeinput",null,h,Ue),qe.push({event:Ue,listeners:xe}),Ue.data=Bt))}Yb(qe,c)})}function Iu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function df(o,c){for(var h=c+"Capture",g=[];o!==null;){var k=o,S=k.stateNode;k.tag===5&&S!==null&&(k=S,S=At(o,h),S!=null&&g.unshift(Iu(o,S,k)),S=At(o,c),S!=null&&g.push(Iu(o,S,k))),o=o.return}return g}function nc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Xb(o,c,h,g,k){for(var S=c._reactName,E=[];h!==null&&h!==g;){var z=h,X=z.alternate,xe=z.stateNode;if(X!==null&&X===g)break;z.tag===5&&xe!==null&&(z=xe,k?(X=At(h,S),X!=null&&E.unshift(Iu(h,X,z))):k||(X=At(h,S),X!=null&&E.push(Iu(h,X,z)))),h=h.return}E.length!==0&&o.push({event:c,listeners:E})}var dI=/\r\n?/g,fI=/\u0000|\uFFFD/g;function Qb(o){return(typeof o=="string"?o:""+o).replace(dI,`
`).replace(fI,"")}function ff(o,c,h){if(c=Qb(c),Qb(o)!==c&&h)throw Error(r(425))}function hf(){}var Vp=null,qp=null;function Hp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,mI=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(o){return Zb.resolve(null).then(o).catch(pI)}:Kp;function pI(o){setTimeout(function(){throw o})}function Gp(o,c){var h=c,g=0;do{var k=h.nextSibling;if(o.removeChild(h),k&&k.nodeType===8)if(h=k.data,h==="/$"){if(g===0){o.removeChild(k),xa(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=k}while(h);xa(c)}function _o(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function e1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var sc=Math.random().toString(36).slice(2),pi="__reactFiber$"+sc,Du="__reactProps$"+sc,$i="__reactContainer$"+sc,Yp="__reactEvents$"+sc,gI="__reactListeners$"+sc,yI="__reactHandles$"+sc;function cl(o){var c=o[pi];if(c)return c;for(var h=o.parentNode;h;){if(c=h[$i]||h[pi]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=e1(o);o!==null;){if(h=o[pi])return h;o=e1(o)}return c}o=h,h=o.parentNode}return null}function $u(o){return o=o[pi]||o[$i],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ac(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function mf(o){return o[Du]||null}var Jp=[],ic=-1;function No(o){return{current:o}}function Qr(o){0>ic||(o.current=Jp[ic],Jp[ic]=null,ic--)}function Hr(o,c){ic++,Jp[ic]=o.current,o.current=c}var Co={},_s=No(Co),Bs=No(!1),ul=Co;function oc(o,c){var h=o.type.contextTypes;if(!h)return Co;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var k={},S;for(S in h)k[S]=c[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=k),k}function Ws(o){return o=o.childContextTypes,o!=null}function pf(){Qr(Bs),Qr(_s)}function t1(o,c,h){if(_s.current!==Co)throw Error(r(168));Hr(_s,c),Hr(Bs,h)}function r1(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var k in g)if(!(k in c))throw Error(r(108,Ie(o)||"Unknown",k));return le({},h,g)}function gf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Co,ul=_s.current,Hr(_s,o),Hr(Bs,Bs.current),!0}function n1(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=r1(o,c,ul),g.__reactInternalMemoizedMergedChildContext=o,Qr(Bs),Qr(_s),Hr(_s,o)):Qr(Bs),Hr(Bs,h)}var Ri=null,yf=!1,Xp=!1;function s1(o){Ri===null?Ri=[o]:Ri.push(o)}function vI(o){yf=!0,s1(o)}function Eo(){if(!Xp&&Ri!==null){Xp=!0;var o=0,c=ht;try{var h=Ri;for(ht=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ri=null,yf=!1}catch(k){throw Ri!==null&&(Ri=Ri.slice(o+1)),cs(kr,Eo),k}finally{ht=c,Xp=!1}}return null}var lc=[],cc=0,vf=null,xf=0,Sa=[],_a=0,dl=null,Mi=1,Fi="";function fl(o,c){lc[cc++]=xf,lc[cc++]=vf,vf=o,xf=c}function a1(o,c,h){Sa[_a++]=Mi,Sa[_a++]=Fi,Sa[_a++]=dl,dl=o;var g=Mi;o=Fi;var k=32-ye(g)-1;g&=~(1<<k),h+=1;var S=32-ye(c)+k;if(30<S){var E=k-k%5;S=(g&(1<<E)-1).toString(32),g>>=E,k-=E,Mi=1<<32-ye(c)+k|h<<k|g,Fi=S+o}else Mi=1<<S|h<<k|g,Fi=o}function Qp(o){o.return!==null&&(fl(o,1),a1(o,1,0))}function Zp(o){for(;o===vf;)vf=lc[--cc],lc[cc]=null,xf=lc[--cc],lc[cc]=null;for(;o===dl;)dl=Sa[--_a],Sa[_a]=null,Fi=Sa[--_a],Sa[_a]=null,Mi=Sa[--_a],Sa[_a]=null}var ra=null,na=null,rn=!1,Va=null;function i1(o,c){var h=Aa(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function o1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ra=o,na=_o(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ra=o,na=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=dl!==null?{id:Mi,overflow:Fi}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Aa(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ra=o,na=null,!0):!1;default:return!1}}function eg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function tg(o){if(rn){var c=na;if(c){var h=c;if(!o1(o,c)){if(eg(o))throw Error(r(418));c=_o(h.nextSibling);var g=ra;c&&o1(o,c)?i1(g,h):(o.flags=o.flags&-4097|2,rn=!1,ra=o)}}else{if(eg(o))throw Error(r(418));o.flags=o.flags&-4097|2,rn=!1,ra=o}}}function l1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ra=o}function wf(o){if(o!==ra)return!1;if(!rn)return l1(o),rn=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Hp(o.type,o.memoizedProps)),c&&(c=na)){if(eg(o))throw c1(),Error(r(418));for(;c;)i1(o,c),c=_o(c.nextSibling)}if(l1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){na=_o(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}na=null}}else na=ra?_o(o.stateNode.nextSibling):null;return!0}function c1(){for(var o=na;o;)o=_o(o.nextSibling)}function uc(){na=ra=null,rn=!1}function rg(o){Va===null?Va=[o]:Va.push(o)}var xI=T.ReactCurrentBatchConfig;function Ru(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var k=g,S=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(E){var z=k.refs;E===null?delete z[S]:z[S]=E},c._stringRef=S,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function bf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function u1(o){var c=o._init;return c(o._payload)}function d1(o){function c(de,re){if(o){var me=de.deletions;me===null?(de.deletions=[re],de.flags|=16):me.push(re)}}function h(de,re){if(!o)return null;for(;re!==null;)c(de,re),re=re.sibling;return null}function g(de,re){for(de=new Map;re!==null;)re.key!==null?de.set(re.key,re):de.set(re.index,re),re=re.sibling;return de}function k(de,re){return de=Ro(de,re),de.index=0,de.sibling=null,de}function S(de,re,me){return de.index=me,o?(me=de.alternate,me!==null?(me=me.index,me<re?(de.flags|=2,re):me):(de.flags|=2,re)):(de.flags|=1048576,re)}function E(de){return o&&de.alternate===null&&(de.flags|=2),de}function z(de,re,me,Je){return re===null||re.tag!==6?(re=Kg(me,de.mode,Je),re.return=de,re):(re=k(re,me),re.return=de,re)}function X(de,re,me,Je){var Ot=me.type;return Ot===M?Ue(de,re,me.props.children,Je,me.key):re!==null&&(re.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===ge&&u1(Ot)===re.type)?(Je=k(re,me.props),Je.ref=Ru(de,re,me),Je.return=de,Je):(Je=qf(me.type,me.key,me.props,null,de.mode,Je),Je.ref=Ru(de,re,me),Je.return=de,Je)}function xe(de,re,me,Je){return re===null||re.tag!==4||re.stateNode.containerInfo!==me.containerInfo||re.stateNode.implementation!==me.implementation?(re=Gg(me,de.mode,Je),re.return=de,re):(re=k(re,me.children||[]),re.return=de,re)}function Ue(de,re,me,Je,Ot){return re===null||re.tag!==7?(re=wl(me,de.mode,Je,Ot),re.return=de,re):(re=k(re,me),re.return=de,re)}function qe(de,re,me){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Kg(""+re,de.mode,me),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return me=qf(re.type,re.key,re.props,null,de.mode,me),me.ref=Ru(de,null,re),me.return=de,me;case P:return re=Gg(re,de.mode,me),re.return=de,re;case ge:var Je=re._init;return qe(de,Je(re._payload),me)}if(R(re)||ce(re))return re=wl(re,de.mode,me,null),re.return=de,re;bf(de,re)}return null}function Le(de,re,me,Je){var Ot=re!==null?re.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return Ot!==null?null:z(de,re,""+me,Je);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case A:return me.key===Ot?X(de,re,me,Je):null;case P:return me.key===Ot?xe(de,re,me,Je):null;case ge:return Ot=me._init,Le(de,re,Ot(me._payload),Je)}if(R(me)||ce(me))return Ot!==null?null:Ue(de,re,me,Je,null);bf(de,me)}return null}function mt(de,re,me,Je,Ot){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return de=de.get(me)||null,z(re,de,""+Je,Ot);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case A:return de=de.get(Je.key===null?me:Je.key)||null,X(re,de,Je,Ot);case P:return de=de.get(Je.key===null?me:Je.key)||null,xe(re,de,Je,Ot);case ge:var Ut=Je._init;return mt(de,re,me,Ut(Je._payload),Ot)}if(R(Je)||ce(Je))return de=de.get(me)||null,Ue(re,de,Je,Ot,null);bf(re,Je)}return null}function Nt(de,re,me,Je){for(var Ot=null,Ut=null,Bt=re,sr=re=0,ns=null;Bt!==null&&sr<me.length;sr++){Bt.index>sr?(ns=Bt,Bt=null):ns=Bt.sibling;var Or=Le(de,Bt,me[sr],Je);if(Or===null){Bt===null&&(Bt=ns);break}o&&Bt&&Or.alternate===null&&c(de,Bt),re=S(Or,re,sr),Ut===null?Ot=Or:Ut.sibling=Or,Ut=Or,Bt=ns}if(sr===me.length)return h(de,Bt),rn&&fl(de,sr),Ot;if(Bt===null){for(;sr<me.length;sr++)Bt=qe(de,me[sr],Je),Bt!==null&&(re=S(Bt,re,sr),Ut===null?Ot=Bt:Ut.sibling=Bt,Ut=Bt);return rn&&fl(de,sr),Ot}for(Bt=g(de,Bt);sr<me.length;sr++)ns=mt(Bt,de,sr,me[sr],Je),ns!==null&&(o&&ns.alternate!==null&&Bt.delete(ns.key===null?sr:ns.key),re=S(ns,re,sr),Ut===null?Ot=ns:Ut.sibling=ns,Ut=ns);return o&&Bt.forEach(function(Mo){return c(de,Mo)}),rn&&fl(de,sr),Ot}function Ct(de,re,me,Je){var Ot=ce(me);if(typeof Ot!="function")throw Error(r(150));if(me=Ot.call(me),me==null)throw Error(r(151));for(var Ut=Ot=null,Bt=re,sr=re=0,ns=null,Or=me.next();Bt!==null&&!Or.done;sr++,Or=me.next()){Bt.index>sr?(ns=Bt,Bt=null):ns=Bt.sibling;var Mo=Le(de,Bt,Or.value,Je);if(Mo===null){Bt===null&&(Bt=ns);break}o&&Bt&&Mo.alternate===null&&c(de,Bt),re=S(Mo,re,sr),Ut===null?Ot=Mo:Ut.sibling=Mo,Ut=Mo,Bt=ns}if(Or.done)return h(de,Bt),rn&&fl(de,sr),Ot;if(Bt===null){for(;!Or.done;sr++,Or=me.next())Or=qe(de,Or.value,Je),Or!==null&&(re=S(Or,re,sr),Ut===null?Ot=Or:Ut.sibling=Or,Ut=Or);return rn&&fl(de,sr),Ot}for(Bt=g(de,Bt);!Or.done;sr++,Or=me.next())Or=mt(Bt,de,sr,Or.value,Je),Or!==null&&(o&&Or.alternate!==null&&Bt.delete(Or.key===null?sr:Or.key),re=S(Or,re,sr),Ut===null?Ot=Or:Ut.sibling=Or,Ut=Or);return o&&Bt.forEach(function(QI){return c(de,QI)}),rn&&fl(de,sr),Ot}function bn(de,re,me,Je){if(typeof me=="object"&&me!==null&&me.type===M&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case A:e:{for(var Ot=me.key,Ut=re;Ut!==null;){if(Ut.key===Ot){if(Ot=me.type,Ot===M){if(Ut.tag===7){h(de,Ut.sibling),re=k(Ut,me.props.children),re.return=de,de=re;break e}}else if(Ut.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===ge&&u1(Ot)===Ut.type){h(de,Ut.sibling),re=k(Ut,me.props),re.ref=Ru(de,Ut,me),re.return=de,de=re;break e}h(de,Ut);break}else c(de,Ut);Ut=Ut.sibling}me.type===M?(re=wl(me.props.children,de.mode,Je,me.key),re.return=de,de=re):(Je=qf(me.type,me.key,me.props,null,de.mode,Je),Je.ref=Ru(de,re,me),Je.return=de,de=Je)}return E(de);case P:e:{for(Ut=me.key;re!==null;){if(re.key===Ut)if(re.tag===4&&re.stateNode.containerInfo===me.containerInfo&&re.stateNode.implementation===me.implementation){h(de,re.sibling),re=k(re,me.children||[]),re.return=de,de=re;break e}else{h(de,re);break}else c(de,re);re=re.sibling}re=Gg(me,de.mode,Je),re.return=de,de=re}return E(de);case ge:return Ut=me._init,bn(de,re,Ut(me._payload),Je)}if(R(me))return Nt(de,re,me,Je);if(ce(me))return Ct(de,re,me,Je);bf(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,re!==null&&re.tag===6?(h(de,re.sibling),re=k(re,me),re.return=de,de=re):(h(de,re),re=Kg(me,de.mode,Je),re.return=de,de=re),E(de)):h(de,re)}return bn}var dc=d1(!0),f1=d1(!1),jf=No(null),kf=null,fc=null,ng=null;function sg(){ng=fc=kf=null}function ag(o){var c=jf.current;Qr(jf),o._currentValue=c}function ig(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function hc(o,c){kf=o,ng=fc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Vs=!0),o.firstContext=null)}function Na(o){var c=o._currentValue;if(ng!==o)if(o={context:o,memoizedValue:c,next:null},fc===null){if(kf===null)throw Error(r(308));fc=o,kf.dependencies={lanes:0,firstContext:o}}else fc=fc.next=o;return c}var hl=null;function og(o){hl===null?hl=[o]:hl.push(o)}function h1(o,c,h,g){var k=c.interleaved;return k===null?(h.next=h,og(c)):(h.next=k.next,k.next=h),c.interleaved=h,Li(o,g)}function Li(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Ao=!1;function lg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function zi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Po(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Ar&2)!==0){var k=g.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),g.pending=c,Li(o,h)}return k=g.interleaved,k===null?(c.next=c,og(g)):(c.next=k.next,k.next=c),g.interleaved=c,Li(o,h)}function Sf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Sr(o,h)}}function p1(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var k=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?k=S=E:S=S.next=E,h=h.next}while(h!==null);S===null?k=S=c:S=S.next=c}else k=S=c;h={baseState:g.baseState,firstBaseUpdate:k,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function _f(o,c,h,g){var k=o.updateQueue;Ao=!1;var S=k.firstBaseUpdate,E=k.lastBaseUpdate,z=k.shared.pending;if(z!==null){k.shared.pending=null;var X=z,xe=X.next;X.next=null,E===null?S=xe:E.next=xe,E=X;var Ue=o.alternate;Ue!==null&&(Ue=Ue.updateQueue,z=Ue.lastBaseUpdate,z!==E&&(z===null?Ue.firstBaseUpdate=xe:z.next=xe,Ue.lastBaseUpdate=X))}if(S!==null){var qe=k.baseState;E=0,Ue=xe=X=null,z=S;do{var Le=z.lane,mt=z.eventTime;if((g&Le)===Le){Ue!==null&&(Ue=Ue.next={eventTime:mt,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Nt=o,Ct=z;switch(Le=c,mt=h,Ct.tag){case 1:if(Nt=Ct.payload,typeof Nt=="function"){qe=Nt.call(mt,qe,Le);break e}qe=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Ct.payload,Le=typeof Nt=="function"?Nt.call(mt,qe,Le):Nt,Le==null)break e;qe=le({},qe,Le);break e;case 2:Ao=!0}}z.callback!==null&&z.lane!==0&&(o.flags|=64,Le=k.effects,Le===null?k.effects=[z]:Le.push(z))}else mt={eventTime:mt,lane:Le,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ue===null?(xe=Ue=mt,X=qe):Ue=Ue.next=mt,E|=Le;if(z=z.next,z===null){if(z=k.shared.pending,z===null)break;Le=z,z=Le.next,Le.next=null,k.lastBaseUpdate=Le,k.shared.pending=null}}while(!0);if(Ue===null&&(X=qe),k.baseState=X,k.firstBaseUpdate=xe,k.lastBaseUpdate=Ue,c=k.shared.interleaved,c!==null){k=c;do E|=k.lane,k=k.next;while(k!==c)}else S===null&&(k.shared.lanes=0);gl|=E,o.lanes=E,o.memoizedState=qe}}function g1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],k=g.callback;if(k!==null){if(g.callback=null,g=h,typeof k!="function")throw Error(r(191,k));k.call(g)}}}var Mu={},gi=No(Mu),Fu=No(Mu),Lu=No(Mu);function ml(o){if(o===Mu)throw Error(r(174));return o}function cg(o,c){switch(Hr(Lu,c),Hr(Fu,o),Hr(gi,Mu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:wt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=wt(c,o)}Qr(gi),Hr(gi,c)}function mc(){Qr(gi),Qr(Fu),Qr(Lu)}function y1(o){ml(Lu.current);var c=ml(gi.current),h=wt(c,o.type);c!==h&&(Hr(Fu,o),Hr(gi,h))}function ug(o){Fu.current===o&&(Qr(gi),Qr(Fu))}var ln=No(0);function Nf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var dg=[];function fg(){for(var o=0;o<dg.length;o++)dg[o]._workInProgressVersionPrimary=null;dg.length=0}var Cf=T.ReactCurrentDispatcher,hg=T.ReactCurrentBatchConfig,pl=0,cn=null,Vn=null,ts=null,Ef=!1,zu=!1,Uu=0,wI=0;function Ns(){throw Error(r(321))}function mg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Wa(o[h],c[h]))return!1;return!0}function pg(o,c,h,g,k,S){if(pl=S,cn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Cf.current=o===null||o.memoizedState===null?SI:_I,o=h(g,k),zu){S=0;do{if(zu=!1,Uu=0,25<=S)throw Error(r(301));S+=1,ts=Vn=null,c.updateQueue=null,Cf.current=NI,o=h(g,k)}while(zu)}if(Cf.current=Of,c=Vn!==null&&Vn.next!==null,pl=0,ts=Vn=cn=null,Ef=!1,c)throw Error(r(300));return o}function gg(){var o=Uu!==0;return Uu=0,o}function yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?cn.memoizedState=ts=o:ts=ts.next=o,ts}function Ca(){if(Vn===null){var o=cn.alternate;o=o!==null?o.memoizedState:null}else o=Vn.next;var c=ts===null?cn.memoizedState:ts.next;if(c!==null)ts=c,Vn=o;else{if(o===null)throw Error(r(310));Vn=o,o={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},ts===null?cn.memoizedState=ts=o:ts=ts.next=o}return ts}function Bu(o,c){return typeof c=="function"?c(o):c}function yg(o){var c=Ca(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=Vn,k=g.baseQueue,S=h.pending;if(S!==null){if(k!==null){var E=k.next;k.next=S.next,S.next=E}g.baseQueue=k=S,h.pending=null}if(k!==null){S=k.next,g=g.baseState;var z=E=null,X=null,xe=S;do{var Ue=xe.lane;if((pl&Ue)===Ue)X!==null&&(X=X.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),g=xe.hasEagerState?xe.eagerState:o(g,xe.action);else{var qe={lane:Ue,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};X===null?(z=X=qe,E=g):X=X.next=qe,cn.lanes|=Ue,gl|=Ue}xe=xe.next}while(xe!==null&&xe!==S);X===null?E=g:X.next=z,Wa(g,c.memoizedState)||(Vs=!0),c.memoizedState=g,c.baseState=E,c.baseQueue=X,h.lastRenderedState=g}if(o=h.interleaved,o!==null){k=o;do S=k.lane,cn.lanes|=S,gl|=S,k=k.next;while(k!==o)}else k===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function vg(o){var c=Ca(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,k=h.pending,S=c.memoizedState;if(k!==null){h.pending=null;var E=k=k.next;do S=o(S,E.action),E=E.next;while(E!==k);Wa(S,c.memoizedState)||(Vs=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,g]}function v1(){}function x1(o,c){var h=cn,g=Ca(),k=c(),S=!Wa(g.memoizedState,k);if(S&&(g.memoizedState=k,Vs=!0),g=g.queue,xg(j1.bind(null,h,g,o),[o]),g.getSnapshot!==c||S||ts!==null&&ts.memoizedState.tag&1){if(h.flags|=2048,Wu(9,b1.bind(null,h,g,k,c),void 0,null),rs===null)throw Error(r(349));(pl&30)!==0||w1(h,c,k)}return k}function w1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=cn.updateQueue,c===null?(c={lastEffect:null,stores:null},cn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function b1(o,c,h,g){c.value=h,c.getSnapshot=g,k1(c)&&S1(o)}function j1(o,c,h){return h(function(){k1(c)&&S1(o)})}function k1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Wa(o,h)}catch{return!0}}function S1(o){var c=Li(o,1);c!==null&&Ga(c,o,1,-1)}function _1(o){var c=yi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:o},c.queue=o,o=o.dispatch=kI.bind(null,cn,o),[c.memoizedState,o]}function Wu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=cn.updateQueue,c===null?(c={lastEffect:null,stores:null},cn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function N1(){return Ca().memoizedState}function Af(o,c,h,g){var k=yi();cn.flags|=o,k.memoizedState=Wu(1|c,h,void 0,g===void 0?null:g)}function Pf(o,c,h,g){var k=Ca();g=g===void 0?null:g;var S=void 0;if(Vn!==null){var E=Vn.memoizedState;if(S=E.destroy,g!==null&&mg(g,E.deps)){k.memoizedState=Wu(c,h,S,g);return}}cn.flags|=o,k.memoizedState=Wu(1|c,h,S,g)}function C1(o,c){return Af(8390656,8,o,c)}function xg(o,c){return Pf(2048,8,o,c)}function E1(o,c){return Pf(4,2,o,c)}function A1(o,c){return Pf(4,4,o,c)}function P1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function O1(o,c,h){return h=h!=null?h.concat([o]):null,Pf(4,4,P1.bind(null,c,o),h)}function wg(){}function T1(o,c){var h=Ca();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&mg(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function I1(o,c){var h=Ca();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&mg(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function D1(o,c,h){return(pl&21)===0?(o.baseState&&(o.baseState=!1,Vs=!0),o.memoizedState=h):(Wa(h,c)||(h=Nr(),cn.lanes|=h,gl|=h,o.baseState=!0),c)}function bI(o,c){var h=ht;ht=h!==0&&4>h?h:4,o(!0);var g=hg.transition;hg.transition={};try{o(!1),c()}finally{ht=h,hg.transition=g}}function $1(){return Ca().memoizedState}function jI(o,c,h){var g=Do(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},R1(o))M1(c,h);else if(h=h1(o,c,h,g),h!==null){var k=$s();Ga(h,o,g,k),F1(h,c,g)}}function kI(o,c,h){var g=Do(o),k={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(R1(o))M1(c,k);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var E=c.lastRenderedState,z=S(E,h);if(k.hasEagerState=!0,k.eagerState=z,Wa(z,E)){var X=c.interleaved;X===null?(k.next=k,og(c)):(k.next=X.next,X.next=k),c.interleaved=k;return}}catch{}finally{}h=h1(o,c,k,g),h!==null&&(k=$s(),Ga(h,o,g,k),F1(h,c,g))}}function R1(o){var c=o.alternate;return o===cn||c!==null&&c===cn}function M1(o,c){zu=Ef=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function F1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Sr(o,h)}}var Of={readContext:Na,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},SI={readContext:Na,useCallback:function(o,c){return yi().memoizedState=[o,c===void 0?null:c],o},useContext:Na,useEffect:C1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Af(4194308,4,P1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Af(4194308,4,o,c)},useInsertionEffect:function(o,c){return Af(4,2,o,c)},useMemo:function(o,c){var h=yi();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=yi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=jI.bind(null,cn,o),[g.memoizedState,o]},useRef:function(o){var c=yi();return o={current:o},c.memoizedState=o},useState:_1,useDebugValue:wg,useDeferredValue:function(o){return yi().memoizedState=o},useTransition:function(){var o=_1(!1),c=o[0];return o=bI.bind(null,o[1]),yi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=cn,k=yi();if(rn){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),rs===null)throw Error(r(349));(pl&30)!==0||w1(g,c,h)}k.memoizedState=h;var S={value:h,getSnapshot:c};return k.queue=S,C1(j1.bind(null,g,S,o),[o]),g.flags|=2048,Wu(9,b1.bind(null,g,S,h,c),void 0,null),h},useId:function(){var o=yi(),c=rs.identifierPrefix;if(rn){var h=Fi,g=Mi;h=(g&~(1<<32-ye(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Uu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=wI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},_I={readContext:Na,useCallback:T1,useContext:Na,useEffect:xg,useImperativeHandle:O1,useInsertionEffect:E1,useLayoutEffect:A1,useMemo:I1,useReducer:yg,useRef:N1,useState:function(){return yg(Bu)},useDebugValue:wg,useDeferredValue:function(o){var c=Ca();return D1(c,Vn.memoizedState,o)},useTransition:function(){var o=yg(Bu)[0],c=Ca().memoizedState;return[o,c]},useMutableSource:v1,useSyncExternalStore:x1,useId:$1,unstable_isNewReconciler:!1},NI={readContext:Na,useCallback:T1,useContext:Na,useEffect:xg,useImperativeHandle:O1,useInsertionEffect:E1,useLayoutEffect:A1,useMemo:I1,useReducer:vg,useRef:N1,useState:function(){return vg(Bu)},useDebugValue:wg,useDeferredValue:function(o){var c=Ca();return Vn===null?c.memoizedState=o:D1(c,Vn.memoizedState,o)},useTransition:function(){var o=vg(Bu)[0],c=Ca().memoizedState;return[o,c]},useMutableSource:v1,useSyncExternalStore:x1,useId:$1,unstable_isNewReconciler:!1};function qa(o,c){if(o&&o.defaultProps){c=le({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function bg(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:le({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Tf={isMounted:function(o){return(o=o._reactInternals)?Gt(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=$s(),k=Do(o),S=zi(g,k);S.payload=c,h!=null&&(S.callback=h),c=Po(o,S,k),c!==null&&(Ga(c,o,k,g),Sf(c,o,k))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=$s(),k=Do(o),S=zi(g,k);S.tag=1,S.payload=c,h!=null&&(S.callback=h),c=Po(o,S,k),c!==null&&(Ga(c,o,k,g),Sf(c,o,k))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=$s(),g=Do(o),k=zi(h,g);k.tag=2,c!=null&&(k.callback=c),c=Po(o,k,g),c!==null&&(Ga(c,o,g,h),Sf(c,o,g))}};function L1(o,c,h,g,k,S,E){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,E):c.prototype&&c.prototype.isPureReactComponent?!Au(h,g)||!Au(k,S):!0}function z1(o,c,h){var g=!1,k=Co,S=c.contextType;return typeof S=="object"&&S!==null?S=Na(S):(k=Ws(c)?ul:_s.current,g=c.contextTypes,S=(g=g!=null)?oc(o,k):Co),c=new c(h,S),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Tf,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=S),c}function U1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Tf.enqueueReplaceState(c,c.state,null)}function jg(o,c,h,g){var k=o.stateNode;k.props=h,k.state=o.memoizedState,k.refs={},lg(o);var S=c.contextType;typeof S=="object"&&S!==null?k.context=Na(S):(S=Ws(c)?ul:_s.current,k.context=oc(o,S)),k.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(bg(o,c,S,h),k.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&Tf.enqueueReplaceState(k,k.state,null),_f(o,h,k,g),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function pc(o,c){try{var h="",g=c;do h+=Oe(g),g=g.return;while(g);var k=h}catch(S){k=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:c,stack:k,digest:null}}function kg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Sg(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var CI=typeof WeakMap=="function"?WeakMap:Map;function B1(o,c,h){h=zi(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Lf||(Lf=!0,Lg=g),Sg(o,c)},h}function W1(o,c,h){h=zi(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var k=c.value;h.payload=function(){return g(k)},h.callback=function(){Sg(o,c)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){Sg(o,c),typeof g!="function"&&(To===null?To=new Set([this]):To.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})}),h}function V1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new CI;var k=new Set;g.set(c,k)}else k=g.get(c),k===void 0&&(k=new Set,g.set(c,k));k.has(h)||(k.add(h),o=UI.bind(null,o,c,h),c.then(o,o))}function q1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function H1(o,c,h,g,k){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=zi(-1,1),c.tag=2,Po(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var EI=T.ReactCurrentOwner,Vs=!1;function Ds(o,c,h,g){c.child=o===null?f1(c,null,h,g):dc(c,o.child,h,g)}function K1(o,c,h,g,k){h=h.render;var S=c.ref;return hc(c,k),g=pg(o,c,h,g,S,k),h=gg(),o!==null&&!Vs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Ui(o,c,k)):(rn&&h&&Qp(c),c.flags|=1,Ds(o,c,g,k),c.child)}function G1(o,c,h,g,k){if(o===null){var S=h.type;return typeof S=="function"&&!Hg(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=S,Y1(o,c,S,g,k)):(o=qf(h.type,null,g,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,(o.lanes&k)===0){var E=S.memoizedProps;if(h=h.compare,h=h!==null?h:Au,h(E,g)&&o.ref===c.ref)return Ui(o,c,k)}return c.flags|=1,o=Ro(S,g),o.ref=c.ref,o.return=c,c.child=o}function Y1(o,c,h,g,k){if(o!==null){var S=o.memoizedProps;if(Au(S,g)&&o.ref===c.ref)if(Vs=!1,c.pendingProps=g=S,(o.lanes&k)!==0)(o.flags&131072)!==0&&(Vs=!0);else return c.lanes=o.lanes,Ui(o,c,k)}return _g(o,c,h,g,k)}function J1(o,c,h){var g=c.pendingProps,k=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(yc,sa),sa|=h;else{if((h&1073741824)===0)return o=S!==null?S.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Hr(yc,sa),sa|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:h,Hr(yc,sa),sa|=g}else S!==null?(g=S.baseLanes|h,c.memoizedState=null):g=h,Hr(yc,sa),sa|=g;return Ds(o,c,k,h),c.child}function X1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function _g(o,c,h,g,k){var S=Ws(h)?ul:_s.current;return S=oc(c,S),hc(c,k),h=pg(o,c,h,g,S,k),g=gg(),o!==null&&!Vs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Ui(o,c,k)):(rn&&g&&Qp(c),c.flags|=1,Ds(o,c,h,k),c.child)}function Q1(o,c,h,g,k){if(Ws(h)){var S=!0;gf(c)}else S=!1;if(hc(c,k),c.stateNode===null)Df(o,c),z1(c,h,g),jg(c,h,g,k),g=!0;else if(o===null){var E=c.stateNode,z=c.memoizedProps;E.props=z;var X=E.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=Na(xe):(xe=Ws(h)?ul:_s.current,xe=oc(c,xe));var Ue=h.getDerivedStateFromProps,qe=typeof Ue=="function"||typeof E.getSnapshotBeforeUpdate=="function";qe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z!==g||X!==xe)&&U1(c,E,g,xe),Ao=!1;var Le=c.memoizedState;E.state=Le,_f(c,g,E,k),X=c.memoizedState,z!==g||Le!==X||Bs.current||Ao?(typeof Ue=="function"&&(bg(c,h,Ue,g),X=c.memoizedState),(z=Ao||L1(c,h,z,g,Le,X,xe))?(qe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=X),E.props=g,E.state=X,E.context=xe,g=z):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{E=c.stateNode,m1(o,c),z=c.memoizedProps,xe=c.type===c.elementType?z:qa(c.type,z),E.props=xe,qe=c.pendingProps,Le=E.context,X=h.contextType,typeof X=="object"&&X!==null?X=Na(X):(X=Ws(h)?ul:_s.current,X=oc(c,X));var mt=h.getDerivedStateFromProps;(Ue=typeof mt=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z!==qe||Le!==X)&&U1(c,E,g,X),Ao=!1,Le=c.memoizedState,E.state=Le,_f(c,g,E,k);var Nt=c.memoizedState;z!==qe||Le!==Nt||Bs.current||Ao?(typeof mt=="function"&&(bg(c,h,mt,g),Nt=c.memoizedState),(xe=Ao||L1(c,h,xe,g,Le,Nt,X)||!1)?(Ue||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,Nt,X),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,Nt,X)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||z===o.memoizedProps&&Le===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Le===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Nt),E.props=g,E.state=Nt,E.context=X,g=xe):(typeof E.componentDidUpdate!="function"||z===o.memoizedProps&&Le===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Le===o.memoizedState||(c.flags|=1024),g=!1)}return Ng(o,c,h,g,S,k)}function Ng(o,c,h,g,k,S){X1(o,c);var E=(c.flags&128)!==0;if(!g&&!E)return k&&n1(c,h,!1),Ui(o,c,S);g=c.stateNode,EI.current=c;var z=E&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&E?(c.child=dc(c,o.child,null,S),c.child=dc(c,null,z,S)):Ds(o,c,z,S),c.memoizedState=g.state,k&&n1(c,h,!0),c.child}function Z1(o){var c=o.stateNode;c.pendingContext?t1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&t1(o,c.context,!1),cg(o,c.containerInfo)}function ej(o,c,h,g,k){return uc(),rg(k),c.flags|=256,Ds(o,c,h,g),c.child}var Cg={dehydrated:null,treeContext:null,retryLane:0};function Eg(o){return{baseLanes:o,cachePool:null,transitions:null}}function tj(o,c,h){var g=c.pendingProps,k=ln.current,S=!1,E=(c.flags&128)!==0,z;if((z=E)||(z=o!==null&&o.memoizedState===null?!1:(k&2)!==0),z?(S=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),Hr(ln,k&1),o===null)return tg(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(E=g.children,o=g.fallback,S?(g=c.mode,S=c.child,E={mode:"hidden",children:E},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=E):S=Hf(E,g,0,null),o=wl(o,g,h,null),S.return=c,o.return=c,S.sibling=o,c.child=S,c.child.memoizedState=Eg(h),c.memoizedState=Cg,o):Ag(c,E));if(k=o.memoizedState,k!==null&&(z=k.dehydrated,z!==null))return AI(o,c,E,g,z,k,h);if(S){S=g.fallback,E=c.mode,k=o.child,z=k.sibling;var X={mode:"hidden",children:g.children};return(E&1)===0&&c.child!==k?(g=c.child,g.childLanes=0,g.pendingProps=X,c.deletions=null):(g=Ro(k,X),g.subtreeFlags=k.subtreeFlags&14680064),z!==null?S=Ro(z,S):(S=wl(S,E,h,null),S.flags|=2),S.return=c,g.return=c,g.sibling=S,c.child=g,g=S,S=c.child,E=o.child.memoizedState,E=E===null?Eg(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},S.memoizedState=E,S.childLanes=o.childLanes&~h,c.memoizedState=Cg,g}return S=o.child,o=S.sibling,g=Ro(S,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function Ag(o,c){return c=Hf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function If(o,c,h,g){return g!==null&&rg(g),dc(c,o.child,null,h),o=Ag(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function AI(o,c,h,g,k,S,E){if(h)return c.flags&256?(c.flags&=-257,g=kg(Error(r(422))),If(o,c,E,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(S=g.fallback,k=c.mode,g=Hf({mode:"visible",children:g.children},k,0,null),S=wl(S,k,E,null),S.flags|=2,g.return=c,S.return=c,g.sibling=S,c.child=g,(c.mode&1)!==0&&dc(c,o.child,null,E),c.child.memoizedState=Eg(E),c.memoizedState=Cg,S);if((c.mode&1)===0)return If(o,c,E,null);if(k.data==="$!"){if(g=k.nextSibling&&k.nextSibling.dataset,g)var z=g.dgst;return g=z,S=Error(r(419)),g=kg(S,g,void 0),If(o,c,E,g)}if(z=(E&o.childLanes)!==0,Vs||z){if(g=rs,g!==null){switch(E&-E){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(g.suspendedLanes|E))!==0?0:k,k!==0&&k!==S.retryLane&&(S.retryLane=k,Li(o,k),Ga(g,o,k,-1))}return qg(),g=kg(Error(r(421))),If(o,c,E,g)}return k.data==="$?"?(c.flags|=128,c.child=o.child,c=BI.bind(null,o),k._reactRetry=c,null):(o=S.treeContext,na=_o(k.nextSibling),ra=c,rn=!0,Va=null,o!==null&&(Sa[_a++]=Mi,Sa[_a++]=Fi,Sa[_a++]=dl,Mi=o.id,Fi=o.overflow,dl=c),c=Ag(c,g.children),c.flags|=4096,c)}function rj(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),ig(o.return,c,h)}function Pg(o,c,h,g,k){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:k}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=h,S.tailMode=k)}function nj(o,c,h){var g=c.pendingProps,k=g.revealOrder,S=g.tail;if(Ds(o,c,g.children,h),g=ln.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&rj(o,h,c);else if(o.tag===19)rj(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Hr(ln,g),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(h=c.child,k=null;h!==null;)o=h.alternate,o!==null&&Nf(o)===null&&(k=h),h=h.sibling;h=k,h===null?(k=c.child,c.child=null):(k=h.sibling,h.sibling=null),Pg(c,!1,k,h,S);break;case"backwards":for(h=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&Nf(o)===null){c.child=k;break}o=k.sibling,k.sibling=h,h=k,k=o}Pg(c,!0,h,null,S);break;case"together":Pg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Df(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ui(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),gl|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=Ro(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Ro(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function PI(o,c,h){switch(c.tag){case 3:Z1(c),uc();break;case 5:y1(c);break;case 1:Ws(c.type)&&gf(c);break;case 4:cg(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,k=c.memoizedProps.value;Hr(jf,g._currentValue),g._currentValue=k;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Hr(ln,ln.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?tj(o,c,h):(Hr(ln,ln.current&1),o=Ui(o,c,h),o!==null?o.sibling:null);Hr(ln,ln.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return nj(o,c,h);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Hr(ln,ln.current),g)break;return null;case 22:case 23:return c.lanes=0,J1(o,c,h)}return Ui(o,c,h)}var sj,Og,aj,ij;sj=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Og=function(){},aj=function(o,c,h,g){var k=o.memoizedProps;if(k!==g){o=c.stateNode,ml(gi.current);var S=null;switch(h){case"input":k=et(o,k),g=et(o,g),S=[];break;case"select":k=le({},k,{value:void 0}),g=le({},g,{value:void 0}),S=[];break;case"textarea":k=H(o,k),g=H(o,g),S=[];break;default:typeof k.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=hf)}at(h,g);var E;h=null;for(xe in k)if(!g.hasOwnProperty(xe)&&k.hasOwnProperty(xe)&&k[xe]!=null)if(xe==="style"){var z=k[xe];for(E in z)z.hasOwnProperty(E)&&(h||(h={}),h[E]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?S||(S=[]):(S=S||[]).push(xe,null));for(xe in g){var X=g[xe];if(z=k!=null?k[xe]:void 0,g.hasOwnProperty(xe)&&X!==z&&(X!=null||z!=null))if(xe==="style")if(z){for(E in z)!z.hasOwnProperty(E)||X&&X.hasOwnProperty(E)||(h||(h={}),h[E]="");for(E in X)X.hasOwnProperty(E)&&z[E]!==X[E]&&(h||(h={}),h[E]=X[E])}else h||(S||(S=[]),S.push(xe,h)),h=X;else xe==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,z=z?z.__html:void 0,X!=null&&z!==X&&(S=S||[]).push(xe,X)):xe==="children"?typeof X!="string"&&typeof X!="number"||(S=S||[]).push(xe,""+X):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(X!=null&&xe==="onScroll"&&Xr("scroll",o),S||z===X||(S=[])):(S=S||[]).push(xe,X))}h&&(S=S||[]).push("style",h);var xe=S;(c.updateQueue=xe)&&(c.flags|=4)}},ij=function(o,c,h,g){h!==g&&(c.flags|=4)};function Vu(o,c){if(!rn)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Cs(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var k=o.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags&14680064,g|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags,g|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function OI(o,c,h){var g=c.pendingProps;switch(Zp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(c),null;case 1:return Ws(c.type)&&pf(),Cs(c),null;case 3:return g=c.stateNode,mc(),Qr(Bs),Qr(_s),fg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(wf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Va!==null&&(Bg(Va),Va=null))),Og(o,c),Cs(c),null;case 5:ug(c);var k=ml(Lu.current);if(h=c.type,o!==null&&c.stateNode!=null)aj(o,c,h,g,k),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Cs(c),null}if(o=ml(gi.current),wf(c)){g=c.stateNode,h=c.type;var S=c.memoizedProps;switch(g[pi]=c,g[Du]=S,o=(c.mode&1)!==0,h){case"dialog":Xr("cancel",g),Xr("close",g);break;case"iframe":case"object":case"embed":Xr("load",g);break;case"video":case"audio":for(k=0;k<Ou.length;k++)Xr(Ou[k],g);break;case"source":Xr("error",g);break;case"img":case"image":case"link":Xr("error",g),Xr("load",g);break;case"details":Xr("toggle",g);break;case"input":Be(g,S),Xr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},Xr("invalid",g);break;case"textarea":ke(g,S),Xr("invalid",g)}at(h,S),k=null;for(var E in S)if(S.hasOwnProperty(E)){var z=S[E];E==="children"?typeof z=="string"?g.textContent!==z&&(S.suppressHydrationWarning!==!0&&ff(g.textContent,z,o),k=["children",z]):typeof z=="number"&&g.textContent!==""+z&&(S.suppressHydrationWarning!==!0&&ff(g.textContent,z,o),k=["children",""+z]):s.hasOwnProperty(E)&&z!=null&&E==="onScroll"&&Xr("scroll",g)}switch(h){case"input":ie(g),rt(g,S,!0);break;case"textarea":ie(g),Te(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=hf)}g=k,c.updateQueue=g,g!==null&&(c.flags|=4)}else{E=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Fe(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=E.createElement(h,{is:g.is}):(o=E.createElement(h),h==="select"&&(E=o,g.multiple?E.multiple=!0:g.size&&(E.size=g.size))):o=E.createElementNS(o,h),o[pi]=c,o[Du]=g,sj(o,c,!1,!1),c.stateNode=o;e:{switch(E=jt(h,g),h){case"dialog":Xr("cancel",o),Xr("close",o),k=g;break;case"iframe":case"object":case"embed":Xr("load",o),k=g;break;case"video":case"audio":for(k=0;k<Ou.length;k++)Xr(Ou[k],o);k=g;break;case"source":Xr("error",o),k=g;break;case"img":case"image":case"link":Xr("error",o),Xr("load",o),k=g;break;case"details":Xr("toggle",o),k=g;break;case"input":Be(o,g),k=et(o,g),Xr("invalid",o);break;case"option":k=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},k=le({},g,{value:void 0}),Xr("invalid",o);break;case"textarea":ke(o,g),k=H(o,g),Xr("invalid",o);break;default:k=g}at(h,k),z=k;for(S in z)if(z.hasOwnProperty(S)){var X=z[S];S==="style"?We(o,X):S==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&ze(o,X)):S==="children"?typeof X=="string"?(h!=="textarea"||X!=="")&&bt(o,X):typeof X=="number"&&bt(o,""+X):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(s.hasOwnProperty(S)?X!=null&&S==="onScroll"&&Xr("scroll",o):X!=null&&N(o,S,X,E))}switch(h){case"input":ie(o),rt(o,g,!1);break;case"textarea":ie(o),Te(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Ke(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?L(o,!!g.multiple,S,!1):g.defaultValue!=null&&L(o,!!g.multiple,g.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=hf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Cs(c),null;case 6:if(o&&c.stateNode!=null)ij(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=ml(Lu.current),ml(gi.current),wf(c)){if(g=c.stateNode,h=c.memoizedProps,g[pi]=c,(S=g.nodeValue!==h)&&(o=ra,o!==null))switch(o.tag){case 3:ff(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ff(g.nodeValue,h,(o.mode&1)!==0)}S&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[pi]=c,c.stateNode=g}return Cs(c),null;case 13:if(Qr(ln),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(rn&&na!==null&&(c.mode&1)!==0&&(c.flags&128)===0)c1(),uc(),c.flags|=98560,S=!1;else if(S=wf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!S)throw Error(r(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[pi]=c}else uc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Cs(c),S=!1}else Va!==null&&(Bg(Va),Va=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(ln.current&1)!==0?qn===0&&(qn=3):qg())),c.updateQueue!==null&&(c.flags|=4),Cs(c),null);case 4:return mc(),Og(o,c),o===null&&Tu(c.stateNode.containerInfo),Cs(c),null;case 10:return ag(c.type._context),Cs(c),null;case 17:return Ws(c.type)&&pf(),Cs(c),null;case 19:if(Qr(ln),S=c.memoizedState,S===null)return Cs(c),null;if(g=(c.flags&128)!==0,E=S.rendering,E===null)if(g)Vu(S,!1);else{if(qn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(E=Nf(o),E!==null){for(c.flags|=128,Vu(S,!1),g=E.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)S=h,o=g,S.flags&=14680066,E=S.alternate,E===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=E.childLanes,S.lanes=E.lanes,S.child=E.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=E.memoizedProps,S.memoizedState=E.memoizedState,S.updateQueue=E.updateQueue,S.type=E.type,o=E.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Hr(ln,ln.current&1|2),c.child}o=o.sibling}S.tail!==null&&nr()>vc&&(c.flags|=128,g=!0,Vu(S,!1),c.lanes=4194304)}else{if(!g)if(o=Nf(E),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Vu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!E.alternate&&!rn)return Cs(c),null}else 2*nr()-S.renderingStartTime>vc&&h!==1073741824&&(c.flags|=128,g=!0,Vu(S,!1),c.lanes=4194304);S.isBackwards?(E.sibling=c.child,c.child=E):(h=S.last,h!==null?h.sibling=E:c.child=E,S.last=E)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=nr(),c.sibling=null,h=ln.current,Hr(ln,g?h&1|2:h&1),c):(Cs(c),null);case 22:case 23:return Vg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(sa&1073741824)!==0&&(Cs(c),c.subtreeFlags&6&&(c.flags|=8192)):Cs(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function TI(o,c){switch(Zp(c),c.tag){case 1:return Ws(c.type)&&pf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return mc(),Qr(Bs),Qr(_s),fg(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return ug(c),null;case 13:if(Qr(ln),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));uc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Qr(ln),null;case 4:return mc(),null;case 10:return ag(c.type._context),null;case 22:case 23:return Vg(),null;case 24:return null;default:return null}}var $f=!1,Es=!1,II=typeof WeakSet=="function"?WeakSet:Set,vt=null;function gc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){mn(o,c,g)}else h.current=null}function Tg(o,c,h){try{h()}catch(g){mn(o,c,g)}}var oj=!1;function DI(o,c){if(Vp=wa,o=Lb(),Rp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var k=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var E=0,z=-1,X=-1,xe=0,Ue=0,qe=o,Le=null;t:for(;;){for(var mt;qe!==h||k!==0&&qe.nodeType!==3||(z=E+k),qe!==S||g!==0&&qe.nodeType!==3||(X=E+g),qe.nodeType===3&&(E+=qe.nodeValue.length),(mt=qe.firstChild)!==null;)Le=qe,qe=mt;for(;;){if(qe===o)break t;if(Le===h&&++xe===k&&(z=E),Le===S&&++Ue===g&&(X=E),(mt=qe.nextSibling)!==null)break;qe=Le,Le=qe.parentNode}qe=mt}h=z===-1||X===-1?null:{start:z,end:X}}else h=null}h=h||{start:0,end:0}}else h=null;for(qp={focusedElem:o,selectionRange:h},wa=!1,vt=c;vt!==null;)if(c=vt,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,vt=o;else for(;vt!==null;){c=vt;try{var Nt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Nt!==null){var Ct=Nt.memoizedProps,bn=Nt.memoizedState,de=c.stateNode,re=de.getSnapshotBeforeUpdate(c.elementType===c.type?Ct:qa(c.type,Ct),bn);de.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var me=c.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Je){mn(c,c.return,Je)}if(o=c.sibling,o!==null){o.return=c.return,vt=o;break}vt=c.return}return Nt=oj,oj=!1,Nt}function qu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var k=g=g.next;do{if((k.tag&o)===o){var S=k.destroy;k.destroy=void 0,S!==void 0&&Tg(c,h,S)}k=k.next}while(k!==g)}}function Rf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Ig(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function lj(o){var c=o.alternate;c!==null&&(o.alternate=null,lj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[pi],delete c[Du],delete c[Yp],delete c[gI],delete c[yI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function cj(o){return o.tag===5||o.tag===3||o.tag===4}function uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Dg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=hf));else if(g!==4&&(o=o.child,o!==null))for(Dg(o,c,h),o=o.sibling;o!==null;)Dg(o,c,h),o=o.sibling}function $g(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for($g(o,c,h),o=o.sibling;o!==null;)$g(o,c,h),o=o.sibling}var ps=null,Ha=!1;function Oo(o,c,h){for(h=h.child;h!==null;)dj(o,c,h),h=h.sibling}function dj(o,c,h){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Tn,h)}catch{}switch(h.tag){case 5:Es||gc(h,c);case 6:var g=ps,k=Ha;ps=null,Oo(o,c,h),ps=g,Ha=k,ps!==null&&(Ha?(o=ps,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):ps.removeChild(h.stateNode));break;case 18:ps!==null&&(Ha?(o=ps,h=h.stateNode,o.nodeType===8?Gp(o.parentNode,h):o.nodeType===1&&Gp(o,h),xa(o)):Gp(ps,h.stateNode));break;case 4:g=ps,k=Ha,ps=h.stateNode.containerInfo,Ha=!0,Oo(o,c,h),ps=g,Ha=k;break;case 0:case 11:case 14:case 15:if(!Es&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){k=g=g.next;do{var S=k,E=S.destroy;S=S.tag,E!==void 0&&((S&2)!==0||(S&4)!==0)&&Tg(h,c,E),k=k.next}while(k!==g)}Oo(o,c,h);break;case 1:if(!Es&&(gc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(z){mn(h,c,z)}Oo(o,c,h);break;case 21:Oo(o,c,h);break;case 22:h.mode&1?(Es=(g=Es)||h.memoizedState!==null,Oo(o,c,h),Es=g):Oo(o,c,h);break;default:Oo(o,c,h)}}function fj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new II),c.forEach(function(g){var k=WI.bind(null,o,g);h.has(g)||(h.add(g),g.then(k,k))})}}function Ka(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var k=h[g];try{var S=o,E=c,z=E;e:for(;z!==null;){switch(z.tag){case 5:ps=z.stateNode,Ha=!1;break e;case 3:ps=z.stateNode.containerInfo,Ha=!0;break e;case 4:ps=z.stateNode.containerInfo,Ha=!0;break e}z=z.return}if(ps===null)throw Error(r(160));dj(S,E,k),ps=null,Ha=!1;var X=k.alternate;X!==null&&(X.return=null),k.return=null}catch(xe){mn(k,c,xe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)hj(c,o),c=c.sibling}function hj(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ka(c,o),vi(o),g&4){try{qu(3,o,o.return),Rf(3,o)}catch(Ct){mn(o,o.return,Ct)}try{qu(5,o,o.return)}catch(Ct){mn(o,o.return,Ct)}}break;case 1:Ka(c,o),vi(o),g&512&&h!==null&&gc(h,h.return);break;case 5:if(Ka(c,o),vi(o),g&512&&h!==null&&gc(h,h.return),o.flags&32){var k=o.stateNode;try{bt(k,"")}catch(Ct){mn(o,o.return,Ct)}}if(g&4&&(k=o.stateNode,k!=null)){var S=o.memoizedProps,E=h!==null?h.memoizedProps:S,z=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{z==="input"&&S.type==="radio"&&S.name!=null&&ft(k,S),jt(z,E);var xe=jt(z,S);for(E=0;E<X.length;E+=2){var Ue=X[E],qe=X[E+1];Ue==="style"?We(k,qe):Ue==="dangerouslySetInnerHTML"?ze(k,qe):Ue==="children"?bt(k,qe):N(k,Ue,qe,xe)}switch(z){case"input":De(k,S);break;case"textarea":Ee(k,S);break;case"select":var Le=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!S.multiple;var mt=S.value;mt!=null?L(k,!!S.multiple,mt,!1):Le!==!!S.multiple&&(S.defaultValue!=null?L(k,!!S.multiple,S.defaultValue,!0):L(k,!!S.multiple,S.multiple?[]:"",!1))}k[Du]=S}catch(Ct){mn(o,o.return,Ct)}}break;case 6:if(Ka(c,o),vi(o),g&4){if(o.stateNode===null)throw Error(r(162));k=o.stateNode,S=o.memoizedProps;try{k.nodeValue=S}catch(Ct){mn(o,o.return,Ct)}}break;case 3:if(Ka(c,o),vi(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{xa(c.containerInfo)}catch(Ct){mn(o,o.return,Ct)}break;case 4:Ka(c,o),vi(o);break;case 13:Ka(c,o),vi(o),k=o.child,k.flags&8192&&(S=k.memoizedState!==null,k.stateNode.isHidden=S,!S||k.alternate!==null&&k.alternate.memoizedState!==null||(Fg=nr())),g&4&&fj(o);break;case 22:if(Ue=h!==null&&h.memoizedState!==null,o.mode&1?(Es=(xe=Es)||Ue,Ka(c,o),Es=xe):Ka(c,o),vi(o),g&8192){if(xe=o.memoizedState!==null,(o.stateNode.isHidden=xe)&&!Ue&&(o.mode&1)!==0)for(vt=o,Ue=o.child;Ue!==null;){for(qe=vt=Ue;vt!==null;){switch(Le=vt,mt=Le.child,Le.tag){case 0:case 11:case 14:case 15:qu(4,Le,Le.return);break;case 1:gc(Le,Le.return);var Nt=Le.stateNode;if(typeof Nt.componentWillUnmount=="function"){g=Le,h=Le.return;try{c=g,Nt.props=c.memoizedProps,Nt.state=c.memoizedState,Nt.componentWillUnmount()}catch(Ct){mn(g,h,Ct)}}break;case 5:gc(Le,Le.return);break;case 22:if(Le.memoizedState!==null){gj(qe);continue}}mt!==null?(mt.return=Le,vt=mt):gj(qe)}Ue=Ue.sibling}e:for(Ue=null,qe=o;;){if(qe.tag===5){if(Ue===null){Ue=qe;try{k=qe.stateNode,xe?(S=k.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(z=qe.stateNode,X=qe.memoizedProps.style,E=X!=null&&X.hasOwnProperty("display")?X.display:null,z.style.display=$t("display",E))}catch(Ct){mn(o,o.return,Ct)}}}else if(qe.tag===6){if(Ue===null)try{qe.stateNode.nodeValue=xe?"":qe.memoizedProps}catch(Ct){mn(o,o.return,Ct)}}else if((qe.tag!==22&&qe.tag!==23||qe.memoizedState===null||qe===o)&&qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===o)break e;for(;qe.sibling===null;){if(qe.return===null||qe.return===o)break e;Ue===qe&&(Ue=null),qe=qe.return}Ue===qe&&(Ue=null),qe.sibling.return=qe.return,qe=qe.sibling}}break;case 19:Ka(c,o),vi(o),g&4&&fj(o);break;case 21:break;default:Ka(c,o),vi(o)}}function vi(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(cj(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var k=g.stateNode;g.flags&32&&(bt(k,""),g.flags&=-33);var S=uj(o);$g(o,S,k);break;case 3:case 4:var E=g.stateNode.containerInfo,z=uj(o);Dg(o,z,E);break;default:throw Error(r(161))}}catch(X){mn(o,o.return,X)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function $I(o,c,h){vt=o,mj(o)}function mj(o,c,h){for(var g=(o.mode&1)!==0;vt!==null;){var k=vt,S=k.child;if(k.tag===22&&g){var E=k.memoizedState!==null||$f;if(!E){var z=k.alternate,X=z!==null&&z.memoizedState!==null||Es;z=$f;var xe=Es;if($f=E,(Es=X)&&!xe)for(vt=k;vt!==null;)E=vt,X=E.child,E.tag===22&&E.memoizedState!==null?yj(k):X!==null?(X.return=E,vt=X):yj(k);for(;S!==null;)vt=S,mj(S),S=S.sibling;vt=k,$f=z,Es=xe}pj(o)}else(k.subtreeFlags&8772)!==0&&S!==null?(S.return=k,vt=S):pj(o)}}function pj(o){for(;vt!==null;){var c=vt;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Es||Rf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Es)if(h===null)g.componentDidMount();else{var k=c.elementType===c.type?h.memoizedProps:qa(c.type,h.memoizedProps);g.componentDidUpdate(k,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&g1(c,S,g);break;case 3:var E=c.updateQueue;if(E!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}g1(c,E,h)}break;case 5:var z=c.stateNode;if(h===null&&c.flags&4){h=z;var X=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&h.focus();break;case"img":X.src&&(h.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var xe=c.alternate;if(xe!==null){var Ue=xe.memoizedState;if(Ue!==null){var qe=Ue.dehydrated;qe!==null&&xa(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Es||c.flags&512&&Ig(c)}catch(Le){mn(c,c.return,Le)}}if(c===o){vt=null;break}if(h=c.sibling,h!==null){h.return=c.return,vt=h;break}vt=c.return}}function gj(o){for(;vt!==null;){var c=vt;if(c===o){vt=null;break}var h=c.sibling;if(h!==null){h.return=c.return,vt=h;break}vt=c.return}}function yj(o){for(;vt!==null;){var c=vt;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Rf(4,c)}catch(X){mn(c,h,X)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var k=c.return;try{g.componentDidMount()}catch(X){mn(c,k,X)}}var S=c.return;try{Ig(c)}catch(X){mn(c,S,X)}break;case 5:var E=c.return;try{Ig(c)}catch(X){mn(c,E,X)}}}catch(X){mn(c,c.return,X)}if(c===o){vt=null;break}var z=c.sibling;if(z!==null){z.return=c.return,vt=z;break}vt=c.return}}var RI=Math.ceil,Mf=T.ReactCurrentDispatcher,Rg=T.ReactCurrentOwner,Ea=T.ReactCurrentBatchConfig,Ar=0,rs=null,Rn=null,gs=0,sa=0,yc=No(0),qn=0,Hu=null,gl=0,Ff=0,Mg=0,Ku=null,qs=null,Fg=0,vc=1/0,Bi=null,Lf=!1,Lg=null,To=null,zf=!1,Io=null,Uf=0,Gu=0,zg=null,Bf=-1,Wf=0;function $s(){return(Ar&6)!==0?nr():Bf!==-1?Bf:Bf=nr()}function Do(o){return(o.mode&1)===0?1:(Ar&2)!==0&&gs!==0?gs&-gs:xI.transition!==null?(Wf===0&&(Wf=Nr()),Wf):(o=ht,o!==0||(o=window.event,o=o===void 0?16:Ii(o.type)),o)}function Ga(o,c,h,g){if(50<Gu)throw Gu=0,zg=null,Error(r(185));kt(o,h,g),((Ar&2)===0||o!==rs)&&(o===rs&&((Ar&2)===0&&(Ff|=h),qn===4&&$o(o,gs)),Hs(o,g),h===1&&Ar===0&&(c.mode&1)===0&&(vc=nr()+500,yf&&Eo()))}function Hs(o,c){var h=o.callbackNode;Ze(o,c);var g=Ge(o,o===rs?gs:0);if(g===0)h!==null&&An(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&An(h),c===1)o.tag===0?vI(xj.bind(null,o)):s1(xj.bind(null,o)),mI(function(){(Ar&6)===0&&Eo()}),h=null;else{switch(mr(g)){case 1:h=kr;break;case 4:h=Pn;break;case 16:h=ds;break;case 536870912:h=js;break;default:h=ds}h=Cj(h,vj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function vj(o,c){if(Bf=-1,Wf=0,(Ar&6)!==0)throw Error(r(327));var h=o.callbackNode;if(xc()&&o.callbackNode!==h)return null;var g=Ge(o,o===rs?gs:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=Vf(o,g);else{c=g;var k=Ar;Ar|=2;var S=bj();(rs!==o||gs!==c)&&(Bi=null,vc=nr()+500,vl(o,c));do try{LI();break}catch(z){wj(o,z)}while(!0);sg(),Mf.current=S,Ar=k,Rn!==null?c=0:(rs=null,gs=0,c=qn)}if(c!==0){if(c===2&&(k=Vt(o),k!==0&&(g=k,c=Ug(o,k))),c===1)throw h=Hu,vl(o,0),$o(o,g),Hs(o,nr()),h;if(c===6)$o(o,g);else{if(k=o.current.alternate,(g&30)===0&&!MI(k)&&(c=Vf(o,g),c===2&&(S=Vt(o),S!==0&&(g=S,c=Ug(o,S))),c===1))throw h=Hu,vl(o,0),$o(o,g),Hs(o,nr()),h;switch(o.finishedWork=k,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:xl(o,qs,Bi);break;case 3:if($o(o,g),(g&130023424)===g&&(c=Fg+500-nr(),10<c)){if(Ge(o,0)!==0)break;if(k=o.suspendedLanes,(k&g)!==g){$s(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=Kp(xl.bind(null,o,qs,Bi),c);break}xl(o,qs,Bi);break;case 4:if($o(o,g),(g&4194240)===g)break;for(c=o.eventTimes,k=-1;0<g;){var E=31-ye(g);S=1<<E,E=c[E],E>k&&(k=E),g&=~S}if(g=k,g=nr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*RI(g/1960))-g,10<g){o.timeoutHandle=Kp(xl.bind(null,o,qs,Bi),g);break}xl(o,qs,Bi);break;case 5:xl(o,qs,Bi);break;default:throw Error(r(329))}}}return Hs(o,nr()),o.callbackNode===h?vj.bind(null,o):null}function Ug(o,c){var h=Ku;return o.current.memoizedState.isDehydrated&&(vl(o,c).flags|=256),o=Vf(o,c),o!==2&&(c=qs,qs=h,c!==null&&Bg(c)),o}function Bg(o){qs===null?qs=o:qs.push.apply(qs,o)}function MI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var k=h[g],S=k.getSnapshot;k=k.value;try{if(!Wa(S(),k))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $o(o,c){for(c&=~Mg,c&=~Ff,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-ye(c),g=1<<h;o[h]=-1,c&=~g}}function xj(o){if((Ar&6)!==0)throw Error(r(327));xc();var c=Ge(o,0);if((c&1)===0)return Hs(o,nr()),null;var h=Vf(o,c);if(o.tag!==0&&h===2){var g=Vt(o);g!==0&&(c=g,h=Ug(o,g))}if(h===1)throw h=Hu,vl(o,0),$o(o,c),Hs(o,nr()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,xl(o,qs,Bi),Hs(o,nr()),null}function Wg(o,c){var h=Ar;Ar|=1;try{return o(c)}finally{Ar=h,Ar===0&&(vc=nr()+500,yf&&Eo())}}function yl(o){Io!==null&&Io.tag===0&&(Ar&6)===0&&xc();var c=Ar;Ar|=1;var h=Ea.transition,g=ht;try{if(Ea.transition=null,ht=1,o)return o()}finally{ht=g,Ea.transition=h,Ar=c,(Ar&6)===0&&Eo()}}function Vg(){sa=yc.current,Qr(yc)}function vl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,hI(h)),Rn!==null)for(h=Rn.return;h!==null;){var g=h;switch(Zp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pf();break;case 3:mc(),Qr(Bs),Qr(_s),fg();break;case 5:ug(g);break;case 4:mc();break;case 13:Qr(ln);break;case 19:Qr(ln);break;case 10:ag(g.type._context);break;case 22:case 23:Vg()}h=h.return}if(rs=o,Rn=o=Ro(o.current,null),gs=sa=c,qn=0,Hu=null,Mg=Ff=gl=0,qs=Ku=null,hl!==null){for(c=0;c<hl.length;c++)if(h=hl[c],g=h.interleaved,g!==null){h.interleaved=null;var k=g.next,S=h.pending;if(S!==null){var E=S.next;S.next=k,g.next=E}h.pending=g}hl=null}return o}function wj(o,c){do{var h=Rn;try{if(sg(),Cf.current=Of,Ef){for(var g=cn.memoizedState;g!==null;){var k=g.queue;k!==null&&(k.pending=null),g=g.next}Ef=!1}if(pl=0,ts=Vn=cn=null,zu=!1,Uu=0,Rg.current=null,h===null||h.return===null){qn=1,Hu=c,Rn=null;break}e:{var S=o,E=h.return,z=h,X=c;if(c=gs,z.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var xe=X,Ue=z,qe=Ue.tag;if((Ue.mode&1)===0&&(qe===0||qe===11||qe===15)){var Le=Ue.alternate;Le?(Ue.updateQueue=Le.updateQueue,Ue.memoizedState=Le.memoizedState,Ue.lanes=Le.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var mt=q1(E);if(mt!==null){mt.flags&=-257,H1(mt,E,z,S,c),mt.mode&1&&V1(S,xe,c),c=mt,X=xe;var Nt=c.updateQueue;if(Nt===null){var Ct=new Set;Ct.add(X),c.updateQueue=Ct}else Nt.add(X);break e}else{if((c&1)===0){V1(S,xe,c),qg();break e}X=Error(r(426))}}else if(rn&&z.mode&1){var bn=q1(E);if(bn!==null){(bn.flags&65536)===0&&(bn.flags|=256),H1(bn,E,z,S,c),rg(pc(X,z));break e}}S=X=pc(X,z),qn!==4&&(qn=2),Ku===null?Ku=[S]:Ku.push(S),S=E;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var de=B1(S,X,c);p1(S,de);break e;case 1:z=X;var re=S.type,me=S.stateNode;if((S.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(To===null||!To.has(me)))){S.flags|=65536,c&=-c,S.lanes|=c;var Je=W1(S,z,c);p1(S,Je);break e}}S=S.return}while(S!==null)}kj(h)}catch(Ot){c=Ot,Rn===h&&h!==null&&(Rn=h=h.return);continue}break}while(!0)}function bj(){var o=Mf.current;return Mf.current=Of,o===null?Of:o}function qg(){(qn===0||qn===3||qn===2)&&(qn=4),rs===null||(gl&268435455)===0&&(Ff&268435455)===0||$o(rs,gs)}function Vf(o,c){var h=Ar;Ar|=2;var g=bj();(rs!==o||gs!==c)&&(Bi=null,vl(o,c));do try{FI();break}catch(k){wj(o,k)}while(!0);if(sg(),Ar=h,Mf.current=g,Rn!==null)throw Error(r(261));return rs=null,gs=0,qn}function FI(){for(;Rn!==null;)jj(Rn)}function LI(){for(;Rn!==null&&!es();)jj(Rn)}function jj(o){var c=Nj(o.alternate,o,sa);o.memoizedProps=o.pendingProps,c===null?kj(o):Rn=c,Rg.current=null}function kj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=OI(h,c,sa),h!==null){Rn=h;return}}else{if(h=TI(h,c),h!==null){h.flags&=32767,Rn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{qn=6,Rn=null;return}}if(c=c.sibling,c!==null){Rn=c;return}Rn=c=o}while(c!==null);qn===0&&(qn=5)}function xl(o,c,h){var g=ht,k=Ea.transition;try{Ea.transition=null,ht=1,zI(o,c,h,g)}finally{Ea.transition=k,ht=g}return null}function zI(o,c,h,g){do xc();while(Io!==null);if((Ar&6)!==0)throw Error(r(327));h=o.finishedWork;var k=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var S=h.lanes|h.childLanes;if(yt(o,S),o===rs&&(Rn=rs=null,gs=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||zf||(zf=!0,Cj(ds,function(){return xc(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=Ea.transition,Ea.transition=null;var E=ht;ht=1;var z=Ar;Ar|=4,Rg.current=null,DI(o,h),hj(h,o),iI(qp),wa=!!Vp,qp=Vp=null,o.current=h,$I(h),us(),Ar=z,ht=E,Ea.transition=S}else o.current=h;if(zf&&(zf=!1,Io=o,Uf=k),S=o.pendingLanes,S===0&&(To=null),J(h.stateNode),Hs(o,nr()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)k=c[h],g(k.value,{componentStack:k.stack,digest:k.digest});if(Lf)throw Lf=!1,o=Lg,Lg=null,o;return(Uf&1)!==0&&o.tag!==0&&xc(),S=o.pendingLanes,(S&1)!==0?o===zg?Gu++:(Gu=0,zg=o):Gu=0,Eo(),null}function xc(){if(Io!==null){var o=mr(Uf),c=Ea.transition,h=ht;try{if(Ea.transition=null,ht=16>o?16:o,Io===null)var g=!1;else{if(o=Io,Io=null,Uf=0,(Ar&6)!==0)throw Error(r(331));var k=Ar;for(Ar|=4,vt=o.current;vt!==null;){var S=vt,E=S.child;if((vt.flags&16)!==0){var z=S.deletions;if(z!==null){for(var X=0;X<z.length;X++){var xe=z[X];for(vt=xe;vt!==null;){var Ue=vt;switch(Ue.tag){case 0:case 11:case 15:qu(8,Ue,S)}var qe=Ue.child;if(qe!==null)qe.return=Ue,vt=qe;else for(;vt!==null;){Ue=vt;var Le=Ue.sibling,mt=Ue.return;if(lj(Ue),Ue===xe){vt=null;break}if(Le!==null){Le.return=mt,vt=Le;break}vt=mt}}}var Nt=S.alternate;if(Nt!==null){var Ct=Nt.child;if(Ct!==null){Nt.child=null;do{var bn=Ct.sibling;Ct.sibling=null,Ct=bn}while(Ct!==null)}}vt=S}}if((S.subtreeFlags&2064)!==0&&E!==null)E.return=S,vt=E;else e:for(;vt!==null;){if(S=vt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:qu(9,S,S.return)}var de=S.sibling;if(de!==null){de.return=S.return,vt=de;break e}vt=S.return}}var re=o.current;for(vt=re;vt!==null;){E=vt;var me=E.child;if((E.subtreeFlags&2064)!==0&&me!==null)me.return=E,vt=me;else e:for(E=re;vt!==null;){if(z=vt,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Rf(9,z)}}catch(Ot){mn(z,z.return,Ot)}if(z===E){vt=null;break e}var Je=z.sibling;if(Je!==null){Je.return=z.return,vt=Je;break e}vt=z.return}}if(Ar=k,Eo(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Tn,o)}catch{}g=!0}return g}finally{ht=h,Ea.transition=c}}return!1}function Sj(o,c,h){c=pc(h,c),c=B1(o,c,1),o=Po(o,c,1),c=$s(),o!==null&&(kt(o,1,c),Hs(o,c))}function mn(o,c,h){if(o.tag===3)Sj(o,o,h);else for(;c!==null;){if(c.tag===3){Sj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(To===null||!To.has(g))){o=pc(h,o),o=W1(c,o,1),c=Po(c,o,1),o=$s(),c!==null&&(kt(c,1,o),Hs(c,o));break}}c=c.return}}function UI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=$s(),o.pingedLanes|=o.suspendedLanes&h,rs===o&&(gs&h)===h&&(qn===4||qn===3&&(gs&130023424)===gs&&500>nr()-Fg?vl(o,0):Mg|=h),Hs(o,c)}function _j(o,c){c===0&&((o.mode&1)===0?c=1:(c=Z,Z<<=1,(Z&130023424)===0&&(Z=4194304)));var h=$s();o=Li(o,c),o!==null&&(kt(o,c,h),Hs(o,h))}function BI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),_j(o,h)}function WI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,k=o.memoizedState;k!==null&&(h=k.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),_j(o,h)}var Nj;Nj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Bs.current)Vs=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Vs=!1,PI(o,c,h);Vs=(o.flags&131072)!==0}else Vs=!1,rn&&(c.flags&1048576)!==0&&a1(c,xf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Df(o,c),o=c.pendingProps;var k=oc(c,_s.current);hc(c,h),k=pg(null,c,g,o,k,h);var S=gg();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ws(g)?(S=!0,gf(c)):S=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,lg(c),k.updater=Tf,c.stateNode=k,k._reactInternals=c,jg(c,g,o,h),c=Ng(null,c,g,!0,S,h)):(c.tag=0,rn&&S&&Qp(c),Ds(null,c,k,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Df(o,c),o=c.pendingProps,k=g._init,g=k(g._payload),c.type=g,k=c.tag=qI(g),o=qa(g,o),k){case 0:c=_g(null,c,g,o,h);break e;case 1:c=Q1(null,c,g,o,h);break e;case 11:c=K1(null,c,g,o,h);break e;case 14:c=G1(null,c,g,qa(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:qa(g,k),_g(o,c,g,k,h);case 1:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:qa(g,k),Q1(o,c,g,k,h);case 3:e:{if(Z1(c),o===null)throw Error(r(387));g=c.pendingProps,S=c.memoizedState,k=S.element,m1(o,c),_f(c,g,null,h);var E=c.memoizedState;if(g=E.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){k=pc(Error(r(423)),c),c=ej(o,c,g,h,k);break e}else if(g!==k){k=pc(Error(r(424)),c),c=ej(o,c,g,h,k);break e}else for(na=_o(c.stateNode.containerInfo.firstChild),ra=c,rn=!0,Va=null,h=f1(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(uc(),g===k){c=Ui(o,c,h);break e}Ds(o,c,g,h)}c=c.child}return c;case 5:return y1(c),o===null&&tg(c),g=c.type,k=c.pendingProps,S=o!==null?o.memoizedProps:null,E=k.children,Hp(g,k)?E=null:S!==null&&Hp(g,S)&&(c.flags|=32),X1(o,c),Ds(o,c,E,h),c.child;case 6:return o===null&&tg(c),null;case 13:return tj(o,c,h);case 4:return cg(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=dc(c,null,g,h):Ds(o,c,g,h),c.child;case 11:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:qa(g,k),K1(o,c,g,k,h);case 7:return Ds(o,c,c.pendingProps,h),c.child;case 8:return Ds(o,c,c.pendingProps.children,h),c.child;case 12:return Ds(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,k=c.pendingProps,S=c.memoizedProps,E=k.value,Hr(jf,g._currentValue),g._currentValue=E,S!==null)if(Wa(S.value,E)){if(S.children===k.children&&!Bs.current){c=Ui(o,c,h);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var z=S.dependencies;if(z!==null){E=S.child;for(var X=z.firstContext;X!==null;){if(X.context===g){if(S.tag===1){X=zi(-1,h&-h),X.tag=2;var xe=S.updateQueue;if(xe!==null){xe=xe.shared;var Ue=xe.pending;Ue===null?X.next=X:(X.next=Ue.next,Ue.next=X),xe.pending=X}}S.lanes|=h,X=S.alternate,X!==null&&(X.lanes|=h),ig(S.return,h,c),z.lanes|=h;break}X=X.next}}else if(S.tag===10)E=S.type===c.type?null:S.child;else if(S.tag===18){if(E=S.return,E===null)throw Error(r(341));E.lanes|=h,z=E.alternate,z!==null&&(z.lanes|=h),ig(E,h,c),E=S.sibling}else E=S.child;if(E!==null)E.return=S;else for(E=S;E!==null;){if(E===c){E=null;break}if(S=E.sibling,S!==null){S.return=E.return,E=S;break}E=E.return}S=E}Ds(o,c,k.children,h),c=c.child}return c;case 9:return k=c.type,g=c.pendingProps.children,hc(c,h),k=Na(k),g=g(k),c.flags|=1,Ds(o,c,g,h),c.child;case 14:return g=c.type,k=qa(g,c.pendingProps),k=qa(g.type,k),G1(o,c,g,k,h);case 15:return Y1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:qa(g,k),Df(o,c),c.tag=1,Ws(g)?(o=!0,gf(c)):o=!1,hc(c,h),z1(c,g,k),jg(c,g,k,h),Ng(null,c,g,!0,o,h);case 19:return nj(o,c,h);case 22:return J1(o,c,h)}throw Error(r(156,c.tag))};function Cj(o,c){return cs(o,c)}function VI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(o,c,h,g){return new VI(o,c,h,g)}function Hg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qI(o){if(typeof o=="function")return Hg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Y)return 11;if(o===K)return 14}return 2}function Ro(o,c){var h=o.alternate;return h===null?(h=Aa(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function qf(o,c,h,g,k,S){var E=2;if(g=o,typeof o=="function")Hg(o)&&(E=1);else if(typeof o=="string")E=5;else e:switch(o){case M:return wl(h.children,k,S,c);case F:E=8,k|=8;break;case Q:return o=Aa(12,h,c,k|2),o.elementType=Q,o.lanes=S,o;case oe:return o=Aa(13,h,c,k),o.elementType=oe,o.lanes=S,o;case V:return o=Aa(19,h,c,k),o.elementType=V,o.lanes=S,o;case $:return Hf(h,k,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case q:E=10;break e;case ae:E=9;break e;case Y:E=11;break e;case K:E=14;break e;case ge:E=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Aa(E,h,c,k),c.elementType=o,c.type=g,c.lanes=S,c}function wl(o,c,h,g){return o=Aa(7,o,g,c),o.lanes=h,o}function Hf(o,c,h,g){return o=Aa(22,o,g,c),o.elementType=$,o.lanes=h,o.stateNode={isHidden:!1},o}function Kg(o,c,h){return o=Aa(6,o,null,c),o.lanes=h,o}function Gg(o,c,h){return c=Aa(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function HI(o,c,h,g,k){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.identifierPrefix=g,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Yg(o,c,h,g,k,S,E,z,X){return o=new HI(o,c,h,z,X),c===1?(c=1,S===!0&&(c|=8)):c=0,S=Aa(3,null,null,c),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},lg(S),o}function KI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Ej(o){if(!o)return Co;o=o._reactInternals;e:{if(Gt(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ws(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Ws(h))return r1(o,h,c)}return c}function Aj(o,c,h,g,k,S,E,z,X){return o=Yg(h,g,!0,o,k,S,E,z,X),o.context=Ej(null),h=o.current,g=$s(),k=Do(h),S=zi(g,k),S.callback=c??null,Po(h,S,k),o.current.lanes=k,kt(o,k,g),Hs(o,g),o}function Kf(o,c,h,g){var k=c.current,S=$s(),E=Do(k);return h=Ej(h),c.context===null?c.context=h:c.pendingContext=h,c=zi(S,E),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Po(k,c,E),o!==null&&(Ga(o,k,E,S),Sf(o,k,E)),E}function Gf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Pj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Jg(o,c){Pj(o,c),(o=o.alternate)&&Pj(o,c)}function GI(){return null}var Oj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Xg(o){this._internalRoot=o}Yf.prototype.render=Xg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Kf(o,c,null,null)},Yf.prototype.unmount=Xg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;yl(function(){Kf(null,o,null,null)}),c[$i]=null}};function Yf(o){this._internalRoot=o}Yf.prototype.unstable_scheduleHydration=function(o){if(o){var c=Us();o={blockedOn:null,target:o,priority:c};for(var h=0;h<wn.length&&c!==0&&c<wn[h].priority;h++);wn.splice(h,0,o),h===0&&ll(o)}};function Qg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Jf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Tj(){}function YI(o,c,h,g,k){if(k){if(typeof g=="function"){var S=g;g=function(){var xe=Gf(E);S.call(xe)}}var E=Aj(c,g,o,0,null,!1,!1,"",Tj);return o._reactRootContainer=E,o[$i]=E.current,Tu(o.nodeType===8?o.parentNode:o),yl(),E}for(;k=o.lastChild;)o.removeChild(k);if(typeof g=="function"){var z=g;g=function(){var xe=Gf(X);z.call(xe)}}var X=Yg(o,0,!1,null,null,!1,!1,"",Tj);return o._reactRootContainer=X,o[$i]=X.current,Tu(o.nodeType===8?o.parentNode:o),yl(function(){Kf(c,X,h,g)}),X}function Xf(o,c,h,g,k){var S=h._reactRootContainer;if(S){var E=S;if(typeof k=="function"){var z=k;k=function(){var X=Gf(E);z.call(X)}}Kf(c,E,o,k)}else E=YI(h,c,o,k,g);return Gf(E)}pr=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Ce(c.pendingLanes);h!==0&&(Sr(c,h|1),Hs(c,nr()),(Ar&6)===0&&(vc=nr()+500,Eo()))}break;case 13:yl(function(){var g=Li(o,1);if(g!==null){var k=$s();Ga(g,o,1,k)}}),Jg(o,1)}},fn=function(o){if(o.tag===13){var c=Li(o,134217728);if(c!==null){var h=$s();Ga(c,o,134217728,h)}Jg(o,134217728)}},hn=function(o){if(o.tag===13){var c=Do(o),h=Li(o,c);if(h!==null){var g=$s();Ga(h,o,c,g)}Jg(o,c)}},Us=function(){return ht},va=function(o,c){var h=ht;try{return ht=o,c()}finally{ht=h}},Ht=function(o,c,h){switch(c){case"input":if(De(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var k=mf(g);if(!k)throw Error(r(90));ne(g),De(g,k)}}}break;case"textarea":Ee(o,h);break;case"select":c=h.value,c!=null&&L(o,!!h.multiple,c,!1)}},cr=Wg,te=yl;var JI={usingClientEntryPoint:!1,Events:[$u,ac,mf,Qt,hr,Wg]},Yu={findFiberByHostInstance:cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XI={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Lr(o),o===null?null:o.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||GI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{Tn=Qf.inject(XI),Vr=Qf}catch{}}return Ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI,Ks.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qg(c))throw Error(r(200));return KI(o,c,null,h)},Ks.createRoot=function(o,c){if(!Qg(o))throw Error(r(299));var h=!1,g="",k=Oj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Yg(o,1,!1,null,null,h,!1,g,k),o[$i]=c.current,Tu(o.nodeType===8?o.parentNode:o),new Xg(c)},Ks.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=Lr(c),o=o===null?null:o.stateNode,o},Ks.flushSync=function(o){return yl(o)},Ks.hydrate=function(o,c,h){if(!Jf(c))throw Error(r(200));return Xf(null,o,c,!0,h)},Ks.hydrateRoot=function(o,c,h){if(!Qg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,k=!1,S="",E=Oj;if(h!=null&&(h.unstable_strictMode===!0&&(k=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),c=Aj(c,null,o,1,h??null,k,!1,S,E),o[$i]=c.current,Tu(o),g)for(o=0;o<g.length;o++)h=g[o],k=h._getVersion,k=k(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,k]:c.mutableSourceEagerHydrationData.push(h,k);return new Yf(c)},Ks.render=function(o,c,h){if(!Jf(c))throw Error(r(200));return Xf(null,o,c,!1,h)},Ks.unmountComponentAtNode=function(o){if(!Jf(o))throw Error(r(40));return o._reactRootContainer?(yl(function(){Xf(null,null,o,!1,function(){o._reactRootContainer=null,o[$i]=null})}),!0):!1},Ks.unstable_batchedUpdates=Wg,Ks.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Jf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Xf(o,c,h,!1,g)},Ks.version="18.3.1-next-f1338f8080-20240426",Ks}var zj;function DC(){if(zj)return ry.exports;zj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ry.exports=cD(),ry.exports}var Uj;function uD(){if(Uj)return Zf;Uj=1;var e=DC();return Zf.createRoot=e.createRoot,Zf.hydrateRoot=e.hydrateRoot,Zf}var dD=uD();const fD=ai(dD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bj="popstate";function hD(e={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return ev("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:jd(s)}return pD(t,r,null,e)}function an(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ra(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mD(){return Math.random().toString(36).substring(2,10)}function Wj(e,t){return{usr:e.state,key:e.key,idx:t}}function ev(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ou(t):t,state:r,key:t&&t.key||n||mD()}}function jd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ou(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function pD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let b=f(),_=b==null?null:b-m;m=b,d&&d({action:u,location:j.location,delta:_})}function v(b,_){u="PUSH";let C=ev(j.location,b,_);m=f()+1;let N=Wj(C,m),T=j.createHref(C);try{l.pushState(N,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(T)}a&&d&&d({action:u,location:j.location,delta:1})}function x(b,_){u="REPLACE";let C=ev(j.location,b,_);m=f();let N=Wj(C,m),T=j.createHref(C);l.replaceState(N,"",T),a&&d&&d({action:u,location:j.location,delta:0})}function w(b){return gD(b)}let j={get action(){return u},get location(){return e(s,l)},listen(b){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Bj,p),d=b,()=>{s.removeEventListener(Bj,p),d=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let _=w(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:x,go(b){return l.go(b)}};return j}function gD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),an(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:jd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function $C(e,t,r="/"){return yD(e,t,r,!1)}function yD(e,t,r,n){let s=typeof t=="string"?ou(t):t,a=Qi(s.pathname||"/",r);if(a==null)return null;let l=RC(e);vD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=AD(a);u=CD(l[d],m,n)}return u}function RC(e,t=[],r=[],n="",s=!1){let a=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;an(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Yi([n,f.relativePath]),v=r.concat(f);l.children&&l.children.length>0&&(an(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),RC(l.children,t,v,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:_D(p,l.index),routesMeta:v})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of MC(l.path))a(l,u,!0,m)}),t}function MC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=MC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function vD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ND(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var xD=/^:[\w-]+$/,wD=3,bD=2,jD=1,kD=10,SD=-2,Vj=e=>e==="*";function _D(e,t){let r=e.split("/"),n=r.length;return r.some(Vj)&&(n+=SD),t&&(n+=bD),r.filter(s=>!Vj(s)).reduce((s,a)=>s+(xD.test(a)?wD:a===""?jD:kD),n)}function ND(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function CD(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),v=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Yi([a,p.pathname]),pathnameBase:ID(Yi([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Yi([a,p.pathnameBase]))}return l}function Dh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ED(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},v)=>{if(f==="*"){let w=u[v]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[v];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function ED(e,t=!1,r=!0){Ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function AD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ra(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Qi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function PD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ou(e):e;return{pathname:r?r.startsWith("/")?r:OD(r,t):t,search:DD(n),hash:$D(s)}}function OD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ay(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function xx(e){let t=TD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function wx(e,t,r,n=!1){let s;typeof e=="string"?s=ou(e):(s={...e},an(!s.pathname||!s.pathname.includes("?"),ay("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),ay("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),ay("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}u=p>=0?t[p]:"/"}let d=PD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Yi=e=>e.join("/").replace(/\/\/+/g,"/"),ID=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var FC=["POST","PUT","PATCH","DELETE"];new Set(FC);var MD=["GET",...FC];new Set(MD);var lu=y.createContext(null);lu.displayName="DataRouter";var Mm=y.createContext(null);Mm.displayName="DataRouterState";y.createContext(!1);var LC=y.createContext({isTransitioning:!1});LC.displayName="ViewTransition";var FD=y.createContext(new Map);FD.displayName="Fetchers";var LD=y.createContext(null);LD.displayName="Await";var ii=y.createContext(null);ii.displayName="Navigation";var Ld=y.createContext(null);Ld.displayName="Location";var Pi=y.createContext({outlet:null,matches:[],isDataRoute:!1});Pi.displayName="Route";var bx=y.createContext(null);bx.displayName="RouteError";function zD(e,{relative:t}={}){an(cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(ii),{hash:s,pathname:a,search:l}=zd(e,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Yi([r,a])),n.createHref({pathname:u,search:l,hash:s})}function cu(){return y.useContext(Ld)!=null}function Oi(){return an(cu(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Ld).location}var zC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UC(e){y.useContext(ii).static||y.useLayoutEffect(e)}function za(){let{isDataRoute:e}=y.useContext(Pi);return e?ZD():UD()}function UD(){an(cu(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(lu),{basename:t,navigator:r}=y.useContext(ii),{matches:n}=y.useContext(Pi),{pathname:s}=Oi(),a=JSON.stringify(xx(n)),l=y.useRef(!1);return UC(()=>{l.current=!0}),y.useCallback((d,m={})=>{if(Ra(l.current,zC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=wx(d,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Yi([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}y.createContext(null);function zd(e,{relative:t}={}){let{matches:r}=y.useContext(Pi),{pathname:n}=Oi(),s=JSON.stringify(xx(r));return y.useMemo(()=>wx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function BD(e,t){return BC(e,t)}function BC(e,t,r,n,s){var C;an(cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=y.useContext(ii),{matches:l}=y.useContext(Pi),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let N=p&&p.path||"";WC(m,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=Oi(),x;if(t){let N=typeof t=="string"?ou(t):t;an(f==="/"||((C=N.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=v;let w=x.pathname||"/",j=w;if(f!=="/"){let N=f.replace(/^\//,"").split("/");j="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=$C(e,{pathname:j});Ra(p||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ra(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=KD(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:Yi([f,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Yi([f,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,r,n,s);return t&&_?y.createElement(Ld.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function WD(){let e=QD(),t=RD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:a},"ErrorBoundary")," or"," ",y.createElement("code",{style:a},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:s},r):null,l)}var VD=y.createElement(WD,null),qD=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(Pi.Provider,{value:this.props.routeContext},y.createElement(bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HD({routeContext:e,match:t,children:r}){let n=y.useContext(lu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(Pi.Provider,{value:e},r)}function KD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);an(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:v}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let v,x=!1,w=null,j=null;r&&(v=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||VD,u&&(d<0&&p===0?(WC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===p&&(x=!0,j=f.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,p+1)),_=()=>{let C;return v?C=w:x?C=j:f.route.Component?C=y.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=m,y.createElement(HD,{match:f,routeContext:{outlet:m,matches:b,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(qD,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):_()},null)}function jx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GD(e){let t=y.useContext(lu);return an(t,jx(e)),t}function YD(e){let t=y.useContext(Mm);return an(t,jx(e)),t}function JD(e){let t=y.useContext(Pi);return an(t,jx(e)),t}function kx(e){let t=JD(e),r=t.matches[t.matches.length-1];return an(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function XD(){return kx("useRouteId")}function QD(){var n;let e=y.useContext(bx),t=YD("useRouteError"),r=kx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ZD(){let{router:e}=GD("useNavigate"),t=kx("useNavigate"),r=y.useRef(!1);return UC(()=>{r.current=!0}),y.useCallback(async(s,a={})=>{Ra(r.current,zC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var qj={};function WC(e,t,r){!t&&!qj[e]&&(qj[e]=!0,Ra(!1,r))}y.memo(e3);function e3({routes:e,future:t,state:r,unstable_onError:n}){return BC(e,void 0,r,n,t)}function t3({to:e,replace:t,state:r,relative:n}){an(cu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(ii);Ra(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=y.useContext(Pi),{pathname:l}=Oi(),u=za(),d=wx(e,xx(a),l,n==="path"),m=JSON.stringify(d);return y.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function Ya(e){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function r3({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){an(!cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof r=="string"&&(r=ou(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:v="default"}=r,x=y.useMemo(()=>{let w=Qi(d,l);return w==null?null:{location:{pathname:w,search:m,hash:f,state:p,key:v},navigationType:n}},[l,d,m,f,p,v,n]);return Ra(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:y.createElement(ii.Provider,{value:u},y.createElement(Ld.Provider,{children:t,value:x}))}function n3({children:e,location:t}){return BD(tv(e),t)}function tv(e,t=[]){let r=[];return y.Children.forEach(e,(n,s)=>{if(!y.isValidElement(n))return;let a=[...t,s];if(n.type===y.Fragment){r.push.apply(r,tv(n.props.children,a));return}an(n.type===Ya,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=tv(n.props.children,a)),r.push(l)}),r}var Sh="get",_h="application/x-www-form-urlencoded";function Fm(e){return e!=null&&typeof e.tagName=="string"}function s3(e){return Fm(e)&&e.tagName.toLowerCase()==="button"}function a3(e){return Fm(e)&&e.tagName.toLowerCase()==="form"}function i3(e){return Fm(e)&&e.tagName.toLowerCase()==="input"}function o3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function l3(e,t){return e.button===0&&(!t||t==="_self")&&!o3(e)}function rv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function c3(e,t){let r=rv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}var eh=null;function u3(){if(eh===null)try{new FormData(document.createElement("form"),0),eh=!1}catch{eh=!0}return eh}var d3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iy(e){return e!=null&&!d3.has(e)?(Ra(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):e}function f3(e,t){let r,n,s,a,l;if(a3(e)){let u=e.getAttribute("action");n=u?Qi(u,t):null,r=e.getAttribute("method")||Sh,s=iy(e.getAttribute("enctype"))||_h,a=new FormData(e)}else if(s3(e)||i3(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Qi(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Sh,s=iy(e.getAttribute("formenctype"))||iy(u.getAttribute("enctype"))||_h,a=new FormData(u,e),!u3()){let{name:m,type:f,value:p}=e;if(f==="image"){let v=m?`${m}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else m&&a.append(m,p)}}else{if(Fm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Sh,n=null,s=_h,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function h3(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Qi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function m3(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p3(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function g3(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await m3(a,r);return l.links?l.links():[]}return[]}));return w3(n.flat(1).filter(p3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Hj(e,t,r,n,s,a){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):a==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function y3(e,t,{includeHydrateFallback:r}={}){return v3(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function v3(e){return[...new Set(e)]}function x3(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function w3(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(x3(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function VC(){let e=y.useContext(lu);return Sx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function b3(){let e=y.useContext(Mm);return Sx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _x=y.createContext(void 0);_x.displayName="FrameworkContext";function qC(){let e=y.useContext(_x);return Sx(e,"You must render this element inside a <HydratedRouter> element"),e}function j3(e,t){let r=y.useContext(_x),[n,s]=y.useState(!1),[a,l]=y.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,v=y.useRef(null);y.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let j=_=>{_.forEach(C=>{l(C.isIntersecting)})},b=new IntersectionObserver(j,{threshold:.5});return v.current&&b.observe(v.current),()=>{b.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{s(!0)},w=()=>{s(!1),l(!1)};return r?e!=="intent"?[a,v,{}]:[a,v,{onFocus:Xu(u,x),onBlur:Xu(d,w),onMouseEnter:Xu(m,x),onMouseLeave:Xu(f,w),onTouchStart:Xu(p,x)}]:[!1,v,{}]}function Xu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function k3({page:e,...t}){let{router:r}=VC(),n=y.useMemo(()=>$C(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(_3,{page:e,matches:n,...t}):null}function S3(e){let{manifest:t,routeModules:r}=qC(),[n,s]=y.useState([]);return y.useEffect(()=>{let a=!1;return g3(e,t,r).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,r]),n}function _3({page:e,matches:t,...r}){let n=Oi(),{manifest:s,routeModules:a}=qC(),{basename:l}=VC(),{loaderData:u,matches:d}=b3(),m=y.useMemo(()=>Hj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=y.useMemo(()=>Hj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,j=!1;if(t.forEach(_=>{var N;let C=s.routes[_.route.id];!C||!C.hasLoader||(!m.some(T=>T.route.id===_.route.id)&&_.route.id in u&&((N=a[_.route.id])!=null&&N.shouldRevalidate)||C.hasClientLoader?j=!0:w.add(_.route.id))}),w.size===0)return[];let b=h3(e,l,"data");return j&&w.size>0&&b.searchParams.set("_routes",t.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[b.pathname+b.search]},[l,u,n,s,m,t,e,a]),v=y.useMemo(()=>y3(f,s),[f,s]),x=S3(f);return y.createElement(y.Fragment,null,p.map(w=>y.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),v.map(w=>y.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),x.map(({key:w,link:j})=>y.createElement("link",{key:w,nonce:r.nonce,...j})))}function N3(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var HC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HC&&(window.__reactRouterVersion="7.9.4")}catch{}function C3({basename:e,children:t,window:r}){let n=y.useRef();n.current==null&&(n.current=hD({window:r,v5Compat:!0}));let s=n.current,[a,l]=y.useState({action:s.action,location:s.location}),u=y.useCallback(d=>{y.startTransition(()=>l(d))},[l]);return y.useLayoutEffect(()=>s.listen(u),[s,u]),y.createElement(r3,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var KC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GC=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...v},x){let{basename:w}=y.useContext(ii),j=typeof m=="string"&&KC.test(m),b,_=!1;if(typeof m=="string"&&j&&(b=m,HC))try{let Q=new URL(window.location.href),q=m.startsWith("//")?new URL(Q.protocol+m):new URL(m),ae=Qi(q.pathname,w);q.origin===Q.origin&&ae!=null?m=ae+q.search+q.hash:_=!0}catch{Ra(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=zD(m,{relative:s}),[N,T,A]=j3(n,v),P=O3(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function M(Q){t&&t(Q),Q.defaultPrevented||P(Q)}let F=y.createElement("a",{...v,...A,href:b||C,onClick:_||a?t:M,ref:N3(x,T),target:d,"data-discover":!j&&r==="render"?"true":void 0});return N&&!j?y.createElement(y.Fragment,null,F,y.createElement(k3,{page:C})):F});GC.displayName="Link";var E3=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...m},f){let p=zd(l,{relative:m.relative}),v=Oi(),x=y.useContext(Mm),{navigator:w,basename:j}=y.useContext(ii),b=x!=null&&R3(p)&&u===!0,_=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,C=v.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&j&&(N=Qi(N,j)||N);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=C===_||!s&&C.startsWith(_)&&C.charAt(T)==="/",P=N!=null&&(N===_||!s&&N.startsWith(_)&&N.charAt(_.length)==="/"),M={isActive:A,isPending:P,isTransitioning:b},F=A?t:void 0,Q;typeof n=="function"?Q=n(M):Q=[n,A?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let q=typeof a=="function"?a(M):a;return y.createElement(GC,{...m,"aria-current":F,className:Q,ref:f,style:q,to:l,viewTransition:u},typeof d=="function"?d(M):d)});E3.displayName="NavLink";var A3=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:l=Sh,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...v},x)=>{let w=D3(),j=$3(u,{relative:m}),b=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&KC.test(u),C=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let T=N.nativeEvent.submitter,A=(T==null?void 0:T.getAttribute("formmethod"))||l;w(T||N.currentTarget,{fetcherKey:t,method:A,navigate:r,replace:s,state:a,relative:m,preventScrollReset:f,viewTransition:p})};return y.createElement("form",{ref:x,method:b,action:j,onSubmit:n?d:C,...v,"data-discover":!_&&e==="render"?"true":void 0})});A3.displayName="Form";function P3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YC(e){let t=y.useContext(lu);return an(t,P3(e)),t}function O3(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=za(),d=Oi(),m=zd(e,{relative:a});return y.useCallback(f=>{if(l3(f,t)){f.preventDefault();let p=r!==void 0?r:jd(d)===jd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,m,r,n,t,e,s,a,l])}function Nx(e){Ra(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(rv(e)),r=y.useRef(!1),n=Oi(),s=y.useMemo(()=>c3(n.search,r.current?null:t.current),[n.search]),a=za(),l=y.useCallback((u,d)=>{const m=rv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,a("?"+m,d)},[a,s]);return[s,l]}var T3=0,I3=()=>`__${String(++T3)}__`;function D3(){let{router:e}=YC("useSubmit"),{basename:t}=y.useContext(ii),r=XD();return y.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:m}=f3(n,t);if(s.navigate===!1){let f=s.fetcherKey||I3();await e.fetch(f,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function $3(e,{relative:t}={}){let{basename:r}=y.useContext(ii),n=y.useContext(Pi);an(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...zd(e||".",{relative:t})},l=Oi();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Yi([r,a.pathname])),jd(a)}function R3(e,{relative:t}={}){let r=y.useContext(LC);an(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=YC("useViewTransitionState"),s=zd(e,{relative:t});if(!r.isTransitioning)return!1;let a=Qi(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Qi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dh(s.pathname,l)!=null||Dh(s.pathname,a)!=null}var JC=DC();const M3="modulepreload",F3=function(e){return"/feature-voting-app/"+e},Kj={},uu=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=F3(m),m in Kj)return;Kj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":M3,f||(v.as="script"),v.crossOrigin="",v.href=m,d&&v.setAttribute("nonce",d),document.head.appendChild(v),f)return new Promise((x,w)=>{v.addEventListener("load",x),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},L3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Cx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Gj extends Cx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Yj extends Cx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jj extends Cx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var nv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(nv||(nv={}));var z3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class U3{constructor(t,{headers:r={},customFetch:n,region:s=nv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=L3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return z3(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(m["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(m["Content-Type"]="application/json",v=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:v,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Gj(_)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Yj(x);if(!x.ok)throw new Jj(x);let j=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return j==="application/json"?b=yield x.json():j==="application/octet-stream"?b=yield x.blob():j==="text/event-stream"?b=x:j==="multipart/form-data"?b=yield x.formData():b=yield x.text(),{data:b,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Gj(a)}:{data:null,error:a,response:a instanceof Jj||a instanceof Yj?a.context:void 0}}})}}var ss={},wc={},bc={},jc={},kc={},Sc={},B3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yc=B3();const W3=Yc.fetch,XC=Yc.fetch.bind(Yc),QC=Yc.Headers,V3=Yc.Request,q3=Yc.Response,du=Object.freeze(Object.defineProperty({__proto__:null,Headers:QC,Request:V3,Response:q3,default:XC,fetch:W3},Symbol.toStringTag,{value:"Module"})),H3=rD(du);var th={},Xj;function ZC(){if(Xj)return th;Xj=1,Object.defineProperty(th,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return th.default=e,th}var Qj;function eE(){if(Qj)return Sc;Qj=1;var e=Sc&&Sc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sc,"__esModule",{value:!0});const t=e(H3),r=e(ZC());class n{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,v,x;let w=null,j=null,b=null,_=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?j=P:j=JSON.parse(P))}const T=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),A=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");T&&A&&A.length>1&&(b=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(w={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,b=null,_=406,C="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const T=await m.text();try{w=JSON.parse(T),Array.isArray(w)&&m.status===404&&(j=[],w=null,_=200,C="OK")}catch{m.status===404&&T===""?(_=204,C="No Content"):w={message:T}}if(w&&this.isMaybeSingle&&(!((x=w==null?void 0:w.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,_=200,C="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:j,count:b,status:_,statusText:C}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,v;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=m==null?void 0:m.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Sc.default=n,Sc}var Zj;function tE(){if(Zj)return kc;Zj=1;var e=kc&&kc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kc,"__esModule",{value:!0});const t=e(eE());class r extends t.default{select(s){let a=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return kc.default=r,kc}var ek;function Ex(){if(ek)return jc;ek=1;var e=jc&&jc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jc,"__esModule",{value:!0});const t=e(tE());class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return jc.default=r,jc}var tk;function rE(){if(tk)return bc;tk=1;var e=bc&&bc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bc,"__esModule",{value:!0});const t=e(Ex());class r{constructor(s,{headers:a={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(s,a){const{head:l=!1,count:u}=a??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(p.length>0){const v=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return bc.default=r,bc}var rk;function K3(){if(rk)return wc;rk=1;var e=wc&&wc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wc,"__esModule",{value:!0});const t=e(rE()),r=e(Ex());class n{constructor(a,{headers:l={},schema:u,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const v=new URL(`${this.url}/rpc/${a}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([j,b])=>b!==void 0).map(([j,b])=>[j,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([j,b])=>{v.searchParams.append(j,b)})):(p="POST",x=l);const w=new Headers(this.headers);return m&&w.set("Prefer",`count=${m}`),new r.default({method:p,url:v,headers:w,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return wc.default=n,wc}var nk;function G3(){if(nk)return ss;nk=1;var e=ss&&ss.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ss,"__esModule",{value:!0}),ss.PostgrestError=ss.PostgrestBuilder=ss.PostgrestTransformBuilder=ss.PostgrestFilterBuilder=ss.PostgrestQueryBuilder=ss.PostgrestClient=void 0;const t=e(K3());ss.PostgrestClient=t.default;const r=e(rE());ss.PostgrestQueryBuilder=r.default;const n=e(Ex());ss.PostgrestFilterBuilder=n.default;const s=e(tE());ss.PostgrestTransformBuilder=s.default;const a=e(eE());ss.PostgrestBuilder=a.default;const l=e(ZC());return ss.PostgrestError=l.default,ss.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:l.default},ss}var Y3=G3();const J3=ai(Y3),{PostgrestClient:X3,PostgrestQueryBuilder:fee,PostgrestFilterBuilder:hee,PostgrestTransformBuilder:mee,PostgrestBuilder:pee,PostgrestError:gee}=J3;class Q3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Z3="2.74.0",e6=`realtime-js/${Z3}`,t6="1.0.0",sv=1e4,r6=1e3,n6=100;var gd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(gd||(gd={}));var Hn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Hn||(Hn={}));var Xa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xa||(Xa={}));var av;(function(e){e.websocket="websocket"})(av||(av={}));var Cl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cl||(Cl={}));class s6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+a));l=l+a;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class nE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kr||(Kr={}));const sk=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=a6(l,e,t,s),a),{}):{}},a6=(e,t,r,n)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?sE(a,l):iv(l)},sE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return c6(t,r)}switch(e){case Kr.bool:return i6(t);case Kr.float4:case Kr.float8:case Kr.int2:case Kr.int4:case Kr.int8:case Kr.numeric:case Kr.oid:return o6(t);case Kr.json:case Kr.jsonb:return l6(t);case Kr.timestamp:return u6(t);case Kr.abstime:case Kr.date:case Kr.daterange:case Kr.int4range:case Kr.int8range:case Kr.money:case Kr.reltime:case Kr.text:case Kr.time:case Kr.timestamptz:case Kr.timetz:case Kr.tsrange:case Kr.tstzrange:return iv(t);default:return iv(t)}},iv=e=>e,i6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},o6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},l6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>sE(t,u))}return e},u6=e=>typeof e=="string"?e.replace(" ","T"):e,aE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class oy{constructor(t,r,n={},s=sv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ak;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ak||(ak={}));class yd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yd.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=yd.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yd.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(a,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=a[m];if(p){const v=f.map(b=>b.presence_ref),x=p.map(b=>b.presence_ref),w=f.filter(b=>x.indexOf(b.presence_ref)<0),j=p.filter(b=>v.indexOf(b.presence_ref)<0);w.length>0&&(u[m]=w),j.length>0&&(d[m]=j)}else u[m]=f}),this.syncDiff(a,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),v=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...v)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ik;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ik||(ik={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var Vi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vi||(Vi={}));class Ax{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new oy(this,Xa.join,this.params,this.timeout),this.rejoinTimer=new nE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xa.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new yd(this),this.broadcastEndpointURL=aE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Hn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Vi.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Vi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket.setAuth(),x===void 0){t==null||t(Vi.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,b=(w=j==null?void 0:j.length)!==null&&w!==void 0?w:0,_=[];for(let C=0;C<b;C++){const N=j[C],{filter:{event:T,schema:A,table:P,filter:M}}=N,F=x&&x[C];if(F&&F.event===T&&F.schema===A&&F.table===P&&F.filter===M)_.push(Object.assign(Object.assign({},N),{id:F.id}));else{this.unsubscribe(),this.state=Hn.errored,t==null||t(Vi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Vi.SUBSCRIBED);return}}).receive("error",x=>{this.state=Hn.errored,t==null||t(Vi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Hn.joined&&t===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Hn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new oy(this,Xa.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Hn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oy(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>n6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Xa;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var w,j,b;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(j=x.filter)===null||j===void 0?void 0:j.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(x=>x.callback(v,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var w,j,b,_,C,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const T=x.id,A=(w=x.filter)===null||w===void 0?void 0:w.event;return T&&((j=r.ids)===null||j===void 0?void 0:j.includes(T))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const T=(C=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return T==="*"||T===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:j,table:b,commit_timestamp:_,type:C,errors:N}=w;v=Object.assign(Object.assign({},{schema:j,table:b,commit_timestamp:_,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(w))}x.callback(v,n)})}_isClosed(){return this.state===Hn.closed}_isJoined(){return this.state===Hn.joined}_isJoining(){return this.state===Hn.joining}_isLeaving(){return this.state===Hn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Ax.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xa.close,{},t)}_onError(t){this._on(Xa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=sk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=sk(t.columns,t.old_record)),r}}const ly=()=>{},rh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d6=[1e3,2e3,5e3,1e4],f6=1e4,h6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m6{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sv,this.transport=null,this.heartbeatIntervalMs=rh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ly,this.ref=0,this.reconnectTimer=null,this.logger=ly,this.conn=null,this.sendBuffer=[],this.serializer=new s6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>uu(async()=>{const{default:u}=await Promise.resolve().then(()=>du);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${av.websocket}`,this.httpEndpoint=aE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Q3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t6}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gd.connecting:return Cl.Connecting;case gd.open:return Cl.Open;case gd.closing:return Cl.Closing;default:return Cl.Closed}}isConnected(){return this.connectionState()===Cl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Ax(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(r6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},rh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([h6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:e6};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Xa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new nE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:sv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:rh.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:ly,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>d6[p-1]||f6),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,v)=>v(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Px extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class p6 extends Px{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ov extends Px{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var g6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const iE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},y6=()=>g6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield uu(()=>Promise.resolve().then(()=>du),void 0)).Response:Response}),lv=e=>{if(Array.isArray(e))return e.map(r=>lv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=lv(n)}),t},v6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const cy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),x6=(e,t,r)=>Gl(void 0,void 0,void 0,function*(){const n=yield y6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new p6(cy(s),a,l))}).catch(s=>{t(new ov(cy(s),s))}):t(new ov(cy(e),e))}),w6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(v6(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Ud(e,t,r,n,s,a){return Gl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,w6(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>x6(d,u,n))})})}function $h(e,t,r,n){return Gl(this,void 0,void 0,function*(){return Ud(e,"GET",t,r,n)})}function bi(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Ud(e,"POST",t,n,s,r)})}function cv(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Ud(e,"PUT",t,n,s,r)})}function b6(e,t,r,n){return Gl(this,void 0,void 0,function*(){return Ud(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function oE(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Ud(e,"DELETE",t,n,s,r)})}var j6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class k6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return j6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}}var S6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class _6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new k6(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return S6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}}var Gs=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const N6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ok={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C6{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=iE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Gs(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},ok),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?cv:bi)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Gs(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:ok.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield cv(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ln(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Gs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield bi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Px("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}})}update(t,r,n){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Gs(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Gs(this,void 0,void 0,function*(){try{return{data:{path:(yield bi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Gs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield bi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Gs(this,void 0,void 0,function*(){try{const s=yield bi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>$h(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new _6(d,this.shouldThrowOnError)}info(t){return Gs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield $h(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:lv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}})}exists(t){return Gs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield b6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ln(n)&&n instanceof ov){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Gs(this,void 0,void 0,function*(){try{return{data:yield oE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}list(t,r,n){return Gs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},N6),r),{prefix:t||""});return{data:yield bi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}listV2(t,r){return Gs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield bi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const E6="2.74.0",A6={"X-Client-Info":`storage-js/${E6}`};var _c=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class P6{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A6),r),this.fetch=iE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return _c(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}getBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}createBucket(t){return _c(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return _c(this,void 0,void 0,function*(){try{return{data:yield cv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield oE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}}class O6 extends P6{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new C6(this.url,this.headers,t,this.fetch)}}const T6="2.74.0";let cd="";typeof Deno<"u"?cd="deno":typeof document<"u"?cd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cd="react-native":cd="node";const I6={"X-Client-Info":`supabase-js-${cd}/${T6}`},D6={headers:I6},$6={schema:"public"},R6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M6={};var F6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const L6=e=>{let t;return e?t=e:typeof fetch>"u"?t=XC:t=fetch,(...r)=>t(...r)},z6=()=>typeof Headers>"u"?QC:Headers,U6=(e,t,r)=>{const n=L6(r),s=z6();return(a,l)=>F6(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},l),{headers:m}))})};var B6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function W6(e){return e.endsWith("/")?e:e+"/"}function V6(e,t){var r,n;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>B6(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function q6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(W6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lE="2.74.0",Mc=30*1e3,uv=3,uy=uv*Mc,H6="http://localhost:9999",K6="supabase.auth.token",G6={"X-Client-Info":`gotrue-js/${lE}`},dv="X-Supabase-Api-Version",cE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Y6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J6=600*1e3;class kd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Wt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class X6 extends kd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Q6(e){return Wt(e)&&e.name==="AuthApiError"}class El extends kd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class el extends kd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class zo extends el{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z6(e){return Wt(e)&&e.name==="AuthSessionMissingError"}class Nc extends el{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nh extends el{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class sh extends el{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function e5(e){return Wt(e)&&e.name==="AuthImplicitGrantRedirectError"}class lk extends el{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fv extends el{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function dy(e){return Wt(e)&&e.name==="AuthRetryableFetchError"}class ck extends el{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class hv extends el{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uk=` 	
\r=`.split(""),t5=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<uk.length;t+=1)e[uk[t].charCodeAt(0)]=-2;for(let t=0;t<Rh.length;t+=1)e[Rh[t].charCodeAt(0)]=t;return e})();function dk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rh[n]),t.queuedBits-=6}}function uE(e,t,r){const n=t5[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fk(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{s5(l,n,r)};for(let l=0;l<e.length;l+=1)uE(e.charCodeAt(l),s,a);return t.join("")}function r5(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function n5(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}r5(n,t)}}function s5(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)uE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function a5(e){const t=[];return n5(e,r=>t.push(r)),new Uint8Array(t)}function Al(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>dk(s,r,n)),dk(null,r,n),t.join("")}function i5(e){return Math.round(Date.now()/1e3)+e}function o5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const aa=()=>typeof window<"u"&&typeof document<"u",bl={tested:!1,writable:!1},dE=()=>{if(!aa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function l5(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const fE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},c5=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},jl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fo=async(e,t)=>{await e.removeItem(t)};class Lm{constructor(){this.promise=new Lm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Lm.promiseConstructor=Promise;function fy(e){const t=e.split(".");if(t.length!==3)throw new hv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Y6.test(t[n]))throw new hv("JWT not in base64url format");return{header:JSON.parse(fk(t[0])),payload:JSON.parse(fk(t[1])),signature:Vc(t[2]),raw:{header:t[0],payload:t[1]}}}async function u5(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function d5(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function f5(e){return("0"+e.toString(16)).substr(-2)}function h5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,f5).join("")}async function m5(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function p5(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await m5(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cc(e,t,r=!1){const n=h5();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fc(e,`${t}-code-verifier`,s);const a=await p5(n);return[a,n===a?"plain":"s256"]}const g5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function y5(e){const t=e.headers.get(dv);if(!t||!t.match(g5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function v5(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function x5(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ec(e){if(!w5.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hk(e){return JSON.parse(JSON.stringify(e))}var b5=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const kl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),j5=[502,503,504];async function mk(e){var t;if(!c5(e))throw new fv(kl(e),0);if(j5.includes(e.status))throw new fv(kl(e),e.status);let r;try{r=await e.json()}catch(a){throw new El(kl(a),a)}let n;const s=y5(e);if(s&&s.getTime()>=cE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ck(kl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new ck(kl(r),e.status,r.weak_password.reasons);throw new X6(kl(r),e.status||500,n)}const k5=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function dr(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[dv]||(a[dv]=cE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await S5(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function S5(e,t,r,n,s,a){const l=k5(t,n,s,a);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new fv(kl(d),0)}if(u.ok||await mk(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await mk(d)}}function Ja(e){var t;let r=null;C5(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=i5(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function pk(e){const t=Ja(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _5(e){return{data:e,error:null}}function N5(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=b5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function gk(e){return e}function C5(e){return e.access_token&&e.refresh_token&&e.expires_in}const my=["global","local","others"];var E5=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class A5{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=fE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=my[0]){if(my.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${my.join(", ")}`);try{return await dr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await dr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qo})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=E5(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await dr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N5,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Wt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qo})}catch(r){if(Wt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await dr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:gk});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const j=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);m[`${b}Page`]=j}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Wt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Ec(t);try{return await dr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qo})}catch(r){if(Wt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ec(t);try{return await dr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:qo})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ec(t);try{return await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:qo})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ec(t.userId);try{const{data:r,error:n}=await dr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ec(t.userId),Ec(t.id);try{return{data:await dr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await dr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:gk});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const j=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);m[`${b}Page`]=j}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Wt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await dr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await dr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await dr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}}function yk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ac={debug:!!(globalThis&&dE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class P5 extends hE{}async function O5(e,t,r){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new P5(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ac.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function T5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function I5(e){return parseInt(e,16)}function D5(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function $5(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=mE(e.address),w=f?`${f}://${n}`:n,j=e.statement?`${e.statement}
`:"",b=`${w} wants you to sign in with your Ethereum account:
${x}

${j}`;let _=`URI: ${p}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let C=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);C+=`
- ${N}`}_+=C}return`${b}
${_}`}class Fn extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Mh extends Fn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function R5({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Fn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Fn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Fn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Fn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Fn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Fn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Fn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(gE(l)){if(a.rp.id!==l)return new Fn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Fn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Fn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function M5({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Fn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(gE(n)){if(r.rpId!==n)return new Fn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Fn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var pE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class F5{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const L5=new F5;function z5(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=pE(e,["challenge","user","excludeCredentials"]),a=Vc(t).buffer,l=Object.assign(Object.assign({},r),{id:Vc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Vc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function U5(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=pE(e,["challenge","allowCredentials"]),s=Vc(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Vc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function B5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Al(new Uint8Array(e.response.attestationObject)),clientDataJSON:Al(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function W5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Al(new Uint8Array(s.authenticatorData)),clientDataJSON:Al(new Uint8Array(s.clientDataJSON)),signature:Al(new Uint8Array(s.signature)),userHandle:s.userHandle?Al(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function vk(){var e,t;return!!(aa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function V5(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",t)}:{data:null,error:new Mh("Empty credential response",t)}}catch(t){return{data:null,error:R5({error:t,options:e})}}}async function q5(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",t)}:{data:null,error:new Mh("Empty credential response",t)}}catch(t){return{data:null,error:M5({error:t,options:e})}}}const H5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},K5={userVerification:"preferred",hints:["security-key"]};function Fh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(t(l)){const u=n[a];t(u)?n[a]=Fh(u,l):n[a]=Fh(l)}else n[a]=l}return n}function G5(e,t){return Fh(H5,e,t||{})}function Y5(e,t){return Fh(K5,e,t||{})}class J5{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??L5.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=G5(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await V5({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=Y5(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await q5(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return Wt(l)?{data:null,error:l}:{data:null,error:new El("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new kd("rpId is required for WebAuthn authentication")};try{if(!vk())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Wt(l)?{data:null,error:l}:{data:null,error:new El("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new kd("rpId is required for WebAuthn registration")};try{if(!vk())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return Wt(l)?{data:null,error:l}:{data:null,error:new El("Unexpected error in register",l)}}}}T5();const X5={url:H6,storageKey:K6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xk(e,t,r){return await r()}const Pc={};class Sd{get jwks(){var t,r;return(r=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sd.nextInstanceID,Sd.nextInstanceID+=1,this.instanceID>0&&aa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},X5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new A5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fE(s.fetch),this.lock=s.lock||xk,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:aa()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=O5:this.lock=xk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new J5(this)},this.persistSession?(s.storage?this.storage=s.storage:dE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=yk(this.memoryStorage)),aa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=l5(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),aa()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),e5(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Wt(r)?{error:r}:{error:new El("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ja}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Wt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:f,password:p,options:v}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Cc(this.storage,this.storageKey)),a=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:w},xform:Ja})}else if("phone"in t){const{phone:f,password:p,options:v}=t;a=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ja})}else throw new nh("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Wt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:u}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:pk})}else if("phone"in t){const{phone:a,password:l,options:u}=t;r=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:pk})}else throw new nh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Nc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Wt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,l,u,d,m,f,p,v;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:j,wallet:b,statement:_,options:C}=t;let N;if(aa())if(typeof b=="object")N=b;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")N=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href),A=await N.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=mE(A[0]);let M=(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const Q=await N.request({method:"eth_chainId"});M=I5(Q)}const F={domain:T.host,address:P,statement:_,uri:T.href,version:"1",chainId:M,nonce:(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=C==null?void 0:C.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=$5(F),w=await N.request({method:"personal_sign",params:[D5(x),P]})}try{const{data:j,error:b}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ja});if(b)throw b;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Nc}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:b})}catch(j){if(Wt(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(t){var r,n,s,a,l,u,d,m,f,p,v,x;let w,j;if("message"in t)w=t.message,j=t.signature;else{const{chain:b,wallet:_,statement:C,options:N}=t;let T;if(aa())if(typeof _=="object")T=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const A=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),C?{statement:C}:null));let M;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")M=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)M=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),j=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${A.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((p=(f=N==null?void 0:N.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...N.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=P}}try{const{data:b,error:_}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Al(j)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ja});if(_)throw _;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Nc}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:_})}catch(b){if(Wt(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await jl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ja});if(await Fo(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Nc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(Wt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,u=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ja}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Nc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(Wt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Cc(this.storage,this.storageKey));const{error:p}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new nh("You must provide either an email or phone number.")}catch(u){if(Wt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await dr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Ja});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(Wt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Cc(this.storage,this.storageKey)),await dr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:_5})}catch(a){if(Wt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zo;const{error:s}=await dr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Wt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:u}=await dr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new nh("You must provide either an email or phone number and a type")}catch(r){if(Wt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<uy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await jl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=hy()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qo}):await this._useSession(async r=>{var n,s,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zo}:await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:qo})})}catch(r){if(Wt(r))return Z6(r)&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new zo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Cc(this.storage,this.storageKey));const{data:m,error:f}=await dr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:qo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zo;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=fy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Wt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zo;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Wt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!aa())throw new sh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new sh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lk("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!a||!u||!l||!m)throw new sh("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let v=f+p;d&&(v=parseInt(d));const x=v-f;x*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const w=v-p;f-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,f):f-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,f);const{data:j,error:b}=await this._getUser(a);if(b)throw b;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:v,refresh_token:l,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(Wt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await jl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(Q6(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=o5(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Cc(this.storage,this.storageKey,!0));try{return await dr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Wt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,u,d,m,f;const{data:p,error:v}=a;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await dr(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return aa()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Wt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ja}),{data:v,error:x}=p;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Nc}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(s){if(Wt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await dr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await d5(async s=>(s>0&&await u5(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await dr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ja})),(s,a)=>{const l=200*Math.pow(2,s);return a&&dy(a)&&Date.now()+l-n<Mc})}catch(n){if(this._debug(r,"error",n),Wt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),aa()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await jl(this.storage,this.storageKey);if(s&&this.userStorage){let l=await jl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Fc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:hy()}else if(s&&!s.user&&!s.user){const l=await jl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Fo(this.storage,this.storageKey+"-user"),await Fc(this.storage,this.storageKey,s)):s.user=hy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<uy;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${uy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),dy(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lm;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new zo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Wt(a)){const l={data:null,error:a};return dy(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=hk(s);await Fc(this.storage,this.storageKey,a)}else{const s=hk(r);await Fc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Fo(this.storage,this.storageKey),await Fo(this.storage,this.storageKey+"-code-verifier"),await Fo(this.storage,this.storageKey+"-user"),this.userStorage&&await Fo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&aa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mc}ms, refresh threshold is ${uv} ticks`),s<=uv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!aa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Cc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await dr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await dr(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?B5(t.webauthn.credential_response):W5(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=await dr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:z5(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:U5(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=fy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+J6>s)return n;const{data:a,error:l}=await dr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:w}=await this.getSession();if(w||!x.session)return{data:null,error:w};n=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=fy(n);r!=null&&r.allowExpired||v5(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const f=x5(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,a5(`${u}.${d}`)))throw new hv("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}}}Sd.nextInstanceID=0;const Q5=Sd;class Z5 extends Q5{constructor(t){super(t)}}var e$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class t${constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const u=q6(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:$6,realtime:M6,auth:Object.assign(Object.assign({},R6),{storageKey:d}),global:D6},f=V6(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=U6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new X3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new O6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new U3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return e$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:u,lock:d,debug:m},f,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z5({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new m6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r$=(e,t,r)=>new t$(e,t,r);function n$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}n$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const s$="https://okdzllfpsvltjqryslnn.supabase.co",a$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",je=r$(s$,a$,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),i$=Object.freeze(Object.defineProperty({__proto__:null,supabase:je},Symbol.toStringTag,{value:"Module"})),Zi="__FEATURE_SUGGESTION__",Ox="__feature_suggestion__",o$="__feature_future_session__";function zm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(o$)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function yE(e){try{if(!je||typeof je.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${je.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const v=await f.text();throw console.error("[databaseService] Direct fetch error:",v),new Error(`API error: ${f.status} - ${v}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const a=je.from("users").select("*").eq("email",e).single(),u=await Promise.race([a,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function l$(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await je.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Uc(e,t){try{let r=await yE(e);return r||(r=await l$({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function Tx(){const{data:e,error:t}=await je.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function vE(e){var d;const[t,r,n]=await Promise.all([eo(e),je.from("product_product_owners").select("product_id").eq("user_id",e),je.from("users").select("email").eq("id",e).single()]),s=r.data||[],a=s.some(m=>m.applies_to_all_products===!0||m.product_id==null);let l=0;if(a)try{l=(await Ix()).length}catch{l=0}else l=s.length||0;let u=0;if((d=n.data)!=null&&d.email){const{data:m}=await je.from("product_stakeholders").select("product_id").eq("user_email",n.data.email.toLowerCase());u=(m==null?void 0:m.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:l,stakeholderSessionCount:u}}const Yl="PRODUCTS_TABLE_MISSING";function qc(e){return typeof e=="object"&&e!==null&&e.code===Yl}async function Ix(){const{data:e,error:t}=await je.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Yl,r}throw t}return e||[]}async function Ho(e){const{data:t,error:r}=await je.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Yl,n}throw r}return t||[]}async function xE(e){const{data:t,error:r}=await je.from("product_product_owners").select("product_id").eq("user_id",e);if(r)throw r;if(!t||t.length===0)return[];if((t||[]).some(u=>u.applies_to_all_products===!0||u.product_id==null))return await Ix();const s=t.map(u=>u.product_id).filter(u=>!!u);if(s.length===0)return[];const{data:a,error:l}=await je.from("products").select("*").in("id",s).order("name",{ascending:!0});if(l){if((l==null?void 0:l.code)==="PGRST205"){const u=new Error("Products table is missing");throw u.code=Yl,u}throw l}return a||[]}async function wE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const a=t.name.trim();if(!a)throw new Error("Product name cannot be empty");r.name=a}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await je.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const a=new Error("Products table is missing");throw a.code=Yl,a}throw s}return n}async function wk(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:a}=await je.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(a){if((a==null?void 0:a.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Yl,l}if((a==null?void 0:a.code)==="23505"){const{data:l,error:u}=await je.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw a}return s}async function bE(e){const{error:t}=await je.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Yl,r}throw t}}const fu="*, product:products(name)";function Um(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Dx(e){return!e||e.length===0?[]:e.map(t=>Um(t))}async function Bd(){try{const e=`${je.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(fu)}&order=created_at.desc`,t={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Dx(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function $x(e){const{data:t,error:r}=await je.from("voting_sessions").select(fu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function c$(e){const{data:t,error:r}=await je.from("voting_sessions").select(fu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function bk(e){try{const t=`${je.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(fu)}&order=created_at.desc`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,a),new Error(`API error: ${n.status} - ${a}`)}const s=await n.json();return Dx(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function jE(e){try{if(await eo(e))return Bd();const{data:r,error:n}=await je.from("product_product_owners").select("product_id").eq("user_id",e);if(n)throw console.error("[databaseService] Error loading product product owners:",n),n;const s=(r==null?void 0:r.map(w=>w.product_id))||[],{data:a,error:l}=await je.from("users").select("email").eq("id",e).single();if(l)throw console.error("[databaseService] Error getting user email:",l),l;const u=a==null?void 0:a.email;if(!u)throw console.error("[databaseService] User email not found"),new Error("User email not found");const{data:d,error:m}=await je.from("product_stakeholders").select("product_id").eq("user_email",u.toLowerCase());if(m)throw console.error("[databaseService] Error loading product stakeholders:",m),m;const f=(d==null?void 0:d.map(w=>w.product_id))||[],p=[...new Set([...s,...f])];if(p.length===0)return[];const{data:v,error:x}=await je.from("voting_sessions").select(fu).in("product_id",p).order("created_at",{ascending:!1});if(x)throw console.error("[databaseService] Error loading voting sessions:",x),x;return Dx(v)}catch(t){throw console.error("[databaseService] Error in getSessionsForUser:",t),t}}async function u$(e){if(!e)return null;const{data:t,error:r}=await je.from("voting_sessions").select(fu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function jk(e){const{data:t,error:r}=await je.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function kE(e,t){const{data:r,error:n}=await je.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function d$(e){const{error:t}=await je.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function f$(e,t){const{error:r}=await je.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function Bm(e){const{data:t,error:r}=await je.from("product_owners").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function h$(e){const t=`or(product_id.eq.${e},applies_to_all_products.eq.true)`,{data:r,error:n}=await je.from("product_product_owners").select(`
      *,
      users (*)
    `).or(t);if(n)throw n;return(r||[]).map(s=>({id:s.id,session_id:"",user_id:s.user_id,created_at:s.created_at,user:s.users}))}async function kk(e,t){const{data:r,error:n}=await je.from("voting_sessions").select("product_id").eq("id",e).single();if(n||!(r!=null&&r.product_id))throw new Error("Session not found or has no product_id");const{data:s,error:a}=await je.from("product_product_owners").insert([{product_id:r.product_id,user_id:t}]).select(`
      *,
      users (*)
    `).single();if(a)throw a;return{id:s.id,session_id:e,user_id:s.user_id,created_at:s.created_at,user:s.users}}async function Rx(e,t){try{if(await eo(t))return!0;const{data:n,error:s}=await je.from("voting_sessions").select("product_id").eq("id",e).single();if(s||!(n!=null&&n.product_id))return!1;const a=`or(product_id.eq.${n.product_id},applies_to_all_products.eq.true)`,{data:l,error:u}=await je.from("product_product_owners").select("id").or(a).eq("user_id",t).maybeSingle();return u?(console.error("Error checking admin status:",u),!1):!!l}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function mv(e){const{data:t,error:r}=await je.from("voting_sessions").select("product_id").eq("id",e).single();if(r||!(t!=null&&t.product_id))return[];const{data:n,error:s}=await je.from("product_stakeholders").select("*").eq("product_id",t.product_id).order("user_name",{ascending:!0});if(s)throw s;return(n||[]).map(a=>({id:a.id,session_id:e,user_email:a.user_email,user_name:a.user_name,votes_allocated:a.votes_allocated,has_voted:a.has_voted,voted_at:a.voted_at,created_at:a.created_at}))}async function Mx(e,t){try{const{data:r,error:n}=await je.from("voting_sessions").select("product_id").eq("id",e).single();if(n||!(r!=null&&r.product_id))return!1;const{data:s,error:a}=await je.from("product_stakeholders").select("id").eq("product_id",r.product_id).eq("user_email",t.toLowerCase()).maybeSingle();return a?(console.error("Error checking stakeholder status:",a),!1):!!s}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function xi(e){const t=`${je.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return(await n.json()||[]).filter(a=>{const l=a.state===Zi,u=Array.isArray(a.tags)&&a.tags.includes(Ox);return!l&&!u}).map(a=>({...a,workItemType:a.work_item_type||a.workItemType||null,epic:a.epic||null,epicId:a.epic_id||a.epicId||null,areaPath:a.area_path||a.areaPath||null,azureDevOpsId:a.azure_devops_id||a.azureDevOpsId||null,azureDevOpsUrl:a.azure_devops_url||a.azureDevOpsUrl||null,attachmentUrls:a.attachment_urls||null,azure_devops_id:a.azure_devops_id||a.azureDevOpsId||null}))}async function ah(e){const{data:t,error:r}=await je.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,epic_id:e.epicId,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url,work_item_type:e.workItemType,attachment_urls:e.attachmentUrls}]).select().single();if(r)throw r;return{...t,workItemType:t.work_item_type||t.workItemType||null,epic:t.epic||null,epicId:t.epic_id||t.epicId||null,areaPath:t.area_path||t.areaPath||null,azureDevOpsId:t.azure_devops_id||t.azureDevOpsId||null,azureDevOpsUrl:t.azure_devops_url||t.azureDevOpsUrl||null,attachmentUrls:t.attachment_urls||null,azure_devops_id:t.azure_devops_id||t.azureDevOpsId||null}}async function Qu(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.epicId!==void 0&&(r.epic_id=t.epicId),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url),t.workItemType!==void 0&&(r.work_item_type=t.workItemType),t.attachmentUrls!==void 0&&(r.attachment_urls=t.attachmentUrls);const{data:n,error:s}=await je.from("features").update(r).eq("id",e).select().single();if(s)throw s;return{...n,workItemType:n.work_item_type||n.workItemType||null,epic:n.epic||null,epicId:n.epic_id||n.epicId||null,areaPath:n.area_path||n.areaPath||null,azureDevOpsId:n.azure_devops_id||n.azureDevOpsId||null,azureDevOpsUrl:n.azure_devops_url||n.azureDevOpsUrl||null,attachmentUrls:n.attachment_urls||null,azure_devops_id:n.azure_devops_id||n.azureDevOpsId||null}}async function Sk(e){const{error:t}=await je.from("features").delete().eq("id",e);if(t)throw t}function SE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function m$(e){try{const{data:t,error:r}=await je.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(SE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function p$(e){try{const{data:t,error:r}=await je.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return SE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Uo(e){const t=`${je.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return await n.json()||[]}async function g$(e){const{data:t}=await je.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await je.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await je.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function y$(e,t){const{error:r}=await je.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function v$(e){const{error:t}=await je.from("votes").delete().eq("session_id",e);if(t)throw t}async function x$(e){try{const{data:t,error:r}=await je.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function Lo(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await je.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:a,error:l}=await je.from("azure_devops_config").upsert([r]).select().single();if(!l)return a;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await je.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function w$(){return(await Bd())[0]||null}async function b$(e){const t=await w$();if(!t)throw new Error("No session found");return kE(t.id,e)}async function _k(e,t){return kE(e,t)}async function j$(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await je.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Zi,area_path:null,tags:[Ox],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return zm(r)}async function k$(e,t){const{data:r,error:n}=await je.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Zi).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const a={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await je.from("features").update({title:t.title??r.title,description:JSON.stringify(a)}).eq("id",e).eq("state",Zi).select("id, session_id, title, description, created_at").single();if(u)throw u;return zm(l)}async function S$(e){const{error:t}=await je.from("features").delete().eq("id",e).eq("state",Zi);if(t)throw t}async function _$(e,t){const{data:r,error:n}=await je.from("features").update({session_id:t}).eq("id",e).eq("state",Zi).select("id, session_id, title, description, created_at").single();if(n)throw n;return zm(r)}async function N$(e){const{data:t,error:r}=await je.from("features").select("*").eq("id",e).eq("state",Zi).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const a=Array.isArray(t.tags)?t.tags.filter(d=>d!==Ox):[],{data:l,error:u}=await je.from("features").update({description:s.join(`

`)||t.title,state:null,tags:a}).eq("id",e).eq("state",Zi).select("*").single();if(u)throw u;return l}async function Nk(e){const{data:t,error:r}=await je.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Zi).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(zm)}async function Ck(){const{data:e,error:t}=await je.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Ek(e){const{data:t,error:r}=await je.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function C$(e){const{error:t}=await je.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function eo(e){try{const t=`${je.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const E$=["dave.hoffman@newmill.com"],A$="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),P$=Array.from(new Set([...E$,...A$]));function Lh(e){return e?P$.includes(e.toLowerCase()):!1}const _E=y.createContext(void 0);function O$({children:e}){const[t,r]=y.useState(null),[n,s]=y.useState([]),[a,l]=y.useState(null),[u,d]=y.useState(!1),[m,f]=y.useState(!1),[p,v]=y.useState(!1),[x,w]=y.useState(!0),[j,b]=y.useState(!1),[_,C]=y.useState(!1),N=y.useRef(!1),T=y.useCallback(async F=>{if(_)return;const Q=F||a;if(!Q){s([]),r(q=>{if(q)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}C(!0);try{const q=Lh(Q.email);let ae;q?ae=await Bd():ae=await jE(Q.id),s(ae),r(Y=>{if(!Y)return Y;const oe=ae.find(V=>V.id===Y.id);if(!oe){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(oe.id!==Y.id)return Y;if(oe!==Y){try{localStorage.setItem("voting_system_current_session",oe.id)}catch{}return oe}return Y})}catch(q){console.error("Error loading sessions:",q),s([])}finally{C(!1)}},[a,_]);y.useEffect(()=>{if(N.current)return;N.current=!0;const F=setTimeout(()=>{w(!1)},5e3);(async()=>{var ae,Y;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var K,ge;try{const{data:{session:$}}=await je.auth.getSession();if($!=null&&$.user){const G=$.user.email;if(G){const ce=((K=$.user.user_metadata)==null?void 0:K.full_name)||((ge=$.user.user_metadata)==null?void 0:ge.name)||G.split("@")[0]||"User";try{const le=await Uc(G.toLowerCase(),ce);l(le),await T(le),setTimeout(()=>{if(window.location.hash){const U=window.location.pathname+window.location.search;window.history.replaceState(null,"",U)}},200)}catch(le){console.error("Error getting/creating user:",le)}}}}catch($){console.error("Error in OAuth callback handler:",$)}finally{w(!1),clearTimeout(F)}},1e3);return}const{data:{session:V}}=await je.auth.getSession();if(V!=null&&V.user){const K=V.user.email;if(K){const ge=((ae=V.user.user_metadata)==null?void 0:ae.full_name)||((Y=V.user.user_metadata)==null?void 0:Y.name)||K.split("@")[0]||"User";try{const $=await Uc(K.toLowerCase(),ge);l($),await T($)}catch($){console.error("Error getting/creating user:",$)}}}else{const K=localStorage.getItem("voting_system_user");if(K)try{const ge=JSON.parse(K);l(ge);try{await T(ge)}catch($){console.error("Error refreshing sessions:",$)}}catch(ge){console.error("Error loading stored user:",ge),localStorage.removeItem("voting_system_user")}}}catch(oe){console.error("Error checking Supabase auth:",oe);const V=localStorage.getItem("voting_system_user");if(V)try{const K=JSON.parse(V);l(K)}catch(K){console.error("Error loading stored user:",K),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(w(!1),clearTimeout(F))}})();const{data:{subscription:q}}=je.auth.onAuthStateChange(async(ae,Y)=>{var oe,V,K,ge;if(ae==="SIGNED_IN"&&(Y!=null&&Y.user)){const $=Y.user.email;if($){const G=((oe=Y.user.user_metadata)==null?void 0:oe.full_name)||((V=Y.user.user_metadata)==null?void 0:V.name)||$.split("@")[0]||"User",ce=await Uc($.toLowerCase(),G);l(ce),await T(ce),w(!1),setTimeout(()=>{if(window.location.hash){const le=window.location.pathname+window.location.search;window.history.replaceState(null,"",le)}},100)}}else if(ae==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),w(!1);else if(ae==="TOKEN_REFRESHED"&&(Y!=null&&Y.user)){if(!a&&Y.user.email){const $=Y.user.email,G=((K=Y.user.user_metadata)==null?void 0:K.full_name)||((ge=Y.user.user_metadata)==null?void 0:ge.name)||$.split("@")[0]||"User",ce=await Uc($.toLowerCase(),G);l(ce),await T(ce)}w(!1)}});return()=>{q.unsubscribe(),clearTimeout(F)}},[]),y.useEffect(()=>{(async()=>{if(!t||!a){d(!1),f(!1),b(!1);return}if(!j)try{const[Q,q]=await Promise.all([Rx(t.id,a.id),Mx(t.id,a.email)]);d(Q),f(q),b(!1)}catch(Q){console.error("Error checking user roles:",Q),d(!1),f(!1),b(!0)}})()},[t,a,j]),y.useEffect(()=>{(async()=>{if(!a){v(!1);return}if(Lh(a.email)){v(!0);return}try{const q=await eo(a.id);v(q)}catch(q){console.error("Error checking system admin status:",q),v(!1)}})()},[a]);const A=y.useCallback(async F=>{l(F),b(!1),F?(localStorage.setItem("voting_system_user",JSON.stringify(F)),await T(F)):(localStorage.removeItem("voting_system_user"),s([]),r(null),v(!1))},[T]),P=y.useCallback(F=>{r(F),b(!1),F?localStorage.setItem("voting_system_current_session",F.id):localStorage.removeItem("voting_system_current_session")},[]);y.useEffect(()=>{(async()=>{if(!a||n.length===0)return;const Q=localStorage.getItem("voting_system_current_session");if(Q){const q=n.find(ae=>ae.id===Q);q&&r(q)}})()},[a,n]),y.useEffect(()=>{const F=()=>{const ae=window.location.hash;if(ae==="#"||ae===""){const Y=window.location.pathname+window.location.search;window.history.replaceState(null,"",Y)}};F();const Q=()=>{F()},q=setInterval(F,500);return window.addEventListener("hashchange",Q),()=>{clearInterval(q),window.removeEventListener("hashchange",Q)}},[]);const M={currentSession:t,sessions:n,currentUser:a,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:P,refreshSessions:T,setCurrentUser:A};return x?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx(_E.Provider,{value:M,children:e})}function tl(){const e=y.useContext(_E);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Fx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function rl(e,t,r,n){return new(r||(r=Promise))((function(s,a){function l(m){try{d(n.next(m))}catch(f){a(f)}}function u(m){try{d(n.throw(m))}catch(f){a(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var Ak,Pk,Ok,zh,Tk,Ik,Dk,pv,$k,Rk;function T$(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(Ak||(Ak={})),(function(e){e.M365Content="m365content"})(Pk||(Pk={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(Ok||(Ok={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(zh||(zh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(Tk||(Tk={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(Ik||(Ik={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(Dk||(Dk={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(pv||(pv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})($k||($k={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(Rk||(Rk={}));var Pr,gv,yv,Mk,Fk,Lk,zk,Uk;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Pr||(Pr={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(gv||(gv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(yv||(yv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(Mk||(Mk={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(Fk||(Fk={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(Lk||(Lk={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(zk||(zk={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(Uk||(Uk={}));const I$={errorCode:zh.NOT_SUPPORTED_ON_PLATFORM},D$={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var Bk={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ih;const $$=new Uint8Array(16);function R$(){if(!ih&&(ih=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ih))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ih($$)}const ys=[];for(let e=0;e<256;++e)ys.push((e+256).toString(16).slice(1));function M$(e,t=0){return ys[e[t+0]]+ys[e[t+1]]+ys[e[t+2]]+ys[e[t+3]]+"-"+ys[e[t+4]]+ys[e[t+5]]+"-"+ys[e[t+6]]+ys[e[t+7]]+"-"+ys[e[t+8]]+ys[e[t+9]]+"-"+ys[e[t+10]]+ys[e[t+11]]+ys[e[t+12]]+ys[e[t+13]]+ys[e[t+14]]+ys[e[t+15]]}function F$(e,t,r){if(Bk.randomUUID&&!e)return Bk.randomUUID();const n=(e=e||{}).random||(e.rng||R$)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,M$(n)}var L$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function z$(e){return typeof e=="string"&&L$.test(e)}function NE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(a){return/^\d+$/.test(a)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let a=0;a<r.length;++a)if(Number(r[a])!=Number(n[a]))return Number(r[a])>Number(n[a])?1:-1;return 0}function U$(){return F$()}function CE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&CE(e[t])})),Object.freeze(e)}function B$(e,t,r){return new Promise(((n,s)=>{const a=setTimeout(s,t,r);e().then((l=>{clearTimeout(a),n(l)})).catch((l=>{clearTimeout(a),s(l)}))}))}function W$(e){return e.protocol==="https:"}function V$(){if(Wm())throw new Error("window object undefined at SSR check");return window}function Wm(){return typeof window>"u"}function q$(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function H$(e){if(!e)throw new Error("id must not be empty");if(z$(e)===!1)throw new Error("id must be a valid UUID")}const K$=!!performance&&"now"in performance;function Lx(){return K$?performance.now()+performance.timeOrigin:void 0}function Wk(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:pv.NotAdult})})})}let Wd=class{constructor(t=U$()){this.uuid=t,H$(t)}toString(){return this.uuid}serialize(){return this.toString()}};const EE=e=>{const{uuid:t}=e,r=Fx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},G$=e=>{const{uuidAsString:t}=e,r=Fx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Wd(t):void 0})};var vv={exports:{}},Vk,qk;function Y$(){if(qk)return Vk;qk=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,a=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return Vk=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return v*a;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*n;case"hours":case"hour":case"hrs":case"hr":case"h":return v*r;case"minutes":case"minute":case"mins":case"min":case"m":return v*t;case"seconds":case"second":case"secs":case"sec":case"s":return v*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var J$=function(e){function t(s){let a,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,v=Number(new Date),x=v-(a||v);p.diff=x,p.prev=a,p.curr=v,a=v,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let w=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((j,b)=>{if(j==="%%")return"%";w++;const _=t.formatters[b];if(typeof _=="function"){const C=f[w];j=_.call(p,C),f.splice(w,1),w--}return j})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,a){const l=t(this.namespace+(a===void 0?":":a)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((a=>"-"+a))].join(",");return t.enable(""),s},t.enable=function(s){let a;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((s=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(s))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(s))return!0;return!1},t.humanize=Y$(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let a=0;for(let l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l),a|=0;return t.colors[Math.abs(a)%t.colors.length]},t.enable(t.load()),t},X$={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let a=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=X$.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=J$(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(vv,vv.exports);var zx=vv.exports;const Q$=new Wd,Z$=zx.debug.formatArgs;zx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${Q$.toString()}]`,Z$.call(this,e)};const eR=zx.debug("teamsJs");function Ti(e){return eR.extend(e)}function Nn(e,t){return`${e}_${t}`}function AE(e){return/^v\d+_[\w.]+$/.test(e)}function Yo(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const tR=Ti("flushMessageQueue");function PE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const a=EE(s);tR("Flushing message %s from %s message queue via postMessage.",Yo(a),n),e.postMessage(a,t)}}}var rR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const Hk="2.0.1",Nh=rR,Kk=1500,nR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),sR=/^https:\/\//,_d="The library has not yet been initialized",aR="The runtime has not yet been initialized",iR="The runtime version is not supported";let yr=class{};yr.initializeCalled=!1,yr.initializeCompleted=!1,yr.additionalValidOrigins=[],yr.initializePromise=void 0,yr.isFramelessWindow=!1,yr.frameContext=void 0,yr.hostClientType=void 0,yr.printCapabilityEnabled=!1,yr.teamsJsInstanceId=new Wd().toString();const OE=Ti("runtime"),Vm=4;function TE(e){return e.apiVersion===Vm}function oR(e){if(TE(e))return!0;throw e.apiVersion===-1?new Error(aR):new Error(iR)}let _i={apiVersion:-1,supports:{}};const lR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},IE=[Pr.desktop,Pr.web,Pr.rigel,Pr.surfaceHub,Pr.teamsRoomsWindows,Pr.teamsRoomsAndroid,Pr.teamsPhones,Pr.teamsDisplays],cR=[Pr.android,Pr.ios,Pr.ipados,Pr.visionOS],Gk=[...IE,...cR];function uR(e){let t=e;if(t.apiVersion<Vm&&dR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),TE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const dR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Fx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,a;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(a=e.supports.dialog)===null||a===void 0?void 0:a.update}:void 0})}}}],fR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:IE}],"1.9.0":[{capability:{location:{}},hostClientTypes:Gk}],"2.0.0":[{capability:{people:{}},hostClientTypes:Gk},{capability:{sharing:{}},hostClientTypes:[Pr.desktop,Pr.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Pr.android,Pr.desktop,Pr.ios,Pr.teamsRoomsAndroid,Pr.teamsPhones,Pr.teamsDisplays,Pr.web]},{capability:{webStorage:{}},hostClientTypes:[Pr.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Pr.android,Pr.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Pr.android,Pr.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Pr.android,Pr.ios,Pr.ipados,Pr.visionOS]}],"2.1.2":[]},py=OE.extend("generateBackCompatRuntimeConfig");function DE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=DE(e[n]||{},t[n]));return r}function hR(e,t,r){py("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);py("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((a=>{NE(e,a)>=0&&r[a].forEach((l=>{yr.hostClientType!==void 0&&l.hostClientTypes.includes(yr.hostClientType)&&(n=DE(n,l.capability))}))}));const s={apiVersion:Vm,hostVersionsInfo:D$,isLegacyTeams:!0,supports:n};return py("Runtime config after updating based on highestSupportedVersion: %o",s),s}const gy=OE.extend("applyRuntimeConfig");function yy(e){typeof e.apiVersion=="string"&&(gy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),gy("Fast-forwarding runtime %o",e);const t=uR(e);gy("Applying runtime %o",t),_i=CE(t)}function mR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Uh="2.46.0";let Bh=class Lc{static storeCallbackInformation(t,r){Lc.callbackInformation.set(t,r)}static clearMessages(){Lc.callbackInformation.clear()}static deleteMessageInformation(t){Lc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?oS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const a=Lc.callbackInformation.get(t);a&&r.monotonicTimestamp&&s?(oS({actionName:a.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:a.calledAt}),Lc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Bh.callbackInformation=new Map;const $E=Ti("nestedAppAuthUtils"),pR=$E.extend("tryPolyfillWithNestedAppAuthBridge"),gR="v2";function yR(e,t,r){var n;const s=pR;if(yr.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const a=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!a||!(!((n=a.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=vR;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:v}=m,x=w=>j=>p(j,w);return{addEventListener:(w,j)=>{w==="message"?d.addEventListener(w,x(j)):f(`Event ${w} is not supported by nestedAppAuthBridge`)},postMessage:w=>{const j=(()=>{try{return JSON.parse(w)}catch{return null}})();if(!j||typeof j!="object"||j.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",w);const b=Nn(gR,"nestedAppAuth.execute");v(w,b)},removeEventListener:(w,j)=>{d.removeEventListener(w,x(j))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const vR=$E.extend("createNestedAppAuthBridge");let Bo=[];const Ko=Ti("validateOrigin");let ud;function xR(){return rl(this,void 0,void 0,(function*(){ud||(yield ME())}))}function RE(){return Bo.length===0}function ME(e=!1){return rl(this,void 0,void 0,(function*(){if(!RE()&&!e)return Bo;if(ud)return ud;if(Wm())return Bo=Nh,Nh;{Ko("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),Kk);return ud=fetch(nR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Ko("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(a){let l=JSON.parse(a);try{l=JSON.parse(a)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Ko("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Bo=s.validOrigins,Bo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Ko(`validOrigins fetch call to CDN failed due to Timeout of ${Kk} ms. Defaulting to fallback list`):Ko("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Bo=Nh,Bo))),ud}}))}function Yk(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function wR(e,t){const r=RE()?Nh:Bo;return Jk(e,r)?Promise.resolve(!0):(Ko("Origin %s is not in the local valid origins list, fetching from CDN",e),ME(t).then((n=>Jk(e,n))))}function Jk(e,t){if(!W$(e))return Ko("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>Yk(n,r))))return!0;for(const n of yr.additionalValidOrigins)if(Yk(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Ko(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,yr.additionalValidOrigins),!1}xR();const Jl=Ti("communication");let Dt=class{},Tr=class{};function bR(e,t){if(Tr.messageListener=r=>(function(n){return rl(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void Xk("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,a=n.origin||n.originalEvent&&n.originalEvent.origin;return zE(s,a).then((l=>{l?((function(u,d){yr.isFramelessWindow||Dt.parentWindow&&!Dt.parentWindow.closed&&u!==Dt.parentWindow||(Dt.parentWindow=u,Dt.parentOrigin=d),Dt.parentWindow&&Dt.parentWindow.closed&&(Dt.parentWindow=null,Dt.parentOrigin=null),PE(Dt.parentWindow,Dt.parentOrigin,Tr.parentMessageQueue,"parent")})(s,a),s!==Dt.parentWindow?SM():Zk(n)):Xk("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,a)}))}))})(r),Dt.currentWindow=Dt.currentWindow||V$(),Dt.parentWindow=Dt.currentWindow.parent!==Dt.currentWindow.self?Dt.currentWindow.parent:Dt.currentWindow.opener,Dt.topWindow=Dt.currentWindow.top,(Dt.parentWindow||e)&&Dt.currentWindow.addEventListener("message",Tr.messageListener,!1),!Dt.parentWindow){const r=Dt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));yr.isFramelessWindow=!0,r.onNativeMessage=Zk}try{return Dt.parentOrigin="*",qm(t,"initialize",[Uh,Vm,e]).then((([r,n,s,a])=>(yR(a,Dt.currentWindow,{onMessage:OR,sendPostMessage:CR}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:a})))}finally{Dt.parentOrigin=null}}function jR(e,t,...r){return qm(e,t,r).then((([n])=>n))}function kR(e,t,r,...n){return qm(e,t,n).then((([s,a])=>{if(!s)throw new Error(a||r)}))}function qm(e,t,r=void 0){if(!AE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=LE(e,t,r);var a;n((a=s.uuid,new Promise((l=>{Tr.promiseCallbacks.set(a,l)}))))}))}function SR(e){return e.map((t=>mR(t)?t.serialize():t))}function _R(e,t,r,n,s){var a;return rl(this,void 0,void 0,(function*(){const l=SR(t),[u]=yield qm(n,e,l);if(T$(u))throw new Error(`${u.errorCode}, message: ${(a=u.message)!==null&&a!==void 0?a:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${zh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function ni(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!AE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const a=LE(e,t,s);n&&Tr.callbacks.set(a.uuid,n)}Tr.parentMessageQueue=[],Tr.topMessageQueue=[],Tr.nextMessageId=0,Tr.callbacks=new Map,Tr.promiseCallbacks=new Map,Tr.portCallbacks=new Map,Tr.legacyMessageIdsToUuidMap={};const NR=Jl.extend("sendNestedAuthRequestToTopWindow");function CR(e,t){const r=NR,n=Dt.topWindow,s=(function(a,l){const u=Tr.nextMessageId++,d=new Wd;return Tr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Lx(),apiVersionTag:l,args:[],data:a}})(e,t);return r("Message %s information: %o",Yo(s),{actionName:s.func}),FE(n,s)}const ER=Jl.extend("sendRequestToTargetWindowHelper");function FE(e,t){const r=ER,n=(function(a){return a===Dt.topWindow&&xv()?"top":a===Dt.parentWindow?"parent":null})(e),s=EE(t);if(yr.isFramelessWindow)Dt.currentWindow&&Dt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Yo(s),n),Dt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const a=(function(l){return l===Dt.topWindow&&xv()?Dt.topOrigin:l===Dt.parentWindow?Dt.parentOrigin:null})(e);e&&a?(r("Sending message %s to %s via postMessage",Yo(s),n),e.postMessage(s,a)):(r("Adding message %s to %s message queue",Yo(s),n),TR(e).push(t))}return t}const AR=Jl.extend("sendMessageToParentHelper");function LE(e,t,r,n,s){const a=AR,l=Dt.parentWindow,u=(function(d,m,f,p,v){const x=Tr.nextMessageId++,w=new Wd;Tr.legacyMessageIdsToUuidMap[x]=w;const j=yr.teamsJsInstanceId;return{id:x,uuid:w,func:m,timestamp:Date.now(),monotonicTimestamp:Lx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:j}})(e,t,r,n);return Bh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),a("Message %s information: %o",Yo(u),{actionName:t,args:r}),FE(l,u)}const Xk=Jl.extend("processIncomingMessage"),PR=Jl.extend("processAuthBridgeMessage");function OR(e,t){var r,n;const s=PR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:a}=e.data,[,l]=a??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?zE(d,m)?(Dt.topWindow&&!Dt.topWindow.closed&&d!==Dt.topWindow||(Dt.topWindow=d,Dt.topOrigin=m),Dt.topWindow&&Dt.topWindow.closed&&(Dt.topWindow=null,Dt.topOrigin=null),PE(Dt.topWindow,Dt.topOrigin,Tr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const vy=Jl.extend("shouldProcessIncomingMessage");function zE(e,t){return rl(this,void 0,void 0,(function*(){if(Dt.currentWindow&&e===Dt.currentWindow)return vy("Should not process message because it is coming from the current window"),!1;if(Dt.currentWindow&&Dt.currentWindow.location&&t&&t===Dt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return vy("Message has an invalid origin of %s",t),!1}const n=yield wR(r);return n||vy("Message has an invalid origin of %s",t),n}}))}const Qk=Jl.extend("handleIncomingMessageFromParent");function Ch(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function xy(e,t){const r=Ch(t,e.uuid);r&&t.delete(r),e.uuid?Tr.legacyMessageIdsToUuidMap={}:delete Tr.legacyMessageIdsToUuidMap[e.id]}function Zk(e){const t=Qk,r=Lx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=G$(n),a=(function(l){const u=Qk;if(!l.uuid)return Tr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Ch(Tr.callbacks,d);if(m)return m;const f=Ch(Tr.promiseCallbacks,d);if(f)return f;const p=Ch(Tr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Yo(l))})(s);if(a){const l=Tr.callbacks.get(a);t("Received a response from parent for message %s",a.toString()),Bh.handlePerformanceMetrics(a,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",a.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",a.toString()),xy(s,Tr.callbacks)));const u=Tr.promiseCallbacks.get(a);u&&(t("Invoking the registered promise callback for message %s with arguments %o",a.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",a.toString()),xy(s,Tr.promiseCallbacks));const d=Tr.portCallbacks.get(a);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",a.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",a.toString()),xy(s,Tr.portCallbacks)}s.uuid&&(Tr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Bh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Yo(n),n.func),yM(n.func,n.args)}else t("Received an unknown message: %O",e)}function xv(){return Dt.topWindow!==Dt.parentWindow}function TR(e){return e===Dt.topWindow&&xv()?Tr.topMessageQueue:e===Dt.parentWindow?Tr.parentMessageQueue:[]}const UE=Ti("internal"),IR=UE.extend("ensureInitializeCalled"),DR=UE.extend("ensureInitialized");function BE(){if(!yr.initializeCalled)throw IR(_d),new Error(_d)}function hu(e,...t){if(!yr.initializeCompleted)throw DR("%s. initializeCalled: %s",_d,yr.initializeCalled.toString()),new Error(_d);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===yr.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${yr.frameContext}".`)}return oR(e)}function $R(e){let t=yr.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&sR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),yr.additionalValidOrigins=t}function RR(e){if(!FR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${WE}-${VE}).`)}function MR(e){if(q$(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(LR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const WE=4,VE=256;function FR(e){return e.length<VE&&e.length>WE}function LR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let zR=class{constructor(t){this.idAsString=t,MR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},UR=class extends zR{constructor(t){super(t),RR(t)}toJSON(){return{appIdAsString:this.toString()}}};function qE(e){return e==null}const Hm="v2",wy=Ti("app"),eS={Success:"appInitialization.success"};var tS,rS;function BR(e){return oM(Nn(Hm,"app.initialize"),e)}function WR(){return new Promise((e=>{BE(),e(jR(Nn(Hm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:gv.teams,clientType:t.hostClientType?t.hostClientType:Pr.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new UR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:yr.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function VR(){return lM(Nn(Hm,"app.notifySuccess"))}function qR(e){cM(Nn(Hm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(tS||(tS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(rS||(rS={})),wy("teamsjs instance is version %s, starting at %s UTC (%s local)",Uh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Wm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?wy("teamsjs is being used from %s. %s",t,r):wy("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const HR="v2",KR=[];function GR(e){yr.frameContext&&(yr.frameContext===yv.task?KR.push(e):vM("messageForChild"))}function YR(){Il(Nn(HR,"dialog.registerMessageForChildHandler"),"messageForChild",GR,!1)}const Hc="v2";var nS,sS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(nS||(nS={}));function JR(){Il(Nn(Hc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",QR,!1),Il(Nn(Hc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",ZR,!1),Il(Nn(Hc,"menus.registerSetModuleViewHandler"),"setModuleView",XR,!1)}function XR(e){hu(_i),ni(Nn(Hc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function QR(e){hu(_i),ni(Nn(Hc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function ZR(e){hu(_i),ni(Nn(Hc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(sS||(sS={}));class eM{}let tM=class extends eM{validate(t){return!0}deserialize(t){return t}};function rM(){Il(Nn(Fl,"pages.config.registerSettingsSaveHandler"),"settings.save",nM,!1),Il(Nn(Fl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",aM,!1)}function nM(e){new sM(e).notifySuccess()}let sM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),ni(Nn(Fl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ni(Nn(Fl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function aM(){new iM().notifySuccess()}let iM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),ni(Nn(Fl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ni(Nn(Fl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const HE=Ti("app");function oM(e,t){return Wm()?(HE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):B$((()=>(function(r,n){return new Promise((s=>{yr.initializeCalled||(yr.initializeCalled=!0,gM(),yr.initializePromise=bR(n,r).then((({context:a,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=Hk})=>{yr.frameContext=a,yr.hostClientType=l,yr.clientSupportedSDKVersion=d;try{Zu("Parsing %s",u);let m=JSON.parse(u);if(Zu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=Wk(m),u&&yy(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Zu("Attempting to parse %s as an SDK version",u),isNaN(NE(u,Hk))||(yr.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Zu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=Wk(f),yy(f)}catch(f){if(!(f instanceof SyntaxError))throw f;yy(hR(yr.clientSupportedSDKVersion,lR,fR))}}yr.initializeCompleted=!0})),JR(),rM(),YR()),Array.isArray(n)&&$R(n),yr.initializePromise!==void 0?s(yr.initializePromise):Zu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function lM(e){return rl(this,void 0,void 0,(function*(){if(yr.initializeCompleted)return aS(e);if(!yr.initializePromise)throw new Error(_d);return yr.initializePromise.then((()=>aS(e)))}))}function aS(e){return rl(this,void 0,void 0,(function*(){return hu(_i)&&(!((t=_i.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?_R(eS.Success,[Uh],new tM,e).then((()=>({hasFinishedSuccessfully:!0}))):(ni(e,eS.Success,[Uh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Zu=HE.extend("initializeHelper");function cM(e,t){!qE(t)&&BE(),xM(e,t)}function uM(){return fM(Nn(Fl,"pages.backStack.navigateBack"))}function dM(){return!(!hu(_i)||!_i.supports.pages)&&!!_i.supports.pages.backStack}const Fl="v2";function fM(e){return new Promise((t=>{if(hu(_i),!dM())throw I$;t(kR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function hM(){Il(Nn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",mM,!1)}function mM(){uM()}const pM=Ti("handlers");let en=class wi{static initializeHandlers(){wi.handlers.themeChange=wM,wi.handlers.load=bM,wi.handlers.beforeUnload=jM,hM()}static uninitializeHandlers(){wi.handlers={},wi.themeChangeHandler=null,wi.loadHandler=null,wi.beforeUnloadHandler=null,wi.beforeSuspendOrTerminateHandler=null,wi.resumeHandler=null}};function gM(){en.initializeHandlers()}en.handlers={},en.themeChangeHandler=null,en.loadHandler=null,en.beforeUnloadHandler=null,en.beforeSuspendOrTerminateHandler=null,en.resumeHandler=null,en.hostToAppPerformanceMetricsHandler=null;const iS=pM.extend("callHandler");function yM(e,t){const r=en.handlers[e];return r?(iS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(iS("Handler for action message %s not found.",e),[!1,void 0])}function Il(e,t,r,n=!0,s=[]){r?(en.handlers[t]=r,n&&ni(e,"registerHandler",[t,...s])):delete en.handlers[t]}function vM(e){delete en.handlers[e]}function xM(e,t){en.themeChangeHandler=t,!qE(t)&&ni(e,"registerHandler",["themeChange"])}function wM(e){en.themeChangeHandler&&en.themeChangeHandler(e)}function oS(e){en.hostToAppPerformanceMetricsHandler&&en.hostToAppPerformanceMetricsHandler(e)}function bM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;en.resumeHandler?(en.resumeHandler(t),lS()):en.loadHandler&&(en.loadHandler(e),lS())}function jM(){return rl(this,void 0,void 0,(function*(){const e=()=>{ni(Nn("v2","handleBeforeUnload"),"readyToUnload",[])};en.beforeSuspendOrTerminateHandler?(yield en.beforeSuspendOrTerminateHandler(),e()):en.beforeUnloadHandler&&en.beforeUnloadHandler(e)||e()}))}const kM=Ti("childProxyingCommunication");function lS(){return!1}function SM(e,t){return!1}kM.extend("handleIncomingMessageFromChild");const _M=y.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),NM=({children:e})=>{const[t,r]=y.useState(!1),[n,s]=y.useState(null),[a,l]=y.useState(!1),[u,d]=y.useState(null);return y.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await BR();const v=await WR();console.log(" Teams context:",v),r(!0),s(v),d(v.app.theme),qR(x=>{d(x)}),VR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),i.jsx(_M.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:a,teamsTheme:u},children:e})},CM="service_idsx5cg",EM="template_4owif48",AM="OXfL2jaTJuDR5IThS";async function Jc(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:CM,template_id:EM,user_id:AM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let a=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?a=l.text:l.message?a=l.message:l.error&&(a=l.error)}catch{a=s||a}throw new Error(a)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),cS=e=>{const t=OM(e);return t.charAt(0).toUpperCase()+t.slice(1)},KE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),TM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},d)=>y.createElement("svg",{ref:d,...IM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:KE("lucide",s),...!a&&!TM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>y.createElement(m,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=(e,t)=>{const r=y.forwardRef(({className:n,...s},a)=>y.createElement(DM,{ref:a,iconNode:t,className:KE(`lucide-${PM(cS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=cS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uS=Jt("arrow-left",$M);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],GE=Jt("arrow-right-left",RM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],FM=Jt("arrow-right",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wv=Jt("badge-check",LM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],YE=Jt("book-open",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],JE=Jt("bug",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Da=Jt("calendar",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Eh=Jt("chart-no-axes-column",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ia=Jt("chevron-down",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],HM=Jt("chevron-left",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dn=Jt("circle-alert",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yn=Jt("circle-check-big",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ux=Jt("clock",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Mr=Jt("crown",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],QM=Jt("database",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Bx=Jt("ellipsis-vertical",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],XE=Jt("flask-conical",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],rF=Jt("funnel-x",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sF=Jt("funnel",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oh=Jt("info",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Km=Jt("lightbulb",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ki=Jt("list",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cF=Jt("lock",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pa=Jt("log-out",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Gm=Jt("mail",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ll=Jt("minus",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],xs=Jt("paperclip",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wh=Jt("pencil",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pn=Jt("plus",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xo=Jt("refresh-cw",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bv=Jt("search",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xs=Jt("settings",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jv=Jt("shield-check",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cr=Jt("shield",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],jF=Jt("shuffle",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Oc=Jt("sparkles",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zl=Jt("square-check-big",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vh=Jt("square-pen",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nd=Jt("square",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Tc=Jt("star",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],dS=Jt("tag",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],to=Jt("trash-2",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],OF=Jt("triangle-alert",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ym=Jt("trophy",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fS=Jt("user-plus",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nn=Jt("user",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kn=Jt("users",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],un=Jt("vote",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],FF=Jt("workflow",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_n=Jt("x",LF),oi="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",zF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Vd=e=>e.type==="checkbox",Pl=e=>e instanceof Date,Js=e=>e==null;const QE=e=>typeof e=="object";var Un=e=>!Js(e)&&!Array.isArray(e)&&QE(e)&&!Pl(e),ZE=e=>Un(e)&&e.target?Vd(e.target)?e.target.checked:e.target.value:e,UF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,eA=(e,t)=>e.has(UF(t)),BF=e=>{const t=e.constructor&&e.constructor.prototype;return Un(t)&&t.hasOwnProperty("isPrototypeOf")},Wx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Wx&&(e instanceof Blob||n))&&(r||Un(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!BF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Kn(e[s]));else return e;return t}var Jm=e=>/^\w*$/.test(e),vn=e=>e===void 0,Vx=e=>Array.isArray(e)?e.filter(Boolean):[],qx=e=>Vx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ct=(e,t,r)=>{if(!t||!Un(e))return r;const n=(Jm(t)?[t]:qx(t)).reduce((s,a)=>Js(s)?s:s[a],e);return vn(n)||n===e?vn(e[t])?r:e[t]:n},la=e=>typeof e=="boolean",Gr=(e,t,r)=>{let n=-1;const s=Jm(t)?[t]:qx(t),a=s.length,l=a-1;for(;++n<a;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Un(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const qh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Qa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tA=Ft.createContext(null);tA.displayName="HookFormContext";const Hx=()=>Ft.useContext(tA);var rA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const l=a;return t._proxyFormState[l]!==Qa.all&&(t._proxyFormState[l]=!n||Qa.all),r&&(r[l]=!0),e[l]}});return s};const Kx=typeof window<"u"?Ft.useLayoutEffect:Ft.useEffect;function WF(e){const t=Hx(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[l,u]=Ft.useState(r._formState),d=Ft.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Kx(()=>r._subscribe({name:s,formState:d.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,a]),Ft.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),Ft.useMemo(()=>rA(l,r,d.current,!1),[l,r])}var ua=e=>typeof e=="string",kv=(e,t,r,n,s)=>ua(e)?(n&&t.watch.add(e),ct(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),ct(r,a))):(n&&(t.watchAll=!0),r),Sv=e=>Js(e)||!QE(e);function Za(e,t,r=new WeakSet){if(Sv(e)||Sv(t))return e===t;if(Pl(e)&&Pl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const u=t[a];if(Pl(l)&&Pl(u)||Un(l)&&Un(u)||Array.isArray(l)&&Array.isArray(u)?!Za(l,u,r):l!==u)return!1}}return!0}function VF(e){const t=Hx(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:l,compute:u}=e||{},d=Ft.useRef(s),m=Ft.useRef(u),f=Ft.useRef(void 0),p=Ft.useRef(r),v=Ft.useRef(n);m.current=u;const[x,w]=Ft.useState(()=>{const T=r._getWatch(n,d.current);return m.current?m.current(T):T}),j=Ft.useCallback(T=>{const A=kv(n,r._names,T||r._formValues,!1,d.current);return m.current?m.current(A):A},[r._formValues,r._names,n]),b=Ft.useCallback(T=>{if(!a){const A=kv(n,r._names,T||r._formValues,!1,d.current);if(m.current){const P=m.current(A);Za(P,f.current)||(w(P),f.current=P)}else w(A)}},[r._formValues,r._names,a,n]);Kx(()=>((p.current!==r||!Za(v.current,n))&&(p.current=r,v.current=n,b()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:T=>{b(T.values)}})),[r,l,n,b]),Ft.useEffect(()=>r._removeUnmounted());const _=p.current!==r,C=v.current,N=Ft.useMemo(()=>{if(a)return null;const T=!_&&!Za(C,n);return _||T?j():null},[a,_,n,C,j]);return N!==null?N:x}function qF(e){const t=Hx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:a,defaultValue:l}=e,u=eA(s._names.array,r),d=Ft.useMemo(()=>ct(s._formValues,r,ct(s._defaultValues,r,l)),[s,r,l]),m=VF({control:s,name:r,defaultValue:d,exact:!0}),f=WF({control:s,name:r,exact:!0}),p=Ft.useRef(e),v=Ft.useRef(void 0),x=Ft.useRef(s.register(r,{...e.rules,value:m,...la(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const w=Ft.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ct(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!ct(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ct(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ct(f.validatingFields,r)},error:{enumerable:!0,get:()=>ct(f.errors,r)}}),[f,r]),j=Ft.useCallback(N=>x.current.onChange({target:{value:ZE(N),name:r},type:qh.CHANGE}),[r]),b=Ft.useCallback(()=>x.current.onBlur({target:{value:ct(s._formValues,r),name:r},type:qh.BLUR}),[r,s._formValues]),_=Ft.useCallback(N=>{const T=ct(s._fields,r);T&&N&&(T._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:A=>N.setCustomValidity(A),reportValidity:()=>N.reportValidity()})},[s._fields,r]),C=Ft.useMemo(()=>({name:r,value:m,...la(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:j,onBlur:b,ref:_}),[r,n,f.disabled,j,b,_,m]);return Ft.useEffect(()=>{const N=s._options.shouldUnregister||a,T=v.current;T&&T!==r&&!u&&s.unregister(T),s.register(r,{...p.current.rules,...la(p.current.disabled)?{disabled:p.current.disabled}:{}});const A=(P,M)=>{const F=ct(s._fields,P);F&&F._f&&(F._f.mount=M)};if(A(r,!0),N){const P=Kn(ct(s._options.defaultValues,r,p.current.defaultValue));Gr(s._defaultValues,r,P),vn(ct(s._formValues,r))&&Gr(s._formValues,r,P)}return!u&&s.register(r),v.current=r,()=>{(u?N&&!s._state.action:N)?s.unregister(r):A(r,!1)}},[r,s,u,a]),Ft.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),Ft.useMemo(()=>({field:C,formState:f,fieldState:w}),[C,f,w])}const dd=e=>e.render(qF(e));var HF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},xd=e=>Array.isArray(e)?e:[e],hS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function nA(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&Un(s)&&a){const l=nA(s,a);Un(l)&&(r[n]=l)}else e[n]&&(r[n]=a)}return r}var Rs=e=>Un(e)&&!Object.keys(e).length,Gx=e=>e.type==="file",ei=e=>typeof e=="function",Hh=e=>{if(!Wx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},sA=e=>e.type==="select-multiple",Yx=e=>e.type==="radio",KF=e=>Yx(e)||Vd(e),by=e=>Hh(e)&&e.isConnected;function GF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=vn(e)?n++:e[t[n++]];return e}function YF(e){for(const t in e)if(e.hasOwnProperty(t)&&!vn(e[t]))return!1;return!0}function Mn(e,t){const r=Array.isArray(t)?t:Jm(t)?[t]:qx(t),n=r.length===1?e:GF(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(Un(n)&&Rs(n)||Array.isArray(n)&&YF(n))&&Mn(e,r.slice(0,-1)),e}var JF=e=>{for(const t in e)if(ei(e[t]))return!0;return!1};function aA(e){return Array.isArray(e)||Un(e)&&!JF(e)}function _v(e,t={}){for(const r in e)aA(e[r])?(t[r]=Array.isArray(e[r])?[]:{},_v(e[r],t[r])):vn(e[r])||(t[r]=!0);return t}function zc(e,t,r){r||(r=_v(t));for(const n in e)aA(e[n])?vn(t)||Sv(r[n])?r[n]=_v(e[n],Array.isArray(e[n])?[]:{}):zc(e[n],Js(t)?{}:t[n],r[n]):r[n]=!Za(e[n],t[n]);return r}const mS={value:!1,isValid:!1},pS={value:!0,isValid:!0};var iA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!vn(e[0].attributes.value)?vn(e[0].value)||e[0].value===""?pS:{value:e[0].value,isValid:!0}:pS:mS}return mS},oA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>vn(e)?e:t?e===""?NaN:e&&+e:r&&ua(e)?new Date(e):n?n(e):e;const gS={isValid:!1,value:null};var lA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,gS):gS;function yS(e){const t=e.ref;return Gx(t)?t.files:Yx(t)?lA(e.refs).value:sA(t)?[...t.selectedOptions].map(({value:r})=>r):Vd(t)?iA(e.refs).value:oA(vn(t.value)?e.ref.value:t.value,e)}var XF=(e,t,r,n)=>{const s={};for(const a of e){const l=ct(t,a);l&&Gr(s,a,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Kh=e=>e instanceof RegExp,ed=e=>vn(e)?e:Kh(e)?e.source:Un(e)?Kh(e.value)?e.value.source:e.value:e,vS=e=>({isOnSubmit:!e||e===Qa.onSubmit,isOnBlur:e===Qa.onBlur,isOnChange:e===Qa.onChange,isOnAll:e===Qa.all,isOnTouch:e===Qa.onTouched});const xS="AsyncFunction";var QF=e=>!!e&&!!e.validate&&!!(ei(e.validate)&&e.validate.constructor.name===xS||Un(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xS)),ZF=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),wS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const wd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=ct(e,s);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(wd(u,t))break}else if(Un(u)&&wd(u,t))break}}};function bS(e,t,r){const n=ct(e,r);if(n||Jm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),l=ct(t,a),u=ct(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};s.pop()}return{name:r}}var eL=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return Rs(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||Qa.all))},tL=(e,t,r)=>!e||!t||e===t||xd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),rL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,nL=(e,t)=>!Vx(ct(e,t)).length&&Mn(e,t),sL=(e,t,r)=>{const n=xd(ct(e,r));return Gr(n,"root",t[r]),Gr(e,r,n),e};function jS(e,t,r="validate"){if(ua(e)||Array.isArray(e)&&e.every(ua)||la(e)&&!e)return{type:r,message:ua(e)?e:"",ref:t}}var Ic=e=>Un(e)&&!Kh(e)?e:{value:e,message:""},kS=async(e,t,r,n,s,a)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:v,pattern:x,validate:w,name:j,valueAsNumber:b,mount:_}=e._f,C=ct(r,j);if(!_||t.has(j))return{};const N=u?u[0]:l,T=Y=>{s&&N.reportValidity&&(N.setCustomValidity(la(Y)?"":Y||""),N.reportValidity())},A={},P=Yx(l),M=Vd(l),F=P||M,Q=(b||Gx(l))&&vn(l.value)&&vn(C)||Hh(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,q=HF.bind(null,j,n,A),ae=(Y,oe,V,K=Wi.maxLength,ge=Wi.minLength)=>{const $=Y?oe:V;A[j]={type:Y?K:ge,message:$,ref:l,...q(Y?K:ge,$)}};if(a?!Array.isArray(C)||!C.length:d&&(!F&&(Q||Js(C))||la(C)&&!C||M&&!iA(u).isValid||P&&!lA(u).isValid)){const{value:Y,message:oe}=ua(d)?{value:!!d,message:d}:Ic(d);if(Y&&(A[j]={type:Wi.required,message:oe,ref:N,...q(Wi.required,oe)},!n))return T(oe),A}if(!Q&&(!Js(p)||!Js(v))){let Y,oe;const V=Ic(v),K=Ic(p);if(!Js(C)&&!isNaN(C)){const ge=l.valueAsNumber||C&&+C;Js(V.value)||(Y=ge>V.value),Js(K.value)||(oe=ge<K.value)}else{const ge=l.valueAsDate||new Date(C),$=le=>new Date(new Date().toDateString()+" "+le),G=l.type=="time",ce=l.type=="week";ua(V.value)&&C&&(Y=G?$(C)>$(V.value):ce?C>V.value:ge>new Date(V.value)),ua(K.value)&&C&&(oe=G?$(C)<$(K.value):ce?C<K.value:ge<new Date(K.value))}if((Y||oe)&&(ae(!!Y,V.message,K.message,Wi.max,Wi.min),!n))return T(A[j].message),A}if((m||f)&&!Q&&(ua(C)||a&&Array.isArray(C))){const Y=Ic(m),oe=Ic(f),V=!Js(Y.value)&&C.length>+Y.value,K=!Js(oe.value)&&C.length<+oe.value;if((V||K)&&(ae(V,Y.message,oe.message),!n))return T(A[j].message),A}if(x&&!Q&&ua(C)){const{value:Y,message:oe}=Ic(x);if(Kh(Y)&&!C.match(Y)&&(A[j]={type:Wi.pattern,message:oe,ref:l,...q(Wi.pattern,oe)},!n))return T(oe),A}if(w){if(ei(w)){const Y=await w(C,r),oe=jS(Y,N);if(oe&&(A[j]={...oe,...q(Wi.validate,oe.message)},!n))return T(oe.message),A}else if(Un(w)){let Y={};for(const oe in w){if(!Rs(Y)&&!n)break;const V=jS(await w[oe](C,r),N,oe);V&&(Y={...V,...q(oe,V.message)},T(V.message),n&&(A[j]=Y))}if(!Rs(Y)&&(A[j]={ref:N,...Y},!n))return A}}return T(!0),A};const aL={mode:Qa.onSubmit,reValidateMode:Qa.onChange,shouldFocusError:!0};function iL(e={}){let t={...aL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ei(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Un(t.defaultValues)||Un(t.values)?Kn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Kn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const v={array:hS(),state:hS()},x=t.criteriaMode===Qa.all,w=R=>L=>{clearTimeout(m),m=setTimeout(R,L)},j=async R=>{if(!t.disabled&&(f.isValid||p.isValid||R)){const L=t.resolver?Rs((await M()).errors):await Q(n,!0);L!==r.isValid&&v.state.next({isValid:L})}},b=(R,L)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((R||Array.from(u.mount)).forEach(H=>{H&&(L?Gr(r.validatingFields,H,L):Mn(r.validatingFields,H))}),v.state.next({validatingFields:r.validatingFields,isValidating:!Rs(r.validatingFields)}))},_=(R,L=[],H,ke,Ee=!0,Te=!0)=>{if(ke&&H&&!t.disabled){if(l.action=!0,Te&&Array.isArray(ct(n,R))){const Fe=H(ct(n,R),ke.argA,ke.argB);Ee&&Gr(n,R,Fe)}if(Te&&Array.isArray(ct(r.errors,R))){const Fe=H(ct(r.errors,R),ke.argA,ke.argB);Ee&&Gr(r.errors,R,Fe),nL(r.errors,R)}if((f.touchedFields||p.touchedFields)&&Te&&Array.isArray(ct(r.touchedFields,R))){const Fe=H(ct(r.touchedFields,R),ke.argA,ke.argB);Ee&&Gr(r.touchedFields,R,Fe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=zc(s,a)),v.state.next({name:R,isDirty:ae(R,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Gr(a,R,L)},C=(R,L)=>{Gr(r.errors,R,L),v.state.next({errors:r.errors})},N=R=>{r.errors=R,v.state.next({errors:r.errors,isValid:!1})},T=(R,L,H,ke)=>{const Ee=ct(n,R);if(Ee){const Te=ct(a,R,vn(H)?ct(s,R):H);vn(Te)||ke&&ke.defaultChecked||L?Gr(a,R,L?Te:yS(Ee._f)):V(R,Te),l.mount&&j()}},A=(R,L,H,ke,Ee)=>{let Te=!1,Fe=!1;const wt={name:R};if(!t.disabled){if(!H||ke){(f.isDirty||p.isDirty)&&(Fe=r.isDirty,r.isDirty=wt.isDirty=ae(),Te=Fe!==wt.isDirty);const Me=Za(ct(s,R),L);Fe=!!ct(r.dirtyFields,R),Me?Mn(r.dirtyFields,R):Gr(r.dirtyFields,R,!0),wt.dirtyFields=r.dirtyFields,Te=Te||(f.dirtyFields||p.dirtyFields)&&Fe!==!Me}if(H){const Me=ct(r.touchedFields,R);Me||(Gr(r.touchedFields,R,H),wt.touchedFields=r.touchedFields,Te=Te||(f.touchedFields||p.touchedFields)&&Me!==H)}Te&&Ee&&v.state.next(wt)}return Te?wt:{}},P=(R,L,H,ke)=>{const Ee=ct(r.errors,R),Te=(f.isValid||p.isValid)&&la(L)&&r.isValid!==L;if(t.delayError&&H?(d=w(()=>C(R,H)),d(t.delayError)):(clearTimeout(m),d=null,H?Gr(r.errors,R,H):Mn(r.errors,R)),(H?!Za(Ee,H):Ee)||!Rs(ke)||Te){const Fe={...ke,...Te&&la(L)?{isValid:L}:{},errors:r.errors,name:R};r={...r,...Fe},v.state.next(Fe)}},M=async R=>{b(R,!0);const L=await t.resolver(a,t.context,XF(R||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(R),L},F=async R=>{const{errors:L}=await M(R);if(R)for(const H of R){const ke=ct(L,H);ke?Gr(r.errors,H,ke):Mn(r.errors,H)}else r.errors=L;return L},Q=async(R,L,H={valid:!0})=>{for(const ke in R){const Ee=R[ke];if(Ee){const{_f:Te,...Fe}=Ee;if(Te){const wt=u.array.has(Te.name),Me=Ee._f&&QF(Ee._f);Me&&f.validatingFields&&b([Te.name],!0);const ze=await kS(Ee,u.disabled,a,x,t.shouldUseNativeValidation&&!L,wt);if(Me&&f.validatingFields&&b([Te.name]),ze[Te.name]&&(H.valid=!1,L))break;!L&&(ct(ze,Te.name)?wt?sL(r.errors,ze,Te.name):Gr(r.errors,Te.name,ze[Te.name]):Mn(r.errors,Te.name))}!Rs(Fe)&&await Q(Fe,L,H)}}return H.valid},q=()=>{for(const R of u.unMount){const L=ct(n,R);L&&(L._f.refs?L._f.refs.every(H=>!by(H)):!by(L._f.ref))&&Ie(R)}u.unMount=new Set},ae=(R,L)=>!t.disabled&&(R&&L&&Gr(a,R,L),!Za(le(),s)),Y=(R,L,H)=>kv(R,u,{...l.mount?a:vn(L)?s:ua(R)?{[R]:L}:L},H,L),oe=R=>Vx(ct(l.mount?a:s,R,t.shouldUnregister?ct(s,R,[]):[])),V=(R,L,H={})=>{const ke=ct(n,R);let Ee=L;if(ke){const Te=ke._f;Te&&(!Te.disabled&&Gr(a,R,oA(L,Te)),Ee=Hh(Te.ref)&&Js(L)?"":L,sA(Te.ref)?[...Te.ref.options].forEach(Fe=>Fe.selected=Ee.includes(Fe.value)):Te.refs?Vd(Te.ref)?Te.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(Ee)?Fe.checked=!!Ee.find(wt=>wt===Fe.value):Fe.checked=Ee===Fe.value||!!Ee)}):Te.refs.forEach(Fe=>Fe.checked=Fe.value===Ee):Gx(Te.ref)?Te.ref.value="":(Te.ref.value=Ee,Te.ref.type||v.state.next({name:R,values:Kn(a)})))}(H.shouldDirty||H.shouldTouch)&&A(R,Ee,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&ce(R)},K=(R,L,H)=>{for(const ke in L){if(!L.hasOwnProperty(ke))return;const Ee=L[ke],Te=R+"."+ke,Fe=ct(n,Te);(u.array.has(R)||Un(Ee)||Fe&&!Fe._f)&&!Pl(Ee)?K(Te,Ee,H):V(Te,Ee,H)}},ge=(R,L,H={})=>{const ke=ct(n,R),Ee=u.array.has(R),Te=Kn(L);Gr(a,R,Te),Ee?(v.array.next({name:R,values:Kn(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&H.shouldDirty&&v.state.next({name:R,dirtyFields:zc(s,a),isDirty:ae(R,Te)})):ke&&!ke._f&&!Js(Te)?K(R,Te,H):V(R,Te,H),wS(R,u)&&v.state.next({...r,name:R}),v.state.next({name:l.mount?R:void 0,values:Kn(a)})},$=async R=>{l.mount=!0;const L=R.target;let H=L.name,ke=!0;const Ee=ct(n,H),Te=Me=>{ke=Number.isNaN(Me)||Pl(Me)&&isNaN(Me.getTime())||Za(Me,ct(a,H,Me))},Fe=vS(t.mode),wt=vS(t.reValidateMode);if(Ee){let Me,ze;const bt=L.type?yS(Ee._f):ZE(R),Et=R.type===qh.BLUR||R.type===qh.FOCUS_OUT,ar=!ZF(Ee._f)&&!t.resolver&&!ct(r.errors,H)&&!Ee._f.deps||rL(Et,ct(r.touchedFields,H),r.isSubmitted,wt,Fe),$t=wS(H,u,Et);Gr(a,H,bt),Et?(!L||!L.readOnly)&&(Ee._f.onBlur&&Ee._f.onBlur(R),d&&d(0)):Ee._f.onChange&&Ee._f.onChange(R);const We=A(H,bt,Et),Ye=!Rs(We)||$t;if(!Et&&v.state.next({name:H,type:R.type,values:Kn(a)}),ar)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Et&&j():Et||j()),Ye&&v.state.next({name:H,...$t?{}:We});if(!Et&&$t&&v.state.next({...r}),t.resolver){const{errors:at}=await M([H]);if(Te(bt),ke){const jt=bS(r.errors,n,H),gt=bS(at,n,jt.name||H);Me=gt.error,H=gt.name,ze=Rs(at)}}else b([H],!0),Me=(await kS(Ee,u.disabled,a,x,t.shouldUseNativeValidation))[H],b([H]),Te(bt),ke&&(Me?ze=!1:(f.isValid||p.isValid)&&(ze=await Q(n,!0)));ke&&(Ee._f.deps&&(!Array.isArray(Ee._f.deps)||Ee._f.deps.length>0)&&ce(Ee._f.deps),P(H,ze,Me,We))}},G=(R,L)=>{if(ct(r.errors,L)&&R.focus)return R.focus(),1},ce=async(R,L={})=>{let H,ke;const Ee=xd(R);if(t.resolver){const Te=await F(vn(R)?R:Ee);H=Rs(Te),ke=R?!Ee.some(Fe=>ct(Te,Fe)):H}else R?(ke=(await Promise.all(Ee.map(async Te=>{const Fe=ct(n,Te);return await Q(Fe&&Fe._f?{[Te]:Fe}:Fe)}))).every(Boolean),!(!ke&&!r.isValid)&&j()):ke=H=await Q(n);return v.state.next({...!ua(R)||(f.isValid||p.isValid)&&H!==r.isValid?{}:{name:R},...t.resolver||!R?{isValid:H}:{},errors:r.errors}),L.shouldFocus&&!ke&&wd(n,G,R?Ee:u.mount),ke},le=(R,L)=>{let H={...l.mount?a:s};return L&&(H=nA(L.dirtyFields?r.dirtyFields:r.touchedFields,H)),vn(R)?H:ua(R)?ct(H,R):R.map(ke=>ct(H,ke))},U=(R,L)=>({invalid:!!ct((L||r).errors,R),isDirty:!!ct((L||r).dirtyFields,R),error:ct((L||r).errors,R),isValidating:!!ct(r.validatingFields,R),isTouched:!!ct((L||r).touchedFields,R)}),ee=R=>{R&&xd(R).forEach(L=>Mn(r.errors,L)),v.state.next({errors:R?r.errors:{}})},ue=(R,L,H)=>{const ke=(ct(n,R,{_f:{}})._f||{}).ref,Ee=ct(r.errors,R)||{},{ref:Te,message:Fe,type:wt,...Me}=Ee;Gr(r.errors,R,{...Me,...L,ref:ke}),v.state.next({name:R,errors:r.errors,isValid:!1}),H&&H.shouldFocus&&ke&&ke.focus&&ke.focus()},$e=(R,L)=>ei(R)?v.state.subscribe({next:H=>"values"in H&&R(Y(void 0,L),H)}):Y(R,L,!0),Oe=R=>v.state.subscribe({next:L=>{tL(R.name,L.name,R.exact)&&eL(L,R.formState||f,De,R.reRenderRoot)&&R.callback({values:{...a},...r,...L,defaultValues:s})}}).unsubscribe,_e=R=>(l.mount=!0,p={...p,...R.formState},Oe({...R,formState:p})),Ie=(R,L={})=>{for(const H of R?xd(R):u.mount)u.mount.delete(H),u.array.delete(H),L.keepValue||(Mn(n,H),Mn(a,H)),!L.keepError&&Mn(r.errors,H),!L.keepDirty&&Mn(r.dirtyFields,H),!L.keepTouched&&Mn(r.touchedFields,H),!L.keepIsValidating&&Mn(r.validatingFields,H),!t.shouldUnregister&&!L.keepDefaultValue&&Mn(s,H);v.state.next({values:Kn(a)}),v.state.next({...r,...L.keepDirty?{isDirty:ae()}:{}}),!L.keepIsValid&&j()},Ke=({disabled:R,name:L})=>{(la(R)&&l.mount||R||u.disabled.has(L))&&(R?u.disabled.add(L):u.disabled.delete(L))},B=(R,L={})=>{let H=ct(n,R);const ke=la(L.disabled)||la(t.disabled);return Gr(n,R,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:R}},name:R,mount:!0,...L}}),u.mount.add(R),H?Ke({disabled:la(L.disabled)?L.disabled:t.disabled,name:R}):T(R,!0,L.value),{...ke?{disabled:L.disabled||t.disabled}:{},...t.progressive?{required:!!L.required,min:ed(L.min),max:ed(L.max),minLength:ed(L.minLength),maxLength:ed(L.maxLength),pattern:ed(L.pattern)}:{},name:R,onChange:$,onBlur:$,ref:Ee=>{if(Ee){B(R,L),H=ct(n,R);const Te=vn(Ee.value)&&Ee.querySelectorAll&&Ee.querySelectorAll("input,select,textarea")[0]||Ee,Fe=KF(Te),wt=H._f.refs||[];if(Fe?wt.find(Me=>Me===Te):Te===H._f.ref)return;Gr(n,R,{_f:{...H._f,...Fe?{refs:[...wt.filter(by),Te,...Array.isArray(ct(s,R))?[{}]:[]],ref:{type:Te.type,name:R}}:{ref:Te}}}),T(R,!1,void 0,Te)}else H=ct(n,R,{}),H._f&&(H._f.mount=!1),(t.shouldUnregister||L.shouldUnregister)&&!(eA(u.array,R)&&l.action)&&u.unMount.add(R)}}},ve=()=>t.shouldFocusError&&wd(n,G,u.mount),ie=R=>{la(R)&&(v.state.next({disabled:R}),wd(n,(L,H)=>{const ke=ct(n,H);ke&&(L.disabled=ke._f.disabled||R,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(Ee=>{Ee.disabled=ke._f.disabled||R}))},0,!1))},ne=(R,L)=>async H=>{let ke;H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist());let Ee=Kn(a);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:Te,values:Fe}=await M();r.errors=Te,Ee=Kn(Fe)}else await Q(n);if(u.disabled.size)for(const Te of u.disabled)Mn(Ee,Te);if(Mn(r.errors,"root"),Rs(r.errors)){v.state.next({errors:{}});try{await R(Ee,H)}catch(Te){ke=Te}}else L&&await L({...r.errors},H),ve(),setTimeout(ve);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rs(r.errors)&&!ke,submitCount:r.submitCount+1,errors:r.errors}),ke)throw ke},pt=(R,L={})=>{ct(n,R)&&(vn(L.defaultValue)?ge(R,Kn(ct(s,R))):(ge(R,L.defaultValue),Gr(s,R,Kn(L.defaultValue))),L.keepTouched||Mn(r.touchedFields,R),L.keepDirty||(Mn(r.dirtyFields,R),r.isDirty=L.defaultValue?ae(R,Kn(ct(s,R))):ae()),L.keepError||(Mn(r.errors,R),f.isValid&&j()),v.state.next({...r}))},et=(R,L={})=>{const H=R?Kn(R):s,ke=Kn(H),Ee=Rs(R),Te=Ee?s:ke;if(L.keepDefaultValues||(s=H),!L.keepValues){if(L.keepDirtyValues){const Fe=new Set([...u.mount,...Object.keys(zc(s,a))]);for(const wt of Array.from(Fe))ct(r.dirtyFields,wt)?Gr(Te,wt,ct(a,wt)):ge(wt,ct(Te,wt))}else{if(Wx&&vn(R))for(const Fe of u.mount){const wt=ct(n,Fe);if(wt&&wt._f){const Me=Array.isArray(wt._f.refs)?wt._f.refs[0]:wt._f.ref;if(Hh(Me)){const ze=Me.closest("form");if(ze){ze.reset();break}}}}if(L.keepFieldsRef)for(const Fe of u.mount)ge(Fe,ct(Te,Fe));else n={}}a=t.shouldUnregister?L.keepDefaultValues?Kn(s):{}:Kn(Te),v.array.next({values:{...Te}}),v.state.next({values:{...Te}})}u={mount:L.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!t.shouldUnregister&&!Rs(Te),l.watch=!!t.shouldUnregister,v.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:Ee?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!Za(R,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ee?{}:L.keepDirtyValues?L.keepDefaultValues&&a?zc(s,a):r.dirtyFields:L.keepDefaultValues&&R?zc(s,R):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Be=(R,L)=>et(ei(R)?R(a):R,L),ft=(R,L={})=>{const H=ct(n,R),ke=H&&H._f;if(ke){const Ee=ke.refs?ke.refs[0]:ke.ref;Ee.focus&&(Ee.focus(),L.shouldSelect&&ei(Ee.select)&&Ee.select())}},De=R=>{r={...r,...R}},rr={control:{register:B,unregister:Ie,getFieldState:U,handleSubmit:ne,setError:ue,_subscribe:Oe,_runSchema:M,_focusError:ve,_getWatch:Y,_getDirty:ae,_setValid:j,_setFieldArray:_,_setDisabledField:Ke,_setErrors:N,_getFieldArray:oe,_reset:et,_resetDefaultValues:()=>ei(t.defaultValues)&&t.defaultValues().then(R=>{Be(R,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:ie,_subjects:v,_proxyFormState:f,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(R){l=R},get _defaultValues(){return s},get _names(){return u},set _names(R){u=R},get _formState(){return r},get _options(){return t},set _options(R){t={...t,...R}}},subscribe:_e,trigger:ce,register:B,handleSubmit:ne,watch:$e,setValue:ge,getValues:le,reset:Be,resetField:pt,clearErrors:ee,unregister:Ie,setError:ue,setFocus:ft,getFieldState:U};return{...rr,formControl:rr}}function Cd(e={}){const t=Ft.useRef(void 0),r=Ft.useRef(void 0),[n,s]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:ei(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ei(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!ei(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=iL(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,Kx(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),Ft.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ft.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ft.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ft.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ft.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),Ft.useEffect(()=>{e.values&&!Za(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),Ft.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=rA(n,a),t.current}function cA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=cA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function tn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=cA(e))&&(n&&(n+=" "),n+=t);return n}var oL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Jx(e){if(typeof e!="string")return!1;var t=oL;return t.includes(e)}var lL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function uA(e){if(typeof e!="string")return!1;var t=lL;return t.includes(e)}function dA(e){return typeof e=="string"&&e.startsWith("data-")}function Qo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return uA(n)||dA(n)});return Object.fromEntries(t)}function Xx(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Qo(t)}return typeof e=="object"&&!Array.isArray(e)?Qo(e):null}function Ma(e){var t=Object.entries(e).filter(r=>{var[n]=r;return uA(n)||dA(n)||Jx(n)});return Object.fromEntries(t)}var cL=["children","width","height","viewBox","className","style","title","desc"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function uL(e,t){if(e==null)return{};var r,n,s=dL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fA=y.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:l,style:u,title:d,desc:m}=e,f=uL(e,cL),p=a||{width:n,height:s,x:0,y:0},v=tn("recharts-surface",l);return y.createElement("svg",Nv({},Ma(f),{className:v,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,d),y.createElement("desc",null,m),r)}),fL=["children","className"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(null,arguments)}function hL(e,t){if(e==null)return{};var r,n,s=mL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ro=y.forwardRef((e,t)=>{var{children:r,className:n}=e,s=hL(e,fL),a=tn("recharts-layer",n);return y.createElement("g",Cv({className:a},Ma(s),{ref:t}),r)}),pL=y.createContext(null);function Yr(e){return function(){return e}}const hA=Math.cos,Gh=Math.sin,li=Math.sqrt,Yh=Math.PI,Xm=2*Yh,Ev=Math.PI,Av=2*Ev,Sl=1e-6,gL=Av-Sl;function mA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function yL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mA;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class vL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mA:yL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+l}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,v=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>Sl)if(!(Math.abs(p*d-m*f)>Sl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,w=s-u,j=d*d+m*m,b=x*x+w*w,_=Math.sqrt(j),C=Math.sqrt(v),N=a*Math.tan((Ev-Math.acos((j+v-b)/(2*_*C)))/2),T=N/C,A=N/_;Math.abs(T-1)>Sl&&this._append`L${t+T*f},${r+T*p}`,this._append`A${a},${a},0,0,${+(p*x>f*w)},${this._x1=t+A*d},${this._y1=r+A*m}`}}arc(t,r,n,s,a,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,v=l?s-a:a-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>Sl||Math.abs(this._y1-f)>Sl)&&this._append`L${m},${f}`,n&&(v<0&&(v=v%Av+Av),v>gL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:v>Sl&&this._append`A${n},${n},0,${+(v>=Ev)},${p},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Qx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new vL(t)}function Zx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pA(e){this._context=e}pA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qm(e){return new pA(e)}function gA(e){return e[0]}function yA(e){return e[1]}function vA(e,t){var r=Yr(!0),n=null,s=Qm,a=null,l=Qx(u);e=typeof e=="function"?e:e===void 0?gA:Yr(e),t=typeof t=="function"?t:t===void 0?yA:Yr(t);function u(d){var m,f=(d=Zx(d)).length,p,v=!1,x;for(n==null&&(a=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+e(p,m,d),+t(p,m,d));if(x)return a=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Yr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Yr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Yr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(a=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=a=null:a=s(n=d),u):n},u}function lh(e,t,r){var n=null,s=Yr(!0),a=null,l=Qm,u=null,d=Qx(m);e=typeof e=="function"?e:e===void 0?gA:Yr(+e),t=typeof t=="function"?t:Yr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?yA:Yr(+r);function m(p){var v,x,w,j=(p=Zx(p)).length,b,_=!1,C,N=new Array(j),T=new Array(j);for(a==null&&(u=l(C=d())),v=0;v<=j;++v){if(!(v<j&&s(b=p[v],v,p))===_)if(_=!_)x=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=v-1;w>=x;--w)u.point(N[w],T[w]);u.lineEnd(),u.areaEnd()}_&&(N[v]=+e(b,v,p),T[v]=+t(b,v,p),u.point(n?+n(b,v,p):N[v],r?+r(b,v,p):T[v]))}if(C)return u=null,C+""||null}function f(){return vA().defined(s).curve(l).context(a)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:Yr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Yr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Yr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:Yr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Yr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Yr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Yr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,a!=null&&(u=l(a)),m):l},m.context=function(p){return arguments.length?(p==null?a=u=null:u=l(a=p),m):a},m}class xA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function xL(e){return new xA(e,!0)}function wL(e){return new xA(e,!1)}const ew={draw(e,t){const r=li(t/Yh);e.moveTo(r,0),e.arc(0,0,r,0,Xm)}},bL={draw(e,t){const r=li(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},wA=li(1/3),jL=wA*2,kL={draw(e,t){const r=li(t/jL),n=r*wA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},SL={draw(e,t){const r=li(t),n=-r/2;e.rect(n,n,r,r)}},_L=.8908130915292852,bA=Gh(Yh/10)/Gh(7*Yh/10),NL=Gh(Xm/10)*bA,CL=-hA(Xm/10)*bA,EL={draw(e,t){const r=li(t*_L),n=NL*r,s=CL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const l=Xm*a/5,u=hA(l),d=Gh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},jy=li(3),AL={draw(e,t){const r=-li(t/(jy*3));e.moveTo(0,r*2),e.lineTo(-jy*r,-r),e.lineTo(jy*r,-r),e.closePath()}},Pa=-.5,Oa=li(3)/2,Pv=1/li(12),PL=(Pv/2+1)*3,OL={draw(e,t){const r=li(t/PL),n=r/2,s=r*Pv,a=n,l=r*Pv+r,u=-a,d=l;e.moveTo(n,s),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(Pa*n-Oa*s,Oa*n+Pa*s),e.lineTo(Pa*a-Oa*l,Oa*a+Pa*l),e.lineTo(Pa*u-Oa*d,Oa*u+Pa*d),e.lineTo(Pa*n+Oa*s,Pa*s-Oa*n),e.lineTo(Pa*a+Oa*l,Pa*l-Oa*a),e.lineTo(Pa*u+Oa*d,Pa*d-Oa*u),e.closePath()}};function TL(e,t){let r=null,n=Qx(s);e=typeof e=="function"?e:Yr(e||ew),t=typeof t=="function"?t:Yr(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Yr(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Yr(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Jh(){}function Xh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function jA(e){this._context=e}jA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IL(e){return new jA(e)}function kA(e){this._context=e}kA.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DL(e){return new kA(e)}function SA(e){this._context=e}SA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $L(e){return new SA(e)}function _A(e){this._context=e}_A.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RL(e){return new _A(e)}function SS(e){return e<0?-1:1}function _S(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(a*s+l*n)/(n+s);return(SS(a)+SS(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function NS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ky(e,t,r){var n=e._x0,s=e._y0,a=e._x1,l=e._y1,u=(a-n)/3;e._context.bezierCurveTo(n+u,s+u*t,a-u,l-u*r,a,l)}function Qh(e){this._context=e}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ky(this,this._t0,NS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ky(this,NS(this,r=_S(this,e,t)),r);break;default:ky(this,this._t0,r=_S(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function NA(e){this._context=new CA(e)}(NA.prototype=Object.create(Qh.prototype)).point=function(e,t){Qh.prototype.point.call(this,t,e)};function CA(e){this._context=e}CA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function ML(e){return new Qh(e)}function FL(e){return new NA(e)}function EA(e){this._context=e}EA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=CS(e),s=CS(t),a=0,l=1;l<r;++a,++l)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CS(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),l=new Array(r);for(s[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function LL(e){return new EA(e)}function Zm(e,t){this._context=e,this._t=t}Zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function zL(e){return new Zm(e,.5)}function UL(e){return new Zm(e,0)}function BL(e){return new Zm(e,1)}function Xc(e,t){if((l=e.length)>1)for(var r=1,n,s,a=e[t[0]],l,u=a.length;r<l;++r)for(s=a,a=e[t[r]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Ov(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function WL(e,t){return e[t]}function VL(e){const t=[];return t.key=e,t}function qL(){var e=Yr([]),t=Ov,r=Xc,n=WL;function s(a){var l=Array.from(e.apply(this,arguments),VL),u,d=l.length,m=-1,f;for(const p of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,a)]).data=p;for(u=0,f=Zx(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Yr(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Yr(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?Ov:typeof a=="function"?a:Yr(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Xc,s):r},s}function HL(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,l;s<a;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Xc(e,t)}}function KL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Xc(e,t)}}function GL(e,t){if(!(!((l=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,l;n<a;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,v=f[n-1][1]||0,x=(p-v)/2,w=0;w<u;++w){var j=e[t[w]],b=j[n][1]||0,_=j[n-1][1]||0;x+=b-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Xc(e,t)}}var Sy={},_y={},ES;function YL(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(_y)),_y}var Ny={},AS;function AA(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Ny)),Ny}var Cy={},PS;function tw(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Cy)),Cy}var Ey={},Ay={},OS;function JL(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Ay)),Ay}var TS;function rw(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JL(),r=tw();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],l=s.length;if(l===0)return a;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,a.push(d),d=""):d+=p:p==="["?(f=!0,d&&(a.push(d),d="")):p==="."?d&&(a.push(d),d=""):d+=p,u++}return d&&a.push(d),a}e.toPath=n})(Ey)),Ey}var IS;function nw(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YL(),r=AA(),n=tw(),s=rw();function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?a(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=a})(Sy)),Sy}var Py,DS;function XL(){return DS||(DS=1,Py=nw().get),Py}var QL=XL();const Qc=ai(QL);var fa=e=>e===0?0:e>0?1:-1,Ci=e=>typeof e=="number"&&e!=+e,no=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,qt=e=>(typeof e=="number"||e instanceof Number)&&!Ci(e),Ei=e=>qt(e)||typeof e=="string",ZL=0,Ed=e=>{var t=++ZL;return"".concat(e||"").concat(t)},si=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(t)&&typeof t!="string")return n;var a;if(no(t)){if(r==null)return n;var l=t.indexOf("%");a=r*parseFloat(t.slice(0,l))/100}else a=+t;return Ci(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},PA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function ws(e,t,r){return qt(e)&&qt(t)?e+r*(t-e):t}function ez(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Qc(n,t))===r)}var is=e=>e===null||typeof e>"u",qd=e=>is(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function tz(e){return e!=null}function mu(){}var rz=["type","size","sizeType"];function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tv.apply(null,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){nz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nz(e,t,r){return(t=sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=az(e,"string");return typeof t=="symbol"?t:t+""}function az(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iz(e,t){if(e==null)return{};var r,n,s=oz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OA={symbolCircle:ew,symbolCross:bL,symbolDiamond:kL,symbolSquare:SL,symbolStar:EL,symbolTriangle:AL,symbolWye:OL},lz=Math.PI/180,cz=e=>{var t="symbol".concat(qd(e));return OA[t]||ew},uz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*lz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},dz=(e,t)=>{OA["symbol".concat(qd(e))]=t},TA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=iz(e,rz),a=RS(RS({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var v=cz(l),x=TL().type(v).size(uz(r,n,l)),w=x();if(w!==null)return w},{className:d,cx:m,cy:f}=a,p=Ma(a);return qt(m)&&qt(f)&&qt(r)?y.createElement("path",Tv({},p,{className:tn("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};TA.registerSymbol=dz;var IA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,fz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Jx(s)&&(n[s]=(a=>r[s](r,a)))}),n},hz=(e,t,r)=>n=>(e(t,r,n),null),sw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];Jx(s)&&typeof a=="function"&&(n||(n={}),n[s]=hz(a,t,r))}),n};function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){pz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pz(e,t,r){return(t=gz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ua(e,t){var r=mz({},e),n=t,s=Object.keys(t),a=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return a}var Oy={},Ty={},FS;function vz(){return FS||(FS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const l=r[a],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Ty)),Ty}var Iy={},LS;function DA(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Iy)),Iy}var Dy={},$y={},Ry={},zS;function xz(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Ry)),Ry}var US;function aw(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})($y)),$y}var My={},BS;function wz(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(My)),My}var WS;function bz(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aw(),r=wz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(Dy)),Dy}var Fy={},Ly={},VS;function jz(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nw();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Ly)),Ly}var zy={},Uy={},By={},Wy={},qS;function $A(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Wy)),Wy}var Vy={},HS;function RA(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Vy)),Vy}var qy={},KS;function MA(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(qy)),qy}var GS;function kz(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A(),r=RA(),n=MA();function s(f,p,v){return typeof v!="function"?s(f,p,()=>{}):a(f,p,function x(w,j,b,_,C,N){const T=v(w,j,b,_,C,N);return T!==void 0?!!T:a(w,j,x,N)},new Map)}function a(f,p,v,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,v,x);case"function":return Object.keys(p).length>0?a(f,{...p},v,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,v,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,v,x);if(p instanceof Map)return u(f,p,v,x);if(p instanceof Set)return m(f,p,v,x);const w=Object.keys(p);if(f==null)return w.length===0;if(w.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let j=0;j<w.length;j++){const b=w[j];if(!r.isPrimitive(f)&&!(b in f)||p[b]===void 0&&f[b]!==void 0||p[b]===null&&f[b]!==null||!v(f[b],p[b],b,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,v,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,j]of p.entries()){const b=f.get(w);if(v(b,j,w,f,p,x)===!1)return!1}return!0}function d(f,p,v,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let j=0;j<p.length;j++){const b=p[j];let _=!1;for(let C=0;C<f.length;C++){if(w.has(C))continue;const N=f[C];let T=!1;if(v(N,b,j,f,p,x)&&(T=!0),T){w.add(C),_=!0;break}}if(!_)return!1}return!0}function m(f,p,v,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],v,x):!1}e.isMatchWith=s,e.isSetMatch=m})(By)),By}var YS;function FA(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Uy)),Uy}var Hy={},Ky={},Gy={},JS;function Sz(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Gy)),Gy}var Yy={},XS;function LA(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Yy)),Yy}var Jy={},QS;function zA(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",v="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",b="[object Uint8Array]",_="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",T="[object BigUint64Array]",A="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",F="[object BigInt64Array]",Q="[object Float32Array]",q="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=v,e.arrayTag=f,e.bigInt64ArrayTag=F,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=Q,e.float64ArrayTag=q,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=M,e.int8ArrayTag=A,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=C,e.uint32ArrayTag=N,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=_})(Jy)),Jy}var Xy={},ZS;function _z(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Xy)),Xy}var e_;function UA(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sz(),r=LA(),n=zA(),s=RA(),a=_z();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,v,x=new Map,w=void 0){const j=w==null?void 0:w(f,p,v,x);if(j!==void 0)return j;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const b=new Array(f.length);x.set(f,b);for(let _=0;_<f.length;_++)b[_]=u(f[_],_,v,x,w);return Object.hasOwn(f,"index")&&(b.index=f.index),Object.hasOwn(f,"input")&&(b.input=f.input),b}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const b=new RegExp(f.source,f.flags);return b.lastIndex=f.lastIndex,b}if(f instanceof Map){const b=new Map;x.set(f,b);for(const[_,C]of f)b.set(_,u(C,_,v,x,w));return b}if(f instanceof Set){const b=new Set;x.set(f,b);for(const _ of f)b.add(u(_,void 0,v,x,w));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const b=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,b);for(let _=0;_<f.length;_++)b[_]=u(f[_],_,v,x,w);return b}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const b=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,b),d(b,f,v,x,w),b}if(typeof File<"u"&&f instanceof File){const b=new File([f],f.name,{type:f.type});return x.set(f,b),d(b,f,v,x,w),b}if(typeof Blob<"u"&&f instanceof Blob){const b=new Blob([f],{type:f.type});return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof Error){const b=new f.constructor;return x.set(f,b),b.message=f.message,b.name=f.name,b.stack=f.stack,b.cause=f.cause,d(b,f,v,x,w),b}if(f instanceof Boolean){const b=new Boolean(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof Number){const b=new Number(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof String){const b=new String(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(typeof f=="object"&&m(f)){const b=Object.create(Object.getPrototypeOf(f));return x.set(f,b),d(b,f,v,x,w),b}return f}function d(f,p,v=f,x,w){const j=[...Object.keys(p),...t.getSymbols(p)];for(let b=0;b<j.length;b++){const _=j[b],C=Object.getOwnPropertyDescriptor(f,_);(C==null||C.writable)&&(f[_]=u(p[_],_,v,x,w))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Ky)),Ky}var t_;function Nz(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Hy)),Hy}var r_;function Cz(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FA(),r=Nz();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(zy)),zy}var Qy={},Zy={},e0={},n_;function Ez(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UA(),r=zA();function n(s,a){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=a==null?void 0:a(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(e0)),e0}var s_;function Az(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ez();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Zy)),Zy}var t0={},r0={},a_;function BA(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(r0)),r0}var n0={},i_;function Pz(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(n0)),n0}var o_;function Oz(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AA(),r=BA(),n=Pz(),s=rw();function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=a})(t0)),t0}var l_;function Tz(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FA(),r=tw(),n=Az(),s=nw(),a=Oz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?a.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Qy)),Qy}var c_;function Iz(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DA(),r=jz(),n=Cz(),s=Tz();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=a})(Fy)),Fy}var u_;function Dz(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vz(),r=DA(),n=bz(),s=Iz();function a(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=a})(Oy)),Oy}var s0,d_;function $z(){return d_||(d_=1,s0=Dz().uniqBy),s0}var Rz=$z();const f_=ai(Rz);function Mz(e,t,r){return t===!0?f_(e,r):typeof t=="function"?f_(e,t):e}var a0={exports:{}},i0={},o0={exports:{}},l0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function Fz(){if(h_)return l0;h_=1;var e=iu();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(p,v){var x=v(),w=n({inst:{value:x,getSnapshot:v}}),j=w[0].inst,b=w[1];return a(function(){j.value=x,j.getSnapshot=v,d(j)&&b({inst:j})},[p,x,v]),s(function(){return d(j)&&b({inst:j}),p(function(){d(j)&&b({inst:j})})},[p]),l(x),x}function d(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!r(p,x)}catch{return!0}}function m(p,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return l0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,l0}var m_;function Lz(){return m_||(m_=1,o0.exports=Fz()),o0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function zz(){if(p_)return i0;p_=1;var e=iu(),t=Lz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return i0.useSyncExternalStoreWithSelector=function(m,f,p,v,x){var w=a(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function _(P){if(!C){if(C=!0,N=P,P=v(P),x!==void 0&&j.hasValue){var M=j.value;if(x(M,P))return T=M}return T=P}if(M=T,n(N,P))return M;var F=v(P);return x!==void 0&&x(M,F)?(N=P,M):(N=P,T=F)}var C=!1,N,T,A=p===void 0?null:p;return[function(){return _(f())},A===null?void 0:function(){return _(A())}]},[f,p,v,x]);var b=s(m,w[0],w[1]);return l(function(){j.hasValue=!0,j.value=b},[b]),d(b),b},i0}var g_;function Uz(){return g_||(g_=1,a0.exports=zz()),a0.exports}var Bz=Uz(),iw=y.createContext(null),Wz=e=>e,En=()=>{var e=y.useContext(iw);return e?e.store.dispatch:Wz},Ah=()=>{},Vz=()=>Ah,qz=(e,t)=>e===t;function zt(e){var t=y.useContext(iw);return Bz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Vz,t?t.store.getState:Ah,t?t.store.getState:Ah,t?e:Ah,qz)}function Hz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Kz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Gz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var y_=e=>Array.isArray(e)?e:[e];function Yz(e){const t=Array.isArray(e[0])?e[0]:e;return Gz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Jz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Xz=class{constructor(e){this.value=e}deref(){return this.value}},Qz=typeof WeakRef<"u"?WeakRef:Xz,Zz=0,v_=1;function ch(){return{s:Zz,v:void 0,o:null,p:null}}function WA(e,t={}){let r=ch();const{resultEqualityCheck:n}=t;let s,a=0;function l(){var p;let u=r;const{length:d}=arguments;for(let v=0,x=d;v<x;v++){const w=arguments[v];if(typeof w=="function"||typeof w=="object"&&w!==null){let j=u.o;j===null&&(u.o=j=new WeakMap);const b=j.get(w);b===void 0?(u=ch(),j.set(w,u)):u=b}else{let j=u.p;j===null&&(u.p=j=new Map);const b=j.get(w);b===void 0?(u=ch(),j.set(w,u)):u=b}}const m=u;let f;if(u.s===v_)f=u.v;else if(f=e.apply(null,arguments),a++,n){const v=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;v!=null&&n(v,f)&&(f=v,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Qz(f):f}return m.s=v_,m.v=f,f}return l.clearCache=()=>{r=ch(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function e8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Hz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:v=[],argsMemoize:x=WA,argsMemoizeOptions:w=[]}=f,j=y_(v),b=y_(w),_=Yz(s),C=p(function(){return a++,m.apply(null,arguments)},...j),N=x(function(){l++;const A=Jz(_,arguments);return u=C.apply(null,A),u},...b);return Object.assign(N,{resultFunc:m,memoizedResultFunc:C,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var be=e8(WA),t8=Object.assign((e,t=be)=>{Kz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>t8}),c0={},u0={},d0={},x_;function r8(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=r})(d0)),d0}var f0={},h0={},w_;function VA(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(h0)),h0}var b_;function n8(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=s})(f0)),f0}var j_;function s8(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r8(),r=n8(),n=rw();function s(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,w)=>{let j=x;for(let b=0;b<w.length&&j!=null;++b)j=j[w[b]];return j},f=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:m(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?m(w,x):typeof w=="object"?w[x]:w,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return a.map(x=>({original:x,criteria:p.map(w=>f(w,x))})).slice().sort((x,w)=>{for(let j=0;j<p.length;j++){const b=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=s})(u0)),u0}var m0={},k_;function a8(){return k_||(k_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<a?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(m0)),m0}var p0={},S_;function qA(){return S_||(S_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BA(),r=aw(),n=$A(),s=MA();function a(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=a})(p0)),p0}var __;function i8(){return __||(__=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s8(),r=a8(),n=qA();function s(a,...l){const u=l.length;return u>1&&n.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,r.flatten(l),["asc"])}e.sortBy=s})(c0)),c0}var g0,N_;function o8(){return N_||(N_=1,g0=i8().sortBy),g0}var l8=o8();const ep=ai(l8);var HA=e=>e.legend.settings,c8=e=>e.legend.size,u8=e=>e.legend.payload;be([u8,HA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?ep(n,r):n});var uh=1;function d8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>uh||Math.abs(l.left-t.left)>uh||Math.abs(l.top-t.top)>uh||Math.abs(l.width-t.width)>uh)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function vs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var f8=typeof Symbol=="function"&&Symbol.observable||"@@observable",C_=f8,y0=()=>Math.random().toString(36).substring(7).split("").join("."),h8={INIT:`@@redux/INIT${y0()}`,REPLACE:`@@redux/REPLACE${y0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${y0()}`},Zh=h8;function ow(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function KA(e,t,r){if(typeof e!="function")throw new Error(vs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(vs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(vs(1));return r(KA)(e,t)}let n=e,s=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((b,_)=>{l.set(_,b)}))}function f(){if(d)throw new Error(vs(3));return s}function p(b){if(typeof b!="function")throw new Error(vs(4));if(d)throw new Error(vs(5));let _=!0;m();const C=u++;return l.set(C,b),function(){if(_){if(d)throw new Error(vs(6));_=!1,m(),l.delete(C),a=null}}}function v(b){if(!ow(b))throw new Error(vs(7));if(typeof b.type>"u")throw new Error(vs(8));if(typeof b.type!="string")throw new Error(vs(17));if(d)throw new Error(vs(9));try{d=!0,s=n(s,b)}finally{d=!1}return(a=l).forEach(C=>{C()}),b}function x(b){if(typeof b!="function")throw new Error(vs(10));n=b,v({type:Zh.REPLACE})}function w(){const b=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(vs(11));function C(){const T=_;T.next&&T.next(f())}return C(),{unsubscribe:b(C)}},[C_](){return this}}}return v({type:Zh.INIT}),{dispatch:v,subscribe:p,getState:f,replaceReducer:x,[C_]:w}}function m8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Zh.INIT})>"u")throw new Error(vs(12));if(typeof r(void 0,{type:Zh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vs(13))})}function GA(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{m8(r)}catch(a){s=a}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],v=r[p],x=l[p],w=v(x,u);if(typeof w>"u")throw u&&u.type,new Error(vs(14));m[p]=w,d=d||w!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function em(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function p8(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(vs(15))};const l={getState:s.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=em(...u)(s.dispatch),{...s,dispatch:a}}}function YA(e){return ow(e)&&"type"in e&&typeof e.type=="string"}var JA=Symbol.for("immer-nothing"),E_=Symbol.for("immer-draftable"),ga=Symbol.for("immer-state");function ti(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function Ul(e){return!!e&&!!e[ga]}function so(e){var t;return e?XA(e)||Array.isArray(e)||!!e[E_]||!!((t=e.constructor)!=null&&t[E_])||Hd(e)||rp(e):!1}var g8=Object.prototype.constructor.toString(),A_=new WeakMap;function XA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=A_.get(r);return n===void 0&&(n=Function.toString.call(r),A_.set(r,n)),n===g8}function tm(e,t,r=!0){tp(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function tp(e){const t=e[ga];return t?t.type_:Array.isArray(e)?1:Hd(e)?2:rp(e)?3:0}function Iv(e,t){return tp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function QA(e,t,r){const n=tp(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function y8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Hd(e){return e instanceof Map}function rp(e){return e instanceof Set}function _l(e){return e.copy_||e.base_}function Dv(e,t){if(Hd(e))return new Map(e);if(rp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=XA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ga];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const l=s[a],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ad(e),n)}else{const n=Ad(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function lw(e,t=!1){return np(e)||Ul(e)||!so(e)||(tp(e)>1&&Object.defineProperties(e,{set:dh,add:dh,clear:dh,delete:dh}),Object.freeze(e),t&&Object.values(e).forEach(r=>lw(r,!0))),e}function v8(){ti(2)}var dh={value:v8};function np(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var x8={};function Bl(e){const t=x8[e];return t||ti(0,e),t}var Pd;function ZA(){return Pd}function w8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function P_(e,t){t&&(Bl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $v(e){Rv(e),e.drafts_.forEach(b8),e.drafts_=null}function Rv(e){e===Pd&&(Pd=e.parent_)}function O_(e){return Pd=w8(Pd,e)}function b8(e){const t=e[ga];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function T_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ga].modified_&&($v(t),ti(4)),so(e)&&(e=rm(t,e),t.parent_||nm(t,e)),t.patches_&&Bl("Patches").generateReplacementPatches_(r[ga].base_,e,t.patches_,t.inversePatches_)):e=rm(t,r,[]),$v(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==JA?e:void 0}function rm(e,t,r){if(np(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ga];if(!s)return tm(t,(a,l)=>I_(e,s,t,a,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return nm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,u=!1;s.type_===3&&(l=new Set(a),a.clear(),u=!0),tm(l,(d,m)=>I_(e,s,a,d,m,r,u),n),nm(e,a,!1),r&&e.patches_&&Bl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function I_(e,t,r,n,s,a,l){if(s==null||typeof s!="object"&&!l)return;const u=np(s);if(!(u&&!l)){if(Ul(s)){const d=a&&t&&t.type_!==3&&!Iv(t.assigned_,n)?a.concat(n):void 0,m=rm(e,s,d);if(QA(r,n,m),Ul(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(so(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;rm(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Hd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&nm(e,s)}}}function nm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lw(t,r)}function j8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ZA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=cw;r&&(s=[n],a=Od);const{revoke:l,proxy:u}=Proxy.revocable(s,a);return n.draft_=u,n.revoke_=l,u}var cw={get(e,t){if(t===ga)return e;const r=_l(e);if(!Iv(r,t))return k8(e,r,t);const n=r[t];return e.finalized_||!so(n)?n:n===v0(e.base_,t)?(x0(e),e.copy_[t]=Fv(n,e)):n},has(e,t){return t in _l(e)},ownKeys(e){return Reflect.ownKeys(_l(e))},set(e,t,r){const n=eP(_l(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=v0(_l(e),t),a=s==null?void 0:s[ga];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(y8(r,s)&&(r!==void 0||Iv(e.base_,t)))return!0;x0(e),Mv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return v0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,x0(e),Mv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=_l(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ti(11)},getPrototypeOf(e){return Ad(e.base_)},setPrototypeOf(){ti(12)}},Od={};tm(cw,(e,t)=>{Od[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Od.deleteProperty=function(e,t){return Od.set.call(this,e,t,void 0)};Od.set=function(e,t,r){return cw.set.call(this,e[0],t,r,e[0])};function v0(e,t){const r=e[ga];return(r?_l(r):e)[t]}function k8(e,t,r){var s;const n=eP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function eP(e,t){if(!(t in e))return;let r=Ad(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ad(r)}}function Mv(e){e.modified_||(e.modified_=!0,e.parent_&&Mv(e.parent_))}function x0(e){e.copy_||(e.copy_=Dv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var S8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(d=a,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ti(6),n!==void 0&&typeof n!="function"&&ti(7);let s;if(so(t)){const a=O_(this),l=Fv(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?$v(a):Rv(a)}return P_(a,n),T_(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===JA&&(s=void 0),this.autoFreeze_&&lw(s,!0),n){const a=[],l=[];Bl("Patches").generateReplacementPatches_(t,s,a,l),n(a,l)}return s}else ti(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){so(e)||ti(8),Ul(e)&&(e=Ji(e));const t=O_(this),r=Fv(e,void 0);return r[ga].isManual_=!0,Rv(t),r}finishDraft(e,t){const r=e&&e[ga];(!r||!r.isManual_)&&ti(9);const{scope_:n}=r;return P_(n,t),T_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Bl("Patches").applyPatches_;return Ul(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Fv(e,t){const r=Hd(e)?Bl("MapSet").proxyMap_(e,t):rp(e)?Bl("MapSet").proxySet_(e,t):j8(e,t);return(t?t.scope_:ZA()).drafts_.push(r),r}function Ji(e){return Ul(e)||ti(10,e),tP(e)}function tP(e){if(!so(e)||np(e))return e;const t=e[ga];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Dv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Dv(e,!0);return tm(r,(s,a)=>{QA(r,s,tP(a))},n),t&&(t.finalized_=!1),r}var Lv=new S8,rP=Lv.produce,_8=Lv.setUseStrictIteration.bind(Lv);function nP(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var N8=nP(),C8=nP,E8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?em:em.apply(null,arguments)};function Fa(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ma(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>YA(n)&&n.type===e,r}var sP=class fd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,fd.prototype)}static get[Symbol.species](){return fd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new fd(...t[0].concat(this)):new fd(...t.concat(this))}};function D_(e){return so(e)?rP(e,()=>{}):e}function fh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function A8(e){return typeof e=="boolean"}var P8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let l=new sP;return r&&(A8(r)?l.push(N8):l.push(C8(r.extraArgument))),l},aP="RTK_autoBatch",Yn=()=>e=>({payload:e,meta:{[aP]:!0}}),$_=e=>t=>{setTimeout(t,e)},iP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$_(10):e.type==="callback"?e.queueNotification:$_(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),v=n.subscribe(p);return u.add(f),()=>{v(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[aP]),a=!s,a&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},O8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new sP(e);return n&&s.push(iP(typeof n=="object"?n:void 0)),s};function T8(e){const t=P8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(ow(r))u=GA(r);else throw new Error(ma(1));let d;typeof n=="function"?d=n(t):d=t();let m=em;s&&(m=E8({trace:!1,...typeof s=="object"&&s}));const f=p8(...d),p=O8(f);let v=typeof l=="function"?l(p):p();const x=m(...v);return KA(u,a,x)}function oP(e){const t={},r=[];let n;const s={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(ma(28));if(u in t)throw new Error(ma(29));return t[u]=l,s},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:a.settled,reducer:l.settled}),s},addMatcher(a,l){return r.push({matcher:a,reducer:l}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}_8(!1);function I8(e){return typeof e=="function"}function D8(e,t){let[r,n,s]=oP(t),a;if(I8(e))a=()=>D_(e());else{const u=D_(e);a=()=>u}function l(u=a(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Ul(f)){const x=p(f,d);return x===void 0?f:x}else{if(so(f))return rP(f,v=>p(v,d));{const v=p(f,d);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},u)}return l.getInitialState=a,l}var $8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",R8=(e=21)=>{let t="",r=e;for(;r--;)t+=$8[Math.random()*64|0];return t},M8=Symbol.for("rtk-slice-createasyncthunk");function F8(e,t){return`${e}/${t}`}function L8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[M8];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(ma(11));const u=(typeof s.reducers=="function"?s.reducers(U8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,A){const P=typeof T=="string"?T:T.type;if(!P)throw new Error(ma(12));if(P in m.sliceCaseReducersByType)throw new Error(ma(13));return m.sliceCaseReducersByType[P]=A,f},addMatcher(T,A){return m.sliceMatchers.push({matcher:T,reducer:A}),f},exposeAction(T,A){return m.actionCreators[T]=A,f},exposeCaseReducer(T,A){return m.sliceCaseReducersByName[T]=A,f}};d.forEach(T=>{const A=u[T],P={reducerName:T,type:F8(a,T),createNotation:typeof s.reducers=="function"};W8(A)?q8(P,A,f,t):B8(P,A,f)});function p(){const[T={},A=[],P=void 0]=typeof s.extraReducers=="function"?oP(s.extraReducers):[s.extraReducers],M={...T,...m.sliceCaseReducersByType};return D8(s.initialState,F=>{for(let Q in M)F.addCase(Q,M[Q]);for(let Q of m.sliceMatchers)F.addMatcher(Q.matcher,Q.reducer);for(let Q of A)F.addMatcher(Q.matcher,Q.reducer);P&&F.addDefaultCase(P)})}const v=T=>T,x=new Map,w=new WeakMap;let j;function b(T,A){return j||(j=p()),j(T,A)}function _(){return j||(j=p()),j.getInitialState()}function C(T,A=!1){function P(F){let Q=F[T];return typeof Q>"u"&&A&&(Q=fh(w,P,_)),Q}function M(F=v){const Q=fh(x,A,()=>new WeakMap);return fh(Q,F,()=>{const q={};for(const[ae,Y]of Object.entries(s.selectors??{}))q[ae]=z8(Y,F,()=>fh(w,F,_),A);return q})}return{reducerPath:T,getSelectors:M,get selectors(){return M(P)},selectSlice:P}}const N={name:a,reducer:b,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...C(l),injectInto(T,{reducerPath:A,...P}={}){const M=A??l;return T.inject({reducerPath:M,reducer:b},P),{...N,...C(M,!0)}}};return N}}function z8(e,t,r,n){function s(a,...l){let u=t(a);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var ea=L8();function U8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function B8({type:e,reducerName:t,createNotation:r},n,s){let a,l;if("reducer"in n){if(r&&!V8(n))throw new Error(ma(17));a=n.reducer,l=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?Fa(e,l):Fa(e))}function W8(e){return e._reducerDefinitionType==="asyncThunk"}function V8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function q8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ma(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,a,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||hh,pending:u||hh,rejected:d||hh,settled:m||hh})}function hh(){}var H8="task",lP="listener",cP="completed",uw="cancelled",K8=`task-${uw}`,G8=`task-${cP}`,zv=`${lP}-${uw}`,Y8=`${lP}-${cP}`,sp=class{constructor(e){Zg(this,"name","TaskAbortError");Zg(this,"message");this.code=e,this.message=`${H8} ${uw} (reason: ${e})`}},dw=(e,t)=>{if(typeof e!="function")throw new TypeError(ma(32))},sm=()=>{},uP=(e,t=sm)=>(e.catch(t),e),dP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Dl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$l=e=>{if(e.aborted){const{reason:t}=e;throw new sp(t)}};function fP(e,t){let r=sm;return new Promise((n,s)=>{const a=()=>s(new sp(e.reason));if(e.aborted){a();return}r=dP(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=sm})}var J8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof sp?"cancelled":"rejected",error:r}}finally{t==null||t()}},am=e=>t=>uP(fP(e,t).then(r=>($l(e),r))),hP=e=>{const t=am(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Kc}=Object,R_={},ap="listenerMiddleware",X8=(e,t)=>{const r=n=>dP(e,()=>Dl(n,e.reason));return(n,s)=>{dw(n);const a=new AbortController;r(a);const l=J8(async()=>{$l(e),$l(a.signal);const u=await n({pause:am(a.signal),delay:hP(a.signal),signal:a.signal});return $l(a.signal),u},()=>Dl(a,G8));return s!=null&&s.autoJoin&&t.push(l.catch(sm)),{result:am(e)(l),cancel(){Dl(a,K8)}}}},Q8=(e,t)=>{const r=async(n,s)=>{$l(t);let a=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,v)=>{v.unsubscribe(),d([p,v.getState(),v.getOriginalState()])}});a=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await fP(t,Promise.race(u));return $l(t),d}finally{a()}};return(n,s)=>uP(r(n,s))},mP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Fa(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ma(21));return dw(a),{predicate:s,type:t,effect:a}},pP=Kc(e=>{const{type:t,predicate:r,effect:n}=mP(e);return{id:R8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ma(22))}}},{withTypes:()=>pP}),M_=(e,t)=>{const{type:r,effect:n,predicate:s}=mP(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},Uv=e=>{e.pending.forEach(t=>{Dl(t,zv)})},Z8=(e,t)=>()=>{for(const r of t.keys())Uv(r);e.clear()},F_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},gP=Kc(Fa(`${ap}/add`),{withTypes:()=>gP}),eU=Fa(`${ap}/removeAll`),yP=Kc(Fa(`${ap}/remove`),{withTypes:()=>yP}),tU=(...e)=>{console.error(`${ap}/error`,...e)},Kd=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},s=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:a,onError:l=tU}=e;dw(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w!=null&&w.cancelActive&&Uv(x)}),d=x=>{const w=M_(t,x)??pP(x);return u(w)};Kc(d,{withTypes:()=>d});const m=x=>{const w=M_(t,x);return w&&(w.unsubscribe(),x.cancelActive&&Uv(w)),!!w};Kc(m,{withTypes:()=>m});const f=async(x,w,j,b)=>{const _=new AbortController,C=Q8(d,_.signal),N=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(w,Kc({},j,{getOriginalState:b,condition:(T,A)=>C(T,A).then(Boolean),take:C,delay:hP(_.signal),pause:am(_.signal),extra:a,signal:_.signal,fork:X8(_.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((T,A,P)=>{T!==_&&(Dl(T,zv),P.delete(T))})},cancel:()=>{Dl(_,zv),x.pending.delete(_)},throwIfCancelled:()=>{$l(_.signal)}})))}catch(T){T instanceof sp||F_(l,T,{raisedBy:"effect"})}finally{await Promise.all(N),Dl(_,Y8),s(x),x.pending.delete(_)}},p=Z8(t,r);return{middleware:x=>w=>j=>{if(!YA(j))return w(j);if(gP.match(j))return d(j.payload);if(eU.match(j)){p();return}if(yP.match(j))return m(j.payload);let b=x.getState();const _=()=>{if(b===R_)throw new Error(ma(23));return b};let C;try{if(C=w(j),t.size>0){const N=x.getState(),T=Array.from(t.values());for(const A of T){let P=!1;try{P=A.predicate(j,N,b)}catch(M){P=!1,F_(l,M,{raisedBy:"predicate"})}P&&f(A,j,x,_)}}}finally{b=R_}return C},startListening:d,stopListening:m,clearListeners:p}};function ma(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},vP=ea({name:"chartLayout",initialState:rU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:nU,setLayout:sU,setChartSize:aU,setScale:iU}=vP.actions,oU=vP.reducer;function xP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function L_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L_(Object(r),!0).forEach(function(n){lU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lU(e,t,r){return(t=cU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cU(e){var t=uU(e,"string");return typeof t=="symbol"?t:t+""}function uU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ls(e,t,r){return is(e)||is(t)?r:Ei(t)?Qc(e,t,r):typeof t=="function"?t(e):r}var dU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&qt(e[a]))return Bc(Bc({},e),{},{[a]:e[a]+(n||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&qt(e[l]))return Bc(Bc({},e),{},{[l]:e[l]+(s||0)})}return e},Xl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",z_=1e-4,fU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-z_,a=Math.max(n[0],n[1])+z_,l=e(t[0]),u=e(t[r-1]);(l<s||l>a||u<s||u>a)&&e.domain([t[0],t[r-1]])}},hU=(e,t)=>{if(!t||t.length!==2||!qt(t[0])||!qt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!qt(e[0])||e[0]<r)&&(s[0]=r),(!qt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},mU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,l=0;l<t;++l){var u=Ci(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1])}},pU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var l=Ci(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},gU={sign:mU,expand:HL,none:Xc,silhouette:KL,wiggle:GL,positive:pU},yU=(e,t,r)=>{var n=gU[r],s=qL().keys(t).value((a,l)=>Number(Ls(a,l,0))).order(Ov).offset(n);return s(e)};function vU(e){return e==null?void 0:String(e)}var U_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Ls(a,t.dataKey,t.scale.domain()[l]);return is(u)?null:t.scale(u)-s/2+n},xU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},wU=e=>{var t=e.flat(2).filter(qt);return[Math.min(...t),Math.max(...t)]},bU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],jU=(e,t,r)=>{if(e!=null)return bU(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:l}=a,u=l.reduce((d,m)=>{var f=xP(m,t,r),p=wU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},B_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,W_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,im=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=ep(t,f=>f.coordinate),a=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function V_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Bc(Bc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function wP(e,t){if(e)return String(e);if(typeof t=="string")return t}var kU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},SU=(e,t)=>t==="centric"?e.angle:e.radius,uo=e=>e.layout.width,fo=e=>e.layout.height,_U=e=>e.layout.scale,bP=e=>e.layout.margin,ip=be(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),op=be(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),NU="data-recharts-item-index",CU="data-recharts-item-data-key",Gd=60;function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(n){EU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EU(e,t,r){return(t=AU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AU(e){var t=PU(e,"string");return typeof t=="symbol"?t:t+""}function PU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OU=e=>e.brush.height;function TU(e){var t=op(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gd;return r+s}return r},0)}function IU(e){var t=op(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gd;return r+s}return r},0)}function DU(e){var t=ip(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function $U(e){var t=ip(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var os=be([uo,fo,bP,OU,TU,IU,DU,$U,HA,c8],(e,t,r,n,s,a,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+a},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},v=mh(mh({},p),f),x=v.bottom;v.bottom+=n,v=dU(v,d,m);var w=e-v.left-v.right,j=t-v.top-v.bottom;return mh(mh({brushBottom:x},v),{},{width:Math.max(w,0),height:Math.max(j,0)})}),RU=be(os,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),fw=be(uo,fo,(e,t)=>({x:0,y:0,width:e,height:t})),MU=y.createContext(null),ya=()=>y.useContext(MU)!=null,lp=e=>e.brush,cp=be([lp,os,bP],(e,t,r)=>({height:e.height,x:qt(e.x)?e.x:t.left,y:qt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:qt(e.width)?e.width:t.width})),w0={},b0={},j0={},H_;function FU(){return H_||(H_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),j()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},n)},w=()=>{v!==null&&(clearTimeout(v),v=null)},j=()=>{w(),l=void 0,u=null},b=()=>{f()},_=function(...C){if(s!=null&&s.aborted)return;l=this,u=C;const N=v==null;x(),d&&N&&f()};return _.schedule=x,_.cancel=j,_.flush=b,s==null||s.addEventListener("abort",j,{once:!0}),_}e.debounce=t})(j0)),j0}var K_;function LU(){return K_||(K_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FU();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const v=t.debounce(function(...j){f=n.apply(this,j),p=null},s,{edges:m}),x=function(...j){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,j),p=Date.now(),v.cancel(),v.schedule(),f):(v.apply(this,j),f)},w=()=>(v.flush(),f);return x.cancel=v.cancel,x.flush=w,x}e.debounce=r})(b0)),b0}var G_;function zU(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LU();function r(n,s=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(w0)),w0}var k0,Y_;function UU(){return Y_||(Y_=1,k0=zU().throttle),k0}var BU=UU();const WU=ai(BU);var J_=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},jP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:l}=r,u=no(n)?e:Number(n),d=no(s)?t:Number(s);return a&&a>0&&(u?d=u/a:d&&(u=d*a),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},VU={width:0,height:0,overflow:"visible"},qU={width:0,overflowX:"visible"},HU={height:0,overflowY:"visible"},KU={},GU=e=>{var{width:t,height:r}=e,n=no(t),s=no(r);return n&&s?VU:n?qU:s?HU:KU};function YU(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function Cn(e){return Number.isFinite(e)}function Zo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(null,arguments)}function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(r),!0).forEach(function(n){JU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JU(e,t,r){return(t=XU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XU(e){var t=QU(e,"string");return typeof t=="symbol"?t:t+""}function QU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kP=y.createContext({width:-1,height:-1});function ZU(e){return Zo(e.width)&&Zo(e.height)}function SP(e){var{children:t,width:r,height:n}=e,s=y.useMemo(()=>({width:r,height:n}),[r,n]);return ZU(s)?y.createElement(kP.Provider,{value:s},t):null}var hw=()=>y.useContext(kP),eB=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:v,onResize:x,style:w={}}=e,j=y.useRef(null),b=y.useRef();b.current=x,y.useImperativeHandle(t,()=>j.current);var[_,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),N=y.useCallback((F,Q)=>{C(q=>{var ae=Math.round(F),Y=Math.round(Q);return q.containerWidth===ae&&q.containerHeight===Y?q:{containerWidth:ae,containerHeight:Y}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return mu;var F=Y=>{var oe,{width:V,height:K}=Y[0].contentRect;N(V,K),(oe=b.current)===null||oe===void 0||oe.call(b,V,K)};f>0&&(F=WU(F,f,{trailing:!0,leading:!1}));var Q=new ResizeObserver(F),{width:q,height:ae}=j.current.getBoundingClientRect();return N(q,ae),Q.observe(j.current),()=>{Q.disconnect()}},[N,f]);var{containerWidth:T,containerHeight:A}=_;J_(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:M}=jP(T,A,{width:s,height:a,aspect:r,maxHeight:d});return J_(P!=null&&P>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,M,s,a,l,u,r),y.createElement("div",{id:p?"".concat(p):void 0,className:tn("recharts-responsive-container",v),style:Q_(Q_({},w),{},{width:s,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:j},y.createElement("div",{style:GU({width:s,height:a})},y.createElement(SP,{width:P,height:M},m)))}),tB=y.forwardRef((e,t)=>{var r=hw();if(Zo(r.width)&&Zo(r.height))return e.children;var{width:n,height:s}=YU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=jP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return qt(a)&&qt(l)?y.createElement(SP,{width:a,height:l},e.children):y.createElement(eB,Bv({},e,{width:n,height:s,ref:t}))});function _P(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var up=()=>{var e,t=ya(),r=zt(RU),n=zt(cp),s=(e=zt(lp))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},rB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nB=()=>{var e;return(e=zt(os))!==null&&e!==void 0?e:rB},sB=()=>zt(uo),aB=()=>zt(fo),Fr=e=>e.layout.layoutType,dp=()=>zt(Fr),iB=()=>{var e=dp();return e!==void 0},fp=e=>{var t=En(),r=ya(),{width:n,height:s}=e,a=hw(),l=n,u=s;return a&&(l=a.width>0?a.width:n,u=a.height>0?a.height:s),y.useEffect(()=>{!r&&Zo(l)&&Zo(u)&&t(aU({width:l,height:u}))},[t,r,l,u]),null},oB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},NP=ea({name:"legend",initialState:oB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Yn()},removeLegendPayload:{reducer(e,t){var r=Ji(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Yn()}}}),{setLegendSize:Nee,setLegendSettings:Cee,addLegendPayload:lB,removeLegendPayload:cB}=NP.actions,uB=NP.reducer;function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(null,arguments)}function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(n){dB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dB(e,t,r){return(t=fB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fB(e){var t=hB(e,"string");return typeof t=="symbol"?t:t+""}function hB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mB(e){return Array.isArray(e)&&Ei(e[0])&&Ei(e[1])?e.join(" ~ "):e}var pB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:v=!1}=e,x=()=>{if(a&&a.length){var A={padding:0,margin:0},P=(u?ep(a,u):a).map((M,F)=>{if(M.type==="none")return null;var Q=M.formatter||l||mB,{value:q,name:ae}=M,Y=q,oe=ae;if(Q){var V=Q(q,ae,M,F,a);if(Array.isArray(V))[Y,oe]=V;else if(V!=null)Y=V;else return null}var K=S0({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:K},Ei(oe)?y.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Ei(oe)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},Y),y.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:A},P)}return null},w=S0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=S0({margin:0},s),b=!is(f),_=b?f:"",C=tn("recharts-default-tooltip",d),N=tn("recharts-tooltip-label",m);b&&p&&a!==void 0&&a!==null&&(_=p(f,a));var T=v?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Wv({className:C,style:w},T),y.createElement("p",{className:N,style:j},y.isValidElement(_)?_:"".concat(_)),x())},td="recharts-tooltip-wrapper",gB={visibility:"hidden"};function yB(e){var{coordinate:t,translateX:r,translateY:n}=e;return tn(td,{["".concat(td,"-right")]:qt(r)&&t&&qt(t.x)&&r>=t.x,["".concat(td,"-left")]:qt(r)&&t&&qt(t.x)&&r<t.x,["".concat(td,"-bottom")]:qt(n)&&t&&qt(t.y)&&n>=t.y,["".concat(td,"-top")]:qt(n)&&t&&qt(t.y)&&n<t.y})}function eN(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&qt(a[n]))return a[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var v=d[n];if(v==null)return 0;if(l[n]){var x=f,w=v;return x<w?Math.max(p,v):Math.max(f,v)}if(m==null)return 0;var j=p+u,b=v+m;return j>b?Math.max(f,v):Math.max(p,v)}function vB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=eN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=eN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=vB({translateX:f,translateY:p,useTranslate3d:u})):m=gB,{cssProperties:m,cssClasses:yB({translateX:f,translateY:p,coordinate:r})}}function tN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tN(Object(r),!0).forEach(function(n){Vv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vv(e,t,r){return(t=wB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jB extends y.PureComponent{constructor(){super(...arguments),Vv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:v,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:b,hasPortalFromProps:_}=this.props,{cssClasses:C,cssProperties:N}=xB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:v,viewBox:x}),T=_?{}:ph(ph({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),A=ph(ph({},T),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:A,ref:b},a)}}var kB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pu={devToolsEnabled:!1,isSsr:kB()},CP=()=>{var e;return(e=zt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(null,arguments)}function rN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rN(Object(r),!0).forEach(function(n){SB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SB(e,t,r){return(t=_B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _B(e){var t=NB(e,"string");return typeof t=="symbol"?t:t+""}function NB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sN={curveBasisClosed:DL,curveBasisOpen:$L,curveBasis:IL,curveBumpX:xL,curveBumpY:wL,curveLinearClosed:RL,curveLinear:Qm,curveMonotoneX:ML,curveMonotoneY:FL,curveNatural:LL,curveStep:zL,curveStepAfter:BL,curveStepBefore:UL},om=e=>Cn(e.x)&&Cn(e.y),aN=e=>e.base!=null&&om(e.base)&&om(e),rd=e=>e.x,nd=e=>e.y,CB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(qd(e));return(r==="curveMonotone"||r==="curveBump")&&t?sN["".concat(r).concat(t==="vertical"?"Y":"X")]:sN[r]||Qm},EB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,l=CB(t,s),u=a?r.filter(om):r,d;if(Array.isArray(n)){var m=r.map((x,w)=>nN(nN({},x),{},{base:n[w]}));s==="vertical"?d=lh().y(nd).x1(rd).x0(x=>x.base.x):d=lh().x(rd).y1(nd).y0(x=>x.base.y);var f=d.defined(aN).curve(l),p=a?m.filter(aN):m;return f(p)}s==="vertical"&&qt(n)?d=lh().y(nd).x1(rd).x0(n):qt(n)?d=lh().x(rd).y1(nd).y0(n):d=vA().x(rd).y(nd);var v=d.defined(om).curve(l);return v(u)},EP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?EB(e):n;return y.createElement("path",qv({},Qo(e),fz(e),{className:tn("recharts-curve",t),d:a===null?void 0:a,ref:s}))},AB=["x","y","top","left","width","height","className"];function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hv.apply(null,arguments)}function iN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iN(Object(r),!0).forEach(function(n){OB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OB(e,t,r){return(t=TB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TB(e){var t=IB(e,"string");return typeof t=="symbol"?t:t+""}function IB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DB(e,t){if(e==null)return{};var r,n,s=$B(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $B(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),MB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:l=0,className:u}=e,d=DB(e,AB),m=PB({x:t,y:r,top:n,left:s,width:a,height:l},d);return!qt(t)||!qt(r)||!qt(a)||!qt(l)||!qt(n)||!qt(s)?null:y.createElement("path",Hv({},Ma(m),{className:tn("recharts-cross",u),d:RB(t,r,a,l,n,s)}))};function FB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function oN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oN(Object(r),!0).forEach(function(n){LB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LB(e,t,r){return(t=zB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zB(e){var t=UB(e,"string");return typeof t=="symbol"?t:t+""}function UB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),AP=(e,t,r)=>e.map(n=>"".concat(BB(n)," ").concat(t,"ms ").concat(r)).join(","),WB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Td=(e,t)=>Object.keys(t).reduce((r,n)=>lN(lN({},r),{},{[n]:e(n,t[n])}),{});function cN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cN(Object(r),!0).forEach(function(n){VB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VB(e,t,r){return(t=qB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lm=(e,t,r)=>e+(t-e)*r,Kv=e=>{var{from:t,to:r}=e;return t!==r},PP=(e,t,r)=>{var n=Td((s,a)=>{if(Kv(a)){var[l,u]=e(a.from,a.to,a.velocity);return Gn(Gn({},a),{},{from:l,velocity:u})}return a},t);return r<1?Td((s,a)=>Kv(a)?Gn(Gn({},a),{},{velocity:lm(a.velocity,n[s].velocity,r),from:lm(a.from,n[s].from,r)}):a,t):PP(e,n,r-1)};function KB(e,t,r,n,s,a){var l,u=n.reduce((v,x)=>Gn(Gn({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Td((v,x)=>x.from,u),m=()=>!Object.values(u).filter(Kv).length,f=null,p=v=>{l||(l=v);var x=v-l,w=x/r.dt;u=PP(r,u,w),s(Gn(Gn(Gn({},e),t),d())),l=v,m()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}function GB(e,t,r,n,s,a,l){var u=null,d=s.reduce((p,v)=>Gn(Gn({},p),{},{[v]:[e[v],t[v]]}),{}),m,f=p=>{m||(m=p);var v=(p-m)/n,x=Td((j,b)=>lm(...b,r(v)),d);if(a(Gn(Gn(Gn({},e),t),x)),v<1)u=l.setTimeout(f);else{var w=Td((j,b)=>lm(...b,r(1)),d);a(Gn(Gn(Gn({},e),t),w))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const YB=(e,t,r,n,s,a)=>{var l=WB(e,t);return r==null?()=>(s(Gn(Gn({},e),t)),()=>{}):r.isStepper===!0?KB(e,t,r,l,s,a):GB(e,t,r,n,l,s,a)};var cm=1e-4,OP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],TP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),uN=(e,t)=>r=>{var n=OP(e,t);return TP(n,r)},JB=(e,t)=>r=>{var n=OP(e,t),s=[...n.map((a,l)=>a*l).slice(1),0];return TP(s,r)},XB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((s=a[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=a[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},QB=(e,t,r,n)=>{var s=uN(e,r),a=uN(t,n),l=JB(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,v=0;v<8;++v){var x=s(p)-f,w=l(p);if(Math.abs(x-f)<cm||w<cm)return a(p);p=u(p-x/w)}return a(p)};return d.isStepper=!1,d},dN=function(){return QB(...XB(...arguments))},ZB=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,v=d*s/1e3+l;return Math.abs(v-u)<cm&&Math.abs(p)<cm?[u,0]:[v,p]};return a.isStepper=!0,a.dt=s,a},e7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dN(e);case"spring":return ZB();default:if(e.split("(")[0]==="cubic-bezier")return dN(e)}return typeof e=="function"?e:null};function t7(e){var t,r=()=>null,n=!1,s=null,a=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(a.bind(null,m),d);return}a(d),s=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),a(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class r7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function n7(){return t7(new r7)}var s7=y.createContext(n7);function a7(e,t){var r=y.useContext(s7);return y.useMemo(()=>t??r(e),[e,t,r])}var i7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},fN={t:0},_0={t:1};function mw(e){var t=Ua(e,i7),{isActive:r,canBegin:n,duration:s,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=a7(t.animationId,t.animationManager),[p,v]=y.useState(r?fN:_0),x=y.useRef(null);return y.useEffect(()=>{r||v(_0)},[r]),y.useEffect(()=>{if(!r||!n)return mu;var w=YB(fN,_0,e7(a),s,v,f.getTimeoutController()),j=()=>{x.current=w()};return f.start([d,l,j,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,a,l,d,u,f]),m(p.t)}function pw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Ed(t)),n=y.useRef(e);return n.current!==e&&(r.current=Ed(t),n.current=e),r.current}var o7=["radius"],l7=["radius"];function hN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(r),!0).forEach(function(n){c7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c7(e,t,r){return(t=u7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u7(e){var t=d7(e,"string");return typeof t=="symbol"?t:t+""}function d7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function pN(e,t){if(e==null)return{};var r,n,s=f7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gN=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,v=4;p<v;p++)f[p]=s[p]>a?a:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(a>0&&s===+s&&s>0){var x=Math.min(a,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},yN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IP=e=>{var t=Ua(e,yN),r=y.useRef(null),[n,s]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var $=r.current.getTotalLength();$&&s($)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:v,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,b=y.useRef(u),_=y.useRef(d),C=y.useRef(a),N=y.useRef(l),T=y.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),A=pw(T,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=tn("recharts-rectangle",f);if(!j){var M=Ma(t),{radius:F}=M,Q=pN(M,o7);return y.createElement("path",um({},Q,{radius:typeof m=="number"?m:void 0,className:P,d:gN(a,l,u,d,m)}))}var q=b.current,ae=_.current,Y=C.current,oe=N.current,V="0px ".concat(n===-1?1:n,"px"),K="".concat(n,"px 0px"),ge=AP(["strokeDasharray"],v,typeof p=="string"?p:yN.animationEasing);return y.createElement(mw,{animationId:A,key:A,canBegin:n>0,duration:v,easing:p,isActive:j,begin:x},$=>{var G=ws(q,u,$),ce=ws(ae,d,$),le=ws(Y,a,$),U=ws(oe,l,$);r.current&&(b.current=G,_.current=ce,C.current=le,N.current=U);var ee;w?$>0?ee={transition:ge,strokeDasharray:K}:ee={strokeDasharray:V}:ee={strokeDasharray:K};var ue=Ma(t),{radius:$e}=ue,Oe=pN(ue,l7);return y.createElement("path",um({},Oe,{radius:typeof m=="number"?m:void 0,className:P,d:gN(le,U,G,ce,m),ref:r,style:mN(mN({},ee),t.style)}))})};function vN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(r),!0).forEach(function(n){h7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h7(e,t,r){return(t=m7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dm=Math.PI/180,g7=e=>e*180/Math.PI,bs=(e,t,r,n)=>({x:e+Math.cos(-dm*n)*r,y:t+Math.sin(-dm*n)*r}),y7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},v7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},x7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,l=v7({x:r,y:n},{x:s,y:a});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>a&&(d=2*Math.PI-d),{radius:l,angle:g7(d),angleInRadian:d}},w7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},b7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return e+l*360},j7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=x7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=w7(t),f=a,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?xN(xN({},t),{},{radius:s,angle:b7(f,t)}):null};function DP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,l=bs(t,r,n,s),u=bs(t,r,n,a);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}var k7=(e,t)=>{var r=fa(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},gh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/dm,p=d?s:s+a*f,v=bs(t,r,m,p),x=bs(t,r,n,p),w=d?s-a*f:s,j=bs(t,r,m*Math.cos(f*dm),w);return{center:v,circleTangency:x,lineTangency:j,theta:f}},$P=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:l}=e,u=k7(a,l),d=a+u,m=bs(t,r,s,a),f=bs(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var v=bs(t,r,n,a),x=bs(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},S7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=fa(m-d),{circleTangency:p,lineTangency:v,theta:x}=gh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:a,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:b}=gh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-b;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):$P({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var C="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:T,theta:A}=gh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:P,lineTangency:M,theta:F}=gh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),Q=u?Math.abs(d-m):Math.abs(d-m)-A-F;if(Q<0&&a===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(Q>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},_7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},RP=e=>{var t=Ua(e,_7),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(a<s||m===f)return null;var v=tn("recharts-sector",p),x=a-s,w=si(l,x,0,!0),j;return w>0&&Math.abs(m-f)<360?j=S7({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):j=$P({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:m,endAngle:f}),y.createElement("path",Gv({},Ma(t),{className:v,d:j}))};function N7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(IA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:a,outerRadius:l,angle:u}=t,d=bs(n,s,a,u),m=bs(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return DP(t)}}var N0={},C0={},E0={},wN;function C7(){return wN||(wN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(E0)),E0}var bN;function E7(){return bN||(bN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(C0)),C0}var jN;function A7(){return jN||(jN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qA(),r=E7();function n(s,a,l){l&&typeof l!="number"&&t.isIterateeCall(s,a,l)&&(a=l=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),l=l===void 0?s<a?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((a-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(N0)),N0}var A0,kN;function P7(){return kN||(kN=1,A0=A7().range),A0}var O7=P7();const MP=ai(O7);function Jo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function T7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gw(e){let t,r,n;e.length!==2?(t=Jo,r=(u,d)=>Jo(e(u),d),n=(u,d)=>e(u)-d):(t=e===Jo||e===T7?e:I7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function a(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:a}}function I7(){return 0}function FP(e){return e===null?NaN:+e}function*D7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const $7=gw(Jo),Yd=$7.right;gw(FP).center;class SN extends Map{constructor(t,r=F7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(_N(this,t))}has(t){return super.has(_N(this,t))}set(t,r){return super.set(R7(this,t),r)}delete(t){return super.delete(M7(this,t))}}function _N({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function R7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function M7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function F7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function L7(e=Jo){if(e===Jo)return LP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function LP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const z7=Math.sqrt(50),U7=Math.sqrt(10),B7=Math.sqrt(2);function fm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),l=a>=z7?10:a>=U7?5:a>=B7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?fm(e,t,r*2):[u,d,m]}function Yv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,l]=n?fm(t,e,r):fm(e,t,r);if(!(a>=s))return[];const u=a-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function Jv(e,t,r){return t=+t,e=+e,r=+r,fm(e,t,r)[2]}function Xv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Jv(t,e,r):Jv(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function NN(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function CN(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function zP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?LP:L7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+v)),w=Math.min(n,Math.floor(t+(d-m)*p/d+v));zP(e,t,x,w,s)}const a=e[t];let l=r,u=n;for(sd(e,r,t),s(e[n],a)>0&&sd(e,r,n);l<u;){for(sd(e,l,u),++l,--u;s(e[l],a)<0;)++l;for(;s(e[u],a)>0;)--u}s(e[r],a)===0?sd(e,r,u):(++u,sd(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function sd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function W7(e,t,r){if(e=Float64Array.from(D7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return CN(e);if(t>=1)return NN(e);var n,s=(n-1)*t,a=Math.floor(s),l=NN(zP(e,a).subarray(0,a+1)),u=CN(e.subarray(a+1));return l+(u-l)*(s-a)}}function V7(e,t,r=FP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),l=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return l+(u-l)*(s-a)}}function q7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ho(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Qv=Symbol("implicit");function yw(){var e=new SN,t=[],r=[],n=Qv;function s(a){let l=e.get(a);if(l===void 0){if(n!==Qv)return n;e.set(a,l=t.push(a)-1)}return r[l%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new SN;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return yw(t,r).unknown(n)},Ba.apply(s,arguments),s}function vw(){var e=yw().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var v=t().length,x=s<n,w=x?s:n,j=x?n:s;a=(j-w)/Math.max(1,v-d+m*2),u&&(a=Math.floor(a)),w+=(j-w-a*(v-d))*f,l=a*(1-d),u&&(w=Math.round(w),l=Math.round(l));var b=q7(v).map(function(_){return w+a*_});return r(x?b.reverse():b)}return e.domain=function(v){return arguments.length?(t(v),p()):t()},e.range=function(v){return arguments.length?([n,s]=v,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(v){return[n,s]=v,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(v){return arguments.length?(u=!!v,p()):u},e.padding=function(v){return arguments.length?(d=Math.min(1,m=+v),p()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),p()):d},e.paddingOuter=function(v){return arguments.length?(m=+v,p()):m},e.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),p()):f},e.copy=function(){return vw(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Ba.apply(p(),arguments)}function UP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return UP(t())},e}function H7(){return UP(vw.apply(null,arguments).paddingInner(1))}function xw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function BP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jd(){}var Id=.7,hm=1/Id,Gc="\\s*([+-]?\\d+)\\s*",Dd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K7=/^#([0-9a-f]{3,8})$/,G7=new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`),Y7=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),J7=new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${Dd}\\)$`),X7=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${Dd}\\)$`),Q7=new RegExp(`^hsl\\(${Dd},${Ni},${Ni}\\)$`),Z7=new RegExp(`^hsla\\(${Dd},${Ni},${Ni},${Dd}\\)$`),EN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xw(Jd,$d,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:AN,formatHex:AN,formatHex8:e9,formatHsl:t9,formatRgb:PN,toString:PN});function AN(){return this.rgb().formatHex()}function e9(){return this.rgb().formatHex8()}function t9(){return WP(this).formatHsl()}function PN(){return this.rgb().formatRgb()}function $d(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=K7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ON(t):r===3?new Qs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?yh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?yh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=G7.exec(e))?new Qs(t[1],t[2],t[3],1):(t=Y7.exec(e))?new Qs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=J7.exec(e))?yh(t[1],t[2],t[3],t[4]):(t=X7.exec(e))?yh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Q7.exec(e))?DN(t[1],t[2]/100,t[3]/100,1):(t=Z7.exec(e))?DN(t[1],t[2]/100,t[3]/100,t[4]):EN.hasOwnProperty(e)?ON(EN[e]):e==="transparent"?new Qs(NaN,NaN,NaN,0):null}function ON(e){return new Qs(e>>16&255,e>>8&255,e&255,1)}function yh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qs(e,t,r,n)}function r9(e){return e instanceof Jd||(e=$d(e)),e?(e=e.rgb(),new Qs(e.r,e.g,e.b,e.opacity)):new Qs}function Zv(e,t,r,n){return arguments.length===1?r9(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}xw(Qs,Zv,BP(Jd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(Rl(this.r),Rl(this.g),Rl(this.b),mm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TN,formatHex:TN,formatHex8:n9,formatRgb:IN,toString:IN}));function TN(){return`#${Ol(this.r)}${Ol(this.g)}${Ol(this.b)}`}function n9(){return`#${Ol(this.r)}${Ol(this.g)}${Ol(this.b)}${Ol((isNaN(this.opacity)?1:this.opacity)*255)}`}function IN(){const e=mm(this.opacity);return`${e===1?"rgb(":"rgba("}${Rl(this.r)}, ${Rl(this.g)}, ${Rl(this.b)}${e===1?")":`, ${e})`}`}function mm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ol(e){return e=Rl(e),(e<16?"0":"")+e.toString(16)}function DN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ri(e,t,r,n)}function WP(e){if(e instanceof ri)return new ri(e.h,e.s,e.l,e.opacity);if(e instanceof Jd||(e=$d(e)),!e)return new ri;if(e instanceof ri)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(r-n)/u+(r<n)*6:r===a?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new ri(l,u,d,e.opacity)}function s9(e,t,r,n){return arguments.length===1?WP(e):new ri(e,t,r,n??1)}function ri(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}xw(ri,s9,BP(Jd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new ri(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new ri(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Qs(P0(e>=240?e-240:e+120,s,n),P0(e,s,n),P0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ri($N(this.h),vh(this.s),vh(this.l),mm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mm(this.opacity);return`${e===1?"hsl(":"hsla("}${$N(this.h)}, ${vh(this.s)*100}%, ${vh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $N(e){return e=(e||0)%360,e<0?e+360:e}function vh(e){return Math.max(0,Math.min(1,e||0))}function P0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ww=e=>()=>e;function a9(e,t){return function(r){return e+r*t}}function i9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function o9(e){return(e=+e)==1?VP:function(t,r){return r-t?i9(t,r,e):ww(isNaN(t)?r:t)}}function VP(e,t){var r=t-e;return r?a9(e,r):ww(isNaN(e)?t:e)}const RN=(function e(t){var r=o9(t);function n(s,a){var l=r((s=Zv(s)).r,(a=Zv(a)).r),u=r(s.g,a.g),d=r(s.b,a.b),m=VP(s.opacity,a.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function l9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function c9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),l;for(l=0;l<n;++l)s[l]=gu(e[l],t[l]);for(;l<r;++l)a[l]=t[l];return function(u){for(l=0;l<n;++l)a[l]=s[l](u);return a}}function d9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function f9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=gu(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var ex=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O0=new RegExp(ex.source,"g");function h9(e){return function(){return e}}function m9(e){return function(t){return e(t)+""}}function p9(e,t){var r=ex.lastIndex=O0.lastIndex=0,n,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=ex.exec(e))&&(s=O0.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:pm(n,s)})),r=O0.lastIndex;return r<t.length&&(a=t.slice(r),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?m9(d[0].x):h9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function gu(e,t){var r=typeof t,n;return t==null||r==="boolean"?ww(t):(r==="number"?pm:r==="string"?(n=$d(t))?(t=n,RN):p9:t instanceof $d?RN:t instanceof Date?d9:c9(t)?l9:Array.isArray(t)?u9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?f9:pm)(e,t)}function bw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function g9(e,t){t===void 0&&(t=e,e=gu);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return a[u](l-u)}}function y9(e){return function(){return e}}function gm(e){return+e}var MN=[0,1];function Fs(e){return e}function tx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:y9(isNaN(t)?NaN:.5)}function v9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function x9(e,t,r){var n=e[0],s=e[1],a=t[0],l=t[1];return s<n?(n=tx(s,n),a=r(l,a)):(n=tx(n,s),a=r(a,l)),function(u){return a(n(u))}}function w9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=tx(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(u){var d=Yd(e,u,1,n)-1;return a[d](s[d](u))}}function Xd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hp(){var e=MN,t=MN,r=gu,n,s,a,l=Fs,u,d,m;function f(){var v=Math.min(e.length,t.length);return l!==Fs&&(l=v9(e[0],e[v-1])),u=v>2?w9:x9,d=m=null,p}function p(v){return v==null||isNaN(v=+v)?a:(d||(d=u(e.map(n),t,r)))(n(l(v)))}return p.invert=function(v){return l(s((m||(m=u(t,e.map(n),pm)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,gm),f()):e.slice()},p.range=function(v){return arguments.length?(t=Array.from(v),f()):t.slice()},p.rangeRound=function(v){return t=Array.from(v),r=bw,f()},p.clamp=function(v){return arguments.length?(l=v?!0:Fs,f()):l!==Fs},p.interpolate=function(v){return arguments.length?(r=v,f()):r},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,x){return n=v,s=x,f()}}function jw(){return hp()(Fs,Fs)}function b9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ym(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zc(e){return e=ym(Math.abs(e)),e?e[1]:NaN}function j9(e,t){return function(r,n){for(var s=r.length,a=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),a.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function k9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var S9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rd(e){if(!(t=S9.exec(e)))throw new Error("invalid format: "+e);var t;return new kw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rd.prototype=kw.prototype;function kw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var qP;function N9(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(qP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return a===l?n:a>l?n+new Array(a-l+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+ym(e,Math.max(0,t+a-1))[0]}function FN(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const LN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:b9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>FN(e*100,t),r:FN,s:N9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zN(e){return e}var UN=Array.prototype.map,BN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C9(e){var t=e.grouping===void 0||e.thousands===void 0?zN:j9(UN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?zN:k9(UN.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Rd(p);var v=p.fill,x=p.align,w=p.sign,j=p.symbol,b=p.zero,_=p.width,C=p.comma,N=p.precision,T=p.trim,A=p.type;A==="n"?(C=!0,A="g"):LN[A]||(N===void 0&&(N=12),T=!0,A="g"),(b||v==="0"&&x==="=")&&(b=!0,v="0",x="=");var P=j==="$"?r:j==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",M=j==="$"?n:/[%p]/.test(A)?l:"",F=LN[A],Q=/[defgprs%]/.test(A);N=N===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function q(ae){var Y=P,oe=M,V,K,ge;if(A==="c")oe=F(ae)+oe,ae="";else{ae=+ae;var $=ae<0||1/ae<0;if(ae=isNaN(ae)?d:F(Math.abs(ae),N),T&&(ae=_9(ae)),$&&+ae==0&&w!=="+"&&($=!1),Y=($?w==="("?w:u:w==="-"||w==="("?"":w)+Y,oe=(A==="s"?BN[8+qP/3]:"")+oe+($&&w==="("?")":""),Q){for(V=-1,K=ae.length;++V<K;)if(ge=ae.charCodeAt(V),48>ge||ge>57){oe=(ge===46?s+ae.slice(V+1):ae.slice(V))+oe,ae=ae.slice(0,V);break}}}C&&!b&&(ae=t(ae,1/0));var G=Y.length+ae.length+oe.length,ce=G<_?new Array(_-G+1).join(v):"";switch(C&&b&&(ae=t(ce+ae,ce.length?_-oe.length:1/0),ce=""),x){case"<":ae=Y+ae+oe+ce;break;case"=":ae=Y+ce+ae+oe;break;case"^":ae=ce.slice(0,G=ce.length>>1)+Y+ae+oe+ce.slice(G);break;default:ae=ce+Y+ae+oe;break}return a(ae)}return q.toString=function(){return p+""},q}function f(p,v){var x=m((p=Rd(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Zc(v)/3)))*3,j=Math.pow(10,-w),b=BN[8+w/3];return function(_){return x(j*_)+b}}return{format:m,formatPrefix:f}}var xh,Sw,HP;E9({thousands:",",grouping:[3],currency:["$",""]});function E9(e){return xh=C9(e),Sw=xh.format,HP=xh.formatPrefix,xh}function A9(e){return Math.max(0,-Zc(Math.abs(e)))}function P9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zc(t)/3)))*3-Zc(Math.abs(e)))}function O9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zc(t)-Zc(e))+1}function KP(e,t,r,n){var s=Xv(e,t,r),a;switch(n=Rd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=P9(s,l))&&(n.precision=a),HP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=O9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=A9(s))&&(n.precision=a-(n.type==="%")*2);break}}return Sw(n)}function nl(e){var t=e.domain;return e.ticks=function(r){var n=t();return Yv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return KP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,l=n[s],u=n[a],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=a,a=m);f-- >0;){if(m=Jv(l,u,r),m===d)return n[s]=l,n[a]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function GP(){var e=jw();return e.copy=function(){return Xd(e,GP())},Ba.apply(e,arguments),nl(e)}function YP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return YP(e).unknown(t)},e=arguments.length?Array.from(e,gm):[0,1],nl(r)}function JP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],l;return a<s&&(l=r,r=n,n=l,l=s,s=a,a=l),e[r]=t.floor(s),e[n]=t.ceil(a),e}function WN(e){return Math.log(e)}function VN(e){return Math.exp(e)}function T9(e){return-Math.log(-e)}function I9(e){return-Math.exp(-e)}function D9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $9(e){return e===10?D9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function R9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qN(e){return(t,r)=>-e(-t,r)}function _w(e){const t=e(WN,VN),r=t.domain;let n=10,s,a;function l(){return s=R9(n),a=$9(n),r()[0]<0?(s=qN(s),a=qN(a),e(T9,I9)):e(WN,VN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let v=s(m),x=s(f),w,j;const b=u==null?10:+u;let _=[];if(!(n%1)&&x-v<b){if(v=Math.floor(v),x=Math.ceil(x),m>0){for(;v<=x;++v)for(w=1;w<n;++w)if(j=v<0?w/a(-v):w*a(v),!(j<m)){if(j>f)break;_.push(j)}}else for(;v<=x;++v)for(w=n-1;w>=1;--w)if(j=v>0?w/a(-v):w*a(v),!(j<m)){if(j>f)break;_.push(j)}_.length*2<b&&(_=Yv(m,f,b))}else _=Yv(v,x,Math.min(x-v,b)).map(a);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Rd(d)).precision==null&&(d.trim=!0),d=Sw(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(JP(r(),{floor:u=>a(Math.floor(s(u))),ceil:u=>a(Math.ceil(s(u)))})),t}function XP(){const e=_w(hp()).domain([1,10]);return e.copy=()=>Xd(e,XP()).base(e.base()),Ba.apply(e,arguments),e}function HN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function KN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Nw(e){var t=1,r=e(HN(t),KN(t));return r.constant=function(n){return arguments.length?e(HN(t=+n),KN(t)):t},nl(r)}function QP(){var e=Nw(hp());return e.copy=function(){return Xd(e,QP()).constant(e.constant())},Ba.apply(e,arguments)}function GN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function M9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F9(e){return e<0?-e*e:e*e}function Cw(e){var t=e(Fs,Fs),r=1;function n(){return r===1?e(Fs,Fs):r===.5?e(M9,F9):e(GN(r),GN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},nl(t)}function Ew(){var e=Cw(hp());return e.copy=function(){return Xd(e,Ew()).exponent(e.exponent())},Ba.apply(e,arguments),e}function L9(){return Ew.apply(null,arguments).exponent(.5)}function YN(e){return Math.sign(e)*e*e}function z9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ZP(){var e=jw(),t=[0,1],r=!1,n;function s(a){var l=z9(e(a));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(a){return e.invert(YN(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,gm)).map(YN)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return ZP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ba.apply(s,arguments),nl(s)}function eO(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=V7(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?n:t[Yd(r,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Jo),s()},a.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return eO().domain(e).range(t).unknown(n)},Ba.apply(a,arguments)}function tO(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function l(d){return d!=null&&d<=d?s[Yd(n,d,0,r)]:a}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return tO().domain([e,t]).range(s).unknown(a)},Ba.apply(nl(l),arguments)}function rO(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Yd(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return rO().domain(e).range(t).unknown(r)},Ba.apply(s,arguments)}const T0=new Date,I0=new Date;function Jn(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const l=s(a),u=s.ceil(a);return a-l<u-a?l:u},s.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),s.range=(a,l,u)=>{const d=[];if(a=s.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},s.filter=a=>Jn(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),r&&(s.count=(a,l)=>(T0.setTime(+a),I0.setTime(+l),e(T0),e(I0),Math.floor(r(T0,I0))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?l=>n(l)%a===0:l=>s.count(0,l)%a===0):s)),s}const vm=Jn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vm);vm.range;const Ki=1e3,$a=Ki*60,Gi=$a*60,ao=Gi*24,Aw=ao*7,JN=ao*30,D0=ao*365,Tl=Jn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ki)},(e,t)=>(t-e)/Ki,e=>e.getUTCSeconds());Tl.range;const Pw=Jn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ki)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getMinutes());Pw.range;const Ow=Jn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCMinutes());Ow.range;const Tw=Jn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ki-e.getMinutes()*$a)},(e,t)=>{e.setTime(+e+t*Gi)},(e,t)=>(t-e)/Gi,e=>e.getHours());Tw.range;const Iw=Jn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gi)},(e,t)=>(t-e)/Gi,e=>e.getUTCHours());Iw.range;const Qd=Jn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$a)/ao,e=>e.getDate()-1);Qd.range;const mp=Jn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ao,e=>e.getUTCDate()-1);mp.range;const nO=Jn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ao,e=>Math.floor(e/ao));nO.range;function Ql(e){return Jn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*$a)/Aw)}const pp=Ql(0),xm=Ql(1),U9=Ql(2),B9=Ql(3),eu=Ql(4),W9=Ql(5),V9=Ql(6);pp.range;xm.range;U9.range;B9.range;eu.range;W9.range;V9.range;function Zl(e){return Jn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Aw)}const gp=Zl(0),wm=Zl(1),q9=Zl(2),H9=Zl(3),tu=Zl(4),K9=Zl(5),G9=Zl(6);gp.range;wm.range;q9.range;H9.range;tu.range;K9.range;G9.range;const Dw=Jn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Dw.range;const $w=Jn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());$w.range;const io=Jn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());io.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});io.range;const oo=Jn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});oo.range;function sO(e,t,r,n,s,a){const l=[[Tl,1,Ki],[Tl,5,5*Ki],[Tl,15,15*Ki],[Tl,30,30*Ki],[a,1,$a],[a,5,5*$a],[a,15,15*$a],[a,30,30*$a],[s,1,Gi],[s,3,3*Gi],[s,6,6*Gi],[s,12,12*Gi],[n,1,ao],[n,2,2*ao],[r,1,Aw],[t,1,JN],[t,3,3*JN],[e,1,D0]];function u(m,f,p){const v=f<m;v&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),w=x?x.range(m,+f+1):[];return v?w.reverse():w}function d(m,f,p){const v=Math.abs(f-m)/p,x=gw(([,,b])=>b).right(l,v);if(x===l.length)return e.every(Xv(m/D0,f/D0,p));if(x===0)return vm.every(Math.max(Xv(m,f,p),1));const[w,j]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return w.every(j)}return[u,d]}const[Y9,J9]=sO(oo,$w,gp,nO,Iw,Ow),[X9,Q9]=sO(io,Dw,pp,Qd,Tw,Pw);function $0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function R0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ad(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Z9(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=id(s),f=od(s),p=id(a),v=od(a),x=id(l),w=od(l),j=id(u),b=od(u),_=id(d),C=od(d),N={a:$,A:G,b:ce,B:le,c:null,d:r2,e:r2,f:jW,g:TW,G:DW,H:xW,I:wW,j:bW,L:aO,m:kW,M:SW,p:U,q:ee,Q:a2,s:i2,S:_W,u:NW,U:CW,V:EW,w:AW,W:PW,x:null,X:null,y:OW,Y:IW,Z:$W,"%":s2},T={a:ue,A:$e,b:Oe,B:_e,c:null,d:n2,e:n2,f:LW,g:YW,G:XW,H:RW,I:MW,j:FW,L:oO,m:zW,M:UW,p:Ie,q:Ke,Q:a2,s:i2,S:BW,u:WW,U:VW,V:qW,w:HW,W:KW,x:null,X:null,y:GW,Y:JW,Z:QW,"%":s2},A={a:q,A:ae,b:Y,B:oe,c:V,d:e2,e:e2,f:pW,g:ZN,G:QN,H:t2,I:t2,j:dW,L:mW,m:uW,M:fW,p:Q,q:cW,Q:yW,s:vW,S:hW,u:sW,U:aW,V:iW,w:nW,W:oW,x:K,X:ge,y:ZN,Y:QN,Z:lW,"%":gW};N.x=P(r,N),N.X=P(n,N),N.c=P(t,N),T.x=P(r,T),T.X=P(n,T),T.c=P(t,T);function P(B,ve){return function(ie){var ne=[],pt=-1,et=0,Be=B.length,ft,De,rt;for(ie instanceof Date||(ie=new Date(+ie));++pt<Be;)B.charCodeAt(pt)===37&&(ne.push(B.slice(et,pt)),(De=XN[ft=B.charAt(++pt)])!=null?ft=B.charAt(++pt):De=ft==="e"?" ":"0",(rt=ve[ft])&&(ft=rt(ie,De)),ne.push(ft),et=pt+1);return ne.push(B.slice(et,pt)),ne.join("")}}function M(B,ve){return function(ie){var ne=ad(1900,void 0,1),pt=F(ne,B,ie+="",0),et,Be;if(pt!=ie.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(ve&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(et=R0(ad(ne.y,0,1)),Be=et.getUTCDay(),et=Be>4||Be===0?wm.ceil(et):wm(et),et=mp.offset(et,(ne.V-1)*7),ne.y=et.getUTCFullYear(),ne.m=et.getUTCMonth(),ne.d=et.getUTCDate()+(ne.w+6)%7):(et=$0(ad(ne.y,0,1)),Be=et.getDay(),et=Be>4||Be===0?xm.ceil(et):xm(et),et=Qd.offset(et,(ne.V-1)*7),ne.y=et.getFullYear(),ne.m=et.getMonth(),ne.d=et.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Be="Z"in ne?R0(ad(ne.y,0,1)).getUTCDay():$0(ad(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Be+5)%7:ne.w+ne.U*7-(Be+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,R0(ne)):$0(ne)}}function F(B,ve,ie,ne){for(var pt=0,et=ve.length,Be=ie.length,ft,De;pt<et;){if(ne>=Be)return-1;if(ft=ve.charCodeAt(pt++),ft===37){if(ft=ve.charAt(pt++),De=A[ft in XN?ve.charAt(pt++):ft],!De||(ne=De(B,ie,ne))<0)return-1}else if(ft!=ie.charCodeAt(ne++))return-1}return ne}function Q(B,ve,ie){var ne=m.exec(ve.slice(ie));return ne?(B.p=f.get(ne[0].toLowerCase()),ie+ne[0].length):-1}function q(B,ve,ie){var ne=x.exec(ve.slice(ie));return ne?(B.w=w.get(ne[0].toLowerCase()),ie+ne[0].length):-1}function ae(B,ve,ie){var ne=p.exec(ve.slice(ie));return ne?(B.w=v.get(ne[0].toLowerCase()),ie+ne[0].length):-1}function Y(B,ve,ie){var ne=_.exec(ve.slice(ie));return ne?(B.m=C.get(ne[0].toLowerCase()),ie+ne[0].length):-1}function oe(B,ve,ie){var ne=j.exec(ve.slice(ie));return ne?(B.m=b.get(ne[0].toLowerCase()),ie+ne[0].length):-1}function V(B,ve,ie){return F(B,t,ve,ie)}function K(B,ve,ie){return F(B,r,ve,ie)}function ge(B,ve,ie){return F(B,n,ve,ie)}function $(B){return l[B.getDay()]}function G(B){return a[B.getDay()]}function ce(B){return d[B.getMonth()]}function le(B){return u[B.getMonth()]}function U(B){return s[+(B.getHours()>=12)]}function ee(B){return 1+~~(B.getMonth()/3)}function ue(B){return l[B.getUTCDay()]}function $e(B){return a[B.getUTCDay()]}function Oe(B){return d[B.getUTCMonth()]}function _e(B){return u[B.getUTCMonth()]}function Ie(B){return s[+(B.getUTCHours()>=12)]}function Ke(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var ve=P(B+="",N);return ve.toString=function(){return B},ve},parse:function(B){var ve=M(B+="",!1);return ve.toString=function(){return B},ve},utcFormat:function(B){var ve=P(B+="",T);return ve.toString=function(){return B},ve},utcParse:function(B){var ve=M(B+="",!0);return ve.toString=function(){return B},ve}}}var XN={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,eW=/^%/,tW=/[\\^$*+?|[\]().{}]/g;function Ir(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function rW(e){return e.replace(tW,"\\$&")}function id(e){return new RegExp("^(?:"+e.map(rW).join("|")+")","i")}function od(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function nW(e,t,r){var n=ls.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sW(e,t,r){var n=ls.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function iW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function QN(e,t,r){var n=ls.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ZN(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function lW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cW(e,t,r){var n=ls.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function uW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function e2(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function dW(e,t,r){var n=ls.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function t2(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=ls.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=ls.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=ls.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gW(e,t,r){var n=eW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function yW(e,t,r){var n=ls.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function vW(e,t,r){var n=ls.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function r2(e,t){return Ir(e.getDate(),t,2)}function xW(e,t){return Ir(e.getHours(),t,2)}function wW(e,t){return Ir(e.getHours()%12||12,t,2)}function bW(e,t){return Ir(1+Qd.count(io(e),e),t,3)}function aO(e,t){return Ir(e.getMilliseconds(),t,3)}function jW(e,t){return aO(e,t)+"000"}function kW(e,t){return Ir(e.getMonth()+1,t,2)}function SW(e,t){return Ir(e.getMinutes(),t,2)}function _W(e,t){return Ir(e.getSeconds(),t,2)}function NW(e){var t=e.getDay();return t===0?7:t}function CW(e,t){return Ir(pp.count(io(e)-1,e),t,2)}function iO(e){var t=e.getDay();return t>=4||t===0?eu(e):eu.ceil(e)}function EW(e,t){return e=iO(e),Ir(eu.count(io(e),e)+(io(e).getDay()===4),t,2)}function AW(e){return e.getDay()}function PW(e,t){return Ir(xm.count(io(e)-1,e),t,2)}function OW(e,t){return Ir(e.getFullYear()%100,t,2)}function TW(e,t){return e=iO(e),Ir(e.getFullYear()%100,t,2)}function IW(e,t){return Ir(e.getFullYear()%1e4,t,4)}function DW(e,t){var r=e.getDay();return e=r>=4||r===0?eu(e):eu.ceil(e),Ir(e.getFullYear()%1e4,t,4)}function $W(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ir(t/60|0,"0",2)+Ir(t%60,"0",2)}function n2(e,t){return Ir(e.getUTCDate(),t,2)}function RW(e,t){return Ir(e.getUTCHours(),t,2)}function MW(e,t){return Ir(e.getUTCHours()%12||12,t,2)}function FW(e,t){return Ir(1+mp.count(oo(e),e),t,3)}function oO(e,t){return Ir(e.getUTCMilliseconds(),t,3)}function LW(e,t){return oO(e,t)+"000"}function zW(e,t){return Ir(e.getUTCMonth()+1,t,2)}function UW(e,t){return Ir(e.getUTCMinutes(),t,2)}function BW(e,t){return Ir(e.getUTCSeconds(),t,2)}function WW(e){var t=e.getUTCDay();return t===0?7:t}function VW(e,t){return Ir(gp.count(oo(e)-1,e),t,2)}function lO(e){var t=e.getUTCDay();return t>=4||t===0?tu(e):tu.ceil(e)}function qW(e,t){return e=lO(e),Ir(tu.count(oo(e),e)+(oo(e).getUTCDay()===4),t,2)}function HW(e){return e.getUTCDay()}function KW(e,t){return Ir(wm.count(oo(e)-1,e),t,2)}function GW(e,t){return Ir(e.getUTCFullYear()%100,t,2)}function YW(e,t){return e=lO(e),Ir(e.getUTCFullYear()%100,t,2)}function JW(e,t){return Ir(e.getUTCFullYear()%1e4,t,4)}function XW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?tu(e):tu.ceil(e),Ir(e.getUTCFullYear()%1e4,t,4)}function QW(){return"+0000"}function s2(){return"%"}function a2(e){return+e}function i2(e){return Math.floor(+e/1e3)}var Dc,cO,uO;ZW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZW(e){return Dc=Z9(e),cO=Dc.format,Dc.parse,uO=Dc.utcFormat,Dc.utcParse,Dc}function eV(e){return new Date(e)}function tV(e){return e instanceof Date?+e:+new Date(+e)}function Rw(e,t,r,n,s,a,l,u,d,m){var f=jw(),p=f.invert,v=f.domain,x=m(".%L"),w=m(":%S"),j=m("%I:%M"),b=m("%I %p"),_=m("%a %d"),C=m("%b %d"),N=m("%B"),T=m("%Y");function A(P){return(d(P)<P?x:u(P)<P?w:l(P)<P?j:a(P)<P?b:n(P)<P?s(P)<P?_:C:r(P)<P?N:T)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?v(Array.from(P,tV)):v().map(eV)},f.ticks=function(P){var M=v();return e(M[0],M[M.length-1],P??10)},f.tickFormat=function(P,M){return M==null?A:m(M)},f.nice=function(P){var M=v();return(!P||typeof P.range!="function")&&(P=t(M[0],M[M.length-1],P??10)),P?v(JP(M,P)):f},f.copy=function(){return Xd(f,Rw(e,t,r,n,s,a,l,u,d,m))},f}function rV(){return Ba.apply(Rw(X9,Q9,io,Dw,pp,Qd,Tw,Pw,Tl,cO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nV(){return Ba.apply(Rw(Y9,J9,oo,$w,gp,mp,Iw,Ow,Tl,uO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yp(){var e=0,t=1,r,n,s,a,l=Fs,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(a(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(v){var x,w;return arguments.length?([x,w]=v,l=p(x,w),m):[l(0),l(1)]}}return m.range=f(gu),m.rangeRound=f(bw),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return a=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function sl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dO(){var e=nl(yp()(Fs));return e.copy=function(){return sl(e,dO())},ho.apply(e,arguments)}function fO(){var e=_w(yp()).domain([1,10]);return e.copy=function(){return sl(e,fO()).base(e.base())},ho.apply(e,arguments)}function hO(){var e=Nw(yp());return e.copy=function(){return sl(e,hO()).constant(e.constant())},ho.apply(e,arguments)}function Mw(){var e=Cw(yp());return e.copy=function(){return sl(e,Mw()).exponent(e.exponent())},ho.apply(e,arguments)}function sV(){return Mw.apply(null,arguments).exponent(.5)}function mO(){var e=[],t=Fs;function r(n){if(n!=null&&!isNaN(n=+n))return t((Yd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Jo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>W7(e,a/n))},r.copy=function(){return mO(t).domain(e)},ho.apply(r,arguments)}function vp(){var e=0,t=.5,r=1,n=1,s,a,l,u,d,m=Fs,f,p=!1,v;function x(j){return isNaN(j=+j)?v:(j=.5+((j=+f(j))-a)*(n*j<n*a?u:d),m(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,s=f(e=+e),a=f(t=+t),l=f(r=+r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(m=j,x):m};function w(j){return function(b){var _,C,N;return arguments.length?([_,C,N]=b,m=g9(j,[_,C,N]),x):[m(0),m(.5),m(1)]}}return x.range=w(gu),x.rangeRound=w(bw),x.unknown=function(j){return arguments.length?(v=j,x):v},function(j){return f=j,s=j(e),a=j(t),l=j(r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x}}function pO(){var e=nl(vp()(Fs));return e.copy=function(){return sl(e,pO())},ho.apply(e,arguments)}function gO(){var e=_w(vp()).domain([.1,1,10]);return e.copy=function(){return sl(e,gO()).base(e.base())},ho.apply(e,arguments)}function yO(){var e=Nw(vp());return e.copy=function(){return sl(e,yO()).constant(e.constant())},ho.apply(e,arguments)}function Fw(){var e=Cw(vp());return e.copy=function(){return sl(e,Fw()).exponent(e.exponent())},ho.apply(e,arguments)}function aV(){return Fw.apply(null,arguments).exponent(.5)}const hd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vw,scaleDiverging:pO,scaleDivergingLog:gO,scaleDivergingPow:Fw,scaleDivergingSqrt:aV,scaleDivergingSymlog:yO,scaleIdentity:YP,scaleImplicit:Qv,scaleLinear:GP,scaleLog:XP,scaleOrdinal:yw,scalePoint:H7,scalePow:Ew,scaleQuantile:eO,scaleQuantize:tO,scaleRadial:ZP,scaleSequential:dO,scaleSequentialLog:fO,scaleSequentialPow:Mw,scaleSequentialQuantile:mO,scaleSequentialSqrt:sV,scaleSequentialSymlog:hO,scaleSqrt:L9,scaleSymlog:QP,scaleThreshold:rO,scaleTime:rV,scaleUtc:nV,tickFormat:KP},Symbol.toStringTag,{value:"Module"}));var al=e=>e.chartData,iV=be([al],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Lw=(e,t,r,n)=>n?iV(e):al(e);function Wl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Cn(t)&&Cn(r))return!0}return!1}function o2(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function vO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(Cn(r))s=r;else if(typeof r=="function")return;if(Cn(n))a=n;else if(typeof n=="function")return;var l=[s,a];if(Wl(l))return l}}function oV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Wl(n))return o2(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(qt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&B_.test(s)){var d=B_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(qt(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&W_.test(a)){var f=W_.exec(a);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var v=[l,u];if(Wl(v))return t==null?v:o2(v,t,r)}}}var yu=1e9,lV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Uw,sn=!0,La="[DecimalError] ",Ml=La+"Invalid argument: ",zw=La+"Exponent out of range: ",vu=Math.floor,Nl=Math.pow,cV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,da,as=1e7,Zr=7,xO=9007199254740991,bm=vu(xO/Zr),xt={};xt.absoluteValue=xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};xt.comparedTo=xt.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};xt.decimalPlaces=xt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Zr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};xt.dividedBy=xt.div=function(e){return Xi(this,new this.constructor(e))};xt.dividedToIntegerBy=xt.idiv=function(e){var t=this,r=t.constructor;return Wr(Xi(t,new r(e),0,1),r.precision)};xt.equals=xt.eq=function(e){return!this.cmp(e)};xt.exponent=function(){return Bn(this)};xt.greaterThan=xt.gt=function(e){return this.cmp(e)>0};xt.greaterThanOrEqualTo=xt.gte=function(e){return this.cmp(e)>=0};xt.isInteger=xt.isint=function(){return this.e>this.d.length-2};xt.isNegative=xt.isneg=function(){return this.s<0};xt.isPositive=xt.ispos=function(){return this.s>0};xt.isZero=function(){return this.s===0};xt.lessThan=xt.lt=function(e){return this.cmp(e)<0};xt.lessThanOrEqualTo=xt.lte=function(e){return this.cmp(e)<1};xt.logarithm=xt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(da))throw Error(La+"NaN");if(r.s<1)throw Error(La+(r.s?"NaN":"-Infinity"));return r.eq(da)?new n(0):(sn=!1,t=Xi(Md(r,a),Md(e,a),a),sn=!0,Wr(t,s))};xt.minus=xt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jO(t,e):wO(t,(e.s=-e.s,e))};xt.modulo=xt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(La+"NaN");return r.s?(sn=!1,t=Xi(r,e,0,1).times(e),sn=!0,r.minus(t)):Wr(new n(r),s)};xt.naturalExponential=xt.exp=function(){return bO(this)};xt.naturalLogarithm=xt.ln=function(){return Md(this)};xt.negated=xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};xt.plus=xt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wO(t,e):jO(t,(e.s=-e.s,e))};xt.precision=xt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ml+e);if(t=Bn(s)+1,n=s.d.length-1,r=n*Zr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};xt.squareRoot=xt.sqrt=function(){var e,t,r,n,s,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(La+"NaN")}for(e=Bn(u),sn=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Si(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=vu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(a=n,n=a.plus(Xi(u,a,l+2)).times(.5),Si(a.d).slice(0,l)===(t=Si(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Wr(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if(t!="9999")break;l+=4}return sn=!0,Wr(n,r)};xt.times=xt.mul=function(e){var t,r,n,s,a,l,u,d,m,f=this,p=f.constructor,v=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=v.length,m=x.length,d<m&&(a=v,v=x,x=a,l=d,d=m,m=l),a=[],l=d+m,n=l;n--;)a.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=a[s]+x[n]*v[s-n-1]+t,a[s--]=u%as|0,t=u/as|0;a[s]=(a[s]+t)%as|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,sn?Wr(e,p.precision):e};xt.toDecimalPlaces=xt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ai(e,0,yu),t===void 0?t=n.rounding:Ai(t,0,8),Wr(r,e+Bn(r)+1,t))};xt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Vl(n,!0):(Ai(e,0,yu),t===void 0?t=s.rounding:Ai(t,0,8),n=Wr(new s(n),e+1,t),r=Vl(n,!0,e+1)),r};xt.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Vl(s):(Ai(e,0,yu),t===void 0?t=a.rounding:Ai(t,0,8),n=Wr(new a(s),e+Bn(s)+1,t),r=Vl(n.abs(),!1,e+Bn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};xt.toInteger=xt.toint=function(){var e=this,t=e.constructor;return Wr(new t(e),Bn(e)+1,t.rounding)};xt.toNumber=function(){return+this};xt.toPower=xt.pow=function(e){var t,r,n,s,a,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(da);if(u=new d(u),!u.s){if(e.s<1)throw Error(La+"Infinity");return u}if(u.eq(da))return u;if(n=d.precision,e.eq(da))return Wr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,a=u.s,l){if((r=f<0?-f:f)<=xO){for(s=new d(da),t=Math.ceil(n/Zr+4),sn=!1;r%2&&(s=s.times(u),c2(s.d,t)),r=vu(r/2),r!==0;)u=u.times(u),c2(u.d,t);return sn=!0,e.s<0?new d(da).div(s):Wr(s,n)}}else if(a<0)throw Error(La+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,sn=!1,s=e.times(Md(u,n+m)),sn=!0,s=bO(s),s.s=a,s};xt.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Bn(s),n=Vl(s,r<=a.toExpNeg||r>=a.toExpPos)):(Ai(e,1,yu),t===void 0?t=a.rounding:Ai(t,0,8),s=Wr(new a(s),e,t),r=Bn(s),n=Vl(s,e<=r||r<=a.toExpNeg,e)),n};xt.toSignificantDigits=xt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ai(e,1,yu),t===void 0?t=n.rounding:Ai(t,0,8)),Wr(new n(r),e,t)};xt.toString=xt.valueOf=xt.val=xt.toJSON=xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Bn(e),r=e.constructor;return Vl(e,t<=r.toExpNeg||t>=r.toExpPos)};function wO(e,t){var r,n,s,a,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),sn?Wr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),a=l-s,a){for(a<0?(n=d,a=-a,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Zr),u=l>u?l+1:u+1,a>u&&(a=u,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,n=m,m=d,d=n),r=0;a;)r=(d[--a]=d[a]+m[a]+r)/as|0,d[a]%=as;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,sn?Wr(t,p):t}function Ai(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ml+e)}function Si(e){var t,r,n,s=e.length-1,a="",l=e[0];if(s>0){for(a+=l,t=1;t<s;t++)n=e[t]+"",r=Zr-n.length,r&&(a+=Wo(r)),a+=n;l=e[t],n=l+"",r=Zr-n.length,r&&(a+=Wo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var Xi=(function(){function e(n,s){var a,l=0,u=n.length;for(n=n.slice();u--;)a=n[u]*s+l,n[u]=a%as|0,l=a/as|0;return l&&n.unshift(l),n}function t(n,s,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,a){for(var l=0;a--;)n[a]-=l,l=n[a]<s[a]?1:0,n[a]=l*as+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,l){var u,d,m,f,p,v,x,w,j,b,_,C,N,T,A,P,M,F,Q=n.constructor,q=n.s==s.s?1:-1,ae=n.d,Y=s.d;if(!n.s)return new Q(n);if(!s.s)throw Error(La+"Division by zero");for(d=n.e-s.e,M=Y.length,A=ae.length,x=new Q(q),w=x.d=[],m=0;Y[m]==(ae[m]||0);)++m;if(Y[m]>(ae[m]||0)&&--d,a==null?C=a=Q.precision:l?C=a+(Bn(n)-Bn(s))+1:C=a,C<0)return new Q(0);if(C=C/Zr+2|0,m=0,M==1)for(f=0,Y=Y[0],C++;(m<A||f)&&C--;m++)N=f*as+(ae[m]||0),w[m]=N/Y|0,f=N%Y|0;else{for(f=as/(Y[0]+1)|0,f>1&&(Y=e(Y,f),ae=e(ae,f),M=Y.length,A=ae.length),T=M,j=ae.slice(0,M),b=j.length;b<M;)j[b++]=0;F=Y.slice(),F.unshift(0),P=Y[0],Y[1]>=as/2&&++P;do f=0,u=t(Y,j,M,b),u<0?(_=j[0],M!=b&&(_=_*as+(j[1]||0)),f=_/P|0,f>1?(f>=as&&(f=as-1),p=e(Y,f),v=p.length,b=j.length,u=t(p,j,v,b),u==1&&(f--,r(p,M<v?F:Y,v))):(f==0&&(u=f=1),p=Y.slice()),v=p.length,v<b&&p.unshift(0),r(j,p,b),u==-1&&(b=j.length,u=t(Y,j,M,b),u<1&&(f++,r(j,M<b?F:Y,b))),b=j.length):u===0&&(f++,j=[0]),w[m++]=f,u&&j[0]?j[b++]=ae[T]||0:(j=[ae[T]],b=1);while((T++<A||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=d,Wr(x,l?a+Bn(x)+1:a)}})();function bO(e,t){var r,n,s,a,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(Bn(e)>16)throw Error(zw+Bn(e));if(!e.s)return new f(da);for(sn=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(Nl(2,m))/Math.LN10*2+5|0,u+=n,r=s=a=new f(da),f.precision=u;;){if(s=Wr(s.times(e),u),r=r.times(++d),l=a.plus(Xi(s,r,u)),Si(l.d).slice(0,u)===Si(a.d).slice(0,u)){for(;m--;)a=Wr(a.times(a),u);return f.precision=p,t==null?(sn=!0,Wr(a,p)):a}a=l}}function Bn(e){for(var t=e.e*Zr,r=e.d[0];r>=10;r/=10)t++;return t}function M0(e,t,r){if(t>e.LN10.sd())throw sn=!0,r&&(e.precision=r),Error(La+"LN10 precision limit exceeded");return Wr(new e(e.LN10),t)}function Wo(e){for(var t="";e--;)t+="0";return t}function Md(e,t){var r,n,s,a,l,u,d,m,f,p=1,v=10,x=e,w=x.d,j=x.constructor,b=j.precision;if(x.s<1)throw Error(La+(x.s?"NaN":"-Infinity"));if(x.eq(da))return new j(0);if(t==null?(sn=!1,m=b):m=t,x.eq(10))return t==null&&(sn=!0),M0(j,m);if(m+=v,j.precision=m,r=Si(w),n=r.charAt(0),a=Bn(x),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Si(x.d),n=r.charAt(0),p++;a=Bn(x),n>1?(x=new j("0."+r),a++):x=new j(n+"."+r.slice(1))}else return d=M0(j,m+2,b).times(a+""),x=Md(new j(n+"."+r.slice(1)),m-v).plus(d),j.precision=b,t==null?(sn=!0,Wr(x,b)):x;for(u=l=x=Xi(x.minus(da),x.plus(da),m),f=Wr(x.times(x),m),s=3;;){if(l=Wr(l.times(f),m),d=u.plus(Xi(l,new j(s),m)),Si(d.d).slice(0,m)===Si(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(M0(j,m+2,b).times(a+""))),u=Xi(u,new j(p),m),j.precision=b,t==null?(sn=!0,Wr(u,b)):u;u=d,s+=2}}function l2(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=vu(r/Zr),e.d=[],n=(r+1)%Zr,r<0&&(n+=Zr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Zr;n<s;)e.d.push(+t.slice(n,n+=Zr));t=t.slice(n),n=Zr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),sn&&(e.e>bm||e.e<-bm))throw Error(zw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Wr(e,t,r){var n,s,a,l,u,d,m,f,p=e.d;for(l=1,a=p[0];a>=10;a/=10)l++;if(n=t-l,n<0)n+=Zr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Zr),a=p.length,f>=a)return e;for(m=a=p[f],l=1;a>=10;a/=10)l++;n%=Zr,s=n-Zr+l}if(r!==void 0&&(a=Nl(10,l-s-1),u=m/a%10|0,d=t<0||p[f+1]!==void 0||m%a,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/Nl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(a=Bn(e),p.length=1,t=t-a-1,p[0]=Nl(10,(Zr-t%Zr)%Zr),e.e=vu(-t/Zr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,a=1,f--):(p.length=f+1,a=Nl(10,Zr-n),p[f]=s>0?(m/Nl(10,l-s)%Nl(10,s)|0)*a:0),d)for(;;)if(f==0){(p[0]+=a)==as&&(p[0]=1,++e.e);break}else{if(p[f]+=a,p[f]!=as)break;p[f--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(sn&&(e.e>bm||e.e<-bm))throw Error(zw+Bn(e));return e}function jO(e,t){var r,n,s,a,l,u,d,m,f,p,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),sn?Wr(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Zr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(a=s;a&&d[--a]===0;)d[a]=as-1;--d[a],d[s]+=as}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,sn?Wr(t,x):t):new v(0)}function Vl(e,t,r){var n,s=Bn(e),a=Si(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Wo(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Wo(-s-1)+a,r&&(n=r-l)>0&&(a+=Wo(n))):s>=l?(a+=Wo(s+1-l),r&&(n=r-s-1)>0&&(a=a+"."+Wo(n))):((n=s+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(a+="."),a+=Wo(n))),e.s<0?"-"+a:a}function c2(e,t){if(e.length>t)return e.length=t,!0}function kO(e){var t,r,n;function s(a){var l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,a instanceof s){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ml+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return l2(l,a.toString())}else if(typeof a!="string")throw Error(Ml+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,cV.test(a))l2(l,a);else throw Error(Ml+a)}if(s.prototype=xt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=kO,s.config=s.set=uV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function uV(e){if(!e||typeof e!="object")throw Error(La+"Object expected");var t,r,n,s=["precision",1,yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(vu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ml+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ml+r+": "+n);return this}var Uw=kO(lV);da=new Uw(1);const Rr=Uw;var dV=e=>e,SO={},_O=e=>e===SO,u2=e=>function t(){return arguments.length===0||arguments.length===1&&_O(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},NO=(e,t)=>e===1?t:u2(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(l=>l!==SO).length;return a>=e?t(...n):NO(e-a,u2(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>_O(f)?u.shift():f);return t(...m,...u)}))}),xp=e=>NO(e.length,e),rx=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},fV=xp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),hV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return dV;var s=r.reverse(),a=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},nx=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),CO=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function EO(e){var t;return e===0?t=1:t=Math.floor(new Rr(e).abs().log(10).toNumber())+1,t}function AO(e,t,r){for(var n=new Rr(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}xp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});xp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});xp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var PO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},OO=(e,t,r)=>{if(e.lte(0))return new Rr(0);var n=EO(e.toNumber()),s=new Rr(10).pow(n),a=e.div(s),l=n!==1?.05:.1,u=new Rr(Math.ceil(a.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Rr(d.toNumber()):new Rr(Math.ceil(d.toNumber()))},mV=(e,t,r)=>{var n=new Rr(1),s=new Rr(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new Rr(10).pow(EO(e)-1),s=new Rr(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Rr(Math.floor(e)))}else e===0?s=new Rr(Math.floor((t-1)/2)):r||(s=new Rr(Math.floor(e)));var l=Math.floor((t-1)/2),u=hV(fV(d=>s.add(new Rr(d-l).mul(n)).toNumber()),rx);return u(0,t)},TO=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Rr(0),tickMin:new Rr(0),tickMax:new Rr(0)};var l=OO(new Rr(r).sub(t).div(n-1),s,a),u;t<=0&&r>=0?u=new Rr(0):(u=new Rr(t).add(r).div(2),u=u.sub(new Rr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Rr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?TO(t,r,n,s,a+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Rr(d).mul(l)),tickMax:u.add(new Rr(m).mul(l))})};function pV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[l,u]=PO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...rx(0,n-1).map(()=>1/0)]:[...rx(0,n-1).map(()=>-1/0),u];return t>r?nx(d):d}if(l===u)return mV(l,n,s);var{step:m,tickMin:f,tickMax:p}=TO(l,u,a,s,0),v=AO(f,p.add(new Rr(.1).mul(m)),m);return t>r?nx(v):v}function gV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=PO([r,n]);if(a===-1/0||l===1/0)return[r,n];if(a===l)return[a];var u=Math.max(t,2),d=OO(new Rr(l).sub(a).div(u-1),s,0),m=[...AO(new Rr(a),new Rr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?nx(m):m}var yV=CO(pV),vV=CO(gV),IO=e=>e.rootProps.maxBarSize,xV=e=>e.rootProps.barGap,DO=e=>e.rootProps.barCategoryGap,wV=e=>e.rootProps.barSize,wp=e=>e.rootProps.stackOffset,Bw=e=>e.options.chartName,Ww=e=>e.rootProps.syncId,$O=e=>e.rootProps.syncMethod,Vw=e=>e.options.eventEmitter,Zs={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},qi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ca={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},bV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:qi.angleAxisId,includeHidden:!1,name:void 0,reversed:qi.reversed,scale:qi.scale,tick:qi.tick,tickCount:void 0,ticks:void 0,type:qi.type,unit:void 0},jV={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:ca.type,unit:void 0},kV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:qi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:qi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:qi.scale,tick:qi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SV={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:"category",unit:void 0},qw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?kV:bV,Hw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?SV:jV,jp=e=>e.polarOptions,Kw=be([uo,fo,os],y7),RO=be([jp,Kw],(e,t)=>{if(e!=null)return si(e.innerRadius,t,0)}),MO=be([jp,Kw],(e,t)=>{if(e!=null)return si(e.outerRadius,t,t*.8)}),_V=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},FO=be([jp],_V);be([qw,FO],bp);var LO=be([Kw,RO,MO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});be([Hw,LO],bp);var zO=be([Fr,jp,RO,MO,uo,fo],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:si(l,s,s/2),cy:si(u,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Xn=(e,t)=>t,kp=(e,t,r)=>r;function Gw(e){return e==null?void 0:e.id}function UO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Gw(u);m.forEach((p,v)=>{var x=a==null||s?v:String(Ls(p,a,null)),w=Ls(p,u.dataKey,0),j;l.has(x)?j=l.get(x):j={},Object.assign(j,{[f]:w}),l.set(x,j)})}}),Array.from(l.values())}function Sp(e){return e.stackId!=null&&e.dataKey!=null}var _p=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Np(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function NV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Qn=e=>{var t=Fr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},xu=e=>e.tooltip.settings.axisId;function d2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(r),!0).forEach(function(n){CV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=AV(e,"string");return typeof t=="symbol"?t:t+""}function AV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sx=[0,"auto"],ia={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},BO=(e,t)=>e.cartesianAxis.xAxis[t],mo=(e,t)=>{var r=BO(e,t);return r??ia},oa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gd},WO=(e,t)=>e.cartesianAxis.yAxis[t],po=(e,t)=>{var r=WO(e,t);return r??oa},PV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Yw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??PV},zs=(e,t,r)=>{switch(t){case"xAxis":return mo(e,r);case"yAxis":return po(e,r);case"zAxis":return Yw(e,r);case"angleAxis":return qw(e,r);case"radiusAxis":return Hw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},OV=(e,t,r)=>{switch(t){case"xAxis":return mo(e,r);case"yAxis":return po(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Zd=(e,t,r)=>{switch(t){case"xAxis":return mo(e,r);case"yAxis":return po(e,r);case"angleAxis":return qw(e,r);case"radiusAxis":return Hw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},VO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function qO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Jw=e=>e.graphicalItems.cartesianItems,TV=be([Xn,kp],qO),HO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ef=be([Jw,zs,TV],HO,{memoizeOptions:{resultEqualityCheck:Np}}),KO=be([ef],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Sp)),GO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),IV=be([ef],GO),YO=e=>e.map(t=>t.data).filter(Boolean).flat(1),DV=be([ef],YO,{memoizeOptions:{resultEqualityCheck:Np}}),JO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Xw=be([DV,Lw],JO),XO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ls(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ls(s,n)}))):e.map(n=>({value:n})),Cp=be([Xw,zs,ef],XO);function QO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ph(e){if(Ei(e)||e instanceof Date){var t=Number(e);if(Cn(t))return t}}function f2(e){if(Array.isArray(e)){var t=[Ph(e[0]),Ph(e[1])];return Wl(t)?t:void 0}var r=Ph(e);if(r!=null)return[r,r]}function lo(e){return e.map(Ph).filter(tz)}function $V(e,t,r){return!r||typeof t!="number"||Ci(t)?[]:r.length?lo(r.flatMap(n=>{var s=Ls(e,n.dataKey),a,l;if(Array.isArray(s)?[a,l]=s:a=l=s,!(!Cn(a)||!Cn(l)))return[t-a,t+l]})):[]}var Zn=e=>{var t=Qn(e),r=xu(e);return Zd(e,t,r)},ZO=be([Zn],e=>e==null?void 0:e.dataKey),RV=be([KO,Lw,Zn],UO),e4=(e,t,r)=>{var n={},s=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=u.map(Gw);return[l,{stackedData:yU(e,d,r),graphicalItems:u}]}))},ax=be([RV,KO,wp],e4),t4=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var l=jU(e,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},MV=be([zs],e=>e.allowDataOverflow),Qw=e=>{var t;if(e==null||!("domain"in e))return sx;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lo(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:sx},r4=be([zs],Qw),n4=be([r4,MV],vO),FV=be([ax,al,Xn,n4],t4,{memoizeOptions:{resultEqualityCheck:_p}}),Zw=e=>e.errorBars,LV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>QO(r,n)),km=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},s4=(e,t,r,n,s)=>{var a,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>QO(s,_)),v=Ls(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=$V(u,v,p);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(a==null||w<a)&&(a=w),(l==null||j>l)&&(l=j)}var b=f2(v);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),l=l==null?b[1]:Math.max(l,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=f2(Ls(u,t.dataKey));d!=null&&(a=a==null?d[0]:Math.min(a,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),Cn(a)&&Cn(l))return[a,l]},zV=be([Xw,zs,IV,Zw,Xn],s4,{memoizeOptions:{resultEqualityCheck:_p}});function UV(e){var{value:t}=e;if(Ei(t)||t instanceof Date)return t}var BV=(e,t,r)=>{var n=e.map(UV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&PA(n))?MP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},a4=e=>e.referenceElements.dots,wu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),WV=be([a4,Xn,kp],wu),i4=e=>e.referenceElements.areas,VV=be([i4,Xn,kp],wu),o4=e=>e.referenceElements.lines,qV=be([o4,Xn,kp],wu),l4=(e,t)=>{var r=lo(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},HV=be(WV,Xn,l4),c4=(e,t)=>{var r=lo(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KV=be([VV,Xn],c4);function GV(e){var t;if(e.x!=null)return lo([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:lo(r)}function YV(e){var t;if(e.y!=null)return lo([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:lo(r)}var u4=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?GV(n):YV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},JV=be([qV,Xn],u4),XV=be(HV,JV,KV,(e,t,r)=>km(e,r,t)),d4=(e,t,r,n,s,a,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?km(n,a,s):km(a,s);return oV(t,m,e.allowDataOverflow)},QV=be([zs,r4,n4,FV,zV,XV,Fr,Xn],d4,{memoizeOptions:{resultEqualityCheck:_p}}),ZV=[0,1],f4=(e,t,r,n,s,a,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Xl(t,a);if(m&&u==null){var f;return MP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?BV(n,e,m):s==="expand"?ZV:l}},eb=be([zs,Fr,Xw,Cp,wp,Xn,QV],f4),h4=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(qd(a));return u in hd?u:"point"}}},tf=be([zs,Fr,VO,Bw,Xn],h4);function eq(e){if(e!=null){if(e in hd)return hd[e]();var t="scale".concat(qd(e));if(t in hd)return hd[t]()}}function tb(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=eq(t);if(s!=null){var a=s.domain(r).range(n);return fU(a),a}}}var m4=(e,t,r)=>{var n=Qw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wl(e))return yV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Wl(e))return vV(e,t.tickCount,t.allowDecimals)}},rb=be([eb,Zd,tf],m4),p4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Wl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,a),Math.max(l,u)]}return t},tq=be([zs,eb,rb,Xn],p4),rq=be(Cp,zs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lo(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a+1]-n[a];r=Math.min(r,l)}return r/s}}),g4=be(rq,Fr,DO,os,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!Cn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var l=si(r,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),nq=(e,t)=>{var r=mo(e,t);return r==null||typeof r.padding!="string"?0:g4(e,"xAxis",t,r.padding)},sq=(e,t)=>{var r=po(e,t);return r==null||typeof r.padding!="string"?0:g4(e,"yAxis",t,r.padding)},aq=be(mo,nq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),iq=be(po,sq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),oq=be([os,aq,cp,lp,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),lq=be([os,Fr,iq,cp,lp,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:l}=s;return a?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),rf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return oq(e,r,n);case"yAxis":return lq(e,r,n);case"zAxis":return(s=Yw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return FO(e);case"radiusAxis":return LO(e,r);default:return}},y4=be([zs,rf],bp),bu=be([zs,tf,tq,y4],tb);be([ef,Zw,Xn],LV);function v4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ep=(e,t)=>t,Ap=(e,t,r)=>r,cq=be(ip,Ep,Ap,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(v4)),uq=be(op,Ep,Ap,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(v4)),x4=(e,t)=>({width:e.width,height:t.height}),dq=(e,t)=>{var r=typeof t.width=="number"?t.width:Gd;return{width:r,height:e.height}},w4=be(os,mo,x4),fq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},hq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},mq=be(fo,os,cq,Ep,Ap,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=x4(t,u);l==null&&(l=fq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),pq=be(uo,os,uq,Ep,Ap,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=dq(t,u);l==null&&(l=hq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),gq=(e,t)=>{var r=mo(e,t);if(r!=null)return mq(e,r.orientation,r.mirror)},yq=be([os,mo,gq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),vq=(e,t)=>{var r=po(e,t);if(r!=null)return pq(e,r.orientation,r.mirror)},xq=be([os,po,vq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),b4=be(os,po,(e,t)=>{var r=typeof t.width=="number"?t.width:Gd;return{width:r,height:e.height}}),h2=(e,t,r)=>{switch(t){case"xAxis":return w4(e,r).width;case"yAxis":return b4(e,r).height;default:return}},j4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:l}=r,u=Xl(e,n),d=t.map(m=>m.value);if(l&&u&&a==="category"&&s&&PA(d))return d}},nb=be([Fr,Cp,zs,Xn],j4),k4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,l=Xl(e,n);if(l&&(s==="number"||a!=="auto"))return t.map(u=>u.value)}},sb=be([Fr,Cp,Zd,Xn],k4);be([Fr,OV,tf,bu,nb,sb,rf,rb,Xn],(e,t,r,n,s,a,l,u,d)=>{if(t!=null){var m=Xl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var wq=(e,t,r,n,s,a,l,u,d)=>{if(!(t==null||n==null)){var m=Xl(e,d),{type:f,ticks:p,tickCount:v}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=f==="category"&&n.bandwidth?n.bandwidth()/x:0;w=d==="angleAxis"&&a!=null&&a.length>=2?fa(a[0]-a[1])*2*w:w;var j=p||s;if(j){var b=j.map((_,C)=>{var N=l?l.indexOf(_):_;return{index:C,coordinate:n(N)+w,value:_,offset:w}});return b.filter(_=>Cn(_.coordinate))}return m&&u?u.map((_,C)=>({coordinate:n(_)+w,value:_,index:C,offset:w})).filter(_=>Cn(_.coordinate)):n.ticks?n.ticks(v).map(_=>({coordinate:n(_)+w,value:_,offset:w})):n.domain().map((_,C)=>({coordinate:n(_)+w,value:l?l[_]:_,index:C,offset:w}))}},S4=be([Fr,Zd,tf,bu,rb,rf,nb,sb,Xn],wq),bq=(e,t,r,n,s,a,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Xl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?fa(n[0]-n[1])*2*m:m,u&&a?a.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},ru=be([Fr,Zd,bu,rf,nb,sb,Xn],bq),nu=be(zs,bu,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})}),jq=be([zs,tf,eb,y4],tb);be((e,t,r)=>Yw(e,r),jq,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})});var kq=be([Fr,ip,op],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),_4=e=>e.options.defaultTooltipEventType,N4=e=>e.options.validateTooltipEventTypes;function C4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ab(e,t){var r=_4(e),n=N4(e);return C4(t,r,n)}function Sq(e){return zt(t=>ab(t,e))}var E4=(e,t)=>{var r,n=Number(t);if(!(Ci(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},_q=e=>e.tooltip.settings,Go={active:!1,index:null,dataKey:void 0,coordinate:void 0},Nq={itemInteraction:{click:Go,hover:Go},axisInteraction:{click:Go,hover:Go},keyboardInteraction:Go,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},A4=ea({name:"tooltip",initialState:Nq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Yn()},removeTooltipEntrySettings:{reducer(e,t){var r=Ji(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Yn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Cq,removeTooltipEntrySettings:Eq,setTooltipSettingsState:Aq,setActiveMouseOverItemIndex:P4,mouseLeaveItem:Pq,mouseLeaveChart:O4,setActiveClickItemIndex:Oq,setMouseOverAxisIndex:T4,setMouseClickAxisIndex:Tq,setSyncInteraction:ix,setKeyboardInteraction:ox}=A4.actions,Iq=A4.reducer;function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){Dq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dq(e,t,r){return(t=$q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $q(e){var t=Rq(e,"string");return typeof t=="symbol"?t:t+""}function Rq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Fq(e){return e.index!=null}var I4=(e,t,r,n)=>{if(t==null)return Go;var s=Mq(e,t,r);if(s==null)return Go;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Fq(s)){if(a)return wh(wh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return wh(wh({},Go),{},{coordinate:s.coordinate})},ib=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Cn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},D4=(e,t,r,n,s,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var f=s==null?void 0:s[Number(a)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},$4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===s})},nf=e=>e.options.tooltipPayloadSearcher,ju=e=>e.tooltip;function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){Lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t,r){return(t=zq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zq(e){var t=Uq(e,"string");return typeof t=="symbol"?t:t+""}function Uq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bq(e,t){return e??t}var R4=(e,t,r,n,s,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((v,x)=>{var w,{dataDefinedOnItem:j,settings:b}=x,_=Bq(j,u),C=Array.isArray(_)?xP(_,m,f):_,N=(w=b==null?void 0:b.dataKey)!==null&&w!==void 0?w:n,T=b==null?void 0:b.nameKey,A;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&l==="axis"?A=ez(C,n,s):A=a(C,t,d,T),Array.isArray(A))A.forEach(M=>{var F=g2(g2({},b),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(V_({tooltipEntrySettings:F,dataKey:M.dataKey,payload:M.payload,value:Ls(M.payload,M.dataKey),name:M.name}))});else{var P;v.push(V_({tooltipEntrySettings:b,dataKey:N,payload:A,value:Ls(A,N),name:(P=Ls(A,T))!==null&&P!==void 0?P:b==null?void 0:b.name}))}return v},p)}},ob=be([Zn,Fr,VO,Bw,Qn],h4),Wq=be([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Vq=be([Qn,xu],qO),sf=be([Wq,Zn,Vq],HO,{memoizeOptions:{resultEqualityCheck:Np}}),qq=be([sf],e=>e.filter(Sp)),Hq=be([sf],YO,{memoizeOptions:{resultEqualityCheck:Np}}),ku=be([Hq,al],JO),Kq=be([qq,al,Zn],UO),lb=be([ku,Zn,sf],XO),M4=be([Zn],Qw),Gq=be([Zn],e=>e.allowDataOverflow),F4=be([M4,Gq],vO),Yq=be([sf],e=>e.filter(Sp)),Jq=be([Kq,Yq,wp],e4),Xq=be([Jq,al,Qn,F4],t4),Qq=be([sf],GO),Zq=be([ku,Zn,Qq,Zw,Qn],s4,{memoizeOptions:{resultEqualityCheck:_p}}),eH=be([a4,Qn,xu],wu),tH=be([eH,Qn],l4),rH=be([i4,Qn,xu],wu),nH=be([rH,Qn],c4),sH=be([o4,Qn,xu],wu),aH=be([sH,Qn],u4),iH=be([tH,aH,nH],km),oH=be([Zn,M4,F4,Xq,Zq,iH,Fr,Qn],d4),L4=be([Zn,Fr,ku,lb,wp,Qn,oH],f4),lH=be([L4,Zn,ob],m4),cH=be([Zn,L4,lH,Qn],p4),z4=e=>{var t=Qn(e),r=xu(e),n=!1;return rf(e,t,r,n)},U4=be([Zn,z4],bp),B4=be([Zn,ob,cH,U4],tb),uH=be([Fr,lb,Zn,Qn],j4),dH=be([Fr,lb,Zn,Qn],k4),fH=(e,t,r,n,s,a,l,u)=>{if(t){var{type:d}=t,m=Xl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?fa(s[0]-s[1])*2*p:p,m&&l?l.map((v,x)=>({coordinate:n(v)+p,value:v,index:x,offset:p})):n.domain().map((v,x)=>({coordinate:n(v)+p,value:a?a[v]:v,index:x,offset:p}))}}},go=be([Fr,Zn,ob,B4,z4,uH,dH,Qn],fH),cb=be([_4,N4,_q],(e,t,r)=>C4(r.shared,e,t)),W4=e=>e.tooltip.settings.trigger,ub=e=>e.tooltip.settings.defaultIndex,Pp=be([ju,cb,W4,ub],I4),su=be([Pp,ku],ib),V4=be([go,su],E4),q4=be([Pp],e=>{if(e)return e.dataKey}),H4=be([ju,cb,W4,ub],$4),hH=be([uo,fo,Fr,os,go,ub,H4,nf],D4),mH=be([Pp,hH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),pH=be([Pp],e=>e.active),gH=be([H4,su,al,ZO,V4,nf,cb],R4);be([gH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){yH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yH(e,t,r){return(t=vH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wH=()=>zt(Zn),bH=()=>{var e=wH(),t=zt(go),r=zt(B4);return im(!e||!r?void 0:v2(v2({},e),{},{scale:r}),t)};function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x2(Object(r),!0).forEach(function(n){jH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jH(e,t,r){return(t=kH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _H=(e,t,r,n)=>{var s=t.find(a=>a&&a.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},NH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var a=s.coordinate,{radius:l}=n;return $c($c($c({},n),bs(n.cx,n.cy,l,a)),{},{angle:a,radius:l})}var u=s.coordinate,{angle:d}=n;return $c($c($c({},n),bs(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function CH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var K4=(e,t,r,n,s)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,v=void 0;if(fa(f-m)!==fa(p-f)){var x=[];if(fa(p-f)===fa(s[1]-s[0])){v=p;var w=f+s[1]-s[0];x[0]=Math.min(w,(w+m)/2),x[1]=Math.max(w,(w+m)/2)}else{v=m;var j=p+s[1]-s[0];x[0]=Math.min(f,(j+f)/2),x[1]=Math.max(f,(j+f)/2)}var b=[Math.min(f,(v+f)/2),Math.max(f,(v+f)/2)];if(e>b[0]&&e<=b[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),C=Math.max(m,p);if(e>(_+f)/2&&e<=(C+f)/2){({index:l}=r[d]);break}}}else if(t){for(var N=0;N<u;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},EH=()=>zt(Bw),db=(e,t)=>t,G4=(e,t,r)=>r,fb=(e,t,r,n)=>n,AH=be(go,e=>ep(e,t=>t.coordinate)),hb=be([ju,db,G4,fb],I4),Y4=be([hb,ku],ib),PH=(e,t,r)=>{if(t!=null){var n=ju(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},J4=be([ju,db,G4,fb],$4),Sm=be([uo,fo,Fr,os,go,fb,J4,nf],D4),OH=be([hb,Sm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),X4=be([go,Y4],E4),TH=be([J4,Y4,al,ZO,X4,nf,db],R4),IH=be([hb],e=>({isActive:e.active,activeIndex:e.index})),DH=(e,t,r,n,s,a,l)=>{if(!(!e||!r||!n||!s)&&CH(e,l)){var u=kU(e,t),d=K4(u,a,s,r,n),m=_H(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},$H=(e,t,r,n,s,a,l)=>{if(!(!e||!n||!s||!a||!r)){var u=j7(e,r);if(u){var d=SU(u,t),m=K4(d,l,a,n,s),f=NH(t,a,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},RH=(e,t,r,n,s,a,l,u)=>{if(!(!e||!t||!n||!s||!a))return t==="horizontal"||t==="vertical"?DH(e,t,n,s,a,l,u):$H(e,t,r,n,s,a,l)},MH=be(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),FH=be(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Zs)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:NV}});function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){LH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LH(e,t,r){return(t=zH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){var t=UH(e,"string");return typeof t=="symbol"?t:t+""}function UH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BH={},WH={zIndexMap:Object.values(Zs).reduce((e,t)=>b2(b2({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),BH)},VH=new Set(Object.values(Zs));function qH(e){return VH.has(e)}var Q4=ea({name:"zIndex",initialState:WH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Yn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!qH(r)&&delete e.zIndexMap[r])},prepare:Yn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Yn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Yn()}}}),{registerZIndexPortal:HH,unregisterZIndexPortal:KH,registerZIndexPortalId:GH,unregisterZIndexPortalId:YH}=Q4.actions,JH=Q4.reducer;function il(e){var{zIndex:t,children:r}=e,n=iB(),s=n&&t!==void 0&&t!==0,a=ya(),l=En();y.useLayoutEffect(()=>s?(l(HH({zIndex:t})),()=>{l(KH({zIndex:t}))}):mu,[l,t,s]);var u=zt(m=>MH(m,t,a));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?JC.createPortal(r,d):null}function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lx.apply(null,arguments)}function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){XH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XH(e,t,r){return(t=QH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function tK(e){var t,{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,v=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var w,j,b;if(f==="ScatterChart")w=p,j=MB,b=Zs.cursorLine;else if(f==="BarChart")w=FB(u,p,a,l),j=IP,b=Zs.cursorRectangle;else if(u==="radial"&&IA(p)){var{cx:_,cy:C,radius:N,startAngle:T,endAngle:A}=DP(p);w={cx:_,cy:C,startAngle:T,endAngle:A,innerRadius:N,outerRadius:N},j=RP,b=Zs.cursorLine}else w={points:N7(u,p,a)},j=EP,b=Zs.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,M=bh(bh(bh(bh({stroke:"#ccc",pointerEvents:"none"},a),w),Xx(d)),{},{payload:v,payloadIndex:x,className:tn("recharts-tooltip-cursor",P)});return y.createElement(il,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},y.createElement(eK,{cursor:d,cursorComp:j,cursorProps:M}))}function rK(e){var t=bH(),r=nB(),n=dp(),s=EH();return t==null||r==null||n==null||s==null?null:y.createElement(tK,lx({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var Z4=y.createContext(null),nK=()=>y.useContext(Z4),F0={exports:{}},k2;function sK(){return k2||(k2=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function a(d,m,f,p,v){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,v),w=r?r+m:m;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],x]:d._events[w].push(x):(d._events[w]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,x=p.length,w=new Array(x);v<x;v++)w[v]=p[v].fn;return w},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,v,x,w){var j=r?r+m:m;if(!this._events[j])return!1;var b=this._events[j],_=arguments.length,C,N;if(b.fn){switch(b.once&&this.removeListener(m,b.fn,void 0,!0),_){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,p),!0;case 4:return b.fn.call(b.context,f,p,v),!0;case 5:return b.fn.call(b.context,f,p,v,x),!0;case 6:return b.fn.call(b.context,f,p,v,x,w),!0}for(N=1,C=new Array(_-1);N<_;N++)C[N-1]=arguments[N];b.fn.apply(b.context,C)}else{var T=b.length,A;for(N=0;N<T;N++)switch(b[N].once&&this.removeListener(m,b[N].fn,void 0,!0),_){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,f);break;case 3:b[N].fn.call(b[N].context,f,p);break;case 4:b[N].fn.call(b[N].context,f,p,v);break;default:if(!C)for(A=1,C=new Array(_-1);A<_;A++)C[A-1]=arguments[A];b[N].fn.apply(b[N].context,C)}}return!0},u.prototype.on=function(m,f,p){return a(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return a(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,v){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var w=this._events[x];if(w.fn)w.fn===f&&(!v||w.once)&&(!p||w.context===p)&&l(this,x);else{for(var j=0,b=[],_=w.length;j<_;j++)(w[j].fn!==f||v&&!w[j].once||p&&w[j].context!==p)&&b.push(w[j]);b.length?this._events[x]=b.length===1?b[0]:b:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(F0)),F0.exports}var aK=sK();const iK=ai(aK);var Fd=new iK,cx="recharts.syncEvent.tooltip",S2="recharts.syncEvent.brush";function oK(e,t){if(t){var r=Number.parseInt(t,10);if(!Ci(r))return e==null?void 0:e[r]}}var lK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},eT=ea({name:"options",initialState:lK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cK=eT.reducer,{createEventEmitter:uK}=eT.actions;function dK(e){return e.tooltip.syncInteraction}var fK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},tT=ea({name:"chartData",initialState:fK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:_2,setDataStartEndIndexes:hK,setComputedData:Eee}=tT.actions,mK=tT.reducer,pK=["x","y"];function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){gK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gK(e,t,r){return(t=yK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=vK(e,"string");return typeof t=="symbol"?t:t+""}function vK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xK(e,t){if(e==null)return{};var r,n,s=wK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bK(){var e=zt(Ww),t=zt(Vw),r=En(),n=zt($O),s=zt(go),a=dp(),l=up(),u=zt(d=>d.rootProps.className);y.useEffect(()=>{if(e==null)return mu;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var v;if(l&&f!==null&&f!==void 0&&(v=f.payload)!==null&&v!==void 0&&v.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:w,y:j}=x,b=xK(x,pK),{x:_,y:C,width:N,height:T}=f.payload.sourceViewBox,A=Rc(Rc({},b),{},{x:l.x+(N?(w-_)/N:0)*l.width,y:l.y+(T?(j-C)/T:0)*l.height});r(Rc(Rc({},f),{},{payload:Rc(Rc({},f.payload),{},{coordinate:A})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var M={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},F=n(s,M);P=s[F]}else n==="value"&&(P=s.find(ge=>String(ge.value)===f.payload.label));var{coordinate:Q}=f.payload;if(P==null||f.payload.active===!1||Q==null||l==null){r(ix({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:q,y:ae}=Q,Y=Math.min(q,l.x+l.width),oe=Math.min(ae,l.y+l.height),V={x:a==="horizontal"?P.coordinate:Y,y:a==="horizontal"?oe:P.coordinate},K=ix({active:f.payload.active,coordinate:V,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(K)}}};return Fd.on(cx,d),()=>{Fd.off(cx,d)}},[u,r,t,e,n,s,a,l])}function jK(){var e=zt(Ww),t=zt(Vw),r=En();y.useEffect(()=>{if(e==null)return mu;var n=(s,a,l)=>{t!==l&&e===s&&r(hK(a))};return Fd.on(S2,n),()=>{Fd.off(S2,n)}},[r,t,e])}function kK(){var e=En();y.useEffect(()=>{e(uK())},[e]),bK(),jK()}function SK(e,t,r,n,s,a){var l=zt(x=>PH(x,e,t)),u=zt(Vw),d=zt(Ww),m=zt($O),f=zt(dK),p=f==null?void 0:f.active,v=up();y.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=ix({active:a,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:v});Fd.emit(cx,d,x,u)}},[p,r,l,s,n,u,d,m,a,v])}function C2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C2(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EK(e){return e.dataKey}function AK(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(pB,t)}var A2=[],PK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!pu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function OK(e){var t,r,n=Ua(e,PK),{active:s,allowEscapeViewBox:a,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:v,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:b,cursor:_,shared:C,trigger:N,defaultIndex:T,portal:A,axisId:P}=n,M=En(),F=typeof T=="number"?String(T):T;y.useEffect(()=>{M(Aq({shared:C,trigger:N,axisId:P,active:s,defaultIndex:F}))},[M,C,N,P,s,F]);var Q=up(),q=CP(),ae=Sq(C),{activeIndex:Y,isActive:oe}=(t=zt(Ie=>IH(Ie,ae,N,F)))!==null&&t!==void 0?t:{},V=zt(Ie=>TH(Ie,ae,N,F)),K=zt(Ie=>X4(Ie,ae,N,F)),ge=zt(Ie=>OH(Ie,ae,N,F)),$=V,G=nK(),ce=(r=s??oe)!==null&&r!==void 0?r:!1,[le,U]=d8([$,ce]),ee=ae==="axis"?K:void 0;SK(ae,N,ge,ee,Y,ce);var ue=A??G;if(ue==null||Q==null||ae==null)return null;var $e=$??A2;ce||($e=A2),m&&$e.length&&($e=Mz($e.filter(Ie=>Ie.value!=null&&(Ie.hide!==!0||n.includeHidden)),v,EK));var Oe=$e.length>0,_e=y.createElement(jB,{allowEscapeViewBox:a,animationDuration:l,animationEasing:u,isAnimationActive:f,active:ce,coordinate:ge,hasPayload:Oe,offset:p,position:x,reverseDirection:w,useTranslate3d:j,viewBox:Q,wrapperStyle:b,lastBoundingBox:le,innerRef:U,hasPortalFromProps:!!A},AK(d,E2(E2({},n),{},{payload:$e,label:ee,active:ce,activeIndex:Y,coordinate:ge,accessibilityLayer:q})));return y.createElement(y.Fragment,null,JC.createPortal(_e,ue),ce&&y.createElement(rK,{cursor:_,tooltipEventType:ae,coordinate:ge,payload:$e,index:Y}))}var mb=e=>null;mb.displayName="Cell";function TK(e,t,r){return(t=IK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $K{constructor(t){TK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){MK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MK(e,t,r){return(t=FK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FK(e){var t=LK(e,"string");return typeof t=="symbol"?t:t+""}function LK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zK={cacheSize:2e3,enableCache:!0},rT=RK({},zK),O2=new $K(rT.cacheSize),UK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},T2="recharts_measurement_span";function BK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u)}var I2=(e,t)=>{try{var r=document.getElementById(T2);r||(r=document.createElement("span"),r.setAttribute("id",T2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,UK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||pu.isSsr)return{width:0,height:0};if(!rT.enableCache)return I2(t,r);var n=BK(t,r),s=O2.get(n);if(s)return s;var a=I2(t,r);return O2.set(n,a),a},D2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qK=Object.keys(nT),Wc="NaN";function HK(e,t){return e*nT[t]}class Ys{static parse(t){var r,[,n,s]=(r=VK.exec(t))!==null&&r!==void 0?r:[];return new Ys(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ci(t)&&(this.unit=""),r!==""&&!WK.test(r)&&(this.num=NaN,this.unit=""),qK.includes(r)&&(this.num=HK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ys(NaN,""):new Ys(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ys(NaN,""):new Ys(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ys(NaN,""):new Ys(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ys(NaN,""):new Ys(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ci(this.num)}}function sT(e){if(e.includes(Wc))return Wc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=D2.exec(t))!==null&&r!==void 0?r:[],l=Ys.parse(n??""),u=Ys.parse(a??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Wc;t=t.replace(D2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,v]=(m=$2.exec(t))!==null&&m!==void 0?m:[],x=Ys.parse(f??""),w=Ys.parse(v??""),j=p==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Wc;t=t.replace($2,j.toString())}return t}var R2=/\(([^()]*)\)/;function KK(e){for(var t=e,r;(r=R2.exec(t))!=null;){var[,n]=r;t=t.replace(R2,sT(n))}return t}function GK(e){var t=e.replace(/\s+/g,"");return t=KK(t),t=sT(t),t}function YK(e){try{return GK(e)}catch{return Wc}}function L0(e){var t=YK(e.slice(5,-1));return t===Wc?"":t}var JK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],XK=["dx","dy","angle","className","breakAll"];function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ux.apply(null,arguments)}function M2(e,t){if(e==null)return{};var r,n,s=QK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aT=/[ \f\n\r\t\v\u2028\u2029]+/,iT=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];is(t)||(r?s=t.toString().split(""):s=t.toString().split(aT));var a=s.map(u=>({word:u,width:bd(u,n).width})),l=r?0:bd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function ZK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var oT=(e,t,r,n)=>e.reduce((s,a)=>{var{word:l,width:u}=a,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),lT=e=>e.reduce((t,r)=>t.width>r.width?t:r),eG="",F2=(e,t,r,n,s,a,l,u)=>{var d=e.slice(0,t),m=iT({breakAll:r,style:n,children:d+eG});if(!m)return[!1,[]];var f=oT(m.wordsWithComputedWidth,a,l,u),p=f.length>s||lT(f).width>Number(a);return[p,f]},tG=(e,t,r,n,s)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=qt(a),f=String(l),p=oT(t,n,r,s);if(!m||s)return p;var v=p.length>a||lT(p).width>Number(n);if(!v)return p;for(var x=0,w=f.length-1,j=0,b;x<=w&&j<=f.length-1;){var _=Math.floor((x+w)/2),C=_-1,[N,T]=F2(f,C,d,u,a,n,r,s),[A]=F2(f,_,d,u,a,n,r,s);if(!N&&!A&&(x=_+1),N&&A&&(w=_-1),!N&&A){b=T;break}j++}return b||p},L2=e=>{var t=is(e)?[]:e.toString().split(aT);return[{words:t,width:void 0}]},rG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:l}=e;if((t||r)&&!pu.isSsr){var u,d,m=iT({breakAll:a,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return L2(n);return tG({breakAll:a,children:n,maxLines:l,style:s},u,d,t,!!r)}return L2(n)},cT="#808080",nG={breakAll:!1,capHeight:"0.71em",fill:cT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},pb=y.forwardRef((e,t)=>{var r=Ua(e,nG),{x:n,y:s,lineHeight:a,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=M2(r,JK),v=y.useMemo(()=>rG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:w,angle:j,className:b,breakAll:_}=p,C=M2(p,XK);if(!Ei(n)||!Ei(s)||v.length===0)return null;var N=Number(n)+(qt(x)?x:0),T=Number(s)+(qt(w)?w:0);if(!Cn(N)||!Cn(T))return null;var A;switch(f){case"start":A=L0("calc(".concat(l,")"));break;case"middle":A=L0("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:A=L0("calc(".concat(v.length-1," * -").concat(a,")"));break}var P=[];if(d){var M=v[0].width,{width:F}=p;P.push("scale(".concat(qt(F)&&qt(M)?F/M:1,")"))}return j&&P.push("rotate(".concat(j,", ").concat(N,", ").concat(T,")")),P.length&&(C.transform=P.join(" ")),y.createElement("text",ux({},Ma(C),{ref:t,x:N,y:T,className:tn("recharts-text",b),textAnchor:m,fill:u.includes("url")?cT:u}),v.map((Q,q)=>{var ae=Q.words.join(_?"":" ");return y.createElement("tspan",{x:N,dy:q===0?A:a,key:"".concat(ae,"-").concat(q)},ae)}))});pb.displayName="Text";var sG=["labelRef"];function aG(e,t){if(e==null)return{};var r,n,s=iG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(r),!0).forEach(function(n){oG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oG(e,t,r){return(t=lG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lG(e){var t=cG(e,"string");return typeof t=="symbol"?t:t+""}function cG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hi.apply(null,arguments)}var uT=y.createContext(null),uG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l,children:u}=e,d=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l}),[t,r,n,s,a,l]);return y.createElement(uT.Provider,{value:d},u)},dT=()=>{var e=y.useContext(uT),t=up();return e||_P(t)},dG=y.createContext(null),fG=()=>{var e=y.useContext(dG),t=zt(zO);return e||t},hG=e=>{var{value:t,formatter:r}=e,n=is(e.children)?t:e.children;return typeof r=="function"?r(n):n},gb=e=>e!=null&&typeof e=="function",mG=(e,t)=>{var r=fa(t-e),n=Math.min(Math.abs(t-e),360);return r*n},pG=(e,t,r,n,s)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:v,clockWise:x}=s,w=(m+f)/2,j=mG(p,v),b=j>=0?1:-1,_,C;switch(t){case"insideStart":_=p+b*a,C=x;break;case"insideEnd":_=v-b*a,C=!x;break;case"end":_=v+b*a,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var N=bs(u,d,w,_),T=bs(u,d,w,_+(C?1:-1)*359),A="M".concat(N.x,",").concat(N.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(T.x,",").concat(T.y),P=is(e.id)?Ed("recharts-radial-line-"):e.id;return y.createElement("text",Hi({},n,{dominantBaseline:"central",className:tn("recharts-radial-bar-label",l)}),y.createElement("defs",null,y.createElement("path",{id:P,d:A})),y.createElement("textPath",{xlinkHref:"#".concat(P)},r))},gG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=bs(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(a+l)/2,{x,y:w}=bs(n,s,v,m);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},dx=e=>"cx"in e&&qt(e.cx),yG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!dx(r)&&(a=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,v=l+(d-m)/2,x=(p+v)/2,w=(d+m)/2,j=p+d/2,b=f>=0?1:-1,_=b*n,C=b>0?"end":"start",N=b>0?"start":"end",T=d>=0?1:-1,A=T*n,P=T>0?"end":"start",M=T>0?"start":"end";if(s==="top"){var F={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:C};return jn(jn({},F),a?{height:Math.max(u-a.y,0),width:d}:{})}if(s==="bottom"){var Q={x:v+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:N};return jn(jn({},Q),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(s==="left"){var q={x:x-A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return jn(jn({},q),a?{width:Math.max(q.x-a.x,0),height:f}:{})}if(s==="right"){var ae={x:x+w+A,y:u+f/2,textAnchor:M,verticalAnchor:"middle"};return jn(jn({},ae),a?{width:Math.max(a.x+a.width-ae.x,0),height:f}:{})}var Y=a?{width:w,height:f}:{};return s==="insideLeft"?jn({x:x+A,y:u+f/2,textAnchor:M,verticalAnchor:"middle"},Y):s==="insideRight"?jn({x:x+w-A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},Y):s==="insideTop"?jn({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:N},Y):s==="insideBottom"?jn({x:v+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:C},Y):s==="insideTopLeft"?jn({x:p+A,y:u+_,textAnchor:M,verticalAnchor:N},Y):s==="insideTopRight"?jn({x:p+d-A,y:u+_,textAnchor:P,verticalAnchor:N},Y):s==="insideBottomLeft"?jn({x:v+A,y:u+f-_,textAnchor:M,verticalAnchor:C},Y):s==="insideBottomRight"?jn({x:v+m-A,y:u+f-_,textAnchor:P,verticalAnchor:C},Y):s&&typeof s=="object"&&(qt(s.x)||no(s.x))&&(qt(s.y)||no(s.y))?jn({x:l+si(s.x,w),y:u+si(s.y,f),textAnchor:"end",verticalAnchor:"end"},Y):jn({x:j,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},Y)},vG={offset:5,zIndex:Zs.label};function Vo(e){var t=Ua(e,vG),{viewBox:r,position:n,value:s,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=fG(),p=dT(),v=n==="center"?p:f??p,x,w,j;if(r==null?x=v:dx(r)?x=r:x=_P(r),!x||is(s)&&is(a)&&!y.isValidElement(l)&&typeof l!="function")return null;var b=jn(jn({},t),{},{viewBox:x});if(y.isValidElement(l)){var{labelRef:_}=b,C=aG(b,sG);return y.cloneElement(l,C)}if(typeof l=="function"){if(w=y.createElement(l,b),y.isValidElement(w))return w}else w=hG(t);var N=Ma(t);if(dx(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return pG(t,n,w,N,x);j=gG(x,t.offset,t.position)}else j=yG(t,x);return y.createElement(il,{zIndex:t.zIndex},y.createElement(pb,Hi({ref:m,className:tn("recharts-label",u)},N,j,{textAnchor:ZK(N.textAnchor)?N.textAnchor:j.textAnchor,breakAll:d}),w))}Vo.displayName="Label";var xG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Vo,Hi({key:"label-implicit"},n)):Ei(e)?y.createElement(Vo,Hi({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Vo?y.cloneElement(e,jn({key:"label-implicit"},n)):y.createElement(Vo,Hi({key:"label-implicit",content:e},n)):gb(e)?y.createElement(Vo,Hi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Vo,Hi({},e,{key:"label-implicit"},n)):null};function wG(e){var{label:t,labelRef:r}=e,n=dT();return xG(t,n,r)||null}var z0={},U0={},U2;function bG(){return U2||(U2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(U0)),U0}var B0={},B2;function jG(){return B2||(B2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(B0)),B0}var W2;function kG(){return W2||(W2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bG(),r=jG(),n=aw();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(z0)),z0}var W0,V2;function SG(){return V2||(V2=1,W0=kG().last),W0}var _G=SG();const NG=ai(_G);var CG=["valueAccessor"],EG=["dataKey","clockWise","id","textBreakAll","zIndex"];function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_m.apply(null,arguments)}function q2(e,t){if(e==null)return{};var r,n,s=AG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PG=e=>Array.isArray(e.value)?NG(e.value):e.value,fT=y.createContext(void 0),OG=fT.Provider,hT=y.createContext(void 0);hT.Provider;function TG(){return y.useContext(fT)}function IG(){return y.useContext(hT)}function Oh(e){var{valueAccessor:t=PG}=e,r=q2(e,CG),{dataKey:n,clockWise:s,id:a,textBreakAll:l,zIndex:u}=r,d=q2(r,EG),m=TG(),f=IG(),p=m||f;return!p||!p.length?null:y.createElement(il,{zIndex:u??Zs.label},y.createElement(ro,{className:"recharts-label-list"},p.map((v,x)=>{var w,j=is(n)?t(v,x):Ls(v&&v.payload,n),b=is(a)?{}:{id:"".concat(a,"-").concat(x)};return y.createElement(Vo,_m({key:"label-".concat(x)},Ma(v),d,b,{fill:(w=r.fill)!==null&&w!==void 0?w:v.fill,parentViewBox:v.parentViewBox,value:j,textBreakAll:l,viewBox:v.viewBox,index:x,zIndex:0}))})))}Oh.displayName="LabelList";function DG(e){var{label:t}=e;return t?t===!0?y.createElement(Oh,{key:"labelList-implicit"}):y.isValidElement(t)||gb(t)?y.createElement(Oh,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(Oh,_m({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var $G={radiusAxis:{},angleAxis:{}},mT=ea({name:"polarAxis",initialState:$G,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Aee,removeRadiusAxis:Pee,addAngleAxis:Oee,removeAngleAxis:Tee}=mT.actions,RG=mT.reducer,V0={exports:{}},zr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function MG(){if(H2)return zr;H2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var b=j.$$typeof;switch(b){case e:switch(j=j.type,j){case r:case s:case n:case d:case m:case v:return j;default:switch(j=j&&j.$$typeof,j){case l:case u:case p:case f:return j;case a:return j;default:return b}}case t:return b}}}return zr.ContextConsumer=a,zr.ContextProvider=l,zr.Element=e,zr.ForwardRef=u,zr.Fragment=r,zr.Lazy=p,zr.Memo=f,zr.Portal=t,zr.Profiler=s,zr.StrictMode=n,zr.Suspense=d,zr.SuspenseList=m,zr.isContextConsumer=function(j){return w(j)===a},zr.isContextProvider=function(j){return w(j)===l},zr.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},zr.isForwardRef=function(j){return w(j)===u},zr.isFragment=function(j){return w(j)===r},zr.isLazy=function(j){return w(j)===p},zr.isMemo=function(j){return w(j)===f},zr.isPortal=function(j){return w(j)===t},zr.isProfiler=function(j){return w(j)===s},zr.isStrictMode=function(j){return w(j)===n},zr.isSuspense=function(j){return w(j)===d},zr.isSuspenseList=function(j){return w(j)===m},zr.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===s||j===n||j===d||j===m||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===f||j.$$typeof===l||j.$$typeof===a||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},zr.typeOf=w,zr}var K2;function FG(){return K2||(K2=1,V0.exports=MG()),V0.exports}var LG=FG(),G2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Y2=null,q0=null,pT=e=>{if(e===Y2&&Array.isArray(q0))return q0;var t=[];return y.Children.forEach(e,r=>{is(r)||(LG.isFragment(r)?t=t.concat(pT(r.props.children)):t.push(r))}),q0=t,Y2=e,t};function zG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>G2(s)):n=[G2(t)],pT(e).forEach(s=>{var a=Qc(s,"type.displayName")||Qc(s,"type.name");a&&n.indexOf(a)!==-1&&r.push(s)}),r}var H0={},J2;function UG(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(H0)),H0}var K0,X2;function BG(){return X2||(X2=1,K0=UG().isPlainObject),K0}var WG=BG();const VG=ai(WG);function Q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(r),!0).forEach(function(n){qG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qG(e,t,r){return(t=HG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HG(e){var t=KG(e,"string");return typeof t=="symbol"?t:t+""}function KG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(null,arguments)}var eC=(e,t,r,n,s)=>{var a=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-a/2,",").concat(t+s),l+="L ".concat(e+r-a/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},GG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YG=e=>{var t=Ua(e,GG),{x:r,y:n,upperWidth:s,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,v=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(s),b=y.useRef(a),_=y.useRef(l),C=y.useRef(r),N=y.useRef(n),T=pw(e,"trapezoid-");if(y.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var V=v.current.getTotalLength();V&&w(V)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||l!==+l||s===0&&a===0||l===0)return null;var A=tn("recharts-trapezoid",u);if(!p)return y.createElement("g",null,y.createElement("path",Nm({},Ma(t),{className:A,d:eC(r,n,s,a,l)})));var P=j.current,M=b.current,F=_.current,Q=C.current,q=N.current,ae="0px ".concat(x===-1?1:x,"px"),Y="".concat(x,"px 0px"),oe=AP(["strokeDasharray"],m,d);return y.createElement(mw,{animationId:T,key:T,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},V=>{var K=ws(P,s,V),ge=ws(M,a,V),$=ws(F,l,V),G=ws(Q,r,V),ce=ws(q,n,V);v.current&&(j.current=K,b.current=ge,_.current=$,C.current=G,N.current=ce);var le=V>0?{transition:oe,strokeDasharray:Y}:{strokeDasharray:ae};return y.createElement("path",Nm({},Ma(t),{className:A,d:eC(G,ce,K,ge,$),ref:v,style:Z2(Z2({},le),t.style)}))})},JG=["option","shapeType","propTransformer","activeClassName","isActive"];function XG(e,t){if(e==null)return{};var r,n,s=QG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){ZG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZG(e,t,r){return(t=eY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eY(e){var t=tY(e,"string");return typeof t=="symbol"?t:t+""}function tY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rY(e,t){return Cm(Cm({},t),e)}function nY(e,t){return e==="symbols"}function rC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(IP,r);case"trapezoid":return y.createElement(YG,r);case"sector":return y.createElement(RP,r);case"symbols":if(nY(t))return y.createElement(TA,r);break;case"curve":return y.createElement(EP,r);default:return null}}function sY(e){return y.isValidElement(e)?e.props:e}function aY(e){var{option:t,shapeType:r,propTransformer:n=rY,activeClassName:s="recharts-active-shape",isActive:a}=e,l=XG(e,JG),u;if(y.isValidElement(t))u=y.cloneElement(t,Cm(Cm({},l),sY(t)));else if(typeof t=="function")u=t(l);else if(VG(t)&&typeof t!="boolean"){var d=n(t,l);u=y.createElement(rC,{shapeType:r,elementProps:d})}else{var m=l;u=y.createElement(rC,{shapeType:r,elementProps:m})}return a?y.createElement(ro,{className:s},u):u}var gT=(e,t)=>{var r=En();return(n,s)=>a=>{e==null||e(n,s,a),r(P4({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},yT=e=>{var t=En();return(r,n)=>s=>{e==null||e(r,n,s),t(Pq())}},vT=(e,t)=>{var r=En();return(n,s)=>a=>{e==null||e(n,s,a),r(Oq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function iY(e){var{fn:t,args:r}=e,n=En(),s=ya();return y.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Cq(a)),()=>{n(Eq(a))}}},[t,r,n,s]),null}function oY(e){var{legendPayload:t}=e,r=En(),n=ya();return y.useLayoutEffect(()=>n?mu:(r(lB(t)),()=>{r(cB(t))}),[r,n,t]),null}var G0,lY=()=>{var[e]=y.useState(()=>Ed("uid-"));return e},cY=(G0=iD.useId)!==null&&G0!==void 0?G0:lY;function xT(e,t){var r=cY();return t||(e?"".concat(e,"-").concat(r):r)}var uY=y.createContext(void 0),dY=e=>{var{id:t,type:r,children:n}=e,s=xT("recharts-".concat(r),t);return y.createElement(uY.Provider,{value:s},n(s))},fY={cartesianItems:[],polarItems:[]},wT=ea({name:"graphicalItems",initialState:fY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Yn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ji(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Yn()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ji(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Yn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Yn()},removePolarGraphicalItem:{reducer(e,t){var r=Ji(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Yn()}}}),{addCartesianGraphicalItem:hY,replaceCartesianGraphicalItem:mY,removeCartesianGraphicalItem:pY,addPolarGraphicalItem:Iee,removePolarGraphicalItem:Dee}=wT.actions,gY=wT.reducer;function yY(e){var t=En(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(hY(e)):r.current!==e&&t(mY({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(pY(r.current)),r.current=null)},[t]),null}function nC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(r),!0).forEach(function(n){vY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vY(e,t,r){return(t=xY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xY(e){var t=wY(e,"string");return typeof t=="symbol"?t:t+""}function wY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bY={xAxis:{},yAxis:{},zAxis:{}},bT=ea({name:"cartesianAxis",initialState:bY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Yn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Yn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Yn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Yn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Yn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Yn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var l=[...a,n].slice(-3);e.yAxis[r]=sC(sC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:jY,removeXAxis:kY,addYAxis:SY,removeYAxis:_Y,addZAxis:$ee,removeZAxis:Ree,updateYAxisWidth:NY}=bT.actions,CY=bT.reducer,EY=be([os],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),AY=be([EY,uo,fo],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),jT=()=>zt(AY),PY="Invariant failed";function OY(e,t){throw new Error(PY)}var TY=["x","y"];function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(null,arguments)}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){IY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IY(e,t,r){return(t=DY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RY(e,t){if(e==null)return{};var r,n,s=MY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FY(e,t){var{x:r,y:n}=e,s=RY(e,TY),a="".concat(r),l=parseInt(a,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),v=parseInt(p,10);return ld(ld(ld(ld(ld({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:v,name:t.name,radius:t.radius})}function Em(e){return y.createElement(aY,fx({shapeType:"rectangle",propTransformer:FY,activeClassName:"recharts-active-bar"},e))}var LY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(qt(t))return t;var a=qt(n)||is(n);return a?t(n,s):(a||OY(),r)}},zY={},kT=ea({name:"errorBars",initialState:zY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Mee,replaceErrorBar:Fee,removeErrorBar:Lee}=kT.actions,UY=kT.reducer,BY=["children"];function WY(e,t){if(e==null)return{};var r,n,s=VY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},HY=y.createContext(qY);function KY(e){var{children:t}=e,r=WY(e,BY);return y.createElement(HY.Provider,{value:r},t)}function ST(e,t){var r,n,s=zt(m=>mo(m,e)),a=zt(m=>po(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ia.allowDataOverflow,u=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:oa.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function GY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=jT(),{needClipX:a,needClipY:l,needClip:u}=ST(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:a?d:d-f/2,y:l?m:m-p/2,width:a?f:f*2,height:l?p:p*2}))}function YY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Cn(e.zIndex)?e.zIndex:t}var JY=["onMouseEnter","onMouseLeave","onClick"],XY=["value","background","tooltipPosition"],QY=["id"],ZY=["onMouseEnter","onClick","onMouseLeave"];function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(null,arguments)}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){eJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eJ(e,t,r){return(t=tJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tJ(e){var t=rJ(e,"string");return typeof t=="symbol"?t:t+""}function rJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Am(e,t){if(e==null)return{};var r,n,s=nJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:wP(r,t),payload:e}]};function aJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:wP(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function iJ(e){var t=zt(su),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Am(a,JY),f=gT(l,n),p=yT(u),v=vT(d,n);if(!s||r==null)return null;var x=Xx(s);return y.createElement(il,{zIndex:YY(s,Zs.barBackground)},r.map((w,j)=>{var{value:b,background:_,tooltipPosition:C}=w,N=Am(w,XY);if(!_)return null;var T=f(w,j),A=p(w,j),P=v(w,j),M=Ms(Ms(Ms(Ms(Ms({option:s,isActive:String(j)===t},N),{},{fill:"#eee"},_),x),sw(m,w,j)),{},{onMouseEnter:T,onMouseLeave:A,onClick:P,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(Em,co({key:"background-bar-".concat(j)},M))}))}function oJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Ms(Ms({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return y.createElement(OG,{value:t?s:void 0},r)}function lJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:l}=e,u=zt(su),d=zt(q4),m=r&&String(a)===u&&(d==null||l===d),f=m?r:t;return m?y.createElement(il,{zIndex:Zs.activeBar},y.createElement(Em,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))):y.createElement(Em,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))}function cJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return y.createElement(Em,co({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function uJ(e){var t,{data:r,props:n}=e,s=(t=Qo(n))!==null&&t!==void 0?t:{},{id:a}=s,l=Am(s,QY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:v}=n,x=Am(n,ZY),w=gT(f,d),j=yT(v),b=vT(p,d);return r?y.createElement(y.Fragment,null,r.map((_,C)=>y.createElement(ro,co({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(C),className:"recharts-bar-rectangle"},sw(x,_,C),{onMouseEnter:w(_,C),onMouseLeave:j(_,C),onClick:b(_,C)}),m?y.createElement(lJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:C,dataKey:d}):y.createElement(cJ,{shape:u,baseProps:l,entry:_,index:C,dataKey:d})))):null}function dJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,v=pw(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,b=y.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),_=y.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return y.createElement(oJ,{showLabels:j,rects:n},y.createElement(mw,{animationId:v,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:b,onAnimationStart:_,key:v},C=>{var N=C===1?n:n==null?void 0:n.map((T,A)=>{var P=p&&p[A];if(P)return Ms(Ms({},T),{},{x:ws(P.x,T.x,C),y:ws(P.y,T.y,C),width:ws(P.width,T.width,C),height:ws(P.height,T.height,C)});if(s==="horizontal"){var M=ws(0,T.height,C),F=ws(T.stackedBarStart,T.y,C);return Ms(Ms({},T),{},{y:F,height:M})}var Q=ws(0,T.width,C),q=ws(T.stackedBarStart,T.x,C);return Ms(Ms({},T),{},{width:Q,x:q})});return C>0&&(r.current=N??null),N==null?null:y.createElement(ro,null,y.createElement(uJ,{props:t,data:N}))}),y.createElement(DG,{label:t.label}),t.children)}function fJ(e){var t=y.useRef(null);return y.createElement(dJ,{previousRectanglesRef:t,props:e})}var _T=0,hJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ls(e,t)}};class mJ extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=tn("recharts-bar",s),p=m;return y.createElement(ro,{className:f,id:m},u&&y.createElement("defs",null,y.createElement(GY,{clipPathId:p,xAxisId:a,yAxisId:l})),y.createElement(ro,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},y.createElement(iJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),y.createElement(fJ,this.props)))}}var pJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!pu.isSsr,legendType:"rect",minPointSize:_T,xAxisId:0,yAxisId:0,zIndex:Zs.bar};function gJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=ST(t,r),v=dp(),x=ya(),w=zG(e.children,mb),j=zt(C=>VJ(C,t,r,x,e.id,w));if(v!=="vertical"&&v!=="horizontal")return null;var b,_=j==null?void 0:j[0];return _==null||_.height==null||_.width==null?b=0:b=v==="vertical"?_.height/2:_.width/2,y.createElement(KY,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:hJ,errorBarOffset:b},y.createElement(mJ,co({},e,{layout:v,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function yJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:v,cells:x,parentViewBox:w,dataStartIndex:j}=e,b=t==="horizontal"?u:l,_=f?b.scale.domain():null,C=xU({numericAxis:b}),N=b.scale(C);return p.map((T,A)=>{var P,M,F,Q,q,ae;f?P=hU(f[A+j],_):(P=Ls(T,r),Array.isArray(P)||(P=[C,P]));var Y=LY(n,_T)(P[1],A);if(t==="horizontal"){var oe,[V,K]=[u.scale(P[0]),u.scale(P[1])];M=U_({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:T,index:A}),F=(oe=K??V)!==null&&oe!==void 0?oe:void 0,Q=s.size;var ge=V-K;if(q=Ci(ge)?0:ge,ae={x:M,y:v.top,width:Q,height:v.height},Math.abs(Y)>0&&Math.abs(q)<Math.abs(Y)){var $=fa(q||Y)*(Math.abs(Y)-Math.abs(q));F-=$,q+=$}}else{var[G,ce]=[l.scale(P[0]),l.scale(P[1])];if(M=G,F=U_({axis:u,ticks:m,bandSize:a,offset:s.offset,entry:T,index:A}),Q=ce-G,q=s.size,ae={x:v.left,y:F,width:v.width,height:q},Math.abs(Y)>0&&Math.abs(Q)<Math.abs(Y)){var le=fa(Q||Y)*(Math.abs(Y)-Math.abs(Q));Q+=le}}if(M==null||F==null||Q==null||q==null)return null;var U=Ms(Ms({},T),{},{stackedBarStart:N,x:M,y:F,width:Q,height:q,value:f?P:P[1],payload:T,background:ae,tooltipPosition:{x:M+Q/2,y:F+q/2},parentViewBox:w},x&&x[A]&&x[A].props);return U}).filter(Boolean)}function vJ(e){var t=Ua(e,pJ),r=ya();return y.createElement(dY,{id:t.id,type:"bar"},n=>y.createElement(y.Fragment,null,y.createElement(oY,{legendPayload:sJ(t)}),y.createElement(iY,{fn:aJ,args:t}),y.createElement(yY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:vU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),y.createElement(il,{zIndex:t.zIndex},y.createElement(gJ,co({},t,{id:n})))))}var NT=y.memo(vJ);NT.displayName="Bar";function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){xJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xJ(e,t,r){return(t=wJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=bJ(e,"string");return typeof t=="symbol"?t:t+""}function bJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jJ=(e,t)=>t,kJ=(e,t,r)=>r,SJ=(e,t,r,n)=>n,_J=(e,t,r,n,s)=>s,af=be([Jw,_J],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),NJ=be([af],e=>e==null?void 0:e.maxBarSize),CJ=(e,t,r,n,s,a)=>a,lC=(e,t,r)=>{var n=r??e;if(!is(n))return si(n,t,0)},EJ=be([Fr,Jw,jJ,kJ,SJ],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),AJ=(e,t,r,n)=>{var s=Fr(e);return s==="horizontal"?ax(e,"yAxis",r,n):ax(e,"xAxis",t,n)},PJ=(e,t,r)=>{var n=Fr(e);return n==="horizontal"?h2(e,"xAxis",t):h2(e,"yAxis",r)},OJ=(e,t,r)=>{var n={},s=e.filter(Sp),a=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,v=p.map(w=>w.dataKey),x=lC(t,r,p[0].barSize);return{stackId:f,dataKeys:v,barSize:x}}),d=a.map(m=>{var f=[m.dataKey].filter(v=>v!=null),p=lC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},TJ=be([EJ,wV,PJ],OJ),IJ=(e,t,r,n,s)=>{var a,l,u=af(e,t,r,n,s);if(u!=null){var d=Fr(e),m=IO(e),{maxBarSize:f}=u,p=is(f)?m:f,v,x;return d==="horizontal"?(v=nu(e,"xAxis",t,n),x=ru(e,"xAxis",t,n)):(v=nu(e,"yAxis",r,n),x=ru(e,"yAxis",r,n)),(a=(l=im(v,x,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0}},CT=(e,t,r,n)=>{var s=Fr(e),a,l;return s==="horizontal"?(a=nu(e,"xAxis",t,n),l=ru(e,"xAxis",t,n)):(a=nu(e,"yAxis",r,n),l=ru(e,"yAxis",r,n)),im(a,l)};function DJ(e,t,r,n,s){var a=n.length;if(!(a<1)){var l=si(e,r,0,!0),u,d=[];if(Cn(n[0].barSize)){var m=!1,f=r/a,p=n.reduce((_,C)=>_+(C.barSize||0),0);p+=(a-1)*l,p>=r&&(p-=(a-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=a*f);var v=(r-p)/2>>0,x={offset:v-l,size:0};u=n.reduce((_,C)=>{var N,T={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(N=C.barSize)!==null&&N!==void 0?N:0}},A=[..._,T];return x=A[A.length-1].position,A},d)}else{var w=si(t,r,0,!0);r-2*w-(a-1)*l<=0&&(l=0);var j=(r-2*w-(a-1)*l)/a;j>1&&(j>>=0);var b=Cn(s)?Math.min(j,s):j;u=n.reduce((_,C,N)=>[..._,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+l)*N+(j-b)/2,size:b}}],d)}return u}}var $J=(e,t,r,n,s,a,l)=>{var u=is(l)?t:l,d=DJ(r,n,s!==a?s:a,e,u);return s!==a&&d!=null&&(d=d.map(m=>jh(jh({},m),{},{position:jh(jh({},m.position),{},{offset:m.position.offset-s/2})}))),d},RJ=be([TJ,IO,xV,DO,IJ,CT,NJ],$J),MJ=(e,t,r,n)=>nu(e,"xAxis",t,n),FJ=(e,t,r,n)=>nu(e,"yAxis",r,n),LJ=(e,t,r,n)=>ru(e,"xAxis",t,n),zJ=(e,t,r,n)=>ru(e,"yAxis",r,n),UJ=be([RJ,af],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),BJ=(e,t)=>{var r=Gw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(l=>l.key===r)}}}},WJ=be([AJ,af],BJ),VJ=be([os,fw,MJ,FJ,LJ,zJ,UJ,Fr,Lw,CT,WJ,af,CJ],(e,t,r,n,s,a,l,u,d,m,f,p,v)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||a==null||m==null)){var{data:b}=p,_;if(b!=null&&b.length>0?_=b:_=x==null?void 0:x.slice(w,j+1),_!=null)return yJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:f,displayedData:_,offset:e,cells:v,dataStartIndex:w})}}),qJ=e=>{var{chartData:t}=e,r=En(),n=ya();return y.useEffect(()=>n?()=>{}:(r(_2(t)),()=>{r(_2(void 0))}),[t,r,n]),null},cC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ET=ea({name:"brush",initialState:cC,reducers:{setBrushSettings(e,t){return t.payload==null?cC:t.payload}}}),{setBrushSettings:zee}=ET.actions,HJ=ET.reducer;function KJ(e,t,r){return(t=GJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yb{static create(t){return new yb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}KJ(yb,"EPS",1e-4);function JJ(e){return(e%180+180)%180}var XJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=JJ(s),l=a*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},QJ={dots:[],areas:[],lines:[]},AT=ea({name:"referenceElements",initialState:QJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ji(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ji(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ji(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Uee,removeDot:Bee,addArea:Wee,removeArea:Vee,addLine:qee,removeLine:Hee}=AT.actions,ZJ=AT.reducer,eX=y.createContext(void 0),tX=e=>{var{children:t}=e,[r]=y.useState("".concat(Ed("recharts"),"-clip")),n=jT();if(n==null)return null;var{x:s,y:a,width:l,height:u}=n;return y.createElement(eX.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:s,y:a,height:u,width:l}))),t)};function au(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function PT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function rX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return XJ(n,r)}function nX(e,t,r){var n=r==="width",{x:s,y:a,width:l,height:u}=e;return t===1?{start:n?s:a,end:n?s+l:a+u}:{start:n?s+l:a+u,end:n?s:a}}function Pm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function sX(e,t){return PT(e,t+1)}function aX(e,t,r,n,s){for(var a=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var w=n==null?void 0:n[d];if(w===void 0)return{v:PT(n,m)};var j=d,b,_=()=>(b===void 0&&(b=r(w,j)),b),C=w.coordinate,N=d===0||Pm(e,C,_,f,u);N||(d=0,f=l,m+=1),N&&(f=C+e*(_()/2+s),d+=m)},v;m<=a.length;)if(v=p(),v)return v.v;return[]}function uC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(r),!0).forEach(function(n){iX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iX(e,t,r){return(t=oX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oX(e){var t=lX(e,"string");return typeof t=="symbol"?t:t+""}function lX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cX(e,t,r,n,s){for(var a=(n||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(v){var x=a[v],w,j=()=>(w===void 0&&(w=r(x,v)),w);if(v===l-1){var b=e*(x.coordinate+e*j()/2-d);a[v]=x=As(As({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else a[v]=x=As(As({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=Pm(e,x.tickCoord,j,u,d);_&&(d=x.tickCoord-e*(j()/2+s),a[v]=As(As({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return a}function uX(e,t,r,n,s,a){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var f=n[u-1],p=r(f,u-1),v=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=As(As({},f),{},{tickCoord:v>0?f.coordinate-v*e:f.coordinate}),f.tickCoord!=null){var x=Pm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=As(As({},f),{},{isShow:!0}))}}for(var w=a?u-1:u,j=function(C){var N=l[C],T,A=()=>(T===void 0&&(T=r(N,C)),T);if(C===0){var P=e*(N.coordinate-e*A()/2-d);l[C]=N=As(As({},N),{},{tickCoord:P<0?N.coordinate-P*e:N.coordinate})}else l[C]=N=As(As({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var M=Pm(e,N.tickCoord,A,d,m);M&&(d=N.tickCoord+e*(A()/2+s),l[C]=As(As({},N),{},{isShow:!0}))}},b=0;b<w;b++)j(b);return l}function dX(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(qt(d)||pu.isSsr){var v;return(v=sX(s,qt(d)?d:0))!==null&&v!==void 0?v:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=f&&w==="width"?bd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(N,T)=>{var A=typeof m=="function"?m(N.value,T):N.value;return w==="width"?rX(bd(A,{fontSize:t,letterSpacing:r}),j,p):bd(A,{fontSize:t,letterSpacing:r})[w]},_=s.length>=2?fa(s[1].coordinate-s[0].coordinate):1,C=nX(a,_,w);return d==="equidistantPreserveStart"?aX(_,C,b,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=uX(_,C,b,s,l,d==="preserveStartEnd"):x=cX(_,C,b,s,l),x.filter(N=>N.isShow))}var fX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+a,m=l+d+u+(r?n:0);return Math.round(m)}return 0},hX=["axisLine","width","height","className","hide","ticks","axisType"],mX=["viewBox"],pX=["viewBox"];function hx(e,t){if(e==null)return{};var r,n,s=gX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(null,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){yX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yX(e,t,r){return(t=vX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vX(e){var t=xX(e,"string");return typeof t=="symbol"?t:t+""}function xX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Zs.axis};function bX(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=zn(zn(zn({},d),Qo(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!l||a==="bottom"&&l);m=zn(zn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(a==="left"&&!l||a==="right"&&l);m=zn(zn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return y.createElement("line",ql({},m,{className:tn("recharts-cartesian-axis-line",Qc(u,"className"))}))}function jX(e,t,r,n,s,a,l,u,d){var m,f,p,v,x,w,j=u?-1:1,b=e.tickSize||l,_=qt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=f=e.coordinate,v=r+ +!u*s,p=v-j*b,w=p-j*d,x=_;break;case"left":p=v=e.coordinate,f=t+ +!u*n,m=f-j*b,x=m-j*d,w=_;break;case"right":p=v=e.coordinate,f=t+ +u*n,m=f+j*b,x=m+j*d,w=_;break;default:m=f=e.coordinate,v=r+ +u*s,p=v+j*b,w=p+j*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:v},tick:{x,y:w}}}function kX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function SX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function _X(e){var{option:t,tickProps:r,value:n}=e,s,a=tn(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))s=y.cloneElement(t,zn(zn({},r),{},{className:a}));else if(typeof t=="function")s=t(zn(zn({},r),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=tn(l,t==null?void 0:t.className)),s=y.createElement(pb,ql({},r,{className:l}),n)}return s}var NX=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:a,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:v,y:x,width:w,height:j,tickSize:b,tickMargin:_,fontSize:C,letterSpacing:N,getTicksConfig:T,events:A,axisType:P}=e,M=dX(zn(zn({},T),{},{ticks:r}),C,N),F=kX(f,p),Q=SX(f,p),q=Qo(T),ae=Xx(n),Y={};typeof s=="object"&&(Y=s);var oe=zn(zn({},q),{},{fill:"none"},Y),V=M.map($=>zn({entry:$},jX($,v,x,w,j,f,b,p,_))),K=V.map($=>{var{entry:G,line:ce}=$;return y.createElement(ro,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},s&&y.createElement("line",ql({},oe,ce,{className:tn("recharts-cartesian-axis-tick-line",Qc(s,"className"))})))}),ge=V.map(($,G)=>{var{entry:ce,tick:le}=$,U=zn(zn(zn(zn({textAnchor:F,verticalAnchor:Q},q),{},{stroke:"none",fill:a},ae),le),{},{index:G,payload:ce,visibleTicksCount:M.length,tickFormatter:l,padding:d},m);return y.createElement(ro,ql({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},sw(A,ce,G)),n&&y.createElement(_X,{option:n,tickProps:U,value:"".concat(typeof l=="function"?l(ce.value,G):ce.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},ge.length>0&&y.createElement(il,{zIndex:Zs.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},ge)),K.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},K))}),CX=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:l,ticks:u,axisType:d}=e,m=hx(e,hX),[f,p]=y.useState(""),[v,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return fX({ticks:w.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(b=>{if(b){var _=b.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=_;var C=_[0];if(C){var N=window.getComputedStyle(C),T=N.fontSize,A=N.letterSpacing;(T!==f||A!==v)&&(p(T),x(A))}}},[f,v]);return l||n!=null&&n<=0||s!=null&&s<=0?null:y.createElement(il,{zIndex:e.zIndex},y.createElement(ro,{className:tn("recharts-cartesian-axis",a)},y.createElement(bX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Qo(e)}),y.createElement(NX,{ref:j,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:v,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(uG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(wG,{label:e.label,labelRef:e.labelRef}),e.children)))}),EX=y.memo(CX,(e,t)=>{var{viewBox:r}=e,n=hx(e,mX),{viewBox:s}=t,a=hx(t,pX);return au(r,s)&&au(n,a)}),vb=y.forwardRef((e,t)=>{var r=Ua(e,wX);return y.createElement(EX,ql({},r,{ref:t}))});vb.displayName="CartesianAxis";var AX=["dangerouslySetInnerHTML","ticks"],PX=["id"],OX=["domain"],TX=["domain"];function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mx.apply(null,arguments)}function Om(e,t){if(e==null)return{};var r,n,s=IX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function IX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DX(e){var t=En();return y.useLayoutEffect(()=>(t(jY(e)),()=>{t(kY(e))}),[e,t]),null}var $X=e=>{var{xAxisId:t,className:r}=e,n=zt(fw),s=ya(),a="xAxis",l=zt(b=>bu(b,a,t,s)),u=zt(b=>S4(b,a,t,s)),d=zt(b=>w4(b,t)),m=zt(b=>yq(b,t)),f=zt(b=>BO(b,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,x=Om(e,AX),{id:w}=f,j=Om(f,PX);return y.createElement(vb,mx({},x,j,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:tn("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:u,axisType:a}))},RX={allowDataOverflow:ia.allowDataOverflow,allowDecimals:ia.allowDecimals,allowDuplicatedCategory:ia.allowDuplicatedCategory,height:ia.height,hide:!1,mirror:ia.mirror,orientation:ia.orientation,padding:ia.padding,reversed:ia.reversed,scale:ia.scale,tickCount:ia.tickCount,type:ia.type,xAxisId:0},MX=e=>{var t,r,n,s,a,l=Ua(e,RX);return y.createElement(y.Fragment,null,y.createElement(DX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),y.createElement($X,l))},FX=(e,t)=>{var{domain:r}=e,n=Om(e,OX),{domain:s}=t,a=Om(t,TX);return au(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:au({domain:r},{domain:s}):!1},OT=y.memo(MX,FX);OT.displayName="XAxis";var LX=["dangerouslySetInnerHTML","ticks"],zX=["id"],UX=["domain"],BX=["domain"];function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}function Tm(e,t){if(e==null)return{};var r,n,s=WX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VX(e){var t=En();return y.useLayoutEffect(()=>(t(SY(e)),()=>{t(_Y(e))}),[e,t]),null}var qX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=y.useRef(null),l=y.useRef(null),u=zt(fw),d=ya(),m=En(),f="yAxis",p=zt(A=>bu(A,f,t,d)),v=zt(A=>b4(A,t)),x=zt(A=>xq(A,t)),w=zt(A=>S4(A,f,t,d)),j=zt(A=>WO(A,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!v||gb(s)||y.isValidElement(s)||j==null)){var A=a.current;if(A){var P=A.getCalculatedWidth();Math.round(v.width)!==Math.round(P)&&m(NY({id:t,width:P}))}}},[w,v,m,s,t,n,j]),v==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:b,ticks:_}=e,C=Tm(e,LX),{id:N}=j,T=Tm(j,zX);return y.createElement(vb,px({},C,T,{ref:a,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:tn("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:w,axisType:f}))},HX={allowDataOverflow:oa.allowDataOverflow,allowDecimals:oa.allowDecimals,allowDuplicatedCategory:oa.allowDuplicatedCategory,hide:!1,mirror:oa.mirror,orientation:oa.orientation,padding:oa.padding,reversed:oa.reversed,scale:oa.scale,tickCount:oa.tickCount,type:oa.type,width:oa.width,yAxisId:0},KX=e=>{var t,r,n,s,a,l=Ua(e,HX);return y.createElement(y.Fragment,null,y.createElement(VX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),y.createElement(qX,l))},GX=(e,t)=>{var{domain:r}=e,n=Tm(e,UX),{domain:s}=t,a=Tm(t,BX);return au(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:au({domain:r},{domain:s}):!1},TT=y.memo(KX,GX);TT.displayName="YAxis";var Y0={exports:{}},J0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function YX(){if(fC)return J0;fC=1;var e=iu();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,l=e.useMemo,u=e.useDebugValue;return J0.useSyncExternalStoreWithSelector=function(d,m,f,p,v){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function b(A){if(!_){if(_=!0,C=A,A=p(A),v!==void 0&&w.hasValue){var P=w.value;if(v(P,A))return N=P}return N=A}if(P=N,r(C,A))return P;var M=p(A);return v!==void 0&&v(P,M)?(C=A,P):(C=A,N=M)}var _=!1,C,N,T=f===void 0?null:f;return[function(){return b(m())},T===null?void 0:function(){return b(T())}]},[m,f,p,v]);var j=n(d,x[0],x[1]);return a(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},J0}var hC;function JX(){return hC||(hC=1,Y0.exports=YX()),Y0.exports}JX();function XX(e){e()}function QX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){XX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var mC={notify(){},get:()=>[]};function ZX(e,t){let r,n=mC,s=0,a=!1;function l(j){f();const b=n.subscribe(j);let _=!1;return()=>{_||(_=!0,b(),p())}}function u(){n.notify()}function d(){w.onStateChange&&w.onStateChange()}function m(){return a}function f(){s++,r||(r=e.subscribe(d),n=QX())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=mC)}function v(){a||(a=!0,f())}function x(){a&&(a=!1,p())}const w={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>n};return w}var eQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tQ=eQ(),rQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nQ=rQ(),sQ=()=>tQ||nQ?y.useLayoutEffect:y.useEffect,aQ=sQ(),X0=Symbol.for("react-redux-context"),Q0=typeof globalThis<"u"?globalThis:{};function iQ(){if(!y.createContext)return{};const e=Q0[X0]??(Q0[X0]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var oQ=iQ();function lQ(e){const{children:t,context:r,serverState:n,store:s}=e,a=y.useMemo(()=>{const d=ZX(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=y.useMemo(()=>s.getState(),[s]);aQ(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=r||oQ;return y.createElement(u.Provider,{value:a},t)}var cQ=lQ,uQ=(e,t)=>t,xb=be([uQ,Fr,zO,Qn,U4,go,AH,os],RH),wb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},IT=Fa("mouseClick"),DT=Kd();DT.startListening({actionCreator:IT,effect:(e,t)=>{var r=e.payload,n=xb(t.getState(),wb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Tq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var gx=Fa("mouseMove"),$T=Kd();$T.startListening({actionCreator:gx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=ab(n,n.tooltip.settings.shared),a=xb(n,wb(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(T4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(O4()))}});var pC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},RT=ea({name:"rootProps",initialState:pC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:pC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),dQ=RT.reducer,{updateOptions:fQ}=RT.actions,MT=ea({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Kee}=MT.actions,hQ=MT.reducer,FT=Fa("keyDown"),LT=Fa("focus"),bb=Kd();bb.startListening({actionCreator:FT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(ib(s,ku(r))),u=go(r);if(a==="Enter"){var d=Sm(r,"axis","hover",String(s.index));t.dispatch(ox({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=kq(r),f=m==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,v=l+p*f;if(!(u==null||v>=u.length||v<0)){var x=Sm(r,"axis","hover",String(v));t.dispatch(ox({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});bb.startListening({actionCreator:LT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",l=Sm(r,"axis","hover",String(a));t.dispatch(ox({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var Ta=Fa("externalEvent"),zT=Kd();zT.startListening({actionCreator:Ta,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:mH(r),activeDataKey:q4(r),activeIndex:su(r),activeLabel:V4(r),activeTooltipIndex:su(r),isTooltipActive:pH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var mQ=be([ju],e=>e.tooltipItemPayloads),pQ=be([mQ,nf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var l=t(a,r);return l}}}),UT=Fa("touchMove"),BT=Kd();BT.startListening({actionCreator:UT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=ab(n,n.tooltip.settings.shared);if(s==="axis"){var a=xb(n,wb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(T4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(NU),f=(l=d.getAttribute(CU))!==null&&l!==void 0?l:void 0,p=pQ(t.getState(),m,f);t.dispatch(P4({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var gQ=GA({brush:HJ,cartesianAxis:CY,chartData:mK,errorBars:UY,graphicalItems:gY,layout:oU,legend:uB,options:cK,polarAxis:RG,polarOptions:hQ,referenceElements:ZJ,rootProps:dQ,tooltip:Iq,zIndex:JH}),yQ=function(t){return T8({reducer:gQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([DT.middleware,$T.middleware,bb.middleware,zT.middleware,BT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(iP({type:"raf"}))},devTools:pu.devToolsEnabled})};function vQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ya(),a=y.useRef(null);if(s)return r;a.current==null&&(a.current=yQ(t));var l=iw;return y.createElement(cQ,{context:l,store:a.current},r)}function xQ(e){var{layout:t,margin:r}=e,n=En(),s=ya();return y.useEffect(()=>{s||(n(sU(t)),n(nU(r)))},[n,s,t,r]),null}function wQ(e){var t=En();return y.useEffect(()=>{t(fQ(e))},[t,e]),null}function gC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=xT("".concat(n).concat(t)),a=En();return y.useLayoutEffect(()=>(a(GH({zIndex:t,elementId:s,isPanorama:r})),()=>{a(YH({zIndex:t,isPanorama:r}))}),[a,t,s,r]),y.createElement("g",{id:s})}function yC(e){var{children:t,isPanorama:r}=e,n=zt(FH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),a=n.filter(l=>l>0);return y.createElement(y.Fragment,null,s.map(l=>y.createElement(gC,{key:l,zIndex:l,isPanorama:r})),t,a.map(l=>y.createElement(gC,{key:l,zIndex:l,isPanorama:r})))}var bQ=["children"];function jQ(e,t){if(e==null)return{};var r,n,s=kQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(null,arguments)}var SQ={width:"100%",height:"100%",display:"block"},_Q=y.forwardRef((e,t)=>{var r=sB(),n=aB(),s=CP();if(!Zo(r)||!Zo(n))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),y.createElement(fA,Im({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:SQ,ref:t}),a)}),NQ=e=>{var{children:t}=e,r=zt(cp);if(!r)return null;var{width:n,height:s,y:a,x:l}=r;return y.createElement(fA,{width:n,height:s,x:l,y:a},t)},vC=y.forwardRef((e,t)=>{var{children:r}=e,n=jQ(e,bQ),s=ya();return s?y.createElement(NQ,null,y.createElement(yC,{isPanorama:!0},r)):y.createElement(_Q,Im({ref:t},n),y.createElement(yC,{isPanorama:!1},r))});function CQ(){var e=En(),[t,r]=y.useState(null),n=zt(_U);return y.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;Cn(a)&&a!==n&&e(iU(a))}},[t,e,n]),r}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){AQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t,r){return(t=PQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e){var t=OQ(e,"string");return typeof t=="symbol"?t:t+""}function OQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(null,arguments)}var TQ=()=>(kK(),null);function Dm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var IQ=y.forwardRef((e,t)=>{var r,n,s=y.useRef(null),[a,l]=y.useState({containerWidth:Dm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Dm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((m,f)=>{l(p=>{var v=Math.round(m),x=Math.round(f);return p.containerWidth===v&&p.containerHeight===x?p:{containerWidth:v,containerHeight:x}})},[]),d=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var v=w=>{var{width:j,height:b}=w[0].contentRect;u(j,b)},x=new ResizeObserver(v);x.observe(m),s.current=x}},[t,u]);return y.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(fp,{width:a.containerWidth,height:a.containerHeight}),y.createElement("div",Hl({ref:d},e)))}),DQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=y.useState({containerWidth:Dm(r),containerHeight:Dm(n)}),l=y.useCallback((d,m)=>{a(f=>{var p=Math.round(d),v=Math.round(m);return f.containerWidth===p&&f.containerHeight===v?f:{containerWidth:p,containerHeight:v}})},[]),u=y.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return y.createElement(y.Fragment,null,y.createElement(fp,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Hl({ref:u},e)))}),$Q=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(fp,{width:r,height:n}),y.createElement("div",Hl({ref:t},e)))}),RQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return no(r)||no(n)?y.createElement(DQ,Hl({},e,{ref:t})):y.createElement($Q,Hl({},e,{ref:t}))});function MQ(e){return e===!0?IQ:RQ}var FQ=y.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:v,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:b,width:_,responsive:C,dispatchTouchEvents:N=!0}=e,T=y.useRef(null),A=En(),[P,M]=y.useState(null),[F,Q]=y.useState(null),q=CQ(),ae=hw(),Y=(ae==null?void 0:ae.width)>0?ae.width:_,oe=(ae==null?void 0:ae.height)>0?ae.height:s,V=y.useCallback(B=>{q(B),typeof t=="function"&&t(B),M(B),Q(B),B!=null&&(T.current=B)},[q,t,M,Q]),K=y.useCallback(B=>{A(IT(B)),A(Ta({handler:a,reactEvent:B}))},[A,a]),ge=y.useCallback(B=>{A(gx(B)),A(Ta({handler:m,reactEvent:B}))},[A,m]),$=y.useCallback(B=>{A(O4()),A(Ta({handler:f,reactEvent:B}))},[A,f]),G=y.useCallback(B=>{A(gx(B)),A(Ta({handler:p,reactEvent:B}))},[A,p]),ce=y.useCallback(()=>{A(LT())},[A]),le=y.useCallback(B=>{A(FT(B.key))},[A]),U=y.useCallback(B=>{A(Ta({handler:l,reactEvent:B}))},[A,l]),ee=y.useCallback(B=>{A(Ta({handler:u,reactEvent:B}))},[A,u]),ue=y.useCallback(B=>{A(Ta({handler:d,reactEvent:B}))},[A,d]),$e=y.useCallback(B=>{A(Ta({handler:v,reactEvent:B}))},[A,v]),Oe=y.useCallback(B=>{A(Ta({handler:j,reactEvent:B}))},[A,j]),_e=y.useCallback(B=>{N&&A(UT(B)),A(Ta({handler:w,reactEvent:B}))},[A,N,w]),Ie=y.useCallback(B=>{A(Ta({handler:x,reactEvent:B}))},[A,x]),Ke=MQ(C);return y.createElement(Z4.Provider,{value:P},y.createElement(pL.Provider,{value:F},y.createElement(Ke,{width:Y??(b==null?void 0:b.width),height:oe??(b==null?void 0:b.height),className:tn("recharts-wrapper",n),style:EQ({position:"relative",cursor:"default",width:Y,height:oe},b),onClick:K,onContextMenu:U,onDoubleClick:ee,onFocus:ce,onKeyDown:le,onMouseDown:ue,onMouseEnter:ge,onMouseLeave:$,onMouseMove:G,onMouseUp:$e,onTouchEnd:Ie,onTouchMove:_e,onTouchStart:Oe,ref:V},y.createElement(TQ,null),r)))}),LQ=["width","height","responsive","children","className","style","compact","title","desc"];function zQ(e,t){if(e==null)return{};var r,n,s=UQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BQ=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:l,style:u,compact:d,title:m,desc:f}=e,p=zQ(e,LQ),v=Qo(p);return d?y.createElement(y.Fragment,null,y.createElement(fp,{width:r,height:n}),y.createElement(vC,{otherAttributes:v,title:m,desc:f},a)):y.createElement(FQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(vC,{otherAttributes:v,title:m,desc:f,ref:t},y.createElement(tX,null,a)))});function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}var WQ={top:5,right:5,bottom:5,left:5},VQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:WQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},qQ=y.forwardRef(function(t,r){var n,s=Ua(t.categoricalChartProps,VQ),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return y.createElement(vQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:a},y.createElement(qJ,{chartData:m.data}),y.createElement(xQ,{layout:s.layout,margin:s.margin}),y.createElement(wQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),y.createElement(BQ,yx({},s,{ref:r})))}),HQ=["axis","item"],KQ=y.forwardRef((e,t)=>y.createElement(qQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HQ,tooltipPayloadSearcher:oK,categoricalChartProps:e,ref:t}));const ol="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",WT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function GQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const ha={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return GQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function YQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),VT(e)}async function JQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return VT(new Uint8Array(n))}function VT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function XQ(e){const t=YQ(),r=await JQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:ha.clientId,response_type:"code",redirect_uri:ha.redirectUri,response_mode:"query",scope:ha.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${ha.tenantId}/oauth2/v2.0/authorize?${n}`}async function QQ(e){const t=`https://login.microsoftonline.com/${ha.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:ha.clientId,scope:ha.scopes.join(" "),code:e,redirect_uri:ha.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const a=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}}async function ZQ(e){const t=`https://login.microsoftonline.com/${ha.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:ha.clientId,scope:ha.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const a=await n.json();throw console.error("Token refresh error:",a),new Error(`Failed to refresh access token: ${a.error_description||a.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function qT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch states: ${a.statusText}`);const l=await a.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function wC(e){const t=new Set;for(const r of WT)try{(await qT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function vx(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(a,l="")=>{const u=l?`${l}\\${a.name}`:a.name;let d=[u];return a.children&&a.children.length>0&&a.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function eZ(e,t,r=[]){var n;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return vx(e);try{const s=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${j})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200);if(m.length===0)return[];const f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.AreaPath,System.TeamProject&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const v=await p.json(),x=new Set,w=((n=e.project)==null?void 0:n.toLowerCase())||"";return v.value&&Array.isArray(v.value)&&v.value.forEach(j=>{var C,N,T;if((((N=(C=j.fields)==null?void 0:C["System.TeamProject"])==null?void 0:N.toLowerCase())||"")!==w)return;const _=(T=j.fields)==null?void 0:T["System.AreaPath"];_&&x.add(_)}),Array.from(x).sort()}catch(s){return console.error("Error fetching area paths for type/state:",s),[]}}async function tZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const s=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(b=>`'${b}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items by state: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const d=u.workItems.map(b=>b.id).slice(0,200);if(d.length===0)return{types:[],areaPaths:[],tags:[]};const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const p=await f.json(),v=new Set,x=new Set,w=new Set,j=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(b=>{var A,P,M,F,Q;if((((P=(A=b.fields)==null?void 0:A["System.TeamProject"])==null?void 0:P.toLowerCase())||"")!==j)return;const C=(M=b.fields)==null?void 0:M["System.WorkItemType"],N=(F=b.fields)==null?void 0:F["System.AreaPath"],T=(Q=b.fields)==null?void 0:Q["System.Tags"];C&&v.add(C),N&&x.add(N),T&&T.split(";").map(q=>q.trim()).forEach(q=>{q&&w.add(q)})}),{types:Array.from(v).sort((b,_)=>b.localeCompare(_)),areaPaths:Array.from(x).sort((b,_)=>b.localeCompare(_)),tags:Array.from(w).sort((b,_)=>b.localeCompare(_))}}catch(n){return console.error("Error fetching types and area paths for states:",n),{types:[],areaPaths:[],tags:[]}}}async function rZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,a)=>s.localeCompare(a))}async function nZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.AreaPath] UNDER '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[]};const d=u.workItems.map(j=>j.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const p=await f.json(),v=new Set,x=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(j=>{var b;if(j.fields){if((((b=j.fields["System.TeamProject"])==null?void 0:b.toLowerCase())||"")!==w)return;j.fields["System.WorkItemType"]&&v.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&x.add(j.fields["System.State"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort()}}catch(n){return console.error("Error fetching types and states for area path:",n),{types:[],states:[]}}}async function sZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(b=>`[System.Tags] CONTAINS '${b}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[],areaPaths:[]};const d=u.workItems.map(b=>b.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const p=await f.json(),v=new Set,x=new Set,w=new Set,j=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(b=>{var _;if(b.fields){if((((_=b.fields["System.TeamProject"])==null?void 0:_.toLowerCase())||"")!==j)return;b.fields["System.WorkItemType"]&&v.add(b.fields["System.WorkItemType"]),b.fields["System.State"]&&x.add(b.fields["System.State"]),b.fields["System.AreaPath"]&&w.add(b.fields["System.AreaPath"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort(),areaPaths:Array.from(w).sort()}}catch(n){return console.error("Error fetching types and states for tags:",n),{types:[],states:[],areaPaths:[]}}}async function aZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const w=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${w})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const w=n.map(j=>`[System.AreaPath] UNDER '${j}'`);s.push(`(${w.join(" OR ")})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(w=>w.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const v=await p.json(),x=new Set;return v.value&&Array.isArray(v.value)&&v.value.forEach(w=>{w.fields&&w.fields["System.Tags"]&&w.fields["System.Tags"].split(";").map(b=>b.trim()).forEach(b=>{b&&x.add(b)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function bC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await a.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=a.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await iZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function iZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const a=s.workItems.map(f=>f.id).slice(0,200);if(a.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${a.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(v=>v.trim()).forEach(v=>{v&&m.add(v)})}),Array.from(m)}function oZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function lZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await QQ(t);return sessionStorage.removeItem("oauth_state"),s}async function cZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await XQ(e);window.location.href=r}async function jC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:a}=e;if(!a)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(F=>F.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),v=200,x=[];for(let F=0;F<f.length;F+=v){const q=f.slice(F,F+v).join(","),ae=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${q}&fields=${p}&api-version=7.0`,Y=await fetch(ae,{headers:{Authorization:`Bearer ${a}`}});if(!Y.ok)throw new Error(`Failed to fetch work items: ${Y.status} ${Y.statusText}`);const oe=await Y.json();oe.value&&Array.isArray(oe.value)&&x.push(...oe.value)}if(x.length===0)return[];const w=new Map,j=new Map,b=new Map,_=new Map,C=10;for(let F=0;F<x.length;F+=C){const Q=x.slice(F,F+C);await Promise.all(Q.map(async q=>{try{const ae=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${q.id}?$expand=relations&api-version=7.0`,Y=await fetch(ae,{headers:{Authorization:`Bearer ${a}`}});if(Y.ok){const oe=await Y.json(),V=q.fields["System.WorkItemType"]||"",K=V&&V.toLowerCase()==="epic";if(oe.relations){for(const ge of oe.relations)if(ge.rel==="System.LinkTypes.Hierarchy-Forward"){const $=ge.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if($){const G=parseInt($[1],10);K?w.has(G)||(w.set(G,q.id),console.log(`[Epic Detection] Epic ${q.id} "${q.fields["System.Title"]}" has child ${G}, storing as parent of ${G}`)):w.has(q.id)?console.log(`[Epic Detection] Work item ${q.id} already has parent ${w.get(q.id)}, ignoring additional parent ${G}`):(w.set(q.id,G),console.log(`[Epic Detection] Work item ${q.id} "${q.fields["System.Title"]}" (type: ${V}) has parent ${G}`))}}else if(ge.rel==="System.LinkTypes.Hierarchy-Reverse"){const $=ge.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if($){const G=parseInt($[1],10);w.has(G)||(w.set(G,q.id),console.log(`[Epic Detection] Work item ${q.id} "${q.fields["System.Title"]}" (type: ${V}) has child ${G}, storing as parent of ${G}`))}}}}}catch(ae){console.error(`Error fetching relations for work item ${q.id}:`,ae)}}))}const N=Array.from(new Set(w.values()));if(N.length>0)for(let Q=0;Q<N.length;Q+=200){const ae=N.slice(Q,Q+200).join(","),Y=["System.Id","System.Title","System.WorkItemType"].join(","),oe=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${ae}&fields=${Y}&api-version=7.0`;try{const V=await fetch(oe,{headers:{Authorization:`Bearer ${a}`}});if(V.ok){const K=await V.json(),ge=[];for(const $ of K.value){const G=$.fields["System.Title"]||"",ce=$.fields["System.WorkItemType"]||"";b.set($.id,G),_.set($.id,ce),console.log(`[Epic Detection] Fetched parent ${$.id}: type="${ce}", title="${G}"`),ce&&ce.toLowerCase()==="epic"?(j.set($.id,G),console.log(`[Epic Detection]  Found Epic ${$.id}: "${G}"`)):(console.log(`[Epic Detection] Parent ${$.id} is type "${ce}", not an Epic - will check for grandparent`),ge.push($.id))}ge.length>0&&await Promise.all(ge.map(async $=>{try{const G=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${$}?$expand=relations&api-version=7.0`,ce=await fetch(G,{headers:{Authorization:`Bearer ${a}`}});if(ce.ok){const le=await ce.json();if(le.relations){for(const U of le.relations)if(U.rel==="System.LinkTypes.Hierarchy-Forward"){const ee=U.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(ee){const ue=parseInt(ee[1],10);w.has($)||(w.set($,ue),console.log(`[Epic Detection] Parent ${$} has grandparent ${ue}`))}}}}}catch(G){console.error(`Error fetching relations for parent ${$}:`,G)}}))}}catch(V){console.error("Error fetching parent work items:",V)}}let T=Array.from(new Set(w.values())).filter(F=>!b.has(F)),A=new Set,P=5,M=0;for(b.forEach((F,Q)=>A.add(Q));T.length>0&&M<P;){M++,console.log(`[Epic Detection] Fetching ancestor level ${M}, ${T.length} ancestors to fetch`);const F=200;for(let Q=0;Q<T.length;Q+=F){const ae=T.slice(Q,Q+F).join(","),Y=["System.Id","System.Title","System.WorkItemType"].join(","),oe=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${ae}&fields=${Y}&api-version=7.0`;try{const V=await fetch(oe,{headers:{Authorization:`Bearer ${a}`}});if(V.ok){const K=await V.json(),ge=[];for(const $ of K.value){if(A.has($.id))continue;A.add($.id);const G=$.fields["System.Title"]||"",ce=$.fields["System.WorkItemType"]||"";b.set($.id,G),_.set($.id,ce),console.log(`[Epic Detection] Fetched ancestor ${$.id}: type="${ce}", title="${G}"`),ce&&ce.toLowerCase()==="epic"?(j.set($.id,G),console.log(`[Epic Detection]  Found Epic ancestor ${$.id}: "${G}"`)):console.log(`[Epic Detection] Ancestor ${$.id} is type "${ce}", checking for its parent...`)}await Promise.all(K.value.map(async $=>{if(A.has($.id))return;const G=$.fields["System.WorkItemType"]||"";if(G&&G.toLowerCase()!=="epic")try{const ce=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${$.id}?$expand=relations&api-version=7.0`,le=await fetch(ce,{headers:{Authorization:`Bearer ${a}`}});if(le.ok){const U=await le.json();if(U.relations){for(const ee of U.relations)if(ee.rel==="System.LinkTypes.Hierarchy-Forward"){const ue=ee.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(ue){const $e=parseInt(ue[1],10);A.has($e)||(w.set($.id,$e),ge.push($e),console.log(`[Epic Detection] Ancestor ${$.id} has parent ${$e}`))}}}}}catch(ce){console.error(`Error fetching relations for ancestor ${$.id}:`,ce)}})),T=ge}}catch(V){console.error("Error fetching ancestor work items:",V)}}}return x.map(F=>{let Q=null,q=null;const ae=F.fields["System.WorkItemType"]||"",Y=ae&&ae.toLowerCase()==="epic";if(Y){const V=w.get(F.id);V&&(console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" is an Epic but has a parent ${V} stored. This is likely incorrect - Epics are at the top of the hierarchy.`),w.delete(F.id)),console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" is itself an Epic (type: ${ae}), skipping Epic parent lookup`)}else{let V=w.get(F.id),K=[];for(;V&&!K.includes(V);){if(K.push(V),console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" (type: ${ae}) checking parent ${V}`),Q=j.get(V)||null,Q){q=V,console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has Epic parent ${V}: "${Q}"`);break}const ge=b.get(V),$=_.get(V);if($)if($.toLowerCase()==="epic"){Q=ge||null,q=V,Q&&j.set(V,Q),console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has Epic parent ${V}: "${Q}"`);break}else console.log(`[Epic Detection] Parent ${V} "${ge}" is type "${$}", traversing up to find Epic...`),V=w.get(V);else{console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${V} but parent wasn't fetched`);break}}}if(!Q&&!Y){const V=w.get(F.id);if(V){const K=b.get(V),ge=_.get(V)||"Unknown";K?console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${V} "${K}" (type: "${ge}") but no Epic found in hierarchy`):console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${V} but parent wasn't fetched`)}else console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has no parent`)}if(!Q&&F.fields){const K=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(F.fields).filter(ge=>ge.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(ge))];for(const ge of K){const $=F.fields[ge];if($!=null){if(typeof $=="string"&&$.trim()!==""){const G=parseInt($.trim());if(!isNaN(G)&&G>0){if(Q=j.get(G)||null,Q){q=G;break}}else{Q=$.trim();break}}else if(typeof $=="number"&&(Q=j.get($)||null,Q)){q=$;break}}}}if(!Q){const V=w.get(F.id);console.log(V?`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has parent ${V} but no Epic title found`:`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has no Epic found (no parent)`)}const oe={id:F.id,fields:{"System.Title":F.fields["System.Title"],"System.Description":F.fields["System.Description"],"System.Tags":F.fields["System.Tags"],"System.WorkItemType":F.fields["System.WorkItemType"],"System.State":F.fields["System.State"],"Microsoft.VSTS.Common.Priority":F.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":F.fields["System.AreaPath"],"System.IterationPath":F.fields["System.IterationPath"],Epic:Q||void 0,EpicId:q?q.toString():void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${F.id}`};return console.log(`[Map] Work item ${F.id} "${F.fields["System.Title"]}" mapped with Epic: "${Q||"none"}", EpicId: "${q||"none"}"`),oe})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function uZ(e){if(!e)return[];const t=/<img[^>]+src="([^"]+)"/gi,r=[];let n;for(;(n=t.exec(e))!==null;)r.push(n[1]);return r}async function dZ(e,t,r){if(e.length===0)return[];const{supabase:n}=await uu(async()=>{const{supabase:a}=await Promise.resolve().then(()=>i$);return{supabase:a}},void 0),s=[];for(let a=0;a<e.length;a++)try{const l=e[a],u=await fetch(l,{headers:{Authorization:`Bearer ${r}`}});if(!u.ok){console.warn(`Failed to fetch image from Azure DevOps: ${l}`);continue}const d=await u.blob();let m="png";d.type.includes("jpeg")||d.type.includes("jpg")?m="jpg":d.type.includes("png")?m="png":d.type.includes("gif")?m="gif":d.type.includes("webp")&&(m="webp");const p=`${Date.now()}-${a+1}.${m}`,v=`features/${t}/${p}`,{data:x,error:w}=await n.storage.from("feature-attachments").upload(v,d,{contentType:d.type,upsert:!1});if(w){console.error("Error uploading image to Supabase:",w);continue}const{data:{publicUrl:j}}=n.storage.from("feature-attachments").getPublicUrl(v);s.push(j)}catch(l){console.error("Error processing Azure DevOps image:",l)}return s}function kC(e){return e.map(t=>{let r,n;const s=t.fields.Epic,a=t.fields.EpicId,l=t.fields["System.WorkItemType"];if(console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}": epicField="${s}", epicIdField="${a}", workItemType="${l}"`),s&&typeof s=="string"&&s.trim()!==""){const p=s.trim();p!==l&&p!=="Epic"&&p.toLowerCase()!=="epic"?(r=p,console.log(`[Convert] Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`[Convert] Work item ${t.id} has epic field "${p}" which matches work item type "${l}" - ignoring`)}a&&typeof a=="string"&&a.trim()!==""&&(n=a.trim(),console.log(`[Convert] Work item ${t.id} - Epic ID: "${n}"`)),!r&&l!=="Epic"&&console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}" has no Epic assigned`);const u=t.fields["System.Description"]||"",d=uZ(u),m=u.replace(/<[^>]*>/g,"").trim(),f=t.fields["System.Title"]||"Untitled";return r&&f===r&&console.warn(`Work item ${t.id}: Title "${f}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:f,description:m,votes:0,voters:[],epic:r||void 0,epicId:n||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(p=>p.trim()).filter(p=>p):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:l||void 0,azureImageUrls:d.length>0?d:void 0}})}function SC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Sn=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10);return new Date(n,s,a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ji=e=>new Date(e)<new Date,HT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",_C=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],fZ=e=>e?e.trim().toLowerCase():"",hZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Th=(e,t,r)=>Math.min(Math.max(e,t),r),mZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},jb=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},pZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},gZ=e=>pZ(jb(e))>.6?"#111827":"#FFFFFF",NC=(e,t)=>{const{r,g:n,b:s}=jb(e),a=1+t/100,l=Th(Math.round(r*a),0,255),u=Th(Math.round(n*a),0,255),d=Th(Math.round(s*a),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},yZ=(e,t)=>{const{r,g:n,b:s}=jb(e);return`rgba(${r}, ${n}, ${s}, ${Th(t,0,1)})`},gr=(e,t)=>{const r=mZ(t);if(r){const l=gZ(r);return{background:r,text:l,border:NC(r,-20),badgeBackground:yZ(r,.15),badgeText:l,hoverBackground:NC(r,-5),hoverText:l}}const n=fZ(e),s=n?hZ(n)%_C.length:0,a=_C[s];return{background:a.bg,text:a.text,border:a.border,badgeBackground:`${a.bg}1A`,badgeText:a.text,hoverBackground:a.bg,hoverText:a.text}};function vZ({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:a=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:v="",onNewProductNameChange:x,newProductColor:w,onNewProductColorChange:j,onCreateProduct:b,isCreatingProduct:_=!1,addHelperText:C,addButtonLabel:N="Add Product",addInputPlaceholder:T="e.g., Catalyst Cloud",allowDelete:A=!1,onRequestDeleteProduct:P}){const[M,F]=y.useState(!1),Q=y.useRef(null),q=y.useRef(null),[ae,Y]=y.useState(!1),[oe,V]=y.useState(!1),K=y.useMemo(()=>t.find(_e=>_e.id===r)??null,[t,r]),ge=(K==null?void 0:K.name)??s??"",$=ge?gr(ge,(K==null?void 0:K.color_hex)??null):null,G=u||a||t.length===0;y.useEffect(()=>{if(!M)return;function _e(Ke){Q.current&&!Q.current.contains(Ke.target)&&F(!1)}function Ie(Ke){Ke.key==="Escape"&&F(!1)}return document.addEventListener("mousedown",_e),document.addEventListener("keydown",Ie),()=>{document.removeEventListener("mousedown",_e),document.removeEventListener("keydown",Ie)}},[M]);const ce=_e=>{n(_e),F(!1)},le=!!(p&&x&&b),U=le&&ae,ee=!!j,ue=w??"#2D4660",$e=!!(e&&e.trim().length>0),Oe=$e||le;return i.jsxs("div",{className:`space-y-3 ${f}`,children:[i.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),i.jsxs("div",{className:"relative",ref:Q,style:Oe?void 0:{marginTop:"-12px"},children:[Oe&&i.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[$e&&i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),le&&i.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:U?i.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[i.jsx("input",{type:"text",value:v,onChange:_e=>{V(!1),x==null||x(_e.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:w&&v.trim().length>0?w:"#D1D5DB"}}),ee&&v.trim().length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>{var _e;return(_e=q.current)==null?void 0:_e.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${w?"":"border-gray-300 bg-white"}`,style:w?{backgroundColor:w,borderColor:w}:void 0,"aria-label":"Choose product color",children:!w&&i.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),i.jsx("input",{ref:q,type:"color",value:ue,onChange:_e=>{V(!1),j==null||j(_e.target.value)},className:"sr-only"}),v.trim().length>0&&i.jsx("button",{type:"button",onClick:()=>V(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${oe?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),v.trim().length>0&&w&&oe&&i.jsx("button",{type:"button",onClick:b,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):i.jsx("button",{type:"button",onClick:()=>Y(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),i.jsxs("button",{type:"button",onClick:()=>!G&&F(_e=>!_e),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${G?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!G&&$?{borderColor:$.border}:void 0,"aria-expanded":M,"aria-haspopup":"listbox",children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[$&&i.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:$.background,borderColor:$.border},"aria-hidden":"true"}),i.jsx("span",{className:`truncate ${ge?"":"text-gray-400"}`,style:$?{color:$.background}:void 0,children:ge||(t.length===0?"No products available":d)})]}),i.jsx(Ia,{className:`ml-2 h-4 w-4 transition-transform ${M?"rotate-180":""} ${G?"text-gray-300":"text-gray-500"}`})]}),M&&!G&&i.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:i.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(_e=>{const Ie=gr(_e.name,_e.color_hex??null),Ke=r===_e.id;return i.jsxs("div",{className:"product-picker__item",style:{"--product-color":Ie.background,"--product-light-bg":Ie.badgeBackground,"--product-border-color":Ie.border},children:[i.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>ce(_e.id),"aria-selected":Ke,children:[i.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),i.jsx("span",{className:"flex-1 truncate font-medium",children:_e.name}),Ke&&i.jsx(yn,{className:"h-4 w-4 text-gray-400"})]}),A&&P&&i.jsx("button",{type:"button",onClick:B=>{B.stopPropagation(),F(!1),P(_e)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${_e.name}`,title:"Delete product",children:i.jsx(to,{className:"h-4 w-4"})})]},_e.id)})})}),a&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&i.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!a&&!l&&m&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),le&&C&&U&&i.jsx("p",{className:"text-xs text-gray-500",children:C})]})}const CC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],EC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},xZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return CC[t%CC.length]};function Ur(e,t){const r=e.product_id??e.productId??null;if(r&&t){const a=EC(t[r]);if(a)return a}const n=EC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return xZ(s)}const wZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],AC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function bZ({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:a=!1,variant:l="default"}){const[u,d]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{function b(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const f=b=>{r(b),d(!1)},p=t||n,v=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",w=l==="green"?"bg-green-50":"bg-blue-50",j=l==="green"?"text-green-600":"text-[#1E5461]";return i.jsxs("div",{ref:m,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!a&&d(!u),className:`w-full px-3 py-2 border ${v} rounded-md min-h-[38px] flex items-center justify-between ${a?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),i.jsx(Ia,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(b=>i.jsxs("div",{onClick:()=>f(b),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===b?w:""}`,children:[i.jsx("span",{className:"text-sm text-gray-900",children:b}),t===b&&i.jsx(yn,{className:`h-4 w-4 ${j}`})]},b))})]})}function KT(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:Mr,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Ym,color:"#773b93"}:t==="user story"||t==="story"?{icon:YE,color:"#007acc"}:t==="bug"?{icon:JE,color:"#cc293d"}:t==="task"?{icon:zl,color:"#007acc"}:t==="change request"?{icon:GE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:XE,color:"#007acc"}:t==="issue"?{icon:dn,color:"#cc293d"}:null}function md({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:a=!1,disabled:l=!1}){const[u,d]=y.useState(!1),[m,f]=y.useState(""),p=y.useRef(null),v=y.useRef(null);y.useEffect(()=>{function _(C){p.current&&!p.current.contains(C.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),y.useEffect(()=>{u&&a&&v.current&&v.current.focus()},[u,a]);const x=_=>{t.includes(_)?r(t.filter(C=>C!==_)):r([...t,_])},w=(_,C)=>{C.stopPropagation(),r(t.filter(N=>N!==_))},j=_=>{_.stopPropagation(),r([])},b=a&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return i.jsxs("div",{ref:p,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?i.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&i.jsx("button",{type:"button",onClick:C=>w(_,C),className:"ml-1 hover:text-[#173B65]",children:i.jsx(_n,{className:"h-3 w-3"})})]},_))}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&i.jsx("button",{type:"button",onClick:j,className:"text-gray-400 hover:text-gray-600",children:i.jsx(_n,{className:"h-4 w-4"})}),i.jsx(Ia,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a&&i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsx("input",{ref:v,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),i.jsx("div",{className:"overflow-y-auto",children:b.length>0?b.map(_=>i.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[i.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&i.jsx(yn,{className:"h-4 w-4 text-[#1E5461]"})]},_)):i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function jZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s,isFetching:a=!1,config:l}){const[u,d]=y.useState(new Set);y.useEffect(()=>{if(e&&r&&r.length>0){const w=r.map(j=>j.id).filter(j=>j);console.log("PreviewFeaturesModal: Selecting all features by default",w.length,"features"),console.log("PreviewFeaturesModal: Feature IDs:",w),w.length>0&&d(new Set(w))}else e||d(new Set)},[e,r]);const m=w=>{d(j=>{const b=new Set(j);return b.has(w)?b.delete(w):b.add(w),b})},f=()=>{r&&(u.size===r.length?d(new Set):d(new Set(r.map(w=>w.id))))},p=async()=>{if(!r||r.length===0){console.warn("handleAddSelected: No preview features available");return}if(u.size===0){console.log("handleAddSelected: No features selected, selecting all by default");const j=r.map(b=>b.id).filter(b=>b);d(new Set(j)),setTimeout(()=>{p()},100);return}console.log("handleAddSelected: Preview features count:",r.length),console.log("handleAddSelected: Selected features count:",u.size),console.log("handleAddSelected: Selected feature IDs:",Array.from(u)),console.log("handleAddSelected: Preview feature IDs:",r.map(j=>j.id));const w=r.filter(j=>{const b=j.id&&u.has(j.id);return b||console.warn("handleAddSelected: Feature not selected:",j.id,j.title),b});if(w.length===0){if(console.warn("handleAddSelected: No features selected after filtering"),console.warn("handleAddSelected: Preview features:",r),console.warn("handleAddSelected: Selected set:",u),r.map(b=>b.id).filter(b=>b).length>0){console.log("handleAddSelected: Fallback - selecting all features");const b=r.filter(_=>_.id);if(b.length>0)try{await n(b),console.log("handleAddSelected: Sync completed with all features, closing modal"),t()}catch(_){console.error("handleAddSelected: Error during sync",_)}}return}console.log("handleAddSelected: Adding",w.length,"features");try{await n(w),console.log("handleAddSelected: Sync completed, closing modal"),t()}catch(j){console.error("handleAddSelected: Error during sync",j)}},v=async()=>{!r||!s||(await s(),t())},x=u.size;return i.jsx(gn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:i.jsx("div",{className:"space-y-4",children:r&&r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:i.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),i.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),f()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&u.size===r.length?i.jsx(zl,{className:"w-5 h-5 text-green-600"}):i.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(w=>{const j=u.has(w.id);return console.log(`[PreviewModal] Rendering feature ${w.id} "${w.title}": epic="${w.epic}", epicId="${w.epicId}"`),i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${j?"bg-blue-50":""}`,onClick:()=>m(w.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),m(w.id)},className:"flex items-center justify-center w-5 h-5",children:j?i.jsx(zl,{className:"w-5 h-5 text-green-600"}):i.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title}),w.description&&w.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[w.description.replace(/<[^>]*>/g,"").substring(0,100),w.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),w.attachmentUrls&&w.attachmentUrls.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[w.attachmentUrls.slice(0,3).map((b,_)=>i.jsx("div",{className:"relative border border-gray-300 rounded overflow-hidden",style:{width:"32px",height:"32px"},title:"Image from work item",children:i.jsx("img",{src:b,alt:`Attachment ${_+1}`,className:"w-full h-full object-cover",onError:C=>{C.currentTarget.style.display="none"}})},_)),w.attachmentUrls.length>3&&i.jsx("div",{className:"flex items-center justify-center",style:{width:"32px",height:"32px"},children:i.jsxs("span",{className:"text-xs text-gray-500",children:["+",w.attachmentUrls.length-3]})})]}),w.tags&&w.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[w.tags.slice(0,3).map((b,_)=>i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:b},_)),w.tags.length>3&&i.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",w.tags.length-3]})]})]})})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const b=KT(w.workItemType);if(b&&w.azureDevOpsId){const _=b.icon,N=(P=>{const M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(P);return M?{r:parseInt(M[1],16),g:parseInt(M[2],16),b:parseInt(M[3],16)}:null})(b.color),T=N?`rgba(${N.r}, ${N.g}, ${N.b}, 0.1)`:`${b.color}20`,A=N?`rgba(${N.r}, ${N.g}, ${N.b}, 0.2)`:`${b.color}40`;return i.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:P=>P.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:T,color:b.color,borderColor:b.color},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=A},onMouseLeave:P=>{P.currentTarget.style.backgroundColor=T},title:"View in Azure DevOps",children:[i.jsx(_,{className:"h-3 w-3 mr-1",style:{color:b.color}}),w.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(w.workItemType&&w.azureDevOpsId)return i.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:w.workItemType}),w.azureDevOpsId.replace(/^ado-/,"#")]});if(b){const _=b.icon;return i.jsx(_,{className:"w-5 h-5",style:{color:b.color}})}else if(w.workItemType)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:w.workItemType})}return null})()})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:w.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:w.state})}),i.jsx("td",{className:`px-4 py-3 align-middle ${w.epic||w.workItemType&&w.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:w.workItemType&&w.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):w.epic?w.epicId?i.jsx("a",{href:`https://dev.azure.com/${l.organization}/${l.project}/_workitems/edit/${w.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),className:"inline-block w-full",children:i.jsx(Kl,{name:w.epic,epicId:w.epicId,description:w.description,className:"hover:opacity-80"})}):i.jsx(Kl,{name:w.epic,description:w.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:w.areaPath?i.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:w.areaPath,children:w.areaPath}):i.jsx("span",{className:"text-xs text-gray-400",children:""})})]},w.id)})})]})})}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[x," of ",r.length," selected"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(Tt,{variant:"primary",onClick:p,disabled:x===0||a,className:"flex items-center",children:a?i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),"Add ",x," Feature",x!==1?"s":""]})}),s&&i.jsxs(Tt,{variant:"danger",onClick:v,className:"flex items-center",children:[i.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(dn,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function kZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:a,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:v,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:w,resetSignal:j}){const b=WT,[_,C]=y.useState(!1),[N,T]=y.useState(null),[A,P]=y.useState(!1),[M,F]=y.useState(!1),[Q,q]=y.useState(!1),[ae,Y]=y.useState(0),oe=y.useRef(null),V=y.useRef(!1),K=y.useRef(!1),ge=y.useRef(null),$=y.useRef(e),G=y.useRef(null),ce=y.useRef(!1),le=y.useRef(!1),U=y.useRef(!1),ee=y.useRef(null),ue=y.useRef(!1),$e=y.useRef(!1),Oe=y.useRef([]),_e=y.useRef([]),Ie=y.useRef([]),Ke=y.useRef(null),B=y.useRef(null),ve=y.useRef([]),ie=y.useRef([]),ne=y.useRef([]),pt={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:et,handleSubmit:Be,watch:ft,control:De,setValue:rt,reset:rr}=Cd({defaultValues:pt}),R=y.useCallback(()=>{$e.current=!0,rr({...pt}),C(!1),ce.current=!1,le.current=!1,U.current=!1,ue.current=!1,K.current=!1,ge.current=null,ee.current!==null&&(clearTimeout(ee.current),ee.current=null),Ke.current!==null&&(clearTimeout(Ke.current),Ke.current=null),B.current=null,ve.current=[],ie.current=[],ne.current=[],setTimeout(()=>{$e.current=!1},500)},[rr]);y.useEffect(()=>{R()},[j,R]);const L=ft("workItemTypes"),H=ft("states"),ke=ft("areaPaths"),Ee=ft("tags");y.useEffect(()=>{if(le.current||ue.current||ce.current||U.current||$e.current){Oe.current=L||[],_e.current=H||[],Ie.current=ke||[];return}const ze=L.length<Oe.current.length,bt=H.length<_e.current.length,Et=ke.length<Ie.current.length;if(ze||bt||Et){B.current=Date.now(),Oe.current=L||[],_e.current=H||[],Ie.current=ke||[],$e.current=!0,Ke.current!==null&&clearTimeout(Ke.current);const ar=async()=>{ze&&(ve.current=[]),bt&&(ie.current=[]),Et&&(ne.current=[]),L&&L.length>0?(m&&await m(L[0]),f&&await f(L[0],H||[]),p&&await p(L[0],H||[],ke||[])):H&&H.length>0&&w?await w(H):ke&&ke.length>0&&v&&await v(ke),setTimeout(()=>{Ke.current=null,setTimeout(()=>{$e.current=!1,setTimeout(()=>{B.current=null},2e3)},1e3)},500)};Ke.current=window.setTimeout(()=>{ar()},100)}else Oe.current=L||[],_e.current=H||[],Ie.current=ke||[]},[L,H,ke,Ee,m,f,p,w,v]);const Te=ft("query"),Fe=y.useCallback((ze,bt,Et,ar,$t,We)=>{const Ye=[];if(ze&&ze.length>0)if(ze.length===1)Ye.push(`[System.WorkItemType] = '${ze[0]}'`);else{const at=ze.map(jt=>`'${jt}'`).join(", ");Ye.push(`[System.WorkItemType] IN (${at})`)}if(bt&&bt.length>0)if(bt.length===1)Ye.push(`[System.State] = '${bt[0]}'`);else{const at=bt.map(jt=>`'${jt}'`).join(", ");Ye.push(`[System.State] IN (${at})`)}if(Et&&Et.length>0)if(Et.length===1)Ye.push(`[System.AreaPath] UNDER '${Et[0]}'`);else{const at=Et.map(jt=>`[System.AreaPath] UNDER '${jt}'`);Ye.push(`(${at.join(" OR ")})`)}if(ar&&ar.length>0){const at=ar.map(jt=>`[System.Tags] CONTAINS '${jt}'`);Ye.push(`(${at.join(" OR ")})`)}return We&&$t&&Ye.push(`(${$t})`),Ye.length>0?Ye.join(" AND "):void 0},[]);y.useEffect(()=>{if(!(ce.current||le.current||U.current||ue.current||ee.current!==null)&&m){if(!L||L.length===0){m(void 0);return}m(L[0])}},[L,m]),y.useEffect(()=>{if(ce.current||le.current||ue.current||!f)return;(async()=>{F(!0);try{await f(L&&L.length>0?L[0]:void 0,H||[])}finally{F(!1)}})()},[L,H,f]),y.useEffect(()=>{if(le.current||ce.current||U.current||ee.current!==null||ue.current||!p||!L||L.length===0)return;const ze=async()=>{q(!0);try{await p(L[0],H||[],ke||[])}finally{q(!1)}},bt=setTimeout(()=>{ze()},100);return()=>{clearTimeout(bt),q(!1)}},[L,H,ke,p]),y.useEffect(()=>{var $t,We;if(!v||$e.current||Ke.current!==null||le.current||ue.current||!ke||ke.length===0)return;if(B.current!==null){if(Date.now()-B.current<5e3)return;B.current=null}const ze=L&&L.length>0,bt=H&&H.length>0;if(ze&&bt)return;const Et=((L==null?void 0:L.length)||0)<((($t=Oe.current)==null?void 0:$t.length)||0),ar=((H==null?void 0:H.length)||0)<(((We=_e.current)==null?void 0:We.length)||0);if(Et||ar){Oe.current=L||[],_e.current=H||[],B.current=Date.now();return}ce.current=!0,v(ke).then(({types:Ye,states:at})=>{Ye.length>0&&!ze&&(rt("workItemTypes",Ye,{shouldDirty:!1}),Oe.current=Ye),at.length>0&&!bt&&(rt("states",at,{shouldDirty:!1}),_e.current=at)}).finally(()=>{setTimeout(()=>{ce.current=!1},300)})},[ke,L,H,v,rt]),y.useEffect(()=>{var vr,Zt,lr;if(!x||$e.current||Ke.current!==null||ce.current||U.current)return;if(B.current!==null){if(Date.now()-B.current<5e3)return;B.current=null}const ze=((L==null?void 0:L.length)||0)<(((vr=Oe.current)==null?void 0:vr.length)||0),bt=((H==null?void 0:H.length)||0)<(((Zt=_e.current)==null?void 0:Zt.length)||0),Et=((ke==null?void 0:ke.length)||0)<(((lr=Ie.current)==null?void 0:lr.length)||0),ar=L||[],$t=H||[],We=ke||[],Ye=ve.current||[],at=ie.current||[],jt=ne.current||[],gt=Ye.length>0&&ar.length<Ye.length&&ar.every(Qt=>Ye.includes(Qt)),Xt=at.length>0&&$t.length<at.length&&$t.every(Qt=>at.includes(Qt)),Ht=jt.length>0&&We.length<jt.length&&We.every(Qt=>jt.includes(Qt));if(ze||bt||Et||gt||Xt||Ht){Oe.current=L||[],_e.current=H||[],Ie.current=ke||[],B.current=Date.now();return}if(!Ee||Ee.length===0){ee.current!==null&&(clearTimeout(ee.current),ee.current=null),ue.current=!1,ge.current=null,K.current=!1,B.current=null,ve.current=[],ie.current=[],ne.current=[];return}le.current=!0,ue.current=!0,ge.current=Date.now(),ee.current!==null&&clearTimeout(ee.current),ee.current=window.setTimeout(()=>{ee.current=null,setTimeout(()=>{ue.current=!1,ge.current=null,K.current=!0,Y(Qt=>Qt+1)},500)},1500),x(Ee).then(({types:Qt,states:hr,areaPaths:cr})=>{Qt.length>0,hr.length>0,cr.length>0,Qt.length>0&&(rt("workItemTypes",Qt,{shouldDirty:!1}),Oe.current=Qt,ve.current=Qt),hr.length>0&&(rt("states",hr,{shouldDirty:!1}),_e.current=hr,ie.current=hr),cr.length>0&&(rt("areaPaths",cr,{shouldDirty:!1}),Ie.current=cr,ne.current=cr),Qt.length>0&&(K.current=!0,setTimeout(()=>{const te=$.current,Xe=G.current;!ue.current&&!le.current&&ee.current===null&&te.enabled&&te.accessToken&&Xe?(oe.current!==null&&(window.clearTimeout(oe.current),oe.current=null),Xe(),K.current=!1):Y(At=>At+1)},2100))}).finally(()=>{setTimeout(()=>{le.current=!1},500)})},[Ee,x,rt]),y.useEffect(()=>{!w||ce.current||le.current||!H||H.length===0||L&&L.length>0||(U.current=!0,w(H).then(({types:bt})=>{bt.length>0&&rt("workItemTypes",bt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{U.current=!1},300)}))},[H,L,w,rt]),y.useEffect(()=>{if(H&&H.length>0&&s.length>0){const ze=H.filter(bt=>s.includes(bt));ze.length!==H.length&&rt("states",ze)}},[s,H,rt]),y.useEffect(()=>{if(ke&&ke.length>0&&a.length>0){const ze=ke.filter(bt=>a.includes(bt));ze.length!==ke.length&&(rt("areaPaths",ze),ze.length===0&&rt("tags",[]))}},[a,ke,rt]),y.useEffect(()=>{if(Ee&&Ee.length>0&&l.length>0){const ze=Ee.filter(bt=>l.includes(bt));ze.length!==Ee.length&&rt("tags",ze)}},[l,Ee,rt]);const wt=y.useCallback(async()=>{if(!e.enabled||!e.accessToken||!L||L.length===0){T(null);return}try{P(!0);const ze=L[0],bt=Fe(L||[],H||[],ke||[],Ee||[],Te||"",_);let Et="";bt?Et=`SELECT [System.Id] FROM WorkItems WHERE ${bt}`:Et=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${ze}' AND [System.State] = 'Active'`;const ar=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,$t=await fetch(ar,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Et})});if(!$t.ok)throw new Error(`Azure DevOps query failed: ${$t.status} ${$t.statusText}`);const We=await $t.json(),Ye=We.workItems?We.workItems.length:0;T(Ye)}catch(ze){console.error("[FilterForm] Error fetching feature count:",ze),T(null)}finally{P(!1)}},[e,L,H,ke,Ee,Te,_,Fe]);y.useEffect(()=>{$.current=e,G.current=wt},[e,wt]),y.useEffect(()=>{if(oe.current!==null&&(window.clearTimeout(oe.current),oe.current=null),!L||L.length===0){T(null);return}if(K.current&&L&&L.length>0){const ze=!ue.current&&!le.current&&ee.current===null,bt=ge.current===null||Date.now()-ge.current>=2100;if(ze||bt){K.current=!1;const Et=$.current,ar=G.current;Et.enabled&&Et.accessToken&&ar&&ar();return}return}if(ue.current||le.current||ee.current!==null){K.current=!0;return}return e.enabled&&e.accessToken?oe.current=window.setTimeout(()=>{wt()},300):T(null),()=>{oe.current!==null&&(window.clearTimeout(oe.current),oe.current=null)}},[L,H,ke,Ee,Te,_,e.enabled,e.accessToken,wt,ae]),y.useEffect(()=>{if(d&&!V.current&&u){const ze=u.length;T(ze)}V.current=d||!1},[d,u]),y.useEffect(()=>{u&&u.length>0?T(u.length):u&&u.length===0&&T(0)},[u]),y.useEffect(()=>{const ze=Fe(L||[],H||[],ke||[],Ee||[],Te||"",_),bt={...e,workItemType:L&&L.length>0?L[0]:e.workItemType||"Feature",query:ze,states:H&&H.length>0?H:void 0,areaPath:ke&&ke.length>0?ke[0]:void 0,tags:Ee&&Ee.length>0?Ee:void 0},Et=window.setTimeout(()=>{t(bt)},100);return()=>{window.clearTimeout(Et)}},[L,H,ke,Ee,Te,_,Fe,t]);const Me=async ze=>{await r()};return i.jsxs("form",{onSubmit:Be(Me),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[i.jsx(sF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:R,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),i.jsx("button",{type:"button",onClick:()=>C(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:b.length})]}),i.jsx(dd,{name:"workItemTypes",control:De,render:({field:ze})=>i.jsx(md,{options:b,value:ze.value,onChange:ze.onChange,placeholder:"Select types..."})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),i.jsx(dd,{name:"states",control:De,render:({field:ze})=>i.jsx(md,{options:s,value:ze.value,onChange:ze.onChange,placeholder:"Select states...",disabled:s.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(a==null?void 0:a.length)||0})]}),i.jsx(dd,{name:"areaPaths",control:De,render:({field:ze})=>i.jsx(md,{options:a,value:ze.value,onChange:ze.onChange,placeholder:"Select area paths...",searchable:!0,disabled:a.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:M?"Loading area paths...":a.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),i.jsx(dd,{name:"tags",control:De,render:({field:ze})=>i.jsx(md,{options:l,value:ze.value,onChange:ze.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!Q})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!L||L.length===0?"Select work item type to see tags":Q?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),i.jsx("input",{...et("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),i.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",i.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(Tt,{variant:"gold",type:"submit",disabled:(()=>{const ze=((L==null?void 0:L.length)??0)>0,bt=((H==null?void 0:H.length)??0)>0,Et=((ke==null?void 0:ke.length)??0)>0,ar=((Ee==null?void 0:Ee.length)??0)>0,$t=Te&&Te.trim().length>0;return n||A||!(ze||bt||Et||ar||$t)})(),className:"flex items-center",children:[n&&i.jsx(Xo,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":(()=>{const ze=N!==null?N:(u==null?void 0:u.length)??null;return ze!==null?`Preview ${ze} Feature${ze!==1?"s":""}`:"Preview Features"})()]})})]})}function SZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:a,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[v,x]=y.useState(null),[w,j]=y.useState(!1),[b,_]=y.useState("#2D4660"),[C,N]=y.useState(null),[T,A]=y.useState(!1);y.useRef(null);const P="2099-12-31",M=ie=>ie?ie.split("T")[0]===P:!1,F=ie=>{if(!ie||typeof ie!="string")return new Date;const pt=ie.split("T")[0].split(" ")[0].split("-");if(pt.length!==3)return new Date;const et=parseInt(pt[0],10),Be=parseInt(pt[1],10),ft=parseInt(pt[2],10);if(isNaN(et)||isNaN(Be)||isNaN(ft))return new Date;const De=new Date(et,Be-1,ft,0,0,0,0);return isNaN(De.getTime())?new Date:De},Q=ie=>{if(!ie||isNaN(ie.getTime()))return new Date().toISOString().split("T")[0];const ne=ie.getFullYear(),pt=String(ie.getMonth()+1).padStart(2,"0"),et=String(ie.getDate()).padStart(2,"0");return`${ne}-${pt}-${et}`},q=(ie,ne)=>{const pt=ie.getFullYear(),et=ie.getMonth(),Be=ie.getDate();return new Date(pt,et,Be+ne,0,0,0,0)},ae=y.useMemo(()=>{const ie={};return u.forEach(ne=>{ne.id&&ne.name&&(ie[ne.id]=ne.name)}),ie},[u]),{register:Y,handleSubmit:oe,watch:V,reset:K,control:ge,setValue:$,formState:{errors:G}}=Cd({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:M(e.startDate)?"":e.startDate.split("T")[0],endDate:M(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});y.useEffect(()=>{const ie=M(e.startDate)?"":e.startDate.split("T")[0],ne=M(e.endDate)?"":e.endDate.split("T")[0];K({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:ie,endDate:ne,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),Oe.current=ie},[e,K]);const ce=e.productName??e.product_name??l??"",le=e.productId??e.product_id??"";y.useEffect(()=>{if(!u.length)return;if(le){u.some(pt=>pt.id===le)&&$("productId",le,{shouldDirty:!1,shouldTouch:!1});return}if(!ce)return;const ie=u.find(ne=>ne.name.toLowerCase()===ce.toLowerCase());ie&&$("productId",ie.id,{shouldDirty:!1,shouldTouch:!1})},[u,le,ce,$]);const U=V("useAutoVotes"),ee=V("productId"),ue=V("startDate"),$e=V("endDate"),Oe=y.useRef(""),_e=y.useCallback(async ie=>{const ne=ue,pt=$e;if(ie==="startDate"&&!ne){let et;if(ee)try{const De=(await bk(ee)).filter(rt=>rt.id!==e.id);if(De.length>0){let rt=null;De.forEach(rr=>{const R=rr.end_date||rr.endDate;if(R&&!M(R)){const L=F(R);(!rt||L>rt)&&(rt=L)}}),rt?et=q(rt,1):et=new Date}else et=new Date}catch(ft){console.error("Error calculating dates for product:",ft),et=new Date}else et=new Date;const Be=q(et,14);$("startDate",Q(et),{shouldDirty:!0}),pt||$("endDate",Q(Be),{shouldDirty:!0})}else if(ie==="endDate"&&!pt){let et;if(ne)et=F(ne);else{if(ee)try{const De=(await bk(ee)).filter(rt=>rt.id!==e.id);if(De.length>0){let rt=null;De.forEach(rr=>{const R=rr.end_date||rr.endDate;if(R&&!M(R)){const L=F(R);(!rt||L>rt)&&(rt=L)}}),rt?et=q(rt,1):et=new Date}else et=new Date}catch(ft){console.error("Error calculating dates for product:",ft),et=new Date}else et=new Date;$("startDate",Q(et),{shouldDirty:!0})}const Be=q(et,14);$("endDate",Q(Be),{shouldDirty:!0})}},[ue,$e,ee,$]);y.useEffect(()=>{if(ue&&ue!==Oe.current&&$e){Oe.current=ue;const ie=F(ue),ne=q(ie,14);$("endDate",Q(ne),{shouldDirty:!0})}},[ue,$e,$]);const Ie=y.useMemo(()=>!C||!ee?u:u.map(ie=>ie.id===ee?{...ie,color_hex:C}:ie),[u,C,ee]);y.useEffect(()=>{if(!ee)return;u.some(ne=>ne.id===ee)||$("productId","",{shouldDirty:!0,shouldTouch:!0})},[ee,u,$]),y.useEffect(()=>{if(ee&&u.length>0){const ie=u.find(ne=>ne.id===ee);if(ie){const ne=ie.color_hex??null;x(ne),_(ne||"#2D4660"),N(null),j(!1)}}else ee||(x(null),_("#2D4660"),N(null),j(!1))},[ee,u]);const Ke=U?Math.max(1,Math.floor(t/2)):V("votesPerUser"),B=async(ie,ne=!1)=>{try{r({...ie,isDraft:ne})}catch(pt){throw console.error("ERROR in handleFormSubmit:",pt),pt}},ve=async()=>{const ie=V();await B(ie,!0)};return i.jsxs("form",{onSubmit:oe(ie=>B(ie),ie=>{}),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const ie=Ie.find(De=>De.id===ee)??null,ne=ee?ae[ee]??null:null,pt=(ie==null?void 0:ie.name)??ne??ce??"No Product",et=(ie==null?void 0:ie.color_hex)||null,Be=ie?gr(ie.name,et??null):null,ft=(Be==null?void 0:Be.background)||null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:ft||"#2D4660"}}),i.jsx("span",{className:"text-gray-900",children:pt})]})})()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),i.jsx("input",{...Y("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),G.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:G.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),i.jsx("textarea",{...Y("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),G.goal&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:G.goal.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",...Y("startDate",{required:!M(e.startDate)&&!M(e.endDate)?"Start date is required":!1}),value:V("startDate")||"",onFocus:ie=>{V("startDate")||_e("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${G.startDate?"border-red-500":"border-gray-300"}`,style:V("startDate")?{}:{color:"transparent"},onBlur:ie=>{ie.target.value?ie.target.style.color="":ie.target.style.color="transparent"}}),G.startDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:G.startDate.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",...Y("endDate",{required:!M(e.startDate)&&!M(e.endDate)?"End date is required":!1}),value:V("endDate")||"",onFocus:ie=>{V("endDate")||_e("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${G.endDate?"border-red-500":"border-gray-300"}`,style:V("endDate")?{}:{color:"transparent",position:"relative"},onBlur:ie=>{ie.target.value?ie.target.style.color="":ie.target.style.color="transparent"}}),G.endDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:G.endDate.message})]})]}),i.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"checkbox",...Y("useAutoVotes"),className:"hidden"}),i.jsx("button",{type:"button",onClick:()=>$("useAutoVotes",!U,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:U?i.jsx(zl,{className:"w-5 h-5 text-green-600"}):i.jsx(Nd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("label",{onClick:()=>$("useAutoVotes",!U,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",Ke," votes"]})]})]}),!U&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("input",{type:"number",min:"1",...Y("votesPerUser",{required:U?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),G.votesPerUser&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:G.votesPerUser.message})]})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(Tt,{variant:"danger",type:"button",onClick:()=>s(),disabled:a,className:"flex items-center gap-2",children:[i.jsx(to,{className:"h-4 w-4"}),a?"Deleting...":"Delete Session"]}),i.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[i.jsx(Tt,{variant:"secondary",type:"button",onClick:ve,children:"Save Draft"}),i.jsx(Tt,{variant:"primary",type:"button",onClick:async ie=>{ie.preventDefault(),ie.stopPropagation(),V(),await oe(ne=>B(ne,!1),ne=>{alert("Please fix form errors: "+JSON.stringify(ne))})()},children:"Save Changes"})]})]}),w&&ee&&(()=>{const ie=Ie.find(ne=>ne.id===ee);return ie?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{j(!1),x(ie.color_hex??null),_(ie.color_hex??"#2D4660"),N(null)},children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:ne=>ne.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:b,onChange:ne=>{_(ne.target.value),x(ne.target.value)},ref:ne=>{ne&&w&&setTimeout(()=>ne.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsx("button",{type:"button",onClick:()=>{if(!ee||!b)return;const ne=Ie.find(et=>et.id===ee);if(!ne)return;if((ne.color_hex||null)===b){j(!1);return}N(b),x(b),j(!1)},disabled:T,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:b,height:"260px",minWidth:"100px"},children:T?i.jsx(Xo,{className:"h-8 w-8 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(yn,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function _Z({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:a,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:v,votingSession:x,azureDevOpsConfig:w,onUpdateAzureDevOpsConfig:j,onPreviewAzureDevOpsFeatures:b,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:C,azureFetchError:N,onInitiateOAuth:T,availableStates:A,availableAreaPaths:P,availableTags:M,previewFeatures:F,showPreviewModal:Q,setShowPreviewModal:q,onConfirmSync:ae,onReplaceAll:Y,onUpdateVotingSession:oe,onFetchStatesForType:V,onFetchAreaPathsForTypeAndState:K,onFetchTagsForTypeStateAndAreaPath:ge,onFetchTypesAndStatesForAreaPath:$,onFetchTypesAndStatesForTags:G,onFetchTypesAndAreaPathsForStates:ce,suggestedFeatures:le,otherSessions:U,onPromoteSuggestion:ee,onMoveSuggestion:ue,onEditSuggestion:$e,onDeleteSuggestion:Oe,adminPerspective:_e="session",projectOptions:Ie}){const Ke=za(),{currentUser:B,currentSession:ve,setCurrentSession:ie}=tl(),[ne,pt]=y.useState(()=>w.project?[w.project]:Ie[0]?[Ie[0]]:[]),[et,Be]=y.useState(0);y.useEffect(()=>{w.project?pt([w.project]):Ie.length>0?pt([Ie[0]]):pt([])},[w.project,Ie]);const[ft,De]=y.useState(!1),[rt,rr]=y.useState(!1),[R,L]=y.useState(!1),[H,ke]=y.useState(!1),Ee=y.useRef(null),[Te,Fe]=y.useState(!1),[wt,Me]=y.useState(!1),[ze,bt]=y.useState(!1),Et=_e==="system"&&wt,ar=_e==="session"||_e==="system"&&!wt&&ze,[$t,We]=y.useState(0),[Ye,at]=y.useState(0),jt=y.useRef(null),[gt,Xt]=y.useState(null),[Ht,vr]=y.useState(null),[Zt,lr]=y.useState(!1),[Qt,hr]=y.useState(null),[cr,te]=y.useState([]),[Xe,ot]=y.useState([]),[At,er]=y.useState(!1),[_r,Dr]=y.useState(null),ir=y.useRef(null),[Kt,ur]=y.useState(null),[xr,Er]=y.useState(null),[fr,br]=y.useState(!1),[Gt,Lt]=y.useState(null),[$r,or]=y.useState(null),[Lr,Wn]=y.useState(""),[cs,An]=y.useState(null),[es,us]=y.useState(!1),[nr,xn]=y.useState(null),[kr,Pn]=y.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[ds,On]=y.useState([]),[js,Tn]=y.useState(null),[Vr,J]=y.useState(!1),[ye,He]=y.useState(null),[Pe,I]=y.useState(!1),[W,Z]=y.useState(null),[Ce,Ge]=y.useState(!1),[Se,Ze]=y.useState([]),[Vt,Nr]=y.useState(!1),[Ve,kt]=y.useState([]),[yt,Sr]=y.useState(!1),[ht,mr]=y.useState(null),[pr,fn]=y.useState(null),[hn,Us]=y.useState(null),[va,fs]=y.useState(""),[In,Br]=y.useState(null),[ks,Dn]=y.useState(!1),[qr,$n]=y.useState(!1),[wn,yo]=y.useState("#2D4660"),[Ps,ci]=y.useState(!1),[vo,ll]=y.useState(!1),ui=y.useMemo(()=>{const O={};return Ve.forEach(he=>{he.id&&he.name&&(O[he.id]=he.name)}),O},[Ve]),xo=y.useMemo(()=>{const O={};return Ve.forEach(he=>{he.id&&he.color_hex&&(O[he.id]=he.color_hex)}),O},[Ve]),di=y.useMemo(()=>Ur({...x,product_id:x.product_id??(ve==null?void 0:ve.product_id)??x.productId??null,product_name:null},ui),[x,ve,ui]),fi=y.useMemo(()=>{const O=x.product_id??x.productId??null;return O?xo[O]??null:null},[x,xo]),xa=y.useMemo(()=>gr(di,fi),[di,fi]),Os=y.useRef(null);y.useEffect(()=>{(async()=>{if(!B)return;const he=await eo(B.id);Me(he);const{data:Ne}=await je.from("product_owners").select("session_id").eq("user_id",B.id).limit(1);bt(Ne&&Ne.length>0)})()},[B]);const wa=y.useCallback(async()=>{const O=(ve==null?void 0:ve.id)||(x==null?void 0:x.id);if(!O){We(0),at(0);return}try{const[he,Ne]=await Promise.all([Bm(O).catch(nt=>(console.error("[AdminDashboard] Error loading admins:",nt),[])),mv(O).catch(nt=>(console.error("[AdminDashboard] Error loading stakeholders:",nt),[]))]);We(he.length),at(Ne.length)}catch(he){console.error("[AdminDashboard] Error loading admin/stakeholder counts:",he),We(0),at(0)}},[ve==null?void 0:ve.id,x]);y.useEffect(()=>{wa()},[wa]),y.useEffect(()=>{const O=()=>{wa()};return window.addEventListener("focus",O),()=>window.removeEventListener("focus",O)},[wa]),y.useEffect(()=>{const O=(B==null?void 0:B.tenant_id)??(B==null?void 0:B.tenantId)??null;if(!O){Os.current=null,kt([]),mr(null);return}if(Os.current===O)return;let he=!1;return(async()=>{Sr(!0),mr(null);try{const nt=await Ho(O);if(he)return;kt(nt),Os.current=O}catch(nt){if(he)return;console.error("Error loading products for admin dashboard:",nt),qc!=null&&qc(nt)?mr("Products are not configured yet. Please create the `products` table in Supabase."):mr("Unable to load products. Please try again."),kt([]),Os.current=null}finally{he||Sr(!1)}})(),()=>{he=!0}},[B==null?void 0:B.tenant_id,B==null?void 0:B.tenantId]);const Su=y.useCallback(async()=>{if(pr){ci(!0);try{await bE(pr.id),kt(O=>O.filter(he=>he.id!==pr.id)),fn(null)}catch(O){console.error("Error deleting product from admin dashboard:",O),mr("Failed to delete product. Please try again.")}finally{ci(!1)}}},[pr]),_u=y.useCallback(O=>{const he=O.filter(Ne=>Ne==null?void 0:Ne.trim()).map(Ne=>Ne.trim());if(pt(he),he.length>0&&he[0]!==(w.project||"")){const Ne={...w,project:he[0]};j(Ne)}Be(Ne=>Ne+1)},[w,j]),{register:wo,handleSubmit:bo,reset:hi}=Cd({defaultValues:{reason:"",details:""}}),{control:Ii,handleSubmit:Ss,reset:mi,register:Ts,formState:{errors:jo}}=Cd({defaultValues:{reason:"",details:""}}),Di="2099-12-31",Is=O=>O?O.split("T")[0]===Di:!1,ko=O=>{if(!O.is_active){const he=!O.title||O.title==="Untitled Session"||O.title.trim()==="",Ne=!O.goal||O.goal.trim()==="";return he||Ne}return!1},ms=(O=>{if(ko(O))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Wh};const he=new Date,Ne=O.startDate||O.start_date,nt=O.endDate||O.end_date,_t=new Date(Ne),wr=new Date(nt);return he<_t?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Ux}:he>wr?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:dn}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:yn}})(x),ba=ms.icon,ja=i.jsxs("span",{className:`inline-flex items-center ${ms.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ms.color}`,children:[i.jsx(ba,{className:`${ms.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ms.text]}),D=y.useMemo(()=>{const O=Ne=>{const nt=Ne.type==="reopen",_t=Ne.createdAt||null,wr=Ne.actorName||"Admin",Jr=_t?` ${Sn(_t)}`:"";return{id:Ne.id,type:Ne.type,reason:Ne.reason,details:Ne.details??null,title:nt?`Reopened${Jr} by ${wr}`:`Ended early${Jr} by ${wr}`,description:`${Ne.reason}${Ne.details?": "+Ne.details:""}`,iconBgClass:nt?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:nt?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:nt?"text-[#1E5461]":"text-[#C89212]",textColorClass:nt?"text-[#1E5461]":"text-[#6A4234]"}};if(Se.length>0)return Se.map(Ne=>O(Ne));const he=[];return x.reopenReason&&he.push({id:"fallback-reopen",sessionId:(ve==null?void 0:ve.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&he.push({id:"fallback-ended-early",sessionId:(ve==null?void 0:ve.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),he.map(Ne=>O(Ne))},[Se,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,ve==null?void 0:ve.id]);y.useEffect(()=>{D.length<=2&&Nr(!1)},[D.length]);const se=y.useCallback(async()=>{if(!(ve!=null&&ve.id)){Ze([]);return}try{const O=await m$(ve.id);Ze(O)}catch(O){console.error("Error loading session status notes:",O)}},[ve==null?void 0:ve.id]);y.useEffect(()=>{se()},[se]);const fe=y.useCallback(O=>{O.stopPropagation(),ve&&ie(ve);const he=(x==null?void 0:x.product_id)??(x==null?void 0:x.productId)??(ve==null?void 0:ve.product_id)??(ve==null?void 0:ve.productId)??null,Ne=`/users?filter=product-owner&perspective=${_e}${he?`&product=${he}`:""}`;Ke(Ne)},[ve,ie,Ke,_e,x]),Ae=y.useCallback(O=>{O.stopPropagation(),ve&&ie(ve);const he=(x==null?void 0:x.product_id)??(x==null?void 0:x.productId)??(ve==null?void 0:ve.product_id)??(ve==null?void 0:ve.productId)??null,Ne=`/users?filter=stakeholder&perspective=${_e}${he?`&product=${he}`:""}`;Ke(Ne)},[ve,ie,Ke,_e,x]),Qe=y.useCallback(async O=>{if(ve!=null&&ve.id)try{const he=await p$({session_id:ve.id,type:O.type,reason:O.reason,details:O.details??null,actor_id:O.actorId??null,actor_name:O.actorName||"Admin"});Ze(Ne=>{const nt=Ne.findIndex(_t=>_t.id===he.id);if(nt!==-1){const _t=[...Ne];return _t[nt]=he,_t}return[he,...Ne]})}catch(he){console.error("Error logging session status note:",he)}},[ve==null?void 0:ve.id]);y.useEffect(()=>{nr&&(Pn({title:nr.title,summary:nr.summary??"",whatWouldItDo:nr.whatWouldItDo??"",howWouldItWork:nr.howWouldItWork??""}),On(nr.attachment_urls?[...nr.attachment_urls]:[]),Tn(null))},[nr]),y.useEffect(()=>{$r&&U.length>0?Wn(U[0].id):Wn(""),An(null)},[$r,U]);const tt=O=>{const he=O.isDraft||!1,Ne="2099-12-31",nt=O.startDate&&O.startDate.trim()?O.startDate:Ne,_t=O.endDate&&O.endDate.trim()?O.endDate:Ne,wr=O.productId&&O.productId.trim()!==""?O.productId:null,Jr=wr&&Ve.find(on=>on.id===wr)||null,ta={...x,title:O.title.trim()||"Untitled Session",goal:O.goal.trim()||"",votesPerUser:O.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(O.votesPerUser),useAutoVotes:O.useAutoVotes,startDate:new Date(nt).toISOString(),endDate:new Date(_t+"T23:59:59").toISOString(),isActive:he?!1:x.isActive,product_id:(Jr==null?void 0:Jr.id)??null,product_name:null};oe(ta),De(!1)},we=O=>{var nt,_t;const he=new Date().toISOString(),Ne={...x,originalEndDate:x.endDate,endDate:he,isActive:!1,endedEarlyBy:(B==null?void 0:B.name)||"Admin",endedEarlyReason:O.reason,endedEarlyDetails:(nt=O.details)!=null&&nt.trim()?O.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};oe(Ne),Qe({type:"ended-early",reason:O.reason,details:(_t=O.details)!=null&&_t.trim()?O.details.trim():null,actorName:(B==null?void 0:B.name)||"Admin",actorId:(B==null?void 0:B.id)??null}),rr(!1),hi()},pe=O=>{var nt,_t;const he=new Date;he.setDate(he.getDate()+7);const Ne={...x,endDate:he.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:O.reason,reopenDetails:(nt=O.details)!=null&&nt.trim()?O.details.trim():null,reopenedBy:(B==null?void 0:B.name)||"Admin",reopenedAt:new Date().toISOString()};oe(Ne),Qe({type:"reopen",reason:O.reason,details:(_t=O.details)!=null&&_t.trim()?O.details.trim():null,actorName:(B==null?void 0:B.name)||"Admin",actorId:(B==null?void 0:B.id)??null}),L(!1),mi()},lt=async(O,he)=>{const Ne={...w,organization:O,project:he};j(Ne),T()},Rt=O=>{xn(O)},ut=async()=>{if(!nr)return;const O=kr.title.trim();if(!O){Tn("Title is required.");return}J(!0),Tn(null);try{await $e(nr.id,{title:O,summary:kr.summary.trim()?kr.summary.trim():null,whatWouldItDo:kr.whatWouldItDo.trim()?kr.whatWouldItDo.trim():null,howWouldItWork:kr.howWouldItWork.trim()?kr.howWouldItWork.trim():null,attachment_urls:ds.length>0?ds:null}),xn(null),On([])}catch(he){console.error("Error updating suggestion:",he),Tn("Failed to update the suggestion. Please try again.")}finally{J(!1)}},Pt=async()=>{if($r){if(!Lr){An("Please select a session.");return}try{if(!await $x(Lr)){An("The selected session no longer exists. Please refresh and try again.");return}}catch{An("The selected session no longer exists. Please refresh and try again.");return}us(!0),An(null);try{await ue($r.id,Lr),or(null)}catch(O){console.error("Error moving suggestion:",O),An("Failed to move the suggestion. Please try again.")}finally{us(!1)}}},Mt=async()=>{if(xr){br(!0),Lt(null);try{await ee(xr.id),Er(null)}catch(O){console.error("Error promoting suggestion:",O),Lt("Failed to move the suggestion into the current session.")}finally{br(!1)}}},Re=async()=>{if(ye){I(!0),Z(null);try{await Oe(ye.id),He(null)}catch(O){console.error("Error deleting suggestion:",O),Z("Failed to delete the suggestion. Please try again.")}finally{I(!1)}}},Yt=y.useCallback(()=>{De(!1),a()},[a]),st=y.useCallback(O=>{const he=Array.from(O.target.files||[]),Ne=[],nt=[],_t=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];he.forEach(on=>{_t.includes(on.type)&&(Ne.push(on),on.type.startsWith("image/")?nt.push(URL.createObjectURL(on)):nt.push(""))});const wr=3-cr.length,Jr=Ne.slice(0,wr),ta=nt.slice(0,wr);te(on=>[...on,...Jr]),ot(on=>[...on,...ta]),ir.current&&(ir.current.value="")},[cr.length]),it=y.useCallback(O=>{te(he=>{const Ne=he[O];return Ne&&Ne.type.startsWith("image/")?ot(nt=>{const _t=nt[O];return _t&&URL.revokeObjectURL(_t),nt.filter((wr,Jr)=>Jr!==O)}):ot(nt=>nt.filter((_t,wr)=>wr!==O)),he.filter((nt,_t)=>_t!==O)})},[]),It=y.useCallback(O=>{hr(O),Dr(null),lr(!0)},[]),dt=y.useCallback(()=>{At||(Xe.forEach(O=>{O&&URL.revokeObjectURL(O)}),lr(!1),hr(null),te([]),ot([]),Dr(null),ir.current&&(ir.current.value=""))},[At,Xe]),tr=y.useCallback(async()=>{var O;if(!Qt||cr.length===0){Dr("Please select at least one file to upload.");return}try{er(!0),Dr(null);const he=[];for(let _t=0;_t<cr.length;_t++){const wr=cr[_t],Jr=wr.name.split(".").pop(),ta=`${Date.now()}-${_t}.${Jr}`,on=`features/${Qt.id}/${ta}`;try{const{error:ka}=await je.storage.from("feature-attachments").upload(on,wr,{cacheControl:"3600",upsert:!1});if(ka)console.error("Error uploading file:",ka),(O=ka.message)!=null&&O.includes("Bucket not found")&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:Tp}}=je.storage.from("feature-attachments").getPublicUrl(on);he.push(Tp)}}catch(ka){console.error("Error uploading file:",ka)}}if(he.length===0){Dr("Failed to upload files. Please try again."),er(!1);return}const Ne=Qt.attachmentUrls||[],nt={...Qt,attachmentUrls:[...Ne,...he]};r(nt),dt()}catch(he){console.error("Error submitting attachment:",he),Dr("Failed to upload attachments. Please try again.")}finally{er(!1)}},[Qt,cr,r,dt]),St=y.useCallback((O,he)=>{const Ne=(O.attachmentUrls||[]).filter(wr=>wr!==he),nt={...O,attachmentUrls:Ne};r(nt);const _t=he.match(/features\/[^\/]+\/[^\/]+$/);_t&&je.storage.from("feature-attachments").remove([_t[0]]).catch(wr=>console.error("Error deleting file from storage:",wr))},[r]);return y.useEffect(()=>{if(!H)return;const O=he=>{Ee.current&&!Ee.current.contains(he.target)&&ke(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[H]),y.useEffect(()=>{if(!Te)return;const O=he=>{jt.current&&!jt.current.contains(he.target)&&Fe(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[Te]),y.useEffect(()=>{if(!Ht)return;const O=he=>{he.target.closest(".feature-actions-dropdown-container")||vr(null)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[Ht]),i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Ke("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Op,{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),B&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",B.name,(()=>{const O=wt?"system-admin":ze?"product-owner":"stakeholder",he=O==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Mr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):O==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Cr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(nn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),Ne=Et?"system-admin":ar?"product-owner":"stakeholder";if(Ne===O)return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",he]});const nt=Ne==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Mr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):Ne==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Cr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(nn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",he,i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",nt]})]})})()]})]})]}),i.jsxs("div",{ref:Ee,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&i.jsxs("button",{onClick:v,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(un,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),i.jsxs("button",{onClick:()=>Ke(Et||ar?`/users?perspective=${_e}&filter=all`:"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[Et||ar?i.jsx(Cr,{className:"mr-2 h-4 w-4"}):i.jsx(kn,{className:"mr-2 h-4 w-4"}),Et||ar?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>Ke("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(kn,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),i.jsx("button",{onClick:p,className:"flex items-center justify-center p-2 w-10 h-10 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>ke(!H),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),H&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[x.isActive&&i.jsxs("button",{onClick:()=>{ke(!1),v()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(un,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),i.jsxs("button",{onClick:()=>{ke(!1),Ke(Et||ar?`/users?perspective=${_e}&filter=all`:"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[Et||ar?i.jsx(Cr,{className:"h-4 w-4 mr-2 text-gray-700"}):i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-700"}),Et||ar?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>{ke(!1),Ke("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs("button",{onClick:()=>{ke(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Eh,{className:"h-4 w-4 mr-2 text-gray-700"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{ke(!1),De(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),i.jsx("button",{onClick:()=>{ke(!1),p()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:di?"3.5rem":"0"},children:[di&&i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:xa.background,color:xa.text,borderColor:xa.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&ll(!0)},onMouseLeave:()=>ll(!1),onClick:O=>{const he=x.product_id||x.productId;if(!he)return;O.stopPropagation(),O.preventDefault();const Ne=Ve.find(nt=>nt.id===he);Ne&&(Us(Ne),fs(Ne.name||""),Br(Ne.color_hex||null),yo(Ne.color_hex||"#2D4660"))},children:[i.jsx(wv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:di}),(x.product_id||x.productId)&&vo&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Wh,{className:"h-4 w-4",style:{color:xa.text}})})]}),i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),i.jsxs("div",{ref:jt,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:fe,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#576C71] text-white hover:bg-[#1E5461]",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Admins",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:$t})]}),i.jsxs("button",{onClick:Ae,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#1E5461] text-white hover:bg-[#576C71]",children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"Stakeholders",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Ye})]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs(Tt,{variant:"gold",onClick:s,className:"flex items-center",children:[i.jsx(Eh,{className:"h-4 w-4 mr-2"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs(Tt,{variant:"primary",onClick:()=>De(!0),className:"flex items-center",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Fe(!Te),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),Te&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:O=>{Fe(!1),fe(O)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admins",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:$t})]}),i.jsxs("button",{onClick:O=>{Fe(!1),Ae(O)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Stakeholders",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Ye})]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs("button",{onClick:()=>{Fe(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Eh,{className:"h-4 w-4 mr-2 text-gray-700"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Fe(!1),De(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),yt&&i.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),ht&&i.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:ht}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),Is(x.startDate)||Is(x.endDate)?i.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Sn(x.startDate)," - ",Sn(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&i.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[i.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(dn,{className:"h-3 w-3 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[i.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&i.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center",children:ja}),(x.isActive||ji(x.endDate))&&i.jsx(Tt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?rr(!0):(mi(),L(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),x.goal&&x.goal.trim()||D.length>0?i.jsx("div",{className:"pt-3",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[x.goal&&x.goal.trim()&&i.jsxs("div",{className:"flex-[2] relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsxs("div",{className:"relative flex items-start gap-5",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Ym,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]})]}),D.length>0&&i.jsxs("div",{className:"flex-[1] rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[(D.length===1||D.length>2)&&i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[D.length===1&&i.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),D.length>2&&i.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px] ml-auto",children:[i.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Vt?i.jsx(Ll,{className:"h-2.5 w-2.5"}):i.jsx(pn,{className:"h-2.5 w-2.5"})}),i.jsx("button",{type:"button",onClick:()=>Nr(O=>!O),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Vt?"Show Less":"Show More"})]})]}),i.jsx("div",{className:"space-y-3",children:D.slice(0,Vt?D.length:2).map(O=>{const he=O.type==="reopen"?Xo:dn;return i.jsxs("div",{className:`flex items-start gap-3 text-sm ${O.textColorClass}`,children:[i.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${O.iconBgClass} ${O.iconBorderClass} border rounded-lg`,children:i.jsx(he,{className:`h-3.5 w-3.5 ${O.iconColorClass}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:O.title}),i.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:O.description})]})]},O.id)})}),D.length>2&&!Vt&&i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})]})}):null]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0",children:[i.jsxs("div",{className:"flex items-center pb-[20px]",children:[i.jsx("img",{src:AC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]}),w.enabled&&i.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center flex-shrink-0 pr-[10px] mb-[-15px]",children:[i.jsx(_n,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]}),w.enabled?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yn,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),i.jsx("span",{className:"text-green-500",children:""}),i.jsxs("span",{className:"text-sm text-green-700 whitespace-nowrap",children:[i.jsx("span",{className:"font-medium",children:"Organization:"})," ",w.organization]}),i.jsx("span",{className:"text-green-500",children:""}),i.jsx("span",{className:"text-sm text-green-700 font-medium whitespace-nowrap",children:"Project:"}),i.jsx("div",{className:"min-w-[150px]",children:i.jsx(md,{options:Ie,value:ne,onChange:_u,placeholder:"Select projects..."})})]}),i.jsxs("div",{className:"flex items-start mt-1",children:[w.lastSyncTime&&i.jsxs("div",{className:"text-sm text-green-700 ml-7 mt-[-5px]",children:[i.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Sn(w.lastSyncTime)]}),i.jsx("div",{className:"text-xs text-green-700 ml-[300px]",children:"Switching projects will clear the filters below."})]})]})}),i.jsx(kZ,{config:w,onUpdateConfig:j,onPreview:b,isFetching:C,availableStates:A,availableAreaPaths:P,availableTags:M,previewFeatures:F,showPreviewModal:Q,onFetchStatesForType:V,onFetchAreaPathsForTypeAndState:K,onFetchTagsForTypeStateAndAreaPath:ge,onFetchTypesAndStatesForAreaPath:$,onFetchTypesAndStatesForTags:G,onFetchTypesAndAreaPathsForStates:ce,resetSignal:et})]}):i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[i.jsx("img",{src:AC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),i.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),i.jsx(Tt,{variant:"primary",onClick:()=>lt("newmill",ne[0]||Ie[0]||"Product"),className:"inline-flex items-center",disabled:C,children:C?i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),N&&i.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:N})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[le.length," ",le.length===1?"suggestion":"suggestions"]}),le.length>1&&i.jsx(Tt,{variant:"gold",onClick:()=>Ge(!Ce),className:"text-xs px-3 py-1 flex items-center gap-1",children:Ce?i.jsxs(i.Fragment,{children:[i.jsx(Ll,{className:"h-3.5 w-3.5"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),le.length===0?i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):i.jsx("div",{className:`space-y-4 pr-1 ${Ce?"":"max-h-[360px] overflow-y-auto"}`,children:le.map(O=>{const he=O.requester_name||O.requester_email||"Anonymous";return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"md:flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:O.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",i.jsx("span",{className:"font-medium text-[#1E5461]",children:he}),O.requester_email&&i.jsxs(i.Fragment,{children:[" ","(",i.jsx("a",{href:`mailto:${O.requester_email}`,className:"text-[#1E5461] hover:underline",children:O.requester_email}),")"]})," on ",Sn(O.created_at)]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[i.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[i.jsxs(Tt,{variant:"primary",onClick:()=>{Lt(null),Er(O)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(FM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),i.jsxs(Tt,{variant:"secondary",onClick:()=>{U.length>0&&or(O)},disabled:U.length===0,className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(Da,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),i.jsxs(Tt,{variant:"secondary",onClick:()=>Rt(O),className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(Vh,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),i.jsxs(Tt,{variant:"danger",onClick:()=>{Z(null),He(O)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(to,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),U.length===0&&i.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(dn,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.summary&&O.summary.length>0?O.summary:"No summary provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Km,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.whatWouldItDo&&O.whatWouldItDo.length>0?O.whatWouldItDo:"No details provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(FF,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.howWouldItWork&&O.howWouldItWork.length>0?O.howWouldItWork:"No implementation details provided."})]})]}),O.attachment_urls&&O.attachment_urls.length>0&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(xs,{className:"h-4 w-4 text-[#2D4660]"}),i.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",O.attachment_urls.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:O.attachment_urls.map((Ne,nt)=>{const _t=Ne.match(/\.(jpg|jpeg|png|gif|webp)$/i),wr=Ne.match(/\.pdf$/i),Jr=Ne.split("/").pop()||`attachment-${nt+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[_t?i.jsx("a",{href:Ne,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:Ne,alt:Jr,className:"w-full h-full object-cover"})}):wr?i.jsx("a",{href:Ne,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(xs,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:Ne,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(xs,{className:"h-8 w-8 text-gray-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:Jr.length>18?`${Jr.substring(0,18)}...`:Jr})]},nt)})})]})]})},O.id)})})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),i.jsxs(Tt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[i.jsx(pn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),i.jsx("div",{className:"w-full overflow-x-auto max-h-[600px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-30",children:"Title"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Type"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Epic"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"State"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Area Path"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Votes"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(O=>i.jsxs("tr",{className:"align-top group hover:bg-gray-50 bg-white",onMouseEnter:()=>{Ht||Xt(O.id)},onMouseLeave:()=>Xt(null),children:[i.jsx("td",{className:"sticky left-0 bg-white group-hover:bg-gray-50 px-4 py-3 z-10",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.title}),O.description&&O.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[O.description.replace(/<[^>]*>/g,"").substring(0,100),O.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),O.attachmentUrls&&O.attachmentUrls.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:O.attachmentUrls.map((he,Ne)=>{const nt=he.match(/\.(jpg|jpeg|png|gif|webp)$/i),_t=he.match(/\.pdf$/i);return i.jsxs("div",{className:"relative group/thumb border border-gray-300 rounded overflow-hidden cursor-pointer hover:border-[#C89212] transition-colors",style:{width:"40px",height:"40px"},onClick:()=>ur(he),children:[nt?i.jsx("img",{src:he,alt:`Attachment ${Ne+1}`,className:"w-full h-full object-cover"}):_t?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(xs,{className:"h-4 w-4 text-red-600"})}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(xs,{className:"h-4 w-4 text-gray-600"})}),i.jsx("button",{type:"button",onClick:wr=>{wr.stopPropagation(),St(O,he)},className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",style:{width:"16px",height:"16px"},title:"Remove attachment",children:i.jsx(_n,{className:"h-2.5 w-2.5"})})]},Ne)})}),O.tags&&O.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 items-center",children:[O.tags.slice(0,3).map((he,Ne)=>i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(dS,{className:"h-3 w-3 mr-1"}),he]},Ne)),O.tags.length>3&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(dS,{className:"h-3 w-3 mr-1"}),"+",O.tags.length-3]})]})]})})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:(()=>{const he=O.workItemType||O.work_item_type,Ne=KT(he);if(Ne&&O.azureDevOpsId){const nt=Ne.icon,wr=(on=>{const ka=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(on);return ka?{r:parseInt(ka[1],16),g:parseInt(ka[2],16),b:parseInt(ka[3],16)}:null})(Ne.color),Jr=wr?`rgba(${wr.r}, ${wr.g}, ${wr.b}, 0.1)`:`${Ne.color}20`,ta=wr?`rgba(${wr.r}, ${wr.g}, ${wr.b}, 0.2)`:`${Ne.color}40`;return i.jsxs("a",{href:O.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:on=>on.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:Jr,color:Ne.color,borderColor:Ne.color},onMouseEnter:on=>{on.currentTarget.style.backgroundColor=ta},onMouseLeave:on=>{on.currentTarget.style.backgroundColor=Jr},title:"View in Azure DevOps",children:[i.jsx(nt,{className:"h-3 w-3 mr-1",style:{color:Ne.color}}),O.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(he&&O.azureDevOpsId)return i.jsxs("a",{href:O.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:nt=>nt.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:he}),O.azureDevOpsId.replace(/^ado-/,"#")]});if(Ne){const nt=Ne.icon;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(nt,{className:"w-4 h-4",style:{color:Ne.color}}),O.azureDevOpsId&&i.jsx("span",{className:"text-xs text-gray-600",children:O.azureDevOpsId.replace(/^ado-/,"#")})]})}else if(he)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:he})}return i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})()}),i.jsx("td",{className:`hidden md:table-cell px-4 py-3 align-middle ${O.epic||O.workItemType&&O.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,onMouseEnter:he=>he.stopPropagation(),onMouseLeave:he=>he.stopPropagation(),children:O.workItemType&&O.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):O.epic?O.epicId?i.jsx("a",{href:`https://dev.azure.com/${w.organization}/${w.project}/_workitems/edit/${O.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:he=>he.stopPropagation(),className:"inline-block w-full",children:i.jsx(Kl,{name:O.epic,epicId:String(O.epicId),description:O.description,className:"hover:opacity-80"})}):i.jsx(Kl,{name:O.epic,description:O.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:O.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:O.state})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm",children:i.jsx("div",{className:"text-gray-600",children:O.areaPath&&typeof O.areaPath=="string"&&O.areaPath.trim()!==""?i.jsx("div",{className:"max-w-xs break-words text-xs",children:O.areaPath}):i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:O.votes}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:i.jsx("div",{className:"flex items-center justify-end feature-actions-dropdown-container",children:i.jsxs("div",{className:"relative inline-block",children:[(gt===O.id&&!Ht||Ht===O.id)&&i.jsx("button",{onClick:()=>vr(Ht===O.id?null:O.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"Feature actions",children:i.jsx(Bx,{className:"h-5 w-5 text-gray-600"})}),Ht===O.id&&i.jsx("div",{className:"absolute right-0 w-56 bg-white border border-gray-200 rounded-lg shadow-lg overflow-visible",style:{zIndex:1e3,top:"auto",bottom:"auto",marginTop:"0.25rem",maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Feature Actions"}),i.jsxs("button",{onClick:()=>{f(O),vr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-blue-50 text-[#2D4660] transition-colors cursor-pointer",children:[i.jsx(Vh,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit Feature"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Modify feature details"})]})]}),i.jsxs("button",{onClick:()=>{It(O),vr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(xs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Add Attachment"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Upload a file"})]})]}),i.jsxs("button",{onClick:()=>{n(O.id),vr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(to,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Delete Feature"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from session"})]})]})]})})]})})})]},O.id))})]})})]}),i.jsx(gn,{isOpen:xr!==null,onClose:()=>{fr||(Er(null),Lt(null))},title:"Move Suggestion to Current Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:xr==null?void 0:xr.title})," into the current session so it can be managed and voted on."]}),Gt&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Gt}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>{fr||(Er(null),Lt(null))},disabled:fr,children:"Cancel"}),i.jsx(Tt,{variant:"primary",onClick:Mt,disabled:fr,children:fr?"Moving...":"Move to Current Session"})]})]})}),i.jsx(gn,{isOpen:$r!==null,onClose:()=>{es||(or(null),An(null))},title:"Move to Future Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:$r==null?void 0:$r.title}),"."]}),U.length>0?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),i.jsx("select",{value:Lr,onChange:O=>Wn(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:es,children:U.map(O=>i.jsxs("option",{value:O.id,children:[O.title," (Starts ",Sn(O.startDate),")"]},O.id))})]}):i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),cs&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:cs}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>{es||(or(null),An(null))},disabled:es,children:"Cancel"}),i.jsx(Tt,{variant:"primary",onClick:Pt,disabled:es||U.length===0,children:es?"Moving...":"Move to Session"})]})]})}),i.jsx(gn,{isOpen:nr!==null,onClose:()=>{Vr||(xn(null),Tn(null))},title:"Edit Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:kr.title,onChange:O=>Pn(he=>({...he,title:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Vr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),i.jsx("textarea",{value:kr.summary,onChange:O=>Pn(he=>({...he,summary:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Vr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),i.jsx("textarea",{value:kr.whatWouldItDo,onChange:O=>Pn(he=>({...he,whatWouldItDo:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Vr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),i.jsx("textarea",{value:kr.howWouldItWork,onChange:O=>Pn(he=>({...he,howWouldItWork:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Vr})]}),ds.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:ds.map((O,he)=>{const Ne=O.match(/\.(jpg|jpeg|png|gif|webp)$/i),nt=O.match(/\.pdf$/i),_t=O.split("/").pop()||`attachment-${he+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[Ne?i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:O,alt:_t,className:"w-full h-full object-cover"})}):nt?i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(xs,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(xs,{className:"h-8 w-8 text-gray-600"})}),i.jsx("button",{type:"button",onClick:()=>{On(wr=>wr.filter((Jr,ta)=>ta!==he))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:Vr,"aria-label":`Remove ${_t}`,children:i.jsx(_n,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:_t.length>18?`${_t.substring(0,18)}...`:_t})]},he)})}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),js&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:js}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(Tt,{variant:"primary",onClick:ut,disabled:Vr,children:Vr?"Saving...":"Save Changes"})})]})}),i.jsx(gn,{isOpen:ye!==null,onClose:()=>{Pe||(He(null),Z(null))},title:"Delete Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold text-[#591D0F]",children:ye==null?void 0:ye.title}),"? This action cannot be undone."]}),W&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:W}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>{Pe||(He(null),Z(null))},disabled:Pe,children:"Cancel"}),i.jsx(Tt,{variant:"danger",onClick:Re,disabled:Pe,children:Pe?"Deleting...":"Delete"})]})]})}),i.jsx(gn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:i.jsx(OC,{onSubmit:O=>{t(O),d(!1)},onCancel:()=>d(!1)})}),i.jsx(gn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&i.jsx(OC,{feature:m,onSubmit:O=>{r({...m,...O}),f(null)},onCancel:()=>f(null)})}),i.jsx(gn,{isOpen:ft,onClose:()=>De(!1),title:"Edit Session Settings",children:i.jsx(SZ,{session:x,featureCount:e.length,onSubmit:tt,onCancel:()=>De(!1),onRequestDeleteSession:Yt,isDeletingSession:l,productName:di,products:Ve,isLoadingProducts:yt,productError:ht,onRequestDeleteProduct:O=>fn(O),onProductColorUpdated:async()=>{const O=(B==null?void 0:B.tenant_id)??(B==null?void 0:B.tenantId)??null;if(O)try{const he=await Ho(O);kt(he)}catch(he){console.error("Error refreshing products after color update:",he)}}})}),pr&&i.jsxs(gn,{isOpen:!0,onClose:()=>fn(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:pr.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>fn(null),disabled:Ps,children:"Cancel"}),i.jsx(Tt,{variant:"danger",onClick:Su,disabled:Ps,children:Ps?"Deleting...":"Delete"})]})]}),i.jsx(jZ,{isOpen:Q,onClose:()=>q(!1),previewFeatures:F,onConfirmSync:ae,onReplaceAll:Y,isFetching:C,config:w}),i.jsx(gn,{isOpen:R,onClose:()=>{L(!1),mi()},title:"Reopen Session",children:i.jsxs("form",{onSubmit:Ss(pe),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),i.jsx(dd,{control:Ii,name:"reason",rules:{required:"Please select a reason"},render:({field:O})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsx(bZ,{options:wZ,value:O.value,onChange:O.onChange,placeholder:"Select a reason..."}),jo.reason&&i.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:jo.reason.message})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Ts("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(Tt,{variant:"secondary",type:"button",onClick:()=>{L(!1),mi()},children:"Cancel"}),i.jsx(Tt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),i.jsx(gn,{isOpen:rt,onClose:()=>{rr(!1),hi()},title:"End Session Early",children:i.jsxs("form",{onSubmit:bo(we),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsxs("select",{...wo("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a reason..."}),i.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),i.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),i.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),i.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),i.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),i.jsx("option",{value:"Low Participation",children:"Low participation rate"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...wo("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[i.jsx("p",{className:"font-medium mb-1",children:"Note:"}),i.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(Tt,{variant:"secondary",type:"button",onClick:()=>{rr(!1),hi()},children:"Cancel"}),i.jsx(Tt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),hn&&i.jsx(gn,{isOpen:!0,onClose:()=>{Us(null),fs(""),Br(null),$n(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:va,onChange:O=>fs(O.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{yo(In||"#2D4660"),$n(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:In?{backgroundColor:In}:{backgroundColor:"#ffffff"},children:!In&&i.jsx("img",{src:HT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:In||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>{Us(null),fs(""),Br(null),$n(!1)},disabled:ks,children:"Cancel"}),i.jsx(Tt,{variant:"primary",onClick:async()=>{if(!(!(hn!=null&&hn.id)||!va.trim())){Dn(!0);try{await wE(hn.id,{name:va.trim(),color_hex:In});const O=(B==null?void 0:B.tenant_id)??(B==null?void 0:B.tenantId);if(O){const he=await Ho(O);kt(he.sort((Ne,nt)=>Ne.name.localeCompare(nt.name)))}Us(null),fs(""),Br(null),$n(!1),onProductColorUpdated&&onProductColorUpdated()}catch(O){console.error("Error updating product:",O),alert("Failed to update product. Please try again.")}finally{Dn(!1)}}},disabled:ks||!va.trim(),children:ks?"Updating...":"Update Product"})]})]})}),qr&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>$n(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:O=>O.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:wn,onChange:O=>yo(O.target.value),ref:O=>{O&&qr&&setTimeout(()=>O.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Br(wn),$n(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:wn,height:"260px",minWidth:"100px"},children:[i.jsx(yn,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),i.jsx(gn,{isOpen:Zt,onClose:dt,title:`Add Attachment - ${(Qt==null?void 0:Qt.title)||""}`,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-700",children:"Upload images or PDF files to attach to this feature (maximum 3 files)."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:ir,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:st,disabled:At||cr.length>=3,className:"hidden",id:"attachment-file-input"}),i.jsxs("label",{htmlFor:"attachment-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${At||cr.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(xs,{className:"h-4 w-4 mr-2"}),cr.length>=3?"Maximum 3 files":"Attach Files"]}),cr.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:cr.map((O,he)=>{const Ne=O.type.startsWith("image/"),nt=O.type==="application/pdf",_t=Xe[he]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[Ne&&_t?i.jsx("img",{src:_t,alt:O.name,className:"w-full h-full object-cover"}):nt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(xs,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>it(he),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${O.name}`,children:i.jsx(_n,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:O.name.length>15?`${O.name.substring(0,15)}...`:O.name})]},he)})})]}),_r&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:_r}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(Tt,{variant:"secondary",onClick:dt,disabled:At,children:"Cancel"}),i.jsx(Tt,{variant:"gold",onClick:tr,disabled:At||cr.length===0,children:At?"Uploading...":"Upload"})]})]})}),Kt&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>ur(null),children:[i.jsx("button",{onClick:()=>ur(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(_n,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:O=>O.stopPropagation(),children:Kt.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:Kt,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):Kt.match(/\.pdf$/i)?i.jsx("iframe",{src:Kt,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(xs,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:Kt,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})}const PC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],NZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},CZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},EZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],AZ=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})}:t?{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})}:null,PZ=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})};case"product-owner":return{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})};default:return null}},OZ=(e,t,r)=>e?"system-admin":t?"product-owner":"stakeholder",kb=(e,t,r,n)=>{const s=OZ(e,t),a=AZ(e,t,r);if(!a)return null;if(n===s)return i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]})]});const l=PZ(n);return l?i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]}),i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",i.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:l.icon}),i.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null},$m=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},Rm=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",Sb=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",TZ=e=>e<=0?"bg-[#EEE8E7]":e<=2?"bg-[#F0ECEB]":e<=4?"bg-[#FAF4E7]":"bg-[#E9EEEF]",IZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},DZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},pd=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",kh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},$Z=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Op({src:e,alt:t,style:r,className:n,...s}){const[a,l]=y.useState(!1);return a?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):i.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const Tt=Ft.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:a="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return i.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${a}`,...l,children:t})}),gn=({isOpen:e,onClose:t,title:r,children:n,maxWidth:s="max-w-2xl",hideCloseButton:a=!1,hideHeader:l=!1})=>(y.useEffect(()=>{if(e){const u=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,u)}}},[e]),e?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:a?void 0:t,"aria-hidden":"true"}),i.jsxs("div",{className:`inline-block w-full ${s} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[l?!a&&i.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(_n,{className:"h-5 w-5"})})}):i.jsxs("div",{className:"flex items-start justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Km,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:r}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!a&&i.jsx("button",{onClick:t,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsx("div",{className:l?"-mt-4":"mt-2 overflow-visible",children:n})]})]})}):null),Kl=Ft.memo(function({name:t,epicId:r,description:n,truncateAt:s=null,className:a}){if(!t)return null;const l=s===null?t:pd(t,s),u=["flex items-center text-xs text-gray-600",a].filter(Boolean).join(" "),d=n;return i.jsxs("div",{className:`${u} relative group/epic`,children:[i.jsxs("div",{className:"flex items-start gap-1.5 min-w-0",children:[i.jsx(Mr,{className:"h-4 w-4 flex-shrink-0 mt-0.5",style:{color:"rgba(51, 153, 71, 0.6)"}}),i.jsxs("span",{className:"font-normal leading-tight break-words min-w-0 text-gray-600",children:[l,r&&i.jsxs("span",{className:"text-gray-500 ml-1",children:["#",r]})]})]}),d&&i.jsxs("div",{className:"absolute left-0 bottom-full mb-2 opacity-0 group-hover/epic:opacity-100 transition-opacity z-50 w-64 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg pointer-events-none",children:[i.jsx("div",{className:"font-semibold mb-1",children:t}),n&&i.jsx("div",{className:"text-gray-300 mt-2 line-clamp-4",children:n.replace(/<[^>]*>/g,"").trim()}),i.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})});function RZ(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:Mr,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Ym,color:"rgb(119, 59, 147)"}:t==="user story"||t==="story"?{icon:YE,color:"#007acc"}:t==="bug"?{icon:JE,color:"#cc293d"}:t==="task"?{icon:zl,color:"#007acc"}:t==="change request"?{icon:GE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:XE,color:"#007acc"}:t==="issue"?{icon:dn,color:"#cc293d"}:null}const MZ=Ft.memo(function({id:t,url:r,workItemType:n}){if(!t)return null;const s=RZ(n),a=(s==null?void 0:s.icon)||QM,l=(s==null?void 0:s.color)||"#007acc",u=(v,x)=>{if(v.startsWith("rgb(")){const w=v.match(/\d+/g);if(w&&w.length>=3)return`rgba(${w[0]}, ${w[1]}, ${w[2]}, ${x})`}if(v.startsWith("#")){const w=v.replace("#",""),j=parseInt(w.substring(0,2),16),b=parseInt(w.substring(2,4),16),_=parseInt(w.substring(4,6),16);return`rgba(${j}, ${b}, ${_}, ${x})`}return v},d=s?u(l,.2):"rgb(219, 234, 254)",m=s?u(l,.6):"rgb(147, 197, 254)",f=s?u(l,.3):"rgb(191, 219, 254)",p=s?u(l,.8):"rgb(147, 197, 254)";return i.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-1.5 py-1 rounded-md text-xs font-semibold border-2 shadow-sm hover:shadow-md cursor-pointer transition-all duration-200",style:{backgroundColor:d,color:l,borderColor:m},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=f,v.currentTarget.style.borderColor=p},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=d,v.currentTarget.style.borderColor=m},title:"View in Azure DevOps",children:[i.jsx(a,{className:"h-3.5 w-3.5 flex-shrink-0",style:s?{color:l}:{}}),i.jsxs("span",{className:"font-mono",children:["#",t]})]})});Ft.memo(function({endDate:t}){const r=$m(t),n=Rm(r),s=Sb(r);return i.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:`h-5 w-5 mr-2 ${n}`}),i.jsxs("div",{children:[i.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Sn(t)]}),i.jsx("div",{className:"text-sm mt-1",children:r<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function FZ({isShuffling:e,onShuffle:t}){const[r,n]=y.useState("Shuffle Features"),s=y.useRef(null);return y.useEffect(()=>(e?s.current=window.setInterval(()=>{n($Z("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),i.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[i.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:i.jsx(jF,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Ih=Ft.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:a,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[i.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[i.jsx("div",{className:f,children:d==="delete"?i.jsx(to,{className:"h-5 w-5"}):i.jsx(dn,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),i.jsx("div",{className:"p-4 bg-white space-y-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),i.jsx("button",{type:"button",onClick:()=>{s(),a()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),LZ=Ft.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:a,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m,onViewAttachment:f}){const[p,v]=y.useState(!1),[x,w]=y.useState(!1),j=async()=>{if(!(!m||x)){w(!0);try{await m(t.id),v(!0)}catch(_){console.error("Error requesting info:",_)}finally{w(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return i.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.areaPath&&i.jsx("span",{className:"text-sm text-gray-600",children:t.areaPath}),t.azureDevOpsId&&i.jsx("div",{className:"mt-2",children:i.jsx(MZ,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||"",workItemType:t.workItemType})})]}),t.description?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}),t.attachmentUrls&&t.attachmentUrls.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.attachmentUrls.map((_,C)=>{const N=_.match(/\.(jpg|jpeg|png|gif|webp)$/i),T=_.match(/\.pdf$/i);return i.jsx("button",{onClick:()=>f==null?void 0:f(_),className:"relative border border-gray-300 rounded overflow-hidden hover:border-[#C89212] transition-colors cursor-pointer",style:{width:"60px",height:"60px"},title:`View attachment ${C+1}`,children:N?i.jsx("img",{src:_,alt:`Attachment ${C+1}`,className:"w-full h-full object-cover"}):T?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(xs,{className:"h-6 w-6 text-red-600"})}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(xs,{className:"h-6 w-6 text-gray-600"})})},C)})})]}):i.jsxs("div",{className:"mb-4 flex-grow",children:[i.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&i.jsx("div",{className:"transition-all duration-300",children:p?i.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[i.jsx(yn,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:"Thank you! Your request has been sent."})]}):i.jsxs("button",{onClick:j,disabled:x,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(dn,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:x?"Sending...":"Ask Product Owner for more info"})]})})]}),a&&i.jsx("div",{className:"mt-auto pt-3",children:i.jsxs("div",{className:`flex items-center mb-3 gap-2 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&t.epic.trim()&&i.jsx(Kl,{name:t.epic,epicId:t.epicId,truncateAt:null,className:"text-sm bg-gray-100 px-2 py-1 rounded-md"}),i.jsx("div",{className:"flex items-center space-x-2",children:r===0?i.jsxs("button",{onClick:()=>a(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors flex items-center ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:[i.jsx(un,{className:"h-6 w-6 mr-2"}),"Vote"]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>a(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:i.jsx(Ll,{className:"h-6 w-6"})}),i.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),i.jsx("button",{onClick:()=>a(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:i.jsx(pn,{className:"h-6 w-6"})})]})})]})})]})})});function zZ({feature:e,onClose:t}){return y.useEffect(()=>{const r=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${r}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,r)}},[]),i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:i.jsx(_n,{className:"h-5 w-5"})})]}),e.voters.length===0?i.jsx("p",{className:"text-gray-500",children:"No votes yet"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:r.name}),i.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),i.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function UZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:a,votingSession:l,effectiveVotesPerUser:u,onLogout:d,currentUser:m,isSystemAdmin:f,isSessionAdmin:p,isStakeholder:v,currentRole:x=f?"system-admin":p?"product-owner":"stakeholder"}){const w=za(),[j,b]=y.useState(!1),_=y.useRef(null);y.useEffect(()=>{if(!j)return;const P=M=>{_.current&&!_.current.contains(M.target)&&b(!1)};return document.addEventListener("mousedown",P),document.addEventListener("touchstart",P,{passive:!0}),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",P)}},[j]);const C=y.useMemo(()=>[...e].sort((P,M)=>M.votes-P.votes),[e]),N=y.useMemo(()=>C.slice(0,10).map(P=>({name:P.title,votes:P.votes,id:P.id})),[C]),T=$m(l.endDate),A=Rm(T);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>w("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Op,{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>w("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:ji(l.endDate)?"Final Voting Results":"Current Voting Results"}),m&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.name,kb(f,p,v,x)]})]})]}),i.jsxs("div",{ref:_,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs(Tt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(Xs,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(Tt,{variant:"danger",onClick:r,children:"Reset All Votes"}),i.jsxs("button",{onClick:d,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${x==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4"}),x==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>b(!j),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),j&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{b(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{b(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[i.jsx(to,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),i.jsxs("button",{onClick:()=>{b(!1),d()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${x==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4 text-gray-700"}),x==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",l.product_name&&i.jsxs("span",{className:"text-[#1E5461]",children:[l.product_name," - "]}),i.jsx("span",{className:"text-[#1E5461]",children:l.title})]})}),l.isActive&&i.jsx("div",{className:`${Sb(T)} relative z-10 rounded-md p-3 inline-block border ${T<=2?"border-[#6A4234]/20":T<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:`h-4 w-4 mr-2 ${A}`}),i.jsx("span",{className:`${A} font-medium`,children:T<=0?"Voting ends today!":`${T} ${T===1?"day":"days"} remaining until ${Sn(l.endDate)}`})]}),i.jsx("span",{className:`${A} font-medium`,children:"Voting Active"})]})})]}),i.jsx("div",{className:"text-sm text-gray-600 mb-4",children:i.jsxs("span",{children:["Votes per user: ",u]})}),i.jsx("div",{className:"h-72",children:i.jsx(tB,{width:"100%",height:"100%",children:i.jsxs(KQ,{data:N,margin:{top:20,right:30,left:20,bottom:60},children:[i.jsx(OT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),i.jsx(TT,{}),i.jsx(OK,{}),i.jsx(NT,{dataKey:"votes",fill:"#3B82F6",children:N.map((P,M)=>i.jsx(mb,{fill:M%2===0?"#2d4660":"#4f6d8e"},`cell-${M}`))})]})})})]}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),i.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((P,M)=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:M+1}),i.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:P.title}),i.jsx("td",{className:`hidden sm:table-cell px-4 py-4 text-sm ${P.epic||P.workItemType&&P.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:P.workItemType&&P.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):P.epic?i.jsx(Kl,{name:P.epic,epicId:P.epicId,description:P.description}):null}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:P.votes}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("button",{onClick:()=>a(P.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:P.voters.length===0,children:[i.jsx(kn,{className:"h-4 w-4 mr-1"}),P.voters.length," ",P.voters.length===1?"user":"users"]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>t(P.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:P.votes===0,children:"Reset Votes"})})]},P.id))})]})})]}),s&&i.jsx(zZ,{feature:e.find(P=>P.id===s),onClose:()=>a(null)})]})}function BZ({navigate:e,votingSession:t}){return i.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(yn,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",i.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),i.jsx(Tt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function GT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectProductOwner:r,onSelectSystemAdmin:n,showRoleToggle:s=!0,isSessionAdmin:a=!1}){const l=new Date().getFullYear(),u=[];(t||e==="stakeholder")&&u.push({key:"stakeholder",label:"Stakeholder View",icon:i.jsx(kn,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="product-owner")&&u.push({key:"product-owner",label:"Product Owner",icon:i.jsx(Cr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),!a&&(n||e==="system-admin")&&u.push({key:"system-admin",label:"System Admin",icon:i.jsx(Mr,{className:"h-4 w-4 inline mr-2"}),onClick:n});const d=["stakeholder","product-owner","system-admin"];u.sort((f,p)=>{const v=d.indexOf(f.key),x=d.indexOf(p.key);return v-x});const m=s&&u.length>0;return i.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[m&&i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:u.map(({key:f,label:p,icon:v,onClick:x})=>{const w=e===f,j=!x;return i.jsxs("button",{onClick:x,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${w?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!w?"opacity-60 cursor-not-allowed":""}`,children:[v,i.jsx("span",{children:p})]},f)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or Product Owneristrator for assistance with voting."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsxs("p",{children:[" ",l," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function OC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:a}}=Cd({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:PC[0]}});return i.jsxs("form",{onSubmit:s(t),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.description&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),i.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:PC.map(l=>i.jsx("option",{value:l,children:l},l))}),a.epic&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.epic.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx(Tt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),i.jsxs(Tt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function WZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:a,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:p=d?"system-admin":m?"product-owner":"stakeholder"}){const[v,x]=y.useState(!1),w=Object.values(l).reduce((b,_)=>b+_,0),j=u.filter(b=>l[b.id]>0);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Op,{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,kb(d,m,f,p)]})]})]}),i.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&i.jsxs(Tt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(Xs,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),i.jsx("span",{className:"md:hidden",children:"Admin"})]}),i.jsxs(Tt,{variant:"gray",onClick:()=>a("/sessions"),className:"flex items-center",children:[i.jsx(pa,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),i.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(yn,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",i.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",i.jsx("span",{className:"font-semibold",children:t.title}),"."]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),i.jsxs("div",{className:"space-y-3",children:[j.map(b=>i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-gray-700 font-medium",children:b.title}),b.epic&&i.jsx("div",{className:"mt-1",children:i.jsx(Kl,{name:b.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),i.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[b.id]," ",l[b.id]===1?"vote":"votes"]})]},b.id)),i.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),i.jsx("span",{className:"text-[#2d4660]",children:w})]})})]})]}),i.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start text-left",children:[i.jsx(OF,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",i.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),i.jsxs(Tt,{variant:"gold",onClick:()=>x(!0),className:"mx-auto text-lg py-3 px-8",children:[i.jsx(Xo,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),i.jsx(Ih,{show:v,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>x(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const TC=Ft.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:a,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:v,onLogout:x,onSuggestionSubmitted:w,isSystemAdmin:j,isSessionAdmin:b,isStakeholder:_,currentRole:C=j?"system-admin":b?"product-owner":"stakeholder"}){const[N,T]=y.useState([...t]),[A,P]=y.useState(!1),[M,F]=y.useState("idle"),[Q,q]=y.useState(!1),[ae,Y]=y.useState({}),[oe,V]=y.useState(!0),[K,ge]=y.useState(!1),[$,G]=y.useState(!1),[ce,le]=y.useState(""),[U,ee]=y.useState(""),[ue,$e]=y.useState(""),[Oe,_e]=y.useState(""),[Ie,Ke]=y.useState(!1),[B,ve]=y.useState(null),[ie,ne]=y.useState(!1),[pt,et]=y.useState(!1),[Be,ft]=y.useState([]),[De,rt]=y.useState([]),[rr,R]=y.useState(null),L=y.useRef(null),H=y.useRef(null);y.useEffect(()=>{if(!K)return;const We=Ye=>{H.current&&!H.current.contains(Ye.target)&&ge(!1)};return document.addEventListener("mousedown",We),document.addEventListener("touchstart",We,{passive:!0}),()=>{document.removeEventListener("mousedown",We),document.removeEventListener("touchstart",We)}},[K]),y.useEffect(()=>{T([...t])},[t]),y.useEffect(()=>{async function We(){if(!r||!v){V(!1);return}try{const at=(await Uo(v)).filter(jt=>jt.user_id===r.id);if(at.length>0){const jt={};at.forEach(gt=>{jt[gt.feature_id]=gt.vote_count}),Y(jt),q(!0)}else q(!1),Y({})}catch(Ye){console.error("Error checking existing votes:",Ye),q(!1)}finally{V(!1)}}We()},[r,v]);const ke=y.useCallback(async()=>{if(!(!r||!v))try{await y$(v,r.id),q(!1),Y({})}catch(We){console.error("Error changing votes:",We),alert("Failed to reset votes. Please try again.")}},[r,v]),Ee=y.useCallback(()=>{A||(P(!0),F("fadeOut"),setTimeout(()=>{F("rearranging"),setTimeout(()=>{T(DZ(t)),F("fadeIn"),setTimeout(()=>{F("idle"),P(!1)},400)},200)},400))},[t,A]),Te=y.useCallback(async We=>{const Ye=t.find(at=>at.id===We);if(!(!Ye||!r||!v))try{const at=je.supabaseUrl,jt=je.supabaseKey,gt=await fetch(`${at}/functions/v1/create-info-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${jt}`},body:JSON.stringify({session_id:v,feature_id:We,feature_title:Ye.title,requester_id:r.id,requester_name:r.name||"",requester_email:r.email||"",session_name:m.title,feature_description:Ye.description})});if(!gt.ok){const Ht=await gt.json().catch(()=>({error:"Unknown error"}));throw new Error(Ht.error||`HTTP ${gt.status}`)}const Xt=await gt.json();if(console.log("Info request created successfully:",Xt),Xt.adminEmails&&Xt.adminEmails.length>0&&Xt.emailContent){const Ht=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",vr=`${window.location.origin}${Ht}/admin?session=${Xt.emailContent.sessionId}&feature=${Xt.emailContent.featureId}`,Zt=Xt.emailContent.html.replace("{{ADMIN_DASHBOARD_URL}}",vr),lr=Xt.emailContent.text.replace("{{ADMIN_DASHBOARD_URL}}",vr),Qt=Xt.adminEmails.map(hr=>Jc({to:hr,subject:Xt.emailContent.subject,html:Zt,text:lr}).catch(cr=>(console.error(`Failed to send email to ${hr}:`,cr),null)));await Promise.all(Qt),console.log(`Emails sent to ${Xt.adminEmails.length} Product Owner(s)`)}}catch(at){console.error("Error submitting info request:",at);const jt=(at==null?void 0:at.message)||(at==null?void 0:at.toString())||"Unknown error";throw console.error("Full error details:",at),alert(`Failed to submit request: ${jt}. Please try again.`),at}},[t,r,v,m]),Fe=y.useCallback(()=>{ve(null),ne(!1),G(!0)},[]),wt=y.useCallback(()=>{Ie||(De.forEach(We=>{We&&URL.revokeObjectURL(We)}),G(!1),ve(null),ne(!1),le(""),ee(""),$e(""),_e(""),ft([]),rt([]),L.current&&(L.current.value=""))},[Ie,De]),Me=y.useCallback(We=>{const Ye=Array.from(We.target.files||[]),at=[],jt=[],gt=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];Ye.forEach(Zt=>{gt.includes(Zt.type)&&(at.push(Zt),Zt.type.startsWith("image/")?jt.push(URL.createObjectURL(Zt)):jt.push(""))});const Xt=3-Be.length,Ht=at.slice(0,Xt),vr=jt.slice(0,Xt);ft(Zt=>[...Zt,...Ht]),rt(Zt=>[...Zt,...vr]),L.current&&(L.current.value="")},[Be]),ze=y.useCallback(We=>{ft(Ye=>{const at=Ye[We];return at&&at.type.startsWith("image/")?rt(jt=>{const gt=jt[We];return gt&&URL.revokeObjectURL(gt),jt.filter((Xt,Ht)=>Ht!==We)}):rt(jt=>jt.filter((gt,Xt)=>Xt!==We)),Ye.filter((jt,gt)=>gt!==We)})},[]);y.useEffect(()=>()=>{De.forEach(We=>{We&&URL.revokeObjectURL(We)})},[De]);const bt=y.useCallback(async We=>{var Xt,Ht;We.preventDefault();const Ye=ce.trim(),at=U.trim(),jt=ue.trim(),gt=Oe.trim();if(!Ye){ve("Please provide a brief title for your suggestion.");return}if(!v){ve("Unable to link this suggestion to the current session.");return}try{Ke(!0),ve(null);const vr=[];if(Be.length>0)for(let lr=0;lr<Be.length;lr++){const Qt=Be[lr],hr=Qt.name.split(".").pop(),cr=`${Date.now()}-${lr}.${hr}`,te=`suggestions/${v}/${cr}`;try{const{data:Xe,error:ot}=await je.storage.from("feature-attachments").upload(te,Qt,{cacheControl:"3600",upsert:!1});if(ot)console.error("Error uploading file:",ot),((Xt=ot.message)!=null&&Xt.includes("Bucket not found")||(Ht=ot.message)!=null&&Ht.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:At}}=je.storage.from("feature-attachments").getPublicUrl(te);vr.push(At)}}catch(Xe){console.error("Error uploading file:",Xe)}}const Zt=await j$({session_id:v,title:Ye,description:at||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:jt||null,howWouldItWork:gt||null,attachment_urls:vr.length>0?vr:null});try{const Qt=(await Bm(v)).map(hr=>{var cr;return(cr=hr.user)==null?void 0:cr.email}).filter(hr=>!!hr);if(Qt.length>0){const hr=(m==null?void 0:m.title)||"this session",cr=(r==null?void 0:r.name)||"A user",te=(r==null?void 0:r.email)||"",Xe="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",ot=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",At=`${window.location.origin}${ot}/admin`,er=ir=>ir.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),_r=ir=>er(ir).replace(/\n/g,"<br />"),Dr=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Xe}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${er(hr)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${er(cr)}</strong>${te?` (${er(te)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${er(Ye)}</h3>
              
              ${at?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${_r(at)}</span>
              </p>
              `:""}
              
              ${jt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${_r(jt)}</span>
              </p>
              `:""}
              
              ${gt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${_r(gt)}</span>
              </p>
              `:""}
              
              ${vr.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${vr.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${At}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(Qt.map(ir=>Jc({to:ir,subject:`New Feature Suggestion: ${Ye}`,html:Dr}).catch(Kt=>{console.error(`Failed to send email to ${ir}:`,Kt)})))}}catch(lr){console.error("Error sending admin emails:",lr)}w==null||w(Zt),G(!1),le(""),ee(""),$e(""),_e(""),ft([]),rt([]),L.current&&(L.current.value=""),et(!0)}catch(vr){console.error("Error submitting feature suggestion:",vr),ve("We were unable to submit your suggestion. Please try again in a moment.")}finally{Ke(!1)}},[U,ce,ue,Oe,Be,r,v,m,w]);if(!r)return null;if(oe)return i.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(Q)return i.jsx(WZ,{currentUser:r,votingSession:m,onChangeVotes:ke,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:ae,features:t,isSystemAdmin:j,isSessionAdmin:b,isStakeholder:_,currentRole:C});const Et=p-s,ar=Et===0,$t=m.isActive;return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Op,{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,kb(j,b,_,C)]})]})]}),i.jsxs("div",{ref:H,className:"relative z-40 flex items-start md:items-center",children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&i.jsxs(Tt,{variant:"primary",onClick:u,className:"flex items-center",children:[i.jsx(Xs,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(Tt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),i.jsxs("button",{onClick:x,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${C==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4"}),C==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>ge(!K),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),K&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[d&&i.jsxs("button",{onClick:()=>{ge(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsx("button",{onClick:()=>{ge(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),i.jsxs("button",{onClick:()=>{ge(!1),x()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${C==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4 text-gray-700"}),C==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",m.product_name&&i.jsxs("span",{className:"text-[#1E5461]",children:[m.product_name," - "]}),i.jsx("span",{className:"text-[#1E5461]",children:m.title})]})})}),m.goal&&m.goal.trim()&&i.jsx("div",{className:"pt-3 mb-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Ym,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const We=$m(m.endDate),Ye=Rm(We),at=Sb(We);return i.jsx("div",{className:`${at} rounded-md p-3 md:p-4 border ${We<=2?"border-[#6A4234]/20":We<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0",children:[i.jsx(Da,{className:`h-5 w-5 mr-2 ${Ye}`}),i.jsxs("div",{className:"leading-tight",style:{marginTop:"10px"},children:[i.jsxs("span",{className:`font-medium ${Ye}`,children:["Voting ends: ",Sn(m.endDate)]}),i.jsx("div",{className:"text-sm -mt-0.5",style:{marginLeft:"100px",marginTop:"-6px"},children:We<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${Ye}`,children:[i.jsx("span",{className:"font-semibold text-lg",children:We})," ",We===1?"day":"days"," remaining"]})})]})]}),i.jsx("div",{className:"flex items-center justify-center md:justify-end flex-1 min-w-0",children:i.jsx("div",{className:"leading-tight",children:i.jsxs("div",{className:"flex items-center justify-center md:justify-start",children:[i.jsx(un,{className:`h-[30px] w-[30px] mr-2 ${Ye}`}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none",children:[i.jsxs("div",{className:"flex items-baseline justify-center md:justify-start",style:{marginRight:"60px"},children:[i.jsx("span",{className:`${Ye} mr-1`,style:{fontSize:"14px"},children:"You have"}),i.jsx("span",{className:`${Ye} font-semibold text-2xl`,children:Et}),i.jsxs("span",{className:`${Ye} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${Ye} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!$t&&i.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:i.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[i.jsx(Ux,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Voting is currently ",ji(m.endDate)?"closed":"not yet open",".",ji(m.endDate)?` Voting ended on ${Sn(m.endDate)}.`:` Voting will open on ${Sn(m.startDate)}.`]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs(Tt,{variant:"gold",onClick:Fe,className:"flex items-center justify-center w-full md:w-auto",children:[i.jsx(Km,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&i.jsx(FZ,{isShuffling:A,onShuffle:Ee})]})]}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:N.map(We=>{const Ye=n[We.id]||0;return i.jsx(LZ,{feature:We,userVoteCount:Ye,remainingVotes:Et,votingIsActive:$t,onVote:a,isShuffling:A,shuffleStage:M,currentUser:r,onRequestInfo:Te,onViewAttachment:R},We.id)})}),s>0&&(()=>{const We=$m(m.endDate),Ye=Rm(We),at=TZ(We);return i.jsx("div",{className:`fixed bottom-0 left-0 right-0 ${at} rounded-t-md border-t ${We<=2?"border-[#6A4234]/20":We<=4?"border-[#C89212]/20":"border-[#1E5461]/20"} p-3 md:p-4 z-50`,children:i.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-center",children:[i.jsx("div",{className:"flex items-center flex-1 min-w-0 justify-center",style:{paddingLeft:"60px",width:"100px"},children:i.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:`h-[30px] w-[30px] mr-2 ${Ye}`,style:{marginLeft:"-88px"}}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[i.jsx("span",{className:`${Ye} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),i.jsx("span",{className:`${Ye} font-semibold text-2xl`,children:Et}),i.jsxs("span",{className:`${Ye} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${Ye} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})}),i.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${ar?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!ar,children:"Submit Votes"})]})})})(),i.jsx(gn,{isOpen:$,onClose:wt,title:"Suggest a Feature",maxWidth:"max-w-lg",children:i.jsxs("form",{onSubmit:bt,className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",i.jsx("strong",{children:"future sessions"}),".",i.jsx("br",{}),"Suggestions will not be added to the current session."]}),B&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:B}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),i.jsx("input",{type:"text",value:ce,onChange:We=>le(We.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:Ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),i.jsx("textarea",{value:U,onChange:We=>ee(We.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:Ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),i.jsx("textarea",{value:ue,onChange:We=>$e(We.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:Ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),i.jsx("textarea",{value:Oe,onChange:We=>_e(We.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:Ie})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:L,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:Me,disabled:Ie||Be.length>=3,className:"hidden",id:"suggestion-file-input"}),i.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${Ie||Be.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(xs,{className:"h-4 w-4 mr-2"}),Be.length>=3?"Maximum 3 files":"Attach Files"]}),Be.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:Be.map((We,Ye)=>{const at=We.type.startsWith("image/"),jt=We.type==="application/pdf",gt=De[Ye]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[at&&gt?i.jsx("img",{src:gt,alt:We.name,className:"w-full h-full object-cover"}):jt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(xs,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>ze(Ye),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${We.name}`,children:i.jsx(_n,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:We.name.length>15?`${We.name.substring(0,15)}...`:We.name})]},Ye)})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Tt,{type:"button",variant:"secondary",onClick:wt,disabled:Ie,children:"Close"}),i.jsxs(Tt,{type:"submit",variant:"primary",disabled:Ie,className:"flex items-center",children:[Ie&&i.jsx(Xo,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),i.jsx(gn,{isOpen:pt,onClose:()=>et(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:i.jsx(yn,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),i.jsx("p",{className:"text-sm text-gray-500",children:"The Product Owners have been notified and will review your suggestion."})]})}),rr&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>R(null),children:[i.jsx("button",{onClick:()=>R(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(_n,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:We=>We.stopPropagation(),children:rr.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:rr,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):rr.match(/\.pdf$/i)?i.jsx("iframe",{src:rr,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(xs,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:rr,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})});function Z0({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:a,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=tl(),p=za(),[v]=Nx(),x=async()=>{try{await je.auth.signOut()}catch{}try{l(null)}catch{}a(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};y.useEffect(()=>{const J=new URLSearchParams(window.location.search),ye=J.has("code")||J.has("error"),He=localStorage.getItem("voting_system_current_session");!n&&!ye&&!He&&p("/sessions")},[n,p]);const w=y.useMemo(()=>{const J=new URLSearchParams(window.location.search);return J.has("code")||J.has("error")},[]),[j,b]=y.useState([]),[_,C]=y.useState(!0),[N,T]=y.useState(EZ),[A,P]=y.useState(r?"results":t||w?"admin":"voting"),[M,F]=y.useState(t||w||r),[Q,q]=y.useState(null),[ae,Y]=y.useState(!1),[oe,V]=y.useState(null),[K,ge]=y.useState({...NZ,votesPerUser:e}),[$,G]=y.useState(CZ),[ce,le]=y.useState(SC()),[U,ee]=y.useState([]),[ue,$e]=y.useState([]),[Oe,_e]=y.useState([]),[Ie,Ke]=y.useState(!1),[B,ve]=y.useState(null),[ie,ne]=y.useState(null),[pt,et]=y.useState(!1),[Be,ft]=y.useState([]),[De,rt]=y.useState([]),[rr,R]=y.useState(null),L=()=>{const J=v.get("perspective");if(J)return sessionStorage.setItem("adminPerspective",J),J;const ye=sessionStorage.getItem("adminPerspective");if(ye)return ye;const He=sessionStorage.getItem("viewMode");return He==="system-admin"?(sessionStorage.setItem("adminPerspective","system"),"system"):He==="admin"?(sessionStorage.setItem("adminPerspective","session"),"session"):d?"system":"session"},[H,ke]=y.useState(L());y.useEffect(()=>{const J=v.get("perspective");J&&J!==H&&(ke(J),sessionStorage.setItem("adminPerspective",J))},[v,H]);const[Ee,Te]=y.useState({}),[Fe,wt]=y.useState(0),[Me,ze]=y.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[bt,Et]=y.useState(!1),ar=y.useRef(!1),$t=y.useRef(!1),We=y.useRef(null),Ye=y.useMemo(()=>K.useAutoVotes?Math.max(1,Math.floor(j.length/2)):K.votesPerUser,[K.useAutoVotes,K.votesPerUser,j.length]),at=y.useRef(!1);y.useEffect(()=>{if(at.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const ye=new URLSearchParams(window.location.search),He=ye.has("code")||ye.has("error");if(He&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!He||ar.current)){if(!n){console.log("No session available yet, waiting...");return}at.current=!0,ar.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const I=await lZ();if(I){const W=new Date(Date.now()+I.expiresIn*1e3).toISOString(),Z={...$,accessToken:I.accessToken,refreshToken:I.refreshToken,tokenExpiresAt:W,enabled:!0,clientId:ha.clientId,tenantId:ha.tenantId};await Lo(n.id,Z),G(Z);const Ce=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",Ce),p(Ce,{replace:!0})}}catch(I){console.error("OAuth callback error:",I),ve("Failed to authenticate with Azure DevOps");const W="/admin";sessionStorage.removeItem("oauth_return_path"),p(W,{replace:!0})}finally{at.current=!1}}})()},[n,p,$]),y.useEffect(()=>{r&&A!=="results"?P("results"):t&&A!=="admin"?P("admin"):!t&&!r&&A==="admin"&&P("voting")},[t,r,A]);const jt=y.useCallback(J=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),J&&sessionStorage.setItem("oauth_action",J),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),cZ()},[]),gt=y.useCallback(async J=>{if(!J.accessToken||!J.refreshToken||!J.tokenExpiresAt)throw new Error("Not authenticated");if(oZ(J.tokenExpiresAt))try{const ye=await ZQ(J.refreshToken),He=new Date(Date.now()+ye.expiresIn*1e3).toISOString(),Pe={...J,accessToken:ye.accessToken,tokenExpiresAt:He};return n&&(await Lo(n.id,Pe),G(Pe)),ye.accessToken}catch(ye){const He=ye instanceof Error?ye.message:String(ye);throw(He.includes("AADSTS700084")||He.includes("refresh token"))&&(console.log("Refresh token expired, redirecting to login..."),n&&await Lo(n.id,{enabled:!1,organization:J.organization,project:J.project,accessToken:null,refreshToken:null,tokenExpiresAt:null}),p("/login")),ye}return J.accessToken},[n,p]),Xt=y.useCallback(async()=>{if(!n)return[];const[J,ye]=await Promise.all([xi(n.id),Uo(n.id)]);return J.map(Pe=>{const W=ye.filter(Ge=>Ge.feature_id===Pe.id).map(Ge=>({userId:Ge.user_id,name:Ge.user_name,email:Ge.user_email,voteCount:Ge.vote_count})),Z=W.reduce((Ge,Se)=>Ge+Se.voteCount,0);return{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic||null,epicId:Pe.epic_id||Pe.epicId||null,state:Pe.state,areaPath:Pe.area_path||Pe.areaPath||null,tags:Pe.tags||[],azureDevOpsId:Pe.azure_devops_id||Pe.azureDevOpsId||null,azureDevOpsUrl:Pe.azure_devops_url||Pe.azureDevOpsUrl||null,workItemType:Pe.workItemType||Pe.work_item_type||null,attachmentUrls:Pe.attachmentUrls||Pe.attachment_urls||null,votes:Z,voters:W}})},[n]),Ht=y.useCallback(async()=>{if(n)try{const J=await Nk(n.id);ft(J)}catch(J){console.error("Error loading feature suggestions:",J)}},[n]),vr=y.useCallback(async()=>{if(n)try{const J=await Bd(),ye=new Date,He=[];for(const Pe of J)if(!(Pe.id===n.id||new Date(Pe.start_date)<=ye))try{await $x(Pe.id)&&He.push({id:Pe.id,title:Pe.title,startDate:Pe.start_date})}catch{console.warn(`Session ${Pe.id} no longer exists, skipping from future sessions list`)}rt(He)}catch(J){console.error("Error loading future sessions:",J),rt([])}},[n]),Zt=y.useCallback(J=>{ft(ye=>[J,...ye]),Ht(),vr()},[Ht,vr]),lr=y.useCallback(async(J,ye)=>{await k$(J,ye),await Ht()},[Ht]),Qt=y.useCallback(async J=>{await S$(J),await Ht()},[Ht]),hr=y.useCallback(async(J,ye)=>{await _$(J,ye),await Ht()},[Ht]),cr=y.useCallback(async J=>{await N$(J);const ye=await Xt();b(ye),await Ht()},[Xt,Ht]);y.useEffect(()=>{async function J(){if(n&&!($t.current&&We.current===n.id)){We.current=n.id,$t.current=!0;try{C(!0);const[ye,He]=await Promise.all([xi(n.id),Uo(n.id)]),Pe=ye.map(W=>{const Ce=He.filter(Se=>Se.feature_id===W.id).map(Se=>({userId:Se.user_id,name:Se.user_name,email:Se.user_email,voteCount:Se.vote_count})),Ge=Ce.reduce((Se,Ze)=>Se+Ze.voteCount,0);return{id:W.id,title:W.title,description:W.description,epic:W.epic||null,epicId:W.epic_id||W.epicId||null,state:W.state,areaPath:W.area_path||W.areaPath||null,tags:W.tags||[],azureDevOpsId:W.azure_devops_id||W.azureDevOpsId||null,azureDevOpsUrl:W.azure_devops_url||W.azureDevOpsUrl||null,workItemType:W.workItemType||W.work_item_type||null,attachmentUrls:W.attachmentUrls||W.attachment_urls||null,votes:Ge,voters:Ce}});b(Pe),ge({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const I=await x$(n.id);G(I?{organization:I.organization||"newmill",project:I.project||"Product",accessToken:I.access_token,refreshToken:I.refresh_token,tokenExpiresAt:I.token_expires_at,tenantId:I.tenant_id,clientId:I.client_id,enabled:I.enabled,workItemType:I.work_item_type||"Feature",query:I.query,lastSyncTime:I.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const W=await Nk(n.id);ft(W)}catch(W){console.error("Error loading feature suggestions:",W)}}catch(ye){console.error("Error loading data:",ye),b([])}finally{C(!1),$t.current=!1}}}J()},[n==null?void 0:n.id]),y.useEffect(()=>{async function J(){const ye=SC(),He=$.project;if(le(ye),ee([]),$e([]),_e([]),$.enabled&&$.accessToken&&He)try{const Pe=await gt($),I={...$,accessToken:Pe,project:He},[W,Z,Ce,Ge]=await Promise.all([rZ(I).catch(Se=>(console.error("Error loading Azure DevOps projects:",Se),ye)),wC(I),vx(I),bC(I)]);$.project===He&&(le(W.length>0?W:ye),ee(Z),$e(Ce),_e(Ge))}catch(Pe){console.error("Error loading filter options:",Pe),$.project===He&&le(ye)}}J()},[$.enabled,$.accessToken,$.project,gt]);const te=y.useCallback(async(J,ye)=>{if(!(!$.enabled||!$.accessToken))try{const He=await gt($),Pe={...$,accessToken:He},I=J?await qT(Pe,J):await wC(Pe);ee(I)}catch(He){console.error("Error loading states for work item type:",He)}},[$,gt]),Xe=y.useCallback(async J=>{if(!$.enabled||!$.accessToken)return{types:[],states:[]};try{const ye=await gt($),He={...$,accessToken:ye};return await nZ(He,J)}catch(ye){return console.error("Error fetching types and states for area path:",ye),{types:[],states:[]}}},[$,gt]),ot=y.useCallback(async J=>{if(!$.enabled||!$.accessToken)return{types:[],areaPaths:[]};try{const ye=await gt($),He={...$,accessToken:ye},Pe=await tZ(He,J);return Pe.areaPaths.length>0&&$e(Pe.areaPaths),Pe}catch(ye){return console.error("Error fetching types and area paths for states:",ye),{types:[],areaPaths:[]}}},[$,gt]),At=y.useCallback(async J=>{if(!$.enabled||!$.accessToken)return{types:[],states:[],areaPaths:[]};try{const ye=await gt($),He={...$,accessToken:ye},Pe=await sZ(He,J);return Pe.states.length>0&&ee(Pe.states),Pe.areaPaths.length>0&&$e(Pe.areaPaths),Pe}catch(ye){return console.error("Error fetching types, states, and area paths for tags:",ye),{types:[],states:[],areaPaths:[]}}},[$,gt]),er=y.useCallback(async(J,ye=[],He=[])=>{if(!(!$.enabled||!$.accessToken))try{const Pe=await gt($),I={...$,accessToken:Pe},W=J?await aZ(I,J,ye,He):await bC(I);_e(W)}catch(Pe){console.error("Error loading tags for type, state, and area path:",Pe)}},[$,gt]),_r=y.useCallback(async(J,ye=[])=>{if(!(!$.enabled||!$.accessToken))try{const He=await gt($),Pe={...$,accessToken:He},I=J?await eZ(Pe,J,ye):await vx(Pe);$e(I)}catch(He){console.error("Error loading area paths for type and state:",He)}},[$,gt]);y.useEffect(()=>{const J=async()=>{const He=IZ(K.startDate,K.endDate);if(K.isActive!==He){const Pe={...K,isActive:He};ge(Pe);try{n!=null&&n.id&&await _k(n.id,{title:Pe.title,goal:Pe.goal,votes_per_user:Pe.votesPerUser,start_date:Pe.startDate,end_date:Pe.endDate,is_active:Pe.isActive})}catch(I){console.error("Error updating voting session status:",I)}}};J();const ye=setInterval(J,6e5);return()=>clearInterval(ye)},[K,n==null?void 0:n.id]),y.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",A==="admin"&&(Ht(),vr())},[A,Ht,vr]),y.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Dr=y.useCallback(async(J=$)=>{if(!J.organization||!J.project||!n){ve("Organization and project name are required");return}try{Ke(!0),ve(null);const ye=await gt(J),He={...J,accessToken:ye},Pe=await jC(He),I=kC(Pe);for(const Se of I){const Vt=(await xi(n.id)).find(kt=>kt.azure_devops_id===Se.azureDevOpsId),Nr=kh(Se.description),Ve=pd(Nr,300);Vt?await Qu(Vt.id,{title:Se.title,description:Ve,epic:Se.epic||null,epicId:Se.epicId||null,state:Se.state,areaPath:Se.areaPath,tags:Se.tags,azure_devops_id:Se.azureDevOpsId,azure_devops_url:Se.azureDevOpsUrl,workItemType:Se.workItemType||null}):await ah({session_id:n.id,title:Se.title,description:Ve,epic:Se.epic||null,epicId:Se.epicId||null,state:Se.state,areaPath:Se.areaPath,tags:Se.tags,azure_devops_id:Se.azureDevOpsId,azure_devops_url:Se.azureDevOpsUrl,workItemType:Se.workItemType||null})}const W=await xi(n.id),Z=await Uo(n.id),Ce=W.map(Se=>{const Vt=Z.filter(Ve=>Ve.feature_id===Se.id).map(Ve=>({userId:Ve.user_id,name:Ve.user_name,email:Ve.user_email,voteCount:Ve.vote_count})),Nr=Vt.reduce((Ve,kt)=>Ve+kt.voteCount,0);return{id:Se.id,title:Se.title,description:Se.description,epic:Se.epic||null,epicId:Se.epic_id||Se.epicId||null,state:Se.state,areaPath:Se.area_path||Se.areaPath||null,tags:Se.tags||[],azureDevOpsId:Se.azure_devops_id||Se.azureDevOpsId||null,azureDevOpsUrl:Se.azure_devops_url||Se.azureDevOpsUrl||null,workItemType:Se.workItemType||Se.work_item_type||null,votes:Nr,voters:Vt}});b(Ce);const Ge={...He,lastSyncTime:new Date().toISOString()};await Lo(n.id,Ge),G(Ge)}catch(ye){console.error("Azure DevOps sync error:",ye),ye instanceof Error&&ye.message==="Not authenticated"?(ve("Please authenticate with Azure DevOps"),jt()):ve("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ke(!1)}},[$,n,gt,jt]),ir=y.useCallback(async()=>{if(!$.organization||!$.project){ve("Organization and project name are required");return}try{Ke(!0),ve(null);const J=await gt($),ye={...$,accessToken:J},He=await jC(ye),Pe=kC(He),W=(await Promise.all(Pe.map(async Z=>{if(Z.azureImageUrls&&Z.azureImageUrls.length>0)try{const Ce=await dZ(Z.azureImageUrls,Z.id,J);return{...Z,attachmentUrls:Ce.length>0?Ce:void 0,azureImageUrls:void 0}}catch(Ce){return console.error("Error uploading Azure images for preview:",Z.title,Ce),Z}return Z}))).map(Z=>(console.log(`[Preview] Feature ${Z.id} "${Z.title}": epic="${Z.epic}", epicId="${Z.epicId}"`),{...Z,description:pd(kh(Z.description),300)}));console.log(`[Preview] Setting ${W.length} preview features`),ne(W),et(!0)}catch(J){console.error("Azure DevOps preview error:",J),J instanceof Error&&J.message==="Not authenticated"?(ve("Please authenticate with Azure DevOps"),jt()):ve("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ke(!1)}},[$,gt,jt]),Kt=y.useCallback(async()=>{if(!(!ie||!n))try{Ke(!0);const J=await xi(n.id);for(const W of J)await Sk(W.id);for(const W of ie){const Z=kh(W.description),Ce=pd(Z,300);await ah({session_id:n.id,title:W.title,description:Ce,epic:W.epic||null,state:W.state,areaPath:W.areaPath,tags:W.tags,azure_devops_id:W.azureDevOpsId,azure_devops_url:W.azureDevOpsUrl})}const ye=await xi(n.id),He=await Uo(n.id),Pe=ye.map(W=>{const Ce=He.filter(Se=>Se.feature_id===W.id).map(Se=>({userId:Se.user_id,name:Se.user_name,email:Se.user_email,voteCount:Se.vote_count})),Ge=Ce.reduce((Se,Ze)=>Se+Ze.voteCount,0);return{id:W.id,title:W.title,description:W.description,epic:W.epic||null,epicId:W.epic_id||W.epicId||null,state:W.state,areaPath:W.area_path||W.areaPath||null,tags:W.tags||[],azureDevOpsId:W.azure_devops_id||W.azureDevOpsId||null,azureDevOpsUrl:W.azure_devops_url||W.azureDevOpsUrl||null,workItemType:W.workItemType||W.work_item_type||null,votes:Ge,voters:Ce}});b(Pe);const I={...$,lastSyncTime:new Date().toISOString()};await Lo(n.id,I),G(I)}catch(J){console.error("Azure DevOps replace all error:",J),ve("Failed to replace all features from Azure DevOps.")}finally{Ke(!1),ne(null)}},[ie,n,$]),[ur,xr]=y.useState({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),Er=y.useCallback(async J=>{if(!J||J.length===0||!n){console.error("handleConfirmSync: Invalid input",{selectedFeatures:J,currentSession:n});return}try{Ke(!0),console.log("handleConfirmSync: Starting sync for",J.length,"features");const ye=await xi(n.id),He=[];let Pe=!1,I=!1;for(let Se=0;Se<J.length;Se++){const Ze=J[Se];try{const Vt=ye.find(kt=>{const yt=kt.azureDevOpsId||kt.azure_devops_id,Sr=Ze.azureDevOpsId;return yt&&Sr&&yt.toString()===Sr.toString()}),Nr=kh(Ze.description),Ve=pd(Nr,300);if(Vt){if(I){console.log("handleConfirmSync: Auto-replacing existing feature (replace-all)",Vt.id,Ze.title);const yt=[...Vt.attachmentUrls||[],...Ze.attachmentUrls||[]];await Qu(Vt.id,{title:Ze.title,description:Ve,epic:Ze.epic||null,epicId:Ze.epicId||null,state:Ze.state,areaPath:Ze.areaPath,tags:Ze.tags,azure_devops_id:Ze.azureDevOpsId,azure_devops_url:Ze.azureDevOpsUrl,workItemType:Ze.workItemType||null,attachmentUrls:yt.length>0?yt:null}),He.push(Ze);continue}const kt=await new Promise(yt=>{xr({isOpen:!0,feature:Ze,existingFeature:Vt,onResolve:Sr=>{xr({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),yt(Sr)}})});if(kt==="cancel"){Pe=!0;break}else if(kt==="skip"){console.log("handleConfirmSync: Skipping existing feature",Vt.id,Ze.title);continue}else if(kt==="replace-all"){I=!0,console.log("handleConfirmSync: Replace-all selected, replacing current and all future conflicts");const yt=[...Vt.attachmentUrls||[],...Ze.attachmentUrls||[]];await Qu(Vt.id,{title:Ze.title,description:Ve,epic:Ze.epic||null,epicId:Ze.epicId||null,state:Ze.state,areaPath:Ze.areaPath,tags:Ze.tags,azure_devops_id:Ze.azureDevOpsId,azure_devops_url:Ze.azureDevOpsUrl,workItemType:Ze.workItemType||null,attachmentUrls:yt.length>0?yt:null}),He.push(Ze)}else if(kt==="replace"){console.log("handleConfirmSync: Replacing existing feature",Vt.id,Ze.title);const yt=[...Vt.attachmentUrls||[],...Ze.attachmentUrls||[]];await Qu(Vt.id,{title:Ze.title,description:Ve,epic:Ze.epic||null,epicId:Ze.epicId||null,state:Ze.state,areaPath:Ze.areaPath,tags:Ze.tags,azure_devops_id:Ze.azureDevOpsId,azure_devops_url:Ze.azureDevOpsUrl,workItemType:Ze.workItemType||null,attachmentUrls:yt.length>0?yt:null}),He.push(Ze)}}else{console.log("handleConfirmSync: Creating new feature",Ze.title,Ze.azureDevOpsId);const kt=await ah({session_id:n.id,title:Ze.title,description:Ve,epic:Ze.epic||null,epicId:Ze.epicId||null,state:Ze.state,areaPath:Ze.areaPath,tags:Ze.tags,azure_devops_id:Ze.azureDevOpsId,azure_devops_url:Ze.azureDevOpsUrl,workItemType:Ze.workItemType||null,attachmentUrls:Ze.attachmentUrls||null});console.log("handleConfirmSync: Created feature",kt),He.push(Ze)}}catch(Vt){throw console.error("handleConfirmSync: Error processing feature",Ze.title,Vt),Vt}}if(Pe){console.log("handleConfirmSync: Sync cancelled by user");return}console.log("handleConfirmSync: Fetching all features after sync"),await new Promise(Se=>setTimeout(Se,200));const W=await xi(n.id);console.log("handleConfirmSync: Retrieved",W.length,"features from database"),console.log("handleConfirmSync: Feature IDs:",W.map(Se=>({id:Se.id,title:Se.title,azureId:Se.azure_devops_id||Se.azureDevOpsId})));const Z=await Uo(n.id),Ce=W.map(Se=>{const Vt=Z.filter(Ve=>Ve.feature_id===Se.id).map(Ve=>({userId:Ve.user_id,name:Ve.user_name,email:Ve.user_email,voteCount:Ve.vote_count})),Nr=Vt.reduce((Ve,kt)=>Ve+kt.voteCount,0);return{id:Se.id,title:Se.title,description:Se.description,epic:Se.epic||null,epicId:Se.epic_id||Se.epicId||null,state:Se.state,areaPath:Se.area_path||Se.areaPath||null,tags:Se.tags||[],azureDevOpsId:Se.azure_devops_id||Se.azureDevOpsId||null,azureDevOpsUrl:Se.azure_devops_url||Se.azureDevOpsUrl||null,workItemType:Se.workItemType||Se.work_item_type||null,attachmentUrls:Se.attachmentUrls||Se.attachment_urls||null,votes:Nr,voters:Vt}});console.log("handleConfirmSync: Setting features with votes",Ce.length),b(()=>Ce),await new Promise(Se=>setTimeout(Se,200));const Ge={...$,lastSyncTime:new Date().toISOString()};await Lo(n.id,Ge),G(Ge),console.log("handleConfirmSync: Sync completed successfully")}catch(ye){throw console.error("Azure DevOps sync error:",ye),ve("Failed to sync features from Azure DevOps."),ye}finally{Ke(!1),ne(null)}},[n,$]),fr=y.useCallback(async()=>{if(n)try{const J={organization:$.organization||"newmill",project:$.project||"Product",workItemType:$.workItemType||"Feature",query:$.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await Lo(n.id,J),G(J),ve(null)}catch(J){console.error("Error disconnecting Azure DevOps:",J),ve("Failed to disconnect from Azure DevOps")}},[$,n]);y.useEffect(()=>{(async()=>{const ye=sessionStorage.getItem("oauth_action");if(ye&&!(!$.enabled||!$.accessToken))try{ye==="preview"?await ir():ye==="sync"&&await Dr()}finally{sessionStorage.removeItem("oauth_action")}})()},[$.enabled,$.accessToken,ir,Dr]);const br=y.useCallback(()=>{p("/admin")},[p]),Gt=y.useCallback(()=>{if(t){p("/vote");return}F(!1);const J=d?"system":"session";ke(J),sessionStorage.setItem("adminPerspective",J),sessionStorage.setItem("viewMode","stakeholder"),P("voting")},[d,t,p]),Lt=y.useCallback(()=>{F(!0),ke("session"),sessionStorage.setItem("adminPerspective","session"),sessionStorage.setItem("viewMode","admin"),t?A!=="admin"&&P("admin"):A!=="voting"&&P("voting")},[t,A]),$r=y.useCallback(()=>{d&&(F(!0),ke("system"),sessionStorage.setItem("adminPerspective","system"),sessionStorage.setItem("viewMode","system-admin"),t?A!=="admin"&&P("admin"):A!=="voting"&&P("voting"))},[A,d,t]),or=y.useCallback(async J=>{if(n)try{const ye=await ah({session_id:n.id,title:J.title,description:J.description,epic:J.epic});b(He=>[...He,{id:ye.id,title:ye.title,description:ye.description,epic:ye.epic,votes:0,voters:[]}]),Y(!1)}catch(ye){console.error("Error adding feature:",ye),alert("Failed to add feature")}},[n]),Lr=y.useCallback(async J=>{try{await Qu(J.id,{title:J.title,description:J.description,epic:J.epic,epicId:J.epicId||null,attachmentUrls:J.attachmentUrls||null}),b(ye=>ye.map(He=>He.id===J.id?J:He)),q(null)}catch(ye){console.error("Error updating feature:",ye),alert("Failed to update feature: "+(ye instanceof Error?ye.message:String(ye)))}},[]),Wn=y.useCallback(async J=>{try{await Sk(J),b(ye=>ye.filter(He=>He.id!==J))}catch(ye){console.error("Error deleting feature:",ye),alert("Failed to delete feature")}},[]),cs=y.useCallback(J=>{ze(ye=>({...ye,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:J}))},[]),An=y.useCallback(async()=>{const J=Me.targetId;if(!(!J||!n))try{await f$(n.id,J);const ye=await Xt();b(ye)}catch(ye){console.error("Error resetting votes:",ye),alert("Failed to reset votes")}},[Me.targetId,n,Xt]),es=y.useCallback(()=>{ze(J=>({...J,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),us=y.useCallback(()=>{ze(J=>({...J,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),nr=y.useCallback(async()=>{if(n){Et(!0);try{await d$(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(J){console.error("Error deleting session:",J),alert("Failed to delete session. Please try again.")}finally{Et(!1),ze(J=>({...J,showDeleteSession:!1}))}}},[n,p,l,u]),xn=y.useCallback(async()=>{if(n)try{await v$(n.id);const J=await Xt();b(J)}catch(J){console.error("Error resetting all votes:",J),alert("Failed to reset all votes")}},[n,Xt]),kr=y.useCallback((J,ye)=>{if(!s||!K.isActive)return;const He=Ee[J]||0;let Pe=He;if(ye)if(Fe<Ye)Pe=He+1;else return;else if(He>0)Pe=He-1;else return;Te(I=>{const W={...I};return Pe===0?delete W[J]:W[J]=Pe,W}),wt(I=>ye?I+1:I-1)},[s,Ee,Fe,K.isActive,Ye]),Pn=y.useCallback(async()=>{if(!(!s||!K.isActive||!n)&&!(Fe<Ye))try{for(const[Pe,I]of Object.entries(Ee))I>0&&await g$({session_id:n.id,feature_id:Pe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:I});const J=await xi(n.id),ye=await Uo(n.id),He=J.map(Pe=>{const W=ye.filter(Ce=>Ce.feature_id===Pe.id).map(Ce=>({userId:Ce.user_id,name:Ce.user_name,email:Ce.user_email,voteCount:Ce.vote_count})),Z=W.reduce((Ce,Ge)=>Ce+Ge.voteCount,0);return{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic,state:Pe.state,areaPath:Pe.area_path,tags:Pe.tags||[],azureDevOpsId:Pe.azure_devops_id,azureDevOpsUrl:Pe.azure_devops_url,votes:Z,voters:W}});b(He),P("thankyou")}catch(J){console.error("Error submitting votes:",J),alert("Failed to submit votes. Please try again.")}},[s,n,Fe,Ee,K.isActive,Ye]),ds=y.useCallback(async J=>{var Z,Ce;const ye={title:J.title,goal:J.goal,votes_per_user:J.votesPerUser,start_date:J.startDate,end_date:J.endDate,is_active:J.isActive,use_auto_votes:J.useAutoVotes,product_id:J.product_id??null,product_name:null},He={},Pe=(Ge,Se)=>{Ge!==void 0&&(He[Se]=Ge)};Pe(J.originalEndDate,"original_end_date"),Pe(J.endedEarlyBy,"ended_early_by"),Pe(J.endedEarlyReason,"ended_early_reason"),Pe(J.endedEarlyDetails,"ended_early_details"),Pe(J.reopenReason,"reopen_reason"),Pe(J.reopenDetails,"reopen_details"),Pe(J.reopenedBy,"reopened_by"),Pe(J.reopenedAt,"reopened_at");const I={...ye,...He},W=async Ge=>{n!=null&&n.id?await _k(n.id,Ge):await b$(Ge)};try{await W(I),ge(J),n!=null&&n.id&&l({...n,title:ye.title??n.title,goal:ye.goal??n.goal,votes_per_user:ye.votes_per_user??n.votes_per_user,use_auto_votes:ye.use_auto_votes??n.use_auto_votes,start_date:ye.start_date??n.start_date,end_date:ye.end_date??n.end_date,is_active:ye.is_active??n.is_active,product_id:ye.product_id!==void 0?ye.product_id??null:J.product_id??n.product_id??null,product_name:null,original_end_date:He.original_end_date??n.original_end_date??null,ended_early_by:He.ended_early_by??n.ended_early_by??null,ended_early_reason:He.ended_early_reason??n.ended_early_reason??null,ended_early_details:He.ended_early_details??n.ended_early_details??null,reopen_reason:He.reopen_reason??n.reopen_reason??null,reopen_details:He.reopen_details??n.reopen_details??null,reopened_by:He.reopened_by??n.reopened_by??null,reopened_at:He.reopened_at??n.reopened_at??null})}catch(Ge){const Se=((Ce=(Z=Ge==null?void 0:Ge.message)==null?void 0:Z.toLowerCase)==null?void 0:Ce.call(Z))??"",Ze=Se.includes("column")&&(Se.includes("reopen_reason")||Se.includes("reopen_details")||Se.includes("reopened_by")||Se.includes("reopened_at")||Se.includes("original_end_date")||Se.includes("ended_early_by")||Se.includes("ended_early_reason")||Se.includes("ended_early_details")),Vt=Se.includes("product_name")||Se.includes('"product_name"'),Nr=Se.includes("product_id")||Se.includes('"product_id"');if(Ze||Vt||Nr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",Ge);try{const Ve={...ye};Vt&&delete Ve.product_name,Nr&&delete Ve.product_id,await W(Ve),ge(J),n!=null&&n.id&&l({...n,title:Ve.title??n.title,goal:Ve.goal??n.goal,votes_per_user:Ve.votes_per_user??n.votes_per_user,use_auto_votes:Ve.use_auto_votes??n.use_auto_votes,start_date:Ve.start_date??n.start_date,end_date:Ve.end_date??n.end_date,is_active:Ve.is_active??n.is_active,product_id:Ve.product_id!==void 0?Ve.product_id??null:J.productId??n.product_id??null,product_name:null,original_end_date:J.originalEndDate??n.original_end_date??null,ended_early_by:J.endedEarlyBy??n.ended_early_by??null,ended_early_reason:J.endedEarlyReason??n.ended_early_reason??null,ended_early_details:J.endedEarlyDetails??n.ended_early_details??null,reopen_reason:J.reopenReason??n.reopen_reason??null,reopen_details:J.reopenDetails??n.reopen_details??null,reopened_by:J.reopenedBy??n.reopened_by??null,reopened_at:J.reopenedAt??n.reopened_at??null})}catch(Ve){console.error("Error updating voting session (fallback):",Ve),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",Ge),alert("Failed to update voting session settings")}},[n,l]),On=y.useCallback(async J=>{if(n){G(J);try{await Lo(n.id,{organization:J.organization,project:J.project,accessToken:J.accessToken,refreshToken:J.refreshToken,tokenExpiresAt:J.tokenExpiresAt,tenantId:J.tenantId,clientId:J.clientId,enabled:J.enabled,workItemType:J.workItemType,query:J.query,lastSyncTime:J.lastSyncTime})}catch(ye){console.error("Error saving config:",ye)}}},[n]),js=y.useCallback(()=>{t||n?p("/results"):P("results")},[t,n,p]),Tn=y.useMemo(()=>{if(t)return i.jsx(_Z,{features:j,onAddFeature:or,onUpdateFeature:Lr,onDeleteFeature:Wn,onShowResults:js,onRequestDeleteSession:us,isDeletingSession:bt,showAddForm:ae,setShowAddForm:Y,editingFeature:Q,setEditingFeature:q,onLogout:x,onShowVoterView:Gt,votingSession:K,azureDevOpsConfig:$,onUpdateAzureDevOpsConfig:On,onPreviewAzureDevOpsFeatures:ir,onDisconnectAzureDevOps:fr,isFetchingAzureDevOps:Ie,azureFetchError:B,onInitiateOAuth:jt,availableStates:U,availableAreaPaths:ue,availableTags:Oe,previewFeatures:ie,showPreviewModal:pt,setShowPreviewModal:et,onConfirmSync:Er,onReplaceAll:Kt,onUpdateVotingSession:ds,onFetchStatesForType:te,onFetchAreaPathsForTypeAndState:_r,onFetchTagsForTypeStateAndAreaPath:er,onFetchTypesAndStatesForAreaPath:Xe,onFetchTypesAndStatesForTags:At,onFetchTypesAndAreaPathsForStates:ot,suggestedFeatures:Be,otherSessions:De,onPromoteSuggestion:cr,onMoveSuggestion:hr,onEditSuggestion:lr,onDeleteSuggestion:Qt,adminPerspective:H,projectOptions:ce});switch(A==="admin"&&!t?"voting":A){case"voting":return i.jsx(TC,{features:j,currentUser:s,pendingVotes:Ee,pendingUsedVotes:Fe,onVote:kr,onSubmitVotes:Pn,onToggleAdmin:br,isAdmin:M,votingSession:K,navigate:p,effectiveVotesPerUser:Ye,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:Zt,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?H==="system"?"system-admin":"product-owner":"stakeholder"});case"results":return i.jsx(UZ,{features:j,onResetVotes:cs,onResetAllVotes:es,onBack:r?()=>p("../admin"):()=>P("admin"),showVotersList:oe,setShowVotersList:V,votingSession:K,effectiveVotesPerUser:Ye,onLogout:x,currentUser:s,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?H==="system"?"system-admin":"product-owner":"stakeholder"});case"thankyou":return i.jsx(BZ,{navigate:p,votingSession:K});default:return i.jsx(TC,{features:j,currentUser:s,pendingVotes:Ee,pendingUsedVotes:Fe,onVote:kr,onSubmitVotes:Pn,onToggleAdmin:br,isAdmin:M,votingSession:K,navigate:p,effectiveVotesPerUser:Ye,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:Zt,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?H==="system"?"system-admin":"product-owner":"stakeholder"})}},[A,j,s,Ee,Fe,kr,Pn,br,M,K,cs,es,oe,V,or,Lr,Wn,ae,Y,Q,q,$,On,Dr,ir,fr,Ie,B,jt,ie,pt,et,Er,p,Ye,t,U,ue,Oe,te,n,Gt,Zt,Be,De,cr,hr,lr,Qt,H,ce,js]),Vr=()=>{const{feature:J,existingFeature:ye}=ur;return y.useEffect(()=>{if(ur.isOpen){const He=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${He}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,He)}}},[ur.isOpen]),!ur.isOpen||!J||!ye?null:i.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:()=>ur.onResolve("cancel"),"aria-hidden":"true"}),i.jsxs("div",{className:"inline-block w-full max-w-2xl mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10",children:[i.jsxs("div",{className:"flex items-start justify-between mb-5 p-6 pb-0",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Km,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:"Work Item Already Exists"}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),i.jsx("button",{onClick:()=>ur.onResolve("cancel"),className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"This work item already exists in your voting session. What would you like to do?"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Existing Work Item:"}),i.jsx("p",{className:"text-sm text-gray-700",children:ye.title}),ye.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Azure DevOps ID: ",ye.azureDevOpsId]})]}),i.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"New Work Item:"}),i.jsx("p",{className:"text-sm text-blue-700",children:J.title}),J.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Azure DevOps ID: ",J.azureDevOpsId]})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsx(Tt,{variant:"primary",onClick:()=>ur.onResolve("replace-all"),children:"Replace All Selected"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>ur.onResolve("cancel"),children:"Cancel"}),i.jsx(Tt,{variant:"secondary",onClick:()=>ur.onResolve("skip"),children:"Skip"}),i.jsx(Tt,{variant:"primary",onClick:()=>ur.onResolve("replace"),children:"Replace"})]})]})]})})]})]})})};return n?_?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!M&&A!=="voting"&&A!=="thankyou"?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx(Vr,{}),i.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[i.jsx("div",{className:"flex-grow",children:Tn}),i.jsx(GT,{currentRole:M?H==="system"?"system-admin":"product-owner":"stakeholder",onSelectStakeholder:Gt,onSelectProductOwner:M||d?Lt:void 0,onSelectSystemAdmin:d?$r:void 0,showRoleToggle:d||m,isSessionAdmin:m&&!d}),i.jsx(Ih,{show:Me.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:An,onCancel:()=>ze(J=>({...J,showReset:!1})),confirmText:"Reset",type:"reset"}),i.jsx(Ih,{show:Me.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:xn,onCancel:()=>ze(J=>({...J,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),i.jsx(Ih,{show:Me.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:nr,onCancel:()=>ze(J=>({...J,showDeleteSession:!1})),confirmText:bt?"Deleting":"Delete Session",type:"delete"}),rr&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>R(null),children:[i.jsx("button",{onClick:()=>R(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(_n,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:J=>J.stopPropagation(),children:rr.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:rr,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):rr.match(/\.pdf$/i)?i.jsx("iframe",{src:rr,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(xs,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:rr,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(Vr,{}),i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})]})}async function IC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function VZ(){const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[s,a]=y.useState(""),[l,u]=y.useState(!1),[d,m]=y.useState(null),[f,p]=y.useState(""),[v,x]=y.useState(""),{currentUser:w,setCurrentUser:j,setCurrentSession:b}=tl(),_=za(),[C]=Nx(),N=async A=>{A.preventDefault(),a(""),t(!0);try{const P=await Uc(f.toLowerCase(),v);console.log("[LoginScreen] User created/retrieved:",P),j(P);const M=C.get("session");if(M){console.log("[LoginScreen] Session code found, loading session...");const F=await c$(M);if(F){b(F),console.log("[LoginScreen] Checking user roles...");const[Q,q,ae]=await Promise.all([eo(P.id),Rx(F.id,P.id),Mx(F.id,P.email)]);if(Q||q)_("/admin");else if(ae)_("/vote");else{a("You are not authorized to access this voting session."),t(!1);return}}else{a("Invalid session code."),t(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),_("/sessions")}catch(P){console.error("[LoginScreen] Login error:",P),a(`Failed to log in: ${P instanceof Error?P.message:"Unknown error"}. Please try again.`),t(!1)}};y.useEffect(()=>{const A=sessionStorage.getItem("oauth_error");A&&(a(A),sessionStorage.removeItem("oauth_error"));const P=C.get("error"),M=C.get("error_description"),F=C.get("error_code");if(P){const Q=M?decodeURIComponent(M):"An authentication error occurred.";P==="invalid_request"&&Q.includes("AADSTS9002325")?a('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):F==="unexpected_failure"&&Q.includes("email")?a("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):a(`Authentication failed: ${Q}`),_("/login",{replace:!0})}},[C,_]),y.useEffect(()=>{const A=C.get("token"),P=C.get("action"),M=C.get("email"),F=C.get("product");A&&P&&M&&F&&(P==="grant-admin"||P==="grant-stakeholder")&&(async()=>{var q,ae;try{t(!0),a("");const oe=`${je.supabaseUrl}/functions/v1/grant-access`;let V;try{V=await fetch(oe,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je.supabaseKey}`},body:JSON.stringify({token:A,action:P,email:M,productId:F})})}catch(Oe){throw(q=Oe.message)!=null&&q.includes("CORS")||(ae=Oe.message)!=null&&ae.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+Oe.message):Oe}if(!V.ok){let Oe="Failed to grant access";try{Oe=(await V.json()).error||Oe}catch{Oe=`Server returned ${V.status}: ${V.statusText}`}throw new Error(Oe)}const K=await V.json(),ge=M.split("@")[0].replace(/\./g," "),$=K.productName||"the product",G=P==="grant-admin"?"Product Owner":"Stakeholder";let ce=ge;try{const Oe=await yE(M);Oe&&(ce=Oe.name)}catch{}const le=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",U=`${window.location.origin}${le}/login`,ue=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${ce},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${G}</strong> access to all voting sessions for <strong style="color: #2d4660;">${$}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${U}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,$e=`
Access Granted - Feature Voting System

Hello ${ce},

Your access request has been approved! You have been granted ${G} access to all voting sessions for ${$}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${U}

This is an automated message from the Feature Voting System.
          `;try{await Jc({to:M,subject:`Access Granted - ${$} - Feature Voting System`,text:$e,html:ue})}catch(Oe){console.error("Error sending email to requester:",Oe)}m({roleName:G,productName:$,requesterName:ce,requesterEmail:M}),_("/login",{replace:!0})}catch(Y){console.error("Error granting access:",Y),a(Y.message||"Failed to grant access. Please try again."),_("/login",{replace:!0})}finally{t(!1)}})()},[C,_]);const T=async()=>{a(""),n(!0);try{const A=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",P=`${window.location.origin}${A}/sessions`,{error:M}=await je.auth.signInWithOAuth({provider:"azure",options:{redirectTo:P,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:P}}});M&&(a("Failed to sign in with Azure AD. Please try again."),n(!1))}catch(A){console.error("Azure login error:",A),a("Failed to sign in with Azure AD. Please try again."),n(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),i.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-name",name:"name",type:"text",autoComplete:"name",required:!0,value:v,onChange:A=>x(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:f,onChange:A=>p(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})})]}),s&&i.jsx("div",{className:"rounded-md bg-red-50 p-4 mt-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})})}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:T,disabled:r,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.5:1},onMouseEnter:A=>{r||(A.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:A=>{r||(A.currentTarget.style.backgroundColor="#FFFFFF")},children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),i.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:zF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),i.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),i.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[i.jsx("p",{children:"Simply enter your name and email to access"}),i.jsx("p",{children:"voting sessions you've been invited to"})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),i.jsx(qZ,{isOpen:l,onClose:Ft.useCallback(()=>u(!1),[])}),d&&i.jsx(gn,{isOpen:!0,onClose:()=>m(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(yn,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",i.jsx("span",{className:"font-semibold text-green-700",children:d.roleName})," access to"]}),i.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:d.requesterName}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:d.requesterEmail}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),i.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:d.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const qZ=Ft.memo(function({isOpen:t,onClose:r}){const[n,s]=y.useState(""),[a,l]=y.useState(""),[u,d]=y.useState(""),[m,f]=y.useState([]),[p,v]=y.useState(!1),[x,w]=y.useState(!1),[j,b]=y.useState(!1),[_,C]=y.useState(""),[N,T]=y.useState(!1),A=Ft.useRef(null),P=Ft.useRef(!1),M=Ft.useRef(null),F=Ft.useRef(null);y.useEffect(()=>{t&&!P.current?(async()=>{v(!0);try{const K=await Ix();f(K),P.current=!0}catch(K){console.error("Error loading products:",K),C("Failed to load products. Please try again.")}finally{v(!1)}})():t||(s(""),l(""),d(""),b(!1),C(""),P.current=!1)},[t]),y.useEffect(()=>{function V(K){A.current&&!A.current.contains(K.target)&&T(!1)}return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const Q=Ft.useCallback(V=>{s(V.target.value)},[]),q=Ft.useCallback(V=>{l(V.target.value)},[]),ae=async V=>{if(V.preventDefault(),C(""),!n.trim()){C("Name is required");return}if(!a.trim()){C("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){C("Please enter a valid email address");return}if(!u){C("Please select a product");return}w(!0);try{const K=await h$(u);if(K.length===0){C("No administrators found for this product. Please contact your system administrator."),w(!1);return}const ge=m.find(_e=>_e.id===u),$=(ge==null?void 0:ge.name)||"the selected product",G=Array.from(new Set(K.map(_e=>{var Ie;return(Ie=_e.user)==null?void 0:Ie.email}).filter(Boolean))),ce=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",le=`${window.location.origin}${ce}/login`,U=await IC(a,u,"grant-admin"),ee=await IC(a,u,"grant-stakeholder"),$e=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${$}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${$}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${a}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${$}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${le}?token=${U}&action=grant-admin&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Product Owner</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${le}?token=${ee}&action=grant-stakeholder&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${le}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Oe=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${$}.

Requester Name: ${n}
Requester Email: ${a}
Product: ${$}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${le}

This is an automated message from the Feature Voting System.
      `;try{const _e=G.map(Ie=>Jc({to:Ie,subject:`Access Request for ${$} - Feature Voting System`,text:Oe,html:$e}));await Promise.all(_e),b(!0)}catch(_e){console.error("Email service failed:",_e);let Ie="Failed to send email through the system.";_e instanceof Error||_e!=null&&_e.message?Ie=_e.message:typeof _e=="string"&&(Ie=_e),(Ie.includes("validation_error")||Ie.includes("403"))&&(Ie="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),C(`Failed to send access request: ${Ie}. Please check the Supabase Edge Function logs for details.`),w(!1);return}}catch(K){console.error("Error sending access request:",K),C("Failed to send access request. Please try again or contact your administrator.")}finally{w(!1)}},Y=m.find(V=>V.id===u),oe=Y?gr(Y.name,Y.color_hex??null):null;return i.jsx(gn,{isOpen:t,onClose:r,title:j?"":"Request Access",maxWidth:"max-w-lg",hideHeader:j,children:j?i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(yn,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),i.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:Y==null?void 0:Y.name}),i.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):i.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),i.jsx("input",{ref:M,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{ref:F,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:a,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),i.jsxs("div",{ref:A,className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>T(!N),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Y&&oe&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:oe.background}}),i.jsx("span",{className:Y?"text-gray-900":"text-gray-400",children:Y?Y.name:"Select a product..."})]}),i.jsx(Ia,{className:`h-4 w-4 text-gray-400 transition-transform ${N?"transform rotate-180":""}`})]}),N&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(V=>{const K=gr(V.name,V.color_hex??null),ge=u===V.id;return i.jsxs("div",{onClick:()=>{d(V.id),T(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${ge?"bg-[#2d4660]/5":""}`,children:[K&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:K.background}}),i.jsx("span",{className:"text-sm text-gray-900",children:V.name})]},V.id)})})]})]}),_&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(Tt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),i.jsx(Tt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Gm,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function HZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=tl(),a=za(),[l]=Nx(),[u,d]=y.useState(!0),[m,f]=y.useState(!1),p=y.useRef(!1),[v,x]=y.useState([]),[w,j]=y.useState({}),[b,_]=y.useState({}),[C,N]=y.useState({}),[T,A]=y.useState({}),[P,M]=y.useState({}),[F,Q]=y.useState(!1),[q,ae]=y.useState(()=>sessionStorage.getItem("viewMode")||"admin"),[Y,oe]=y.useState(!1),V=y.useRef(null),[K,ge]=y.useState({}),[$,G]=y.useState({}),[ce,le]=y.useState(!1),[U,ee]=y.useState(!0),[ue,$e]=y.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[Oe,_e]=y.useState({}),[Ie,Ke]=y.useState(!1),[B,ve]=y.useState([]),[ie,ne]=y.useState(""),[pt,et]=y.useState(""),[Be,ft]=y.useState(null),[De,rt]=y.useState(null),[rr,R]=y.useState(!1),[L,H]=y.useState(!1),[ke,Ee]=y.useState(!1),[Te,Fe]=y.useState(null),[wt,Me]=y.useState(!1),[ze,bt]=y.useState(!1),[Et,ar]=y.useState(!1),[$t,We]=y.useState(null),[Ye,at]=y.useState(!1),[jt,gt]=y.useState("#2D4660"),Xt=y.useRef(null),[Ht,vr]=y.useState(new Set),[Zt,lr]=y.useState(null),[Qt,hr]=y.useState(null),[cr,te]=y.useState(!1),[Xe,ot]=y.useState(!1),[At,er]=y.useState(null),[_r,Dr]=y.useState(null),[ir,Kt]=y.useState(null),[ur,xr]=y.useState(null),[Er,fr]=y.useState(""),[br,Gt]=y.useState(null),[Lt,$r]=y.useState(!1),[or,Lr]=y.useState(!1),[Wn,cs]=y.useState("#2D4660"),[An,es]=y.useState(!1),[us,nr]=y.useState([]),[xn,kr]=y.useState([]),[Pn,ds]=y.useState(""),[On,js]=y.useState(""),[Tn,Vr]=y.useState(""),[J,ye]=y.useState(!1),[He,Pe]=y.useState(""),[I,W]=y.useState(null),[Z,Ce]=y.useState(!1),[Ge,Se]=y.useState(null),Ze=()=>Se(null),Vt=us.map(D=>D.user_email.toLowerCase()),Nr=Vt.length>0&&Vt.every(D=>xn.includes(D));y.useEffect(()=>{const D=l.get("error"),se=l.get("error_description"),fe=l.get("error_code");if(D){let Ae="Authentication failed.";fe==="unexpected_failure"&&(se!=null&&se.includes("email"))?Ae="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":se&&(Ae=decodeURIComponent(se)),sessionStorage.setItem("oauth_error",Ae),a("/login",{replace:!0})}},[l,a]),y.useEffect(()=>{(async()=>{if(!ce||!e)return;const se=e.tenant_id??e.tenantId??null;if(!se){ve([]),ne(""),Fe("No tenant assigned. Products cannot be loaded.");return}H(!0),Fe(null);try{let fe;Lh(e.email)||await eo(e.id)?fe=await Ho(se):fe=await xE(e.id);const tt=fe;ve(tt),ne(we=>{if(cr&&we&&tt.some(lt=>lt.id===we))return we;if(Zt){const pe=tt.find(lt=>{var Rt;return((Rt=lt.name)==null?void 0:Rt.toLowerCase().trim())===Zt.toLowerCase().trim()});if(pe!=null&&pe.id)return lr(null),pe.id}return cr&&we||""}),ge(we=>{const pe={...we};return tt.forEach(lt=>{lt.id&&lt.name&&(pe[lt.id]=lt.name)}),pe}),G(we=>{const pe={...we};return tt.forEach(lt=>{lt.id&&lt.color_hex&&(pe[lt.id]=lt.color_hex)}),pe})}catch(fe){console.error("Error loading products for modal:",fe),qc!=null&&qc(fe)?Fe("Products are not configured yet. Please create the `products` table in Supabase."):Fe("Unable to load products. You can still create a session without a product tag."),ve([]),ne("")}finally{H(!1)}})()},[ce,e]);const Ve=D=>{if(!D||typeof D!="string")return console.error("[parseLocalDate] Invalid date string:",D),new Date;const fe=D.split("T")[0].split(" ")[0].split("-");if(fe.length!==3)return console.error("[parseLocalDate] Invalid date format:",D),new Date;const Ae=parseInt(fe[0],10),Qe=parseInt(fe[1],10),tt=parseInt(fe[2],10);if(isNaN(Ae)||isNaN(Qe)||isNaN(tt))return console.error("[parseLocalDate] Invalid date components:",{year:Ae,month:Qe,day:tt}),new Date;const we=new Date(Ae,Qe-1,tt,0,0,0,0);return isNaN(we.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Ae,month:Qe,day:tt,dateString:D}),new Date):we},kt=D=>{if(!D||isNaN(D.getTime()))return console.error("[formatDateToISO] Invalid date:",D),new Date().toISOString().split("T")[0];const se=D.getFullYear(),fe=String(D.getMonth()+1).padStart(2,"0"),Ae=String(D.getDate()).padStart(2,"0");return`${se}-${fe}-${Ae}`},yt=(D,se)=>{const fe=D.getFullYear(),Ae=D.getMonth(),Qe=D.getDate();return new Date(fe,Ae,Qe+se,0,0,0,0)},Sr=()=>{const D="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let se="";for(let fe=0;fe<8;fe++)se+=D.charAt(Math.floor(Math.random()*D.length));return se},ht=()=>{$e({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),_e({}),et(""),ft(null),Fe(null),Me(!1),bt(!1),ar(!1),We(null),at(!1),gt("#2D4660"),lr(null),ee(!0),te(!1),ot(!1)},mr=(D=!1)=>{const se={};if(D||(ue.title.trim()||(se.title="Session title is required"),ue.goal.trim()||(se.goal="Session goal is required")),ue.useAutoVotes||(ue.votesPerUser<1&&(se.votesPerUser="Votes per user must be at least 1"),ue.votesPerUser>100&&(se.votesPerUser="Votes per user cannot exceed 100")),D){if(ue.startDate&&ue.endDate){const fe=Ve(ue.startDate);Ve(ue.endDate)<=fe&&(se.endDate="End date must be after start date")}}else if((!ue.startDate||!ue.startDate.trim())&&(se.startDate="Start date is required"),(!ue.endDate||!ue.endDate.trim())&&(se.endDate="End date is required"),ue.startDate&&ue.endDate&&ue.startDate.trim()&&ue.endDate.trim()){const fe=Ve(ue.startDate);Ve(ue.endDate)<=fe&&(se.endDate="End date must be after start date")}if(!D){const fe=pt.trim().length>0;!Te&&B.length>0&&!ie&&!$t&&!wt&&!fe&&(se.product="Please select a product or enter a new product name"),wt&&!fe&&(se.product="Please enter a product name or select an existing product")}return _e(se),Object.keys(se).length===0},pr=D=>{const{name:se,value:fe}=D.target;$e(Ae=>{const Qe={...Ae,[se]:se==="votesPerUser"?parseInt(fe)||0:fe};if(se==="startDate"&&fe){const tt=Ve(fe),we=yt(tt,14);Qe.endDate=kt(we)}return Qe}),Oe[se]&&_e(Ae=>{const Qe={...Ae};return delete Qe[se],Qe})},fn=async D=>{if(D==="startDate"&&!ue.startDate){let se;if(ie)try{const tt=v.filter(we=>we.product_id===ie);if(tt.length>0){let we=Ve(tt[0].end_date);tt.forEach(pe=>{const lt=Ve(pe.end_date);lt>we&&(we=lt)}),se=yt(we,1)}else se=new Date}catch(tt){console.error("Error calculating dates for product:",tt),se=new Date}else se=new Date;const fe=kt(se),Ae=Ve(fe),Qe=yt(Ae,14);$e(tt=>({...tt,startDate:fe,endDate:tt.endDate||kt(Qe)}))}else if(D==="endDate"&&!ue.endDate){let se;if(ue.startDate)se=Ve(ue.startDate);else if(ie)try{const Ae=v.filter(Qe=>Qe.product_id===ie);if(Ae.length>0){let Qe=Ve(Ae[0].end_date);Ae.forEach(tt=>{const we=Ve(tt.end_date);we>Qe&&(Qe=we)}),se=yt(Qe,1)}else se=new Date}catch(Ae){console.error("Error calculating dates for product:",Ae),se=new Date}else se=new Date;const fe=yt(se,14);$e(Ae=>({...Ae,endDate:kt(fe),startDate:Ae.startDate||kt(se)}))}},hn=async()=>{if(!(!De||!e)){R(!0);try{await bE(De.id),ve(D=>D.filter(se=>se.id!==De.id)),ge(D=>{const se={...D};return delete se[De.id],se}),G(D=>{const se={...D};return delete se[De.id],se}),ie===De.id&&ne("")}catch(D){console.error("Error deleting product:",D),alert("Failed to delete product. Please try again.")}finally{R(!1),rt(null)}}},Us=async()=>{if(e&&mr(!0)){Ke(!0);try{const D=Sr(),se=e.tenant_id??e.tenantId??null;let fe=ie&&ie.trim()!==""?ie:null;const Ae=pt.trim(),Qe=Ae.length>0;let tt=null,we=null;if($t?(tt=$t.name,we=$t.color):Qe&&(tt=Ae,we=Be),tt&&se)try{const Mt=B.find(Re=>Re.name.toLowerCase().trim()===tt.toLowerCase().trim());if(Mt)fe=Mt.id;else{const Re=await wk(se,tt,we||void 0);fe=Re.id,ve(Yt=>[...Yt,Re].sort((st,it)=>st.name.localeCompare(it.name))),ge(Yt=>({...Yt,[Re.id]:Re.name})),G(Yt=>{const st={...Yt};return Re.color_hex&&(st[Re.id]=Re.color_hex),st})}}catch(Mt){console.error("Error creating product during draft save:",Mt)}const pe=ue.startDate&&ue.startDate.trim()?ue.startDate:$n,lt=ue.endDate&&ue.endDate.trim()?ue.endDate:$n,Rt=`${pe}T00:00:00`,ut=`${lt}T23:59:59`,Pt=await jk({title:ue.title.trim()||"Untitled Session",goal:ue.goal.trim()||"",votes_per_user:ue.votesPerUser||10,use_auto_votes:ue.useAutoVotes,start_date:Rt,end_date:ut,is_active:!1,session_code:D,access_type:"invite-only",product_id:fe??null,product_name:null});try{await kk(Pt.id,e.id)}catch(Mt){console.error("Error adding product owner for draft:",Mt)}await r(),p.current=!1,await fs(),hi()}catch(D){console.error("Error saving draft:",D),_e(se=>({...se,submit:D.message||"Failed to save draft. Please try again."}))}finally{Ke(!1)}}},va=async D=>{if(D.preventDefault(),!!e&&mr(!1)){Ke(!0);try{const se=Sr(),fe=e.tenant_id??e.tenantId??null;let Ae=ie&&ie.trim()!==""?ie:null;const Qe=pt.trim(),tt=Qe.length>0,we=ie&&ie.trim()!=="";let pe=null,lt=null;if($t?(pe=$t.name,lt=$t.color):tt&&(pe=Qe,lt=Be),pe){const st=B.find(it=>it.name.toLowerCase().trim()===pe.toLowerCase().trim());if(st)Ae=st.id;else if(fe)try{const it=await wk(fe,pe,lt||void 0);Ae=it.id,ve(It=>[...It,it].sort((dt,tr)=>dt.name.localeCompare(tr.name))),ge(It=>({...It,[it.id]:it.name})),G(It=>{const dt={...It};return it.color_hex&&(dt[it.id]=it.color_hex),dt})}catch(it){console.error("Error creating product during session creation:",it),_e(It=>({...It,submit:"Failed to create product. Please try again."})),Ke(!1);return}else{console.error("No tenantId available to create product"),_e(it=>({...it,submit:"Unable to create product: No tenant assigned."})),Ke(!1);return}}if(Ae&&ue.startDate&&ue.endDate&&ue.startDate.trim()&&ue.endDate.trim()){const st=v.filter(St=>St.product_id===Ae),it=ue.startDate.split("T")[0],It=ue.endDate.split("T")[0];if(st.find(St=>{const O=St.start_date.split("T")[0],he=St.end_date.split("T")[0];return O===it&&he===It})){const St=K[Ae]||"this product";_e(O=>({...O,submit:`A session with the same dates (${qr(ue.startDate)} - ${qr(ue.endDate)}) already exists for ${St}. Please choose different dates.`})),Ke(!1);return}const tr=await u$(Ae);if(tr){const St=Ve(tr.end_date);if(Ve(ue.startDate)<=St){const he=K[Ae]||"this product";_e(Ne=>({...Ne,submit:`There is already an active session for ${he}. The new session must start after ${qr(tr.end_date)}.`})),Ke(!1);return}}}const Rt=`${ue.startDate}T00:00:00`,ut=`${ue.endDate}T23:59:59`,Pt=await jk({title:ue.title,goal:ue.goal,votes_per_user:ue.votesPerUser,use_auto_votes:ue.useAutoVotes,start_date:Rt,end_date:ut,is_active:!0,session_code:se,access_type:"invite-only",product_id:Ae??null,product_name:null});try{await kk(Pt.id,e.id)}catch(st){console.error("Error adding product owner (session was created successfully):",st),(st==null?void 0:st.code)==="42501"&&(console.warn("RLS policy violation when adding product owner. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the product_owners table."))}const Re=await $x(Pt.id)||Pt;if(Re.product_id&&fe)try{const it=(await Ho(fe)).find(It=>It.id===Re.product_id);it&&(ge(It=>({...It,[it.id]:it.name})),it.color_hex&&it.color_hex.trim()!==""&&G(It=>({...It,[it.id]:it.color_hex})))}catch(st){console.error("Error loading product for lookup:",st)}t(Re),await r(),await fs(),le(!1),ht();const Yt=q==="system-admin"?"system":"session";setTimeout(()=>{a(`/admin?perspective=${Yt}`)},100)}catch(se){console.error("Error creating session from modal:",se),_e(fe=>({...fe,submit:"Failed to create session. Please try again."}))}finally{Ke(!1)}}};y.useEffect(()=>{if(!Y)return;const D=se=>{V.current&&!V.current.contains(se.target)&&oe(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[Y]);const fs=y.useCallback(async()=>{var D;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const fe=Lh(e.email)||await eo(e.id);Q(fe);let Ae;fe?Ae=await Bd():Ae=await jE(e.id);const Qe=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let tt={},we={};if(Qe)try{const Mt=await Ho(Qe);tt=Mt.reduce((Re,Yt)=>(Yt.id&&Yt.name&&(Re[Yt.id]=Yt.name),Re),{}),we=Mt.reduce((Re,Yt)=>(Yt.id&&Yt.color_hex&&(Re[Yt.id]=Yt.color_hex),Re),{})}catch(Mt){console.error("Error loading products for session selection:",Mt)}const pe={},lt={},Rt={},ut={},Pt={};for(let Mt=0;Mt<Ae.length;Mt++){const Re=Ae[Mt];try{const[Yt,st,it,It,dt,tr]=await Promise.all([fe?Promise.resolve(!0):Rx(Re.id,e.id),Mx(Re.id,e.email),xi(Re.id),Uo(Re.id).catch(O=>(console.warn(`Failed to load votes for session ${Re.id}:`,O),[])),Bm(Re.id).catch(()=>[]),mv(Re.id).catch(()=>[])]);pe[Re.id]={isAdmin:Yt,isStakeholder:st},lt[Re.id]=it.length,ut[Re.id]=dt.length,Pt[Re.id]=tr.length;const St=It.some(O=>O.user_id===e.id);Rt[Re.id]=St}catch(Yt){console.warn(`Error loading data for session ${Re.id}:`,Yt),pe[Re.id]={isAdmin:!1,isStakeholder:!1},lt[Re.id]=0,ut[Re.id]=0,Pt[Re.id]=0,Rt[Re.id]=!1}}await r(),x(Ae),j(pe),_(lt),N(Rt),A(ut),M(Pt),ge(tt),G(we)}catch(se){console.error("Error loading sessions:",se),(D=se==null?void 0:se.message)!=null&&D.includes("Failed to fetch")||(se==null?void 0:se.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),j({}),_({}),N({})):(x([]),j({}),_({}),N({})),p.current=!1}finally{d(!1)}},[e,r]);y.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const se=setTimeout(()=>{f(!1),e||a("/login",{replace:!0})},3e3);return()=>clearTimeout(se)}if(m&&e&&f(!1),!m){if(!e&&!s){a("/login",{replace:!0});return}e&&!s&&!p.current&&fs()}},[e,s,a,m]);const In=D=>{const se=b[D.id]||0;if(D.use_auto_votes){const fe=Math.max(1,Math.floor(se/2));return{votes:fe,displayText:`${fe} votes/user`,isAuto:!0,formula:`Auto: ${se} ${se===1?"feature":"features"}  2 = ${fe}`}}else return{votes:D.votes_per_user,displayText:`${D.votes_per_user} votes/user`,isAuto:!1,formula:""}},Br=D=>{t(D);const se=w[D.id],fe=q==="system-admin"?"system":"session";q==="stakeholder"?a("/vote"):se!=null&&se.isAdmin?a(`/admin?perspective=${fe}`):a("/vote")},ks=D=>{t(D),a("/vote")},Dn=async()=>{try{await je.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}oe(!1),a("/login",{replace:!0})},qr=D=>{const fe=D.split("T")[0].split(" ")[0].split("-");if(fe.length!==3)return new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,ut=>`'${ut.slice(-2)}`);const Ae=parseInt(fe[0],10),Qe=parseInt(fe[1],10)-1,tt=parseInt(fe[2],10);return new Date(Ae,Qe,tt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,lt=>`'${lt.slice(-2)}`)},$n="2099-12-31",wn=D=>D?D.split("T")[0]===$n:!1,yo=D=>{if(!D.is_active){const se=!D.title||D.title==="Untitled Session"||D.title.trim()==="",fe=!D.goal||D.goal.trim()==="";return se||fe}return!1},Ps=D=>{if(yo(D))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Wh};const se=new Date,fe=new Date(D.start_date),Ae=new Date(D.end_date);return se<fe?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Ux}:se>Ae?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:dn}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:yn}},ci=D=>[...D].sort((se,fe)=>{const Ae=se!=null&&se.end_date?Date.parse(se.end_date):0;return(fe!=null&&fe.end_date?Date.parse(fe.end_date):0)-Ae}),vo=D=>D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ll=D=>vo(D).replace(/\n/g,"<br />"),ui=D=>{const se=Ur(D,K);return se?`${se}  ${D.title}`:`You're invited to vote: ${D.title}`},xo=(D,se)=>{const fe=Ur(D,K);return`Hello,

You're invited to participate in the "${fe?`${fe}  ${D.title}`:D.title}" feature voting session.

`+(D.goal?`Goal: ${D.goal}

`:"")+`Voting Period: ${wn(D.start_date)||wn(D.end_date)?"Dates not set":`${qr(D.start_date)} - ${qr(D.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the product owner team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},di=(D,se)=>{const fe="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const Ae=Ur(D,K),Qe=Ae?`${Ae}  ${D.title}`:D.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${fe}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${Qe}"</strong> feature voting session.</p>
            
            ${D.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${vo(D.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${wn(D.start_date)||wn(D.end_date)?"Dates not set":`${qr(D.start_date)} - ${qr(D.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${se}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the product owner team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},fi=async(D,se)=>{D.stopPropagation();const fe=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Ae=`${window.location.origin}${fe}/login?session=${se.session_code}`;Pe(""),W(se),Vr(Ae),ds(ui(se)),js(xo(se)),es(!0),ye(!0),nr([]),kr([]);try{const tt=(await mv(se.id)).filter(Rt=>!!Rt.user_email),we=await Tx(),pe=new Set(we.map(Rt=>Rt.email.toLowerCase())),lt=tt.filter(Rt=>pe.has(Rt.user_email.toLowerCase()));nr(lt),kr(lt.map(Rt=>Rt.user_email.toLowerCase())),lt.length===0&&(tt.length>0?Pe("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):Pe("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(Qe){console.error("Error loading stakeholders:",Qe),Pe(Qe.message||"Failed to load stakeholders for this session.")}finally{ye(!1)}},xa=(D,se)=>{D.stopPropagation(),t(se),a(`/results?perspective=${q==="system-admin"?"system":"session"}`)},Os=()=>{es(!1),nr([]),kr([]),W(null),Pe("")},wa=D=>{kr(se=>{const fe=D.toLowerCase();return se.includes(fe)?se.filter(Ae=>Ae!==fe):[...se,fe]})},Su=()=>{kr(Nr?[]:Vt)},_u=async()=>{if(!I)return;if(xn.length===0){Pe("Select at least one stakeholder to email.");return}Pe(""),Ce(!0);const D=xn.length,se=I.title,fe=On||xo(I),Ae=Pn||ui(I),Qe=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${Tn}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let tt;if(On){const we="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let pe=ll(fe);Tn&&pe.includes(vo(Tn))&&(pe=pe.replace(new RegExp(vo(Tn),"g"),"")),pe=pe+Qe,tt=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${we}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${pe}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else tt=di(I,Tn);try{await Promise.all(xn.map(pe=>Jc({to:pe,subject:Ae,text:fe,html:tt})));const we=us.filter(pe=>xn.includes(pe.user_email.toLowerCase())).map(pe=>({name:pe.user_name||"Unnamed Stakeholder",email:pe.user_email}));Os(),Se({sessionTitle:se,count:D,stakeholders:we})}catch(we){console.error("Error sending stakeholder invites:",we),Pe(we.message||"Failed to send invites. Please try again.")}finally{Ce(!1)}},wo=(D,se)=>{D.stopPropagation(),t(se);const fe=se.product_id||se.productId||"",Ae=fe?`/users?filter=product-owner&product=${fe}`:"/users?filter=product-owner";a(Ae)},bo=(D,se)=>{D.stopPropagation(),t(se);const fe=se.product_id||se.productId||"",Ae=fe?`/users?filter=stakeholder&product=${fe}`:"/users?filter=stakeholder";a(Ae)},hi=()=>{le(!1),te(!1),ot(!1),ht(),ne("")};if(u)return i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Ii=ci(v),Ss=F?Ii:Ii.filter(D=>{var se;return(se=w[D.id])==null?void 0:se.isAdmin}),mi=F?[]:Ii.filter(D=>{var se,fe;return((se=w[D.id])==null?void 0:se.isStakeholder)&&!((fe=w[D.id])!=null&&fe.isAdmin)}),Ts=F||Ss.length>0,jo=F&&q==="system-admin",Di=q==="stakeholder"?Ii.filter(D=>Ps(D).text==="Active"):[],Is=q==="admin"||q==="system-admin"?Ss:[],ko=q==="admin"?mi:[],hs=(D,se)=>{const fe={};return D.forEach(Ae=>{const Qe=Ur(Ae,se);if(!Qe||Qe==="No Product"||Qe.trim()==="")return;const tt=Qe.toLowerCase().trim();fe[tt]||(fe[tt]=[]),fe[tt].push(Ae)}),fe},ms=D=>{vr(se=>{const fe=new Set(se);return fe.has(D)?fe.delete(D):fe.add(D),fe})},ba=(D,se,fe,Ae)=>{const Qe=Ae||fe||D,tt=async we=>{if(!fe)return;we.stopPropagation();let pe=B.find(lt=>lt.id===fe);if(!pe){const lt=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(lt)try{pe=(await Ho(lt)).find(ut=>ut.id===fe),pe&&ve(ut=>ut.find(Mt=>Mt.id===fe)?ut:[...ut,pe].sort((Mt,Re)=>Mt.name.localeCompare(Re.name)))}catch(Rt){console.error("Error loading product for edit:",Rt)}}pe&&(xr(pe),fr(pe.name||""),Gt(pe.color_hex||null),cs(pe.color_hex||"#2D4660"))};return i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:se.background,color:se.text,borderColor:se.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{fe&&q!=="stakeholder"&&Ts&&Dr(Qe)},onMouseLeave:()=>Dr(null),onClick:q!=="stakeholder"&&Ts?tt:void 0,children:[i.jsx(wv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:D}),fe&&_r===Qe&&q!=="stakeholder"&&Ts&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Wh,{className:"h-4 w-4",style:{color:se.text}})})]})},ja=(D,se,fe,Ae,Qe,tt,we,pe=!0,lt)=>i.jsxs(i.Fragment,{children:[pe&&ba(se,fe,lt),i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"w-full px-6 py-2 rounded-t-md border-b border-gray-200",style:{backgroundColor:fe.background,color:fe.text},children:i.jsx("h3",{className:"text-lg font-semibold",children:D.title})}),i.jsxs("div",{className:"flex flex-col flex-1",style:{padding:"15px"},children:[q!=="stakeholder"&&(()=>{const Rt=Mt=>{if(!Mt||wn(Mt))return 0;const Re=new Date(Mt),Yt=new Date;Yt.setHours(0,0,0,0),Re.setHours(0,0,0,0);const st=Re.getTime()-Yt.getTime();return Math.ceil(st/(1e3*60*60*24))};let ut="Cast your Votes",Pt=!1;if(Ae.text==="Upcoming"){const Mt=Rt(D.start_date);ut=`Cast your Vote in ${Mt} ${Mt===1?"day":"days"}`,Pt=!0}else Ae.text==="Closed"||Ae.text==="Draft"?(ut="Voting Session Closed",Pt=!0):Ae.text==="Active"?(ut="Cast your Votes",Pt=!1):(ut="Voting Session Closed",Pt=!0);return i.jsxs("button",{onClick:Mt=>{Mt.stopPropagation(),Pt||ks(D)},disabled:Pt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mb-4 ${Pt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:Pt?{cursor:"not-allowed"}:{},children:[i.jsx(un,{className:`h-4 w-4 mr-2 ${Pt?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${Pt?"text-gray-500":"text-[#1E6154]"}`,children:ut})]})})(),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:"h-4 w-4 mr-2"}),wn(D.start_date)||wn(D.end_date)?i.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("span",{children:[qr(D.start_date)," - ",qr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${Ae.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ae.color}`,children:[i.jsx(Qe,{className:`${Ae.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ae.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[D.id]||0," ",b[D.id]===1?"feature":"features"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:se})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(un,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"break-words",children:tt.displayText}),tt.isAuto&&i.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[i.jsx(oh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[tt.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Ae.text!=="Upcoming"&&Ae.text!=="Draft"&&q!=="stakeholder"&&i.jsxs("button",{onClick:Rt=>xa(Rt,D),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[i.jsx(Eh,{className:"h-3 w-3 mr-1"}),Ae.text==="Closed"?"Final Results":"Current Results"]})]})]}),q!=="stakeholder"&&i.jsxs("div",{className:"flex items-center justify-center min-h-[48px] border-t border-gray-200 text-sm text-gray-600",children:[i.jsxs("button",{onClick:Rt=>{Rt.stopPropagation(),wo(Rt,D)},className:"flex items-center mr-3 text-[#2D4660] hover:text-[#1D3144] hover:underline cursor-pointer",children:[i.jsx(Cr,{className:"h-4 w-4 mr-1.5"}),T[D.id]!==void 0?T[D.id]:0," Product Owner",T[D.id]!==1?"s":""]}),i.jsx("span",{className:"text-gray-400",children:""}),i.jsxs("button",{onClick:Rt=>{Rt.stopPropagation(),bo(Rt,D)},className:"flex items-center ml-3 text-[#1E5461] hover:text-[#576C71] hover:underline cursor-pointer",children:[i.jsx(kn,{className:"h-4 w-4 mr-1.5"}),P[D.id]!==void 0?P[D.id]:0," Stakeholder",P[D.id]!==1?"s":""]})]}),q==="stakeholder"&&(()=>{const Rt=Mt=>{if(!Mt||wn(Mt))return 0;const Re=new Date(Mt),Yt=new Date;Yt.setHours(0,0,0,0),Re.setHours(0,0,0,0);const st=Re.getTime()-Yt.getTime();return Math.ceil(st/(1e3*60*60*24))};let ut="Cast your Votes",Pt=!1;if(Ae.text==="Upcoming"){const Mt=Rt(D.start_date);ut=`Cast your Vote in ${Mt} ${Mt===1?"day":"days"}`,Pt=!0}else Ae.text==="Closed"||Ae.text==="Draft"?(ut="Voting Session Closed",Pt=!0):Ae.text==="Active"?(ut="Cast your Votes",Pt=!1):(ut="Voting Session Closed",Pt=!0);return i.jsxs("button",{onClick:Mt=>{Mt.stopPropagation(),Pt||ks(D)},disabled:Pt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mt-4 ${Pt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:Pt?{cursor:"not-allowed"}:{},children:[i.jsx(un,{className:`h-6 w-6 mr-2 ${Pt?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${Pt?"text-gray-500":"text-[#1E6154]"}`,children:ut})]})})()]}),q!=="stakeholder"&&i.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const Rt=yo(D),ut=we||Rt;return i.jsxs("div",{className:`relative inline-block w-full ${ut?"group":""}`,children:[i.jsxs("button",{onClick:Pt=>fi(Pt,D),disabled:ut,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${ut?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:ut?{cursor:"not-allowed"}:{},children:[i.jsx(Gm,{className:`h-4 w-4 mr-2 ${ut?"text-gray-500":"text-blue-600"}`}),i.jsx("span",{className:`text-sm font-medium ${ut?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),ut&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Rt?"Draft Session":"Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]})]});return s||m||u&&!e?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>a("/sessions")}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,(()=>{const D=F?"system-admin":Ss.length>0?"product-owner":"stakeholder",se=D==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Mr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):D==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Cr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(nn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),fe=F&&q==="system-admin"?"system-admin":q==="admin"?"product-owner":"stakeholder";if(fe===D)return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",se]});const Ae=fe==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Mr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):fe==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Cr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(nn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",se,i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",Ae]})]})})()]})]})]}),i.jsxs("div",{ref:V,className:"relative z-40 md:justify-end",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[F&&(q==="admin"||q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>a("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(F||Ss.length>0)&&(q==="admin"||q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{ht(),te(!1),ee(!0),ne(""),le(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),i.jsx("span",{className:"sm:hidden",children:"Create"})]})}),i.jsxs("button",{onClick:Dn,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${q==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4"}),q==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden justify-end",children:i.jsx("button",{onClick:()=>oe(!Y),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),Y&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[F&&(q==="admin"||q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{oe(!1),a("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(F||Ss.length>0)&&(q==="admin"||q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{ht(),oe(!1),ee(!0),le(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),i.jsxs("button",{onClick:()=>{oe(!1),Dn()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${q==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(pa,{className:"h-4 w-4 text-gray-700"}),q==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),v.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[i.jsx(un,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),F&&i.jsxs("button",{onClick:()=>{ht(),ee(!0),le(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(pn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):i.jsxs("div",{className:"space-y-8",children:[q==="stakeholder"&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(un,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const D=Di.filter(we=>{const pe=Ur(we,K);return pe&&pe!=="No Product"&&pe.trim()!==""}),se=Di.filter(we=>{const pe=Ur(we,K);return!pe||pe==="No Product"||pe.trim()===""}),fe=hs(D,K),Ae=[],Qe=[],tt=[];return Object.entries(fe).forEach(([we,pe])=>{pe.length>=2?Ae.push({key:we,sessions:pe}):pe.length===1?Qe.push({key:we,sessions:pe}):tt.push(...pe)}),i.jsxs("div",{className:"space-y-8",children:[Ae.map(({key:we,sessions:pe})=>{var it,It;const lt=Ht.has(we),Rt=lt?pe:pe.slice(0,3),ut=pe.length>3?pe.length-3:0,Pt=Ur(pe[0],K),Mt=(it=pe[0])!=null&&it.product_id?$[pe[0].product_id]:void 0,Re=gr(Pt,Mt),Yt=(dt,tr)=>{const St=dt.replace("#",""),O=parseInt(St.substring(0,2),16),he=parseInt(St.substring(2,4),16),Ne=parseInt(St.substring(4,6),16);return`rgba(${O}, ${he}, ${Ne}, ${tr})`},st=Re.background?Yt(Re.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:st,borderColor:Re.border||"#E5E7EB",padding:"24px",marginTop:q==="stakeholder"?"25px":void 0},children:[ba(Pt,Re,(It=pe[0])==null?void 0:It.product_id,we),ut>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ms(we),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:lt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Ia,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ut,")",i.jsx(Ia,{className:"h-4 w-4"})]})})}),Ts&&q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:dt=>{var Ne;dt.stopPropagation();const tr=(Ne=pe[0])==null?void 0:Ne.product_id,St=Ur(pe[0],K);tr&&ne(tr),St&&St!=="No Product"&&lr(St);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(nt=>{const _t=Ve(nt.end_date);_t>O&&(O=_t)});const he=yt(O,1);yt(he,14),ht(),ne(tr),te(!0),ee(!1),ot(!0),le(!0)},onMouseEnter:()=>hr(we),onMouseLeave:()=>hr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},title:`Create new session for ${Pt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Rt.map((dt,tr)=>{const St=Ps(dt),O=St.text==="Closed",he=St.icon,Ne=In(dt),nt=C[dt.id],_t=Ur(dt,K),wr=dt.product_id?$[dt.product_id]:void 0,Jr=gr(_t,wr);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Jr.border,borderWidth:"1px",opacity:O&&ir!==dt.id?.75:1},onMouseEnter:()=>Kt(dt.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(dt),children:i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:nt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(yn,{className:"h-3 w-3 mr-1"}),"Voted"]}):St.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(dn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:dt.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:dt.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[qr(dt.start_date)," - ",qr(dt.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${St.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${St.color}`,children:[i.jsx(he,{className:`${St.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),St.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[dt.id]||0," ",b[dt.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:_t})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:Ne.displayText}),Ne.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(oh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ne.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:ta=>{ta.stopPropagation(),O||Br(dt)},disabled:O,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${O?"bg-gray-100 text-gray-500 cursor-not-allowed":nt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:O?{cursor:"not-allowed"}:{},children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),nt?"View or Change Votes":"Cast Your Votes"]})})]})},dt.id)})}),ut>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ms(we),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:lt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Ia,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ut,")",i.jsx(Ia,{className:"h-4 w-4"})]})})})]})},we)}),Qe.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:q==="stakeholder"?"30px":"50px"},children:Qe.map(({key:we,sessions:pe})=>{var Re,Yt;const lt=Ur(pe[0],K),Rt=(Re=pe[0])!=null&&Re.product_id?$[pe[0].product_id]:void 0,ut=gr(lt,Rt),Pt=(st,it)=>{const It=st.replace("#",""),dt=parseInt(It.substring(0,2),16),tr=parseInt(It.substring(2,4),16),St=parseInt(It.substring(4,6),16);return`rgba(${dt}, ${tr}, ${St}, ${it})`},Mt=ut.background?Pt(ut.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Mt,borderColor:ut.border||"#E5E7EB",padding:"24px",marginTop:q==="stakeholder"?"25px":void 0},children:[ba(lt,ut,(Yt=pe[0])==null?void 0:Yt.product_id,we),Ts&&q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:st=>{var St;st.stopPropagation();const it=(St=pe[0])==null?void 0:St.product_id,It=Ur(pe[0],K);it&&ne(it),It&&It!=="No Product"&&lr(It);let dt=Ve(pe[0].end_date);const tr=yt(dt,1);yt(tr,14),ht(),ne(it),te(!0),ee(!1),ot(!0),le(!0)},onMouseEnter:()=>hr(we),onMouseLeave:()=>hr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ut.background||"#C89212",color:ut.text||"#FFFFFF"},title:`Create new session for ${lt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),pe.map(st=>{const it=Ps(st),It=it.text==="Closed",dt=it.icon,tr=In(st);C[st.id];const St=Ur(st,K),O=st.product_id?$[st.product_id]:void 0,he=gr(St,O);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:he.border,borderWidth:"1px",opacity:It&&ir!==st.id?.75:1},onMouseEnter:()=>Kt(st.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(st),children:ja(st,St,he,it,dt,tr,It,!1,st.product_id)},st.id)})]})},we)})}),(tt.length>0||se.length>0)&&i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...tt,...se].map(we=>{const pe=Ps(we),lt=pe.text==="Closed",Rt=pe.icon,ut=In(we),Pt=C[we.id],Mt=Ur(we,K),Re=we.product_id?$[we.product_id]:void 0,Yt=gr(Mt,Re),st=tt.includes(we);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Yt.border,borderWidth:"1px",opacity:lt&&ir!==we.id?.75:1},onMouseEnter:()=>Kt(we.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(we),children:[ba(Mt,Yt,we.product_id),st&&Ts&&q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:it=>{it.stopPropagation();const It=we.product_id,dt=Ur(we,K);It&&ne(It),dt&&dt!=="No Product"&&lr(dt);const tr=Ve(we.end_date),St=yt(tr,1);yt(St,14),ht(),ne(It),te(!0),ee(!1),ot(!0),le(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Yt.background||"#C89212",color:Yt.text||"#FFFFFF"},onMouseEnter:it=>{const It=Yt.background||"#C89212";it.currentTarget.style.backgroundColor=It,it.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:it=>{it.currentTarget.style.backgroundColor=Yt.background||"#C89212",it.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Mt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Pt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(yn,{className:"h-3 w-3 mr-1"}),"Voted"]}):pe.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(dn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:we.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:we.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[qr(we.start_date)," - ",qr(we.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${pe.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${pe.color}`,children:[i.jsx(Rt,{className:`${pe.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),pe.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[we.id]||0," ",b[we.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Mt})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:ut.displayText}),ut.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(oh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ut.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:it=>{it.stopPropagation(),lt||Br(we)},disabled:lt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${lt?"bg-gray-100 text-gray-500 cursor-not-allowed":Pt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:lt?{cursor:"not-allowed"}:{},children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),Pt?"View or Change Votes":"Cast Your Votes"]})})]})]},we.id)})})]})})()]}),(q==="admin"||q==="system-admin")&&i.jsxs(i.Fragment,{children:[q==="admin"&&ko.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(un,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ko.map(D=>{const se=Ps(D),fe=se.text==="Closed",Ae=se.icon,Qe=In(D),tt=C[D.id],we=Ur(D,K),pe=D.product_id?$[D.product_id]:void 0,lt=gr(we,pe);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:lt.border,borderWidth:"1px",opacity:fe&&ir!==D.id?.75:1},onMouseEnter:()=>Kt(D.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(D),children:[i.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:lt.background,color:lt.text,borderColor:lt.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[i.jsx(wv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis",children:we})]}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:tt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(yn,{className:"h-3 w-3 mr-1"}),"Voted"]}):se.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(dn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:D.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Da,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[qr(D.start_date)," - ",qr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${se.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${se.color}`,children:[i.jsx(Ae,{className:`${se.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),se.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[D.id]||0," ",b[D.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:we})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:Qe.displayText}),Qe.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(oh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Qe.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:Rt=>{Rt.stopPropagation(),fe||Br(D)},disabled:fe,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${fe?"bg-gray-100 text-gray-500 cursor-not-allowed":tt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:fe?{cursor:"not-allowed"}:{},children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),tt?"View or Change Votes":"Cast Your Votes"]})})]})]},D.id)})})]}),Is.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[i.jsx(Xs,{className:"h-5 w-5 mr-2"}),jo?"All Sessions (System Admin)":"Sessions You Manage"]}),jo&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Is.length," total sessions across the organization."]})]}),(()=>{const D=Is.filter(we=>{const pe=Ur(we,K);return pe&&pe!=="No Product"&&pe.trim()!==""}),se=Is.filter(we=>{const pe=Ur(we,K);return!pe||pe==="No Product"||pe.trim()===""}),fe=hs(D,K),Ae=[],Qe=[],tt=[];return Object.entries(fe).forEach(([we,pe])=>{pe.length>=2?Ae.push({key:we,sessions:pe}):pe.length===1?Qe.push({key:we,sessions:pe}):tt.push(...pe)}),i.jsxs("div",{className:"space-y-8",children:[Ae.map(({key:we,sessions:pe})=>{var it,It;const lt=Ht.has(we),Rt=lt?pe:pe.slice(0,3),ut=pe.length>3?pe.length-3:0,Pt=Ur(pe[0],K),Mt=(it=pe[0])!=null&&it.product_id?$[pe[0].product_id]:void 0,Re=gr(Pt,Mt),Yt=(dt,tr)=>{const St=dt.replace("#",""),O=parseInt(St.substring(0,2),16),he=parseInt(St.substring(2,4),16),Ne=parseInt(St.substring(4,6),16);return`rgba(${O}, ${he}, ${Ne}, ${tr})`},st=Re.background?Yt(Re.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:st,borderColor:Re.border||"#E5E7EB",padding:"24px"},children:[ba(Pt,Re,(It=pe[0])==null?void 0:It.product_id,we),ut>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ms(we),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:lt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Ia,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ut,")",i.jsx(Ia,{className:"h-4 w-4"})]})})}),(F||q==="admin"||q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:dt=>{var Ne;dt.stopPropagation();const tr=(Ne=pe[0])==null?void 0:Ne.product_id,St=Ur(pe[0],K);tr&&ne(tr),St&&St!=="No Product"&&lr(St);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(nt=>{const _t=Ve(nt.end_date);_t>O&&(O=_t)});const he=yt(O,1);yt(he,14),ht(),ne(tr),te(!0),ee(!1),ot(!0),le(!0)},onMouseEnter:()=>hr(we),onMouseLeave:()=>hr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},title:`Create new session for ${Pt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Rt.map(dt=>{const tr=Ps(dt),St=tr.icon,O=In(dt),he=tr.text==="Closed",Ne=Ur(dt,K),nt=dt.product_id?$[dt.product_id]:void 0,_t=gr(Ne,nt);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:_t.border,borderWidth:"1px",opacity:he&&ir!==dt.id?.75:1},onMouseEnter:()=>Kt(dt.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(dt),children:ja(dt,Ne,_t,tr,St,O,he,!1,dt.product_id)},dt.id)}),pe.length===2&&i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),i.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Re.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>er(we),onMouseLeave:()=>er(null),onClick:dt=>{var Ne;dt.stopPropagation();const tr=(Ne=pe[0])==null?void 0:Ne.product_id,St=Ur(pe[0],K);tr&&ne(tr),St&&St!=="No Product"&&lr(St);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(nt=>{const _t=Ve(nt.end_date);_t>O&&(O=_t)});const he=yt(O,1);yt(he,14),ht(),ne(tr),te(!0),ee(!1),ot(!0),le(!0)},children:i.jsxs("div",{className:"flex flex-col h-full items-center justify-center relative rounded-lg transition-all duration-300",style:{padding:"15px",backgroundColor:"transparent",backgroundImage:Qt===we||At===we?`radial-gradient(circle at center, ${Re.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Qt===we||At===we)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),i.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),i.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),i.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),i.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),i.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),i.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),i.jsx(Tc,{className:"absolute top-6 left-12",size:8,style:{color:Re.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),i.jsx(Tc,{className:"absolute top-9 right-12",size:6,style:{color:Re.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),i.jsx(Tc,{className:"absolute bottom-9 left-6",size:7,style:{color:Re.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),i.jsx(Tc,{className:"absolute bottom-5 right-12",size:5,style:{color:Re.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx(Tc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:Re.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),i.jsx(Tc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:Re.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),i.jsx(Oc,{className:"absolute top-2 left-6",size:6,style:{color:Re.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),i.jsx(Oc,{className:"absolute top-11 right-6",size:5,style:{color:Re.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),i.jsx(Oc,{className:"absolute bottom-10 left-10",size:7,style:{color:Re.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),i.jsx(Oc,{className:"absolute bottom-2 right-8",size:6,style:{color:Re.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),i.jsx(Oc,{className:"absolute top-1/2 left-2",size:5,style:{color:Re.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),i.jsx(Oc,{className:"absolute top-1/2 right-2",size:6,style:{color:Re.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),i.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Re.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Qt===we||At===we?1:0,transformOrigin:"center center",animation:Qt===we||At===we?"growFromCenter 0.3s ease-out forwards":"none"},children:[i.jsx(pn,{className:"h-8 w-8",style:{color:Re.background||"#C89212"}}),i.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Re.background||"#C89212"},children:[i.jsx("span",{children:"Create"}),i.jsx("span",{children:"New Session"})]})]})]})})]})]}),ut>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ms(we),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:lt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Ia,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ut,")",i.jsx(Ia,{className:"h-4 w-4"})]})})})]})},we)}),Qe.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:"50px"},children:Qe.map(({key:we,sessions:pe})=>{var Re,Yt;const lt=Ur(pe[0],K),Rt=(Re=pe[0])!=null&&Re.product_id?$[pe[0].product_id]:void 0,ut=gr(lt,Rt),Pt=(st,it)=>{const It=st.replace("#",""),dt=parseInt(It.substring(0,2),16),tr=parseInt(It.substring(2,4),16),St=parseInt(It.substring(4,6),16);return`rgba(${dt}, ${tr}, ${St}, ${it})`},Mt=ut.background?Pt(ut.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Mt,borderColor:ut.border||"#E5E7EB",padding:"24px"},children:[ba(lt,ut,(Yt=pe[0])==null?void 0:Yt.product_id,we),(F||q==="admin"||q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:st=>{var St;st.stopPropagation();const it=(St=pe[0])==null?void 0:St.product_id,It=Ur(pe[0],K);it&&ne(it),It&&It!=="No Product"&&lr(It);let dt=Ve(pe[0].end_date);const tr=yt(dt,1);yt(tr,14),ht(),ne(it),te(!0),ee(!1),ot(!0),le(!0)},onMouseEnter:()=>hr(we),onMouseLeave:()=>hr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ut.background||"#C89212",color:ut.text||"#FFFFFF"},title:`Create new session for ${lt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),pe.map(st=>{const it=Ps(st),It=it.text==="Closed",dt=it.icon,tr=In(st);C[st.id];const St=Ur(st,K),O=st.product_id?$[st.product_id]:void 0,he=gr(St,O);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:he.border,borderWidth:"1px",opacity:It&&ir!==st.id?.75:1},onMouseEnter:()=>Kt(st.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(st),children:ja(st,St,he,it,dt,tr,It,!1,st.product_id)},st.id)})]})},we)})}),(tt.length>0||se.length>0)&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...tt,...se].map(we=>{const pe=Ps(we),lt=pe.icon,Rt=In(we),ut=pe.text==="Closed",Pt=Ur(we,K),Mt=we.product_id?$[we.product_id]:void 0,Re=gr(Pt,Mt),Yt=tt.includes(we);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Re.border,borderWidth:"1px",opacity:ut&&ir!==we.id?.75:1},onMouseEnter:()=>Kt(we.id),onMouseLeave:()=>Kt(null),onClick:()=>Br(we),children:[Yt&&(F||q==="admin"||q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:st=>{st.stopPropagation();const it=we.product_id,It=Ur(we,K);it&&ne(it),It&&It!=="No Product"&&lr(It);const dt=Ve(we.end_date),tr=yt(dt,1);yt(tr,14),ht(),ne(it),te(!0),ee(!1),ot(!0),le(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},onMouseEnter:st=>{const it=Re.background||"#C89212";st.currentTarget.style.backgroundColor=it,st.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:st=>{st.currentTarget.style.backgroundColor=Re.background||"#C89212",st.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Pt}`,children:i.jsx(pn,{className:"h-5 w-5"})})}),ja(we,Pt,Re,pe,lt,Rt,ut,!0,we.product_id)]},we.id)}),Is.length===2&&tt.length+se.length>0&&i.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow border border-gray-200",children:i.jsx("div",{className:"flex flex-col h-full items-end justify-center",style:{padding:"15px"},children:i.jsxs("button",{onClick:()=>{ee(!0),le(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[i.jsx(pn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),i.jsx(gn,{isOpen:ce,onClose:hi,title:"Create Voting Session",maxWidth:"max-w-3xl",children:i.jsxs("form",{onSubmit:va,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!wt&&!$t?cr&&ie?i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const D=B.find(Qe=>Qe.id===ie),se=(D==null?void 0:D.name)||K[ie]||"Unknown Product",fe=(D==null?void 0:D.color_hex)||$[ie],Ae=gr(se,fe);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Ae.background||"#2D4660",borderColor:Ae.border||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:se})]})})()}):i.jsx("div",{className:"space-y-3",style:{marginTop:0},children:i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(vZ,{label:"",products:B,value:ie,onChange:async D=>{if(ne(D),D){et("");try{const se=v.filter(fe=>fe.product_id===D);if(se.length>0){let fe=Ve(se[0].end_date);se.forEach(tt=>{const we=Ve(tt.end_date);we>fe&&(fe=we)});const Ae=yt(fe,1),Qe=yt(Ae,14);$e(tt=>({...tt,startDate:kt(Ae),endDate:kt(Qe)}))}else{const fe=new Date,Ae=yt(fe,14);$e(Qe=>({...Qe,startDate:kt(fe),endDate:kt(Ae)}))}}catch(se){console.error("Error calculating dates for selected product:",se);const fe=new Date,Ae=yt(fe,14);$e(Qe=>({...Qe,startDate:kt(fe),endDate:kt(Ae)}))}}Oe.product&&_e(se=>{const fe={...se};return delete fe.product,fe})},isLoading:L,error:Te,disabled:L||B.length===0||Xe,placeholder:"Select a product",helperText:!L&&B.length===0&&!Te&&U?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:U,onRequestDeleteProduct:U?(D=>{rt(D)}):void 0,className:"w-full"})}),U&&i.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[i.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),i.jsxs("button",{type:"button",onClick:()=>Me(!0),disabled:L,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(pn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):$t?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{We(null),et($t.name),ft($t.color),Me(!0),bt(!0),ar(!1)},children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:$t.color||"#2D4660",borderColor:$t.color||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:$t.name}),i.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):U&&wt?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[i.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),i.jsx("input",{type:"text",value:pt,onChange:D=>{et(D.target.value),D.target.value.trim()&&!ze&&setTimeout(()=>bt(!0),200),Te&&Fe(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),ze&&i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[i.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),i.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),i.jsx("button",{type:"button",onClick:()=>{gt(Be||"#2D4660"),at(!0),setTimeout(()=>{var D;(D=document.getElementById("native-color-input"))==null||D.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Be?{backgroundColor:Be}:{backgroundColor:"#ffffff"},children:!Be&&i.jsx("img",{src:HT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,Oe.product&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.product]}),Te&&(wt||!!$t)&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Te]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),i.jsx("input",{ref:Xt,type:"text",name:"title",value:ue.title,onChange:pr,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Oe.title?"border-red-500":"border-gray-300"}`}),Oe.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:ue.goal,onChange:pr,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Oe.goal?"border-red-500":"border-gray-300"}`}),Oe.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.goal]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("button",{type:"button",onClick:()=>$e(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:ue.useAutoVotes?i.jsx(zl,{className:"w-5 h-5 text-green-600"}):i.jsx(Nd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("label",{onClick:()=>$e(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",i.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!ue.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:ue.votesPerUser,onChange:pr,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Oe.votesPerUser?"border-red-500":"border-gray-300"}`}),Oe.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:ue.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),i.jsx("input",{type:"date",name:"startDate",value:ue.startDate||"",onChange:pr,onFocus:D=>{ue.startDate||fn("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Oe.startDate?"border-red-500":"border-gray-300"}`,style:ue.startDate?{}:{color:"transparent"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),Oe.startDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.startDate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),i.jsx("input",{type:"date",name:"endDate",value:ue.endDate||"",onChange:pr,onFocus:D=>{ue.endDate||fn("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Oe.endDate?"border-red-500":"border-gray-300"}`,style:ue.endDate?{}:{color:"transparent",position:"relative"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),Oe.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),Oe.endDate]})]})]}),(ue.startDate||ue.endDate)&&i.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("div",{}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{$e(D=>({...D,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),Oe.submit&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-2"}),Oe.submit]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(Tt,{type:"button",variant:"secondary",onClick:Us,disabled:Ie||!Xe&&!ie&&!(wt&&pt.trim()&&Be)&&!$t,children:Ie?"Saving...":"Save Draft"}),i.jsx(Tt,{type:"submit",variant:wt&&pt.trim()&&Be?"gold":"primary",disabled:Ie||!Xe&&!ie&&!(wt&&pt.trim()&&Be)&&!$t,className:`transition-all duration-500 ease-in-out ${wt&&pt.trim()&&Be?"relative overflow-hidden":""}`,children:Ie?"Creating...":wt&&pt.trim()&&Be?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"relative z-10 flex items-center",children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),i.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Ye&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>at(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:jt,onChange:D=>gt(D.target.value),ref:D=>{D&&Ye&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{ft(jt),at(!1),setTimeout(()=>{var D;(D=Xt.current)==null||D.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:jt,height:"260px",minWidth:"100px"},children:[i.jsx(yn,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),q==="stakeholder"&&v.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(un,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),q==="admin"&&ko.length>0&&Is.length===0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(un,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),q==="admin"&&Is.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(kn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),i.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),q==="system-admin"&&i.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Cr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-purple-900",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),i.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),i.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),i.jsx(GT,{currentRole:F&&q==="system-admin"?"system-admin":q==="admin"?"product-owner":"stakeholder",onSelectStakeholder:()=>{ae("stakeholder"),sessionStorage.setItem("viewMode","stakeholder"),sessionStorage.setItem("adminPerspective","session")},onSelectSessionAdmin:()=>{ae("admin"),sessionStorage.setItem("viewMode","admin"),sessionStorage.setItem("adminPerspective","session")},onSelectSystemAdmin:F?()=>{ae("system-admin"),sessionStorage.setItem("viewMode","system-admin"),sessionStorage.setItem("adminPerspective","system")}:void 0,showRoleToggle:Ts,isSessionAdmin:Ts&&!F}),i.jsxs(gn,{isOpen:An,onClose:()=>{Z||Os()},title:I?(()=>{const D=Ur(I,K);return D?`${D}  ${I.title}`:`Email Stakeholders  ${I.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[i.jsxs("div",{className:"space-y-6",children:[He&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:He}),J?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",us.length,")"]}),us.length>0&&i.jsx("button",{type:"button",onClick:Su,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:Nr?"Deselect All":"Select All"})]}),i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:us.length===0?i.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):us.map(D=>{const se=D.user_email.toLowerCase(),fe=xn.includes(se);return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>wa(D.user_email),children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.user_name||"Unnamed Stakeholder"}),i.jsx("p",{className:"text-xs text-gray-500",children:D.user_email})]}),i.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),wa(D.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:fe?i.jsx(zl,{className:"w-5 h-5 text-green-600"}):i.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})]},D.id)})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",value:Pn,onChange:D=>ds(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),i.jsx("textarea",{value:On,onChange:D=>js(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),i.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[i.jsx(Tt,{variant:"secondary",onClick:Os,disabled:Z,children:"Cancel"}),i.jsx(Tt,{variant:"primary",onClick:_u,disabled:Z||us.length===0||xn.length===0,children:Z?"Sending...":`Send to ${xn.length} Stakeholder${xn.length===1?"":"s"}`})]})]}),i.jsx(gn,{isOpen:!!Ge,onClose:Ze,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:i.jsxs("div",{className:"py-6 px-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(yn,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Ge==null?void 0:Ge.count)??0," stakeholder",(Ge==null?void 0:Ge.count)===1?"":"s"," for"," ",i.jsx("span",{className:"font-semibold text-gray-900",children:Ge==null?void 0:Ge.sessionTitle}),"."]})]}),(Ge==null?void 0:Ge.stakeholders)&&Ge.stakeholders.length>0&&i.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Ge.stakeholders.map((D,se)=>i.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:D.name}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.email})]}),i.jsx(yn,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},se))})]})]})}),De&&i.jsxs(gn,{isOpen:!0,onClose:()=>rt(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:De.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>rt(null),disabled:rr,children:"Cancel"}),i.jsx(Tt,{variant:"danger",onClick:hn,disabled:rr,children:rr?"Deleting":"Delete"})]})]}),ur&&i.jsx(gn,{isOpen:!0,onClose:()=>{xr(null),fr(""),Gt(null),Lr(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Er,onChange:D=>fr(D.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{cs(br||"#2D4660"),Lr(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:br?{backgroundColor:br}:{backgroundColor:"#ffffff"},children:!br&&i.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:br||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(Tt,{variant:"secondary",onClick:()=>{xr(null),fr(""),Gt(null),Lr(!1)},disabled:Lt,children:"Cancel"}),i.jsx(Tt,{variant:"primary",onClick:async()=>{if(!(!(ur!=null&&ur.id)||!Er.trim())){$r(!0);try{await wE(ur.id,{name:Er.trim(),color_hex:br});const D=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(D){const se=await Ho(D);ve(se.sort((Qe,tt)=>Qe.name.localeCompare(tt.name)));const fe={},Ae={};se.forEach(Qe=>{fe[Qe.id]=Qe.name||"",Qe.color_hex&&(Ae[Qe.id]=Qe.color_hex)}),ge(fe),G(Ae)}xr(null),fr(""),Gt(null),Lr(!1),await r(),await fs()}catch(D){console.error("Error updating product:",D),alert("Failed to update product. Please try again.")}finally{$r(!1)}}},disabled:Lt||!Er.trim(),children:Lt?"Updating...":"Update Product"})]})]})}),or&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Lr(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:Wn,onChange:D=>cs(D.target.value),ref:D=>{D&&or&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Gt(Wn),Lr(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Wn,height:"260px",minWidth:"100px"},children:[i.jsx(yn,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}function KZ(){const{currentUser:e,sessions:t}=tl(),r=za(),[n,s]=y.useState([]),[a,l]=y.useState(!0),[u,d]=y.useState(!1);y.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const v=new Set;for(const x of t)(await Bm(x.id)).forEach(j=>{j.user&&j.user.email&&v.add(j.user.email)});s(Array.from(v))}catch(v){console.error("Error loading admin emails:",v)}finally{l(!1)}},f=()=>{const v=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),w=n.length>0?`mailto:${n.join(",")}?subject=${v}&body=${x}`:`mailto:?subject=${v}&body=${x}`;window.location.href=w,d(!0)},p=()=>{r("/login")};return a?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:i.jsx(cF,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),i.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),i.jsx("div",{className:"p-6",children:u?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(yn,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),i.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[i.jsx(uS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(kn,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),i.jsx("p",{className:"text-xs",children:n.join(", ")})]}):i.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[i.jsx(Gm,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(uS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function GZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=tl(),n=za(),s=async()=>{try{await je.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),n("/login",{replace:!0})},[a,l]=y.useState([]),[u,d]=y.useState(!0),[m,f]=y.useState(!1),[p,v]=y.useState({email:""}),[x,w]=y.useState({}),[j,b]=y.useState(!1),[_,C]=y.useState(!1),N=y.useRef(null),[T,A]=y.useState(!1),[P,M]=y.useState(!1);y.useEffect(()=>{if(!_)return;const oe=V=>{N.current&&!N.current.contains(V.target)&&C(!1)};return document.addEventListener("mousedown",oe),document.addEventListener("touchstart",oe,{passive:!0}),()=>{document.removeEventListener("mousedown",oe),document.removeEventListener("touchstart",oe)}},[_]),y.useEffect(()=>{F()},[]),y.useEffect(()=>{(async()=>{if(!e)return;const V=await eo(e.id);A(V);try{const K=await xE(e.id);M(Array.isArray(K)&&K.length>0)}catch(K){console.error("Error checking product owner status:",K),M(!1)}})()},[e]);const F=async()=>{d(!0);try{let oe=await Ck();oe.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Ek(e.id),oe=await Ck()),l(oe)}catch(oe){console.error("Error loading system admins:",oe)}finally{d(!1)}},Q=oe=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(oe),q=async oe=>{oe.preventDefault();const V={};if(p.email.trim()?Q(p.email)||(V.email="Invalid email address"):V.email="Email is required",a.some(K=>K.user.email.toLowerCase()===p.email.toLowerCase())&&(V.email="This user is already a system admin"),w(V),!(Object.keys(V).length>0)){b(!0);try{const K=p.email.split("@")[0].replace(/\./g," "),ge=await Uc(p.email,K);await Ek(ge.id);try{const $=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",G=`${window.location.origin}${$}/login`;await Jc({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${G}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${G}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const $=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",G=`${window.location.origin}${$}/login`,ce=encodeURIComponent("You're a System Admin: Feature Voting System"),le=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${G}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ce}&body=${le}`}catch{}}await F(),v({email:""}),f(!1)}catch(K){console.error("Error adding system admin:",K),w({submit:"Failed to add system admin. Please try again."})}finally{b(!1)}}},ae=async oe=>{const V=a.reduce((K,ge)=>new Date(ge.created_at)<new Date(K.created_at)?ge:K);if(oe===V.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(a.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(oe===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await C$(oe),await F()}catch(K){console.error("Error removing system admin:",K),alert("Failed to remove system admin")}},Y=oe=>{const K=oe.split("T")[0].split(" ")[0].split("-");let ge;if(K.length===3){const $=parseInt(K[0],10),G=parseInt(K[1],10)-1,ce=parseInt(K[2],10);ge=new Date($,G,ce);const le=oe.match(/T(\d{2}):(\d{2}):(\d{2})/);le&&ge.setHours(parseInt(le[1],10),parseInt(le[2],10),parseInt(le[3],10))}else ge=new Date(oe);return ge.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(HM,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,T&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&P&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Product Owner"})]})]})]}),i.jsxs("div",{ref:N,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(fS,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),i.jsx("button",{onClick:s,className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>{C(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(fS,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),i.jsx("button",{onClick:()=>{C(!1),s()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mr,{className:"h-8 w-8 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),i.jsx("p",{className:"text-3xl font-bold",children:a.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",a.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const oe=a.reduce((V,K)=>new Date(K.created_at)<new Date(V.created_at)?K:V);return a.map(V=>{const K=V.user_id===oe.user_id;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mr,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[V.user.name,V.user.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),K&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(Gm,{className:"h-4 w-4 mr-2"}),V.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Y(V.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>ae(V.user_id),className:`text-red-600 hover:text-red-900 ${V.user.id===(e==null?void 0:e.id)||a.length===1||K?"opacity-50 cursor-not-allowed":""}`,disabled:V.user.id===(e==null?void 0:e.id)||a.length===1||K,title:K?"Cannot remove the original system admin":V.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":a.length===1?"Cannot remove the last system admin":"Remove system admin",children:i.jsx(to,{className:"h-5 w-5"})})})]},V.id)})})()})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Mr,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Full access to all voting sessions across the system"}),i.jsx("li",{children:"Create and manage any voting session"}),i.jsx("li",{children:"Add and remove other system administrators"}),i.jsx("li",{children:"Manage Product Owners and stakeholders for any session"}),i.jsx("li",{children:"View all results and analytics system-wide"})]}),i.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),i.jsx("button",{onClick:()=>{f(!1),v({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:q,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:p.email,onChange:oe=>v(V=>({...V,email:oe.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(dn,{className:"h-4 w-4 mr-2"}),x.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),v({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add System Admin"})]})]})]})})]})}async function YZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:a},error:l}=await je.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!a)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=a.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=a.user)==null?void 0:n.identities)==null?void 0:s.some(j=>j.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=a.provider_token||a.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,v=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!v.ok){const j=await v.text();let b="";throw v.status===401?(b="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",j)):v.status===403?(b='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",j)):v.status===400?(b="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",j)):(b=`Unable to search users (${v.status}). Please try again.`,console.error("Azure AD search error:",v.status,j)),new Error(b)}return((await v.json()).value||[]).map(j=>({id:j.id,displayName:j.displayName||"",mail:j.mail||j.userPrincipalName||"",userPrincipalName:j.userPrincipalName||"",givenName:j.givenName,surname:j.surname,jobTitle:j.jobTitle,department:j.department})).sort((j,b)=>{const _=j.displayName.toLowerCase(),C=b.displayName.toLowerCase();return _.localeCompare(C)})}catch(a){throw console.error("Error searching Azure AD users:",a),a}}const JZ=e=>{if(!e.start_date||!e.end_date)return"No dates set";const t=Sn(e.start_date),r=Sn(e.end_date);return`${t} - ${r}`},XZ=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})}:t?{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})}:null,QZ=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})};case"session-admin":return{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})};default:return null}},ZZ=(e,t,r)=>e?"system-admin":t?"session-admin":"stakeholder",eee=(e,t,r,n)=>{const s=ZZ(e,t),a=XZ(e,t,r);if(!a)return null;if(n===s)return i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]})]});const l=QZ(n);return l?i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]}),i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",i.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:l.icon}),i.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null};function tee(){var ye,He,Pe;const e=za(),t=Oi(),{setCurrentSession:r,currentUser:n}=tl(),s=new URLSearchParams(t.search),a=s.get("filter"),l=s.get("product"),[u,d]=y.useState([]),[m,f]=y.useState([]),[p,v]=y.useState([]),[x,w]=y.useState(!0),[j,b]=y.useState(null),[_,C]=y.useState(""),[N,T]=y.useState(a==="product-owner"?"session-admin":a==="stakeholder"?"stakeholder":a==="system-admin"?"system-admin":"all"),[A,P]=y.useState(l||""),[M,F]=y.useState("system-admin"),[Q,q]=y.useState(null),[ae,Y]=y.useState(!1),[oe,V]=y.useState(!1),[K,ge]=y.useState([]),[$,G]=y.useState(new Set),[ce,le]=y.useState(null),[U,ee]=y.useState(null),[ue,$e]=y.useState(null),[Oe,_e]=y.useState(new Set),[Ie,Ke]=y.useState(!1),[B,ve]=y.useState(null),[ie,ne]=y.useState(null),[pt,et]=y.useState({adminSessions:[],stakeholderSessions:[]}),[Be,ft]=y.useState(""),[De,rt]=y.useState(!1),rr=y.useRef(null),[R,L]=y.useState(null),[H,ke]=y.useState(null),[Ee,Te]=y.useState(!1),[Fe,wt]=y.useState(!1),[Me,ze]=y.useState({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""}),[bt,Et]=y.useState(!1),[ar,$t]=y.useState(!1),We=y.useRef(null),Ye=y.useRef(null),[at,jt]=y.useState(!1),gt=y.useRef(null),[Xt,Ht]=y.useState(!1),vr=y.useRef(null),[Zt,lr]=y.useState({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""}),[Qt,hr]=y.useState(!0),cr=y.useRef(null),[te,Xe]=y.useState(!1),[ot,At]=y.useState(null),[er,_r]=y.useState(""),[Dr,ir]=y.useState(""),[Kt,ur]=y.useState(!1),[xr,Er]=y.useState({title:"",message:"",type:"info"}),fr=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),[br,Gt]=y.useState(null),[Lt,$r]=y.useState(new Set);y.useRef({}),y.useEffect(()=>{kr()},[]),y.useEffect(()=>{const I=W=>{ue&&!W.target.closest(".actions-dropdown-container")&&$e(null),bt&&We.current&&!We.current.contains(W.target)&&Et(!1),ar&&Ye.current&&!Ye.current.contains(W.target)&&$t(!1),De&&rr.current&&!rr.current.contains(W.target)&&rt(!1),at&&gt.current&&!gt.current.contains(W.target)&&jt(!1),Xt&&vr.current&&!vr.current.contains(W.target)&&Ht(!1),Zt.showResults&&cr.current&&!cr.current.contains(W.target)&&lr(Z=>({...Z,showResults:!1}))};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[ue,bt,ar,De,at,Xt,Zt.showResults]);const or=(I,W,Z="info")=>{Er({title:I,message:W,type:Z}),ur(!0)},Lr=I=>{if(I.id===br)return"Original Admin";const W=I.email.toLowerCase();return W==="chris.rodes@newmill.com"?"Manager":W==="spencer.faull@newmill.com"?"Portfolio Owner":null},Wn=async(I,W)=>{ne(I),ve(W),ft(""),L(null),ke(null),Ke(!0),$e(null)},cs=async()=>{if(H!=="system-admin"&&(!ie||!B||!Be)){or("Missing Information","Please select a product to continue.","error");return}if(H==="system-admin"&&(!ie||!B)){or("Missing Information","Unable to process request.","error");return}if(B==="remove-stakeholder"&&!R){or("Missing Information","Please select a role to remove.","error");return}if((B==="session-admin"||B==="stakeholder"||B==="system-admin")&&!H){or("Missing Information","Please select a role to add.","error");return}try{const I=m.filter(W=>W.product_id===Be);if(I.length===0){or("No Sessions Found","There are no sessions available for this product.","error");return}if(B==="remove-stakeholder"){if(R==="system-admin"){const{error:W}=await je.from("users").update({is_system_admin:!1}).eq("id",ie.id);if(W)throw W;or("Role Removed Successfully",`${ie.name} has been removed as System Admin.`,"success")}else if(R==="product-owner"){const{error:W}=await je.from("product_product_owners").delete().eq("user_id",ie.id).eq("product_id",Be);if(W)throw W;or("Role Removed Successfully",`${ie.name} has been removed as Product Owner from this product.`,"success")}else if(R==="stakeholder"){const W=I.map(Ce=>Ce.id),{error:Z}=await je.from("product_stakeholders").delete().eq("user_id",ie.id).in("session_id",W);if(Z)throw Z;or("Role Removed Successfully",`${ie.name} has been removed as Stakeholder from ${I.length} session(s).`,"success")}}else if(H==="system-admin"){const{error:W}=await je.from("users").update({is_system_admin:!0}).eq("id",ie.id);if(W)throw W;or("Role Added Successfully",`${ie.name} has been granted System Admin privileges.`,"success")}else if(H==="product-owner"){const{error:W}=await je.from("product_product_owners").insert({product_id:Be,user_id:ie.id});if(W)throw W;or("Role Added Successfully",`${ie.name} has been added as Product Owner to this product.`,"success")}else if(H==="stakeholder"){const W=I.map(Z=>Z.id);for(const Z of W)await je.from("product_stakeholders").insert({session_id:Z,user_id:ie.id,user_email:ie.email,user_name:ie.name});or("Role Added Successfully",`${ie.name} has been added as Stakeholder to ${I.length} session(s).`,"success")}Ke(!1),await kr()}catch(I){console.error("Error with role operation:",I),or(`Failed to ${B==="remove-stakeholder"?"Remove":"Add"} Role`,I.message||"An unknown error occurred. Please try again.","error")}},An=()=>{Te(!1),ze({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""}),hr(!0),lr({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""})},es=async I=>{if(lr(W=>({...W,searchTerm:I,isSearching:!0,showResults:!1,error:""})),!I||I.trim().length<2){lr(W=>({...W,results:[],isSearching:!1,error:""}));return}try{const W=await YZ(I);lr(Z=>({...Z,results:W,isSearching:!1,showResults:W.length>0,error:""}))}catch(W){console.error("Error searching Azure AD users:",W);const Z=(W==null?void 0:W.message)||"Failed to search company users. Please try again.";lr(Ce=>({...Ce,results:[],isSearching:!1,showResults:!1,error:Z}))}},us=I=>{let W="";if(I.givenName&&I.surname)W=`${I.givenName} ${I.surname}`;else if(I.displayName){const Z=I.displayName.trim();if(Z.includes(",")){const Ce=Z.split(",").map(Ge=>Ge.trim());Ce.length===2?W=`${Ce[1]} ${Ce[0]}`:W=Z}else W=Z}else W=I.mail||I.userPrincipalName||"";ze({...Me,name:W,email:I.mail||I.userPrincipalName}),lr({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""}),hr(!1)},nr=async()=>{if(!Me.name.trim()||!Me.email.trim()){or("Missing Required Fields","Please provide both name and email address.","error");return}wt(!0);try{const{data:I,error:W}=await je.from("users").insert({name:Me.name.trim(),email:Me.email.trim().toLowerCase(),created_by:n==null?void 0:n.id,created_by_name:n==null?void 0:n.name}).select().single();if(W)throw W;if(!I)throw new Error("User creation failed");const Z=I.id;if(Me.isSystemAdmin&&await je.from("system_admins").insert({user_id:Z}),Me.isProductOwner&&Me.productOwnerProductId){const Ce=m.filter(Ge=>Ge.product_id===Me.productOwnerProductId);for(const Ge of Ce)await je.from("product_product_owners").insert({session_id:Ge.id,user_id:Z})}if(Me.isStakeholder&&Me.stakeholderProductId){const Ce=m.filter(Ge=>Ge.product_id===Me.stakeholderProductId);for(const Ge of Ce)await je.from("product_stakeholders").insert({session_id:Ge.id,user_id:Z,user_email:Me.email.trim().toLowerCase(),user_name:Me.name.trim()})}An(),await kr(),or("User Created Successfully",`${Me.name} has been added to the system.`,"success")}catch(I){console.error("Error creating user:",I),or("Failed to Create User",I.message||"An unknown error occurred. Please try again.","error")}finally{wt(!1)}},xn=async(I,W)=>{const Z=u.find(Ce=>Ce.id===I);if(Z&&confirm(`Are you sure you want to delete ${W}? This cannot be undone.`))try{await je.from("system_admins").delete().eq("user_id",I),await je.from("product_product_owners").delete().eq("user_id",I),await je.from("product_stakeholders").delete().eq("user_email",Z.email),await je.from("users").delete().eq("id",I),$e(null),await kr()}catch(Ce){console.error("Error deleting user:",Ce),or("Failed to Delete User","An error occurred while deleting the user. Please try again.","error")}},kr=async()=>{var I,W,Z;try{w(!0),b(null);const{data:{user:Ce}}=await je.auth.getUser();if(!Ce){e("/login");return}const[Ge,Se,Ze,Vt,Nr,Ve]=await Promise.all([Tx(),je.from("voting_sessions").select("*").order("created_at",{ascending:!1}),je.from("products").select("*").order("name"),je.from("votes").select("user_id, session_id"),je.from("product_product_owners").select("user_id, product_id, created_at"),je.from("product_stakeholders").select("user_email, product_id, created_at")]),kt=new Map;(Nr.data||[]).forEach(mr=>{kt.has(mr.user_id)||kt.set(mr.user_id,[]),kt.get(mr.user_id).push({product_id:mr.product_id,created_at:mr.created_at})});const yt=new Map;(Ve.data||[]).forEach(mr=>{var fn;const pr=((fn=mr.user_email)==null?void 0:fn.toLowerCase())||"";pr&&(yt.has(pr)||yt.set(pr,[]),yt.get(pr).push({product_id:mr.product_id,created_at:mr.created_at}))});const Sr=new Map((Se.data||[]).map(mr=>[mr.id,mr])),ht=new Map;if((Se.data||[]).forEach(mr=>{const pr=mr.product_id||"unknown";ht.has(pr)||ht.set(pr,[]),ht.get(pr).push(mr)}),Ge){const mr=await Promise.all(Ge.map(async hn=>{const Us=await vE(hn.id),va=[],fs=[];(kt.get(hn.id)||[]).forEach(Dn=>{(ht.get(Dn.product_id)||[]).forEach($n=>{va.push({...$n,assignedAt:Dn.created_at,assignedBy:"System",assignedByName:"System"})})});const Br=hn.email.toLowerCase();return(yt.get(Br)||[]).forEach(Dn=>{(ht.get(Dn.product_id)||[]).forEach($n=>{fs.push({...$n,assignedAt:Dn.created_at,assignedBy:"System",assignedByName:"System"})})}),{...hn,roles:Us,adminInSessions:va,stakeholderInSessions:fs}}));d(mr);const pr=n?mr.find(hn=>hn.email.toLowerCase()===n.email.toLowerCase()):null;if(q(pr||null),pr){const hn=((I=pr.roles)==null?void 0:I.isSystemAdmin)||!1,Us=(((W=pr.roles)==null?void 0:W.sessionAdminCount)||0)>0;Y(hn),V(Us),!hn&&Us&&F("session-admin")}const fn=((Z=pr==null?void 0:pr.adminInSessions)==null?void 0:Z.map(hn=>hn.id))||[];ge(fn)}if(Se.data&&f(Se.data),Ze.data&&v(Ze.data),Vt.data){const mr=new Set(Vt.data.map(pr=>`${pr.user_id}-${pr.session_id}`));_e(mr)}}catch(Ce){console.error("UsersManagementScreenMultiRow: Error loading data:",Ce),b(Ce instanceof Error?Ce.message:"An error occurred loading data")}finally{w(!1)}},Pn=I=>{const W=new Map;return I.forEach(Z=>{const Ce=Z.product_id||"unknown";W.has(Ce)||W.set(Ce,[]),W.get(Ce).push(Z)}),W},ds=I=>{if(!I)return[];let W=I;return A&&(W=W.filter(Z=>Z.product_id===A)),M==="session-admin"&&!ae&&K.length>0&&(W=W.filter(Z=>K.includes(Z.id))),W},On=()=>{var W,Z;if(ae&&M==="system-admin")return p;if(!Q)return[];const I=new Set;return(W=Q.adminInSessions)==null||W.forEach(Ce=>{Ce.product_id&&I.add(Ce.product_id)}),(Z=Q.stakeholderInSessions)==null||Z.forEach(Ce=>{Ce.product_id&&I.add(Ce.product_id)}),p.filter(Ce=>I.has(Ce.id))},js=()=>{var W,Z;const I=On();if(B==="remove-stakeholder"&&ie&&R){const Ce=new Set;return R==="product-owner"?(W=ie.adminInSessions)==null||W.forEach(Ge=>{Ge.product_id&&Ce.add(Ge.product_id)}):R==="stakeholder"&&((Z=ie.stakeholderInSessions)==null||Z.forEach(Ge=>{Ge.product_id&&Ce.add(Ge.product_id)})),I.filter(Ge=>Ce.has(Ge.id))}return I},Tn=I=>{const W=[],Z=ds(I.adminInSessions),Ce=ds(I.stakeholderInSessions);if(I.roles.isSystemAdmin&&W.push({type:"system-admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(Mr,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),sessions:null,createdDate:I.created_at}),Z.length>0){const Ge=Pn(Z);W.push({type:"admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Cr,{className:"h-3.5 w-3.5 mr-1"}),"Product Owner (",Ge.size,")"]}),sessions:Z,createdDate:I.created_at,productCount:Ge.size})}if(Ce.length>0){const Ge=Pn(Ce);W.push({type:"stakeholder",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(nn,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",Ge.size,")"]}),sessions:Ce,createdDate:I.created_at,productCount:Ge.size})}return W.length===0&&W.push({type:"system-admin",badge:i.jsx("span",{className:"text-gray-400 text-xs",children:"No roles"}),sessions:null,createdDate:I.created_at}),W},Vr=(I,W)=>{if(!W.sessions)return{isExpanded:!1,content:i.jsx("span",{className:"text-gray-600 text-xs font-medium",children:"All sessions"})};const Z=W.sessions.length,Ce=Z>1,Ge=$.has(`${I.id}-${W.type}`),Se=Pn(W.sessions),Ze=new Set(Array.from(Se.values()).map(Nr=>{var Ve;return(Ve=Nr[0])==null?void 0:Ve.id}).filter(Boolean)),Vt=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:W.type==="admin"?"#576C71":"#8B5A4A",color:W.type==="admin"?"#576C71":"#8B5A4A"},children:[W.type==="admin"?i.jsx(jv,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}):i.jsx(nn,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[W.type==="admin"?"Product Owner":"Stakeholder"," in ",Z," session",Z!==1?"s":""]}),Ce&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",children:[Ge?i.jsx(Ll,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}):i.jsx(pn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ge?"Hide":"Show"})]})]});return{isExpanded:Ge,content:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:Ce?i.jsx("button",{onClick:Nr=>{Nr.stopPropagation();const Ve=`${I.id}-${W.type}`;G(kt=>{const yt=new Set(kt);return yt.has(Ve)?yt.delete(Ve):yt.add(Ve),yt})},className:"text-left",children:i.jsx(Vt,{})}):i.jsx(Vt,{})}),Ge&&i.jsx("div",{children:Array.from(Se.entries()).flatMap(([Nr,Ve],kt)=>{const yt=[];return kt>0&&yt.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px"}},`divider-${Nr}`)),Ve.forEach((Sr,ht)=>{yt.push(i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:ht===0&&kt===0?"8px":ht===0?"0":"12px",marginLeft:"1.25rem",marginBottom:"18px"},onMouseEnter:()=>ee(`${I.id}-${W.type}-${Sr.id}`),onMouseLeave:()=>ee(null),onClick:async mr=>{mr.stopPropagation(),await r(Sr),e("/admin")},children:[U===`${I.id}-${W.type}-${Sr.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none rounded",style:{left:Ze.has(Sr.id)?"calc(-240px - 2rem - 1rem)":"-1.25rem",right:"-9rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none",zIndex:1}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",style:{height:"20px",lineHeight:"20px"},children:[Oe.has(`${I.id}-${Sr.id}`)?i.jsxs("div",{className:"relative group",children:[i.jsx(un,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"Voted!"})]}):i.jsxs("div",{className:"relative group",children:[i.jsx(un,{className:"h-5 w-5 text-gray-300 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"No Votes"})]}),i.jsx("span",{children:Sr.title||"Unnamed Session"})]}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"28px"},children:JZ(Sr)})]})]},Sr.id))}),yt})})]})}},J=u.filter(I=>{var Se,Ze,Vt,Nr;const W=_===""||I.name.toLowerCase().includes(_.toLowerCase())||I.email.toLowerCase().includes(_.toLowerCase()),Z=N==="all"||N==="system-admin"&&I.roles.isSystemAdmin||N==="session-admin"&&I.roles.sessionAdminCount>0||N==="stakeholder"&&I.roles.stakeholderSessionCount>0,Ce=!A||((Se=I.adminInSessions)==null?void 0:Se.some(Ve=>Ve.product_id===A))||((Ze=I.stakeholderInSessions)==null?void 0:Ze.some(Ve=>Ve.product_id===A));if(M==="session-admin"||!ae&&oe){const Ve=On(),kt=new Set(Ve.map(Sr=>Sr.id));if(I.roles.isSystemAdmin)return!1;const yt=((Vt=I.adminInSessions)==null?void 0:Vt.some(Sr=>kt.has(Sr.product_id)))||((Nr=I.stakeholderInSessions)==null?void 0:Nr.some(Sr=>kt.has(Sr.product_id)));return W&&Z&&Ce&&yt}return W&&Z&&Ce}).sort((I,W)=>{const Z=Se=>{const Ze=Se.trim().split(" ");return Ze[Ze.length-1].toLowerCase()},Ce=Z(I.name),Ge=Z(W.name);return Ce.localeCompare(Ge)});return x?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"text-gray-600",children:"Loading users..."})}):j?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-red-600",children:[i.jsx("p",{className:"font-bold",children:"Error:"}),i.jsx("p",{children:j}),i.jsx("button",{onClick:()=>kr(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>e("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>e("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:"User Management"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",(n==null?void 0:n.name)||"Guest",n&&(()=>{var Z;const I=M==="system-admin"?"system-admin":"session-admin",W=(((Z=Q==null?void 0:Q.roles)==null?void 0:Z.stakeholderSessionCount)||0)>0;return eee(ae,oe,W,I)})()]})]})]}),i.jsx("div",{className:"relative z-40 flex-shrink-0 ml-2",children:i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>Te(!0),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"Add User"]}),i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>e("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsx("button",{onClick:()=>e("/login"),className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-visible",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"relative",children:[i.jsx(bv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:_,onChange:I=>C(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),i.jsxs("div",{className:"relative",ref:vr,children:[i.jsx("button",{type:"button",onClick:()=>Ht(!Xt),className:"px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-left min-w-[200px]",children:N==="system-admin"?"System Admin":N==="session-admin"?"Product Owner":N==="stakeholder"?"Stakeholder":"All Roles"}),i.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:[N==="system-admin"&&i.jsx(Mr,{className:"h-5 w-5 text-[#C89212]"}),N==="session-admin"&&i.jsx(Cr,{className:"h-5 w-5 text-[#576C71]"}),N==="stakeholder"&&i.jsx(nn,{className:"h-5 w-5 text-[#8B5A4A]"}),N==="all"&&i.jsx(kn,{className:"h-5 w-5 text-gray-400"})]}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Xt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:[i.jsxs("button",{type:"button",onClick:()=>{T("all"),Ht(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(kn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),"All Roles"]}),M==="system-admin"&&i.jsxs("button",{type:"button",onClick:()=>{T("system-admin"),Ht(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(Mr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#C89212]"}),"System Admin"]}),i.jsxs("button",{type:"button",onClick:()=>{T("session-admin"),Ht(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(Cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#576C71]"}),"Product Owner"]}),i.jsxs("button",{type:"button",onClick:()=>{T("stakeholder"),Ht(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 last:border-b-0 relative whitespace-nowrap",children:[i.jsx(nn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#8B5A4A]"}),"Stakeholder"]})]})]}),i.jsxs("div",{className:"relative",ref:gt,children:[i.jsx("button",{type:"button",onClick:()=>jt(!at),className:"px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-left min-w-[200px]",children:A&&((ye=On().find(I=>I.id===A))==null?void 0:ye.name)||"All Products"}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const I=On().find(W=>W.id===A);return I?gr(I.name,I.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),at&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto overflow-x-hidden",children:[i.jsx("button",{type:"button",onClick:()=>{P(""),jt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"All Products"}),On().map(I=>{const W=gr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{P(I.id),jt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative whitespace-nowrap",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:W.background}}),I.name]},I.id)})]})]}),i.jsx("button",{onClick:()=>{C(""),T("all"),P("")},className:"p-2 rounded-md border border-gray-300 hover:bg-gray-50 transition-colors",title:"Clear all filters",children:i.jsx(rF,{className:"h-5 w-5 text-gray-600"})})]})}),i.jsx("div",{children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"Role"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"35%"},children:"Sessions"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"15%"},children:"Created"}),i.jsx("th",{className:"px-2 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"10%"},children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:_||N!=="all"||A?"No users found matching your filters.":"No users found."})}):J.flatMap(I=>{const W=Tn(I);return W.map((Z,Ce)=>{const Ge=Vr(I,Z),{isExpanded:Se,content:Ze}=Ge,Vt=Z.sessions||[],Nr=Pn(Vt),Ve=Se?Array.from(Nr.values()).flatMap(kt=>kt):[];return i.jsxs("tr",{className:`${ce===I.id&&!ue?"bg-gray-50":""} cursor-pointer`,onMouseEnter:()=>{ue||le(I.id)},onMouseLeave:()=>le(null),onClick:kt=>{if(kt.target.closest(".actions-dropdown-container"))return;const yt=`${I.id}-${Z.type}`;G(Sr=>{const ht=new Set(Sr);return ht.has(yt)?ht.delete(yt):ht.add(yt),ht})},children:[Ce===0&&i.jsx("td",{className:"px-4 py-4 align-top",rowSpan:W.length,children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[I.name,I.email.toLowerCase()===(n==null?void 0:n.email.toLowerCase())&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"})]}),i.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:Z.type==="system-admin"?Z.badge:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:Z.badge}),Se&&Vt.length>0?i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from(Nr.entries()).flatMap(([kt,yt],Sr)=>{const ht=p.find(fn=>fn.id===kt),mr=ht?gr(ht.name,ht.color_hex??null):{background:"#666666"},pr=[];Sr>0&&pr.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${kt}`)),pr.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:"0",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:mr.background}}),i.jsx("span",{className:"text-xs font-medium text-gray-700",children:(ht==null?void 0:ht.name)||"Unknown Product"})]},kt));for(let fn=1;fn<yt.length;fn++)pr.push(i.jsx("div",{style:{height:"38px",marginTop:"12px",marginBottom:"18px"}},`spacer-${kt}-${fn}`));return pr})})]}):null]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top relative overflow-visible min-w-[240px]",children:Ze}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx(Da,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:Z.createdDate?Sn(Z.createdDate):"N/A"})]}),Se&&Ve.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from(Nr.entries()).flatMap(([kt,yt],Sr)=>{const ht=[];return Sr>0&&ht.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${kt}`)),yt.forEach((mr,pr)=>{ht.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:pr===0?"0":"12px",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx(Da,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-500",children:mr.assignedAt?Sn(mr.assignedAt):mr.created_at?Sn(mr.created_at):"N/A"})]},mr.id))}),ht})})]})]})}),Ce===0&&i.jsx("td",{className:"px-2 py-4 text-right text-sm font-medium align-top",rowSpan:W.length,style:{position:"relative",zIndex:3},children:i.jsx("div",{className:"flex items-center justify-end actions-dropdown-container",children:i.jsxs("div",{className:"relative inline-block",children:[(ce===I.id&&!ue||ue===I.id)&&i.jsx("button",{onClick:()=>$e(ue===I.id?null:I.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"Change user role",children:i.jsx(Bx,{className:"h-5 w-5 text-gray-600"})}),ue===I.id&&i.jsx("div",{className:"absolute right-0 w-64 bg-white border border-gray-200 rounded-lg shadow-lg",style:{zIndex:1e3,top:"auto",bottom:"auto",marginTop:"0.25rem",maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Manage User Roles"}),i.jsxs("button",{onClick:()=>Wn(I,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 transition-colors cursor-pointer",children:[i.jsx(pn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Add Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add Role Permissions"})]})]}),(I.roles.isSystemAdmin||I.roles.sessionAdminCount>0||I.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Wn(I,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(Ll,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove Role Permissions"})]})]}),M==="system-admin"&&i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),M==="system-admin"&&i.jsxs("button",{onClick:()=>{At(I),_r(I.name),ir(I.email),Xe(!0),$e(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(Vh,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),M==="system-admin"&&!fr.has(I.email)&&i.jsxs("button",{onClick:()=>{$e(null),xn(I.id,I.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 transition-colors ${Lt.has(I.id)?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,disabled:Lt.has(I.id),children:[i.jsx(to,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:Lt.has(I.id)?`Cannot delete protected account${Lr(I)?` (${Lr(I)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},`${I.id}-${Z.type}`)})})})]})}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:J.length})]})]}),M==="system-admin"&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mr,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:J.filter(I=>I.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Product Owners: ",i.jsx("strong",{children:J.filter(I=>I.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:J.filter(I=>I.roles.stakeholderSessionCount>0).length})]})]})]})})]}),ae&&i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>{ae&&F("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${M==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Product Owner View",children:[i.jsx(Cr,{className:"h-4 w-4 inline mr-2"}),"Product Owner"]}),i.jsxs("button",{onClick:()=>{ae&&F("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${M==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!ae,title:ae?"System Admin View":"Only available for System Admins",children:[i.jsx(Mr,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),i.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),Ie&&ie&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:()=>Ke(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:I=>I.stopPropagation(),style:{maxHeight:"calc(100vh - 4rem)"},children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:B==="session-admin"?i.jsx(Cr,{className:"h-6 w-6 text-[#576C71]"}):i.jsx(nn,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:B==="remove-stakeholder"?"Remove Role":"Add Role"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[B==="remove-stakeholder"?"Remove":"Add"," ",ie.name," (",ie.email,") ",B==="remove-stakeholder"?"from":"to"," sessions"]})]}),i.jsx("button",{onClick:()=>Ke(!1),className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[B==="remove-stakeholder"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Role to Remove ",i.jsx("span",{className:"text-red-500",children:"*"})]}),ie.roles.isSystemAdmin&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{L(R==="system-admin"?null:"system-admin")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Mr,{className:"h-4 w-4 text-[#D4AF37] transition-transform",style:{transform:R==="system-admin"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Admin"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#D4AF37",backgroundColor:R==="system-admin"?"#D4AF37":"#ffffff"},children:R==="system-admin"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),ie.roles.sessionAdminCount>0&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{L(R==="product-owner"?null:"product-owner"),ft("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Cr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:R==="product-owner"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:R==="product-owner"?"#576C71":"#ffffff"},children:R==="product-owner"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),R==="product-owner"&&(()=>{var W;const I=js();if(I.length===1){const Z=I[0],Ce=gr(Z.name,Z.color_hex??null);return Be!==Z.id&&ft(Z.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Ce.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Z.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:rr,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>rt(!De),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Be&&((W=I.find(Z=>Z.id===Be))==null?void 0:W.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Z=I.find(Ce=>Ce.id===Be);return Z?gr(Z.name,Z.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),De&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ft(""),rt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Z=>{const Ce=gr(Z.name,Z.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ft(Z.id),rt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Ce.background}}),Z.name]},Z.id)})]})]})})})()]})}),ie.roles.stakeholderSessionCount>0&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{L(R==="stakeholder"?null:"stakeholder"),ft("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(nn,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:R==="stakeholder"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:R==="stakeholder"?"#8B5A4A":"#ffffff"},children:R==="stakeholder"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),R==="stakeholder"&&(()=>{var W;const I=js();if(I.length===1){const Z=I[0],Ce=gr(Z.name,Z.color_hex??null);return Be!==Z.id&&ft(Z.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Ce.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Z.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:rr,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>rt(!De),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Be&&((W=I.find(Z=>Z.id===Be))==null?void 0:W.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Z=I.find(Ce=>Ce.id===Be);return Z?gr(Z.name,Z.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),De&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ft(""),rt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Z=>{const Ce=gr(Z.name,Z.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ft(Z.id),rt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Ce.background}}),Z.name]},Z.id)})]})]})})})()]})})]}),(B==="session-admin"||B==="stakeholder"||B==="system-admin")&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Role to Add ",i.jsx("span",{className:"text-red-500",children:"*"})]}),ae&&!(ie!=null&&ie.roles.isSystemAdmin)&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{ke(H==="system-admin"?null:"system-admin")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Mr,{className:"h-4 w-4 text-[#D4AF37] transition-transform",style:{transform:H==="system-admin"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Admin"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#D4AF37",backgroundColor:H==="system-admin"?"#D4AF37":"#ffffff"},children:H==="system-admin"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),ae&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{ke(H==="product-owner"?null:"product-owner"),ft("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Cr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:H==="product-owner"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:H==="product-owner"?"#576C71":"#ffffff"},children:H==="product-owner"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),H==="product-owner"&&(()=>{var W;const I=js();if(I.length===1){const Z=I[0],Ce=gr(Z.name,Z.color_hex??null);return Be!==Z.id&&ft(Z.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Ce.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Z.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:rr,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>rt(!De),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Be&&((W=I.find(Z=>Z.id===Be))==null?void 0:W.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Z=I.find(Ce=>Ce.id===Be);return Z?gr(Z.name,Z.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),De&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ft(""),rt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Z=>{const Ce=gr(Z.name,Z.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ft(Z.id),rt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Ce.background}}),Z.name]},Z.id)})]})]})})})()]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{ke(H==="stakeholder"?null:"stakeholder"),ft("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(nn,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:H==="stakeholder"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:H==="stakeholder"?"#8B5A4A":"#ffffff"},children:H==="stakeholder"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),H==="stakeholder"&&(()=>{var W;const I=js();if(I.length===1){const Z=I[0],Ce=gr(Z.name,Z.color_hex??null);return Be!==Z.id&&ft(Z.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Ce.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Z.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:rr,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>rt(!De),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Be&&((W=I.find(Z=>Z.id===Be))==null?void 0:W.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Z=I.find(Ce=>Ce.id===Be);return Z?gr(Z.name,Z.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),De&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ft(""),rt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Z=>{const Ce=gr(Z.name,Z.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ft(Z.id),rt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Ce.background}}),Z.name]},Z.id)})]})]})})})()]})})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>Ke(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:cs,disabled:R!=="system-admin"&&H!=="system-admin"&&!Be||B==="remove-stakeholder"&&!R||(B==="session-admin"||B==="stakeholder"||B==="system-admin")&&!H,className:`px-4 py-2 text-sm font-medium text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${B==="remove-stakeholder"?"bg-red-600 hover:bg-red-700":"bg-[#2d4660] hover:bg-[#1E5461]"}`,children:B==="remove-stakeholder"?"Remove Role":"Add Role"})]})]})})}),te&&ot&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit User"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:er,onChange:I=>_r(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:Dr,onChange:I=>ir(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[i.jsx("button",{onClick:()=>Xe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:async()=>{if(ot)try{await je.from("users").update({name:er,email:Dr}).eq("id",ot.id),Xe(!1),await kr()}catch(I){console.error("Error updating user:",I),or("Failed to Update User","An error occurred while updating the user information. Please try again.","error")}},className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461]",children:"Save"})]})]})}),Ee&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:An,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:I=>I.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#2D4660]/10 flex items-center justify-center",children:i.jsx(kn,{className:"h-6 w-6 text-[#2D4660]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Create a new user account and optionally assign roles"})]}),i.jsx("button",{onClick:An,disabled:Fe,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[Qt?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),i.jsxs("div",{className:"relative",ref:cr,children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(bv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:Zt.searchTerm,onChange:I=>{const W=I.target.value;lr(Z=>({...Z,searchTerm:W})),es(W)},onFocus:()=>{Zt.results.length>0&&lr(I=>({...I,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)...",disabled:Fe}),Zt.isSearching&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Zt.showResults&&Zt.results.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Zt.results.map(I=>i.jsxs("button",{type:"button",onClick:()=>us(I),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:I.displayName}),i.jsx("div",{className:"text-sm text-gray-500",children:I.mail||I.userPrincipalName}),I.jobTitle&&i.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:I.jobTitle})]},I.id))}),Zt.error&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[i.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),i.jsx("div",{children:Zt.error}),i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Zt.searchTerm.length>=2&&!Zt.isSearching&&Zt.results.length===0&&!Zt.error&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):i.jsx("div",{children:i.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{hr(!0),lr({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""})},disabled:Fe,children:"Search Company Users again"})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:Me.name,onChange:I=>ze({...Me,name:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Fe})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Me.email,onChange:I=>ze({...Me,email:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Fe})]})]}),M==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Mr,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Me.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{type:"checkbox",checked:Me.isSystemAdmin,onChange:I=>ze({...Me,isSystemAdmin:I.target.checked}),className:"sr-only",disabled:Fe}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Me.isSystemAdmin?"#C89212":"#ffffff"},children:Me.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),M==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Cr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:Me.isProductOwner?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("input",{type:"checkbox",checked:Me.isProductOwner,onChange:I=>ze({...Me,isProductOwner:I.target.checked,productOwnerProductId:I.target.checked?Me.productOwnerProductId:""}),className:"sr-only",disabled:Fe}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:Me.isProductOwner?"#576C71":"#ffffff"},children:Me.isProductOwner&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),Me.isProductOwner&&i.jsxs("div",{className:"flex-1 pt-0.5",ref:We,children:[i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>!Fe&&Et(!bt),disabled:Fe,className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left disabled:opacity-50 disabled:cursor-not-allowed",children:Me.productOwnerProductId&&((He=p.find(I=>I.id===Me.productOwnerProductId))==null?void 0:He.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:Me.productOwnerProductId?(()=>{const I=p.find(W=>W.id===Me.productOwnerProductId);return I?gr(I.name,I.color_hex??null).background:"transparent"})():"transparent"}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),bt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ze({...Me,productOwnerProductId:""}),Et(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),On().map(I=>{const W=gr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ze({...Me,productOwnerProductId:I.id}),Et(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:W.background}}),I.name]},I.id)})]})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(nn,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:Me.isStakeholder?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("input",{type:"checkbox",checked:Me.isStakeholder,onChange:I=>ze({...Me,isStakeholder:I.target.checked,stakeholderProductId:I.target.checked?Me.stakeholderProductId:""}),className:"sr-only",disabled:Fe}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:Me.isStakeholder?"#8B5A4A":"#ffffff"},children:Me.isStakeholder&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),Me.isStakeholder&&i.jsxs("div",{className:"flex-1 pt-0.5",ref:Ye,children:[i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>!Fe&&$t(!ar),disabled:Fe,className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left disabled:opacity-50 disabled:cursor-not-allowed",children:Me.stakeholderProductId&&((Pe=p.find(I=>I.id===Me.stakeholderProductId))==null?void 0:Pe.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:Me.stakeholderProductId?(()=>{const I=p.find(W=>W.id===Me.stakeholderProductId);return I?gr(I.name,I.color_hex??null).background:"transparent"})():"transparent"}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),ar&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{ze({...Me,stakeholderProductId:""}),$t(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),On().map(I=>{const W=gr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{ze({...Me,stakeholderProductId:I.id}),$t(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:W.background}}),I.name]},I.id)})]})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})})]}),i.jsx("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-gray-200",children:i.jsx("button",{onClick:nr,disabled:Fe||!Me.name.trim()||!Me.email.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(()=>{const I=[];if(Me.isSystemAdmin&&I.push("System Admin"),Me.isProductOwner&&Me.productOwnerProductId&&I.push("Product Owner"),Me.isStakeholder&&Me.stakeholderProductId&&I.push("Stakeholder"),I.length===0)return Fe?"Creating User...":"Create User";const W=I.join(" & ");return Fe?`Adding ${W}...`:`Add ${W}`})()})})]})})}),Kt&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsxs("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${xr.type==="success"?"bg-green-100":xr.type==="error"?"bg-red-100":"bg-blue-100"}`,children:[xr.type==="success"&&i.jsx(jv,{className:"h-6 w-6 text-green-600"}),xr.type==="error"&&i.jsx(_n,{className:"h-6 w-6 text-red-600"}),xr.type==="info"&&i.jsx(Cr,{className:"h-6 w-6 text-blue-600"})]}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:xr.title}),i.jsx("p",{className:"text-sm text-gray-600",children:xr.message})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>ur(!1),className:`px-4 py-2 text-sm font-medium text-white rounded-md transition-colors ${xr.type==="success"?"bg-green-600 hover:bg-green-700":xr.type==="error"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:"OK"})})]})})})]})}const ree=e=>{if(!e.start_date||!e.end_date)return"No dates set";const t=Sn(e.start_date),r=Sn(e.end_date);return`${t} - ${r}`},nee=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})}:t?{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})}:null,see=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(Mr,{className:"h-3.5 w-3.5"})};case"session-admin":return{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Cr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(nn,{className:"h-3.5 w-3.5"})};default:return null}},aee=(e,t,r)=>e?"system-admin":t?"session-admin":"stakeholder",iee=(e,t,r,n)=>{const s=aee(e,t),a=nee(e,t,r);if(!a)return null;if(n===s)return i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]})]});const l=see(n);return l?i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]}),i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",i.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:l.icon}),i.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null};function oee(){var Qt,hr,cr;const e=za(),{setCurrentSession:t,currentUser:r}=tl(),[n,s]=y.useState([]),[a,l]=y.useState([]),[u,d]=y.useState([]),[m,f]=y.useState(!0),[p,v]=y.useState(null),[x,w]=y.useState(""),[j,b]=y.useState("all"),[_,C]=y.useState(""),[N,T]=y.useState("system-admin"),[A,P]=y.useState(null),[M,F]=y.useState(!1),[Q,q]=y.useState(!1),[ae,Y]=y.useState([]),[oe,V]=y.useState(new Set),[K,ge]=y.useState(null),[$,G]=y.useState(null),[ce,le]=y.useState(null),[U,ee]=y.useState(new Set),[ue,$e]=y.useState(!1),[Oe,_e]=y.useState(null),[Ie,Ke]=y.useState(null),[B,ve]=y.useState({adminSessions:[],stakeholderSessions:[]}),[ie,ne]=y.useState(""),[pt,et]=y.useState(!1),[Be,ft]=y.useState(!1),[De,rt]=y.useState({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""}),[rr,R]=y.useState(!1),[L,H]=y.useState(null),[ke,Ee]=y.useState(""),[Te,Fe]=y.useState(""),wt=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),[Me,ze]=y.useState(null),[bt,Et]=y.useState(new Set);y.useRef({}),y.useEffect(()=>{gt()},[]),y.useEffect(()=>{const te=Xe=>{ce&&!Xe.target.closest(".actions-dropdown-container")&&le(null)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[ce]);const ar=te=>{if(te.id===Me)return"Original Admin";const Xe=te.email.toLowerCase();return Xe==="chris.rodes@newmill.com"?"Manager":Xe==="spencer.faull@newmill.com"?"Portfolio Owner":null},$t=async(te,Xe)=>{Ke(te),_e(Xe),ne(""),$e(!0),le(null)},We=async()=>{if(!Ie||!Oe||!ie){alert("Missing required information");return}try{const te=a.filter(Xe=>Xe.product_id===ie).map(Xe=>Xe.id);if(te.length===0){alert("No sessions found for this product");return}for(const Xe of te)Oe==="session-admin"?await je.from("product_product_owners").insert({session_id:Xe,user_id:Ie.id}):Oe==="stakeholder"&&await je.from("product_stakeholders").insert({session_id:Xe,user_id:Ie.id,user_email:Ie.email,user_name:Ie.name});$e(!1),await gt(),alert(`Successfully added ${Ie.name} as ${Oe==="session-admin"?"Product Owner":"Stakeholder"} to ${te.length} session(s)`)}catch(te){console.error("Error adding role:",te),alert(`Failed to add role: ${te.message||"Unknown error"}`)}},Ye=()=>{et(!1),rt({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""})},at=async()=>{if(!De.name.trim()||!De.email.trim()){alert("Please fill in all required fields (Name, Email)");return}ft(!0);try{const{data:te,error:Xe}=await je.from("users").insert({name:De.name.trim(),email:De.email.trim().toLowerCase(),created_by:r==null?void 0:r.id,created_by_name:r==null?void 0:r.name}).select().single();if(Xe)throw Xe;if(!te)throw new Error("User creation failed");const ot=te.id;if(De.isSystemAdmin&&await je.from("system_admins").insert({user_id:ot}),De.isProductOwner&&De.productOwnerProductId){const At=a.filter(er=>er.product_id===De.productOwnerProductId);for(const er of At)await je.from("product_product_owners").insert({session_id:er.id,user_id:ot})}if(De.isStakeholder&&De.stakeholderProductId){const At=a.filter(er=>er.product_id===De.stakeholderProductId);for(const er of At)await je.from("product_stakeholders").insert({session_id:er.id,user_id:ot,user_email:De.email.trim().toLowerCase(),user_name:De.name.trim()})}Ye(),await gt(),alert(`Successfully created user: ${De.name}`)}catch(te){console.error("Error creating user:",te),alert(`Failed to create user: ${te.message||"Unknown error"}`)}finally{ft(!1)}},jt=async(te,Xe)=>{const ot=n.find(At=>At.id===te);if(ot&&confirm(`Are you sure you want to delete ${Xe}? This cannot be undone.`))try{await je.from("system_admins").delete().eq("user_id",te),await je.from("product_product_owners").delete().eq("user_id",te),await je.from("product_stakeholders").delete().eq("user_email",ot.email),await je.from("users").delete().eq("id",te),le(null),await gt()}catch(At){console.error("Error deleting user:",At),alert("Failed to delete user. Please try again.")}},gt=async()=>{var te,Xe,ot;try{f(!0),v(null);const{data:{user:At}}=await je.auth.getUser();if(!At){e("/login");return}const[er,_r,Dr,ir,Kt,ur]=await Promise.all([Tx(),je.from("voting_sessions").select("*").order("created_at",{ascending:!1}),je.from("products").select("*").order("name"),je.from("votes").select("user_id, session_id"),je.from("product_product_owners").select("user_id, product_id, created_at"),je.from("product_stakeholders").select("user_email, product_id, created_at")]),xr=new Map;(Kt.data||[]).forEach(Gt=>{xr.has(Gt.user_id)||xr.set(Gt.user_id,[]),xr.get(Gt.user_id).push({product_id:Gt.product_id,created_at:Gt.created_at})});const Er=new Map;(ur.data||[]).forEach(Gt=>{var $r;const Lt=(($r=Gt.user_email)==null?void 0:$r.toLowerCase())||"";Lt&&(Er.has(Lt)||Er.set(Lt,[]),Er.get(Lt).push({product_id:Gt.product_id,created_at:Gt.created_at}))});const fr=new Map((_r.data||[]).map(Gt=>[Gt.id,Gt])),br=new Map;if((_r.data||[]).forEach(Gt=>{const Lt=Gt.product_id||"unknown";br.has(Lt)||br.set(Lt,[]),br.get(Lt).push(Gt)}),er){const Gt=await Promise.all(er.map(async or=>{const Lr=await vE(or.id),Wn=[],cs=[];(xr.get(or.id)||[]).forEach(nr=>{(br.get(nr.product_id)||[]).forEach(kr=>{Wn.push({...kr,assignedAt:nr.created_at,assignedBy:"System",assignedByName:"System"})})});const es=or.email.toLowerCase();return(Er.get(es)||[]).forEach(nr=>{(br.get(nr.product_id)||[]).forEach(kr=>{cs.push({...kr,assignedAt:nr.created_at,assignedBy:"System",assignedByName:"System"})})}),{...or,roles:Lr,adminInSessions:Wn,stakeholderInSessions:cs}}));s(Gt);const Lt=r?Gt.find(or=>or.email.toLowerCase()===r.email.toLowerCase()):null;P(Lt||null),Lt&&(F(((te=Lt.roles)==null?void 0:te.isSystemAdmin)||!1),q((((Xe=Lt.roles)==null?void 0:Xe.sessionAdminCount)||0)>0));const $r=((ot=Lt==null?void 0:Lt.adminInSessions)==null?void 0:ot.map(or=>or.id))||[];Y($r)}if(_r.data&&l(_r.data),Dr.data&&d(Dr.data),ir.data){const Gt=new Set(ir.data.map(Lt=>`${Lt.user_id}-${Lt.session_id}`));ee(Gt)}}catch(At){console.error("UsersManagementScreenMultiRow: Error loading data:",At),v(At instanceof Error?At.message:"An error occurred loading data")}finally{f(!1)}},Xt=te=>{const Xe=new Map;return te.forEach(ot=>{const At=ot.product_id||"unknown";Xe.has(At)||Xe.set(At,[]),Xe.get(At).push(ot)}),Xe},Ht=te=>{if(!te)return[];let Xe=te;return _&&(Xe=Xe.filter(ot=>ot.product_id===_)),N==="session-admin"&&!M&&ae.length>0&&(Xe=Xe.filter(ot=>ae.includes(ot.id))),Xe},vr=te=>{const Xe=[],ot=Ht(te.adminInSessions),At=Ht(te.stakeholderInSessions);if(te.roles.isSystemAdmin&&Xe.push({type:"system-admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(Mr,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),sessions:null,createdDate:te.created_at}),ot.length>0){const er=Xt(ot);Xe.push({type:"admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Cr,{className:"h-3.5 w-3.5 mr-1"}),"Product Owner (",er.size,")"]}),sessions:ot,createdDate:te.created_at,productCount:er.size})}if(At.length>0){const er=Xt(At);Xe.push({type:"stakeholder",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(nn,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",er.size,")"]}),sessions:At,createdDate:te.created_at,productCount:er.size})}return Xe.length===0&&Xe.push({type:"system-admin",badge:i.jsx("span",{className:"text-gray-400 text-xs",children:"No roles"}),sessions:null,createdDate:te.created_at}),Xe},Zt=(te,Xe)=>{if(!Xe.sessions)return{isExpanded:!1,content:i.jsx("span",{className:"text-gray-600 text-xs font-medium",children:"All sessions"})};const ot=Xe.sessions.length,At=ot>1,er=oe.has(`${te.id}-${Xe.type}`),_r=Xt(Xe.sessions),Dr=new Set(Array.from(_r.values()).map(Kt=>{var ur;return(ur=Kt[0])==null?void 0:ur.id}).filter(Boolean)),ir=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:Xe.type==="admin"?"#576C71":"#8B5A4A",color:Xe.type==="admin"?"#576C71":"#8B5A4A"},children:[Xe.type==="admin"?i.jsx(jv,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}):i.jsx(nn,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[Xe.type==="admin"?"Product Owner":"Stakeholder"," in ",ot," session",ot!==1?"s":""]}),At&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",children:[er?i.jsx(Ll,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}):i.jsx(pn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:er?"Hide":"Show"})]})]});return{isExpanded:er,content:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:At?i.jsx("button",{onClick:Kt=>{Kt.stopPropagation();const ur=`${te.id}-${Xe.type}`;V(xr=>{const Er=new Set(xr);return Er.has(ur)?Er.delete(ur):Er.add(ur),Er})},className:"text-left",children:i.jsx(ir,{})}):i.jsx(ir,{})}),er&&i.jsx("div",{children:Array.from(_r.entries()).flatMap(([Kt,ur],xr)=>{const Er=[];return xr>0&&Er.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px"}},`divider-${Kt}`)),ur.forEach((fr,br)=>{Er.push(i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:br===0&&xr===0?"8px":br===0?"0":"12px",marginLeft:"1.25rem",marginBottom:"18px"},onMouseEnter:()=>G(`${te.id}-${Xe.type}-${fr.id}`),onMouseLeave:()=>G(null),onClick:async Gt=>{Gt.stopPropagation(),await t(fr),e("/admin")},children:[$===`${te.id}-${Xe.type}-${fr.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none rounded",style:{left:Dr.has(fr.id)?"calc(-240px - 2rem - 1rem)":"-1.25rem",right:"-9rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none",zIndex:1}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",style:{height:"20px",lineHeight:"20px"},children:[U.has(`${te.id}-${fr.id}`)?i.jsxs("div",{className:"relative group",children:[i.jsx(un,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"Voted!"})]}):i.jsxs("div",{className:"relative group",children:[i.jsx(un,{className:"h-5 w-5 text-gray-300 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"No Votes"})]}),i.jsx("span",{children:fr.title||"Unnamed Session"})]}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"28px"},children:ree(fr)})]})]},fr.id))}),Er})})]})}},lr=n.filter(te=>{var er,_r,Dr,ir;const Xe=x===""||te.name.toLowerCase().includes(x.toLowerCase())||te.email.toLowerCase().includes(x.toLowerCase()),ot=j==="all"||j==="system-admin"&&te.roles.isSystemAdmin||j==="session-admin"&&te.roles.sessionAdminCount>0||j==="stakeholder"&&te.roles.stakeholderSessionCount>0,At=!_||((er=te.adminInSessions)==null?void 0:er.some(Kt=>Kt.product_id===_))||((_r=te.stakeholderInSessions)==null?void 0:_r.some(Kt=>Kt.product_id===_));if(N==="session-admin"){if(M)return Xe&&ot&&At;const Kt=((Dr=te.adminInSessions)==null?void 0:Dr.some(ur=>ae.includes(ur.id)))||((ir=te.stakeholderInSessions)==null?void 0:ir.some(ur=>ae.includes(ur.id)));return Xe&&ot&&At&&Kt}return Xe&&ot&&At});return m?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"text-gray-600",children:"Loading users..."})}):p?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-red-600",children:[i.jsx("p",{className:"font-bold",children:"Error:"}),i.jsx("p",{children:p}),i.jsx("button",{onClick:()=>gt(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>e("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:ol,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>e("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:"User Management"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",(r==null?void 0:r.name)||"Guest",r&&(()=>{var ot;const te=N==="system-admin"?"system-admin":"session-admin",Xe=(((ot=A==null?void 0:A.roles)==null?void 0:ot.stakeholderSessionCount)||0)>0;return iee(M,Q,Xe,te)})()]})]})]}),i.jsx("div",{className:"relative z-40 flex-shrink-0 ml-2",children:i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>et(!0),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"Add User"]}),i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>e("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Xs,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsx("button",{onClick:()=>e("/login"),className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx(pa,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})}),i.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"relative",children:[i.jsx(bv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:x,onChange:te=>w(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),i.jsxs("select",{value:j,onChange:te=>b(te.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"system-admin",children:"System Admin"}),i.jsx("option",{value:"session-admin",children:"Product Owner"}),i.jsx("option",{value:"stakeholder",children:"Stakeholder"})]}),i.jsxs("select",{value:_,onChange:te=>C(te.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"All Products"}),u.map(te=>i.jsx("option",{value:te.id,children:te.name},te.id))]}),(x||j!=="all"||_)&&i.jsxs("button",{onClick:()=>{w(""),b("all"),C("")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[i.jsx(_n,{className:"h-4 w-4"}),"Clear"]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"Role"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"35%"},children:"Sessions"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"15%"},children:"Created"}),i.jsx("th",{className:"px-2 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"10%"},children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:lr.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:x||j!=="all"||_?"No users found matching your filters.":"No users found."})}):lr.flatMap(te=>{const Xe=vr(te);return Xe.map((ot,At)=>{var xr,Er;const er=Zt(te,ot),{isExpanded:_r,content:Dr}=er,ir=ot.sessions||[],Kt=Xt(ir),ur=_r?Array.from(Kt.values()).flatMap(fr=>fr):[];return i.jsxs("tr",{className:`${K===te.id?"bg-gray-50":""} cursor-pointer`,onMouseEnter:()=>ge(te.id),onMouseLeave:()=>ge(null),onClick:fr=>{if(fr.target.closest(".actions-dropdown-container"))return;const br=`${te.id}-${ot.type}`;V(Gt=>{const Lt=new Set(Gt);return Lt.has(br)?Lt.delete(br):Lt.add(br),Lt})},children:[At===0&&i.jsx("td",{className:"px-4 py-4 align-top",rowSpan:Xe.length,children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[te.name,te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase())&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"})]}),i.jsx("div",{className:"text-sm text-gray-500",children:te.email})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:ot.type==="system-admin"?ot.badge:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:ot.badge}),_r&&ir.length>0?i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from(Kt.entries()).flatMap(([fr,br],Gt)=>{const Lt=u.find(Lr=>Lr.id===fr),$r=Lt?gr(Lt.name,Lt.color_hex??null):{background:"#666666"},or=[];Gt>0&&or.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${fr}`)),or.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:"0",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:$r.background}}),i.jsx("span",{className:"text-xs font-medium text-gray-700",children:(Lt==null?void 0:Lt.name)||"Unknown Product"})]},fr));for(let Lr=1;Lr<br.length;Lr++)or.push(i.jsx("div",{style:{height:"38px",marginTop:"12px",marginBottom:"18px"}},`spacer-${fr}-${Lr}`));return or})})]}):null]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top relative overflow-visible min-w-[240px]",children:Dr}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx(Da,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:ot.createdDate?Sn(ot.createdDate):"N/A"})]}),_r&&ur.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from(Kt.entries()).flatMap(([fr,br],Gt)=>{const Lt=[];return Gt>0&&Lt.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${fr}`)),br.forEach(($r,or)=>{Lt.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:or===0?"0":"12px",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx(Da,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-500",children:$r.assignedAt?Sn($r.assignedAt):$r.created_at?Sn($r.created_at):"N/A"})]},$r.id))}),Lt})})]})]})}),At===0&&i.jsx("td",{className:"px-2 py-4 text-right text-sm font-medium align-top",rowSpan:Xe.length,style:{position:"relative",zIndex:3},children:i.jsx("div",{className:"flex items-center justify-end actions-dropdown-container",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsx("button",{onClick:()=>le(ce===te.id?null:te.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase()),title:te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase())?"Cannot modify your own permissions":"Change user role",children:i.jsx(Bx,{className:"h-5 w-5 text-gray-600"})}),ce===te.id&&te.email.toLowerCase()!==(r==null?void 0:r.email.toLowerCase())&&i.jsx("div",{className:"absolute right-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Manage User Roles"}),i.jsxs("button",{onClick:()=>$t(te,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700",children:[i.jsx(pn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Add Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add Role Permissions"})]})]}),(te.roles.isSystemAdmin||te.roles.sessionAdminCount>0||te.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>$t(te,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Ll,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove Role Permissions"})]})]}),(N==="system-admin"||N==="session-admin"&&te.roles.stakeholderSessionCount>0&&((xr=te.stakeholderInSessions)==null?void 0:xr.some(fr=>a.some(br=>br.id===fr.id)))&&!wt.has(te.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),N==="system-admin"&&i.jsxs("button",{onClick:()=>{H(te),Ee(te.name),Fe(te.email),R(!0),le(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(Vh,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(N==="system-admin"||N==="session-admin"&&te.roles.stakeholderSessionCount>0&&((Er=te.stakeholderInSessions)==null?void 0:Er.some(fr=>a.some(br=>br.id===fr.id))))&&!wt.has(te.email)&&i.jsxs("button",{onClick:()=>{le(null),jt(te.id,te.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase())||N==="system-admin"&&bt.has(te.id)?"opacity-50 cursor-not-allowed":""}`,disabled:te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase())||N==="system-admin"&&bt.has(te.id),children:[i.jsx(to,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:N==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:N==="session-admin"?"Remove from all your sessions":te.email.toLowerCase()===(r==null?void 0:r.email.toLowerCase())?"Cannot delete your own account":bt.has(te.id)?`Cannot delete protected account${ar(te)?` (${ar(te)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},`${te.id}-${ot.type}`)})})})]})}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:n.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mr,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:n.filter(te=>te.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Product Owners: ",i.jsx("strong",{children:n.filter(te=>te.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:n.filter(te=>te.roles.stakeholderSessionCount>0).length})]})]})]})})]}),M&&i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>{M&&T("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${N==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Product Owner View",children:[i.jsx(Cr,{className:"h-4 w-4 inline mr-2"}),"Product Owner"]}),i.jsxs("button",{onClick:()=>{M&&T("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${N==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!M,title:M?"System Admin View":"Only available for System Admins",children:[i.jsx(Mr,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),i.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),ue&&Ie&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:()=>$e(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:te=>te.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:Oe==="session-admin"?i.jsx(Cr,{className:"h-6 w-6 text-[#576C71]"}):i.jsx(nn,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:Oe==="session-admin"?"Add Product Owner Role":"Add Stakeholder Role"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Add ",Ie.name," (",Ie.email,") to sessions"]})]}),i.jsx("button",{onClick:()=>$e(!1),className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Product ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:ie,onChange:te=>{ne(te.target.value)},className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent appearance-none bg-white",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[i.jsx("option",{value:"",children:"Select a product..."}),u.map(te=>(gr(te.name),i.jsx("option",{value:te.id,children:te.name},te.id)))]}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 rounded-sm pointer-events-none",style:{backgroundColor:ie?gr(((Qt=u.find(te=>te.id===ie))==null?void 0:Qt.name)||"").background:"transparent"}})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]})}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:We,disabled:!ie,className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Role"})]})]})})}),rr&&L&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit User"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:ke,onChange:te=>Ee(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:Te,onChange:te=>Fe(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[i.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:async()=>{if(L)try{await je.from("users").update({name:ke,email:Te}).eq("id",L.id),R(!1),await gt()}catch(te){console.error("Error updating user:",te),alert("Failed to update user. Please try again.")}},className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461]",children:"Save"})]})]})}),pt&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Ye,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:te=>te.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#2D4660]/10 flex items-center justify-center",children:i.jsx(kn,{className:"h-6 w-6 text-[#2D4660]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Create a new user account and optionally assign roles"})]}),i.jsx("button",{onClick:Ye,disabled:Be,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(_n,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:De.name,onChange:te=>rt({...De,name:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Be})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:De.email,onChange:te=>rt({...De,email:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Be})]})]}),N==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Mr,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:De.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{type:"checkbox",checked:De.isSystemAdmin,onChange:te=>rt({...De,isSystemAdmin:te.target.checked}),className:"sr-only",disabled:Be}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:De.isSystemAdmin?"#C89212":"#ffffff"},children:De.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),N==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Cr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:De.isProductOwner?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("input",{type:"checkbox",checked:De.isProductOwner,onChange:te=>rt({...De,isProductOwner:te.target.checked,productOwnerProductId:te.target.checked?De.productOwnerProductId:""}),className:"sr-only",disabled:Be}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:De.isProductOwner?"#576C71":"#ffffff"},children:De.isProductOwner&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),De.isProductOwner&&i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:De.productOwnerProductId,onChange:te=>rt({...De,productOwnerProductId:te.target.value}),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent appearance-none bg-white",disabled:Be,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[i.jsx("option",{value:"",children:"Select a product..."}),u.map(te=>i.jsx("option",{value:te.id,children:te.name},te.id))]}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 rounded-sm pointer-events-none",style:{backgroundColor:De.productOwnerProductId?gr(((hr=u.find(te=>te.id===De.productOwnerProductId))==null?void 0:hr.name)||"").background:"transparent"}})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(nn,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:De.isStakeholder?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("input",{type:"checkbox",checked:De.isStakeholder,onChange:te=>rt({...De,isStakeholder:te.target.checked,stakeholderProductId:te.target.checked?De.stakeholderProductId:""}),className:"sr-only",disabled:Be}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:De.isStakeholder?"#8B5A4A":"#ffffff"},children:De.isStakeholder&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),De.isStakeholder&&i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:De.stakeholderProductId,onChange:te=>rt({...De,stakeholderProductId:te.target.value}),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent appearance-none bg-white",disabled:Be,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[i.jsx("option",{value:"",children:"Select a product..."}),u.map(te=>i.jsx("option",{value:te.id,children:te.name},te.id))]}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 rounded-sm pointer-events-none",style:{backgroundColor:De.stakeholderProductId?gr(((cr=u.find(te=>te.id===De.stakeholderProductId))==null?void 0:cr.name)||"").background:"transparent"}})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:Ye,disabled:Be,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{onClick:at,disabled:Be||!De.name.trim()||!De.email.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Be?"Creating User...":"Create User"})]})]})})})]})}const lee="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",cee=()=>i.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:i.jsx("img",{src:lee,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function uee(){return i.jsx(NM,{children:i.jsxs(O$,{children:[i.jsx(cee,{}),i.jsx(C3,{basename:"/feature-voting-app",children:i.jsxs(n3,{children:[i.jsx(Ya,{path:"/",element:i.jsx(t3,{to:"/login",replace:!0})}),i.jsx(Ya,{path:"/login",element:i.jsx(VZ,{})}),i.jsx(Ya,{path:"/sessions",element:i.jsx(HZ,{})}),i.jsx(Ya,{path:"/vote",element:i.jsx(Z0,{adminMode:!1})}),i.jsx(Ya,{path:"/admin",element:i.jsx(Z0,{adminMode:!0})}),i.jsx(Ya,{path:"/results",element:i.jsx(Z0,{resultsMode:!0})}),i.jsx(Ya,{path:"/unauthorized",element:i.jsx(KZ,{})}),i.jsx(Ya,{path:"/system-admins",element:i.jsx(GZ,{})}),i.jsx(Ya,{path:"/users",element:i.jsx(tee,{})}),i.jsx(Ya,{path:"/users-multirow",element:i.jsx(oee,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}fD.createRoot(document.getElementById("root")).render(i.jsx(uee,{}));
