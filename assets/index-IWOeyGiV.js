var eD=Object.defineProperty;var tD=(e,t,r)=>t in e?eD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pg=(e,t,r)=>tD(e,typeof t!="symbol"?t+"":t,r);function rD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Bi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Og={exports:{}},ju={},Tg={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lj;function sD(){if(lj)return Ut;lj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(I,H,Fe){this.props=I,this.context=H,this.refs=j,this.updater=Fe||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function _(){}_.prototype=S.prototype;function E(I,H,Fe){this.props=I,this.context=H,this.refs=j,this.updater=Fe||x}var C=E.prototype=new _;C.constructor=E,b(C,S.prototype),C.isPureReactComponent=!0;var O=Array.isArray,T=Object.prototype.hasOwnProperty,P={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function G(I,H,Fe){var ie,me={},q=null,Z=null;if(H!=null)for(ie in H.ref!==void 0&&(Z=H.ref),H.key!==void 0&&(q=""+H.key),H)T.call(H,ie)&&!$.hasOwnProperty(ie)&&(me[ie]=H[ie]);var je=arguments.length-2;if(je===1)me.children=Fe;else if(1<je){for(var F=Array(je),be=0;be<je;be++)F[be]=arguments[be+2];me.children=F}if(I&&I.defaultProps)for(ie in je=I.defaultProps,je)me[ie]===void 0&&(me[ie]=je[ie]);return{$$typeof:e,type:I,key:q,ref:Z,props:me,_owner:P.current}}function M(I,H){return{$$typeof:e,type:I.type,key:H,ref:I.ref,props:I.props,_owner:I._owner}}function V(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function L(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Fe){return H[Fe]})}var U=/\/+/g;function le(I,H){return typeof I=="object"&&I!==null&&I.key!=null?L(""+I.key):H.toString(36)}function ee(I,H,Fe,ie,me){var q=typeof I;(q==="undefined"||q==="boolean")&&(I=null);var Z=!1;if(I===null)Z=!0;else switch(q){case"string":case"number":Z=!0;break;case"object":switch(I.$$typeof){case e:case t:Z=!0}}if(Z)return Z=I,me=me(Z),I=ie===""?"."+le(Z,0):ie,O(me)?(Fe="",I!=null&&(Fe=I.replace(U,"$&/")+"/"),ee(me,H,Fe,"",function(be){return be})):me!=null&&(V(me)&&(me=M(me,Fe+(!me.key||Z&&Z.key===me.key?"":(""+me.key).replace(U,"$&/")+"/")+I)),H.push(me)),1;if(Z=0,ie=ie===""?".":ie+":",O(I))for(var je=0;je<I.length;je++){q=I[je];var F=ie+le(q,je);Z+=ee(q,H,Fe,F,me)}else if(F=y(I),typeof F=="function")for(I=F.call(I),je=0;!(q=I.next()).done;)q=q.value,F=ie+le(q,je++),Z+=ee(q,H,Fe,F,me);else if(q==="object")throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Z}function se(I,H,Fe){if(I==null)return I;var ie=[],me=0;return ee(I,ie,"","",function(q){return H.call(Fe,q,me++)}),ie}function B(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(Fe){(I._status===0||I._status===-1)&&(I._status=1,I._result=Fe)},function(Fe){(I._status===0||I._status===-1)&&(I._status=2,I._result=Fe)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var re={current:null},ne={transition:null},ae={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:ne,ReactCurrentOwner:P};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ut.Children={map:se,forEach:function(I,H,Fe){se(I,function(){H.apply(this,arguments)},Fe)},count:function(I){var H=0;return se(I,function(){H++}),H},toArray:function(I){return se(I,function(H){return H})||[]},only:function(I){if(!V(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ut.Component=S,Ut.Fragment=r,Ut.Profiler=s,Ut.PureComponent=E,Ut.StrictMode=n,Ut.Suspense=d,Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Ut.act=ce,Ut.cloneElement=function(I,H,Fe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ie=b({},I.props),me=I.key,q=I.ref,Z=I._owner;if(H!=null){if(H.ref!==void 0&&(q=H.ref,Z=P.current),H.key!==void 0&&(me=""+H.key),I.type&&I.type.defaultProps)var je=I.type.defaultProps;for(F in H)T.call(H,F)&&!$.hasOwnProperty(F)&&(ie[F]=H[F]===void 0&&je!==void 0?je[F]:H[F])}var F=arguments.length-2;if(F===1)ie.children=Fe;else if(1<F){je=Array(F);for(var be=0;be<F;be++)je[be]=arguments[be+2];ie.children=je}return{$$typeof:e,type:I.type,key:me,ref:q,props:ie,_owner:Z}},Ut.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},Ut.createElement=G,Ut.createFactory=function(I){var H=G.bind(null,I);return H.type=I,H},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(I){return{$$typeof:u,render:I}},Ut.isValidElement=V,Ut.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:B}},Ut.memo=function(I,H){return{$$typeof:m,type:I,compare:H===void 0?null:H}},Ut.startTransition=function(I){var H=ne.transition;ne.transition={};try{I()}finally{ne.transition=H}},Ut.unstable_act=ce,Ut.useCallback=function(I,H){return re.current.useCallback(I,H)},Ut.useContext=function(I){return re.current.useContext(I)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(I){return re.current.useDeferredValue(I)},Ut.useEffect=function(I,H){return re.current.useEffect(I,H)},Ut.useId=function(){return re.current.useId()},Ut.useImperativeHandle=function(I,H,Fe){return re.current.useImperativeHandle(I,H,Fe)},Ut.useInsertionEffect=function(I,H){return re.current.useInsertionEffect(I,H)},Ut.useLayoutEffect=function(I,H){return re.current.useLayoutEffect(I,H)},Ut.useMemo=function(I,H){return re.current.useMemo(I,H)},Ut.useReducer=function(I,H,Fe){return re.current.useReducer(I,H,Fe)},Ut.useRef=function(I){return re.current.useRef(I)},Ut.useState=function(I){return re.current.useState(I)},Ut.useSyncExternalStore=function(I,H,Fe){return re.current.useSyncExternalStore(I,H,Fe)},Ut.useTransition=function(){return re.current.useTransition()},Ut.version="18.3.1",Ut}var cj;function Oc(){return cj||(cj=1,Tg.exports=sD()),Tg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uj;function iD(){if(uj)return ju;uj=1;var e=Oc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return ju.Fragment=r,ju.jsx=l,ju.jsxs=l,ju}var dj;function aD(){return dj||(dj=1,Og.exports=iD()),Og.exports}var a=aD(),v=Oc();const lt=Bi(v),oD=rD({__proto__:null,default:lt},[v]);var Pf={},Ig={exports:{}},Ps={},Dg={exports:{}},Rg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fj;function lD(){return fj||(fj=1,(function(e){function t(ne,ae){var ce=ne.length;ne.push(ae);e:for(;0<ce;){var I=ce-1>>>1,H=ne[I];if(0<s(H,ae))ne[I]=ae,ne[ce]=H,ce=I;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var ae=ne[0],ce=ne.pop();if(ce!==ae){ne[0]=ce;e:for(var I=0,H=ne.length,Fe=H>>>1;I<Fe;){var ie=2*(I+1)-1,me=ne[ie],q=ie+1,Z=ne[q];if(0>s(me,ce))q<H&&0>s(Z,me)?(ne[I]=Z,ne[q]=ce,I=q):(ne[I]=me,ne[ie]=ce,I=ie);else if(q<H&&0>s(Z,ce))ne[I]=Z,ne[q]=ce,I=q;else break e}}return ae}function s(ne,ae){var ce=ne.sortIndex-ae.sortIndex;return ce!==0?ce:ne.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,b=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ne){for(var ae=r(m);ae!==null;){if(ae.callback===null)n(m);else if(ae.startTime<=ne)n(m),ae.sortIndex=ae.expirationTime,t(d,ae);else break;ae=r(m)}}function O(ne){if(j=!1,C(ne),!b)if(r(d)!==null)b=!0,B(T);else{var ae=r(m);ae!==null&&re(O,ae.startTime-ne)}}function T(ne,ae){b=!1,j&&(j=!1,_(G),G=-1),x=!0;var ce=y;try{for(C(ae),p=r(d);p!==null&&(!(p.expirationTime>ae)||ne&&!L());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var H=I(p.expirationTime<=ae);ae=e.unstable_now(),typeof H=="function"?p.callback=H:p===r(d)&&n(d),C(ae)}else n(d);p=r(d)}if(p!==null)var Fe=!0;else{var ie=r(m);ie!==null&&re(O,ie.startTime-ae),Fe=!1}return Fe}finally{p=null,y=ce,x=!1}}var P=!1,$=null,G=-1,M=5,V=-1;function L(){return!(e.unstable_now()-V<M)}function U(){if($!==null){var ne=e.unstable_now();V=ne;var ae=!0;try{ae=$(!0,ne)}finally{ae?le():(P=!1,$=null)}}else P=!1}var le;if(typeof E=="function")le=function(){E(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=U,le=function(){se.postMessage(null)}}else le=function(){S(U,0)};function B(ne){$=ne,P||(P=!0,le())}function re(ne,ae){G=S(function(){ne(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,B(T))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(ne){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var ce=y;y=ae;try{return ne()}finally{y=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ae){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ce=y;y=ne;try{return ae()}finally{y=ce}},e.unstable_scheduleCallback=function(ne,ae,ce){var I=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?I+ce:I):ce=I,ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ce+H,ne={id:f++,callback:ae,priorityLevel:ne,startTime:ce,expirationTime:H,sortIndex:-1},ce>I?(ne.sortIndex=ce,t(m,ne),r(d)===null&&ne===r(m)&&(j?(_(G),G=-1):j=!0,re(O,ce-I))):(ne.sortIndex=H,t(d,ne),b||x||(b=!0,B(T))),ne},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ne){var ae=y;return function(){var ce=y;y=ae;try{return ne.apply(this,arguments)}finally{y=ce}}}})(Rg)),Rg}var hj;function cD(){return hj||(hj=1,Dg.exports=lD()),Dg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mj;function uD(){if(mj)return Ps;mj=1;var e=Oc(),t=cD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function j(o,c,h,g,w,k,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=A}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new j(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new j(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new j(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new j(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new j(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new j(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new j(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new j(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new j(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new j(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new j(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);S[c]=new j(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new j(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new j(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var w=S.hasOwnProperty(c)?S[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):w.mustUseProperty?o[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?o.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ae(o){return o===null||typeof o!="object"?null:(o=ne&&o[ne]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Object.assign,I;function H(o){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+o}var Fe=!1;function ie(o,c){if(!o||Fe)return"";Fe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(he){var g=he}Reflect.construct(o,[],c)}else{try{c.call()}catch(he){g=he}o.call(c.prototype)}else{try{throw Error()}catch(he){g=he}o()}}catch(he){if(he&&g&&typeof he.stack=="string"){for(var w=he.stack.split(`
`),k=g.stack.split(`
`),A=w.length-1,R=k.length-1;1<=A&&0<=R&&w[A]!==k[R];)R--;for(;1<=A&&0<=R;A--,R--)if(w[A]!==k[R]){if(A!==1||R!==1)do if(A--,R--,0>R||w[A]!==k[R]){var W=`
`+w[A].replace(" at new "," at ");return o.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",o.displayName)),W}while(1<=A&&0<=R);break}}}finally{Fe=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?H(o):""}function me(o){switch(o.tag){case 5:return H(o.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return o=ie(o.type,!1),o;case 11:return o=ie(o.type.render,!1),o;case 1:return o=ie(o.type,!0),o;default:return""}}function q(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case $:return"Fragment";case P:return"Portal";case M:return"Profiler";case G:return"StrictMode";case le:return"Suspense";case ee:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case V:return(o._context.displayName||"Context")+".Provider";case U:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case se:return c=o.displayName||null,c!==null?c:q(o.type)||"Memo";case B:c=o._payload,o=o._init;try{return q(o(c))}catch{}}return null}function Z(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(c);case 8:return c===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function je(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function F(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function be(o){var c=F(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,k=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(A){g=""+A,k.call(this,A)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ge(o){o._valueTracker||(o._valueTracker=be(o))}function K(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=F(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function He(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ke(o,c){var h=c.checked;return ce({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Pt(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=je(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function vt(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function qt(o,c){vt(o,c);var h=je(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?ar(o,c.type,h):c.hasOwnProperty("defaultValue")&&ar(o,c.type,je(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Rt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function ar(o,c,h){(c!=="number"||He(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var D=Array.isArray;function Q(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+je(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function de(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return ce({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ne(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(D(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:je(h)}}function pe(o,c){var h=je(c.value),g=je(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function ke(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Ve(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Ve(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var St,$t=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,w)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=St.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function yr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kr=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(o){Kr.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),nr[c]=nr[o]})});function dr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||nr.hasOwnProperty(o)&&nr[o]?(""+c).trim():c+"px"}function Bt(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=dr(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,w):o[h]=w}}var rn=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(o,c){if(c){if(rn[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Cn(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=null;function Ft(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var fr=null,Lt=null,nn=null;function ir(o){if(o=ou(o)){if(typeof fr!="function")throw Error(r(280));var c=o.stateNode;c&&(c=qd(c),fr(o.stateNode,o.type,c))}}function qn(o){Lt?nn?nn.push(o):nn=[o]:Lt=o}function is(){if(Lt){var o=Lt,c=nn;if(nn=Lt=null,ir(o),c)for(o=0;o<c.length;o++)ir(c[o])}}function Dr(o,c){return o(c)}function Lr(){}var as=!1;function hr(o,c,h){if(as)return o(c,h);as=!0;try{return Dr(o,c,h)}finally{as=!1,(Lt!==null||nn!==null)&&(Lr(),is())}}function or(o,c){var h=o.stateNode;if(h===null)return null;var g=qd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var En=!1;if(u)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){En=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{En=!1}function hn(o,c,h,g,w,k,A,R,W){var he=Array.prototype.slice.call(arguments,3);try{c.apply(h,he)}catch(De){this.onError(De)}}var mr=!1,Rr=null,Nr=!1,An=null,Ss={onError:function(o){mr=!0,Rr=o}};function br(o,c,h,g,w,k,A,R,W){mr=!1,Rr=null,hn.apply(Ss,arguments)}function Vn(o,c,h,g,w,k,A,R,W){if(br.apply(this,arguments),mr){if(mr){var he=Rr;mr=!1,Rr=null}else throw Error(r(198));Nr||(Nr=!0,An=he)}}function Gr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function vr(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function rr(o){if(Gr(o)!==o)throw Error(r(188))}function Tt(o){var c=o.alternate;if(!c){if(c=Gr(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var k=w.alternate;if(k===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===k.child){for(k=w.child;k;){if(k===h)return rr(w),o;if(k===g)return rr(w),c;k=k.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=k;else{for(var A=!1,R=w.child;R;){if(R===h){A=!0,h=w,g=k;break}if(R===g){A=!0,g=w,h=k;break}R=R.sibling}if(!A){for(R=k.child;R;){if(R===h){A=!0,h=k,g=w;break}if(R===g){A=!0,g=k,h=w;break}R=R.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function Br(o){return o=Tt(o),o!==null?Wr(o):null}function Wr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Wr(o);if(c!==null)return c;o=o.sibling}return null}var Hn=t.unstable_scheduleCallback,sn=t.unstable_cancelCallback,Ls=t.unstable_shouldYield,Si=t.unstable_requestPaint,Wt=t.unstable_now,Kn=t.unstable_getCurrentPriorityLevel,Y=t.unstable_ImmediatePriority,Se=t.unstable_UserBlockingPriority,Te=t.unstable_NormalPriority,Re=t.unstable_LowPriority,Qe=t.unstable_IdlePriority,Ee=null,wt=null;function kt(o){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ee,o,void 0,(o.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:xr,ze=Math.log,Jt=Math.LN2;function xr(o){return o>>>=0,o===0?32:31-(ze(o)/Jt|0)|0}var Cr=64,Ct=4194304;function Gn(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function si(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,w=o.suspendedLanes,k=o.pingedLanes,A=h&268435455;if(A!==0){var R=A&~w;R!==0?g=Gn(R):(k&=A,k!==0&&(g=Gn(k)))}else A=h&~w,A!==0?g=Gn(A):k!==0&&(g=Gn(k));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,k=c&-c,w>=k||w===16&&(k&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-jt(c),w=1<<h,g|=o[h],c&=~w;return g}function ks(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ua(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,k=o.pendingLanes;0<k;){var A=31-jt(k),R=1<<A,W=w[A];W===-1?((R&h)===0||(R&g)!==0)&&(w[A]=ks(R,c)):W<=c&&(o.expiredLanes|=R),k&=~R}}function ii(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ki(){var o=Cr;return Cr<<=1,(Cr&4194240)===0&&(Cr=64),o}function mn(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function fs(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-jt(c),o[c]=h}function te(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var w=31-jt(h),k=1<<w;c[w]=0,g[w]=-1,o[w]=-1,h&=~k}}function fe(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-jt(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}var ge=0;function $e(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var qe,ve,we,ut,Mt,mt=!1,It=[],bt=null,Ue=null,Vt=null,zt=new Map,ct=new Map,z=[],xe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function We(o,c){switch(o){case"focusin":case"focusout":bt=null;break;case"dragenter":case"dragleave":Ue=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":zt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(c.pointerId)}}function Ye(o,c,h,g,w,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:k,targetContainers:[w]},c!==null&&(c=ou(c),c!==null&&ve(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function _t(o,c,h,g,w){switch(c){case"focusin":return bt=Ye(bt,o,c,h,g,w),!0;case"dragenter":return Ue=Ye(Ue,o,c,h,g,w),!0;case"mouseover":return Vt=Ye(Vt,o,c,h,g,w),!0;case"pointerover":var k=w.pointerId;return zt.set(k,Ye(zt.get(k)||null,o,c,h,g,w)),!0;case"gotpointercapture":return k=w.pointerId,ct.set(k,Ye(ct.get(k)||null,o,c,h,g,w)),!0}return!1}function Kt(o){var c=Oo(o.target);if(c!==null){var h=Gr(c);if(h!==null){if(c=h.tag,c===13){if(c=vr(h),c!==null){o.blockedOn=c,Mt(o.priority,function(){we(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pr(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=N(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);nt=g,h.target.dispatchEvent(g),nt=null}else return c=ou(h),c!==null&&ve(c),o.blockedOn=h,!1;c.shift()}return!0}function Pn(o,c,h){pr(o)&&h.delete(c)}function Yr(){mt=!1,bt!==null&&pr(bt)&&(bt=null),Ue!==null&&pr(Ue)&&(Ue=null),Vt!==null&&pr(Vt)&&(Vt=null),zt.forEach(Pn),ct.forEach(Pn)}function lr(o,c){o.blockedOn===c&&(o.blockedOn=null,mt||(mt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Yr)))}function hs(o){function c(w){return lr(w,o)}if(0<It.length){lr(It[0],o);for(var h=1;h<It.length;h++){var g=It[h];g.blockedOn===o&&(g.blockedOn=null)}}for(bt!==null&&lr(bt,o),Ue!==null&&lr(Ue,o),Vt!==null&&lr(Vt,o),zt.forEach(c),ct.forEach(c),h=0;h<z.length;h++)g=z[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<z.length&&(h=z[0],h.blockedOn===null);)Kt(h),h.blockedOn===null&&z.shift()}var pn=O.ReactCurrentBatchConfig,Ao=!0;function Jc(o,c,h,g){var w=ge,k=pn.transition;pn.transition=null;try{ge=1,kl(o,c,h,g)}finally{ge=w,pn.transition=k}}function Sl(o,c,h,g){var w=ge,k=pn.transition;pn.transition=null;try{ge=4,kl(o,c,h,g)}finally{ge=w,pn.transition=k}}function kl(o,c,h,g){if(Ao){var w=N(o,c,h,g);if(w===null)wp(o,c,g,Po,h),We(o,g);else if(_t(w,o,c,h,g))g.stopPropagation();else if(We(o,g),c&4&&-1<xe.indexOf(o)){for(;w!==null;){var k=ou(w);if(k!==null&&qe(k),k=N(o,c,h,g),k===null&&wp(o,c,g,Po,h),k===w)break;w=k}w!==null&&g.stopPropagation()}else wp(o,c,g,null,h)}}var Po=null;function N(o,c,h,g){if(Po=null,o=Ft(g),o=Oo(o),o!==null)if(c=Gr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=vr(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Po=o,null}function X(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kn()){case Y:return 1;case Se:return 4;case Te:case Re:return 16;case Qe:return 536870912;default:return 16}default:return 16}}var Pe=null,Oe=null,Ae=null;function Be(){if(Ae)return Ae;var o,c=Oe,h=c.length,g,w="value"in Pe?Pe.value:Pe.textContent,k=w.length;for(o=0;o<h&&c[o]===w[o];o++);var A=h-o;for(g=1;g<=A&&c[h-g]===w[k-g];g++);return Ae=w.slice(o,1<g?1-g:void 0)}function _e(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function it(){return!0}function tt(){return!1}function Xt(o){function c(h,g,w,k,A){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=k,this.target=A,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(h=o[R],this[R]=h?h(k):k[R]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?it:tt,this.isPropagationStopped=tt,this}return ce(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=it)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=it)},persist:function(){},isPersistent:it}),c}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=Xt(Et),_i=ce({},Et,{view:0,detail:0}),Rd=Xt(_i),$d,Xc,_l,Vi=ce({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==_l&&(_l&&o.type==="mousemove"?($d=o.screenX-_l.screenX,Xc=o.screenY-_l.screenY):Xc=$d=0,_l=o),$d)},movementY:function(o){return"movementY"in o?o.movementY:Xc}}),Ka=Xt(Vi),ET=ce({},Vi,{dataTransfer:0}),AT=Xt(ET),PT=ce({},_i,{relatedTarget:0}),lp=Xt(PT),OT=ce({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),TT=Xt(OT),IT=ce({},Et,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),DT=Xt(IT),RT=ce({},Et,{data:0}),Qw=Xt(RT),$T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=FT[o])?!!c[o]:!1}function cp(){return LT}var zT=ce({},_i,{key:function(o){if(o.key){var c=$T[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=_e(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?MT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cp,charCode:function(o){return o.type==="keypress"?_e(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_e(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),UT=Xt(zT),BT=ce({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zw=Xt(BT),WT=ce({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cp}),qT=Xt(WT),VT=ce({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=Xt(VT),KT=ce({},Vi,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),GT=Xt(KT),YT=[9,13,27,32],up=u&&"CompositionEvent"in window,Qc=null;u&&"documentMode"in document&&(Qc=document.documentMode);var JT=u&&"TextEvent"in window&&!Qc,eb=u&&(!up||Qc&&8<Qc&&11>=Qc),tb=" ",rb=!1;function nb(o,c){switch(o){case"keyup":return YT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Nl=!1;function XT(o,c){switch(o){case"compositionend":return sb(c);case"keypress":return c.which!==32?null:(rb=!0,tb);case"textInput":return o=c.data,o===tb&&rb?null:o;default:return null}}function QT(o,c){if(Nl)return o==="compositionend"||!up&&nb(o,c)?(o=Be(),Ae=Oe=Pe=null,Nl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return eb&&c.locale!=="ko"?null:c.data;default:return null}}var ZT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ib(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!ZT[o.type]:c==="textarea"}function ab(o,c,h,g){qn(g),c=Ud(c,"onChange"),0<c.length&&(h=new qr("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Zc=null,eu=null;function eI(o){kb(o,0)}function Md(o){var c=Ol(o);if(K(c))return o}function tI(o,c){if(o==="change")return c}var ob=!1;if(u){var dp;if(u){var fp="oninput"in document;if(!fp){var lb=document.createElement("div");lb.setAttribute("oninput","return;"),fp=typeof lb.oninput=="function"}dp=fp}else dp=!1;ob=dp&&(!document.documentMode||9<document.documentMode)}function cb(){Zc&&(Zc.detachEvent("onpropertychange",ub),eu=Zc=null)}function ub(o){if(o.propertyName==="value"&&Md(eu)){var c=[];ab(c,eu,o,Ft(o)),hr(eI,c)}}function rI(o,c,h){o==="focusin"?(cb(),Zc=c,eu=h,Zc.attachEvent("onpropertychange",ub)):o==="focusout"&&cb()}function nI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Md(eu)}function sI(o,c){if(o==="click")return Md(c)}function iI(o,c){if(o==="input"||o==="change")return Md(c)}function aI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ni=typeof Object.is=="function"?Object.is:aI;function tu(o,c){if(Ni(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!Ni(o[w],c[w]))return!1}return!0}function db(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fb(o,c){var h=db(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=db(h)}}function hb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?hb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function mb(){for(var o=window,c=He();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=He(o.document)}return c}function hp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function oI(o){var c=mb(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&hb(h.ownerDocument.documentElement,h)){if(g!==null&&hp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var w=h.textContent.length,k=Math.min(g.start,w);g=g.end===void 0?k:Math.min(g.end,w),!o.extend&&k>g&&(w=g,g=k,k=w),w=fb(h,k);var A=fb(h,g);w&&A&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),o.removeAllRanges(),k>g?(o.addRange(c),o.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var lI=u&&"documentMode"in document&&11>=document.documentMode,Cl=null,mp=null,ru=null,pp=!1;function pb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;pp||Cl==null||Cl!==He(g)||(g=Cl,"selectionStart"in g&&hp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ru&&tu(ru,g)||(ru=g,g=Ud(mp,"onSelect"),0<g.length&&(c=new qr("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Cl)))}function Fd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var El={animationend:Fd("Animation","AnimationEnd"),animationiteration:Fd("Animation","AnimationIteration"),animationstart:Fd("Animation","AnimationStart"),transitionend:Fd("Transition","TransitionEnd")},gp={},gb={};u&&(gb=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Ld(o){if(gp[o])return gp[o];if(!El[o])return o;var c=El[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in gb)return gp[o]=c[h];return o}var yb=Ld("animationend"),vb=Ld("animationiteration"),xb=Ld("animationstart"),wb=Ld("transitionend"),bb=new Map,jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(o,c){bb.set(o,c),i(c,[o])}for(var yp=0;yp<jb.length;yp++){var vp=jb[yp],cI=vp.toLowerCase(),uI=vp[0].toUpperCase()+vp.slice(1);Ga(cI,"on"+uI)}Ga(yb,"onAnimationEnd"),Ga(vb,"onAnimationIteration"),Ga(xb,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(wb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dI=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function Sb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,Vn(g,c,void 0,o),o.currentTarget=null}function kb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var k=void 0;if(c)for(var A=g.length-1;0<=A;A--){var R=g[A],W=R.instance,he=R.currentTarget;if(R=R.listener,W!==k&&w.isPropagationStopped())break e;Sb(w,R,he),k=W}else for(A=0;A<g.length;A++){if(R=g[A],W=R.instance,he=R.currentTarget,R=R.listener,W!==k&&w.isPropagationStopped())break e;Sb(w,R,he),k=W}}}if(Nr)throw o=An,Nr=!1,An=null,o}function Er(o,c){var h=c[Np];h===void 0&&(h=c[Np]=new Set);var g=o+"__bubble";h.has(g)||(_b(c,o,2,!1),h.add(g))}function xp(o,c,h){var g=0;c&&(g|=4),_b(h,o,g,c)}var zd="_reactListening"+Math.random().toString(36).slice(2);function su(o){if(!o[zd]){o[zd]=!0,n.forEach(function(h){h!=="selectionchange"&&(dI.has(h)||xp(h,!1,o),xp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[zd]||(c[zd]=!0,xp("selectionchange",!1,c))}}function _b(o,c,h,g){switch(X(c)){case 1:var w=Jc;break;case 4:w=Sl;break;default:w=kl}h=w.bind(null,c,h,o),w=void 0,!En||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function wp(o,c,h,g,w){var k=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var R=g.stateNode.containerInfo;if(R===w||R.nodeType===8&&R.parentNode===w)break;if(A===4)for(A=g.return;A!==null;){var W=A.tag;if((W===3||W===4)&&(W=A.stateNode.containerInfo,W===w||W.nodeType===8&&W.parentNode===w))return;A=A.return}for(;R!==null;){if(A=Oo(R),A===null)return;if(W=A.tag,W===5||W===6){g=k=A;continue e}R=R.parentNode}}g=g.return}hr(function(){var he=k,De=Ft(h),Me=[];e:{var Ie=bb.get(o);if(Ie!==void 0){var Xe=qr,rt=o;switch(o){case"keypress":if(_e(h)===0)break e;case"keydown":case"keyup":Xe=UT;break;case"focusin":rt="focus",Xe=lp;break;case"focusout":rt="blur",Xe=lp;break;case"beforeblur":case"afterblur":Xe=lp;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=AT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=qT;break;case yb:case vb:case xb:Xe=TT;break;case wb:Xe=HT;break;case"scroll":Xe=Rd;break;case"wheel":Xe=GT;break;case"copy":case"cut":case"paste":Xe=DT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=Zw}var st=(c&4)!==0,Jr=!st&&o==="scroll",oe=st?Ie!==null?Ie+"Capture":null:Ie;st=[];for(var J=he,ue;J!==null;){ue=J;var Le=ue.stateNode;if(ue.tag===5&&Le!==null&&(ue=Le,oe!==null&&(Le=or(J,oe),Le!=null&&st.push(iu(J,Le,ue)))),Jr)break;J=J.return}0<st.length&&(Ie=new Xe(Ie,rt,null,h,De),Me.push({event:Ie,listeners:st}))}}if((c&7)===0){e:{if(Ie=o==="mouseover"||o==="pointerover",Xe=o==="mouseout"||o==="pointerout",Ie&&h!==nt&&(rt=h.relatedTarget||h.fromElement)&&(Oo(rt)||rt[da]))break e;if((Xe||Ie)&&(Ie=De.window===De?De:(Ie=De.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Xe?(rt=h.relatedTarget||h.toElement,Xe=he,rt=rt?Oo(rt):null,rt!==null&&(Jr=Gr(rt),rt!==Jr||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Xe=null,rt=he),Xe!==rt)){if(st=Ka,Le="onMouseLeave",oe="onMouseEnter",J="mouse",(o==="pointerout"||o==="pointerover")&&(st=Zw,Le="onPointerLeave",oe="onPointerEnter",J="pointer"),Jr=Xe==null?Ie:Ol(Xe),ue=rt==null?Ie:Ol(rt),Ie=new st(Le,J+"leave",Xe,h,De),Ie.target=Jr,Ie.relatedTarget=ue,Le=null,Oo(De)===he&&(st=new st(oe,J+"enter",rt,h,De),st.target=ue,st.relatedTarget=Jr,Le=st),Jr=Le,Xe&&rt)t:{for(st=Xe,oe=rt,J=0,ue=st;ue;ue=Al(ue))J++;for(ue=0,Le=oe;Le;Le=Al(Le))ue++;for(;0<J-ue;)st=Al(st),J--;for(;0<ue-J;)oe=Al(oe),ue--;for(;J--;){if(st===oe||oe!==null&&st===oe.alternate)break t;st=Al(st),oe=Al(oe)}st=null}else st=null;Xe!==null&&Nb(Me,Ie,Xe,st,!1),rt!==null&&Jr!==null&&Nb(Me,Jr,rt,st,!0)}}e:{if(Ie=he?Ol(he):window,Xe=Ie.nodeName&&Ie.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ie.type==="file")var at=tI;else if(ib(Ie))if(ob)at=iI;else{at=nI;var pt=rI}else(Xe=Ie.nodeName)&&Xe.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(at=sI);if(at&&(at=at(o,he))){ab(Me,at,h,De);break e}pt&&pt(o,Ie,he),o==="focusout"&&(pt=Ie._wrapperState)&&pt.controlled&&Ie.type==="number"&&ar(Ie,"number",Ie.value)}switch(pt=he?Ol(he):window,o){case"focusin":(ib(pt)||pt.contentEditable==="true")&&(Cl=pt,mp=he,ru=null);break;case"focusout":ru=mp=Cl=null;break;case"mousedown":pp=!0;break;case"contextmenu":case"mouseup":case"dragend":pp=!1,pb(Me,h,De);break;case"selectionchange":if(lI)break;case"keydown":case"keyup":pb(Me,h,De)}var gt;if(up)e:{switch(o){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Nl?nb(o,h)&&(Nt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Nt="onCompositionStart");Nt&&(eb&&h.locale!=="ko"&&(Nl||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Nl&&(gt=Be()):(Pe=De,Oe="value"in Pe?Pe.value:Pe.textContent,Nl=!0)),pt=Ud(he,Nt),0<pt.length&&(Nt=new Qw(Nt,o,null,h,De),Me.push({event:Nt,listeners:pt}),gt?Nt.data=gt:(gt=sb(h),gt!==null&&(Nt.data=gt)))),(gt=JT?XT(o,h):QT(o,h))&&(he=Ud(he,"onBeforeInput"),0<he.length&&(De=new Qw("onBeforeInput","beforeinput",null,h,De),Me.push({event:De,listeners:he}),De.data=gt))}kb(Me,c)})}function iu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Ud(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,k=w.stateNode;w.tag===5&&k!==null&&(w=k,k=or(o,h),k!=null&&g.unshift(iu(o,k,w)),k=or(o,c),k!=null&&g.push(iu(o,k,w))),o=o.return}return g}function Al(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Nb(o,c,h,g,w){for(var k=c._reactName,A=[];h!==null&&h!==g;){var R=h,W=R.alternate,he=R.stateNode;if(W!==null&&W===g)break;R.tag===5&&he!==null&&(R=he,w?(W=or(h,k),W!=null&&A.unshift(iu(h,W,R))):w||(W=or(h,k),W!=null&&A.push(iu(h,W,R)))),h=h.return}A.length!==0&&o.push({event:c,listeners:A})}var fI=/\r\n?/g,hI=/\u0000|\uFFFD/g;function Cb(o){return(typeof o=="string"?o:""+o).replace(fI,`
`).replace(hI,"")}function Bd(o,c,h){if(c=Cb(c),Cb(o)!==c&&h)throw Error(r(425))}function Wd(){}var bp=null,jp=null;function Sp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var kp=typeof setTimeout=="function"?setTimeout:void 0,mI=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,pI=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(o){return Eb.resolve(null).then(o).catch(gI)}:kp;function gI(o){setTimeout(function(){throw o})}function _p(o,c){var h=c,g=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){o.removeChild(w),hs(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);hs(c)}function Ya(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Ab(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Pl,au="__reactProps$"+Pl,da="__reactContainer$"+Pl,Np="__reactEvents$"+Pl,yI="__reactListeners$"+Pl,vI="__reactHandles$"+Pl;function Oo(o){var c=o[Hi];if(c)return c;for(var h=o.parentNode;h;){if(c=h[da]||h[Hi]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Ab(o);o!==null;){if(h=o[Hi])return h;o=Ab(o)}return c}o=h,h=o.parentNode}return null}function ou(o){return o=o[Hi]||o[da],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ol(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function qd(o){return o[au]||null}var Cp=[],Tl=-1;function Ja(o){return{current:o}}function Ar(o){0>Tl||(o.current=Cp[Tl],Cp[Tl]=null,Tl--)}function jr(o,c){Tl++,Cp[Tl]=o.current,o.current=c}var Xa={},os=Ja(Xa),_s=Ja(!1),To=Xa;function Il(o,c){var h=o.type.contextTypes;if(!h)return Xa;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},k;for(k in h)w[k]=c[k];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=w),w}function Ns(o){return o=o.childContextTypes,o!=null}function Vd(){Ar(_s),Ar(os)}function Pb(o,c,h){if(os.current!==Xa)throw Error(r(168));jr(os,c),jr(_s,h)}function Ob(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,Z(o)||"Unknown",w));return ce({},h,g)}function Hd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Xa,To=os.current,jr(os,o),jr(_s,_s.current),!0}function Tb(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=Ob(o,c,To),g.__reactInternalMemoizedMergedChildContext=o,Ar(_s),Ar(os),jr(os,o)):Ar(_s),jr(_s,h)}var fa=null,Kd=!1,Ep=!1;function Ib(o){fa===null?fa=[o]:fa.push(o)}function xI(o){Kd=!0,Ib(o)}function Qa(){if(!Ep&&fa!==null){Ep=!0;var o=0,c=ge;try{var h=fa;for(ge=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}fa=null,Kd=!1}catch(w){throw fa!==null&&(fa=fa.slice(o+1)),Hn(Y,Qa),w}finally{ge=c,Ep=!1}}return null}var Dl=[],Rl=0,Gd=null,Yd=0,ai=[],oi=0,Io=null,ha=1,ma="";function Do(o,c){Dl[Rl++]=Yd,Dl[Rl++]=Gd,Gd=o,Yd=c}function Db(o,c,h){ai[oi++]=ha,ai[oi++]=ma,ai[oi++]=Io,Io=o;var g=ha;o=ma;var w=32-jt(g)-1;g&=~(1<<w),h+=1;var k=32-jt(c)+w;if(30<k){var A=w-w%5;k=(g&(1<<A)-1).toString(32),g>>=A,w-=A,ha=1<<32-jt(c)+w|h<<w|g,ma=k+o}else ha=1<<k|h<<w|g,ma=o}function Ap(o){o.return!==null&&(Do(o,1),Db(o,1,0))}function Pp(o){for(;o===Gd;)Gd=Dl[--Rl],Dl[Rl]=null,Yd=Dl[--Rl],Dl[Rl]=null;for(;o===Io;)Io=ai[--oi],ai[oi]=null,ma=ai[--oi],ai[oi]=null,ha=ai[--oi],ai[oi]=null}var zs=null,Us=null,$r=!1,Ci=null;function Rb(o,c){var h=di(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function $b(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,zs=o,Us=Ya(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,zs=o,Us=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Io!==null?{id:ha,overflow:ma}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=di(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,zs=o,Us=null,!0):!1;default:return!1}}function Op(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Tp(o){if($r){var c=Us;if(c){var h=c;if(!$b(o,c)){if(Op(o))throw Error(r(418));c=Ya(h.nextSibling);var g=zs;c&&$b(o,c)?Rb(g,h):(o.flags=o.flags&-4097|2,$r=!1,zs=o)}}else{if(Op(o))throw Error(r(418));o.flags=o.flags&-4097|2,$r=!1,zs=o}}}function Mb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;zs=o}function Jd(o){if(o!==zs)return!1;if(!$r)return Mb(o),$r=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Sp(o.type,o.memoizedProps)),c&&(c=Us)){if(Op(o))throw Fb(),Error(r(418));for(;c;)Rb(o,c),c=Ya(c.nextSibling)}if(Mb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Us=Ya(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Us=null}}else Us=zs?Ya(o.stateNode.nextSibling):null;return!0}function Fb(){for(var o=Us;o;)o=Ya(o.nextSibling)}function $l(){Us=zs=null,$r=!1}function Ip(o){Ci===null?Ci=[o]:Ci.push(o)}var wI=O.ReactCurrentBatchConfig;function lu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var w=g,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(A){var R=w.refs;A===null?delete R[k]:R[k]=A},c._stringRef=k,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function Xd(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Lb(o){var c=o._init;return c(o._payload)}function zb(o){function c(oe,J){if(o){var ue=oe.deletions;ue===null?(oe.deletions=[J],oe.flags|=16):ue.push(J)}}function h(oe,J){if(!o)return null;for(;J!==null;)c(oe,J),J=J.sibling;return null}function g(oe,J){for(oe=new Map;J!==null;)J.key!==null?oe.set(J.key,J):oe.set(J.index,J),J=J.sibling;return oe}function w(oe,J){return oe=ao(oe,J),oe.index=0,oe.sibling=null,oe}function k(oe,J,ue){return oe.index=ue,o?(ue=oe.alternate,ue!==null?(ue=ue.index,ue<J?(oe.flags|=2,J):ue):(oe.flags|=2,J)):(oe.flags|=1048576,J)}function A(oe){return o&&oe.alternate===null&&(oe.flags|=2),oe}function R(oe,J,ue,Le){return J===null||J.tag!==6?(J=kg(ue,oe.mode,Le),J.return=oe,J):(J=w(J,ue),J.return=oe,J)}function W(oe,J,ue,Le){var at=ue.type;return at===$?De(oe,J,ue.props.children,Le,ue.key):J!==null&&(J.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===B&&Lb(at)===J.type)?(Le=w(J,ue.props),Le.ref=lu(oe,J,ue),Le.return=oe,Le):(Le=jf(ue.type,ue.key,ue.props,null,oe.mode,Le),Le.ref=lu(oe,J,ue),Le.return=oe,Le)}function he(oe,J,ue,Le){return J===null||J.tag!==4||J.stateNode.containerInfo!==ue.containerInfo||J.stateNode.implementation!==ue.implementation?(J=_g(ue,oe.mode,Le),J.return=oe,J):(J=w(J,ue.children||[]),J.return=oe,J)}function De(oe,J,ue,Le,at){return J===null||J.tag!==7?(J=Bo(ue,oe.mode,Le,at),J.return=oe,J):(J=w(J,ue),J.return=oe,J)}function Me(oe,J,ue){if(typeof J=="string"&&J!==""||typeof J=="number")return J=kg(""+J,oe.mode,ue),J.return=oe,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return ue=jf(J.type,J.key,J.props,null,oe.mode,ue),ue.ref=lu(oe,null,J),ue.return=oe,ue;case P:return J=_g(J,oe.mode,ue),J.return=oe,J;case B:var Le=J._init;return Me(oe,Le(J._payload),ue)}if(D(J)||ae(J))return J=Bo(J,oe.mode,ue,null),J.return=oe,J;Xd(oe,J)}return null}function Ie(oe,J,ue,Le){var at=J!==null?J.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return at!==null?null:R(oe,J,""+ue,Le);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return ue.key===at?W(oe,J,ue,Le):null;case P:return ue.key===at?he(oe,J,ue,Le):null;case B:return at=ue._init,Ie(oe,J,at(ue._payload),Le)}if(D(ue)||ae(ue))return at!==null?null:De(oe,J,ue,Le,null);Xd(oe,ue)}return null}function Xe(oe,J,ue,Le,at){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return oe=oe.get(ue)||null,R(J,oe,""+Le,at);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case T:return oe=oe.get(Le.key===null?ue:Le.key)||null,W(J,oe,Le,at);case P:return oe=oe.get(Le.key===null?ue:Le.key)||null,he(J,oe,Le,at);case B:var pt=Le._init;return Xe(oe,J,ue,pt(Le._payload),at)}if(D(Le)||ae(Le))return oe=oe.get(ue)||null,De(J,oe,Le,at,null);Xd(J,Le)}return null}function rt(oe,J,ue,Le){for(var at=null,pt=null,gt=J,Nt=J=0,In=null;gt!==null&&Nt<ue.length;Nt++){gt.index>Nt?(In=gt,gt=null):In=gt.sibling;var Qt=Ie(oe,gt,ue[Nt],Le);if(Qt===null){gt===null&&(gt=In);break}o&&gt&&Qt.alternate===null&&c(oe,gt),J=k(Qt,J,Nt),pt===null?at=Qt:pt.sibling=Qt,pt=Qt,gt=In}if(Nt===ue.length)return h(oe,gt),$r&&Do(oe,Nt),at;if(gt===null){for(;Nt<ue.length;Nt++)gt=Me(oe,ue[Nt],Le),gt!==null&&(J=k(gt,J,Nt),pt===null?at=gt:pt.sibling=gt,pt=gt);return $r&&Do(oe,Nt),at}for(gt=g(oe,gt);Nt<ue.length;Nt++)In=Xe(gt,oe,Nt,ue[Nt],Le),In!==null&&(o&&In.alternate!==null&&gt.delete(In.key===null?Nt:In.key),J=k(In,J,Nt),pt===null?at=In:pt.sibling=In,pt=In);return o&&gt.forEach(function(oo){return c(oe,oo)}),$r&&Do(oe,Nt),at}function st(oe,J,ue,Le){var at=ae(ue);if(typeof at!="function")throw Error(r(150));if(ue=at.call(ue),ue==null)throw Error(r(151));for(var pt=at=null,gt=J,Nt=J=0,In=null,Qt=ue.next();gt!==null&&!Qt.done;Nt++,Qt=ue.next()){gt.index>Nt?(In=gt,gt=null):In=gt.sibling;var oo=Ie(oe,gt,Qt.value,Le);if(oo===null){gt===null&&(gt=In);break}o&&gt&&oo.alternate===null&&c(oe,gt),J=k(oo,J,Nt),pt===null?at=oo:pt.sibling=oo,pt=oo,gt=In}if(Qt.done)return h(oe,gt),$r&&Do(oe,Nt),at;if(gt===null){for(;!Qt.done;Nt++,Qt=ue.next())Qt=Me(oe,Qt.value,Le),Qt!==null&&(J=k(Qt,J,Nt),pt===null?at=Qt:pt.sibling=Qt,pt=Qt);return $r&&Do(oe,Nt),at}for(gt=g(oe,gt);!Qt.done;Nt++,Qt=ue.next())Qt=Xe(gt,oe,Nt,Qt.value,Le),Qt!==null&&(o&&Qt.alternate!==null&&gt.delete(Qt.key===null?Nt:Qt.key),J=k(Qt,J,Nt),pt===null?at=Qt:pt.sibling=Qt,pt=Qt);return o&&gt.forEach(function(ZI){return c(oe,ZI)}),$r&&Do(oe,Nt),at}function Jr(oe,J,ue,Le){if(typeof ue=="object"&&ue!==null&&ue.type===$&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:e:{for(var at=ue.key,pt=J;pt!==null;){if(pt.key===at){if(at=ue.type,at===$){if(pt.tag===7){h(oe,pt.sibling),J=w(pt,ue.props.children),J.return=oe,oe=J;break e}}else if(pt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===B&&Lb(at)===pt.type){h(oe,pt.sibling),J=w(pt,ue.props),J.ref=lu(oe,pt,ue),J.return=oe,oe=J;break e}h(oe,pt);break}else c(oe,pt);pt=pt.sibling}ue.type===$?(J=Bo(ue.props.children,oe.mode,Le,ue.key),J.return=oe,oe=J):(Le=jf(ue.type,ue.key,ue.props,null,oe.mode,Le),Le.ref=lu(oe,J,ue),Le.return=oe,oe=Le)}return A(oe);case P:e:{for(pt=ue.key;J!==null;){if(J.key===pt)if(J.tag===4&&J.stateNode.containerInfo===ue.containerInfo&&J.stateNode.implementation===ue.implementation){h(oe,J.sibling),J=w(J,ue.children||[]),J.return=oe,oe=J;break e}else{h(oe,J);break}else c(oe,J);J=J.sibling}J=_g(ue,oe.mode,Le),J.return=oe,oe=J}return A(oe);case B:return pt=ue._init,Jr(oe,J,pt(ue._payload),Le)}if(D(ue))return rt(oe,J,ue,Le);if(ae(ue))return st(oe,J,ue,Le);Xd(oe,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,J!==null&&J.tag===6?(h(oe,J.sibling),J=w(J,ue),J.return=oe,oe=J):(h(oe,J),J=kg(ue,oe.mode,Le),J.return=oe,oe=J),A(oe)):h(oe,J)}return Jr}var Ml=zb(!0),Ub=zb(!1),Qd=Ja(null),Zd=null,Fl=null,Dp=null;function Rp(){Dp=Fl=Zd=null}function $p(o){var c=Qd.current;Ar(Qd),o._currentValue=c}function Mp(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Ll(o,c){Zd=o,Dp=Fl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Cs=!0),o.firstContext=null)}function li(o){var c=o._currentValue;if(Dp!==o)if(o={context:o,memoizedValue:c,next:null},Fl===null){if(Zd===null)throw Error(r(308));Fl=o,Zd.dependencies={lanes:0,firstContext:o}}else Fl=Fl.next=o;return c}var Ro=null;function Fp(o){Ro===null?Ro=[o]:Ro.push(o)}function Bb(o,c,h,g){var w=c.interleaved;return w===null?(h.next=h,Fp(c)):(h.next=w.next,w.next=h),c.interleaved=h,pa(o,g)}function pa(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Za=!1;function Lp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ga(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function eo(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Gt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,pa(o,h)}return w=g.interleaved,w===null?(c.next=c,Fp(g)):(c.next=w.next,w.next=c),g.interleaved=c,pa(o,h)}function ef(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,fe(o,h)}}function qb(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var A={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?w=k=A:k=k.next=A,h=h.next}while(h!==null);k===null?w=k=c:k=k.next=c}else w=k=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:k,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function tf(o,c,h,g){var w=o.updateQueue;Za=!1;var k=w.firstBaseUpdate,A=w.lastBaseUpdate,R=w.shared.pending;if(R!==null){w.shared.pending=null;var W=R,he=W.next;W.next=null,A===null?k=he:A.next=he,A=W;var De=o.alternate;De!==null&&(De=De.updateQueue,R=De.lastBaseUpdate,R!==A&&(R===null?De.firstBaseUpdate=he:R.next=he,De.lastBaseUpdate=W))}if(k!==null){var Me=w.baseState;A=0,De=he=W=null,R=k;do{var Ie=R.lane,Xe=R.eventTime;if((g&Ie)===Ie){De!==null&&(De=De.next={eventTime:Xe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var rt=o,st=R;switch(Ie=c,Xe=h,st.tag){case 1:if(rt=st.payload,typeof rt=="function"){Me=rt.call(Xe,Me,Ie);break e}Me=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=st.payload,Ie=typeof rt=="function"?rt.call(Xe,Me,Ie):rt,Ie==null)break e;Me=ce({},Me,Ie);break e;case 2:Za=!0}}R.callback!==null&&R.lane!==0&&(o.flags|=64,Ie=w.effects,Ie===null?w.effects=[R]:Ie.push(R))}else Xe={eventTime:Xe,lane:Ie,tag:R.tag,payload:R.payload,callback:R.callback,next:null},De===null?(he=De=Xe,W=Me):De=De.next=Xe,A|=Ie;if(R=R.next,R===null){if(R=w.shared.pending,R===null)break;Ie=R,R=Ie.next,Ie.next=null,w.lastBaseUpdate=Ie,w.shared.pending=null}}while(!0);if(De===null&&(W=Me),w.baseState=W,w.firstBaseUpdate=he,w.lastBaseUpdate=De,c=w.shared.interleaved,c!==null){w=c;do A|=w.lane,w=w.next;while(w!==c)}else k===null&&(w.shared.lanes=0);Fo|=A,o.lanes=A,o.memoizedState=Me}}function Vb(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var cu={},Ki=Ja(cu),uu=Ja(cu),du=Ja(cu);function $o(o){if(o===cu)throw Error(r(174));return o}function zp(o,c){switch(jr(du,c),jr(uu,o),jr(Ki,cu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ht(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ht(c,o)}Ar(Ki),jr(Ki,c)}function zl(){Ar(Ki),Ar(uu),Ar(du)}function Hb(o){$o(du.current);var c=$o(Ki.current),h=ht(c,o.type);c!==h&&(jr(uu,o),jr(Ki,h))}function Up(o){uu.current===o&&(Ar(Ki),Ar(uu))}var zr=Ja(0);function rf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Bp=[];function Wp(){for(var o=0;o<Bp.length;o++)Bp[o]._workInProgressVersionPrimary=null;Bp.length=0}var nf=O.ReactCurrentDispatcher,qp=O.ReactCurrentBatchConfig,Mo=0,Ur=null,gn=null,On=null,sf=!1,fu=!1,hu=0,bI=0;function ls(){throw Error(r(321))}function Vp(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Ni(o[h],c[h]))return!1;return!0}function Hp(o,c,h,g,w,k){if(Mo=k,Ur=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,nf.current=o===null||o.memoizedState===null?_I:NI,o=h(g,w),fu){k=0;do{if(fu=!1,hu=0,25<=k)throw Error(r(301));k+=1,On=gn=null,c.updateQueue=null,nf.current=CI,o=h(g,w)}while(fu)}if(nf.current=lf,c=gn!==null&&gn.next!==null,Mo=0,On=gn=Ur=null,sf=!1,c)throw Error(r(300));return o}function Kp(){var o=hu!==0;return hu=0,o}function Gi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?Ur.memoizedState=On=o:On=On.next=o,On}function ci(){if(gn===null){var o=Ur.alternate;o=o!==null?o.memoizedState:null}else o=gn.next;var c=On===null?Ur.memoizedState:On.next;if(c!==null)On=c,gn=o;else{if(o===null)throw Error(r(310));gn=o,o={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},On===null?Ur.memoizedState=On=o:On=On.next=o}return On}function mu(o,c){return typeof c=="function"?c(o):c}function Gp(o){var c=ci(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=gn,w=g.baseQueue,k=h.pending;if(k!==null){if(w!==null){var A=w.next;w.next=k.next,k.next=A}g.baseQueue=w=k,h.pending=null}if(w!==null){k=w.next,g=g.baseState;var R=A=null,W=null,he=k;do{var De=he.lane;if((Mo&De)===De)W!==null&&(W=W.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),g=he.hasEagerState?he.eagerState:o(g,he.action);else{var Me={lane:De,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};W===null?(R=W=Me,A=g):W=W.next=Me,Ur.lanes|=De,Fo|=De}he=he.next}while(he!==null&&he!==k);W===null?A=g:W.next=R,Ni(g,c.memoizedState)||(Cs=!0),c.memoizedState=g,c.baseState=A,c.baseQueue=W,h.lastRenderedState=g}if(o=h.interleaved,o!==null){w=o;do k=w.lane,Ur.lanes|=k,Fo|=k,w=w.next;while(w!==o)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Yp(o){var c=ci(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,k=c.memoizedState;if(w!==null){h.pending=null;var A=w=w.next;do k=o(k,A.action),A=A.next;while(A!==w);Ni(k,c.memoizedState)||(Cs=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),h.lastRenderedState=k}return[k,g]}function Kb(){}function Gb(o,c){var h=Ur,g=ci(),w=c(),k=!Ni(g.memoizedState,w);if(k&&(g.memoizedState=w,Cs=!0),g=g.queue,Jp(Xb.bind(null,h,g,o),[o]),g.getSnapshot!==c||k||On!==null&&On.memoizedState.tag&1){if(h.flags|=2048,pu(9,Jb.bind(null,h,g,w,c),void 0,null),Tn===null)throw Error(r(349));(Mo&30)!==0||Yb(h,c,w)}return w}function Yb(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Jb(o,c,h,g){c.value=h,c.getSnapshot=g,Qb(c)&&Zb(o)}function Xb(o,c,h){return h(function(){Qb(c)&&Zb(o)})}function Qb(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Ni(o,h)}catch{return!0}}function Zb(o){var c=pa(o,1);c!==null&&Oi(c,o,1,-1)}function e1(o){var c=Gi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:o},c.queue=o,o=o.dispatch=kI.bind(null,Ur,o),[c.memoizedState,o]}function pu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function t1(){return ci().memoizedState}function af(o,c,h,g){var w=Gi();Ur.flags|=o,w.memoizedState=pu(1|c,h,void 0,g===void 0?null:g)}function of(o,c,h,g){var w=ci();g=g===void 0?null:g;var k=void 0;if(gn!==null){var A=gn.memoizedState;if(k=A.destroy,g!==null&&Vp(g,A.deps)){w.memoizedState=pu(c,h,k,g);return}}Ur.flags|=o,w.memoizedState=pu(1|c,h,k,g)}function r1(o,c){return af(8390656,8,o,c)}function Jp(o,c){return of(2048,8,o,c)}function n1(o,c){return of(4,2,o,c)}function s1(o,c){return of(4,4,o,c)}function i1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function a1(o,c,h){return h=h!=null?h.concat([o]):null,of(4,4,i1.bind(null,c,o),h)}function Xp(){}function o1(o,c){var h=ci();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Vp(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function l1(o,c){var h=ci();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Vp(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function c1(o,c,h){return(Mo&21)===0?(o.baseState&&(o.baseState=!1,Cs=!0),o.memoizedState=h):(Ni(h,c)||(h=ki(),Ur.lanes|=h,Fo|=h,o.baseState=!0),c)}function jI(o,c){var h=ge;ge=h!==0&&4>h?h:4,o(!0);var g=qp.transition;qp.transition={};try{o(!1),c()}finally{ge=h,qp.transition=g}}function u1(){return ci().memoizedState}function SI(o,c,h){var g=so(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},d1(o))f1(c,h);else if(h=Bb(o,c,h,g),h!==null){var w=ps();Oi(h,o,g,w),h1(h,c,g)}}function kI(o,c,h){var g=so(o),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(d1(o))f1(c,w);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var A=c.lastRenderedState,R=k(A,h);if(w.hasEagerState=!0,w.eagerState=R,Ni(R,A)){var W=c.interleaved;W===null?(w.next=w,Fp(c)):(w.next=W.next,W.next=w),c.interleaved=w;return}}catch{}finally{}h=Bb(o,c,w,g),h!==null&&(w=ps(),Oi(h,o,g,w),h1(h,c,g))}}function d1(o){var c=o.alternate;return o===Ur||c!==null&&c===Ur}function f1(o,c){fu=sf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function h1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,fe(o,h)}}var lf={readContext:li,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useInsertionEffect:ls,useLayoutEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useMutableSource:ls,useSyncExternalStore:ls,useId:ls,unstable_isNewReconciler:!1},_I={readContext:li,useCallback:function(o,c){return Gi().memoizedState=[o,c===void 0?null:c],o},useContext:li,useEffect:r1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,af(4194308,4,i1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return af(4194308,4,o,c)},useInsertionEffect:function(o,c){return af(4,2,o,c)},useMemo:function(o,c){var h=Gi();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=Gi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=SI.bind(null,Ur,o),[g.memoizedState,o]},useRef:function(o){var c=Gi();return o={current:o},c.memoizedState=o},useState:e1,useDebugValue:Xp,useDeferredValue:function(o){return Gi().memoizedState=o},useTransition:function(){var o=e1(!1),c=o[0];return o=jI.bind(null,o[1]),Gi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Ur,w=Gi();if($r){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Tn===null)throw Error(r(349));(Mo&30)!==0||Yb(g,c,h)}w.memoizedState=h;var k={value:h,getSnapshot:c};return w.queue=k,r1(Xb.bind(null,g,k,o),[o]),g.flags|=2048,pu(9,Jb.bind(null,g,k,h,c),void 0,null),h},useId:function(){var o=Gi(),c=Tn.identifierPrefix;if($r){var h=ma,g=ha;h=(g&~(1<<32-jt(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=hu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=bI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},NI={readContext:li,useCallback:o1,useContext:li,useEffect:Jp,useImperativeHandle:a1,useInsertionEffect:n1,useLayoutEffect:s1,useMemo:l1,useReducer:Gp,useRef:t1,useState:function(){return Gp(mu)},useDebugValue:Xp,useDeferredValue:function(o){var c=ci();return c1(c,gn.memoizedState,o)},useTransition:function(){var o=Gp(mu)[0],c=ci().memoizedState;return[o,c]},useMutableSource:Kb,useSyncExternalStore:Gb,useId:u1,unstable_isNewReconciler:!1},CI={readContext:li,useCallback:o1,useContext:li,useEffect:Jp,useImperativeHandle:a1,useInsertionEffect:n1,useLayoutEffect:s1,useMemo:l1,useReducer:Yp,useRef:t1,useState:function(){return Yp(mu)},useDebugValue:Xp,useDeferredValue:function(o){var c=ci();return gn===null?c.memoizedState=o:c1(c,gn.memoizedState,o)},useTransition:function(){var o=Yp(mu)[0],c=ci().memoizedState;return[o,c]},useMutableSource:Kb,useSyncExternalStore:Gb,useId:u1,unstable_isNewReconciler:!1};function Ei(o,c){if(o&&o.defaultProps){c=ce({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function Qp(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:ce({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var cf={isMounted:function(o){return(o=o._reactInternals)?Gr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=ps(),w=so(o),k=ga(g,w);k.payload=c,h!=null&&(k.callback=h),c=eo(o,k,w),c!==null&&(Oi(c,o,w,g),ef(c,o,w))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=ps(),w=so(o),k=ga(g,w);k.tag=1,k.payload=c,h!=null&&(k.callback=h),c=eo(o,k,w),c!==null&&(Oi(c,o,w,g),ef(c,o,w))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=ps(),g=so(o),w=ga(h,g);w.tag=2,c!=null&&(w.callback=c),c=eo(o,w,g),c!==null&&(Oi(c,o,g,h),ef(c,o,g))}};function m1(o,c,h,g,w,k,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,k,A):c.prototype&&c.prototype.isPureReactComponent?!tu(h,g)||!tu(w,k):!0}function p1(o,c,h){var g=!1,w=Xa,k=c.contextType;return typeof k=="object"&&k!==null?k=li(k):(w=Ns(c)?To:os.current,g=c.contextTypes,k=(g=g!=null)?Il(o,w):Xa),c=new c(h,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=cf,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=k),c}function g1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&cf.enqueueReplaceState(c,c.state,null)}function Zp(o,c,h,g){var w=o.stateNode;w.props=h,w.state=o.memoizedState,w.refs={},Lp(o);var k=c.contextType;typeof k=="object"&&k!==null?w.context=li(k):(k=Ns(c)?To:os.current,w.context=Il(o,k)),w.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Qp(o,c,k,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&cf.enqueueReplaceState(w,w.state,null),tf(o,h,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function Ul(o,c){try{var h="",g=c;do h+=me(g),g=g.return;while(g);var w=h}catch(k){w=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:w,digest:null}}function eg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function tg(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var EI=typeof WeakMap=="function"?WeakMap:Map;function y1(o,c,h){h=ga(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){gf||(gf=!0,gg=g),tg(o,c)},h}function v1(o,c,h){h=ga(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){tg(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){tg(o,c),typeof g!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),h}function x1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new EI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),o=BI.bind(null,o,c,h),c.then(o,o))}function w1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function b1(o,c,h,g,w){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=ga(-1,1),c.tag=2,eo(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var AI=O.ReactCurrentOwner,Cs=!1;function ms(o,c,h,g){c.child=o===null?Ub(c,null,h,g):Ml(c,o.child,h,g)}function j1(o,c,h,g,w){h=h.render;var k=c.ref;return Ll(c,w),g=Hp(o,c,h,g,k,w),h=Kp(),o!==null&&!Cs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,ya(o,c,w)):($r&&h&&Ap(c),c.flags|=1,ms(o,c,g,w),c.child)}function S1(o,c,h,g,w){if(o===null){var k=h.type;return typeof k=="function"&&!Sg(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=k,k1(o,c,k,g,w)):(o=jf(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&w)===0){var A=k.memoizedProps;if(h=h.compare,h=h!==null?h:tu,h(A,g)&&o.ref===c.ref)return ya(o,c,w)}return c.flags|=1,o=ao(k,g),o.ref=c.ref,o.return=c,c.child=o}function k1(o,c,h,g,w){if(o!==null){var k=o.memoizedProps;if(tu(k,g)&&o.ref===c.ref)if(Cs=!1,c.pendingProps=g=k,(o.lanes&w)!==0)(o.flags&131072)!==0&&(Cs=!0);else return c.lanes=o.lanes,ya(o,c,w)}return rg(o,c,h,g,w)}function _1(o,c,h){var g=c.pendingProps,w=g.children,k=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Wl,Bs),Bs|=h;else{if((h&1073741824)===0)return o=k!==null?k.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,jr(Wl,Bs),Bs|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:h,jr(Wl,Bs),Bs|=g}else k!==null?(g=k.baseLanes|h,c.memoizedState=null):g=h,jr(Wl,Bs),Bs|=g;return ms(o,c,w,h),c.child}function N1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function rg(o,c,h,g,w){var k=Ns(h)?To:os.current;return k=Il(c,k),Ll(c,w),h=Hp(o,c,h,g,k,w),g=Kp(),o!==null&&!Cs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,ya(o,c,w)):($r&&g&&Ap(c),c.flags|=1,ms(o,c,h,w),c.child)}function C1(o,c,h,g,w){if(Ns(h)){var k=!0;Hd(c)}else k=!1;if(Ll(c,w),c.stateNode===null)df(o,c),p1(c,h,g),Zp(c,h,g,w),g=!0;else if(o===null){var A=c.stateNode,R=c.memoizedProps;A.props=R;var W=A.context,he=h.contextType;typeof he=="object"&&he!==null?he=li(he):(he=Ns(h)?To:os.current,he=Il(c,he));var De=h.getDerivedStateFromProps,Me=typeof De=="function"||typeof A.getSnapshotBeforeUpdate=="function";Me||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(R!==g||W!==he)&&g1(c,A,g,he),Za=!1;var Ie=c.memoizedState;A.state=Ie,tf(c,g,A,w),W=c.memoizedState,R!==g||Ie!==W||_s.current||Za?(typeof De=="function"&&(Qp(c,h,De,g),W=c.memoizedState),(R=Za||m1(c,h,R,g,Ie,W,he))?(Me||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=W),A.props=g,A.state=W,A.context=he,g=R):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{A=c.stateNode,Wb(o,c),R=c.memoizedProps,he=c.type===c.elementType?R:Ei(c.type,R),A.props=he,Me=c.pendingProps,Ie=A.context,W=h.contextType,typeof W=="object"&&W!==null?W=li(W):(W=Ns(h)?To:os.current,W=Il(c,W));var Xe=h.getDerivedStateFromProps;(De=typeof Xe=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(R!==Me||Ie!==W)&&g1(c,A,g,W),Za=!1,Ie=c.memoizedState,A.state=Ie,tf(c,g,A,w);var rt=c.memoizedState;R!==Me||Ie!==rt||_s.current||Za?(typeof Xe=="function"&&(Qp(c,h,Xe,g),rt=c.memoizedState),(he=Za||m1(c,h,he,g,Ie,rt,W)||!1)?(De||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,rt,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,rt,W)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||R===o.memoizedProps&&Ie===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&Ie===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=rt),A.props=g,A.state=rt,A.context=W,g=he):(typeof A.componentDidUpdate!="function"||R===o.memoizedProps&&Ie===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&Ie===o.memoizedState||(c.flags|=1024),g=!1)}return ng(o,c,h,g,k,w)}function ng(o,c,h,g,w,k){N1(o,c);var A=(c.flags&128)!==0;if(!g&&!A)return w&&Tb(c,h,!1),ya(o,c,k);g=c.stateNode,AI.current=c;var R=A&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&A?(c.child=Ml(c,o.child,null,k),c.child=Ml(c,null,R,k)):ms(o,c,R,k),c.memoizedState=g.state,w&&Tb(c,h,!0),c.child}function E1(o){var c=o.stateNode;c.pendingContext?Pb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Pb(o,c.context,!1),zp(o,c.containerInfo)}function A1(o,c,h,g,w){return $l(),Ip(w),c.flags|=256,ms(o,c,h,g),c.child}var sg={dehydrated:null,treeContext:null,retryLane:0};function ig(o){return{baseLanes:o,cachePool:null,transitions:null}}function P1(o,c,h){var g=c.pendingProps,w=zr.current,k=!1,A=(c.flags&128)!==0,R;if((R=A)||(R=o!==null&&o.memoizedState===null?!1:(w&2)!==0),R?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),jr(zr,w&1),o===null)return Tp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=g.children,o=g.fallback,k?(g=c.mode,k=c.child,A={mode:"hidden",children:A},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=A):k=Sf(A,g,0,null),o=Bo(o,g,h,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=ig(h),c.memoizedState=sg,o):ag(c,A));if(w=o.memoizedState,w!==null&&(R=w.dehydrated,R!==null))return PI(o,c,A,g,R,w,h);if(k){k=g.fallback,A=c.mode,w=o.child,R=w.sibling;var W={mode:"hidden",children:g.children};return(A&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=W,c.deletions=null):(g=ao(w,W),g.subtreeFlags=w.subtreeFlags&14680064),R!==null?k=ao(R,k):(k=Bo(k,A,h,null),k.flags|=2),k.return=c,g.return=c,g.sibling=k,c.child=g,g=k,k=c.child,A=o.child.memoizedState,A=A===null?ig(h):{baseLanes:A.baseLanes|h,cachePool:null,transitions:A.transitions},k.memoizedState=A,k.childLanes=o.childLanes&~h,c.memoizedState=sg,g}return k=o.child,o=k.sibling,g=ao(k,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function ag(o,c){return c=Sf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function uf(o,c,h,g){return g!==null&&Ip(g),Ml(c,o.child,null,h),o=ag(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function PI(o,c,h,g,w,k,A){if(h)return c.flags&256?(c.flags&=-257,g=eg(Error(r(422))),uf(o,c,A,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=g.fallback,w=c.mode,g=Sf({mode:"visible",children:g.children},w,0,null),k=Bo(k,w,A,null),k.flags|=2,g.return=c,k.return=c,g.sibling=k,c.child=g,(c.mode&1)!==0&&Ml(c,o.child,null,A),c.child.memoizedState=ig(A),c.memoizedState=sg,k);if((c.mode&1)===0)return uf(o,c,A,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var R=g.dgst;return g=R,k=Error(r(419)),g=eg(k,g,void 0),uf(o,c,A,g)}if(R=(A&o.childLanes)!==0,Cs||R){if(g=Tn,g!==null){switch(A&-A){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|A))!==0?0:w,w!==0&&w!==k.retryLane&&(k.retryLane=w,pa(o,w),Oi(g,o,w,-1))}return jg(),g=eg(Error(r(421))),uf(o,c,A,g)}return w.data==="$?"?(c.flags|=128,c.child=o.child,c=WI.bind(null,o),w._reactRetry=c,null):(o=k.treeContext,Us=Ya(w.nextSibling),zs=c,$r=!0,Ci=null,o!==null&&(ai[oi++]=ha,ai[oi++]=ma,ai[oi++]=Io,ha=o.id,ma=o.overflow,Io=c),c=ag(c,g.children),c.flags|=4096,c)}function O1(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Mp(o.return,c,h)}function og(o,c,h,g,w){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=h,k.tailMode=w)}function T1(o,c,h){var g=c.pendingProps,w=g.revealOrder,k=g.tail;if(ms(o,c,g.children,h),g=zr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&O1(o,h,c);else if(o.tag===19)O1(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(jr(zr,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&rf(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),og(c,!1,w,h,k);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&rf(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}og(c,!0,h,null,k);break;case"together":og(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function df(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function ya(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Fo|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=ao(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=ao(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function OI(o,c,h){switch(c.tag){case 3:E1(c),$l();break;case 5:Hb(c);break;case 1:Ns(c.type)&&Hd(c);break;case 4:zp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;jr(Qd,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(jr(zr,zr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?P1(o,c,h):(jr(zr,zr.current&1),o=ya(o,c,h),o!==null?o.sibling:null);jr(zr,zr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return T1(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),jr(zr,zr.current),g)break;return null;case 22:case 23:return c.lanes=0,_1(o,c,h)}return ya(o,c,h)}var I1,lg,D1,R1;I1=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},lg=function(){},D1=function(o,c,h,g){var w=o.memoizedProps;if(w!==g){o=c.stateNode,$o(Ki.current);var k=null;switch(h){case"input":w=Ke(o,w),g=Ke(o,g),k=[];break;case"select":w=ce({},w,{value:void 0}),g=ce({},g,{value:void 0}),k=[];break;case"textarea":w=de(o,w),g=de(o,g),k=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Wd)}sr(h,g);var A;h=null;for(he in w)if(!g.hasOwnProperty(he)&&w.hasOwnProperty(he)&&w[he]!=null)if(he==="style"){var R=w[he];for(A in R)R.hasOwnProperty(A)&&(h||(h={}),h[A]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(s.hasOwnProperty(he)?k||(k=[]):(k=k||[]).push(he,null));for(he in g){var W=g[he];if(R=w!=null?w[he]:void 0,g.hasOwnProperty(he)&&W!==R&&(W!=null||R!=null))if(he==="style")if(R){for(A in R)!R.hasOwnProperty(A)||W&&W.hasOwnProperty(A)||(h||(h={}),h[A]="");for(A in W)W.hasOwnProperty(A)&&R[A]!==W[A]&&(h||(h={}),h[A]=W[A])}else h||(k||(k=[]),k.push(he,h)),h=W;else he==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,R=R?R.__html:void 0,W!=null&&R!==W&&(k=k||[]).push(he,W)):he==="children"?typeof W!="string"&&typeof W!="number"||(k=k||[]).push(he,""+W):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(s.hasOwnProperty(he)?(W!=null&&he==="onScroll"&&Er("scroll",o),k||R===W||(k=[])):(k=k||[]).push(he,W))}h&&(k=k||[]).push("style",h);var he=k;(c.updateQueue=he)&&(c.flags|=4)}},R1=function(o,c,h,g){h!==g&&(c.flags|=4)};function gu(o,c){if(!$r)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function cs(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function TI(o,c,h){var g=c.pendingProps;switch(Pp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(c),null;case 1:return Ns(c.type)&&Vd(),cs(c),null;case 3:return g=c.stateNode,zl(),Ar(_s),Ar(os),Wp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Jd(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ci!==null&&(xg(Ci),Ci=null))),lg(o,c),cs(c),null;case 5:Up(c);var w=$o(du.current);if(h=c.type,o!==null&&c.stateNode!=null)D1(o,c,h,g,w),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return cs(c),null}if(o=$o(Ki.current),Jd(c)){g=c.stateNode,h=c.type;var k=c.memoizedProps;switch(g[Hi]=c,g[au]=k,o=(c.mode&1)!==0,h){case"dialog":Er("cancel",g),Er("close",g);break;case"iframe":case"object":case"embed":Er("load",g);break;case"video":case"audio":for(w=0;w<nu.length;w++)Er(nu[w],g);break;case"source":Er("error",g);break;case"img":case"image":case"link":Er("error",g),Er("load",g);break;case"details":Er("toggle",g);break;case"input":Pt(g,k),Er("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},Er("invalid",g);break;case"textarea":Ne(g,k),Er("invalid",g)}sr(h,k),w=null;for(var A in k)if(k.hasOwnProperty(A)){var R=k[A];A==="children"?typeof R=="string"?g.textContent!==R&&(k.suppressHydrationWarning!==!0&&Bd(g.textContent,R,o),w=["children",R]):typeof R=="number"&&g.textContent!==""+R&&(k.suppressHydrationWarning!==!0&&Bd(g.textContent,R,o),w=["children",""+R]):s.hasOwnProperty(A)&&R!=null&&A==="onScroll"&&Er("scroll",g)}switch(h){case"input":Ge(g),Rt(g,k,!0);break;case"textarea":Ge(g),ke(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=Wd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{A=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ve(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=A.createElement(h,{is:g.is}):(o=A.createElement(h),h==="select"&&(A=o,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):o=A.createElementNS(o,h),o[Hi]=c,o[au]=g,I1(o,c,!1,!1),c.stateNode=o;e:{switch(A=Cn(h,g),h){case"dialog":Er("cancel",o),Er("close",o),w=g;break;case"iframe":case"object":case"embed":Er("load",o),w=g;break;case"video":case"audio":for(w=0;w<nu.length;w++)Er(nu[w],o);w=g;break;case"source":Er("error",o),w=g;break;case"img":case"image":case"link":Er("error",o),Er("load",o),w=g;break;case"details":Er("toggle",o),w=g;break;case"input":Pt(o,g),w=Ke(o,g),Er("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=ce({},g,{value:void 0}),Er("invalid",o);break;case"textarea":Ne(o,g),w=de(o,g),Er("invalid",o);break;default:w=g}sr(h,w),R=w;for(k in R)if(R.hasOwnProperty(k)){var W=R[k];k==="style"?Bt(o,W):k==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&$t(o,W)):k==="children"?typeof W=="string"?(h!=="textarea"||W!=="")&&yr(o,W):typeof W=="number"&&yr(o,""+W):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?W!=null&&k==="onScroll"&&Er("scroll",o):W!=null&&C(o,k,W,A))}switch(h){case"input":Ge(o),Rt(o,g,!1);break;case"textarea":Ge(o),ke(o);break;case"option":g.value!=null&&o.setAttribute("value",""+je(g.value));break;case"select":o.multiple=!!g.multiple,k=g.value,k!=null?Q(o,!!g.multiple,k,!1):g.defaultValue!=null&&Q(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=Wd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return cs(c),null;case 6:if(o&&c.stateNode!=null)R1(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=$o(du.current),$o(Ki.current),Jd(c)){if(g=c.stateNode,h=c.memoizedProps,g[Hi]=c,(k=g.nodeValue!==h)&&(o=zs,o!==null))switch(o.tag){case 3:Bd(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Bd(g.nodeValue,h,(o.mode&1)!==0)}k&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Hi]=c,c.stateNode=g}return cs(c),null;case 13:if(Ar(zr),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if($r&&Us!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Fb(),$l(),c.flags|=98560,k=!1;else if(k=Jd(c),g!==null&&g.dehydrated!==null){if(o===null){if(!k)throw Error(r(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[Hi]=c}else $l(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cs(c),k=!1}else Ci!==null&&(xg(Ci),Ci=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(zr.current&1)!==0?yn===0&&(yn=3):jg())),c.updateQueue!==null&&(c.flags|=4),cs(c),null);case 4:return zl(),lg(o,c),o===null&&su(c.stateNode.containerInfo),cs(c),null;case 10:return $p(c.type._context),cs(c),null;case 17:return Ns(c.type)&&Vd(),cs(c),null;case 19:if(Ar(zr),k=c.memoizedState,k===null)return cs(c),null;if(g=(c.flags&128)!==0,A=k.rendering,A===null)if(g)gu(k,!1);else{if(yn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(A=rf(o),A!==null){for(c.flags|=128,gu(k,!1),g=A.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)k=h,o=g,k.flags&=14680066,A=k.alternate,A===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=A.childLanes,k.lanes=A.lanes,k.child=A.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=A.memoizedProps,k.memoizedState=A.memoizedState,k.updateQueue=A.updateQueue,k.type=A.type,o=A.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return jr(zr,zr.current&1|2),c.child}o=o.sibling}k.tail!==null&&Wt()>ql&&(c.flags|=128,g=!0,gu(k,!1),c.lanes=4194304)}else{if(!g)if(o=rf(A),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),gu(k,!0),k.tail===null&&k.tailMode==="hidden"&&!A.alternate&&!$r)return cs(c),null}else 2*Wt()-k.renderingStartTime>ql&&h!==1073741824&&(c.flags|=128,g=!0,gu(k,!1),c.lanes=4194304);k.isBackwards?(A.sibling=c.child,c.child=A):(h=k.last,h!==null?h.sibling=A:c.child=A,k.last=A)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=Wt(),c.sibling=null,h=zr.current,jr(zr,g?h&1|2:h&1),c):(cs(c),null);case 22:case 23:return bg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Bs&1073741824)!==0&&(cs(c),c.subtreeFlags&6&&(c.flags|=8192)):cs(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function II(o,c){switch(Pp(c),c.tag){case 1:return Ns(c.type)&&Vd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return zl(),Ar(_s),Ar(os),Wp(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Up(c),null;case 13:if(Ar(zr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));$l()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ar(zr),null;case 4:return zl(),null;case 10:return $p(c.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var ff=!1,us=!1,DI=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Bl(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Vr(o,c,g)}else h.current=null}function cg(o,c,h){try{h()}catch(g){Vr(o,c,g)}}var $1=!1;function RI(o,c){if(bp=Ao,o=mb(),hp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var A=0,R=-1,W=-1,he=0,De=0,Me=o,Ie=null;t:for(;;){for(var Xe;Me!==h||w!==0&&Me.nodeType!==3||(R=A+w),Me!==k||g!==0&&Me.nodeType!==3||(W=A+g),Me.nodeType===3&&(A+=Me.nodeValue.length),(Xe=Me.firstChild)!==null;)Ie=Me,Me=Xe;for(;;){if(Me===o)break t;if(Ie===h&&++he===w&&(R=A),Ie===k&&++De===g&&(W=A),(Xe=Me.nextSibling)!==null)break;Me=Ie,Ie=Me.parentNode}Me=Xe}h=R===-1||W===-1?null:{start:R,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(jp={focusedElem:o,selectionRange:h},Ao=!1,Ze=c;Ze!==null;)if(c=Ze,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ze=o;else for(;Ze!==null;){c=Ze;try{var rt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var st=rt.memoizedProps,Jr=rt.memoizedState,oe=c.stateNode,J=oe.getSnapshotBeforeUpdate(c.elementType===c.type?st:Ei(c.type,st),Jr);oe.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Le){Vr(c,c.return,Le)}if(o=c.sibling,o!==null){o.return=c.return,Ze=o;break}Ze=c.return}return rt=$1,$1=!1,rt}function yu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var k=w.destroy;w.destroy=void 0,k!==void 0&&cg(c,h,k)}w=w.next}while(w!==g)}}function hf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function ug(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function M1(o){var c=o.alternate;c!==null&&(o.alternate=null,M1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Hi],delete c[au],delete c[Np],delete c[yI],delete c[vI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function F1(o){return o.tag===5||o.tag===3||o.tag===4}function L1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||F1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function dg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Wd));else if(g!==4&&(o=o.child,o!==null))for(dg(o,c,h),o=o.sibling;o!==null;)dg(o,c,h),o=o.sibling}function fg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(fg(o,c,h),o=o.sibling;o!==null;)fg(o,c,h),o=o.sibling}var Yn=null,Ai=!1;function to(o,c,h){for(h=h.child;h!==null;)z1(o,c,h),h=h.sibling}function z1(o,c,h){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ee,h)}catch{}switch(h.tag){case 5:us||Bl(h,c);case 6:var g=Yn,w=Ai;Yn=null,to(o,c,h),Yn=g,Ai=w,Yn!==null&&(Ai?(o=Yn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Yn.removeChild(h.stateNode));break;case 18:Yn!==null&&(Ai?(o=Yn,h=h.stateNode,o.nodeType===8?_p(o.parentNode,h):o.nodeType===1&&_p(o,h),hs(o)):_p(Yn,h.stateNode));break;case 4:g=Yn,w=Ai,Yn=h.stateNode.containerInfo,Ai=!0,to(o,c,h),Yn=g,Ai=w;break;case 0:case 11:case 14:case 15:if(!us&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var k=w,A=k.destroy;k=k.tag,A!==void 0&&((k&2)!==0||(k&4)!==0)&&cg(h,c,A),w=w.next}while(w!==g)}to(o,c,h);break;case 1:if(!us&&(Bl(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(R){Vr(h,c,R)}to(o,c,h);break;case 21:to(o,c,h);break;case 22:h.mode&1?(us=(g=us)||h.memoizedState!==null,to(o,c,h),us=g):to(o,c,h);break;default:to(o,c,h)}}function U1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new DI),c.forEach(function(g){var w=qI.bind(null,o,g);h.has(g)||(h.add(g),g.then(w,w))})}}function Pi(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var k=o,A=c,R=A;e:for(;R!==null;){switch(R.tag){case 5:Yn=R.stateNode,Ai=!1;break e;case 3:Yn=R.stateNode.containerInfo,Ai=!0;break e;case 4:Yn=R.stateNode.containerInfo,Ai=!0;break e}R=R.return}if(Yn===null)throw Error(r(160));z1(k,A,w),Yn=null,Ai=!1;var W=w.alternate;W!==null&&(W.return=null),w.return=null}catch(he){Vr(w,c,he)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)B1(c,o),c=c.sibling}function B1(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Pi(c,o),Yi(o),g&4){try{yu(3,o,o.return),hf(3,o)}catch(st){Vr(o,o.return,st)}try{yu(5,o,o.return)}catch(st){Vr(o,o.return,st)}}break;case 1:Pi(c,o),Yi(o),g&512&&h!==null&&Bl(h,h.return);break;case 5:if(Pi(c,o),Yi(o),g&512&&h!==null&&Bl(h,h.return),o.flags&32){var w=o.stateNode;try{yr(w,"")}catch(st){Vr(o,o.return,st)}}if(g&4&&(w=o.stateNode,w!=null)){var k=o.memoizedProps,A=h!==null?h.memoizedProps:k,R=o.type,W=o.updateQueue;if(o.updateQueue=null,W!==null)try{R==="input"&&k.type==="radio"&&k.name!=null&&vt(w,k),Cn(R,A);var he=Cn(R,k);for(A=0;A<W.length;A+=2){var De=W[A],Me=W[A+1];De==="style"?Bt(w,Me):De==="dangerouslySetInnerHTML"?$t(w,Me):De==="children"?yr(w,Me):C(w,De,Me,he)}switch(R){case"input":qt(w,k);break;case"textarea":pe(w,k);break;case"select":var Ie=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!k.multiple;var Xe=k.value;Xe!=null?Q(w,!!k.multiple,Xe,!1):Ie!==!!k.multiple&&(k.defaultValue!=null?Q(w,!!k.multiple,k.defaultValue,!0):Q(w,!!k.multiple,k.multiple?[]:"",!1))}w[au]=k}catch(st){Vr(o,o.return,st)}}break;case 6:if(Pi(c,o),Yi(o),g&4){if(o.stateNode===null)throw Error(r(162));w=o.stateNode,k=o.memoizedProps;try{w.nodeValue=k}catch(st){Vr(o,o.return,st)}}break;case 3:if(Pi(c,o),Yi(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{hs(c.containerInfo)}catch(st){Vr(o,o.return,st)}break;case 4:Pi(c,o),Yi(o);break;case 13:Pi(c,o),Yi(o),w=o.child,w.flags&8192&&(k=w.memoizedState!==null,w.stateNode.isHidden=k,!k||w.alternate!==null&&w.alternate.memoizedState!==null||(pg=Wt())),g&4&&U1(o);break;case 22:if(De=h!==null&&h.memoizedState!==null,o.mode&1?(us=(he=us)||De,Pi(c,o),us=he):Pi(c,o),Yi(o),g&8192){if(he=o.memoizedState!==null,(o.stateNode.isHidden=he)&&!De&&(o.mode&1)!==0)for(Ze=o,De=o.child;De!==null;){for(Me=Ze=De;Ze!==null;){switch(Ie=Ze,Xe=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:yu(4,Ie,Ie.return);break;case 1:Bl(Ie,Ie.return);var rt=Ie.stateNode;if(typeof rt.componentWillUnmount=="function"){g=Ie,h=Ie.return;try{c=g,rt.props=c.memoizedProps,rt.state=c.memoizedState,rt.componentWillUnmount()}catch(st){Vr(g,h,st)}}break;case 5:Bl(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){V1(Me);continue}}Xe!==null?(Xe.return=Ie,Ze=Xe):V1(Me)}De=De.sibling}e:for(De=null,Me=o;;){if(Me.tag===5){if(De===null){De=Me;try{w=Me.stateNode,he?(k=w.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(R=Me.stateNode,W=Me.memoizedProps.style,A=W!=null&&W.hasOwnProperty("display")?W.display:null,R.style.display=dr("display",A))}catch(st){Vr(o,o.return,st)}}}else if(Me.tag===6){if(De===null)try{Me.stateNode.nodeValue=he?"":Me.memoizedProps}catch(st){Vr(o,o.return,st)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===o)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===o)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===o)break e;De===Me&&(De=null),Me=Me.return}De===Me&&(De=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:Pi(c,o),Yi(o),g&4&&U1(o);break;case 21:break;default:Pi(c,o),Yi(o)}}function Yi(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(F1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(yr(w,""),g.flags&=-33);var k=L1(o);fg(o,k,w);break;case 3:case 4:var A=g.stateNode.containerInfo,R=L1(o);dg(o,R,A);break;default:throw Error(r(161))}}catch(W){Vr(o,o.return,W)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function $I(o,c,h){Ze=o,W1(o)}function W1(o,c,h){for(var g=(o.mode&1)!==0;Ze!==null;){var w=Ze,k=w.child;if(w.tag===22&&g){var A=w.memoizedState!==null||ff;if(!A){var R=w.alternate,W=R!==null&&R.memoizedState!==null||us;R=ff;var he=us;if(ff=A,(us=W)&&!he)for(Ze=w;Ze!==null;)A=Ze,W=A.child,A.tag===22&&A.memoizedState!==null?H1(w):W!==null?(W.return=A,Ze=W):H1(w);for(;k!==null;)Ze=k,W1(k),k=k.sibling;Ze=w,ff=R,us=he}q1(o)}else(w.subtreeFlags&8772)!==0&&k!==null?(k.return=w,Ze=k):q1(o)}}function q1(o){for(;Ze!==null;){var c=Ze;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:us||hf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!us)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:Ei(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&Vb(c,k,g);break;case 3:var A=c.updateQueue;if(A!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Vb(c,A,h)}break;case 5:var R=c.stateNode;if(h===null&&c.flags&4){h=R;var W=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&h.focus();break;case"img":W.src&&(h.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var he=c.alternate;if(he!==null){var De=he.memoizedState;if(De!==null){var Me=De.dehydrated;Me!==null&&hs(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}us||c.flags&512&&ug(c)}catch(Ie){Vr(c,c.return,Ie)}}if(c===o){Ze=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ze=h;break}Ze=c.return}}function V1(o){for(;Ze!==null;){var c=Ze;if(c===o){Ze=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ze=h;break}Ze=c.return}}function H1(o){for(;Ze!==null;){var c=Ze;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{hf(4,c)}catch(W){Vr(c,h,W)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(W){Vr(c,w,W)}}var k=c.return;try{ug(c)}catch(W){Vr(c,k,W)}break;case 5:var A=c.return;try{ug(c)}catch(W){Vr(c,A,W)}}}catch(W){Vr(c,c.return,W)}if(c===o){Ze=null;break}var R=c.sibling;if(R!==null){R.return=c.return,Ze=R;break}Ze=c.return}}var MI=Math.ceil,mf=O.ReactCurrentDispatcher,hg=O.ReactCurrentOwner,ui=O.ReactCurrentBatchConfig,Gt=0,Tn=null,an=null,Jn=0,Bs=0,Wl=Ja(0),yn=0,vu=null,Fo=0,pf=0,mg=0,xu=null,Es=null,pg=0,ql=1/0,va=null,gf=!1,gg=null,ro=null,yf=!1,no=null,vf=0,wu=0,yg=null,xf=-1,wf=0;function ps(){return(Gt&6)!==0?Wt():xf!==-1?xf:xf=Wt()}function so(o){return(o.mode&1)===0?1:(Gt&2)!==0&&Jn!==0?Jn&-Jn:wI.transition!==null?(wf===0&&(wf=ki()),wf):(o=ge,o!==0||(o=window.event,o=o===void 0?16:X(o.type)),o)}function Oi(o,c,h,g){if(50<wu)throw wu=0,yg=null,Error(r(185));fs(o,h,g),((Gt&2)===0||o!==Tn)&&(o===Tn&&((Gt&2)===0&&(pf|=h),yn===4&&io(o,Jn)),As(o,g),h===1&&Gt===0&&(c.mode&1)===0&&(ql=Wt()+500,Kd&&Qa()))}function As(o,c){var h=o.callbackNode;ua(o,c);var g=si(o,o===Tn?Jn:0);if(g===0)h!==null&&sn(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&sn(h),c===1)o.tag===0?xI(G1.bind(null,o)):Ib(G1.bind(null,o)),pI(function(){(Gt&6)===0&&Qa()}),h=null;else{switch($e(g)){case 1:h=Y;break;case 4:h=Se;break;case 16:h=Te;break;case 536870912:h=Qe;break;default:h=Te}h=rj(h,K1.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function K1(o,c){if(xf=-1,wf=0,(Gt&6)!==0)throw Error(r(327));var h=o.callbackNode;if(Vl()&&o.callbackNode!==h)return null;var g=si(o,o===Tn?Jn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=bf(o,g);else{c=g;var w=Gt;Gt|=2;var k=J1();(Tn!==o||Jn!==c)&&(va=null,ql=Wt()+500,zo(o,c));do try{zI();break}catch(R){Y1(o,R)}while(!0);Rp(),mf.current=k,Gt=w,an!==null?c=0:(Tn=null,Jn=0,c=yn)}if(c!==0){if(c===2&&(w=ii(o),w!==0&&(g=w,c=vg(o,w))),c===1)throw h=vu,zo(o,0),io(o,g),As(o,Wt()),h;if(c===6)io(o,g);else{if(w=o.current.alternate,(g&30)===0&&!FI(w)&&(c=bf(o,g),c===2&&(k=ii(o),k!==0&&(g=k,c=vg(o,k))),c===1))throw h=vu,zo(o,0),io(o,g),As(o,Wt()),h;switch(o.finishedWork=w,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:Uo(o,Es,va);break;case 3:if(io(o,g),(g&130023424)===g&&(c=pg+500-Wt(),10<c)){if(si(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){ps(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=kp(Uo.bind(null,o,Es,va),c);break}Uo(o,Es,va);break;case 4:if(io(o,g),(g&4194240)===g)break;for(c=o.eventTimes,w=-1;0<g;){var A=31-jt(g);k=1<<A,A=c[A],A>w&&(w=A),g&=~k}if(g=w,g=Wt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*MI(g/1960))-g,10<g){o.timeoutHandle=kp(Uo.bind(null,o,Es,va),g);break}Uo(o,Es,va);break;case 5:Uo(o,Es,va);break;default:throw Error(r(329))}}}return As(o,Wt()),o.callbackNode===h?K1.bind(null,o):null}function vg(o,c){var h=xu;return o.current.memoizedState.isDehydrated&&(zo(o,c).flags|=256),o=bf(o,c),o!==2&&(c=Es,Es=h,c!==null&&xg(c)),o}function xg(o){Es===null?Es=o:Es.push.apply(Es,o)}function FI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],k=w.getSnapshot;w=w.value;try{if(!Ni(k(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function io(o,c){for(c&=~mg,c&=~pf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-jt(c),g=1<<h;o[h]=-1,c&=~g}}function G1(o){if((Gt&6)!==0)throw Error(r(327));Vl();var c=si(o,0);if((c&1)===0)return As(o,Wt()),null;var h=bf(o,c);if(o.tag!==0&&h===2){var g=ii(o);g!==0&&(c=g,h=vg(o,g))}if(h===1)throw h=vu,zo(o,0),io(o,c),As(o,Wt()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Uo(o,Es,va),As(o,Wt()),null}function wg(o,c){var h=Gt;Gt|=1;try{return o(c)}finally{Gt=h,Gt===0&&(ql=Wt()+500,Kd&&Qa())}}function Lo(o){no!==null&&no.tag===0&&(Gt&6)===0&&Vl();var c=Gt;Gt|=1;var h=ui.transition,g=ge;try{if(ui.transition=null,ge=1,o)return o()}finally{ge=g,ui.transition=h,Gt=c,(Gt&6)===0&&Qa()}}function bg(){Bs=Wl.current,Ar(Wl)}function zo(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,mI(h)),an!==null)for(h=an.return;h!==null;){var g=h;switch(Pp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Vd();break;case 3:zl(),Ar(_s),Ar(os),Wp();break;case 5:Up(g);break;case 4:zl();break;case 13:Ar(zr);break;case 19:Ar(zr);break;case 10:$p(g.type._context);break;case 22:case 23:bg()}h=h.return}if(Tn=o,an=o=ao(o.current,null),Jn=Bs=c,yn=0,vu=null,mg=pf=Fo=0,Es=xu=null,Ro!==null){for(c=0;c<Ro.length;c++)if(h=Ro[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,k=h.pending;if(k!==null){var A=k.next;k.next=w,g.next=A}h.pending=g}Ro=null}return o}function Y1(o,c){do{var h=an;try{if(Rp(),nf.current=lf,sf){for(var g=Ur.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}sf=!1}if(Mo=0,On=gn=Ur=null,fu=!1,hu=0,hg.current=null,h===null||h.return===null){yn=1,vu=c,an=null;break}e:{var k=o,A=h.return,R=h,W=c;if(c=Jn,R.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var he=W,De=R,Me=De.tag;if((De.mode&1)===0&&(Me===0||Me===11||Me===15)){var Ie=De.alternate;Ie?(De.updateQueue=Ie.updateQueue,De.memoizedState=Ie.memoizedState,De.lanes=Ie.lanes):(De.updateQueue=null,De.memoizedState=null)}var Xe=w1(A);if(Xe!==null){Xe.flags&=-257,b1(Xe,A,R,k,c),Xe.mode&1&&x1(k,he,c),c=Xe,W=he;var rt=c.updateQueue;if(rt===null){var st=new Set;st.add(W),c.updateQueue=st}else rt.add(W);break e}else{if((c&1)===0){x1(k,he,c),jg();break e}W=Error(r(426))}}else if($r&&R.mode&1){var Jr=w1(A);if(Jr!==null){(Jr.flags&65536)===0&&(Jr.flags|=256),b1(Jr,A,R,k,c),Ip(Ul(W,R));break e}}k=W=Ul(W,R),yn!==4&&(yn=2),xu===null?xu=[k]:xu.push(k),k=A;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var oe=y1(k,W,c);qb(k,oe);break e;case 1:R=W;var J=k.type,ue=k.stateNode;if((k.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(ro===null||!ro.has(ue)))){k.flags|=65536,c&=-c,k.lanes|=c;var Le=v1(k,R,c);qb(k,Le);break e}}k=k.return}while(k!==null)}Q1(h)}catch(at){c=at,an===h&&h!==null&&(an=h=h.return);continue}break}while(!0)}function J1(){var o=mf.current;return mf.current=lf,o===null?lf:o}function jg(){(yn===0||yn===3||yn===2)&&(yn=4),Tn===null||(Fo&268435455)===0&&(pf&268435455)===0||io(Tn,Jn)}function bf(o,c){var h=Gt;Gt|=2;var g=J1();(Tn!==o||Jn!==c)&&(va=null,zo(o,c));do try{LI();break}catch(w){Y1(o,w)}while(!0);if(Rp(),Gt=h,mf.current=g,an!==null)throw Error(r(261));return Tn=null,Jn=0,yn}function LI(){for(;an!==null;)X1(an)}function zI(){for(;an!==null&&!Ls();)X1(an)}function X1(o){var c=tj(o.alternate,o,Bs);o.memoizedProps=o.pendingProps,c===null?Q1(o):an=c,hg.current=null}function Q1(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=TI(h,c,Bs),h!==null){an=h;return}}else{if(h=II(h,c),h!==null){h.flags&=32767,an=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{yn=6,an=null;return}}if(c=c.sibling,c!==null){an=c;return}an=c=o}while(c!==null);yn===0&&(yn=5)}function Uo(o,c,h){var g=ge,w=ui.transition;try{ui.transition=null,ge=1,UI(o,c,h,g)}finally{ui.transition=w,ge=g}return null}function UI(o,c,h,g){do Vl();while(no!==null);if((Gt&6)!==0)throw Error(r(327));h=o.finishedWork;var w=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var k=h.lanes|h.childLanes;if(te(o,k),o===Tn&&(an=Tn=null,Jn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||yf||(yf=!0,rj(Te,function(){return Vl(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=ui.transition,ui.transition=null;var A=ge;ge=1;var R=Gt;Gt|=4,hg.current=null,RI(o,h),B1(h,o),oI(jp),Ao=!!bp,jp=bp=null,o.current=h,$I(h),Si(),Gt=R,ge=A,ui.transition=k}else o.current=h;if(yf&&(yf=!1,no=o,vf=w),k=o.pendingLanes,k===0&&(ro=null),kt(h.stateNode),As(o,Wt()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(gf)throw gf=!1,o=gg,gg=null,o;return(vf&1)!==0&&o.tag!==0&&Vl(),k=o.pendingLanes,(k&1)!==0?o===yg?wu++:(wu=0,yg=o):wu=0,Qa(),null}function Vl(){if(no!==null){var o=$e(vf),c=ui.transition,h=ge;try{if(ui.transition=null,ge=16>o?16:o,no===null)var g=!1;else{if(o=no,no=null,vf=0,(Gt&6)!==0)throw Error(r(331));var w=Gt;for(Gt|=4,Ze=o.current;Ze!==null;){var k=Ze,A=k.child;if((Ze.flags&16)!==0){var R=k.deletions;if(R!==null){for(var W=0;W<R.length;W++){var he=R[W];for(Ze=he;Ze!==null;){var De=Ze;switch(De.tag){case 0:case 11:case 15:yu(8,De,k)}var Me=De.child;if(Me!==null)Me.return=De,Ze=Me;else for(;Ze!==null;){De=Ze;var Ie=De.sibling,Xe=De.return;if(M1(De),De===he){Ze=null;break}if(Ie!==null){Ie.return=Xe,Ze=Ie;break}Ze=Xe}}}var rt=k.alternate;if(rt!==null){var st=rt.child;if(st!==null){rt.child=null;do{var Jr=st.sibling;st.sibling=null,st=Jr}while(st!==null)}}Ze=k}}if((k.subtreeFlags&2064)!==0&&A!==null)A.return=k,Ze=A;else e:for(;Ze!==null;){if(k=Ze,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:yu(9,k,k.return)}var oe=k.sibling;if(oe!==null){oe.return=k.return,Ze=oe;break e}Ze=k.return}}var J=o.current;for(Ze=J;Ze!==null;){A=Ze;var ue=A.child;if((A.subtreeFlags&2064)!==0&&ue!==null)ue.return=A,Ze=ue;else e:for(A=J;Ze!==null;){if(R=Ze,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:hf(9,R)}}catch(at){Vr(R,R.return,at)}if(R===A){Ze=null;break e}var Le=R.sibling;if(Le!==null){Le.return=R.return,Ze=Le;break e}Ze=R.return}}if(Gt=w,Qa(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ee,o)}catch{}g=!0}return g}finally{ge=h,ui.transition=c}}return!1}function Z1(o,c,h){c=Ul(h,c),c=y1(o,c,1),o=eo(o,c,1),c=ps(),o!==null&&(fs(o,1,c),As(o,c))}function Vr(o,c,h){if(o.tag===3)Z1(o,o,h);else for(;c!==null;){if(c.tag===3){Z1(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ro===null||!ro.has(g))){o=Ul(h,o),o=v1(c,o,1),c=eo(c,o,1),o=ps(),c!==null&&(fs(c,1,o),As(c,o));break}}c=c.return}}function BI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=ps(),o.pingedLanes|=o.suspendedLanes&h,Tn===o&&(Jn&h)===h&&(yn===4||yn===3&&(Jn&130023424)===Jn&&500>Wt()-pg?zo(o,0):mg|=h),As(o,c)}function ej(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ct,Ct<<=1,(Ct&130023424)===0&&(Ct=4194304)));var h=ps();o=pa(o,c),o!==null&&(fs(o,c,h),As(o,h))}function WI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),ej(o,h)}function qI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),ej(o,h)}var tj;tj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||_s.current)Cs=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Cs=!1,OI(o,c,h);Cs=(o.flags&131072)!==0}else Cs=!1,$r&&(c.flags&1048576)!==0&&Db(c,Yd,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;df(o,c),o=c.pendingProps;var w=Il(c,os.current);Ll(c,h),w=Hp(null,c,g,o,w,h);var k=Kp();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ns(g)?(k=!0,Hd(c)):k=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Lp(c),w.updater=cf,c.stateNode=w,w._reactInternals=c,Zp(c,g,o,h),c=ng(null,c,g,!0,k,h)):(c.tag=0,$r&&k&&Ap(c),ms(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(df(o,c),o=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=HI(g),o=Ei(g,o),w){case 0:c=rg(null,c,g,o,h);break e;case 1:c=C1(null,c,g,o,h);break e;case 11:c=j1(null,c,g,o,h);break e;case 14:c=S1(null,c,g,Ei(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Ei(g,w),rg(o,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Ei(g,w),C1(o,c,g,w,h);case 3:e:{if(E1(c),o===null)throw Error(r(387));g=c.pendingProps,k=c.memoizedState,w=k.element,Wb(o,c),tf(c,g,null,h);var A=c.memoizedState;if(g=A.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){w=Ul(Error(r(423)),c),c=A1(o,c,g,h,w);break e}else if(g!==w){w=Ul(Error(r(424)),c),c=A1(o,c,g,h,w);break e}else for(Us=Ya(c.stateNode.containerInfo.firstChild),zs=c,$r=!0,Ci=null,h=Ub(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if($l(),g===w){c=ya(o,c,h);break e}ms(o,c,g,h)}c=c.child}return c;case 5:return Hb(c),o===null&&Tp(c),g=c.type,w=c.pendingProps,k=o!==null?o.memoizedProps:null,A=w.children,Sp(g,w)?A=null:k!==null&&Sp(g,k)&&(c.flags|=32),N1(o,c),ms(o,c,A,h),c.child;case 6:return o===null&&Tp(c),null;case 13:return P1(o,c,h);case 4:return zp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Ml(c,null,g,h):ms(o,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Ei(g,w),j1(o,c,g,w,h);case 7:return ms(o,c,c.pendingProps,h),c.child;case 8:return ms(o,c,c.pendingProps.children,h),c.child;case 12:return ms(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,k=c.memoizedProps,A=w.value,jr(Qd,g._currentValue),g._currentValue=A,k!==null)if(Ni(k.value,A)){if(k.children===w.children&&!_s.current){c=ya(o,c,h);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var R=k.dependencies;if(R!==null){A=k.child;for(var W=R.firstContext;W!==null;){if(W.context===g){if(k.tag===1){W=ga(-1,h&-h),W.tag=2;var he=k.updateQueue;if(he!==null){he=he.shared;var De=he.pending;De===null?W.next=W:(W.next=De.next,De.next=W),he.pending=W}}k.lanes|=h,W=k.alternate,W!==null&&(W.lanes|=h),Mp(k.return,h,c),R.lanes|=h;break}W=W.next}}else if(k.tag===10)A=k.type===c.type?null:k.child;else if(k.tag===18){if(A=k.return,A===null)throw Error(r(341));A.lanes|=h,R=A.alternate,R!==null&&(R.lanes|=h),Mp(A,h,c),A=k.sibling}else A=k.child;if(A!==null)A.return=k;else for(A=k;A!==null;){if(A===c){A=null;break}if(k=A.sibling,k!==null){k.return=A.return,A=k;break}A=A.return}k=A}ms(o,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,Ll(c,h),w=li(w),g=g(w),c.flags|=1,ms(o,c,g,h),c.child;case 14:return g=c.type,w=Ei(g,c.pendingProps),w=Ei(g.type,w),S1(o,c,g,w,h);case 15:return k1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Ei(g,w),df(o,c),c.tag=1,Ns(g)?(o=!0,Hd(c)):o=!1,Ll(c,h),p1(c,g,w),Zp(c,g,w,h),ng(null,c,g,!0,o,h);case 19:return T1(o,c,h);case 22:return _1(o,c,h)}throw Error(r(156,c.tag))};function rj(o,c){return Hn(o,c)}function VI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(o,c,h,g){return new VI(o,c,h,g)}function Sg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function HI(o){if(typeof o=="function")return Sg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===se)return 14}return 2}function ao(o,c){var h=o.alternate;return h===null?(h=di(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function jf(o,c,h,g,w,k){var A=2;if(g=o,typeof o=="function")Sg(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case $:return Bo(h.children,w,k,c);case G:A=8,w|=8;break;case M:return o=di(12,h,c,w|2),o.elementType=M,o.lanes=k,o;case le:return o=di(13,h,c,w),o.elementType=le,o.lanes=k,o;case ee:return o=di(19,h,c,w),o.elementType=ee,o.lanes=k,o;case re:return Sf(h,w,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:A=10;break e;case L:A=9;break e;case U:A=11;break e;case se:A=14;break e;case B:A=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=di(A,h,c,w),c.elementType=o,c.type=g,c.lanes=k,c}function Bo(o,c,h,g){return o=di(7,o,g,c),o.lanes=h,o}function Sf(o,c,h,g){return o=di(22,o,g,c),o.elementType=re,o.lanes=h,o.stateNode={isHidden:!1},o}function kg(o,c,h){return o=di(6,o,null,c),o.lanes=h,o}function _g(o,c,h){return c=di(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function KI(o,c,h,g,w){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Ng(o,c,h,g,w,k,A,R,W){return o=new KI(o,c,h,R,W),c===1?(c=1,k===!0&&(c|=8)):c=0,k=di(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lp(k),o}function GI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function nj(o){if(!o)return Xa;o=o._reactInternals;e:{if(Gr(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ns(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Ns(h))return Ob(o,h,c)}return c}function sj(o,c,h,g,w,k,A,R,W){return o=Ng(h,g,!0,o,w,k,A,R,W),o.context=nj(null),h=o.current,g=ps(),w=so(h),k=ga(g,w),k.callback=c??null,eo(h,k,w),o.current.lanes=w,fs(o,w,g),As(o,g),o}function kf(o,c,h,g){var w=c.current,k=ps(),A=so(w);return h=nj(h),c.context===null?c.context=h:c.pendingContext=h,c=ga(k,A),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=eo(w,c,A),o!==null&&(Oi(o,w,A,k),ef(o,w,A)),A}function _f(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function ij(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Cg(o,c){ij(o,c),(o=o.alternate)&&ij(o,c)}function YI(){return null}var aj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Eg(o){this._internalRoot=o}Nf.prototype.render=Eg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));kf(o,c,null,null)},Nf.prototype.unmount=Eg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Lo(function(){kf(null,o,null,null)}),c[da]=null}};function Nf(o){this._internalRoot=o}Nf.prototype.unstable_scheduleHydration=function(o){if(o){var c=ut();o={blockedOn:null,target:o,priority:c};for(var h=0;h<z.length&&c!==0&&c<z[h].priority;h++);z.splice(h,0,o),h===0&&Kt(o)}};function Ag(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Cf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function oj(){}function JI(o,c,h,g,w){if(w){if(typeof g=="function"){var k=g;g=function(){var he=_f(A);k.call(he)}}var A=sj(c,g,o,0,null,!1,!1,"",oj);return o._reactRootContainer=A,o[da]=A.current,su(o.nodeType===8?o.parentNode:o),Lo(),A}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var R=g;g=function(){var he=_f(W);R.call(he)}}var W=Ng(o,0,!1,null,null,!1,!1,"",oj);return o._reactRootContainer=W,o[da]=W.current,su(o.nodeType===8?o.parentNode:o),Lo(function(){kf(c,W,h,g)}),W}function Ef(o,c,h,g,w){var k=h._reactRootContainer;if(k){var A=k;if(typeof w=="function"){var R=w;w=function(){var W=_f(A);R.call(W)}}kf(c,A,o,w)}else A=JI(h,c,o,w,g);return _f(A)}qe=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Gn(c.pendingLanes);h!==0&&(fe(c,h|1),As(c,Wt()),(Gt&6)===0&&(ql=Wt()+500,Qa()))}break;case 13:Lo(function(){var g=pa(o,1);if(g!==null){var w=ps();Oi(g,o,1,w)}}),Cg(o,1)}},ve=function(o){if(o.tag===13){var c=pa(o,134217728);if(c!==null){var h=ps();Oi(c,o,134217728,h)}Cg(o,134217728)}},we=function(o){if(o.tag===13){var c=so(o),h=pa(o,c);if(h!==null){var g=ps();Oi(h,o,c,g)}Cg(o,c)}},ut=function(){return ge},Mt=function(o,c){var h=ge;try{return ge=o,c()}finally{ge=h}},fr=function(o,c,h){switch(c){case"input":if(qt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=qd(g);if(!w)throw Error(r(90));K(g),qt(g,w)}}}break;case"textarea":pe(o,h);break;case"select":c=h.value,c!=null&&Q(o,!!h.multiple,c,!1)}},Dr=wg,Lr=Lo;var XI={usingClientEntryPoint:!1,Events:[ou,Ol,qd,qn,is,wg]},bu={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QI={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Br(o),o===null?null:o.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||YI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Ee=Af.inject(QI),wt=Af}catch{}}return Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI,Ps.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ag(c))throw Error(r(200));return GI(o,c,null,h)},Ps.createRoot=function(o,c){if(!Ag(o))throw Error(r(299));var h=!1,g="",w=aj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=Ng(o,1,!1,null,null,h,!1,g,w),o[da]=c.current,su(o.nodeType===8?o.parentNode:o),new Eg(c)},Ps.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=Br(c),o=o===null?null:o.stateNode,o},Ps.flushSync=function(o){return Lo(o)},Ps.hydrate=function(o,c,h){if(!Cf(c))throw Error(r(200));return Ef(null,o,c,!0,h)},Ps.hydrateRoot=function(o,c,h){if(!Ag(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,k="",A=aj;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),c=sj(c,null,o,1,h??null,w,!1,k,A),o[da]=c.current,su(o),g)for(o=0;o<g.length;o++)h=g[o],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new Nf(c)},Ps.render=function(o,c,h){if(!Cf(c))throw Error(r(200));return Ef(null,o,c,!1,h)},Ps.unmountComponentAtNode=function(o){if(!Cf(o))throw Error(r(40));return o._reactRootContainer?(Lo(function(){Ef(null,null,o,!1,function(){o._reactRootContainer=null,o[da]=null})}),!0):!1},Ps.unstable_batchedUpdates=wg,Ps.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Cf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Ef(o,c,h,!1,g)},Ps.version="18.3.1-next-f1338f8080-20240426",Ps}var pj;function oC(){if(pj)return Ig.exports;pj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ig.exports=uD(),Ig.exports}var gj;function dD(){if(gj)return Pf;gj=1;var e=oC();return Pf.createRoot=e.createRoot,Pf.hydrateRoot=e.hydrateRoot,Pf}var fD=dD();const hD=Bi(fD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yj="popstate";function mD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return Iv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ju(s)}return gD(t,r,null,e)}function Fr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pD(){return Math.random().toString(36).substring(2,10)}function vj(e,t){return{usr:e.state,key:e.key,idx:t}}function Iv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Tc(t):t,state:r,key:t&&t.key||n||pD()}}function Ju({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function gD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-m;m=S,d&&d({action:u,location:j.location,delta:_})}function y(S,_){u="PUSH";let E=Iv(j.location,S,_);m=f()+1;let C=vj(E,m),O=j.createHref(E);try{l.pushState(C,"",O)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(O)}i&&d&&d({action:u,location:j.location,delta:1})}function x(S,_){u="REPLACE";let E=Iv(j.location,S,_);m=f();let C=vj(E,m),O=j.createHref(E);l.replaceState(C,"",O),i&&d&&d({action:u,location:j.location,delta:0})}function b(S){return yD(S)}let j={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(yj,p),d=S,()=>{s.removeEventListener(yj,p),d=null}},createHref(S){return t(s,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(S){return l.go(S)}};return j}function yD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ju(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function lC(e,t,r="/"){return vD(e,t,r,!1)}function vD(e,t,r,n){let s=typeof t=="string"?Tc(t):t,i=Pa(s.pathname||"/",r);if(i==null)return null;let l=cC(e);xD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=PD(i);u=ED(l[d],m,n)}return u}function cC(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Fr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Na([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Fr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),cC(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:ND(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of uC(l.path))i(l,u,!0,m)}),t}function uC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=uC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function xD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:CD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var wD=/^:[\w-]+$/,bD=3,jD=2,SD=1,kD=10,_D=-2,xj=e=>e==="*";function ND(e,t){let r=e.split("/"),n=r.length;return r.some(xj)&&(n+=_D),t&&(n+=jD),r.filter(s=>!xj(s)).reduce((s,i)=>s+(wD.test(i)?bD:i===""?SD:kD),n)}function CD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ED(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=mh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=mh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Na([i,p.pathname]),pathnameBase:DD(Na([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=Na([i,p.pathnameBase]))}return l}function mh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=AD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let b=u[y]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function AD(e,t=!1,r=!0){yi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function PD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Pa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function OD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Tc(e):e;return{pathname:r?r.startsWith("/")?r:TD(r,t):t,search:RD(n),hash:$D(s)}}function TD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $g(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ID(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Q0(e){let t=ID(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Z0(e,t,r,n=!1){let s;typeof e=="string"?s=Tc(e):(s={...e},Fr(!s.pathname||!s.pathname.includes("?"),$g("?","pathname","search",s)),Fr(!s.pathname||!s.pathname.includes("#"),$g("#","pathname","hash",s)),Fr(!s.search||!s.search.includes("#"),$g("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=OD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Na=e=>e.join("/").replace(/\/\/+/g,"/"),DD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var dC=["POST","PUT","PATCH","DELETE"];new Set(dC);var FD=["GET",...dC];new Set(FD);var Ic=v.createContext(null);Ic.displayName="DataRouter";var hm=v.createContext(null);hm.displayName="DataRouterState";v.createContext(!1);var fC=v.createContext({isTransitioning:!1});fC.displayName="ViewTransition";var LD=v.createContext(new Map);LD.displayName="Fetchers";var zD=v.createContext(null);zD.displayName="Await";var Wi=v.createContext(null);Wi.displayName="Navigation";var fd=v.createContext(null);fd.displayName="Location";var aa=v.createContext({outlet:null,matches:[],isDataRoute:!1});aa.displayName="Route";var ex=v.createContext(null);ex.displayName="RouteError";function UD(e,{relative:t}={}){Fr(Dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Wi),{hash:s,pathname:i,search:l}=hd(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:Na([r,i])),n.createHref({pathname:u,search:l,hash:s})}function Dc(){return v.useContext(fd)!=null}function za(){return Fr(Dc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(fd).location}var hC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mC(e){v.useContext(Wi).static||v.useLayoutEffect(e)}function Ms(){let{isDataRoute:e}=v.useContext(aa);return e?e5():BD()}function BD(){Fr(Dc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Ic),{basename:t,navigator:r}=v.useContext(Wi),{matches:n}=v.useContext(aa),{pathname:s}=za(),i=JSON.stringify(Q0(n)),l=v.useRef(!1);return mC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(yi(l.current,hC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Z0(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Na([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function hd(e,{relative:t}={}){let{matches:r}=v.useContext(aa),{pathname:n}=za(),s=JSON.stringify(Q0(r));return v.useMemo(()=>Z0(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function WD(e,t){return pC(e,t)}function pC(e,t,r,n,s){var E;Fr(Dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(Wi),{matches:l}=v.useContext(aa),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";gC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=za(),x;if(t){let C=typeof t=="string"?Tc(t):t;Fr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=lC(e,{pathname:j});yi(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),yi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=GD(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Na([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Na([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?v.createElement(fd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function qD(){let e=ZD(),t=MD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var VD=v.createElement(qD,null),HD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(aa.Provider,{value:this.props.routeContext},v.createElement(ex.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KD({routeContext:e,match:t,children:r}){let n=v.useContext(Ic);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(aa.Provider,{value:e},r)}function GD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Fr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,b=null,j=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||VD,u&&(d<0&&p===0?(gC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===p&&(x=!0,j=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),_=()=>{let E;return y?E=b:x?E=j:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(KD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(HD,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function tx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YD(e){let t=v.useContext(Ic);return Fr(t,tx(e)),t}function JD(e){let t=v.useContext(hm);return Fr(t,tx(e)),t}function XD(e){let t=v.useContext(aa);return Fr(t,tx(e)),t}function rx(e){let t=XD(e),r=t.matches[t.matches.length-1];return Fr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function QD(){return rx("useRouteId")}function ZD(){var n;let e=v.useContext(ex),t=JD("useRouteError"),r=rx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function e5(){let{router:e}=YD("useNavigate"),t=rx("useNavigate"),r=v.useRef(!1);return mC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{yi(r.current,hC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var wj={};function gC(e,t,r){!t&&!wj[e]&&(wj[e]=!0,yi(!1,r))}v.memo(t5);function t5({routes:e,future:t,state:r,unstable_onError:n}){return pC(e,void 0,r,n,t)}function r5({to:e,replace:t,state:r,relative:n}){Fr(Dc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(Wi);yi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(aa),{pathname:l}=za(),u=Ms(),d=Z0(e,Q0(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function Ws(e){Fr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Fr(!Dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=Tc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let b=Pa(d,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return yi(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Wi.Provider,{value:u},v.createElement(fd.Provider,{children:t,value:x}))}function s5({children:e,location:t}){return WD(Dv(e),t)}function Dv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Dv(n.props.children,i));return}Fr(n.type===Ws,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Dv(n.props.children,i)),r.push(l)}),r}var th="get",rh="application/x-www-form-urlencoded";function mm(e){return e!=null&&typeof e.tagName=="string"}function i5(e){return mm(e)&&e.tagName.toLowerCase()==="button"}function a5(e){return mm(e)&&e.tagName.toLowerCase()==="form"}function o5(e){return mm(e)&&e.tagName.toLowerCase()==="input"}function l5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function c5(e,t){return e.button===0&&(!t||t==="_self")&&!l5(e)}function Rv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function u5(e,t){let r=Rv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Of=null;function d5(){if(Of===null)try{new FormData(document.createElement("form"),0),Of=!1}catch{Of=!0}return Of}var f5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mg(e){return e!=null&&!f5.has(e)?(yi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rh}"`),null):e}function h5(e,t){let r,n,s,i,l;if(a5(e)){let u=e.getAttribute("action");n=u?Pa(u,t):null,r=e.getAttribute("method")||th,s=Mg(e.getAttribute("enctype"))||rh,i=new FormData(e)}else if(i5(e)||o5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Pa(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||th,s=Mg(e.getAttribute("formenctype"))||Mg(u.getAttribute("enctype"))||rh,i=new FormData(u,e),!d5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(mm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=th,n=null,s=rh,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function m5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Pa(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function p5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function y5(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await p5(i,r);return l.links?l.links():[]}return[]}));return b5(n.flat(1).filter(g5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function bj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function v5(e,t,{includeHydrateFallback:r}={}){return x5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function x5(e){return[...new Set(e)]}function w5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function b5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(w5(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function yC(){let e=v.useContext(Ic);return nx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function j5(){let e=v.useContext(hm);return nx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sx=v.createContext(void 0);sx.displayName="FrameworkContext";function vC(){let e=v.useContext(sx);return nx(e,"You must render this element inside a <HydratedRouter> element"),e}function S5(e,t){let r=v.useContext(sx),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let j=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Su(u,x),onBlur:Su(d,b),onMouseEnter:Su(m,x),onMouseLeave:Su(f,b),onTouchStart:Su(p,x)}]:[!1,y,{}]}function Su(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function k5({page:e,...t}){let{router:r}=yC(),n=v.useMemo(()=>lC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(N5,{page:e,matches:n,...t}):null}function _5(e){let{manifest:t,routeModules:r}=vC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return y5(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function N5({page:e,matches:t,...r}){let n=za(),{manifest:s,routeModules:i}=vC(),{basename:l}=yC(),{loaderData:u,matches:d}=j5(),m=v.useMemo(()=>bj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>bj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,j=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(O=>O.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let S=m5(e,l,"data");return j&&b.size>0&&S.searchParams.set("_routes",t.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>v5(f,s),[f,s]),x=_5(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),y.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,nonce:r.nonce,...j})))}function C5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var xC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xC&&(window.__reactRouterVersion="7.9.4")}catch{}function E5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=mD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(n5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var wC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:b}=v.useContext(Wi),j=typeof m=="string"&&wC.test(m),S,_=!1;if(typeof m=="string"&&j&&(S=m,xC))try{let M=new URL(window.location.href),V=m.startsWith("//")?new URL(M.protocol+m):new URL(m),L=Pa(V.pathname,b);V.origin===M.origin&&L!=null?m=L+V.search+V.hash:_=!0}catch{yi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=UD(m,{relative:s}),[C,O,T]=S5(n,y),P=T5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function $(M){t&&t(M),M.defaultPrevented||P(M)}let G=v.createElement("a",{...y,...T,href:S||E,onClick:_||i?t:$,ref:C5(x,O),target:d,"data-discover":!j&&r==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,G,v.createElement(k5,{page:E})):G});bC.displayName="Link";var A5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=hd(l,{relative:m.relative}),y=za(),x=v.useContext(hm),{navigator:b,basename:j}=v.useContext(Wi),S=x!=null&&M5(p)&&u===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,E=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Pa(C,j)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=E===_||!s&&E.startsWith(_)&&E.charAt(O)==="/",P=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),$={isActive:T,isPending:P,isTransitioning:S},G=T?t:void 0,M;typeof n=="function"?M=n($):M=[n,T?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i($):i;return v.createElement(bC,{...m,"aria-current":G,className:M,ref:f,style:V,to:l,viewTransition:u},typeof d=="function"?d($):d)});A5.displayName="NavLink";var P5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=th,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let b=R5(),j=$5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&wC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,T=(O==null?void 0:O.getAttribute("formmethod"))||l;b(O||C.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:n?d:E,...y,"data-discover":!_&&e==="render"?"true":void 0})});P5.displayName="Form";function O5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jC(e){let t=v.useContext(Ic);return Fr(t,O5(e)),t}function T5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=Ms(),d=za(),m=hd(e,{relative:i});return v.useCallback(f=>{if(c5(f,t)){f.preventDefault();let p=r!==void 0?r:Ju(d)===Ju(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function ix(e){yi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Rv(e)),r=v.useRef(!1),n=za(),s=v.useMemo(()=>u5(n.search,r.current?null:t.current),[n.search]),i=Ms(),l=v.useCallback((u,d)=>{const m=Rv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var I5=0,D5=()=>`__${String(++I5)}__`;function R5(){let{router:e}=jC("useSubmit"),{basename:t}=v.useContext(Wi),r=QD();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=h5(n,t);if(s.navigate===!1){let f=s.fetcherKey||D5();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function $5(e,{relative:t}={}){let{basename:r}=v.useContext(Wi),n=v.useContext(aa);Fr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...hd(e||".",{relative:t})},l=za();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Na([r,i.pathname])),Ju(i)}function M5(e,{relative:t}={}){let r=v.useContext(fC);Fr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=jC("useViewTransitionState"),s=hd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Pa(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Pa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return mh(s.pathname,l)!=null||mh(s.pathname,i)!=null}var SC=oC();const F5="modulepreload",L5=function(e){return"/feature-voting-app/"+e},jj={},md=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=L5(m),m in jj)return;jj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":F5,f||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},z5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(async()=>{const{default:n}=await Promise.resolve().then(()=>Rc);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ax extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Sj extends ax{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kj extends ax{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _j extends ax{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $v;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($v||($v={}));var U5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class B5{constructor(t,{headers:r={},customFetch:n,region:s=$v.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=z5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return U5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Sj(_)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new kj(x);if(!x.ok)throw new _j(x);let j=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return j==="application/json"?S=yield x.json():j==="application/octet-stream"?S=yield x.blob():j==="text/event-stream"?S=x:j==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Sj(i)}:{data:null,error:i,response:i instanceof _j||i instanceof kj?i.context:void 0}}})}}var Dn={},Hl={},Kl={},Gl={},Yl={},Jl={},W5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bc=W5();const q5=bc.fetch,kC=bc.fetch.bind(bc),_C=bc.Headers,V5=bc.Request,H5=bc.Response,Rc=Object.freeze(Object.defineProperty({__proto__:null,Headers:_C,Request:V5,Response:H5,default:kC,fetch:q5},Symbol.toStringTag,{value:"Module"})),K5=nD(Rc);var Tf={},Nj;function NC(){if(Nj)return Tf;Nj=1,Object.defineProperty(Tf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Tf.default=e,Tf}var Cj;function CC(){if(Cj)return Jl;Cj=1;var e=Jl&&Jl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jl,"__esModule",{value:!0});const t=e(K5),r=e(NC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let b=null,j=null,S=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?j=P:j=JSON.parse(P))}const O=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),T=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(b={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,S=null,_=406,E="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const O=await m.text();try{b=JSON.parse(O),Array.isArray(b)&&m.status===404&&(j=[],b=null,_=200,E="OK")}catch{m.status===404&&O===""?(_=204,E="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,_=200,E="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:j,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return Jl.default=n,Jl}var Ej;function EC(){if(Ej)return Yl;Ej=1;var e=Yl&&Yl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yl,"__esModule",{value:!0});const t=e(CC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Yl.default=r,Yl}var Aj;function ox(){if(Aj)return Gl;Aj=1;var e=Gl&&Gl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});const t=e(EC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return Gl.default=r,Gl}var Pj;function AC(){if(Pj)return Kl;Pj=1;var e=Kl&&Kl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kl,"__esModule",{value:!0});const t=e(ox());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Kl.default=r,Kl}var Oj;function G5(){if(Oj)return Hl;Oj=1;var e=Hl&&Hl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Hl,"__esModule",{value:!0});const t=e(AC()),r=e(ox());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([j,S])=>S!==void 0).map(([j,S])=>[j,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([j,S])=>{y.searchParams.append(j,S)})):(p="POST",x=l);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:b,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Hl.default=n,Hl}var Tj;function Y5(){if(Tj)return Dn;Tj=1;var e=Dn&&Dn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.PostgrestError=Dn.PostgrestBuilder=Dn.PostgrestTransformBuilder=Dn.PostgrestFilterBuilder=Dn.PostgrestQueryBuilder=Dn.PostgrestClient=void 0;const t=e(G5());Dn.PostgrestClient=t.default;const r=e(AC());Dn.PostgrestQueryBuilder=r.default;const n=e(ox());Dn.PostgrestFilterBuilder=n.default;const s=e(EC());Dn.PostgrestTransformBuilder=s.default;const i=e(CC());Dn.PostgrestBuilder=i.default;const l=e(NC());return Dn.PostgrestError=l.default,Dn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},Dn}var J5=Y5();const X5=Bi(J5),{PostgrestClient:Q5,PostgrestQueryBuilder:ZZ,PostgrestFilterBuilder:eee,PostgrestTransformBuilder:tee,PostgrestBuilder:ree,PostgrestError:nee}=X5;class Z5{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const e3="2.74.0",t3=`realtime-js/${e3}`,r3="1.0.0",Mv=1e4,n3=1e3,s3=100;var Wu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wu||(Wu={}));var vn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vn||(vn={}));var Ii;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ii||(Ii={}));var Fv;(function(e){e.websocket="websocket"})(Fv||(Fv={}));var Jo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jo||(Jo={}));class i3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class PC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Sr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Sr||(Sr={}));const Ij=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=a3(l,e,t,s),i),{}):{}},a3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?OC(i,l):Lv(l)},OC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return u3(t,r)}switch(e){case Sr.bool:return o3(t);case Sr.float4:case Sr.float8:case Sr.int2:case Sr.int4:case Sr.int8:case Sr.numeric:case Sr.oid:return l3(t);case Sr.json:case Sr.jsonb:return c3(t);case Sr.timestamp:return d3(t);case Sr.abstime:case Sr.date:case Sr.daterange:case Sr.int4range:case Sr.int8range:case Sr.money:case Sr.reltime:case Sr.text:case Sr.time:case Sr.timestamptz:case Sr.timetz:case Sr.tsrange:case Sr.tstzrange:return Lv(t);default:return Lv(t)}},Lv=e=>e,o3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},l3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},c3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},u3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>OC(t,u))}return e},d3=e=>typeof e=="string"?e.replace(" ","T"):e,TC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Fg{constructor(t,r,n={},s=Mv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dj||(Dj={}));class qu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=qu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),b=f.filter(S=>x.indexOf(S.presence_ref)<0),j=p.filter(S=>y.indexOf(S.presence_ref)<0);b.length>0&&(u[m]=b),j.length>0&&(d[m]=j)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Rj||(Rj={}));var Vu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vu||(Vu={}));var wa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wa||(wa={}));class lx{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fg(this,Ii.join,this.params,this.timeout),this.rejoinTimer=new PC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ii.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new qu(this),this.broadcastEndpointURL=TC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Vu.PRESENCE]&&this.bindings[Vu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(wa.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(wa.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket.setAuth(),x===void 0){t==null||t(wa.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(b=j==null?void 0:j.length)!==null&&b!==void 0?b:0,_=[];for(let E=0;E<S;E++){const C=j[E],{filter:{event:O,schema:T,table:P,filter:$}}=C,G=x&&x[E];if(G&&G.event===O&&G.schema===T&&G.table===P&&G.filter===$)_.push(Object.assign(Object.assign({},C),{id:G.id}));else{this.unsubscribe(),this.state=vn.errored,t==null||t(wa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(wa.SUBSCRIBED);return}}).receive("error",x=>{this.state=vn.errored,t==null||t(wa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===vn.joined&&t===Vu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ii.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fg(this,Ii.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>s3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Ii;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,j,S;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(j=x.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var b,j,S,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,T=(b=x.filter)===null||b===void 0?void 0:b.event;return O&&((j=r.ids)===null||j===void 0?void 0:j.includes(O))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(E=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:j,table:S,commit_timestamp:_,type:E,errors:C}=b;y=Object.assign(Object.assign({},{schema:j,table:S,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(b))}x.callback(y,n)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&lx.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ii.close,{},t)}_onError(t){this._on(Ii.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ij(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ij(t.columns,t.old_record)),r}}const Lg=()=>{},If={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f3=[1e3,2e3,5e3,1e4],h3=1e4,m3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mv,this.transport=null,this.heartbeatIntervalMs=If.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lg,this.ref=0,this.reconnectTimer=null,this.logger=Lg,this.conn=null,this.sendBuffer=[],this.serializer=new i3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>md(async()=>{const{default:u}=await Promise.resolve().then(()=>Rc);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Fv.websocket}`,this.httpEndpoint=TC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Z5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:r3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wu.connecting:return Jo.Connecting;case Wu.open:return Jo.Open;case Wu.closing:return Jo.Closing;default:return Jo.Closed}}isConnected(){return this.connectionState()===Jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new lx(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(n3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},If.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ii.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([m3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:t3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ii.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new PC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},If.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Mv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:If.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Lg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>f3[p-1]||h3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class cx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function cn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class g3 extends cx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zv extends cx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var y3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const IC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(async()=>{const{default:n}=await Promise.resolve().then(()=>Rc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},v3=()=>y3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield md(()=>Promise.resolve().then(()=>Rc),void 0)).Response:Response}),Uv=e=>{if(Array.isArray(e))return e.map(r=>Uv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Uv(n)}),t},x3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var yl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const zg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),w3=(e,t,r)=>yl(void 0,void 0,void 0,function*(){const n=yield v3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new g3(zg(s),i,l))}).catch(s=>{t(new zv(zg(s),s))}):t(new zv(zg(e),e))}),b3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(x3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function pd(e,t,r,n,s,i){return yl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,b3(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>w3(d,u,n))})})}function ph(e,t,r,n){return yl(this,void 0,void 0,function*(){return pd(e,"GET",t,r,n)})}function Qi(e,t,r,n,s){return yl(this,void 0,void 0,function*(){return pd(e,"POST",t,n,s,r)})}function Bv(e,t,r,n,s){return yl(this,void 0,void 0,function*(){return pd(e,"PUT",t,n,s,r)})}function j3(e,t,r,n){return yl(this,void 0,void 0,function*(){return pd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function DC(e,t,r,n,s){return yl(this,void 0,void 0,function*(){return pd(e,"DELETE",t,n,s,r)})}var S3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class k3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return S3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}})}}var _3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class N3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new k3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return _3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}})}}var Os=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const C3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$j={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class E3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=IC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Os(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},$j),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Bv:Qi)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Os(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Os(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:$j.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Bv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(cn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Os(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Qi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new cx("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}update(t,r,n){return Os(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Os(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Os(this,void 0,void 0,function*(){try{return{data:{path:(yield Qi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Os(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Qi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Os(this,void 0,void 0,function*(){try{const s=yield Qi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>ph(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new N3(d,this.shouldThrowOnError)}info(t){return Os(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ph(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Uv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}exists(t){return Os(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield j3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n)&&n instanceof zv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Os(this,void 0,void 0,function*(){try{return{data:yield DC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}list(t,r,n){return Os(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},C3),r),{prefix:t||""});return{data:yield Qi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}listV2(t,r){return Os(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Qi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const A3="2.74.0",P3={"X-Client-Info":`storage-js/${A3}`};var Xl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class O3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P3),r),this.fetch=IC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Xl(this,void 0,void 0,function*(){try{return{data:yield ph(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}})}getBucket(t){return Xl(this,void 0,void 0,function*(){try{return{data:yield ph(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}createBucket(t){return Xl(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Qi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Xl(this,void 0,void 0,function*(){try{return{data:yield Bv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Xl(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Xl(this,void 0,void 0,function*(){try{return{data:yield DC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}}class T3 extends O3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new E3(this.url,this.headers,t,this.fetch)}}const I3="2.74.0";let $u="";typeof Deno<"u"?$u="deno":typeof document<"u"?$u="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$u="react-native":$u="node";const D3={"X-Client-Info":`supabase-js-${$u}/${I3}`},R3={headers:D3},$3={schema:"public"},M3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F3={};var L3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const z3=e=>{let t;return e?t=e:typeof fetch>"u"?t=kC:t=fetch,(...r)=>t(...r)},U3=()=>typeof Headers>"u"?_C:Headers,B3=(e,t,r)=>{const n=z3(r),s=U3();return(i,l)=>L3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var W3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function q3(e){return e.endsWith("/")?e:e+"/"}function V3(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>W3(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function H3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(q3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const RC="2.74.0",cc=30*1e3,Wv=3,Ug=Wv*cc,K3="http://localhost:9999",G3="supabase.auth.token",Y3={"X-Client-Info":`gotrue-js/${RC}`},qv="X-Supabase-Api-Version",$C={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},J3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X3=600*1e3;class Xu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function yt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Q3 extends Xu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Z3(e){return yt(e)&&e.name==="AuthApiError"}class Xo extends Xu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class So extends Xu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class co extends So{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e6(e){return yt(e)&&e.name==="AuthSessionMissingError"}class Ql extends So{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Df extends So{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Rf extends So{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t6(e){return yt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Mj extends So{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vv extends So{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Bg(e){return yt(e)&&e.name==="AuthRetryableFetchError"}class Fj extends So{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Hv extends So{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lj=` 	
\r=`.split(""),r6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lj.length;t+=1)e[Lj[t].charCodeAt(0)]=-2;for(let t=0;t<gh.length;t+=1)e[gh[t].charCodeAt(0)]=t;return e})();function zj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gh[n]),t.queuedBits-=6}}function MC(e,t,r){const n=r6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Uj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{i6(l,n,r)};for(let l=0;l<e.length;l+=1)MC(e.charCodeAt(l),s,i);return t.join("")}function n6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function s6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}n6(n,t)}}function i6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)MC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function a6(e){const t=[];return s6(e,r=>t.push(r)),new Uint8Array(t)}function Qo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>zj(s,r,n)),zj(null,r,n),t.join("")}function o6(e){return Math.round(Date.now()/1e3)+e}function l6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const qs=()=>typeof window<"u"&&typeof document<"u",Wo={tested:!1,writable:!1},FC=()=>{if(!qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wo.tested)return Wo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wo.tested=!0,Wo.writable=!0}catch{Wo.tested=!0,Wo.writable=!1}return Wo.writable};function c6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const LC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>md(async()=>{const{default:n}=await Promise.resolve().then(()=>Rc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},u6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",uc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},qo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},lo=async(e,t)=>{await e.removeItem(t)};class pm{constructor(){this.promise=new pm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pm.promiseConstructor=Promise;function Wg(e){const t=e.split(".");if(t.length!==3)throw new Hv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!J3.test(t[n]))throw new Hv("JWT not in base64url format");return{header:JSON.parse(Uj(t[0])),payload:JSON.parse(Uj(t[1])),signature:gc(t[2]),raw:{header:t[0],payload:t[1]}}}async function d6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function f6(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function h6(e){return("0"+e.toString(16)).substr(-2)}function m6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,h6).join("")}async function p6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function g6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await p6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zl(e,t,r=!1){const n=m6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await uc(e,`${t}-code-verifier`,s);const i=await g6(n);return[i,n===i?"plain":"s256"]}const y6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v6(e){const t=e.headers.get(qv);if(!t||!t.match(y6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function x6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function w6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const b6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(e){if(!b6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bj(e){return JSON.parse(JSON.stringify(e))}var j6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Ho=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S6=[502,503,504];async function Wj(e){var t;if(!u6(e))throw new Vv(Ho(e),0);if(S6.includes(e.status))throw new Vv(Ho(e),e.status);let r;try{r=await e.json()}catch(i){throw new Xo(Ho(i),i)}let n;const s=v6(e);if(s&&s.getTime()>=$C["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Fj(Ho(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new co}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Fj(Ho(r),e.status,r.weak_password.reasons);throw new Q3(Ho(r),e.status||500,n)}const k6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ot(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[qv]||(i[qv]=$C["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await _6(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function _6(e,t,r,n,s,i){const l=k6(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Vv(Ho(d),0)}if(u.ok||await Wj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Wj(d)}}function Ti(e){var t;let r=null;E6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=o6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function qj(e){const t=Ti(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function po(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function N6(e){return{data:e,error:null}}function C6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=j6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Vj(e){return e}function E6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Vg=["global","local","others"];var A6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class P6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=LC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Vg[0]){if(Vg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vg.join(", ")}`);try{return await Ot(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:po})}catch(n){if(yt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=A6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:C6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(yt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:po})}catch(r){if(yt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(yt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){ec(t);try{return await Ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:po})}catch(r){if(yt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ec(t);try{return await Ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:po})}catch(n){if(yt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ec(t);try{return await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:po})}catch(n){if(yt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ec(t.userId);try{const{data:r,error:n}=await Ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ec(t.userId),ec(t.id);try{return{data:await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Ot(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Vj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(yt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Ot(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ot(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ot(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ot(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}}function Hj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const tc={debug:!!(globalThis&&FC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O6 extends zC{}async function T6(e,t,r){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),tc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function I6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function UC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function D6(e){return parseInt(e,16)}function R6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function $6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=UC(e.address),b=f?`${f}://${n}`:n,j=e.statement?`${e.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${x}

${j}`;let _=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${S}
${_}`}class ln extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class yh extends ln{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function M6({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ln({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ln({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ln({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ln({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ln({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ln({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ln({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ln({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(WC(l)){if(i.rp.id!==l)return new ln({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ln({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ln({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function F6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ln({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ln({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(WC(n)){if(r.rpId!==n)return new ln({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ln({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var BC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class L6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const z6=new L6;function U6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=BC(e,["challenge","user","excludeCredentials"]),i=gc(t).buffer,l=Object.assign(Object.assign({},r),{id:gc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:gc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function B6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=BC(e,["challenge","allowCredentials"]),s=gc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:gc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function W6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function q6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qo(new Uint8Array(s.authenticatorData)),clientDataJSON:Qo(new Uint8Array(s.clientDataJSON)),signature:Qo(new Uint8Array(s.signature)),userHandle:s.userHandle?Qo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function WC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Kj(){var e,t;return!!(qs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function V6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yh("Browser returned unexpected credential type",t)}:{data:null,error:new yh("Empty credential response",t)}}catch(t){return{data:null,error:M6({error:t,options:e})}}}async function H6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yh("Browser returned unexpected credential type",t)}:{data:null,error:new yh("Empty credential response",t)}}catch(t){return{data:null,error:F6({error:t,options:e})}}}const K6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},G6={userVerification:"preferred",hints:["security-key"]};function vh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=vh(u,l):n[i]=vh(l)}else n[i]=l}return n}function Y6(e,t){return vh(K6,e,t||{})}function J6(e,t){return vh(G6,e,t||{})}class X6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??z6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=Y6(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await V6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=J6(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await H6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return yt(l)?{data:null,error:l}:{data:null,error:new Xo("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new Xu("rpId is required for WebAuthn authentication")};try{if(!Kj())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return yt(l)?{data:null,error:l}:{data:null,error:new Xo("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new Xu("rpId is required for WebAuthn registration")};try{if(!Kj())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return yt(l)?{data:null,error:l}:{data:null,error:new Xo("Unexpected error in register",l)}}}}I6();const Q6={url:K3,storageKey:G3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gj(e,t,r){return await r()}const rc={};class Qu{get jwks(){var t,r;return(r=(t=rc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){rc[this.storageKey]=Object.assign(Object.assign({},rc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=rc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rc[this.storageKey]=Object.assign(Object.assign({},rc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qu.nextInstanceID,Qu.nextInstanceID+=1,this.instanceID>0&&qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Q6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new P6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=LC(s.fetch),this.lock=s.lock||Gj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=T6:this.lock=Gj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X6(this)},this.persistSession?(s.storage?this.storage=s.storage:FC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Hj(this.memoryStorage)),qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${RC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=c6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),qs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),t6(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return yt(r)?{error:r}:{error:new Xo("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ti}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await Zl(this.storage,this.storageKey)),i=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:b},xform:Ti})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ti})}else throw new Df("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:qj})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:qj})}else throw new Df("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ql}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(yt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:j,wallet:S,statement:_,options:E}=t;let C;if(qs())if(typeof S=="object")C=S;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")C=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const O=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=UC(T[0]);let $=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!$){const M=await C.request({method:"eth_chainId"});$=D6(M)}const G={domain:O.host,address:P,statement:_,uri:O.href,version:"1",chainId:$,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=$6(G),b=await C.request({method:"personal_sign",params:[R6(x),P]})}try{const{data:j,error:S}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ti});if(S)throw S;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ql}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:S})}catch(j){if(yt(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:S,wallet:_,statement:E,options:C}=t;let O;if(qs())if(typeof _=="object")O=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))O=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=_}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const P=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let $;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")$=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)$=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)b=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),j=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${T.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const P=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=P}}try{const{data:S,error:_}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Qo(j)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ti});if(_)throw _;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ql}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:_})}catch(S){if(yt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await qo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ti});if(await lo(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ql}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(yt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ti}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Ql}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(yt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Zl(this.storage,this.storageKey));const{error:p}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new Df("You must provide either an email or phone number.")}catch(u){if(yt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ti});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(yt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Zl(this.storage,this.storageKey)),await Ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:N6})}catch(i){if(yt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new co;const{error:s}=await Ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(yt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await Ot(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await Ot(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Df("You must provide either an email or phone number and a type")}catch(r){if(yt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await qo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ug:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await qo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=qg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:po}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new co}:await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:po})})}catch(r){if(yt(r))return e6(r)&&(await this._removeSession(),await lo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new co;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Zl(this.storage,this.storageKey));const{data:m,error:f}=await Ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:po});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(yt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new co;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Wg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(yt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new co;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(yt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!qs())throw new Rf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Rf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Mj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Mj("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new Rf("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=cc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=y-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,f);const{data:j,error:S}=await this._getUser(i);if(S)throw S;const _={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(yt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await qo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(Z3(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await lo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=l6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Zl(this.storage,this.storageKey,!0));try{return await Ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(yt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ot(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return qs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(yt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ti}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ql}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(yt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await Ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await f6(async s=>(s>0&&await d6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ti})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Bg(i)&&Date.now()+l-n<cc})}catch(n){if(this._debug(r,"error",n),yt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),qs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await qo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await qo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await uc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:qg()}else if(s&&!s.user&&!s.user){const l=await qo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await lo(this.storage,this.storageKey+"-user"),await uc(this.storage,this.storageKey,s)):s.user=qg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ug;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ug}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Bg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new co;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new co;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),yt(i)){const l={data:null,error:i};return Bg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await uc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Bj(s);await uc(this.storage,this.storageKey,i)}else{const s=Bj(r);await uc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await lo(this.storage,this.storageKey),await lo(this.storage,this.storageKey+"-code-verifier"),await lo(this.storage,this.storageKey+"-user"),this.userStorage&&await lo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),cc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/cc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${cc}ms, refresh threshold is ${Wv} ticks`),s<=Wv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Zl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await Ot(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(yt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?W6(t.webauthn.credential_response):q6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(yt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await Ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:U6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:B6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(yt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Wg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+X3>s)return n;const{data:i,error:l}=await Ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Wg(n);r!=null&&r.allowExpired||x6(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=w6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,a6(`${u}.${d}`)))throw new Hv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}}}Qu.nextInstanceID=0;const Z6=Qu;class eR extends Z6{constructor(t){super(t)}}var tR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class rR{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=H3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:$3,realtime:F3,auth:Object.assign(Object.assign({},M3),{storageKey:d}),global:R3},f=V3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=B3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Q5(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new T3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new B5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return tR(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eR({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new p3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nR=(e,t,r)=>new rR(e,t,r);function sR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}sR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iR="https://okdzllfpsvltjqryslnn.supabase.co",aR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ce=nR(iR,aR,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),Oa="__FEATURE_SUGGESTION__",ux="__feature_suggestion__",oR="__feature_future_session__";function gm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(oR)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function lR(e){try{if(!Ce||typeof Ce.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Ce.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const y=await f.text();throw console.error("[databaseService] Direct fetch error:",y),new Error(`API error: ${f.status} - ${y}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const i=Ce.from("users").select("*").eq("email",e).single(),u=await Promise.race([i,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function cR(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ce.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Zo(e,t){try{let r=await lR(e);return r||(r=await cR({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function Yj(){const{data:e,error:t}=await Ce.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function uR(e){var l,u;const[t,r,n]=await Promise.all([vl(e),Ce.from("session_admins").select("session_id").eq("user_id",e),Ce.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await Ce.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const $c="PRODUCTS_TABLE_MISSING";function Ca(e){return typeof e=="object"&&e!==null&&e.code===$c}async function dx(){const{data:e,error:t}=await Ce.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=$c,r}throw t}return e||[]}async function ba(e){const{data:t,error:r}=await Ce.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=$c,n}throw r}return t||[]}async function fx(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ce.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=$c,i}throw s}return n}async function qC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await Ce.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=$c,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await Ce.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function VC(e){const{error:t}=await Ce.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=$c,r}throw t}}const gd="*, product:products(name)";function ym(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function HC(e){return!e||e.length===0?[]:e.map(t=>ym(t))}async function wo(){try{const e=`${Ce.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(gd)}&order=created_at.desc`,t={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return HC(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function dR(e){const{data:t,error:r}=await Ce.from("voting_sessions").select(gd).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?ym(t):null}async function fR(e){const{data:t,error:r}=await Ce.from("voting_sessions").select(gd).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?ym(t):null}async function KC(e){var t;try{if(await vl(e))return wo();const n=`${Ce.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const i=await s.json(),l=(i==null?void 0:i.map(C=>C.session_id))||[],u=`${Ce.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Ce.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,y=await fetch(p,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!y.ok){const C=await y.text();throw console.error("[databaseService] Error loading session stakeholders:",y.status,C),new Error(`API error: ${y.status} - ${C}`)}const x=await y.json(),b=(x==null?void 0:x.map(C=>C.session_id))||[],j=[...new Set([...l,...b])];if(j.length===0)return[];const S=`${Ce.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(gd)}&id=in.(${j.join(",")})&order=created_at.desc`,_=await fetch(S,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return HC(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function GC(e){if(!e)return null;const{data:t,error:r}=await Ce.from("voting_sessions").select(gd).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?ym(t):null}async function YC(e){const{data:t,error:r}=await Ce.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function JC(e,t){const{data:r,error:n}=await Ce.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function hR(e){const{error:t}=await Ce.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function mR(e,t){const{error:r}=await Ce.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function XC(e){const{data:t,error:r}=await Ce.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function pR(e){const{data:t,error:r}=await Ce.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:i}=await Ce.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(i)throw i;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function yc(e,t){const{data:r,error:n}=await Ce.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function gR(e,t,r){const n=await Zo(t,r);return yc(e,n.id)}async function nh(e,t){const{error:r}=await Ce.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function vm(e,t){try{if(await vl(t))return!0;const n=`${Ce.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},i=await fetch(n,{method:"GET",headers:s});if(!i.ok)return console.error("Error checking admin status:",i.status),!1;const l=await i.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function yR(e){const{data:t,error:r}=await Ce.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function QC(e){const{data:t,error:r}=await Ce.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function Jj(e,t,r){return QC({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function ZC(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,i=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?Xj(e.start_date):""} - ${e.end_date?Xj(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${i}&body=${l}`}function Xj(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Kv(e,t){const{error:r}=await Ce.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function hx(e,t){try{const r=`${Ce.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const i=await s.json();return Array.isArray(i)&&i.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function vR(e,t){const{data:r,error:n}=await Ce.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function Hg(e,t){const{error:r}=await Ce.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function Ji(e){const t=`${Ce.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return(await n.json()||[]).filter(i=>{const l=i.state===Oa,u=Array.isArray(i.tags)&&i.tags.includes(ux);return!l&&!u})}async function $f(e){const{data:t,error:r}=await Ce.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Kg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await Ce.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function Qj(e){const{error:t}=await Ce.from("features").delete().eq("id",e);if(t)throw t}function eE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function xR(e){try{const{data:t,error:r}=await Ce.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(eE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function wR(e){try{const{data:t,error:r}=await Ce.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return eE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function uo(e){const t=`${Ce.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return await n.json()||[]}async function bR(e){const{data:t}=await Ce.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ce.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ce.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function jR(e,t){const{error:r}=await Ce.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function SR(e){const{error:t}=await Ce.from("votes").delete().eq("session_id",e);if(t)throw t}async function kR(e){try{const{data:t,error:r}=await Ce.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function Vo(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ce.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await Ce.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ce.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function _R(){return(await wo())[0]||null}async function NR(e){const t=await _R();if(!t)throw new Error("No session found");return JC(t.id,e)}async function Zj(e,t){return JC(e,t)}async function CR(e){const{data:t,error:r}=await Ce.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function ER(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await Ce.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Oa,area_path:null,tags:[ux],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return gm(r)}async function AR(e,t){const{data:r,error:n}=await Ce.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Oa).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await Ce.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",Oa).select("id, session_id, title, description, created_at").single();if(u)throw u;return gm(l)}async function PR(e){const{error:t}=await Ce.from("features").delete().eq("id",e).eq("state",Oa);if(t)throw t}async function OR(e,t){const{data:r,error:n}=await Ce.from("features").update({session_id:t}).eq("id",e).eq("state",Oa).select("id, session_id, title, description, created_at").single();if(n)throw n;return gm(r)}async function TR(e){const{data:t,error:r}=await Ce.from("features").select("*").eq("id",e).eq("state",Oa).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==ux):[],{data:l,error:u}=await Ce.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",Oa).select("*").single();if(u)throw u;return l}async function eS(e){const{data:t,error:r}=await Ce.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Oa).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(gm)}async function Gv(){const{data:e,error:t}=await Ce.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function xh(e){const{data:t,error:r}=await Ce.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function sh(e){const{error:t}=await Ce.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function vl(e){try{const t=`${Ce.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const IR=["dave.hoffman@newmill.com"],DR="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),RR=Array.from(new Set([...IR,...DR]));function Yv(e){return e?RR.includes(e.toLowerCase()):!1}const tE=v.createContext(void 0);function $R({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,b]=v.useState(!0),[j,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(!1),O=v.useCallback(async G=>{if(_)return;const M=G||i;if(!M){s([]),r(V=>{if(V)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const V=Yv(M.email);let L;V?L=await wo():L=await KC(M.id),s(L),r(U=>{if(!U)return U;const le=L.find(ee=>ee.id===U.id);if(!le){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(le.id!==U.id)return U;if(le!==U){try{localStorage.setItem("voting_system_current_session",le.id)}catch{}return le}return U})}catch(V){console.error("Error loading sessions:",V),s([])}finally{E(!1)}},[i,_]);v.useEffect(()=>{if(C.current)return;C.current=!0;const G=setTimeout(()=>{b(!1)},5e3);(async()=>{var L,U;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var se,B;try{const{data:{session:re}}=await Ce.auth.getSession();if(re!=null&&re.user){const ne=re.user.email;if(ne){const ae=((se=re.user.user_metadata)==null?void 0:se.full_name)||((B=re.user.user_metadata)==null?void 0:B.name)||ne.split("@")[0]||"User";try{const ce=await Zo(ne.toLowerCase(),ae);l(ce),await O(ce),setTimeout(()=>{if(window.location.hash){const I=window.location.pathname+window.location.search;window.history.replaceState(null,"",I)}},200)}catch(ce){console.error("Error getting/creating user:",ce)}}}}catch(re){console.error("Error in OAuth callback handler:",re)}finally{b(!1),clearTimeout(G)}},1e3);return}const{data:{session:ee}}=await Ce.auth.getSession();if(ee!=null&&ee.user){const se=ee.user.email;if(se){const B=((L=ee.user.user_metadata)==null?void 0:L.full_name)||((U=ee.user.user_metadata)==null?void 0:U.name)||se.split("@")[0]||"User";try{const re=await Zo(se.toLowerCase(),B);l(re),await O(re)}catch(re){console.error("Error getting/creating user:",re)}}}else{const se=localStorage.getItem("voting_system_user");if(se)try{const B=JSON.parse(se);l(B);try{await O(B)}catch(re){console.error("Error refreshing sessions:",re)}}catch(B){console.error("Error loading stored user:",B),localStorage.removeItem("voting_system_user")}}}catch(le){console.error("Error checking Supabase auth:",le);const ee=localStorage.getItem("voting_system_user");if(ee)try{const se=JSON.parse(ee);l(se)}catch(se){console.error("Error loading stored user:",se),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(b(!1),clearTimeout(G))}})();const{data:{subscription:V}}=Ce.auth.onAuthStateChange(async(L,U)=>{var le,ee,se,B;if(L==="SIGNED_IN"&&(U!=null&&U.user)){const re=U.user.email;if(re){const ne=((le=U.user.user_metadata)==null?void 0:le.full_name)||((ee=U.user.user_metadata)==null?void 0:ee.name)||re.split("@")[0]||"User",ae=await Zo(re.toLowerCase(),ne);l(ae),await O(ae),b(!1),setTimeout(()=>{if(window.location.hash){const ce=window.location.pathname+window.location.search;window.history.replaceState(null,"",ce)}},100)}}else if(L==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),b(!1);else if(L==="TOKEN_REFRESHED"&&(U!=null&&U.user)){if(!i&&U.user.email){const re=U.user.email,ne=((se=U.user.user_metadata)==null?void 0:se.full_name)||((B=U.user.user_metadata)==null?void 0:B.name)||re.split("@")[0]||"User",ae=await Zo(re.toLowerCase(),ne);l(ae),await O(ae)}b(!1)}});return()=>{V.unsubscribe(),clearTimeout(G)}},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!j)try{const[M,V]=await Promise.all([vm(t.id,i.id),hx(t.id,i.email)]);d(M),f(V),S(!1)}catch(M){console.error("Error checking user roles:",M),d(!1),f(!1),S(!0)}})()},[t,i,j]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(Yv(i.email)){y(!0);return}try{const V=await vl(i.id);y(V)}catch(V){console.error("Error checking system admin status:",V),y(!1)}})()},[i]);const T=v.useCallback(async G=>{l(G),S(!1),G?(localStorage.setItem("voting_system_user",JSON.stringify(G)),await O(G)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[O]),P=v.useCallback(G=>{r(G),S(!1),G?localStorage.setItem("voting_system_current_session",G.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const M=localStorage.getItem("voting_system_current_session");if(M){const V=n.find(L=>L.id===M);V&&r(V)}})()},[i,n]),v.useEffect(()=>{const G=()=>{const L=window.location.hash;if(L==="#"||L===""){const U=window.location.pathname+window.location.search;window.history.replaceState(null,"",U)}};G();const M=()=>{G()},V=setInterval(G,500);return window.addEventListener("hashchange",M),()=>{clearInterval(V),window.removeEventListener("hashchange",M)}},[]);const $={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:P,refreshSessions:O,setCurrentUser:T};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(tE.Provider,{value:$,children:e})}function oa(){const e=v.useContext(tE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function mx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function ko(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var tS,rS,nS,wh,sS,iS,aS,Jv,oS,lS;function MR(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(tS||(tS={})),(function(e){e.M365Content="m365content"})(rS||(rS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(nS||(nS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(wh||(wh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(sS||(sS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(iS||(iS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(aS||(aS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Jv||(Jv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(oS||(oS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(lS||(lS={}));var Yt,Xv,Qv,cS,uS,dS,fS,hS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Yt||(Yt={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Xv||(Xv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Qv||(Qv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(cS||(cS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(uS||(uS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(dS||(dS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(fS||(fS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(hS||(hS={}));const FR={errorCode:wh.NOT_SUPPORTED_ON_PLATFORM},LR={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var mS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Mf;const zR=new Uint8Array(16);function UR(){if(!Mf&&(Mf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mf(zR)}const Xn=[];for(let e=0;e<256;++e)Xn.push((e+256).toString(16).slice(1));function BR(e,t=0){return Xn[e[t+0]]+Xn[e[t+1]]+Xn[e[t+2]]+Xn[e[t+3]]+"-"+Xn[e[t+4]]+Xn[e[t+5]]+"-"+Xn[e[t+6]]+Xn[e[t+7]]+"-"+Xn[e[t+8]]+Xn[e[t+9]]+"-"+Xn[e[t+10]]+Xn[e[t+11]]+Xn[e[t+12]]+Xn[e[t+13]]+Xn[e[t+14]]+Xn[e[t+15]]}function WR(e,t,r){if(mS.randomUUID&&!e)return mS.randomUUID();const n=(e=e||{}).random||(e.rng||UR)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,BR(n)}var qR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function VR(e){return typeof e=="string"&&qR.test(e)}function rE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function HR(){return WR()}function nE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&nE(e[t])})),Object.freeze(e)}function KR(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function GR(e){return e.protocol==="https:"}function YR(){if(xm())throw new Error("window object undefined at SSR check");return window}function xm(){return typeof window>"u"}function JR(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function XR(e){if(!e)throw new Error("id must not be empty");if(VR(e)===!1)throw new Error("id must be a valid UUID")}const QR=!!performance&&"now"in performance;function px(){return QR?performance.now()+performance.timeOrigin:void 0}function pS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Jv.NotAdult})})})}let yd=class{constructor(t=HR()){this.uuid=t,XR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const sE=e=>{const{uuid:t}=e,r=mx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},ZR=e=>{const{uuidAsString:t}=e,r=mx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new yd(t):void 0})};var Zv={exports:{}},gS,yS;function e$(){if(yS)return gS;yS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return gS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var t$=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let b=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((j,S)=>{if(j==="%%")return"%";b++;const _=t.formatters[S];if(typeof _=="function"){const E=f[b];j=_.call(p,E),f.splice(b,1),b--}return j})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=e$(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},r$={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=r$.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=t$(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Zv,Zv.exports);var gx=Zv.exports;const n$=new yd,s$=gx.debug.formatArgs;gx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${n$.toString()}]`,s$.call(this,e)};const i$=gx.debug("teamsJs");function la(e){return i$.extend(e)}function Zr(e,t){return`${e}_${t}`}function iE(e){return/^v\d+_[\w.]+$/.test(e)}function vo(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const a$=la("flushMessageQueue");function aE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=sE(s);a$("Flushing message %s from %s message queue via postMessage.",vo(i),n),e.postMessage(i,t)}}}var o$=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const vS="2.0.1",ih=o$,xS=1500,l$=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),c$=/^https:\/\//,Zu="The library has not yet been initialized",u$="The runtime has not yet been initialized",d$="The runtime version is not supported";let Dt=class{};Dt.initializeCalled=!1,Dt.initializeCompleted=!1,Dt.additionalValidOrigins=[],Dt.initializePromise=void 0,Dt.isFramelessWindow=!1,Dt.frameContext=void 0,Dt.hostClientType=void 0,Dt.printCapabilityEnabled=!1,Dt.teamsJsInstanceId=new yd().toString();const oE=la("runtime"),wm=4;function lE(e){return e.apiVersion===wm}function f$(e){if(lE(e))return!0;throw e.apiVersion===-1?new Error(u$):new Error(d$)}let ta={apiVersion:-1,supports:{}};const h$={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},cE=[Yt.desktop,Yt.web,Yt.rigel,Yt.surfaceHub,Yt.teamsRoomsWindows,Yt.teamsRoomsAndroid,Yt.teamsPhones,Yt.teamsDisplays],m$=[Yt.android,Yt.ios,Yt.ipados,Yt.visionOS],wS=[...cE,...m$];function p$(e){let t=e;if(t.apiVersion<wm&&g$.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),lE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const g$=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=mx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],y$={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:cE}],"1.9.0":[{capability:{location:{}},hostClientTypes:wS}],"2.0.0":[{capability:{people:{}},hostClientTypes:wS},{capability:{sharing:{}},hostClientTypes:[Yt.desktop,Yt.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Yt.android,Yt.desktop,Yt.ios,Yt.teamsRoomsAndroid,Yt.teamsPhones,Yt.teamsDisplays,Yt.web]},{capability:{webStorage:{}},hostClientTypes:[Yt.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Yt.android,Yt.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Yt.android,Yt.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Yt.android,Yt.ios,Yt.ipados,Yt.visionOS]}],"2.1.2":[]},Gg=oE.extend("generateBackCompatRuntimeConfig");function uE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=uE(e[n]||{},t[n]));return r}function v$(e,t,r){Gg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Gg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{rE(e,i)>=0&&r[i].forEach((l=>{Dt.hostClientType!==void 0&&l.hostClientTypes.includes(Dt.hostClientType)&&(n=uE(n,l.capability))}))}));const s={apiVersion:wm,hostVersionsInfo:LR,isLegacyTeams:!0,supports:n};return Gg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const Yg=oE.extend("applyRuntimeConfig");function Jg(e){typeof e.apiVersion=="string"&&(Yg("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),Yg("Fast-forwarding runtime %o",e);const t=p$(e);Yg("Applying runtime %o",t),ta=nE(t)}function x$(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const bh="2.46.0";let jh=class dc{static storeCallbackInformation(t,r){dc.callbackInformation.set(t,r)}static clearMessages(){dc.callbackInformation.clear()}static deleteMessageInformation(t){dc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?IS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=dc.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(IS({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),dc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};jh.callbackInformation=new Map;const dE=la("nestedAppAuthUtils"),w$=dE.extend("tryPolyfillWithNestedAppAuthBridge"),b$="v2";function j$(e,t,r){var n;const s=w$;if(Dt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=S$;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=b=>j=>p(j,b);return{addEventListener:(b,j)=>{b==="message"?d.addEventListener(b,x(j)):f(`Event ${b} is not supported by nestedAppAuthBridge`)},postMessage:b=>{const j=(()=>{try{return JSON.parse(b)}catch{return null}})();if(!j||typeof j!="object"||j.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",b);const S=Zr(b$,"nestedAppAuth.execute");y(b,S)},removeEventListener:(b,j)=>{d.removeEventListener(b,x(j))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const S$=dE.extend("createNestedAppAuthBridge");let fo=[];const go=la("validateOrigin");let Mu;function k$(){return ko(this,void 0,void 0,(function*(){Mu||(yield hE())}))}function fE(){return fo.length===0}function hE(e=!1){return ko(this,void 0,void 0,(function*(){if(!fE()&&!e)return fo;if(Mu)return Mu;if(xm())return fo=ih,ih;{go("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),xS);return Mu=fetch(l$,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return go("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return go("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return fo=s.validOrigins,fo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?go(`validOrigins fetch call to CDN failed due to Timeout of ${xS} ms. Defaulting to fallback list`):go("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),fo=ih,fo))),Mu}}))}function bS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function _$(e,t){const r=fE()?ih:fo;return jS(e,r)?Promise.resolve(!0):(go("Origin %s is not in the local valid origins list, fetching from CDN",e),hE(t).then((n=>jS(e,n))))}function jS(e,t){if(!GR(e))return go("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>bS(n,r))))return!0;for(const n of Dt.additionalValidOrigins)if(bS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return go(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Dt.additionalValidOrigins),!1}k$();const xl=la("communication");let ot=class{},Zt=class{};function N$(e,t){if(Zt.messageListener=r=>(function(n){return ko(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void SS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return gE(s,i).then((l=>{l?((function(u,d){Dt.isFramelessWindow||ot.parentWindow&&!ot.parentWindow.closed&&u!==ot.parentWindow||(ot.parentWindow=u,ot.parentOrigin=d),ot.parentWindow&&ot.parentWindow.closed&&(ot.parentWindow=null,ot.parentOrigin=null),aE(ot.parentWindow,ot.parentOrigin,Zt.parentMessageQueue,"parent")})(s,i),s!==ot.parentWindow?AM():_S(n)):SS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),ot.currentWindow=ot.currentWindow||YR(),ot.parentWindow=ot.currentWindow.parent!==ot.currentWindow.self?ot.currentWindow.parent:ot.currentWindow.opener,ot.topWindow=ot.currentWindow.top,(ot.parentWindow||e)&&ot.currentWindow.addEventListener("message",Zt.messageListener,!1),!ot.parentWindow){const r=ot.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Dt.isFramelessWindow=!0,r.onNativeMessage=_S}try{return ot.parentOrigin="*",bm(t,"initialize",[bh,wm,e]).then((([r,n,s,i])=>(j$(i,ot.currentWindow,{onMessage:$$,sendPostMessage:T$}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{ot.parentOrigin=null}}function C$(e,t,...r){return bm(e,t,r).then((([n])=>n))}function E$(e,t,r,...n){return bm(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function bm(e,t,r=void 0){if(!iE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=pE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{Zt.promiseCallbacks.set(i,l)}))))}))}function A$(e){return e.map((t=>x$(t)?t.serialize():t))}function P$(e,t,r,n,s){var i;return ko(this,void 0,void 0,(function*(){const l=A$(t),[u]=yield bm(n,e,l);if(MR(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${wh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function Li(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!iE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=pE(e,t,s);n&&Zt.callbacks.set(i.uuid,n)}Zt.parentMessageQueue=[],Zt.topMessageQueue=[],Zt.nextMessageId=0,Zt.callbacks=new Map,Zt.promiseCallbacks=new Map,Zt.portCallbacks=new Map,Zt.legacyMessageIdsToUuidMap={};const O$=xl.extend("sendNestedAuthRequestToTopWindow");function T$(e,t){const r=O$,n=ot.topWindow,s=(function(i,l){const u=Zt.nextMessageId++,d=new yd;return Zt.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:px(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",vo(s),{actionName:s.func}),mE(n,s)}const I$=xl.extend("sendRequestToTargetWindowHelper");function mE(e,t){const r=I$,n=(function(i){return i===ot.topWindow&&e0()?"top":i===ot.parentWindow?"parent":null})(e),s=sE(t);if(Dt.isFramelessWindow)ot.currentWindow&&ot.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",vo(s),n),ot.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===ot.topWindow&&e0()?ot.topOrigin:l===ot.parentWindow?ot.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",vo(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",vo(s),n),M$(e).push(t))}return t}const D$=xl.extend("sendMessageToParentHelper");function pE(e,t,r,n,s){const i=D$,l=ot.parentWindow,u=(function(d,m,f,p,y){const x=Zt.nextMessageId++,b=new yd;Zt.legacyMessageIdsToUuidMap[x]=b;const j=Dt.teamsJsInstanceId;return{id:x,uuid:b,func:m,timestamp:Date.now(),monotonicTimestamp:px(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:j}})(e,t,r,n);return jh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",vo(u),{actionName:t,args:r}),mE(l,u)}const SS=xl.extend("processIncomingMessage"),R$=xl.extend("processAuthBridgeMessage");function $$(e,t){var r,n;const s=R$;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?gE(d,m)?(ot.topWindow&&!ot.topWindow.closed&&d!==ot.topWindow||(ot.topWindow=d,ot.topOrigin=m),ot.topWindow&&ot.topWindow.closed&&(ot.topWindow=null,ot.topOrigin=null),aE(ot.topWindow,ot.topOrigin,Zt.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const Xg=xl.extend("shouldProcessIncomingMessage");function gE(e,t){return ko(this,void 0,void 0,(function*(){if(ot.currentWindow&&e===ot.currentWindow)return Xg("Should not process message because it is coming from the current window"),!1;if(ot.currentWindow&&ot.currentWindow.location&&t&&t===ot.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return Xg("Message has an invalid origin of %s",t),!1}const n=yield _$(r);return n||Xg("Message has an invalid origin of %s",t),n}}))}const kS=xl.extend("handleIncomingMessageFromParent");function ah(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Qg(e,t){const r=ah(t,e.uuid);r&&t.delete(r),e.uuid?Zt.legacyMessageIdsToUuidMap={}:delete Zt.legacyMessageIdsToUuidMap[e.id]}function _S(e){const t=kS,r=px();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=ZR(n),i=(function(l){const u=kS;if(!l.uuid)return Zt.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=ah(Zt.callbacks,d);if(m)return m;const f=ah(Zt.promiseCallbacks,d);if(f)return f;const p=ah(Zt.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",vo(l))})(s);if(i){const l=Zt.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),jh.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Qg(s,Zt.callbacks)));const u=Zt.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Qg(s,Zt.promiseCallbacks));const d=Zt.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Qg(s,Zt.portCallbacks)}s.uuid&&(Zt.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;jh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',vo(n),n.func),jM(n.func,n.args)}else t("Received an unknown message: %O",e)}function e0(){return ot.topWindow!==ot.parentWindow}function M$(e){return e===ot.topWindow&&e0()?Zt.topMessageQueue:e===ot.parentWindow?Zt.parentMessageQueue:[]}const yE=la("internal"),F$=yE.extend("ensureInitializeCalled"),L$=yE.extend("ensureInitialized");function vE(){if(!Dt.initializeCalled)throw F$(Zu),new Error(Zu)}function Mc(e,...t){if(!Dt.initializeCompleted)throw L$("%s. initializeCalled: %s",Zu,Dt.initializeCalled.toString()),new Error(Zu);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Dt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Dt.frameContext}".`)}return f$(e)}function z$(e){let t=Dt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&c$.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Dt.additionalValidOrigins=t}function U$(e){if(!W$(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${xE}-${wE}).`)}function B$(e){if(JR(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(q$(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const xE=4,wE=256;function W$(e){return e.length<wE&&e.length>xE}function q$(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let V$=class{constructor(t){this.idAsString=t,B$(t)}serialize(){return this.toString()}toString(){return this.idAsString}},H$=class extends V${constructor(t){super(t),U$(t)}toJSON(){return{appIdAsString:this.toString()}}};function bE(e){return e==null}const jm="v2",Zg=la("app"),NS={Success:"appInitialization.success"};var CS,ES;function K$(e){return fM(Zr(jm,"app.initialize"),e)}function G$(){return new Promise((e=>{vE(),e(C$(Zr(jm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Xv.teams,clientType:t.hostClientType?t.hostClientType:Yt.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new H$(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Dt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function Y$(){return hM(Zr(jm,"app.notifySuccess"))}function J$(e){mM(Zr(jm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(CS||(CS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(ES||(ES={})),Zg("teamsjs instance is version %s, starting at %s UTC (%s local)",bh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(xm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?Zg("teamsjs is being used from %s. %s",t,r):Zg("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const X$="v2",Q$=[];function Z$(e){Dt.frameContext&&(Dt.frameContext===Qv.task?Q$.push(e):SM("messageForChild"))}function eM(){nl(Zr(X$,"dialog.registerMessageForChildHandler"),"messageForChild",Z$,!1)}const vc="v2";var AS,PS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(AS||(AS={}));function tM(){nl(Zr(vc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",nM,!1),nl(Zr(vc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",sM,!1),nl(Zr(vc,"menus.registerSetModuleViewHandler"),"setModuleView",rM,!1)}function rM(e){Mc(ta),Li(Zr(vc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function nM(e){Mc(ta),Li(Zr(vc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function sM(e){Mc(ta),Li(Zr(vc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(PS||(PS={}));class iM{}let aM=class extends iM{validate(t){return!0}deserialize(t){return t}};function oM(){nl(Zr(cl,"pages.config.registerSettingsSaveHandler"),"settings.save",lM,!1),nl(Zr(cl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",uM,!1)}function lM(e){new cM(e).notifySuccess()}let cM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),Li(Zr(cl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Li(Zr(cl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function uM(){new dM().notifySuccess()}let dM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),Li(Zr(cl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Li(Zr(cl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const jE=la("app");function fM(e,t){return xm()?(jE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):KR((()=>(function(r,n){return new Promise((s=>{Dt.initializeCalled||(Dt.initializeCalled=!0,bM(),Dt.initializePromise=N$(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=vS})=>{Dt.frameContext=i,Dt.hostClientType=l,Dt.clientSupportedSDKVersion=d;try{ku("Parsing %s",u);let m=JSON.parse(u);if(ku("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=pS(m),u&&Jg(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{ku("Attempting to parse %s as an SDK version",u),isNaN(rE(u,vS))||(Dt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(ku("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=pS(f),Jg(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Jg(v$(Dt.clientSupportedSDKVersion,h$,y$))}}Dt.initializeCompleted=!0})),tM(),oM(),eM()),Array.isArray(n)&&z$(n),Dt.initializePromise!==void 0?s(Dt.initializePromise):ku("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function hM(e){return ko(this,void 0,void 0,(function*(){if(Dt.initializeCompleted)return OS(e);if(!Dt.initializePromise)throw new Error(Zu);return Dt.initializePromise.then((()=>OS(e)))}))}function OS(e){return ko(this,void 0,void 0,(function*(){return Mc(ta)&&(!((t=ta.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?P$(NS.Success,[bh],new aM,e).then((()=>({hasFinishedSuccessfully:!0}))):(Li(e,NS.Success,[bh]),{hasFinishedSuccessfully:"unknown"});var t}))}const ku=jE.extend("initializeHelper");function mM(e,t){!bE(t)&&vE(),kM(e,t)}function pM(){return yM(Zr(cl,"pages.backStack.navigateBack"))}function gM(){return!(!Mc(ta)||!ta.supports.pages)&&!!ta.supports.pages.backStack}const cl="v2";function yM(e){return new Promise((t=>{if(Mc(ta),!gM())throw FR;t(E$(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function vM(){nl(Zr("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",xM,!1)}function xM(){pM()}const wM=la("handlers");let Or=class Xi{static initializeHandlers(){Xi.handlers.themeChange=_M,Xi.handlers.load=NM,Xi.handlers.beforeUnload=CM,vM()}static uninitializeHandlers(){Xi.handlers={},Xi.themeChangeHandler=null,Xi.loadHandler=null,Xi.beforeUnloadHandler=null,Xi.beforeSuspendOrTerminateHandler=null,Xi.resumeHandler=null}};function bM(){Or.initializeHandlers()}Or.handlers={},Or.themeChangeHandler=null,Or.loadHandler=null,Or.beforeUnloadHandler=null,Or.beforeSuspendOrTerminateHandler=null,Or.resumeHandler=null,Or.hostToAppPerformanceMetricsHandler=null;const TS=wM.extend("callHandler");function jM(e,t){const r=Or.handlers[e];return r?(TS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(TS("Handler for action message %s not found.",e),[!1,void 0])}function nl(e,t,r,n=!0,s=[]){r?(Or.handlers[t]=r,n&&Li(e,"registerHandler",[t,...s])):delete Or.handlers[t]}function SM(e){delete Or.handlers[e]}function kM(e,t){Or.themeChangeHandler=t,!bE(t)&&Li(e,"registerHandler",["themeChange"])}function _M(e){Or.themeChangeHandler&&Or.themeChangeHandler(e)}function IS(e){Or.hostToAppPerformanceMetricsHandler&&Or.hostToAppPerformanceMetricsHandler(e)}function NM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Or.resumeHandler?(Or.resumeHandler(t),DS()):Or.loadHandler&&(Or.loadHandler(e),DS())}function CM(){return ko(this,void 0,void 0,(function*(){const e=()=>{Li(Zr("v2","handleBeforeUnload"),"readyToUnload",[])};Or.beforeSuspendOrTerminateHandler?(yield Or.beforeSuspendOrTerminateHandler(),e()):Or.beforeUnloadHandler&&Or.beforeUnloadHandler(e)||e()}))}const EM=la("childProxyingCommunication");function DS(){return!1}function AM(e,t){return!1}EM.extend("handleIncomingMessageFromChild");const PM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),OM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await K$();const y=await G$();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),J$(x=>{d(x)}),Y$()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(PM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})},TM="service_idsx5cg",IM="template_4owif48",DM="OXfL2jaTJuDR5IThS";async function Sm(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:TM,template_id:IM,user_id:DM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let i=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?i=l.text:l.message?i=l.message:l.error&&(i=l.error)}catch{i=s||i}throw new Error(i)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$M=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),RS=e=>{const t=$M(e);return t.charAt(0).toUpperCase()+t.slice(1)},SE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),MM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...FM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:SE("lucide",s),...!i&&!MM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(LM,{ref:i,iconNode:t,className:SE(`lucide-${RM(RS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=RS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$S=At("arrow-left",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],BM=At("arrow-right",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],t0=At("badge-check",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qr=At("calendar",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],oh=At("chart-no-axes-column",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ts=At("chevron-down",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fc=At("chevron-left",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],YM=At("chevron-up",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],er=At("circle-alert",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tr=At("circle-check-big",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],km=At("clock",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vs=At("crown",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],tF=At("database",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],MS=At("ellipsis-vertical",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sF=At("funnel",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fu=At("info",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],yx=At("lightbulb",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ys=At("list",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cF=At("lock",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],dF=At("log-in",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zn=At("log-out",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Lc=At("mail",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Lu=At("minus",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kE=At("pencil",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$n=At("plus",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ul=At("refresh-cw",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],FS=At("search",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jn=At("settings",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LS=At("shield-check",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Mn=At("shield",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],SF=At("shuffle",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nc=At("sparkles",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Hu=At("square-pen",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],zS=At("square",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],sc=At("star",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],AF=At("tag",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zi=At("trash-2",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_E=At("triangle-alert",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],NE=At("trophy",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sl=At("user-plus",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],_u=At("user-x",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gs=At("user",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ns=At("users",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Qn=At("vote",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],LF=At("workflow",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ds=At("x",zF),ri="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",UF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var vd=e=>e.type==="checkbox",el=e=>e instanceof Date,Is=e=>e==null;const CE=e=>typeof e=="object";var dn=e=>!Is(e)&&!Array.isArray(e)&&CE(e)&&!el(e),EE=e=>dn(e)&&e.target?vd(e.target)?e.target.checked:e.target.value:e,BF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,AE=(e,t)=>e.has(BF(t)),WF=e=>{const t=e.constructor&&e.constructor.prototype;return dn(t)&&t.hasOwnProperty("isPrototypeOf")},vx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function xn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(vx&&(e instanceof Blob||n))&&(r||dn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!WF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=xn(e[s]));else return e;return t}var _m=e=>/^\w*$/.test(e),Hr=e=>e===void 0,xx=e=>Array.isArray(e)?e.filter(Boolean):[],wx=e=>xx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Je=(e,t,r)=>{if(!t||!dn(e))return r;const n=(_m(t)?[t]:wx(t)).reduce((s,i)=>Is(s)?s:s[i],e);return Hr(n)||n===e?Hr(e[t])?r:e[t]:n},Ks=e=>typeof e=="boolean",kr=(e,t,r)=>{let n=-1;const s=_m(t)?[t]:wx(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=dn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Sh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Di={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},PE=lt.createContext(null);PE.displayName="HookFormContext";const bx=()=>lt.useContext(PE);var OE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Di.all&&(t._proxyFormState[l]=!n||Di.all),r&&(r[l]=!0),e[l]}});return s};const jx=typeof window<"u"?lt.useLayoutEffect:lt.useEffect;function qF(e){const t=bx(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=lt.useState(r._formState),d=lt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return jx(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),lt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),lt.useMemo(()=>OE(l,r,d.current,!1),[l,r])}var Js=e=>typeof e=="string",r0=(e,t,r,n,s)=>Js(e)?(n&&t.watch.add(e),Je(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Je(r,i))):(n&&(t.watchAll=!0),r),n0=e=>Is(e)||!CE(e);function Ri(e,t,r=new WeakSet){if(n0(e)||n0(t))return e===t;if(el(e)&&el(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(el(l)&&el(u)||dn(l)&&dn(u)||Array.isArray(l)&&Array.isArray(u)?!Ri(l,u,r):l!==u)return!1}}return!0}function VF(e){const t=bx(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=lt.useRef(s),m=lt.useRef(u),f=lt.useRef(void 0),p=lt.useRef(r),y=lt.useRef(n);m.current=u;const[x,b]=lt.useState(()=>{const O=r._getWatch(n,d.current);return m.current?m.current(O):O}),j=lt.useCallback(O=>{const T=r0(n,r._names,O||r._formValues,!1,d.current);return m.current?m.current(T):T},[r._formValues,r._names,n]),S=lt.useCallback(O=>{if(!i){const T=r0(n,r._names,O||r._formValues,!1,d.current);if(m.current){const P=m.current(T);Ri(P,f.current)||(b(P),f.current=P)}else b(T)}},[r._formValues,r._names,i,n]);jx(()=>((p.current!==r||!Ri(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:O=>{S(O.values)}})),[r,l,n,S]),lt.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=y.current,C=lt.useMemo(()=>{if(i)return null;const O=!_&&!Ri(E,n);return _||O?j():null},[i,_,n,E,j]);return C!==null?C:x}function HF(e){const t=bx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=AE(s._names.array,r),d=lt.useMemo(()=>Je(s._formValues,r,Je(s._defaultValues,r,l)),[s,r,l]),m=VF({control:s,name:r,defaultValue:d,exact:!0}),f=qF({control:s,name:r,exact:!0}),p=lt.useRef(e),y=lt.useRef(void 0),x=lt.useRef(s.register(r,{...e.rules,value:m,...Ks(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=lt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Je(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Je(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Je(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Je(f.validatingFields,r)},error:{enumerable:!0,get:()=>Je(f.errors,r)}}),[f,r]),j=lt.useCallback(C=>x.current.onChange({target:{value:EE(C),name:r},type:Sh.CHANGE}),[r]),S=lt.useCallback(()=>x.current.onBlur({target:{value:Je(s._formValues,r),name:r},type:Sh.BLUR}),[r,s._formValues]),_=lt.useCallback(C=>{const O=Je(s._fields,r);O&&C&&(O._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=lt.useMemo(()=>({name:r,value:m,...Ks(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:j,onBlur:S,ref:_}),[r,n,f.disabled,j,S,_,m]);return lt.useEffect(()=>{const C=s._options.shouldUnregister||i,O=y.current;O&&O!==r&&!u&&s.unregister(O),s.register(r,{...p.current.rules,...Ks(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(P,$)=>{const G=Je(s._fields,P);G&&G._f&&(G._f.mount=$)};if(T(r,!0),C){const P=xn(Je(s._options.defaultValues,r,p.current.defaultValue));kr(s._defaultValues,r,P),Hr(Je(s._formValues,r))&&kr(s._formValues,r,P)}return!u&&s.register(r),y.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):T(r,!1)}},[r,s,u,i]),lt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),lt.useMemo(()=>({field:E,formState:f,fieldState:b}),[E,f,b])}const hc=e=>e.render(HF(e));var KF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Ku=e=>Array.isArray(e)?e:[e],US=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function TE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&dn(s)&&i){const l=TE(s,i);dn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var ys=e=>dn(e)&&!Object.keys(e).length,Sx=e=>e.type==="file",$i=e=>typeof e=="function",kh=e=>{if(!vx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},IE=e=>e.type==="select-multiple",kx=e=>e.type==="radio",GF=e=>kx(e)||vd(e),ey=e=>kh(e)&&e.isConnected;function YF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Hr(e)?n++:e[t[n++]];return e}function JF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Hr(e[t]))return!1;return!0}function on(e,t){const r=Array.isArray(t)?t:_m(t)?[t]:wx(t),n=r.length===1?e:YF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(dn(n)&&ys(n)||Array.isArray(n)&&JF(n))&&on(e,r.slice(0,-1)),e}var XF=e=>{for(const t in e)if($i(e[t]))return!0;return!1};function DE(e){return Array.isArray(e)||dn(e)&&!XF(e)}function s0(e,t={}){for(const r in e)DE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},s0(e[r],t[r])):Hr(e[r])||(t[r]=!0);return t}function fc(e,t,r){r||(r=s0(t));for(const n in e)DE(e[n])?Hr(t)||n0(r[n])?r[n]=s0(e[n],Array.isArray(e[n])?[]:{}):fc(e[n],Is(t)?{}:t[n],r[n]):r[n]=!Ri(e[n],t[n]);return r}const BS={value:!1,isValid:!1},WS={value:!0,isValid:!0};var RE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Hr(e[0].attributes.value)?Hr(e[0].value)||e[0].value===""?WS:{value:e[0].value,isValid:!0}:WS:BS}return BS},$E=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Hr(e)?e:t?e===""?NaN:e&&+e:r&&Js(e)?new Date(e):n?n(e):e;const qS={isValid:!1,value:null};var ME=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,qS):qS;function VS(e){const t=e.ref;return Sx(t)?t.files:kx(t)?ME(e.refs).value:IE(t)?[...t.selectedOptions].map(({value:r})=>r):vd(t)?RE(e.refs).value:$E(Hr(t.value)?e.ref.value:t.value,e)}var QF=(e,t,r,n)=>{const s={};for(const i of e){const l=Je(t,i);l&&kr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},_h=e=>e instanceof RegExp,Nu=e=>Hr(e)?e:_h(e)?e.source:dn(e)?_h(e.value)?e.value.source:e.value:e,HS=e=>({isOnSubmit:!e||e===Di.onSubmit,isOnBlur:e===Di.onBlur,isOnChange:e===Di.onChange,isOnAll:e===Di.all,isOnTouch:e===Di.onTouched});const KS="AsyncFunction";var ZF=e=>!!e&&!!e.validate&&!!($i(e.validate)&&e.validate.constructor.name===KS||dn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===KS)),eL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),GS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Gu=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Je(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(Gu(u,t))break}else if(dn(u)&&Gu(u,t))break}}};function YS(e,t,r){const n=Je(e,r);if(n||_m(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=Je(t,i),u=Je(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var tL=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return ys(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Di.all))},rL=(e,t,r)=>!e||!t||e===t||Ku(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),nL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,sL=(e,t)=>!xx(Je(e,t)).length&&on(e,t),iL=(e,t,r)=>{const n=Ku(Je(e,r));return kr(n,"root",t[r]),kr(e,r,n),e};function JS(e,t,r="validate"){if(Js(e)||Array.isArray(e)&&e.every(Js)||Ks(e)&&!e)return{type:r,message:Js(e)?e:"",ref:t}}var ic=e=>dn(e)&&!_h(e)?e:{value:e,message:""},XS=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:b,name:j,valueAsNumber:S,mount:_}=e._f,E=Je(r,j);if(!_||t.has(j))return{};const C=u?u[0]:l,O=U=>{s&&C.reportValidity&&(C.setCustomValidity(Ks(U)?"":U||""),C.reportValidity())},T={},P=kx(l),$=vd(l),G=P||$,M=(S||Sx(l))&&Hr(l.value)&&Hr(E)||kh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,V=KF.bind(null,j,n,T),L=(U,le,ee,se=xa.maxLength,B=xa.minLength)=>{const re=U?le:ee;T[j]={type:U?se:B,message:re,ref:l,...V(U?se:B,re)}};if(i?!Array.isArray(E)||!E.length:d&&(!G&&(M||Is(E))||Ks(E)&&!E||$&&!RE(u).isValid||P&&!ME(u).isValid)){const{value:U,message:le}=Js(d)?{value:!!d,message:d}:ic(d);if(U&&(T[j]={type:xa.required,message:le,ref:C,...V(xa.required,le)},!n))return O(le),T}if(!M&&(!Is(p)||!Is(y))){let U,le;const ee=ic(y),se=ic(p);if(!Is(E)&&!isNaN(E)){const B=l.valueAsNumber||E&&+E;Is(ee.value)||(U=B>ee.value),Is(se.value)||(le=B<se.value)}else{const B=l.valueAsDate||new Date(E),re=ce=>new Date(new Date().toDateString()+" "+ce),ne=l.type=="time",ae=l.type=="week";Js(ee.value)&&E&&(U=ne?re(E)>re(ee.value):ae?E>ee.value:B>new Date(ee.value)),Js(se.value)&&E&&(le=ne?re(E)<re(se.value):ae?E<se.value:B<new Date(se.value))}if((U||le)&&(L(!!U,ee.message,se.message,xa.max,xa.min),!n))return O(T[j].message),T}if((m||f)&&!M&&(Js(E)||i&&Array.isArray(E))){const U=ic(m),le=ic(f),ee=!Is(U.value)&&E.length>+U.value,se=!Is(le.value)&&E.length<+le.value;if((ee||se)&&(L(ee,U.message,le.message),!n))return O(T[j].message),T}if(x&&!M&&Js(E)){const{value:U,message:le}=ic(x);if(_h(U)&&!E.match(U)&&(T[j]={type:xa.pattern,message:le,ref:l,...V(xa.pattern,le)},!n))return O(le),T}if(b){if($i(b)){const U=await b(E,r),le=JS(U,C);if(le&&(T[j]={...le,...V(xa.validate,le.message)},!n))return O(le.message),T}else if(dn(b)){let U={};for(const le in b){if(!ys(U)&&!n)break;const ee=JS(await b[le](E,r),C,le);ee&&(U={...ee,...V(le,ee.message)},O(ee.message),n&&(T[j]=U))}if(!ys(U)&&(T[j]={ref:C,...U},!n))return T}}return O(!0),T};const aL={mode:Di.onSubmit,reValidateMode:Di.onChange,shouldFocusError:!0};function oL(e={}){let t={...aL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:$i(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=dn(t.defaultValues)||dn(t.values)?xn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:xn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:US(),state:US()},x=t.criteriaMode===Di.all,b=D=>Q=>{clearTimeout(m),m=setTimeout(D,Q)},j=async D=>{if(!t.disabled&&(f.isValid||p.isValid||D)){const Q=t.resolver?ys((await $()).errors):await M(n,!0);Q!==r.isValid&&y.state.next({isValid:Q})}},S=(D,Q)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((D||Array.from(u.mount)).forEach(de=>{de&&(Q?kr(r.validatingFields,de,Q):on(r.validatingFields,de))}),y.state.next({validatingFields:r.validatingFields,isValidating:!ys(r.validatingFields)}))},_=(D,Q=[],de,Ne,pe=!0,ke=!0)=>{if(Ne&&de&&!t.disabled){if(l.action=!0,ke&&Array.isArray(Je(n,D))){const Ve=de(Je(n,D),Ne.argA,Ne.argB);pe&&kr(n,D,Ve)}if(ke&&Array.isArray(Je(r.errors,D))){const Ve=de(Je(r.errors,D),Ne.argA,Ne.argB);pe&&kr(r.errors,D,Ve),sL(r.errors,D)}if((f.touchedFields||p.touchedFields)&&ke&&Array.isArray(Je(r.touchedFields,D))){const Ve=de(Je(r.touchedFields,D),Ne.argA,Ne.argB);pe&&kr(r.touchedFields,D,Ve)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=fc(s,i)),y.state.next({name:D,isDirty:L(D,Q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else kr(i,D,Q)},E=(D,Q)=>{kr(r.errors,D,Q),y.state.next({errors:r.errors})},C=D=>{r.errors=D,y.state.next({errors:r.errors,isValid:!1})},O=(D,Q,de,Ne)=>{const pe=Je(n,D);if(pe){const ke=Je(i,D,Hr(de)?Je(s,D):de);Hr(ke)||Ne&&Ne.defaultChecked||Q?kr(i,D,Q?ke:VS(pe._f)):ee(D,ke),l.mount&&j()}},T=(D,Q,de,Ne,pe)=>{let ke=!1,Ve=!1;const ht={name:D};if(!t.disabled){if(!de||Ne){(f.isDirty||p.isDirty)&&(Ve=r.isDirty,r.isDirty=ht.isDirty=L(),ke=Ve!==ht.isDirty);const St=Ri(Je(s,D),Q);Ve=!!Je(r.dirtyFields,D),St?on(r.dirtyFields,D):kr(r.dirtyFields,D,!0),ht.dirtyFields=r.dirtyFields,ke=ke||(f.dirtyFields||p.dirtyFields)&&Ve!==!St}if(de){const St=Je(r.touchedFields,D);St||(kr(r.touchedFields,D,de),ht.touchedFields=r.touchedFields,ke=ke||(f.touchedFields||p.touchedFields)&&St!==de)}ke&&pe&&y.state.next(ht)}return ke?ht:{}},P=(D,Q,de,Ne)=>{const pe=Je(r.errors,D),ke=(f.isValid||p.isValid)&&Ks(Q)&&r.isValid!==Q;if(t.delayError&&de?(d=b(()=>E(D,de)),d(t.delayError)):(clearTimeout(m),d=null,de?kr(r.errors,D,de):on(r.errors,D)),(de?!Ri(pe,de):pe)||!ys(Ne)||ke){const Ve={...Ne,...ke&&Ks(Q)?{isValid:Q}:{},errors:r.errors,name:D};r={...r,...Ve},y.state.next(Ve)}},$=async D=>{S(D,!0);const Q=await t.resolver(i,t.context,QF(D||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(D),Q},G=async D=>{const{errors:Q}=await $(D);if(D)for(const de of D){const Ne=Je(Q,de);Ne?kr(r.errors,de,Ne):on(r.errors,de)}else r.errors=Q;return Q},M=async(D,Q,de={valid:!0})=>{for(const Ne in D){const pe=D[Ne];if(pe){const{_f:ke,...Ve}=pe;if(ke){const ht=u.array.has(ke.name),St=pe._f&&ZF(pe._f);St&&f.validatingFields&&S([ke.name],!0);const $t=await XS(pe,u.disabled,i,x,t.shouldUseNativeValidation&&!Q,ht);if(St&&f.validatingFields&&S([ke.name]),$t[ke.name]&&(de.valid=!1,Q))break;!Q&&(Je($t,ke.name)?ht?iL(r.errors,$t,ke.name):kr(r.errors,ke.name,$t[ke.name]):on(r.errors,ke.name))}!ys(Ve)&&await M(Ve,Q,de)}}return de.valid},V=()=>{for(const D of u.unMount){const Q=Je(n,D);Q&&(Q._f.refs?Q._f.refs.every(de=>!ey(de)):!ey(Q._f.ref))&&Z(D)}u.unMount=new Set},L=(D,Q)=>!t.disabled&&(D&&Q&&kr(i,D,Q),!Ri(ce(),s)),U=(D,Q,de)=>r0(D,u,{...l.mount?i:Hr(Q)?s:Js(D)?{[D]:Q}:Q},de,Q),le=D=>xx(Je(l.mount?i:s,D,t.shouldUnregister?Je(s,D,[]):[])),ee=(D,Q,de={})=>{const Ne=Je(n,D);let pe=Q;if(Ne){const ke=Ne._f;ke&&(!ke.disabled&&kr(i,D,$E(Q,ke)),pe=kh(ke.ref)&&Is(Q)?"":Q,IE(ke.ref)?[...ke.ref.options].forEach(Ve=>Ve.selected=pe.includes(Ve.value)):ke.refs?vd(ke.ref)?ke.refs.forEach(Ve=>{(!Ve.defaultChecked||!Ve.disabled)&&(Array.isArray(pe)?Ve.checked=!!pe.find(ht=>ht===Ve.value):Ve.checked=pe===Ve.value||!!pe)}):ke.refs.forEach(Ve=>Ve.checked=Ve.value===pe):Sx(ke.ref)?ke.ref.value="":(ke.ref.value=pe,ke.ref.type||y.state.next({name:D,values:xn(i)})))}(de.shouldDirty||de.shouldTouch)&&T(D,pe,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&ae(D)},se=(D,Q,de)=>{for(const Ne in Q){if(!Q.hasOwnProperty(Ne))return;const pe=Q[Ne],ke=D+"."+Ne,Ve=Je(n,ke);(u.array.has(D)||dn(pe)||Ve&&!Ve._f)&&!el(pe)?se(ke,pe,de):ee(ke,pe,de)}},B=(D,Q,de={})=>{const Ne=Je(n,D),pe=u.array.has(D),ke=xn(Q);kr(i,D,ke),pe?(y.array.next({name:D,values:xn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&de.shouldDirty&&y.state.next({name:D,dirtyFields:fc(s,i),isDirty:L(D,ke)})):Ne&&!Ne._f&&!Is(ke)?se(D,ke,de):ee(D,ke,de),GS(D,u)&&y.state.next({...r,name:D}),y.state.next({name:l.mount?D:void 0,values:xn(i)})},re=async D=>{l.mount=!0;const Q=D.target;let de=Q.name,Ne=!0;const pe=Je(n,de),ke=St=>{Ne=Number.isNaN(St)||el(St)&&isNaN(St.getTime())||Ri(St,Je(i,de,St))},Ve=HS(t.mode),ht=HS(t.reValidateMode);if(pe){let St,$t;const yr=Q.type?VS(pe._f):EE(D),nr=D.type===Sh.BLUR||D.type===Sh.FOCUS_OUT,Kr=!eL(pe._f)&&!t.resolver&&!Je(r.errors,de)&&!pe._f.deps||nL(nr,Je(r.touchedFields,de),r.isSubmitted,ht,Ve),dr=GS(de,u,nr);kr(i,de,yr),nr?(!Q||!Q.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(D),d&&d(0)):pe._f.onChange&&pe._f.onChange(D);const Bt=T(de,yr,nr),rn=!ys(Bt)||dr;if(!nr&&y.state.next({name:de,type:D.type,values:xn(i)}),Kr)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?nr&&j():nr||j()),rn&&y.state.next({name:de,...dr?{}:Bt});if(!nr&&dr&&y.state.next({...r}),t.resolver){const{errors:sr}=await $([de]);if(ke(yr),Ne){const Cn=YS(r.errors,n,de),nt=YS(sr,n,Cn.name||de);St=nt.error,de=nt.name,$t=ys(sr)}}else S([de],!0),St=(await XS(pe,u.disabled,i,x,t.shouldUseNativeValidation))[de],S([de]),ke(yr),Ne&&(St?$t=!1:(f.isValid||p.isValid)&&($t=await M(n,!0)));Ne&&(pe._f.deps&&(!Array.isArray(pe._f.deps)||pe._f.deps.length>0)&&ae(pe._f.deps),P(de,$t,St,Bt))}},ne=(D,Q)=>{if(Je(r.errors,Q)&&D.focus)return D.focus(),1},ae=async(D,Q={})=>{let de,Ne;const pe=Ku(D);if(t.resolver){const ke=await G(Hr(D)?D:pe);de=ys(ke),Ne=D?!pe.some(Ve=>Je(ke,Ve)):de}else D?(Ne=(await Promise.all(pe.map(async ke=>{const Ve=Je(n,ke);return await M(Ve&&Ve._f?{[ke]:Ve}:Ve)}))).every(Boolean),!(!Ne&&!r.isValid)&&j()):Ne=de=await M(n);return y.state.next({...!Js(D)||(f.isValid||p.isValid)&&de!==r.isValid?{}:{name:D},...t.resolver||!D?{isValid:de}:{},errors:r.errors}),Q.shouldFocus&&!Ne&&Gu(n,ne,D?pe:u.mount),Ne},ce=(D,Q)=>{let de={...l.mount?i:s};return Q&&(de=TE(Q.dirtyFields?r.dirtyFields:r.touchedFields,de)),Hr(D)?de:Js(D)?Je(de,D):D.map(Ne=>Je(de,Ne))},I=(D,Q)=>({invalid:!!Je((Q||r).errors,D),isDirty:!!Je((Q||r).dirtyFields,D),error:Je((Q||r).errors,D),isValidating:!!Je(r.validatingFields,D),isTouched:!!Je((Q||r).touchedFields,D)}),H=D=>{D&&Ku(D).forEach(Q=>on(r.errors,Q)),y.state.next({errors:D?r.errors:{}})},Fe=(D,Q,de)=>{const Ne=(Je(n,D,{_f:{}})._f||{}).ref,pe=Je(r.errors,D)||{},{ref:ke,message:Ve,type:ht,...St}=pe;kr(r.errors,D,{...St,...Q,ref:Ne}),y.state.next({name:D,errors:r.errors,isValid:!1}),de&&de.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},ie=(D,Q)=>$i(D)?y.state.subscribe({next:de=>"values"in de&&D(U(void 0,Q),de)}):U(D,Q,!0),me=D=>y.state.subscribe({next:Q=>{rL(D.name,Q.name,D.exact)&&tL(Q,D.formState||f,qt,D.reRenderRoot)&&D.callback({values:{...i},...r,...Q,defaultValues:s})}}).unsubscribe,q=D=>(l.mount=!0,p={...p,...D.formState},me({...D,formState:p})),Z=(D,Q={})=>{for(const de of D?Ku(D):u.mount)u.mount.delete(de),u.array.delete(de),Q.keepValue||(on(n,de),on(i,de)),!Q.keepError&&on(r.errors,de),!Q.keepDirty&&on(r.dirtyFields,de),!Q.keepTouched&&on(r.touchedFields,de),!Q.keepIsValidating&&on(r.validatingFields,de),!t.shouldUnregister&&!Q.keepDefaultValue&&on(s,de);y.state.next({values:xn(i)}),y.state.next({...r,...Q.keepDirty?{isDirty:L()}:{}}),!Q.keepIsValid&&j()},je=({disabled:D,name:Q})=>{(Ks(D)&&l.mount||D||u.disabled.has(Q))&&(D?u.disabled.add(Q):u.disabled.delete(Q))},F=(D,Q={})=>{let de=Je(n,D);const Ne=Ks(Q.disabled)||Ks(t.disabled);return kr(n,D,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:D}},name:D,mount:!0,...Q}}),u.mount.add(D),de?je({disabled:Ks(Q.disabled)?Q.disabled:t.disabled,name:D}):O(D,!0,Q.value),{...Ne?{disabled:Q.disabled||t.disabled}:{},...t.progressive?{required:!!Q.required,min:Nu(Q.min),max:Nu(Q.max),minLength:Nu(Q.minLength),maxLength:Nu(Q.maxLength),pattern:Nu(Q.pattern)}:{},name:D,onChange:re,onBlur:re,ref:pe=>{if(pe){F(D,Q),de=Je(n,D);const ke=Hr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Ve=GF(ke),ht=de._f.refs||[];if(Ve?ht.find(St=>St===ke):ke===de._f.ref)return;kr(n,D,{_f:{...de._f,...Ve?{refs:[...ht.filter(ey),ke,...Array.isArray(Je(s,D))?[{}]:[]],ref:{type:ke.type,name:D}}:{ref:ke}}}),O(D,!1,void 0,ke)}else de=Je(n,D,{}),de._f&&(de._f.mount=!1),(t.shouldUnregister||Q.shouldUnregister)&&!(AE(u.array,D)&&l.action)&&u.unMount.add(D)}}},be=()=>t.shouldFocusError&&Gu(n,ne,u.mount),Ge=D=>{Ks(D)&&(y.state.next({disabled:D}),Gu(n,(Q,de)=>{const Ne=Je(n,de);Ne&&(Q.disabled=Ne._f.disabled||D,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(pe=>{pe.disabled=Ne._f.disabled||D}))},0,!1))},K=(D,Q)=>async de=>{let Ne;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let pe=xn(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:ke,values:Ve}=await $();r.errors=ke,pe=xn(Ve)}else await M(n);if(u.disabled.size)for(const ke of u.disabled)on(pe,ke);if(on(r.errors,"root"),ys(r.errors)){y.state.next({errors:{}});try{await D(pe,de)}catch(ke){Ne=ke}}else Q&&await Q({...r.errors},de),be(),setTimeout(be);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ys(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},He=(D,Q={})=>{Je(n,D)&&(Hr(Q.defaultValue)?B(D,xn(Je(s,D))):(B(D,Q.defaultValue),kr(s,D,xn(Q.defaultValue))),Q.keepTouched||on(r.touchedFields,D),Q.keepDirty||(on(r.dirtyFields,D),r.isDirty=Q.defaultValue?L(D,xn(Je(s,D))):L()),Q.keepError||(on(r.errors,D),f.isValid&&j()),y.state.next({...r}))},Ke=(D,Q={})=>{const de=D?xn(D):s,Ne=xn(de),pe=ys(D),ke=pe?s:Ne;if(Q.keepDefaultValues||(s=de),!Q.keepValues){if(Q.keepDirtyValues){const Ve=new Set([...u.mount,...Object.keys(fc(s,i))]);for(const ht of Array.from(Ve))Je(r.dirtyFields,ht)?kr(ke,ht,Je(i,ht)):B(ht,Je(ke,ht))}else{if(vx&&Hr(D))for(const Ve of u.mount){const ht=Je(n,Ve);if(ht&&ht._f){const St=Array.isArray(ht._f.refs)?ht._f.refs[0]:ht._f.ref;if(kh(St)){const $t=St.closest("form");if($t){$t.reset();break}}}}if(Q.keepFieldsRef)for(const Ve of u.mount)B(Ve,Je(ke,Ve));else n={}}i=t.shouldUnregister?Q.keepDefaultValues?xn(s):{}:xn(ke),y.array.next({values:{...ke}}),y.state.next({values:{...ke}})}u={mount:Q.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues||!t.shouldUnregister&&!ys(ke),l.watch=!!t.shouldUnregister,y.state.next({submitCount:Q.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:Q.keepDirty?r.isDirty:!!(Q.keepDefaultValues&&!Ri(D,s)),isSubmitted:Q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?fc(s,i):r.dirtyFields:Q.keepDefaultValues&&D?fc(s,D):Q.keepDirty?r.dirtyFields:{},touchedFields:Q.keepTouched?r.touchedFields:{},errors:Q.keepErrors?r.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Pt=(D,Q)=>Ke($i(D)?D(i):D,Q),vt=(D,Q={})=>{const de=Je(n,D),Ne=de&&de._f;if(Ne){const pe=Ne.refs?Ne.refs[0]:Ne.ref;pe.focus&&(pe.focus(),Q.shouldSelect&&$i(pe.select)&&pe.select())}},qt=D=>{r={...r,...D}},ar={control:{register:F,unregister:Z,getFieldState:I,handleSubmit:K,setError:Fe,_subscribe:me,_runSchema:$,_focusError:be,_getWatch:U,_getDirty:L,_setValid:j,_setFieldArray:_,_setDisabledField:je,_setErrors:C,_getFieldArray:le,_reset:Ke,_resetDefaultValues:()=>$i(t.defaultValues)&&t.defaultValues().then(D=>{Pt(D,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:Ge,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(D){l=D},get _defaultValues(){return s},get _names(){return u},set _names(D){u=D},get _formState(){return r},get _options(){return t},set _options(D){t={...t,...D}}},subscribe:q,trigger:ae,register:F,handleSubmit:K,watch:ie,setValue:B,getValues:ce,reset:Pt,resetField:He,clearErrors:H,unregister:Z,setError:Fe,setFocus:vt,getFieldState:I};return{...ar,formControl:ar}}function ed(e={}){const t=lt.useRef(void 0),r=lt.useRef(void 0),[n,s]=lt.useState({isDirty:!1,isValidating:!1,isLoading:$i(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$i(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!$i(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=oL(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,jx(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),lt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),lt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),lt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),lt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),lt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),lt.useEffect(()=>{e.values&&!Ri(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),lt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=OE(n,i),t.current}function FE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=FE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ir(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=FE(e))&&(n&&(n+=" "),n+=t);return n}var lL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function _x(e){if(typeof e!="string")return!1;var t=lL;return t.includes(e)}var cL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function LE(e){if(typeof e!="string")return!1;var t=cL;return t.includes(e)}function zE(e){return typeof e=="string"&&e.startsWith("data-")}function bo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return LE(n)||zE(n)});return Object.fromEntries(t)}function Nx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return bo(t)}return typeof e=="object"&&!Array.isArray(e)?bo(e):null}function vi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return LE(n)||zE(n)||_x(n)});return Object.fromEntries(t)}var uL=["children","width","height","viewBox","className","style","title","desc"];function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i0.apply(null,arguments)}function dL(e,t){if(e==null)return{};var r,n,s=fL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=dL(e,uL),p=i||{width:n,height:s,x:0,y:0},y=Ir("recharts-surface",l);return v.createElement("svg",i0({},vi(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),hL=["children","className"];function a0(){return a0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a0.apply(null,arguments)}function mL(e,t){if(e==null)return{};var r,n,s=pL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ta=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=mL(e,hL),i=Ir("recharts-layer",n);return v.createElement("g",a0({className:i},vi(s),{ref:t}),r)}),gL=v.createContext(null);function _r(e){return function(){return e}}const BE=Math.cos,Nh=Math.sin,qi=Math.sqrt,Ch=Math.PI,Nm=2*Ch,o0=Math.PI,l0=2*o0,Ko=1e-6,yL=l0-Ko;function WE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function vL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WE;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class xL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WE:vL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>Ko)if(!(Math.abs(p*d-m*f)>Ko)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,b=s-u,j=d*d+m*m,S=x*x+b*b,_=Math.sqrt(j),E=Math.sqrt(y),C=i*Math.tan((o0-Math.acos((j+y-S)/(2*_*E)))/2),O=C/E,T=C/_;Math.abs(O-1)>Ko&&this._append`L${t+O*f},${r+O*p}`,this._append`A${i},${i},0,0,${+(p*x>f*b)},${this._x1=t+T*d},${this._y1=r+T*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>Ko||Math.abs(this._y1-f)>Ko)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%l0+l0),y>yL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>Ko&&this._append`A${n},${n},0,${+(y>=o0)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Cx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new xL(t)}function Ex(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qE(e){this._context=e}qE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Cm(e){return new qE(e)}function VE(e){return e[0]}function HE(e){return e[1]}function KE(e,t){var r=_r(!0),n=null,s=Cm,i=null,l=Cx(u);e=typeof e=="function"?e:e===void 0?VE:_r(e),t=typeof t=="function"?t:t===void 0?HE:_r(t);function u(d){var m,f=(d=Ex(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:_r(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:_r(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:_r(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function Ff(e,t,r){var n=null,s=_r(!0),i=null,l=Cm,u=null,d=Cx(m);e=typeof e=="function"?e:e===void 0?VE:_r(+e),t=typeof t=="function"?t:_r(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?HE:_r(+r);function m(p){var y,x,b,j=(p=Ex(p)).length,S,_=!1,E,C=new Array(j),O=new Array(j);for(i==null&&(u=l(E=d())),y=0;y<=j;++y){if(!(y<j&&s(S=p[y],y,p))===_)if(_=!_)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=y-1;b>=x;--b)u.point(C[b],O[b]);u.lineEnd(),u.areaEnd()}_&&(C[y]=+e(S,y,p),O[y]=+t(S,y,p),u.point(n?+n(S,y,p):C[y],r?+r(S,y,p):O[y]))}if(E)return u=null,E+""||null}function f(){return KE().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:_r(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:_r(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:_r(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:_r(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:_r(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:_r(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:_r(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class GE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function wL(e){return new GE(e,!0)}function bL(e){return new GE(e,!1)}const Ax={draw(e,t){const r=qi(t/Ch);e.moveTo(r,0),e.arc(0,0,r,0,Nm)}},jL={draw(e,t){const r=qi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},YE=qi(1/3),SL=YE*2,kL={draw(e,t){const r=qi(t/SL),n=r*YE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_L={draw(e,t){const r=qi(t),n=-r/2;e.rect(n,n,r,r)}},NL=.8908130915292852,JE=Nh(Ch/10)/Nh(7*Ch/10),CL=Nh(Nm/10)*JE,EL=-BE(Nm/10)*JE,AL={draw(e,t){const r=qi(t*NL),n=CL*r,s=EL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=Nm*i/5,u=BE(l),d=Nh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},ty=qi(3),PL={draw(e,t){const r=-qi(t/(ty*3));e.moveTo(0,r*2),e.lineTo(-ty*r,-r),e.lineTo(ty*r,-r),e.closePath()}},fi=-.5,hi=qi(3)/2,c0=1/qi(12),OL=(c0/2+1)*3,TL={draw(e,t){const r=qi(t/OL),n=r/2,s=r*c0,i=n,l=r*c0+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(fi*n-hi*s,hi*n+fi*s),e.lineTo(fi*i-hi*l,hi*i+fi*l),e.lineTo(fi*u-hi*d,hi*u+fi*d),e.lineTo(fi*n+hi*s,fi*s-hi*n),e.lineTo(fi*i+hi*l,fi*l-hi*i),e.lineTo(fi*u+hi*d,fi*d-hi*u),e.closePath()}};function IL(e,t){let r=null,n=Cx(s);e=typeof e=="function"?e:_r(e||Ax),t=typeof t=="function"?t:_r(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:_r(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:_r(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Eh(){}function Ah(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function XE(e){this._context=e}XE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ah(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DL(e){return new XE(e)}function QE(e){this._context=e}QE.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RL(e){return new QE(e)}function ZE(e){this._context=e}ZE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $L(e){return new ZE(e)}function eA(e){this._context=e}eA.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ML(e){return new eA(e)}function QS(e){return e<0?-1:1}function ZS(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(QS(i)+QS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function ek(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ry(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function Ph(e){this._context=e}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ry(this,this._t0,ek(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ry(this,ek(this,r=ZS(this,e,t)),r);break;default:ry(this,this._t0,r=ZS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function tA(e){this._context=new rA(e)}(tA.prototype=Object.create(Ph.prototype)).point=function(e,t){Ph.prototype.point.call(this,t,e)};function rA(e){this._context=e}rA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function FL(e){return new Ph(e)}function LL(e){return new tA(e)}function nA(e){this._context=e}nA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=tk(e),s=tk(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tk(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function zL(e){return new nA(e)}function Em(e,t){this._context=e,this._t=t}Em.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function UL(e){return new Em(e,.5)}function BL(e){return new Em(e,0)}function WL(e){return new Em(e,1)}function jc(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function u0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function qL(e,t){return e[t]}function VL(e){const t=[];return t.key=e,t}function HL(){var e=_r([]),t=u0,r=jc,n=qL;function s(i){var l=Array.from(e.apply(this,arguments),VL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=Ex(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:_r(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:_r(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?u0:typeof i=="function"?i:_r(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??jc,s):r},s}function KL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}jc(e,t)}}function GL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}jc(e,t)}}function YL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,b=0;b<u;++b){var j=e[t[b]],S=j[n][1]||0,_=j[n-1][1]||0;x+=S-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,jc(e,t)}}var ny={},sy={},rk;function JL(){return rk||(rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(sy)),sy}var iy={},nk;function sA(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(iy)),iy}var ay={},sk;function Px(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(ay)),ay}var oy={},ly={},ik;function XL(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(ly)),ly}var ak;function Ox(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XL(),r=Px();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(oy)),oy}var ok;function Tx(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JL(),r=sA(),n=Px(),s=Ox();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(ny)),ny}var cy,lk;function QL(){return lk||(lk=1,cy=Tx().get),cy}var ZL=QL();const Sc=Bi(ZL);var Qs=e=>e===0?0:e>0?1:-1,na=e=>typeof e=="number"&&e!=+e,Ia=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,xt=e=>(typeof e=="number"||e instanceof Number)&&!na(e),sa=e=>xt(e)||typeof e=="string",ez=0,td=e=>{var t=++ez;return"".concat(e||"").concat(t)},Ui=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xt(t)&&typeof t!="string")return n;var i;if(Ia(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return na(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},iA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function rs(e,t,r){return xt(e)&&xt(t)?e+r*(t-e):t}function tz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Sc(n,t))===r)}var Un=e=>e===null||typeof e>"u",xd=e=>Un(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rz(e){return e!=null}function zc(){}var nz=["type","size","sizeType"];function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d0.apply(null,arguments)}function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(r),!0).forEach(function(n){sz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sz(e,t,r){return(t=iz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iz(e){var t=az(e,"string");return typeof t=="symbol"?t:t+""}function az(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e,t){if(e==null)return{};var r,n,s=lz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aA={symbolCircle:Ax,symbolCross:jL,symbolDiamond:kL,symbolSquare:_L,symbolStar:AL,symbolTriangle:PL,symbolWye:TL},cz=Math.PI/180,uz=e=>{var t="symbol".concat(xd(e));return aA[t]||Ax},dz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*cz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fz=(e,t)=>{aA["symbol".concat(xd(e))]=t},oA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=oz(e,nz),i=uk(uk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=uz(l),x=IL().type(y).size(dz(r,n,l)),b=x();if(b!==null)return b},{className:d,cx:m,cy:f}=i,p=vi(i);return xt(m)&&xt(f)&&xt(r)?v.createElement("path",d0({},p,{className:Ir("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};oA.registerSymbol=fz;var lA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,hz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{_x(s)&&(n[s]=(i=>r[s](r,i)))}),n},mz=(e,t,r)=>n=>(e(t,r,n),null),Ix=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];_x(s)&&typeof i=="function"&&(n||(n={}),n[s]=mz(i,t,r))}),n};function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(n){gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gz(e,t,r){return(t=yz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bi(e,t){var r=pz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var uy={},dy={},fk;function xz(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(dy)),dy}var fy={},hk;function cA(){return hk||(hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(fy)),fy}var hy={},my={},py={},mk;function wz(){return mk||(mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(py)),py}var pk;function Dx(){return pk||(pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(my)),my}var gy={},gk;function bz(){return gk||(gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(gy)),gy}var yk;function jz(){return yk||(yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dx(),r=bz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(hy)),hy}var yy={},vy={},vk;function Sz(){return vk||(vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tx();function r(n){return function(s){return t.get(s,n)}}e.property=r})(vy)),vy}var xy={},wy={},by={},jy={},xk;function uA(){return xk||(xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(jy)),jy}var Sy={},wk;function dA(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Sy)),Sy}var ky={},bk;function fA(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(ky)),ky}var jk;function kz(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uA(),r=dA(),n=fA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(b,j,S,_,E,C){const O=y(b,j,S,_,E,C);return O!==void 0?!!O:i(b,j,x,C)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const b=Object.keys(p);if(f==null)return b.length===0;if(b.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let j=0;j<b.length;j++){const S=b[j];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,j]of p.entries()){const S=f.get(b);if(y(S,j,b,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let j=0;j<p.length;j++){const S=p[j];let _=!1;for(let E=0;E<f.length;E++){if(b.has(E))continue;const C=f[E];let O=!1;if(y(C,S,j,f,p,x)&&(O=!0),O){b.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(by)),by}var Sk;function hA(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(wy)),wy}var _y={},Ny={},Cy={},kk;function _z(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Cy)),Cy}var Ey={},_k;function mA(){return _k||(_k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ey)),Ey}var Ay={},Nk;function pA(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",b="[object Error]",j="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",O="[object BigUint64Array]",T="[object Int8Array]",P="[object Int16Array]",$="[object Int32Array]",G="[object BigInt64Array]",M="[object Float32Array]",V="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=G,e.bigUint64ArrayTag=O,e.booleanTag=s,e.dataViewTag=j,e.dateTag=u,e.errorTag=b,e.float32ArrayTag=M,e.float64ArrayTag=V,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=$,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(Ay)),Ay}var Py={},Ck;function Nz(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Py)),Py}var Ek;function gA(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_z(),r=mA(),n=pA(),s=dA(),i=Nz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,b=void 0){const j=b==null?void 0:b(f,p,y,x);if(j!==void 0)return j;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,b);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[_,E]of f)S.set(_,u(E,_,y,x,b));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const _ of f)S.add(u(_,void 0,y,x,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,b);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,b),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,b),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,b),S}return f}function d(f,p,y=f,x,b){const j=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<j.length;S++){const _=j[S],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,y,x,b))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Ny)),Ny}var Ak;function Cz(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(_y)),_y}var Pk;function Ez(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hA(),r=Cz();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(xy)),xy}var Oy={},Ty={},Iy={},Ok;function Az(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gA(),r=pA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(Iy)),Iy}var Tk;function Pz(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Az();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Ty)),Ty}var Dy={},Ry={},Ik;function yA(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Ry)),Ry}var $y={},Dk;function Oz(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})($y)),$y}var Rk;function Tz(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA(),r=yA(),n=Oz(),s=Ox();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(Dy)),Dy}var $k;function Iz(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hA(),r=Px(),n=Pz(),s=Tx(),i=Tz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Oy)),Oy}var Mk;function Dz(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cA(),r=Sz(),n=Ez(),s=Iz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(yy)),yy}var Fk;function Rz(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xz(),r=cA(),n=jz(),s=Dz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(uy)),uy}var My,Lk;function $z(){return Lk||(Lk=1,My=Rz().uniqBy),My}var Mz=$z();const zk=Bi(Mz);function Fz(e,t,r){return t===!0?zk(e,r):typeof t=="function"?zk(e,t):e}var Fy={exports:{}},Ly={},zy={exports:{}},Uy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk;function Lz(){if(Uk)return Uy;Uk=1;var e=Oc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),b=n({inst:{value:x,getSnapshot:y}}),j=b[0].inst,S=b[1];return i(function(){j.value=x,j.getSnapshot=y,d(j)&&S({inst:j})},[p,x,y]),s(function(){return d(j)&&S({inst:j}),p(function(){d(j)&&S({inst:j})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return Uy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Uy}var Bk;function zz(){return Bk||(Bk=1,zy.exports=Lz()),zy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk;function Uz(){if(Wk)return Ly;Wk=1;var e=Oc(),t=zz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Ly.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var b=i(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=u(function(){function _(P){if(!E){if(E=!0,C=P,P=y(P),x!==void 0&&j.hasValue){var $=j.value;if(x($,P))return O=$}return O=P}if($=O,n(C,P))return $;var G=y(P);return x!==void 0&&x($,G)?(C=P,$):(C=P,O=G)}var E=!1,C,O,T=p===void 0?null:p;return[function(){return _(f())},T===null?void 0:function(){return _(T())}]},[f,p,y,x]);var S=s(m,b[0],b[1]);return l(function(){j.hasValue=!0,j.value=S},[S]),d(S),S},Ly}var qk;function Bz(){return qk||(qk=1,Fy.exports=Uz()),Fy.exports}var Wz=Bz(),Rx=v.createContext(null),qz=e=>e,tn=()=>{var e=v.useContext(Rx);return e?e.store.dispatch:qz},lh=()=>{},Vz=()=>lh,Hz=(e,t)=>e===t;function ft(e){var t=v.useContext(Rx);return Wz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Vz,t?t.store.getState:lh,t?t.store.getState:lh,t?e:lh,Hz)}function Kz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Gz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Yz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Vk=e=>Array.isArray(e)?e:[e];function Jz(e){const t=Array.isArray(e[0])?e[0]:e;return Yz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Xz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Qz=class{constructor(e){this.value=e}deref(){return this.value}},Zz=typeof WeakRef<"u"?WeakRef:Qz,e8=0,Hk=1;function Lf(){return{s:e8,v:void 0,o:null,p:null}}function vA(e,t={}){let r=Lf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const b=arguments[y];if(typeof b=="function"||typeof b=="object"&&b!==null){let j=u.o;j===null&&(u.o=j=new WeakMap);const S=j.get(b);S===void 0?(u=Lf(),j.set(b,u)):u=S}else{let j=u.p;j===null&&(u.p=j=new Map);const S=j.get(b);S===void 0?(u=Lf(),j.set(b,u)):u=S}}const m=u;let f;if(u.s===Hk)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Zz(f):f}return m.s=Hk,m.v=f,f}return l.clearCache=()=>{r=Lf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function t8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Kz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=vA,argsMemoizeOptions:b=[]}=f,j=Vk(y),S=Vk(b),_=Jz(s),E=p(function(){return i++,m.apply(null,arguments)},...j),C=x(function(){l++;const T=Xz(_,arguments);return u=E.apply(null,T),u},...S);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var ye=t8(vA),r8=Object.assign((e,t=ye)=>{Gz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>r8}),By={},Wy={},qy={},Kk;function n8(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(qy)),qy}var Vy={},Hy={},Gk;function xA(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Hy)),Hy}var Yk;function s8(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Vy)),Vy}var Jk;function i8(){return Jk||(Jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n8(),r=s8(),n=Ox();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,b)=>{let j=x;for(let S=0;S<b.length&&j!=null;++S)j=j[b[S]];return j},f=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:m(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?m(b,x):typeof b=="object"?b[x]:b,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(b=>f(b,x))})).slice().sort((x,b)=>{for(let j=0;j<p.length;j++){const S=t.compareValues(x.criteria[j],b.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(Wy)),Wy}var Ky={},Xk;function a8(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Ky)),Ky}var Gy={},Qk;function wA(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yA(),r=Dx(),n=uA(),s=fA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Gy)),Gy}var Zk;function o8(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i8(),r=a8(),n=wA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(By)),By}var Yy,e_;function l8(){return e_||(e_=1,Yy=o8().sortBy),Yy}var c8=l8();const Am=Bi(c8);var bA=e=>e.legend.settings,u8=e=>e.legend.size,d8=e=>e.legend.payload;ye([d8,bA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Am(n,r):n});var zf=1;function f8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>zf||Math.abs(l.left-t.left)>zf||Math.abs(l.top-t.top)>zf||Math.abs(l.width-t.width)>zf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Zn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var h8=typeof Symbol=="function"&&Symbol.observable||"@@observable",t_=h8,Jy=()=>Math.random().toString(36).substring(7).split("").join("."),m8={INIT:`@@redux/INIT${Jy()}`,REPLACE:`@@redux/REPLACE${Jy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jy()}`},Oh=m8;function $x(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jA(e,t,r){if(typeof e!="function")throw new Error(Zn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Zn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Zn(1));return r(jA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,_)=>{l.set(_,S)}))}function f(){if(d)throw new Error(Zn(3));return s}function p(S){if(typeof S!="function")throw new Error(Zn(4));if(d)throw new Error(Zn(5));let _=!0;m();const E=u++;return l.set(E,S),function(){if(_){if(d)throw new Error(Zn(6));_=!1,m(),l.delete(E),i=null}}}function y(S){if(!$x(S))throw new Error(Zn(7));if(typeof S.type>"u")throw new Error(Zn(8));if(typeof S.type!="string")throw new Error(Zn(17));if(d)throw new Error(Zn(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(Zn(10));n=S,y({type:Oh.REPLACE})}function b(){const S=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Zn(11));function E(){const O=_;O.next&&O.next(f())}return E(),{unsubscribe:S(E)}},[t_](){return this}}}return y({type:Oh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[t_]:b}}function p8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Oh.INIT})>"u")throw new Error(Zn(12));if(typeof r(void 0,{type:Oh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zn(13))})}function SA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{p8(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],b=y(x,u);if(typeof b>"u")throw u&&u.type,new Error(Zn(14));m[p]=b,d=d||b!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function Th(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function g8(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Zn(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=Th(...u)(s.dispatch),{...s,dispatch:i}}}function kA(e){return $x(e)&&"type"in e&&typeof e.type=="string"}var _A=Symbol.for("immer-nothing"),r_=Symbol.for("immer-draftable"),ti=Symbol.for("immer-state");function Mi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rd=Object.getPrototypeOf;function dl(e){return!!e&&!!e[ti]}function Da(e){var t;return e?NA(e)||Array.isArray(e)||!!e[r_]||!!((t=e.constructor)!=null&&t[r_])||wd(e)||Om(e):!1}var y8=Object.prototype.constructor.toString(),n_=new WeakMap;function NA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=n_.get(r);return n===void 0&&(n=Function.toString.call(r),n_.set(r,n)),n===y8}function Ih(e,t,r=!0){Pm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Pm(e){const t=e[ti];return t?t.type_:Array.isArray(e)?1:wd(e)?2:Om(e)?3:0}function f0(e,t){return Pm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function CA(e,t,r){const n=Pm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function v8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wd(e){return e instanceof Map}function Om(e){return e instanceof Set}function Go(e){return e.copy_||e.base_}function h0(e,t){if(wd(e))return new Map(e);if(Om(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=NA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ti];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(rd(e),n)}else{const n=rd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Mx(e,t=!1){return Tm(e)||dl(e)||!Da(e)||(Pm(e)>1&&Object.defineProperties(e,{set:Uf,add:Uf,clear:Uf,delete:Uf}),Object.freeze(e),t&&Object.values(e).forEach(r=>Mx(r,!0))),e}function x8(){Mi(2)}var Uf={value:x8};function Tm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var w8={};function fl(e){const t=w8[e];return t||Mi(0,e),t}var nd;function EA(){return nd}function b8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function s_(e,t){t&&(fl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function m0(e){p0(e),e.drafts_.forEach(j8),e.drafts_=null}function p0(e){e===nd&&(nd=e.parent_)}function i_(e){return nd=b8(nd,e)}function j8(e){const t=e[ti];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function a_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ti].modified_&&(m0(t),Mi(4)),Da(e)&&(e=Dh(t,e),t.parent_||Rh(t,e)),t.patches_&&fl("Patches").generateReplacementPatches_(r[ti].base_,e,t.patches_,t.inversePatches_)):e=Dh(t,r,[]),m0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_A?e:void 0}function Dh(e,t,r){if(Tm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ti];if(!s)return Ih(t,(i,l)=>o_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Rh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),Ih(l,(d,m)=>o_(e,s,i,d,m,r,u),n),Rh(e,i,!1),r&&e.patches_&&fl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function o_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=Tm(s);if(!(u&&!l)){if(dl(s)){const d=i&&t&&t.type_!==3&&!f0(t.assigned_,n)?i.concat(n):void 0,m=Dh(e,s,d);if(CA(r,n,m),dl(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Da(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;Dh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(wd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Rh(e,s)}}}function Rh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Mx(t,r)}function S8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:EA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Fx;r&&(s=[n],i=sd);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var Fx={get(e,t){if(t===ti)return e;const r=Go(e);if(!f0(r,t))return k8(e,r,t);const n=r[t];return e.finalized_||!Da(n)?n:n===Xy(e.base_,t)?(Qy(e),e.copy_[t]=y0(n,e)):n},has(e,t){return t in Go(e)},ownKeys(e){return Reflect.ownKeys(Go(e))},set(e,t,r){const n=AA(Go(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Xy(Go(e),t),i=s==null?void 0:s[ti];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(v8(r,s)&&(r!==void 0||f0(e.base_,t)))return!0;Qy(e),g0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Xy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Qy(e),g0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Go(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Mi(11)},getPrototypeOf(e){return rd(e.base_)},setPrototypeOf(){Mi(12)}},sd={};Ih(Fx,(e,t)=>{sd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});sd.deleteProperty=function(e,t){return sd.set.call(this,e,t,void 0)};sd.set=function(e,t,r){return Fx.set.call(this,e[0],t,r,e[0])};function Xy(e,t){const r=e[ti];return(r?Go(r):e)[t]}function k8(e,t,r){var s;const n=AA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function AA(e,t){if(!(t in e))return;let r=rd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=rd(r)}}function g0(e){e.modified_||(e.modified_=!0,e.parent_&&g0(e.parent_))}function Qy(e){e.copy_||(e.copy_=h0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&Mi(6),n!==void 0&&typeof n!="function"&&Mi(7);let s;if(Da(t)){const i=i_(this),l=y0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?m0(i):p0(i)}return s_(i,n),a_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===_A&&(s=void 0),this.autoFreeze_&&Mx(s,!0),n){const i=[],l=[];fl("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else Mi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Da(e)||Mi(8),dl(e)&&(e=Ea(e));const t=i_(this),r=y0(e,void 0);return r[ti].isManual_=!0,p0(t),r}finishDraft(e,t){const r=e&&e[ti];(!r||!r.isManual_)&&Mi(9);const{scope_:n}=r;return s_(n,t),a_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=fl("Patches").applyPatches_;return dl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function y0(e,t){const r=wd(e)?fl("MapSet").proxyMap_(e,t):Om(e)?fl("MapSet").proxySet_(e,t):S8(e,t);return(t?t.scope_:EA()).drafts_.push(r),r}function Ea(e){return dl(e)||Mi(10,e),PA(e)}function PA(e){if(!Da(e)||Tm(e))return e;const t=e[ti];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=h0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=h0(e,!0);return Ih(r,(s,i)=>{CA(r,s,PA(i))},n),t&&(t.finalized_=!1),r}var v0=new _8,OA=v0.produce,N8=v0.setUseStrictIteration.bind(v0);function TA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var C8=TA(),E8=TA,A8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Th:Th.apply(null,arguments)};function xi(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ei(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>kA(n)&&n.type===e,r}var IA=class zu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zu.prototype)}static get[Symbol.species](){return zu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zu(...t[0].concat(this)):new zu(...t.concat(this))}};function l_(e){return Da(e)?OA(e,()=>{}):e}function Bf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function P8(e){return typeof e=="boolean"}var O8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new IA;return r&&(P8(r)?l.push(C8):l.push(E8(r.extraArgument))),l},DA="RTK_autoBatch",bn=()=>e=>({payload:e,meta:{[DA]:!0}}),c_=e=>t=>{setTimeout(t,e)},RA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:c_(10):e.type==="callback"?e.queueNotification:c_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[DA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},T8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new IA(e);return n&&s.push(RA(typeof n=="object"?n:void 0)),s};function I8(e){const t=O8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if($x(r))u=SA(r);else throw new Error(ei(1));let d;typeof n=="function"?d=n(t):d=t();let m=Th;s&&(m=A8({trace:!1,...typeof s=="object"&&s}));const f=g8(...d),p=T8(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return jA(u,i,x)}function $A(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(ei(28));if(u in t)throw new Error(ei(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}N8(!1);function D8(e){return typeof e=="function"}function R8(e,t){let[r,n,s]=$A(t),i;if(D8(e))i=()=>l_(e());else{const u=l_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(dl(f)){const x=p(f,d);return x===void 0?f:x}else{if(Da(f))return OA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var $8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",M8=(e=21)=>{let t="",r=e;for(;r--;)t+=$8[Math.random()*64|0];return t},F8=Symbol.for("rtk-slice-createasyncthunk");function L8(e,t){return`${e}/${t}`}function z8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[F8];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(ei(11));const u=(typeof s.reducers=="function"?s.reducers(B8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,T){const P=typeof O=="string"?O:O.type;if(!P)throw new Error(ei(12));if(P in m.sliceCaseReducersByType)throw new Error(ei(13));return m.sliceCaseReducersByType[P]=T,f},addMatcher(O,T){return m.sliceMatchers.push({matcher:O,reducer:T}),f},exposeAction(O,T){return m.actionCreators[O]=T,f},exposeCaseReducer(O,T){return m.sliceCaseReducersByName[O]=T,f}};d.forEach(O=>{const T=u[O],P={reducerName:O,type:L8(i,O),createNotation:typeof s.reducers=="function"};q8(T)?H8(P,T,f,t):W8(P,T,f)});function p(){const[O={},T=[],P=void 0]=typeof s.extraReducers=="function"?$A(s.extraReducers):[s.extraReducers],$={...O,...m.sliceCaseReducersByType};return R8(s.initialState,G=>{for(let M in $)G.addCase(M,$[M]);for(let M of m.sliceMatchers)G.addMatcher(M.matcher,M.reducer);for(let M of T)G.addMatcher(M.matcher,M.reducer);P&&G.addDefaultCase(P)})}const y=O=>O,x=new Map,b=new WeakMap;let j;function S(O,T){return j||(j=p()),j(O,T)}function _(){return j||(j=p()),j.getInitialState()}function E(O,T=!1){function P(G){let M=G[O];return typeof M>"u"&&T&&(M=Bf(b,P,_)),M}function $(G=y){const M=Bf(x,T,()=>new WeakMap);return Bf(M,G,()=>{const V={};for(const[L,U]of Object.entries(s.selectors??{}))V[L]=U8(U,G,()=>Bf(b,G,_),T);return V})}return{reducerPath:O,getSelectors:$,get selectors(){return $(P)},selectSlice:P}}const C={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(O,{reducerPath:T,...P}={}){const $=T??l;return O.inject({reducerPath:$,reducer:S},P),{...C,...E($,!0)}}};return C}}function U8(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Fs=z8();function B8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function W8({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!V8(n))throw new Error(ei(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?xi(e,l):xi(e))}function q8(e){return e._reducerDefinitionType==="asyncThunk"}function V8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function H8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ei(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||Wf,pending:u||Wf,rejected:d||Wf,settled:m||Wf})}function Wf(){}var K8="task",MA="listener",FA="completed",Lx="cancelled",G8=`task-${Lx}`,Y8=`task-${FA}`,x0=`${MA}-${Lx}`,J8=`${MA}-${FA}`,Im=class{constructor(e){Pg(this,"name","TaskAbortError");Pg(this,"message");this.code=e,this.message=`${K8} ${Lx} (reason: ${e})`}},zx=(e,t)=>{if(typeof e!="function")throw new TypeError(ei(32))},$h=()=>{},LA=(e,t=$h)=>(e.catch(t),e),zA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),il=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},al=e=>{if(e.aborted){const{reason:t}=e;throw new Im(t)}};function UA(e,t){let r=$h;return new Promise((n,s)=>{const i=()=>s(new Im(e.reason));if(e.aborted){i();return}r=zA(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=$h})}var X8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Im?"cancelled":"rejected",error:r}}finally{t==null||t()}},Mh=e=>t=>LA(UA(e,t).then(r=>(al(e),r))),BA=e=>{const t=Mh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:xc}=Object,u_={},Dm="listenerMiddleware",Q8=(e,t)=>{const r=n=>zA(e,()=>il(n,e.reason));return(n,s)=>{zx(n);const i=new AbortController;r(i);const l=X8(async()=>{al(e),al(i.signal);const u=await n({pause:Mh(i.signal),delay:BA(i.signal),signal:i.signal});return al(i.signal),u},()=>il(i,Y8));return s!=null&&s.autoJoin&&t.push(l.catch($h)),{result:Mh(e)(l),cancel(){il(i,G8)}}}},Z8=(e,t)=>{const r=async(n,s)=>{al(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await UA(t,Promise.race(u));return al(t),d}finally{i()}};return(n,s)=>LA(r(n,s))},WA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=xi(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ei(21));return zx(i),{predicate:s,type:t,effect:i}},qA=xc(e=>{const{type:t,predicate:r,effect:n}=WA(e);return{id:M8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ei(22))}}},{withTypes:()=>qA}),d_=(e,t)=>{const{type:r,effect:n,predicate:s}=WA(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},w0=e=>{e.pending.forEach(t=>{il(t,x0)})},eU=(e,t)=>()=>{for(const r of t.keys())w0(r);e.clear()},f_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},VA=xc(xi(`${Dm}/add`),{withTypes:()=>VA}),tU=xi(`${Dm}/removeAll`),HA=xc(xi(`${Dm}/remove`),{withTypes:()=>HA}),rU=(...e)=>{console.error(`${Dm}/error`,...e)},bd=(e={})=>{const t=new Map,r=new Map,n=x=>{const b=r.get(x)??0;r.set(x,b+1)},s=x=>{const b=r.get(x)??1;b===1?r.delete(x):r.set(x,b-1)},{extra:i,onError:l=rU}=e;zx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b!=null&&b.cancelActive&&w0(x)}),d=x=>{const b=d_(t,x)??qA(x);return u(b)};xc(d,{withTypes:()=>d});const m=x=>{const b=d_(t,x);return b&&(b.unsubscribe(),x.cancelActive&&w0(b)),!!b};xc(m,{withTypes:()=>m});const f=async(x,b,j,S)=>{const _=new AbortController,E=Z8(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(b,xc({},j,{getOriginalState:S,condition:(O,T)=>E(O,T).then(Boolean),take:E,delay:BA(_.signal),pause:Mh(_.signal),extra:i,signal:_.signal,fork:Q8(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((O,T,P)=>{O!==_&&(il(O,x0),P.delete(O))})},cancel:()=>{il(_,x0),x.pending.delete(_)},throwIfCancelled:()=>{al(_.signal)}})))}catch(O){O instanceof Im||f_(l,O,{raisedBy:"effect"})}finally{await Promise.all(C),il(_,J8),s(x),x.pending.delete(_)}},p=eU(t,r);return{middleware:x=>b=>j=>{if(!kA(j))return b(j);if(VA.match(j))return d(j.payload);if(tU.match(j)){p();return}if(HA.match(j))return m(j.payload);let S=x.getState();const _=()=>{if(S===u_)throw new Error(ei(23));return S};let E;try{if(E=b(j),t.size>0){const C=x.getState(),O=Array.from(t.values());for(const T of O){let P=!1;try{P=T.predicate(j,C,S)}catch($){P=!1,f_(l,$,{raisedBy:"predicate"})}P&&f(T,j,x,_)}}}finally{S=u_}return E},startListening:d,stopListening:m,clearListeners:p}};function ei(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KA=Fs({name:"chartLayout",initialState:nU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:sU,setLayout:iU,setChartSize:aU,setScale:oU}=KA.actions,lU=KA.reducer;function GA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h_(Object(r),!0).forEach(function(n){cU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cU(e,t,r){return(t=uU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uU(e){var t=dU(e,"string");return typeof t=="symbol"?t:t+""}function dU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bs(e,t,r){return Un(e)||Un(t)?r:sa(t)?Sc(e,t,r):typeof t=="function"?t(e):r}var fU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&xt(e[i]))return mc(mc({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&xt(e[l]))return mc(mc({},e),{},{[l]:e[l]+(s||0)})}return e},wl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",m_=1e-4,hU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-m_,i=Math.max(n[0],n[1])+m_,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},mU=(e,t)=>{if(!t||t.length!==2||!xt(t[0])||!xt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!xt(e[0])||e[0]<r)&&(s[0]=r),(!xt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},pU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=na(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},gU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=na(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},yU={sign:pU,expand:KL,none:jc,silhouette:GL,wiggle:YL,positive:gU},vU=(e,t,r)=>{var n=yU[r],s=HL().keys(t).value((i,l)=>Number(bs(i,l,0))).order(u0).offset(n);return s(e)};function xU(e){return e==null?void 0:String(e)}var p_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=bs(i,t.dataKey,t.scale.domain()[l]);return Un(u)?null:t.scale(u)-s/2+n},wU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},bU=e=>{var t=e.flat(2).filter(xt);return[Math.min(...t),Math.max(...t)]},jU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],SU=(e,t,r)=>{if(e!=null)return jU(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=GA(m,t,r),p=bU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},g_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,y_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Am(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function v_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return mc(mc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function YA(e,t){if(e)return String(e);if(typeof t=="string")return t}var kU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},_U=(e,t)=>t==="centric"?e.angle:e.radius,Ua=e=>e.layout.width,Ba=e=>e.layout.height,NU=e=>e.layout.scale,JA=e=>e.layout.margin,Rm=ye(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),$m=ye(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),CU="data-recharts-item-index",EU="data-recharts-item-data-key",jd=60;function x_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AU(e,t,r){return(t=PU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TU=e=>e.brush.height;function IU(e){var t=$m(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:jd;return r+s}return r},0)}function DU(e){var t=$m(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:jd;return r+s}return r},0)}function RU(e){var t=Rm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function $U(e){var t=Rm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Bn=ye([Ua,Ba,JA,TU,IU,DU,RU,$U,bA,u8],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=qf(qf({},p),f),x=y.bottom;y.bottom+=n,y=fU(y,d,m);var b=e-y.left-y.right,j=t-y.top-y.bottom;return qf(qf({brushBottom:x},y),{},{width:Math.max(b,0),height:Math.max(j,0)})}),MU=ye(Bn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ux=ye(Ua,Ba,(e,t)=>({x:0,y:0,width:e,height:t})),FU=v.createContext(null),ni=()=>v.useContext(FU)!=null,Mm=e=>e.brush,Fm=ye([Mm,Bn,JA],(e,t,r)=>({height:e.height,x:xt(e.x)?e.x:t.left,y:xt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:xt(e.width)?e.width:t.width})),Zy={},ev={},tv={},w_;function LU(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},b=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{b(),l=void 0,u=null},S=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=y==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=j,_.flush=S,s==null||s.addEventListener("abort",j,{once:!0}),_}e.debounce=t})(tv)),tv}var b_;function zU(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LU();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...j){f=n.apply(this,j),p=null},s,{edges:m}),x=function(...j){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,j),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,j),f)},b=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=b,x}e.debounce=r})(ev)),ev}var j_;function UU(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(Zy)),Zy}var rv,S_;function BU(){return S_||(S_=1,rv=UU().throttle),rv}var WU=BU();const qU=Bi(WU);var k_=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},XA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=Ia(n)?e:Number(n),d=Ia(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},VU={width:0,height:0,overflow:"visible"},HU={width:0,overflowX:"visible"},KU={height:0,overflowY:"visible"},GU={},YU=e=>{var{width:t,height:r}=e,n=Ia(t),s=Ia(r);return n&&s?VU:n?HU:s?KU:GU};function JU(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function en(e){return Number.isFinite(e)}function jo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b0.apply(null,arguments)}function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function N_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(n){XU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XU(e,t,r){return(t=QU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QA=v.createContext({width:-1,height:-1});function eB(e){return jo(e.width)&&jo(e.height)}function ZA(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return eB(s)?v.createElement(QA.Provider,{value:s},t):null}var Bx=()=>v.useContext(QA),tB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:b={}}=e,j=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>j.current);var[_,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),C=v.useCallback((G,M)=>{E(V=>{var L=Math.round(G),U=Math.round(M);return V.containerWidth===L&&V.containerHeight===U?V:{containerWidth:L,containerHeight:U}})},[]);v.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return zc;var G=U=>{var le,{width:ee,height:se}=U[0].contentRect;C(ee,se),(le=S.current)===null||le===void 0||le.call(S,ee,se)};f>0&&(G=qU(G,f,{trailing:!0,leading:!1}));var M=new ResizeObserver(G),{width:V,height:L}=j.current.getBoundingClientRect();return C(V,L),M.observe(j.current),()=>{M.disconnect()}},[C,f]);var{containerWidth:O,containerHeight:T}=_;k_(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:$}=XA(O,T,{width:s,height:i,aspect:r,maxHeight:d});return k_(P!=null&&P>0||$!=null&&$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,$,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Ir("recharts-responsive-container",y),style:N_(N_({},b),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:j},v.createElement("div",{style:YU({width:s,height:i})},v.createElement(ZA,{width:P,height:$},m)))}),rB=v.forwardRef((e,t)=>{var r=Bx();if(jo(r.width)&&jo(r.height))return e.children;var{width:n,height:s}=JU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=XA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return xt(i)&&xt(l)?v.createElement(ZA,{width:i,height:l},e.children):v.createElement(tB,b0({},e,{width:n,height:s,ref:t}))});function eP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Lm=()=>{var e,t=ni(),r=ft(MU),n=ft(Fm),s=(e=ft(Mm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},nB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sB=()=>{var e;return(e=ft(Bn))!==null&&e!==void 0?e:nB},iB=()=>ft(Ua),aB=()=>ft(Ba),ur=e=>e.layout.layoutType,zm=()=>ft(ur),oB=()=>{var e=zm();return e!==void 0},Um=e=>{var t=tn(),r=ni(),{width:n,height:s}=e,i=Bx(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&jo(l)&&jo(u)&&t(aU({width:l,height:u}))},[t,r,l,u]),null},lB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tP=Fs({name:"legend",initialState:lB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:bn()},removeLegendPayload:{reducer(e,t){var r=Ea(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:bn()}}}),{setLegendSize:hee,setLegendSettings:mee,addLegendPayload:cB,removeLegendPayload:uB}=tP.actions,dB=tP.reducer;function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(null,arguments)}function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(r),!0).forEach(function(n){fB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fB(e,t,r){return(t=hB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pB(e){return Array.isArray(e)&&sa(e[0])&&sa(e[1])?e.join(" ~ "):e}var gB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var T={padding:0,margin:0},P=(u?Am(i,u):i).map(($,G)=>{if($.type==="none")return null;var M=$.formatter||l||pB,{value:V,name:L}=$,U=V,le=L;if(M){var ee=M(V,L,$,G,i);if(Array.isArray(ee))[U,le]=ee;else if(ee!=null)U=ee;else return null}var se=nv({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:se},sa(le)?v.createElement("span",{className:"recharts-tooltip-item-name"},le):null,sa(le)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},U),v.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},b=nv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=nv({margin:0},s),S=!Un(f),_=S?f:"",E=Ir("recharts-default-tooltip",d),C=Ir("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(_=p(f,i));var O=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",j0({className:E,style:b},O),v.createElement("p",{className:C,style:j},v.isValidElement(_)?_:"".concat(_)),x())},Cu="recharts-tooltip-wrapper",yB={visibility:"hidden"};function vB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ir(Cu,{["".concat(Cu,"-right")]:xt(r)&&t&&xt(t.x)&&r>=t.x,["".concat(Cu,"-left")]:xt(r)&&t&&xt(t.x)&&r<t.x,["".concat(Cu,"-bottom")]:xt(n)&&t&&xt(t.y)&&n>=t.y,["".concat(Cu,"-top")]:xt(n)&&t&&xt(t.y)&&n<t.y})}function E_(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&xt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,b=y;return x<b?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var j=p+u,S=y+m;return j>S?Math.max(f,y):Math.max(p,y)}function xB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=E_({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=E_({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=xB({translateX:f,translateY:p,useTranslate3d:u})):m=yB,{cssProperties:m,cssClasses:vB({translateX:f,translateY:p,coordinate:r})}}function A_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A_(Object(r),!0).forEach(function(n){S0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S0(e,t,r){return(t=bB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class SB extends v.PureComponent{constructor(){super(...arguments),S0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),S0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:b,lastBoundingBox:j,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=wB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),O=_?{}:Vf(Vf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=Vf(Vf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},b);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:S},i)}}var kB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Uc={devToolsEnabled:!1,isSsr:kB()},rP=()=>{var e;return(e=ft(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(null,arguments)}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function O_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){_B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _B(e,t,r){return(t=NB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NB(e){var t=CB(e,"string");return typeof t=="symbol"?t:t+""}function CB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T_={curveBasisClosed:RL,curveBasisOpen:$L,curveBasis:DL,curveBumpX:wL,curveBumpY:bL,curveLinearClosed:ML,curveLinear:Cm,curveMonotoneX:FL,curveMonotoneY:LL,curveNatural:zL,curveStep:UL,curveStepAfter:WL,curveStepBefore:BL},Lh=e=>en(e.x)&&en(e.y),I_=e=>e.base!=null&&Lh(e.base)&&Lh(e),Eu=e=>e.x,Au=e=>e.y,EB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(xd(e));return(r==="curveMonotone"||r==="curveBump")&&t?T_["".concat(r).concat(t==="vertical"?"Y":"X")]:T_[r]||Cm},AB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=EB(t,s),u=i?r.filter(Lh):r,d;if(Array.isArray(n)){var m=r.map((x,b)=>O_(O_({},x),{},{base:n[b]}));s==="vertical"?d=Ff().y(Au).x1(Eu).x0(x=>x.base.x):d=Ff().x(Eu).y1(Au).y0(x=>x.base.y);var f=d.defined(I_).curve(l),p=i?m.filter(I_):m;return f(p)}s==="vertical"&&xt(n)?d=Ff().y(Au).x1(Eu).x0(n):xt(n)?d=Ff().x(Eu).y1(Au).y0(n):d=KE().x(Eu).y(Au);var y=d.defined(Lh).curve(l);return y(u)},nP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?AB(e):n;return v.createElement("path",k0({},bo(e),hz(e),{className:Ir("recharts-curve",t),d:i===null?void 0:i,ref:s}))},PB=["x","y","top","left","width","height","className"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(null,arguments)}function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D_(Object(r),!0).forEach(function(n){TB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TB(e,t,r){return(t=IB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IB(e){var t=DB(e,"string");return typeof t=="symbol"?t:t+""}function DB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RB(e,t){if(e==null)return{};var r,n,s=$B(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $B(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MB=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),FB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=RB(e,PB),m=OB({x:t,y:r,top:n,left:s,width:i,height:l},d);return!xt(t)||!xt(r)||!xt(i)||!xt(l)||!xt(n)||!xt(s)?null:v.createElement("path",_0({},vi(m),{className:Ir("recharts-cross",u),d:MB(t,r,i,l,n,s)}))};function LB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function R_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(r),!0).forEach(function(n){zB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zB(e,t,r){return(t=UB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=BB(e,"string");return typeof t=="symbol"?t:t+""}function BB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),sP=(e,t,r)=>e.map(n=>"".concat(WB(n)," ").concat(t,"ms ").concat(r)).join(","),qB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),id=(e,t)=>Object.keys(t).reduce((r,n)=>$_($_({},r),{},{[n]:e(n,t[n])}),{});function M_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(r),!0).forEach(function(n){VB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VB(e,t,r){return(t=HB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zh=(e,t,r)=>e+(t-e)*r,N0=e=>{var{from:t,to:r}=e;return t!==r},iP=(e,t,r)=>{var n=id((s,i)=>{if(N0(i)){var[l,u]=e(i.from,i.to,i.velocity);return wn(wn({},i),{},{from:l,velocity:u})}return i},t);return r<1?id((s,i)=>N0(i)?wn(wn({},i),{},{velocity:zh(i.velocity,n[s].velocity,r),from:zh(i.from,n[s].from,r)}):i,t):iP(e,n,r-1)};function GB(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>wn(wn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>id((y,x)=>x.from,u),m=()=>!Object.values(u).filter(N0).length,f=null,p=y=>{l||(l=y);var x=y-l,b=x/r.dt;u=iP(r,u,b),s(wn(wn(wn({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function YB(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>wn(wn({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=id((j,S)=>zh(...S,r(y)),d);if(i(wn(wn(wn({},e),t),x)),y<1)u=l.setTimeout(f);else{var b=id((j,S)=>zh(...S,r(1)),d);i(wn(wn(wn({},e),t),b))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const JB=(e,t,r,n,s,i)=>{var l=qB(e,t);return r==null?()=>(s(wn(wn({},e),t)),()=>{}):r.isStepper===!0?GB(e,t,r,l,s,i):YB(e,t,r,n,l,s,i)};var Uh=1e-4,aP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],oP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),F_=(e,t)=>r=>{var n=aP(e,t);return oP(n,r)},XB=(e,t)=>r=>{var n=aP(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return oP(s,r)},QB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},ZB=(e,t,r,n)=>{var s=F_(e,r),i=F_(t,n),l=XB(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,b=l(p);if(Math.abs(x-f)<Uh||b<Uh)return i(p);p=u(p-x/b)}return i(p)};return d.isStepper=!1,d},L_=function(){return ZB(...QB(...arguments))},e7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<Uh&&Math.abs(p)<Uh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},t7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return L_(e);case"spring":return e7();default:if(e.split("(")[0]==="cubic-bezier")return L_(e)}return typeof e=="function"?e:null};function r7(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class n7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function s7(){return r7(new n7)}var i7=v.createContext(s7);function a7(e,t){var r=v.useContext(i7);return v.useMemo(()=>t??r(e),[e,t,r])}var o7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},z_={t:0},sv={t:1};function Wx(e){var t=bi(e,o7),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=a7(t.animationId,t.animationManager),[p,y]=v.useState(r?z_:sv),x=v.useRef(null);return v.useEffect(()=>{r||y(sv)},[r]),v.useEffect(()=>{if(!r||!n)return zc;var b=JB(z_,sv,t7(i),s,y,f.getTimeoutController()),j=()=>{x.current=b()};return f.start([d,l,j,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function qx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(td(t)),n=v.useRef(e);return n.current!==e&&(r.current=td(t),n.current=e),r.current}var l7=["radius"],c7=["radius"];function U_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U_(Object(r),!0).forEach(function(n){u7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u7(e,t,r){return(t=d7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7(e){var t=f7(e,"string");return typeof t=="symbol"?t:t+""}function f7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(null,arguments)}function W_(e,t){if(e==null)return{};var r,n,s=h7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var q_=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},V_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lP=e=>{var t=bi(e,V_),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var re=r.current.getTotalLength();re&&s(re)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:j}=t,S=v.useRef(u),_=v.useRef(d),E=v.useRef(i),C=v.useRef(l),O=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),T=qx(O,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=Ir("recharts-rectangle",f);if(!j){var $=vi(t),{radius:G}=$,M=W_($,l7);return v.createElement("path",Bh({},M,{radius:typeof m=="number"?m:void 0,className:P,d:q_(i,l,u,d,m)}))}var V=S.current,L=_.current,U=E.current,le=C.current,ee="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),B=sP(["strokeDasharray"],y,typeof p=="string"?p:V_.animationEasing);return v.createElement(Wx,{animationId:T,key:T,canBegin:n>0,duration:y,easing:p,isActive:j,begin:x},re=>{var ne=rs(V,u,re),ae=rs(L,d,re),ce=rs(U,i,re),I=rs(le,l,re);r.current&&(S.current=ne,_.current=ae,E.current=ce,C.current=I);var H;b?re>0?H={transition:B,strokeDasharray:se}:H={strokeDasharray:ee}:H={strokeDasharray:se};var Fe=vi(t),{radius:ie}=Fe,me=W_(Fe,c7);return v.createElement("path",Bh({},me,{radius:typeof m=="number"?m:void 0,className:P,d:q_(ce,I,ne,ae,m),ref:r,style:B_(B_({},H),t.style)}))})};function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function K_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(r),!0).forEach(function(n){m7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m7(e,t,r){return(t=p7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wh=Math.PI/180,y7=e=>e*180/Math.PI,ss=(e,t,r,n)=>({x:e+Math.cos(-Wh*n)*r,y:t+Math.sin(-Wh*n)*r}),v7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},x7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},w7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=x7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:y7(d),angleInRadian:d}},b7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},j7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},S7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=w7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=b7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?K_(K_({},t),{},{radius:s,angle:j7(f,t)}):null};function cP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=ss(t,r,n,s),u=ss(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C0.apply(null,arguments)}var k7=(e,t)=>{var r=Qs(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Hf=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/Wh,p=d?s:s+i*f,y=ss(t,r,m,p),x=ss(t,r,n,p),b=d?s-i*f:s,j=ss(t,r,m*Math.cos(f*Wh),b);return{center:y,circleTangency:x,lineTangency:j,theta:f}},uP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=k7(i,l),d=i+u,m=ss(t,r,s,i),f=ss(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=ss(t,r,n,i),x=ss(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},_7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=Qs(m-d),{circleTangency:p,lineTangency:y,theta:x}=Hf({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:b,lineTangency:j,theta:S}=Hf({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):uP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:O,theta:T}=Hf({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:P,lineTangency:$,theta:G}=Hf({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),M=u?Math.abs(d-m):Math.abs(d-m)-T-G;if(M<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat($.x,",").concat($.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},N7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dP=e=>{var t=bi(e,N7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=Ir("recharts-sector",p),x=i-s,b=Ui(l,x,0,!0),j;return b>0&&Math.abs(m-f)<360?j=_7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):j=uP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",C0({},vi(t),{className:y,d:j}))};function C7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(lA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=ss(n,s,i,u),m=ss(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return cP(t)}}var iv={},av={},ov={},G_;function E7(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(ov)),ov}var Y_;function A7(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(av)),av}var J_;function P7(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wA(),r=A7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(iv)),iv}var lv,X_;function O7(){return X_||(X_=1,lv=P7().range),lv}var T7=O7();const fP=Bi(T7);function xo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function I7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,r,n;e.length!==2?(t=xo,r=(u,d)=>xo(e(u),d),n=(u,d)=>e(u)-d):(t=e===xo||e===I7?e:D7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function D7(){return 0}function hP(e){return e===null?NaN:+e}function*R7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const $7=Vx(xo),Sd=$7.right;Vx(hP).center;class Q_ extends Map{constructor(t,r=L7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Z_(this,t))}has(t){return super.has(Z_(this,t))}set(t,r){return super.set(M7(this,t),r)}delete(t){return super.delete(F7(this,t))}}function Z_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function M7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function F7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function L7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function z7(e=xo){if(e===xo)return mP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function mP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const U7=Math.sqrt(50),B7=Math.sqrt(10),W7=Math.sqrt(2);function qh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=U7?10:i>=B7?5:i>=W7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?qh(e,t,r*2):[u,d,m]}function E0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?qh(t,e,r):qh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function A0(e,t,r){return t=+t,e=+e,r=+r,qh(e,t,r)[2]}function P0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?A0(t,e,r):A0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function eN(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function tN(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function pP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?mP:z7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),b=Math.min(n,Math.floor(t+(d-m)*p/d+y));pP(e,t,x,b,s)}const i=e[t];let l=r,u=n;for(Pu(e,r,t),s(e[n],i)>0&&Pu(e,r,n);l<u;){for(Pu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?Pu(e,r,u):(++u,Pu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function Pu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function q7(e,t,r){if(e=Float64Array.from(R7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return tN(e);if(t>=1)return eN(e);var n,s=(n-1)*t,i=Math.floor(s),l=eN(pP(e,i).subarray(0,i+1)),u=tN(e.subarray(i+1));return l+(u-l)*(s-i)}}function V7(e,t,r=hP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function H7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ji(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const O0=Symbol("implicit");function Hx(){var e=new Q_,t=[],r=[],n=O0;function s(i){let l=e.get(i);if(l===void 0){if(n!==O0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Q_;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Hx(t,r).unknown(n)},ji.apply(s,arguments),s}function Kx(){var e=Hx().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,b=x?s:n,j=x?n:s;i=(j-b)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),b+=(j-b-i*(y-d))*f,l=i*(1-d),u&&(b=Math.round(b),l=Math.round(l));var S=H7(y).map(function(_){return b+i*_});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return Kx(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},ji.apply(p(),arguments)}function gP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gP(t())},e}function K7(){return gP(Kx.apply(null,arguments).paddingInner(1))}function Gx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function kd(){}var ad=.7,Vh=1/ad,wc="\\s*([+-]?\\d+)\\s*",od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G7=/^#([0-9a-f]{3,8})$/,Y7=new RegExp(`^rgb\\(${wc},${wc},${wc}\\)$`),J7=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),X7=new RegExp(`^rgba\\(${wc},${wc},${wc},${od}\\)$`),Q7=new RegExp(`^rgba\\(${ra},${ra},${ra},${od}\\)$`),Z7=new RegExp(`^hsl\\(${od},${ra},${ra}\\)$`),e9=new RegExp(`^hsla\\(${od},${ra},${ra},${od}\\)$`),rN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gx(kd,ld,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nN,formatHex:nN,formatHex8:t9,formatHsl:r9,formatRgb:sN,toString:sN});function nN(){return this.rgb().formatHex()}function t9(){return this.rgb().formatHex8()}function r9(){return vP(this).formatHsl()}function sN(){return this.rgb().formatRgb()}function ld(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=G7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iN(t):r===3?new Rs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Y7.exec(e))?new Rs(t[1],t[2],t[3],1):(t=J7.exec(e))?new Rs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=X7.exec(e))?Kf(t[1],t[2],t[3],t[4]):(t=Q7.exec(e))?Kf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z7.exec(e))?lN(t[1],t[2]/100,t[3]/100,1):(t=e9.exec(e))?lN(t[1],t[2]/100,t[3]/100,t[4]):rN.hasOwnProperty(e)?iN(rN[e]):e==="transparent"?new Rs(NaN,NaN,NaN,0):null}function iN(e){return new Rs(e>>16&255,e>>8&255,e&255,1)}function Kf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rs(e,t,r,n)}function n9(e){return e instanceof kd||(e=ld(e)),e?(e=e.rgb(),new Rs(e.r,e.g,e.b,e.opacity)):new Rs}function T0(e,t,r,n){return arguments.length===1?n9(e):new Rs(e,t,r,n??1)}function Rs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Gx(Rs,T0,yP(kd,{brighter(e){return e=e==null?Vh:Math.pow(Vh,e),new Rs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Rs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rs(ol(this.r),ol(this.g),ol(this.b),Hh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aN,formatHex:aN,formatHex8:s9,formatRgb:oN,toString:oN}));function aN(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}`}function s9(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}${tl((isNaN(this.opacity)?1:this.opacity)*255)}`}function oN(){const e=Hh(this.opacity);return`${e===1?"rgb(":"rgba("}${ol(this.r)}, ${ol(this.g)}, ${ol(this.b)}${e===1?")":`, ${e})`}`}function Hh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ol(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tl(e){return e=ol(e),(e<16?"0":"")+e.toString(16)}function lN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fi(e,t,r,n)}function vP(e){if(e instanceof Fi)return new Fi(e.h,e.s,e.l,e.opacity);if(e instanceof kd||(e=ld(e)),!e)return new Fi;if(e instanceof Fi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new Fi(l,u,d,e.opacity)}function i9(e,t,r,n){return arguments.length===1?vP(e):new Fi(e,t,r,n??1)}function Fi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Gx(Fi,i9,yP(kd,{brighter(e){return e=e==null?Vh:Math.pow(Vh,e),new Fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Rs(cv(e>=240?e-240:e+120,s,n),cv(e,s,n),cv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Fi(cN(this.h),Gf(this.s),Gf(this.l),Hh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hh(this.opacity);return`${e===1?"hsl(":"hsla("}${cN(this.h)}, ${Gf(this.s)*100}%, ${Gf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cN(e){return e=(e||0)%360,e<0?e+360:e}function Gf(e){return Math.max(0,Math.min(1,e||0))}function cv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Yx=e=>()=>e;function a9(e,t){return function(r){return e+r*t}}function o9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function l9(e){return(e=+e)==1?xP:function(t,r){return r-t?o9(t,r,e):Yx(isNaN(t)?r:t)}}function xP(e,t){var r=t-e;return r?a9(e,r):Yx(isNaN(e)?t:e)}const uN=(function e(t){var r=l9(t);function n(s,i){var l=r((s=T0(s)).r,(i=T0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=xP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function c9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function u9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function d9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=Bc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function f9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function h9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Bc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var I0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uv=new RegExp(I0.source,"g");function m9(e){return function(){return e}}function p9(e){return function(t){return e(t)+""}}function g9(e,t){var r=I0.lastIndex=uv.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=I0.exec(e))&&(s=uv.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Kh(n,s)})),r=uv.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?p9(d[0].x):m9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function Bc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Yx(t):(r==="number"?Kh:r==="string"?(n=ld(t))?(t=n,uN):g9:t instanceof ld?uN:t instanceof Date?f9:u9(t)?c9:Array.isArray(t)?d9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h9:Kh)(e,t)}function Jx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function y9(e,t){t===void 0&&(t=e,e=Bc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function v9(e){return function(){return e}}function Gh(e){return+e}var dN=[0,1];function ws(e){return e}function D0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:v9(isNaN(t)?NaN:.5)}function x9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function w9(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=D0(s,n),i=r(l,i)):(n=D0(n,s),i=r(i,l)),function(u){return i(n(u))}}function b9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=D0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Sd(e,u,1,n)-1;return i[d](s[d](u))}}function _d(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bm(){var e=dN,t=dN,r=Bc,n,s,i,l=ws,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==ws&&(l=x9(e[0],e[y-1])),u=y>2?b9:w9,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),Kh)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,Gh),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=Jx,f()},p.clamp=function(y){return arguments.length?(l=y?!0:ws,f()):l!==ws},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function Xx(){return Bm()(ws,ws)}function j9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function kc(e){return e=Yh(Math.abs(e)),e?e[1]:NaN}function S9(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function k9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cd(e){if(!(t=_9.exec(e)))throw new Error("invalid format: "+e);var t;return new Qx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cd.prototype=Qx.prototype;function Qx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var wP;function C9(e,t){var r=Yh(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(wP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Yh(e,Math.max(0,t+i-1))[0]}function fN(e,t){var r=Yh(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const hN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fN(e*100,t),r:fN,s:C9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mN(e){return e}var pN=Array.prototype.map,gN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E9(e){var t=e.grouping===void 0||e.thousands===void 0?mN:S9(pN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?mN:k9(pN.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=cd(p);var y=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,_=p.width,E=p.comma,C=p.precision,O=p.trim,T=p.type;T==="n"?(E=!0,T="g"):hN[T]||(C===void 0&&(C=12),O=!0,T="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var P=j==="$"?r:j==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",$=j==="$"?n:/[%p]/.test(T)?l:"",G=hN[T],M=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function V(L){var U=P,le=$,ee,se,B;if(T==="c")le=G(L)+le,L="";else{L=+L;var re=L<0||1/L<0;if(L=isNaN(L)?d:G(Math.abs(L),C),O&&(L=N9(L)),re&&+L==0&&b!=="+"&&(re=!1),U=(re?b==="("?b:u:b==="-"||b==="("?"":b)+U,le=(T==="s"?gN[8+wP/3]:"")+le+(re&&b==="("?")":""),M){for(ee=-1,se=L.length;++ee<se;)if(B=L.charCodeAt(ee),48>B||B>57){le=(B===46?s+L.slice(ee+1):L.slice(ee))+le,L=L.slice(0,ee);break}}}E&&!S&&(L=t(L,1/0));var ne=U.length+L.length+le.length,ae=ne<_?new Array(_-ne+1).join(y):"";switch(E&&S&&(L=t(ae+L,ae.length?_-le.length:1/0),ae=""),x){case"<":L=U+L+le+ae;break;case"=":L=U+ae+L+le;break;case"^":L=ae.slice(0,ne=ae.length>>1)+U+L+le+ae.slice(ne);break;default:L=ae+U+L+le;break}return i(L)}return V.toString=function(){return p+""},V}function f(p,y){var x=m((p=cd(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(kc(y)/3)))*3,j=Math.pow(10,-b),S=gN[8+b/3];return function(_){return x(j*_)+S}}return{format:m,formatPrefix:f}}var Yf,Zx,bP;A9({thousands:",",grouping:[3],currency:["$",""]});function A9(e){return Yf=E9(e),Zx=Yf.format,bP=Yf.formatPrefix,Yf}function P9(e){return Math.max(0,-kc(Math.abs(e)))}function O9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kc(t)/3)))*3-kc(Math.abs(e)))}function T9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kc(t)-kc(e))+1}function jP(e,t,r,n){var s=P0(e,t,r),i;switch(n=cd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=O9(s,l))&&(n.precision=i),bP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=T9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=P9(s))&&(n.precision=i-(n.type==="%")*2);break}}return Zx(n)}function _o(e){var t=e.domain;return e.ticks=function(r){var n=t();return E0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return jP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=A0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function SP(){var e=Xx();return e.copy=function(){return _d(e,SP())},ji.apply(e,arguments),_o(e)}function kP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Gh),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return kP(e).unknown(t)},e=arguments.length?Array.from(e,Gh):[0,1],_o(r)}function _P(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function yN(e){return Math.log(e)}function vN(e){return Math.exp(e)}function I9(e){return-Math.log(-e)}function D9(e){return-Math.exp(-e)}function R9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $9(e){return e===10?R9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function xN(e){return(t,r)=>-e(-t,r)}function ew(e){const t=e(yN,vN),r=t.domain;let n=10,s,i;function l(){return s=M9(n),i=$9(n),r()[0]<0?(s=xN(s),i=xN(i),e(I9,D9)):e(yN,vN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),b,j;const S=u==null?10:+u;let _=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(b=1;b<n;++b)if(j=y<0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;_.push(j)}}else for(;y<=x;++y)for(b=n-1;b>=1;--b)if(j=y>0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;_.push(j)}_.length*2<S&&(_=E0(m,f,S))}else _=E0(y,x,Math.min(x-y,S)).map(i);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=cd(d)).precision==null&&(d.trim=!0),d=Zx(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(_P(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function NP(){const e=ew(Bm()).domain([1,10]);return e.copy=()=>_d(e,NP()).base(e.base()),ji.apply(e,arguments),e}function wN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function bN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tw(e){var t=1,r=e(wN(t),bN(t));return r.constant=function(n){return arguments.length?e(wN(t=+n),bN(t)):t},_o(r)}function CP(){var e=tw(Bm());return e.copy=function(){return _d(e,CP()).constant(e.constant())},ji.apply(e,arguments)}function jN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function F9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function L9(e){return e<0?-e*e:e*e}function rw(e){var t=e(ws,ws),r=1;function n(){return r===1?e(ws,ws):r===.5?e(F9,L9):e(jN(r),jN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},_o(t)}function nw(){var e=rw(Bm());return e.copy=function(){return _d(e,nw()).exponent(e.exponent())},ji.apply(e,arguments),e}function z9(){return nw.apply(null,arguments).exponent(.5)}function SN(e){return Math.sign(e)*e*e}function U9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EP(){var e=Xx(),t=[0,1],r=!1,n;function s(i){var l=U9(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(SN(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Gh)).map(SN)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return EP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ji.apply(s,arguments),_o(s)}function AP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=V7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Sd(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(xo),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return AP().domain(e).range(t).unknown(n)},ji.apply(i,arguments)}function PP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Sd(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return PP().domain([e,t]).range(s).unknown(i)},ji.apply(_o(l),arguments)}function OP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Sd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return OP().domain(e).range(t).unknown(r)},ji.apply(s,arguments)}const dv=new Date,fv=new Date;function Sn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Sn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(dv.setTime(+i),fv.setTime(+l),e(dv),e(fv),Math.floor(r(dv,fv))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Jh=Sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Jh);Jh.range;const ka=1e3,gi=ka*60,_a=gi*60,Ra=_a*24,sw=Ra*7,kN=Ra*30,hv=Ra*365,rl=Sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getUTCSeconds());rl.range;const iw=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ka)},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getMinutes());iw.range;const aw=Sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getUTCMinutes());aw.range;const ow=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ka-e.getMinutes()*gi)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getHours());ow.range;const lw=Sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getUTCHours());lw.range;const Nd=Sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gi)/Ra,e=>e.getDate()-1);Nd.range;const Wm=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ra,e=>e.getUTCDate()-1);Wm.range;const TP=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ra,e=>Math.floor(e/Ra));TP.range;function bl(e){return Sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*gi)/sw)}const qm=bl(0),Xh=bl(1),B9=bl(2),W9=bl(3),_c=bl(4),q9=bl(5),V9=bl(6);qm.range;Xh.range;B9.range;W9.range;_c.range;q9.range;V9.range;function jl(e){return Sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/sw)}const Vm=jl(0),Qh=jl(1),H9=jl(2),K9=jl(3),Nc=jl(4),G9=jl(5),Y9=jl(6);Vm.range;Qh.range;H9.range;K9.range;Nc.range;G9.range;Y9.range;const cw=Sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cw.range;const uw=Sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uw.range;const $a=Sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$a.range;const Ma=Sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ma.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ma.range;function IP(e,t,r,n,s,i){const l=[[rl,1,ka],[rl,5,5*ka],[rl,15,15*ka],[rl,30,30*ka],[i,1,gi],[i,5,5*gi],[i,15,15*gi],[i,30,30*gi],[s,1,_a],[s,3,3*_a],[s,6,6*_a],[s,12,12*_a],[n,1,Ra],[n,2,2*Ra],[r,1,sw],[t,1,kN],[t,3,3*kN],[e,1,hv]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),b=x?x.range(m,+f+1):[];return y?b.reverse():b}function d(m,f,p){const y=Math.abs(f-m)/p,x=Vx(([,,S])=>S).right(l,y);if(x===l.length)return e.every(P0(m/hv,f/hv,p));if(x===0)return Jh.every(Math.max(P0(m,f,p),1));const[b,j]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return b.every(j)}return[u,d]}const[J9,X9]=IP(Ma,uw,Vm,TP,lw,aw),[Q9,Z9]=IP($a,cw,qm,Nd,ow,iw);function mv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ou(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function eW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Tu(s),f=Iu(s),p=Tu(i),y=Iu(i),x=Tu(l),b=Iu(l),j=Tu(u),S=Iu(u),_=Tu(d),E=Iu(d),C={a:re,A:ne,b:ae,B:ce,c:null,d:PN,e:PN,f:SW,g:IW,G:RW,H:wW,I:bW,j:jW,L:DP,m:kW,M:_W,p:I,q:H,Q:IN,s:DN,S:NW,u:CW,U:EW,V:AW,w:PW,W:OW,x:null,X:null,y:TW,Y:DW,Z:$W,"%":TN},O={a:Fe,A:ie,b:me,B:q,c:null,d:ON,e:ON,f:zW,g:JW,G:QW,H:MW,I:FW,j:LW,L:$P,m:UW,M:BW,p:Z,q:je,Q:IN,s:DN,S:WW,u:qW,U:VW,V:HW,w:KW,W:GW,x:null,X:null,y:YW,Y:XW,Z:ZW,"%":TN},T={a:V,A:L,b:U,B:le,c:ee,d:EN,e:EN,f:gW,g:CN,G:NN,H:AN,I:AN,j:fW,L:pW,m:dW,M:hW,p:M,q:uW,Q:vW,s:xW,S:mW,u:iW,U:aW,V:oW,w:sW,W:lW,x:se,X:B,y:CN,Y:NN,Z:cW,"%":yW};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),O.x=P(r,O),O.X=P(n,O),O.c=P(t,O);function P(F,be){return function(Ge){var K=[],He=-1,Ke=0,Pt=F.length,vt,qt,Rt;for(Ge instanceof Date||(Ge=new Date(+Ge));++He<Pt;)F.charCodeAt(He)===37&&(K.push(F.slice(Ke,He)),(qt=_N[vt=F.charAt(++He)])!=null?vt=F.charAt(++He):qt=vt==="e"?" ":"0",(Rt=be[vt])&&(vt=Rt(Ge,qt)),K.push(vt),Ke=He+1);return K.push(F.slice(Ke,He)),K.join("")}}function $(F,be){return function(Ge){var K=Ou(1900,void 0,1),He=G(K,F,Ge+="",0),Ke,Pt;if(He!=Ge.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(be&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(Ke=pv(Ou(K.y,0,1)),Pt=Ke.getUTCDay(),Ke=Pt>4||Pt===0?Qh.ceil(Ke):Qh(Ke),Ke=Wm.offset(Ke,(K.V-1)*7),K.y=Ke.getUTCFullYear(),K.m=Ke.getUTCMonth(),K.d=Ke.getUTCDate()+(K.w+6)%7):(Ke=mv(Ou(K.y,0,1)),Pt=Ke.getDay(),Ke=Pt>4||Pt===0?Xh.ceil(Ke):Xh(Ke),Ke=Nd.offset(Ke,(K.V-1)*7),K.y=Ke.getFullYear(),K.m=Ke.getMonth(),K.d=Ke.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Pt="Z"in K?pv(Ou(K.y,0,1)).getUTCDay():mv(Ou(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Pt+5)%7:K.w+K.U*7-(Pt+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,pv(K)):mv(K)}}function G(F,be,Ge,K){for(var He=0,Ke=be.length,Pt=Ge.length,vt,qt;He<Ke;){if(K>=Pt)return-1;if(vt=be.charCodeAt(He++),vt===37){if(vt=be.charAt(He++),qt=T[vt in _N?be.charAt(He++):vt],!qt||(K=qt(F,Ge,K))<0)return-1}else if(vt!=Ge.charCodeAt(K++))return-1}return K}function M(F,be,Ge){var K=m.exec(be.slice(Ge));return K?(F.p=f.get(K[0].toLowerCase()),Ge+K[0].length):-1}function V(F,be,Ge){var K=x.exec(be.slice(Ge));return K?(F.w=b.get(K[0].toLowerCase()),Ge+K[0].length):-1}function L(F,be,Ge){var K=p.exec(be.slice(Ge));return K?(F.w=y.get(K[0].toLowerCase()),Ge+K[0].length):-1}function U(F,be,Ge){var K=_.exec(be.slice(Ge));return K?(F.m=E.get(K[0].toLowerCase()),Ge+K[0].length):-1}function le(F,be,Ge){var K=j.exec(be.slice(Ge));return K?(F.m=S.get(K[0].toLowerCase()),Ge+K[0].length):-1}function ee(F,be,Ge){return G(F,t,be,Ge)}function se(F,be,Ge){return G(F,r,be,Ge)}function B(F,be,Ge){return G(F,n,be,Ge)}function re(F){return l[F.getDay()]}function ne(F){return i[F.getDay()]}function ae(F){return d[F.getMonth()]}function ce(F){return u[F.getMonth()]}function I(F){return s[+(F.getHours()>=12)]}function H(F){return 1+~~(F.getMonth()/3)}function Fe(F){return l[F.getUTCDay()]}function ie(F){return i[F.getUTCDay()]}function me(F){return d[F.getUTCMonth()]}function q(F){return u[F.getUTCMonth()]}function Z(F){return s[+(F.getUTCHours()>=12)]}function je(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var be=P(F+="",C);return be.toString=function(){return F},be},parse:function(F){var be=$(F+="",!1);return be.toString=function(){return F},be},utcFormat:function(F){var be=P(F+="",O);return be.toString=function(){return F},be},utcParse:function(F){var be=$(F+="",!0);return be.toString=function(){return F},be}}}var _N={"-":"",_:" ",0:"0"},Wn=/^\s*\d+/,tW=/^%/,rW=/[\\^$*+?|[\]().{}]/g;function tr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function nW(e){return e.replace(rW,"\\$&")}function Tu(e){return new RegExp("^(?:"+e.map(nW).join("|")+")","i")}function Iu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function sW(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function iW(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function NN(e,t,r){var n=Wn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function CN(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uW(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function dW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function EN(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=Wn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function AN(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=Wn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=Wn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yW(e,t,r){var n=tW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function vW(e,t,r){var n=Wn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xW(e,t,r){var n=Wn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function PN(e,t){return tr(e.getDate(),t,2)}function wW(e,t){return tr(e.getHours(),t,2)}function bW(e,t){return tr(e.getHours()%12||12,t,2)}function jW(e,t){return tr(1+Nd.count($a(e),e),t,3)}function DP(e,t){return tr(e.getMilliseconds(),t,3)}function SW(e,t){return DP(e,t)+"000"}function kW(e,t){return tr(e.getMonth()+1,t,2)}function _W(e,t){return tr(e.getMinutes(),t,2)}function NW(e,t){return tr(e.getSeconds(),t,2)}function CW(e){var t=e.getDay();return t===0?7:t}function EW(e,t){return tr(qm.count($a(e)-1,e),t,2)}function RP(e){var t=e.getDay();return t>=4||t===0?_c(e):_c.ceil(e)}function AW(e,t){return e=RP(e),tr(_c.count($a(e),e)+($a(e).getDay()===4),t,2)}function PW(e){return e.getDay()}function OW(e,t){return tr(Xh.count($a(e)-1,e),t,2)}function TW(e,t){return tr(e.getFullYear()%100,t,2)}function IW(e,t){return e=RP(e),tr(e.getFullYear()%100,t,2)}function DW(e,t){return tr(e.getFullYear()%1e4,t,4)}function RW(e,t){var r=e.getDay();return e=r>=4||r===0?_c(e):_c.ceil(e),tr(e.getFullYear()%1e4,t,4)}function $W(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tr(t/60|0,"0",2)+tr(t%60,"0",2)}function ON(e,t){return tr(e.getUTCDate(),t,2)}function MW(e,t){return tr(e.getUTCHours(),t,2)}function FW(e,t){return tr(e.getUTCHours()%12||12,t,2)}function LW(e,t){return tr(1+Wm.count(Ma(e),e),t,3)}function $P(e,t){return tr(e.getUTCMilliseconds(),t,3)}function zW(e,t){return $P(e,t)+"000"}function UW(e,t){return tr(e.getUTCMonth()+1,t,2)}function BW(e,t){return tr(e.getUTCMinutes(),t,2)}function WW(e,t){return tr(e.getUTCSeconds(),t,2)}function qW(e){var t=e.getUTCDay();return t===0?7:t}function VW(e,t){return tr(Vm.count(Ma(e)-1,e),t,2)}function MP(e){var t=e.getUTCDay();return t>=4||t===0?Nc(e):Nc.ceil(e)}function HW(e,t){return e=MP(e),tr(Nc.count(Ma(e),e)+(Ma(e).getUTCDay()===4),t,2)}function KW(e){return e.getUTCDay()}function GW(e,t){return tr(Qh.count(Ma(e)-1,e),t,2)}function YW(e,t){return tr(e.getUTCFullYear()%100,t,2)}function JW(e,t){return e=MP(e),tr(e.getUTCFullYear()%100,t,2)}function XW(e,t){return tr(e.getUTCFullYear()%1e4,t,4)}function QW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nc(e):Nc.ceil(e),tr(e.getUTCFullYear()%1e4,t,4)}function ZW(){return"+0000"}function TN(){return"%"}function IN(e){return+e}function DN(e){return Math.floor(+e/1e3)}var ac,FP,LP;eq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eq(e){return ac=eW(e),FP=ac.format,ac.parse,LP=ac.utcFormat,ac.utcParse,ac}function tq(e){return new Date(e)}function rq(e){return e instanceof Date?+e:+new Date(+e)}function dw(e,t,r,n,s,i,l,u,d,m){var f=Xx(),p=f.invert,y=f.domain,x=m(".%L"),b=m(":%S"),j=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),O=m("%Y");function T(P){return(d(P)<P?x:u(P)<P?b:l(P)<P?j:i(P)<P?S:n(P)<P?s(P)<P?_:E:r(P)<P?C:O)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,rq)):y().map(tq)},f.ticks=function(P){var $=y();return e($[0],$[$.length-1],P??10)},f.tickFormat=function(P,$){return $==null?T:m($)},f.nice=function(P){var $=y();return(!P||typeof P.range!="function")&&(P=t($[0],$[$.length-1],P??10)),P?y(_P($,P)):f},f.copy=function(){return _d(f,dw(e,t,r,n,s,i,l,u,d,m))},f}function nq(){return ji.apply(dw(Q9,Z9,$a,cw,qm,Nd,ow,iw,rl,FP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sq(){return ji.apply(dw(J9,X9,Ma,uw,Vm,Wm,lw,aw,rl,LP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hm(){var e=0,t=1,r,n,s,i,l=ws,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,b;return arguments.length?([x,b]=y,l=p(x,b),m):[l(0),l(1)]}}return m.range=f(Bc),m.rangeRound=f(Jx),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function No(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zP(){var e=_o(Hm()(ws));return e.copy=function(){return No(e,zP())},Wa.apply(e,arguments)}function UP(){var e=ew(Hm()).domain([1,10]);return e.copy=function(){return No(e,UP()).base(e.base())},Wa.apply(e,arguments)}function BP(){var e=tw(Hm());return e.copy=function(){return No(e,BP()).constant(e.constant())},Wa.apply(e,arguments)}function fw(){var e=rw(Hm());return e.copy=function(){return No(e,fw()).exponent(e.exponent())},Wa.apply(e,arguments)}function iq(){return fw.apply(null,arguments).exponent(.5)}function WP(){var e=[],t=ws;function r(n){if(n!=null&&!isNaN(n=+n))return t((Sd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>q7(e,i/n))},r.copy=function(){return WP(t).domain(e)},Wa.apply(r,arguments)}function Km(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=ws,f,p=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+f(j))-i)*(n*j<n*i?u:d),m(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(m=j,x):m};function b(j){return function(S){var _,E,C;return arguments.length?([_,E,C]=S,m=y9(j,[_,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=b(Bc),x.rangeRound=b(Jx),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return f=j,s=j(e),i=j(t),l=j(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function qP(){var e=_o(Km()(ws));return e.copy=function(){return No(e,qP())},Wa.apply(e,arguments)}function VP(){var e=ew(Km()).domain([.1,1,10]);return e.copy=function(){return No(e,VP()).base(e.base())},Wa.apply(e,arguments)}function HP(){var e=tw(Km());return e.copy=function(){return No(e,HP()).constant(e.constant())},Wa.apply(e,arguments)}function hw(){var e=rw(Km());return e.copy=function(){return No(e,hw()).exponent(e.exponent())},Wa.apply(e,arguments)}function aq(){return hw.apply(null,arguments).exponent(.5)}const Uu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Kx,scaleDiverging:qP,scaleDivergingLog:VP,scaleDivergingPow:hw,scaleDivergingSqrt:aq,scaleDivergingSymlog:HP,scaleIdentity:kP,scaleImplicit:O0,scaleLinear:SP,scaleLog:NP,scaleOrdinal:Hx,scalePoint:K7,scalePow:nw,scaleQuantile:AP,scaleQuantize:PP,scaleRadial:EP,scaleSequential:zP,scaleSequentialLog:UP,scaleSequentialPow:fw,scaleSequentialQuantile:WP,scaleSequentialSqrt:iq,scaleSequentialSymlog:BP,scaleSqrt:z9,scaleSymlog:CP,scaleThreshold:OP,scaleTime:nq,scaleUtc:sq,tickFormat:jP},Symbol.toStringTag,{value:"Module"}));var Co=e=>e.chartData,oq=ye([Co],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),mw=(e,t,r,n)=>n?oq(e):Co(e);function hl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(en(t)&&en(r))return!0}return!1}function RN(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function KP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(en(r))s=r;else if(typeof r=="function")return;if(en(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(hl(l))return l}}function lq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(hl(n))return RN(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(xt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&g_.test(s)){var d=g_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(xt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&y_.test(i)){var f=y_.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(hl(y))return t==null?y:RN(y,t,r)}}}var Wc=1e9,cq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gw,Mr=!0,wi="[DecimalError] ",ll=wi+"Invalid argument: ",pw=wi+"Exponent out of range: ",qc=Math.floor,Yo=Math.pow,uq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xs,Fn=1e7,Pr=7,GP=9007199254740991,Zh=qc(GP/Pr),et={};et.absoluteValue=et.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};et.comparedTo=et.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};et.decimalPlaces=et.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};et.dividedBy=et.div=function(e){return Aa(this,new this.constructor(e))};et.dividedToIntegerBy=et.idiv=function(e){var t=this,r=t.constructor;return wr(Aa(t,new r(e),0,1),r.precision)};et.equals=et.eq=function(e){return!this.cmp(e)};et.exponent=function(){return fn(this)};et.greaterThan=et.gt=function(e){return this.cmp(e)>0};et.greaterThanOrEqualTo=et.gte=function(e){return this.cmp(e)>=0};et.isInteger=et.isint=function(){return this.e>this.d.length-2};et.isNegative=et.isneg=function(){return this.s<0};et.isPositive=et.ispos=function(){return this.s>0};et.isZero=function(){return this.s===0};et.lessThan=et.lt=function(e){return this.cmp(e)<0};et.lessThanOrEqualTo=et.lte=function(e){return this.cmp(e)<1};et.logarithm=et.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xs))throw Error(wi+"NaN");if(r.s<1)throw Error(wi+(r.s?"NaN":"-Infinity"));return r.eq(Xs)?new n(0):(Mr=!1,t=Aa(ud(r,i),ud(e,i),i),Mr=!0,wr(t,s))};et.minus=et.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XP(t,e):YP(t,(e.s=-e.s,e))};et.modulo=et.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(wi+"NaN");return r.s?(Mr=!1,t=Aa(r,e,0,1).times(e),Mr=!0,r.minus(t)):wr(new n(r),s)};et.naturalExponential=et.exp=function(){return JP(this)};et.naturalLogarithm=et.ln=function(){return ud(this)};et.negated=et.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};et.plus=et.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YP(t,e):XP(t,(e.s=-e.s,e))};et.precision=et.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ll+e);if(t=fn(s)+1,n=s.d.length-1,r=n*Pr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};et.squareRoot=et.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(wi+"NaN")}for(e=fn(u),Mr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=ea(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=qc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(Aa(u,i,l+2)).times(.5),ea(i.d).slice(0,l)===(t=ea(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(wr(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Mr=!0,wr(n,r)};et.times=et.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%Fn|0,t=u/Fn|0;i[s]=(i[s]+t)%Fn|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Mr?wr(e,p.precision):e};et.toDecimalPlaces=et.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ia(e,0,Wc),t===void 0?t=n.rounding:ia(t,0,8),wr(r,e+fn(r)+1,t))};et.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ml(n,!0):(ia(e,0,Wc),t===void 0?t=s.rounding:ia(t,0,8),n=wr(new s(n),e+1,t),r=ml(n,!0,e+1)),r};et.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ml(s):(ia(e,0,Wc),t===void 0?t=i.rounding:ia(t,0,8),n=wr(new i(s),e+fn(s)+1,t),r=ml(n.abs(),!1,e+fn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};et.toInteger=et.toint=function(){var e=this,t=e.constructor;return wr(new t(e),fn(e)+1,t.rounding)};et.toNumber=function(){return+this};et.toPower=et.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(Xs);if(u=new d(u),!u.s){if(e.s<1)throw Error(wi+"Infinity");return u}if(u.eq(Xs))return u;if(n=d.precision,e.eq(Xs))return wr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=GP){for(s=new d(Xs),t=Math.ceil(n/Pr+4),Mr=!1;r%2&&(s=s.times(u),MN(s.d,t)),r=qc(r/2),r!==0;)u=u.times(u),MN(u.d,t);return Mr=!0,e.s<0?new d(Xs).div(s):wr(s,n)}}else if(i<0)throw Error(wi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Mr=!1,s=e.times(ud(u,n+m)),Mr=!0,s=JP(s),s.s=i,s};et.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=fn(s),n=ml(s,r<=i.toExpNeg||r>=i.toExpPos)):(ia(e,1,Wc),t===void 0?t=i.rounding:ia(t,0,8),s=wr(new i(s),e,t),r=fn(s),n=ml(s,e<=r||r<=i.toExpNeg,e)),n};et.toSignificantDigits=et.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ia(e,1,Wc),t===void 0?t=n.rounding:ia(t,0,8)),wr(new n(r),e,t)};et.toString=et.valueOf=et.val=et.toJSON=et[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fn(e),r=e.constructor;return ml(e,t<=r.toExpNeg||t>=r.toExpPos)};function YP(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Mr?wr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Pr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/Fn|0,d[i]%=Fn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Mr?wr(t,p):t}function ia(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ll+e)}function ea(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Pr-n.length,r&&(i+=ho(r)),i+=n;l=e[t],n=l+"",r=Pr-n.length,r&&(i+=ho(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Aa=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%Fn|0,l=i/Fn|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*Fn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,b,j,S,_,E,C,O,T,P,$,G,M=n.constructor,V=n.s==s.s?1:-1,L=n.d,U=s.d;if(!n.s)return new M(n);if(!s.s)throw Error(wi+"Division by zero");for(d=n.e-s.e,$=U.length,T=L.length,x=new M(V),b=x.d=[],m=0;U[m]==(L[m]||0);)++m;if(U[m]>(L[m]||0)&&--d,i==null?E=i=M.precision:l?E=i+(fn(n)-fn(s))+1:E=i,E<0)return new M(0);if(E=E/Pr+2|0,m=0,$==1)for(f=0,U=U[0],E++;(m<T||f)&&E--;m++)C=f*Fn+(L[m]||0),b[m]=C/U|0,f=C%U|0;else{for(f=Fn/(U[0]+1)|0,f>1&&(U=e(U,f),L=e(L,f),$=U.length,T=L.length),O=$,j=L.slice(0,$),S=j.length;S<$;)j[S++]=0;G=U.slice(),G.unshift(0),P=U[0],U[1]>=Fn/2&&++P;do f=0,u=t(U,j,$,S),u<0?(_=j[0],$!=S&&(_=_*Fn+(j[1]||0)),f=_/P|0,f>1?(f>=Fn&&(f=Fn-1),p=e(U,f),y=p.length,S=j.length,u=t(p,j,y,S),u==1&&(f--,r(p,$<y?G:U,y))):(f==0&&(u=f=1),p=U.slice()),y=p.length,y<S&&p.unshift(0),r(j,p,S),u==-1&&(S=j.length,u=t(U,j,$,S),u<1&&(f++,r(j,$<S?G:U,S))),S=j.length):u===0&&(f++,j=[0]),b[m++]=f,u&&j[0]?j[S++]=L[O]||0:(j=[L[O]],S=1);while((O++<T||j[0]!==void 0)&&E--)}return b[0]||b.shift(),x.e=d,wr(x,l?i+fn(x)+1:i)}})();function JP(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(fn(e)>16)throw Error(pw+fn(e));if(!e.s)return new f(Xs);for(Mr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(Yo(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(Xs),f.precision=u;;){if(s=wr(s.times(e),u),r=r.times(++d),l=i.plus(Aa(s,r,u)),ea(l.d).slice(0,u)===ea(i.d).slice(0,u)){for(;m--;)i=wr(i.times(i),u);return f.precision=p,t==null?(Mr=!0,wr(i,p)):i}i=l}}function fn(e){for(var t=e.e*Pr,r=e.d[0];r>=10;r/=10)t++;return t}function gv(e,t,r){if(t>e.LN10.sd())throw Mr=!0,r&&(e.precision=r),Error(wi+"LN10 precision limit exceeded");return wr(new e(e.LN10),t)}function ho(e){for(var t="";e--;)t+="0";return t}function ud(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(wi+(x.s?"NaN":"-Infinity"));if(x.eq(Xs))return new j(0);if(t==null?(Mr=!1,m=S):m=t,x.eq(10))return t==null&&(Mr=!0),gv(j,m);if(m+=y,j.precision=m,r=ea(b),n=r.charAt(0),i=fn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ea(x.d),n=r.charAt(0),p++;i=fn(x),n>1?(x=new j("0."+r),i++):x=new j(n+"."+r.slice(1))}else return d=gv(j,m+2,S).times(i+""),x=ud(new j(n+"."+r.slice(1)),m-y).plus(d),j.precision=S,t==null?(Mr=!0,wr(x,S)):x;for(u=l=x=Aa(x.minus(Xs),x.plus(Xs),m),f=wr(x.times(x),m),s=3;;){if(l=wr(l.times(f),m),d=u.plus(Aa(l,new j(s),m)),ea(d.d).slice(0,m)===ea(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(gv(j,m+2,S).times(i+""))),u=Aa(u,new j(p),m),j.precision=S,t==null?(Mr=!0,wr(u,S)):u;u=d,s+=2}}function $N(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=qc(r/Pr),e.d=[],n=(r+1)%Pr,r<0&&(n+=Pr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Pr;n<s;)e.d.push(+t.slice(n,n+=Pr));t=t.slice(n),n=Pr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Mr&&(e.e>Zh||e.e<-Zh))throw Error(pw+r)}else e.s=0,e.e=0,e.d=[0];return e}function wr(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Pr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Pr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Pr,s=n-Pr+l}if(r!==void 0&&(i=Yo(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/Yo(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=fn(e),p.length=1,t=t-i-1,p[0]=Yo(10,(Pr-t%Pr)%Pr),e.e=qc(-t/Pr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=Yo(10,Pr-n),p[f]=s>0?(m/Yo(10,l-s)%Yo(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==Fn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Fn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Mr&&(e.e>Zh||e.e<-Zh))throw Error(pw+fn(e));return e}function XP(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Mr?wr(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Pr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=Fn-1;--d[i],d[s]+=Fn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Mr?wr(t,x):t):new y(0)}function ml(e,t,r){var n,s=fn(e),i=ea(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+ho(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+ho(-s-1)+i,r&&(n=r-l)>0&&(i+=ho(n))):s>=l?(i+=ho(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+ho(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=ho(n))),e.s<0?"-"+i:i}function MN(e,t){if(e.length>t)return e.length=t,!0}function QP(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ll+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return $N(l,i.toString())}else if(typeof i!="string")throw Error(ll+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,uq.test(i))$N(l,i);else throw Error(ll+i)}if(s.prototype=et,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=QP,s.config=s.set=dq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function dq(e){if(!e||typeof e!="object")throw Error(wi+"Object expected");var t,r,n,s=["precision",1,Wc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(qc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(ll+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ll+r+": "+n);return this}var gw=QP(cq);Xs=new gw(1);const cr=gw;var fq=e=>e,ZP={},eO=e=>e===ZP,FN=e=>function t(){return arguments.length===0||arguments.length===1&&eO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},tO=(e,t)=>e===1?t:FN(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==ZP).length;return i>=e?t(...n):tO(e-i,FN(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>eO(f)?u.shift():f);return t(...m,...u)}))}),Gm=e=>tO(e.length,e),R0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},hq=Gm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),mq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return fq;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},$0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),rO=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function nO(e){var t;return e===0?t=1:t=Math.floor(new cr(e).abs().log(10).toNumber())+1,t}function sO(e,t,r){for(var n=new cr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Gm((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Gm((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Gm((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var iO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},aO=(e,t,r)=>{if(e.lte(0))return new cr(0);var n=nO(e.toNumber()),s=new cr(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new cr(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new cr(d.toNumber()):new cr(Math.ceil(d.toNumber()))},pq=(e,t,r)=>{var n=new cr(1),s=new cr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new cr(10).pow(nO(e)-1),s=new cr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new cr(Math.floor(e)))}else e===0?s=new cr(Math.floor((t-1)/2)):r||(s=new cr(Math.floor(e)));var l=Math.floor((t-1)/2),u=mq(hq(d=>s.add(new cr(d-l).mul(n)).toNumber()),R0);return u(0,t)},oO=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new cr(0),tickMin:new cr(0),tickMax:new cr(0)};var l=aO(new cr(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new cr(0):(u=new cr(t).add(r).div(2),u=u.sub(new cr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new cr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?oO(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new cr(d).mul(l)),tickMax:u.add(new cr(m).mul(l))})};function gq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=iO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...R0(0,n-1).map(()=>1/0)]:[...R0(0,n-1).map(()=>-1/0),u];return t>r?$0(d):d}if(l===u)return pq(l,n,s);var{step:m,tickMin:f,tickMax:p}=oO(l,u,i,s,0),y=sO(f,p.add(new cr(.1).mul(m)),m);return t>r?$0(y):y}function yq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=iO([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=aO(new cr(l).sub(i).div(u-1),s,0),m=[...sO(new cr(i),new cr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?$0(m):m}var vq=rO(gq),xq=rO(yq),lO=e=>e.rootProps.maxBarSize,wq=e=>e.rootProps.barGap,cO=e=>e.rootProps.barCategoryGap,bq=e=>e.rootProps.barSize,Ym=e=>e.rootProps.stackOffset,yw=e=>e.options.chartName,vw=e=>e.rootProps.syncId,uO=e=>e.rootProps.syncMethod,xw=e=>e.options.eventEmitter,$s={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ja={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Jm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},jq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ja.angleAxisId,includeHidden:!1,name:void 0,reversed:ja.reversed,scale:ja.scale,tick:ja.tick,tickCount:void 0,ticks:void 0,type:ja.type,unit:void 0},Sq={allowDataOverflow:Gs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gs.scale,tick:Gs.tick,tickCount:Gs.tickCount,ticks:void 0,type:Gs.type,unit:void 0},kq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ja.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ja.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ja.scale,tick:ja.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_q={allowDataOverflow:Gs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gs.scale,tick:Gs.tick,tickCount:Gs.tickCount,ticks:void 0,type:"category",unit:void 0},ww=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?kq:jq,bw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_q:Sq,Xm=e=>e.polarOptions,jw=ye([Ua,Ba,Bn],v7),dO=ye([Xm,jw],(e,t)=>{if(e!=null)return Ui(e.innerRadius,t,0)}),fO=ye([Xm,jw],(e,t)=>{if(e!=null)return Ui(e.outerRadius,t,t*.8)}),Nq=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},hO=ye([Xm],Nq);ye([ww,hO],Jm);var mO=ye([jw,dO,fO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ye([bw,mO],Jm);var pO=ye([ur,Xm,dO,fO,Ua,Ba],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:Ui(l,s,s/2),cy:Ui(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),kn=(e,t)=>t,Qm=(e,t,r)=>r;function Sw(e){return e==null?void 0:e.id}function gO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Sw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(bs(p,i,null)),b=bs(p,u.dataKey,0),j;l.has(x)?j=l.get(x):j={},Object.assign(j,{[f]:b}),l.set(x,j)})}}),Array.from(l.values())}function Zm(e){return e.stackId!=null&&e.dataKey!=null}var ep=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function tp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Cq(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var _n=e=>{var t=ur(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Vc=e=>e.tooltip.settings.axisId;function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(r),!0).forEach(function(n){Eq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eq(e,t,r){return(t=Aq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aq(e){var t=Pq(e,"string");return typeof t=="symbol"?t:t+""}function Pq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M0=[0,"auto"],Vs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},yO=(e,t)=>e.cartesianAxis.xAxis[t],qa=(e,t)=>{var r=yO(e,t);return r??Vs},Hs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:M0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:jd},vO=(e,t)=>e.cartesianAxis.yAxis[t],Va=(e,t)=>{var r=vO(e,t);return r??Hs},Oq={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},kw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Oq},js=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);case"zAxis":return kw(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return bw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Tq=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Cd=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);case"angleAxis":return ww(e,r);case"radiusAxis":return bw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},xO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function wO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var _w=e=>e.graphicalItems.cartesianItems,Iq=ye([kn,Qm],wO),bO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Ed=ye([_w,js,Iq],bO,{memoizeOptions:{resultEqualityCheck:tp}}),jO=ye([Ed],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Zm)),SO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Dq=ye([Ed],SO),kO=e=>e.map(t=>t.data).filter(Boolean).flat(1),Rq=ye([Ed],kO,{memoizeOptions:{resultEqualityCheck:tp}}),_O=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Nw=ye([Rq,mw],_O),NO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:bs(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:bs(s,n)}))):e.map(n=>({value:n})),rp=ye([Nw,js,Ed],NO);function CO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ch(e){if(sa(e)||e instanceof Date){var t=Number(e);if(en(t))return t}}function zN(e){if(Array.isArray(e)){var t=[ch(e[0]),ch(e[1])];return hl(t)?t:void 0}var r=ch(e);if(r!=null)return[r,r]}function Fa(e){return e.map(ch).filter(rz)}function $q(e,t,r){return!r||typeof t!="number"||na(t)?[]:r.length?Fa(r.flatMap(n=>{var s=bs(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!en(i)||!en(l)))return[t-i,t+l]})):[]}var Nn=e=>{var t=_n(e),r=Vc(e);return Cd(e,t,r)},EO=ye([Nn],e=>e==null?void 0:e.dataKey),Mq=ye([jO,mw,Nn],gO),AO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(Sw);return[l,{stackedData:vU(e,d,r),graphicalItems:u}]}))},F0=ye([Mq,jO,Ym],AO),PO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=SU(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Fq=ye([js],e=>e.allowDataOverflow),Cw=e=>{var t;if(e==null||!("domain"in e))return M0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Fa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:M0},OO=ye([js],Cw),TO=ye([OO,Fq],KP),Lq=ye([F0,Co,kn,TO],PO,{memoizeOptions:{resultEqualityCheck:ep}}),Ew=e=>e.errorBars,zq=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>CO(r,n)),tm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},IO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>CO(s,_)),y=bs(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=$q(u,y,p);if(x.length>=2){var b=Math.min(...x),j=Math.max(...x);(i==null||b<i)&&(i=b),(l==null||j>l)&&(l=j)}var S=zN(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=zN(bs(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),en(i)&&en(l))return[i,l]},Uq=ye([Nw,js,Dq,Ew,kn],IO,{memoizeOptions:{resultEqualityCheck:ep}});function Bq(e){var{value:t}=e;if(sa(t)||t instanceof Date)return t}var Wq=(e,t,r)=>{var n=e.map(Bq).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&iA(n))?fP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},DO=e=>e.referenceElements.dots,Hc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),qq=ye([DO,kn,Qm],Hc),RO=e=>e.referenceElements.areas,Vq=ye([RO,kn,Qm],Hc),$O=e=>e.referenceElements.lines,Hq=ye([$O,kn,Qm],Hc),MO=(e,t)=>{var r=Fa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Kq=ye(qq,kn,MO),FO=(e,t)=>{var r=Fa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gq=ye([Vq,kn],FO);function Yq(e){var t;if(e.x!=null)return Fa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Fa(r)}function Jq(e){var t;if(e.y!=null)return Fa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Fa(r)}var LO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Yq(n):Jq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Xq=ye([Hq,kn],LO),Qq=ye(Kq,Xq,Gq,(e,t,r)=>tm(e,r,t)),zO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?tm(n,i,s):tm(i,s);return lq(t,m,e.allowDataOverflow)},Zq=ye([js,OO,TO,Lq,Uq,Qq,ur,kn],zO,{memoizeOptions:{resultEqualityCheck:ep}}),eV=[0,1],UO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=wl(t,i);if(m&&u==null){var f;return fP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?Wq(n,e,m):s==="expand"?eV:l}},Aw=ye([js,ur,Nw,rp,Ym,kn,Zq],UO),BO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(xd(i));return u in Uu?u:"point"}}},Ad=ye([js,ur,xO,yw,kn],BO);function tV(e){if(e!=null){if(e in Uu)return Uu[e]();var t="scale".concat(xd(e));if(t in Uu)return Uu[t]()}}function Pw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=tV(t);if(s!=null){var i=s.domain(r).range(n);return hU(i),i}}}var WO=(e,t,r)=>{var n=Cw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&hl(e))return vq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&hl(e))return xq(e,t.tickCount,t.allowDecimals)}},Ow=ye([Aw,Cd,Ad],WO),qO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&hl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},rV=ye([js,Aw,Ow,kn],qO),nV=ye(rp,js,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Fa(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),VO=ye(nV,ur,cO,Bn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!en(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=Ui(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),sV=(e,t)=>{var r=qa(e,t);return r==null||typeof r.padding!="string"?0:VO(e,"xAxis",t,r.padding)},iV=(e,t)=>{var r=Va(e,t);return r==null||typeof r.padding!="string"?0:VO(e,"yAxis",t,r.padding)},aV=ye(qa,sV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),oV=ye(Va,iV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),lV=ye([Bn,aV,Fm,Mm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),cV=ye([Bn,ur,oV,Fm,Mm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Pd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return lV(e,r,n);case"yAxis":return cV(e,r,n);case"zAxis":return(s=kw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return hO(e);case"radiusAxis":return mO(e,r);default:return}},HO=ye([js,Pd],Jm),Kc=ye([js,Ad,rV,HO],Pw);ye([Ed,Ew,kn],zq);function KO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var np=(e,t)=>t,sp=(e,t,r)=>r,uV=ye(Rm,np,sp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(KO)),dV=ye($m,np,sp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(KO)),GO=(e,t)=>({width:e.width,height:t.height}),fV=(e,t)=>{var r=typeof t.width=="number"?t.width:jd;return{width:r,height:e.height}},YO=ye(Bn,qa,GO),hV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},mV=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},pV=ye(Ba,Bn,uV,np,sp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=GO(t,u);l==null&&(l=hV(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),gV=ye(Ua,Bn,dV,np,sp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=fV(t,u);l==null&&(l=mV(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),yV=(e,t)=>{var r=qa(e,t);if(r!=null)return pV(e,r.orientation,r.mirror)},vV=ye([Bn,qa,yV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),xV=(e,t)=>{var r=Va(e,t);if(r!=null)return gV(e,r.orientation,r.mirror)},wV=ye([Bn,Va,xV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),JO=ye(Bn,Va,(e,t)=>{var r=typeof t.width=="number"?t.width:jd;return{width:r,height:e.height}}),UN=(e,t,r)=>{switch(t){case"xAxis":return YO(e,r).width;case"yAxis":return JO(e,r).height;default:return}},XO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=wl(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&iA(d))return d}},Tw=ye([ur,rp,js,kn],XO),QO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=wl(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},Iw=ye([ur,rp,Cd,kn],QO);ye([ur,Tq,Ad,Kc,Tw,Iw,Pd,Ow,kn],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=wl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var bV=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=wl(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/x:0;b=d==="angleAxis"&&i!=null&&i.length>=2?Qs(i[0]-i[1])*2*b:b;var j=p||s;if(j){var S=j.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+b,value:_,offset:b}});return S.filter(_=>en(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+b,value:_,index:E,offset:b})).filter(_=>en(_.coordinate)):n.ticks?n.ticks(y).map(_=>({coordinate:n(_)+b,value:_,offset:b})):n.domain().map((_,E)=>({coordinate:n(_)+b,value:l?l[_]:_,index:E,offset:b}))}},ZO=ye([ur,Cd,Ad,Kc,Ow,Pd,Tw,Iw,kn],bV),jV=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=wl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Qs(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Cc=ye([ur,Cd,Kc,Pd,Tw,Iw,kn],jV),Ec=ye(js,Kc,(e,t)=>{if(!(e==null||t==null))return em(em({},e),{},{scale:t})}),SV=ye([js,Ad,Aw,HO],Pw);ye((e,t,r)=>kw(e,r),SV,(e,t)=>{if(!(e==null||t==null))return em(em({},e),{},{scale:t})});var kV=ye([ur,Rm,$m],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),e4=e=>e.options.defaultTooltipEventType,t4=e=>e.options.validateTooltipEventTypes;function r4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Dw(e,t){var r=e4(e),n=t4(e);return r4(t,r,n)}function _V(e){return ft(t=>Dw(t,e))}var n4=(e,t)=>{var r,n=Number(t);if(!(na(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},NV=e=>e.tooltip.settings,yo={active:!1,index:null,dataKey:void 0,coordinate:void 0},CV={itemInteraction:{click:yo,hover:yo},axisInteraction:{click:yo,hover:yo},keyboardInteraction:yo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},s4=Fs({name:"tooltip",initialState:CV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:bn()},removeTooltipEntrySettings:{reducer(e,t){var r=Ea(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:bn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:EV,removeTooltipEntrySettings:AV,setTooltipSettingsState:PV,setActiveMouseOverItemIndex:i4,mouseLeaveItem:OV,mouseLeaveChart:a4,setActiveClickItemIndex:TV,setMouseOverAxisIndex:o4,setMouseClickAxisIndex:IV,setSyncInteraction:L0,setKeyboardInteraction:z0}=s4.actions,DV=s4.reducer;function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){RV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RV(e,t,r){return(t=$V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $V(e){var t=MV(e,"string");return typeof t=="symbol"?t:t+""}function MV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FV(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function LV(e){return e.index!=null}var l4=(e,t,r,n)=>{if(t==null)return yo;var s=FV(e,t,r);if(s==null)return yo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(LV(s)){if(i)return Jf(Jf({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Jf(Jf({},yo),{},{coordinate:s.coordinate})},Rw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!en(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},c4=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},u4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},Od=e=>e.options.tooltipPayloadSearcher,Gc=e=>e.tooltip;function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(n){zV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zV(e,t,r){return(t=UV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UV(e){var t=BV(e,"string");return typeof t=="symbol"?t:t+""}function BV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WV(e,t){return e??t}var d4=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var b,{dataDefinedOnItem:j,settings:S}=x,_=WV(j,u),E=Array.isArray(_)?GA(_,m,f):_,C=(b=S==null?void 0:S.dataKey)!==null&&b!==void 0?b:n,O=S==null?void 0:S.nameKey,T;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?T=tz(E,n,s):T=i(E,t,d,O),Array.isArray(T))T.forEach($=>{var G=qN(qN({},S),{},{name:$.name,unit:$.unit,color:void 0,fill:void 0});y.push(v_({tooltipEntrySettings:G,dataKey:$.dataKey,payload:$.payload,value:bs($.payload,$.dataKey),name:$.name}))});else{var P;y.push(v_({tooltipEntrySettings:S,dataKey:C,payload:T,value:bs(T,C),name:(P=bs(T,O))!==null&&P!==void 0?P:S==null?void 0:S.name}))}return y},p)}},$w=ye([Nn,ur,xO,yw,_n],BO),qV=ye([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),VV=ye([_n,Vc],wO),Td=ye([qV,Nn,VV],bO,{memoizeOptions:{resultEqualityCheck:tp}}),HV=ye([Td],e=>e.filter(Zm)),KV=ye([Td],kO,{memoizeOptions:{resultEqualityCheck:tp}}),Yc=ye([KV,Co],_O),GV=ye([HV,Co,Nn],gO),Mw=ye([Yc,Nn,Td],NO),f4=ye([Nn],Cw),YV=ye([Nn],e=>e.allowDataOverflow),h4=ye([f4,YV],KP),JV=ye([Td],e=>e.filter(Zm)),XV=ye([GV,JV,Ym],AO),QV=ye([XV,Co,_n,h4],PO),ZV=ye([Td],SO),eH=ye([Yc,Nn,ZV,Ew,_n],IO,{memoizeOptions:{resultEqualityCheck:ep}}),tH=ye([DO,_n,Vc],Hc),rH=ye([tH,_n],MO),nH=ye([RO,_n,Vc],Hc),sH=ye([nH,_n],FO),iH=ye([$O,_n,Vc],Hc),aH=ye([iH,_n],LO),oH=ye([rH,aH,sH],tm),lH=ye([Nn,f4,h4,QV,eH,oH,ur,_n],zO),m4=ye([Nn,ur,Yc,Mw,Ym,_n,lH],UO),cH=ye([m4,Nn,$w],WO),uH=ye([Nn,m4,cH,_n],qO),p4=e=>{var t=_n(e),r=Vc(e),n=!1;return Pd(e,t,r,n)},g4=ye([Nn,p4],Jm),y4=ye([Nn,$w,uH,g4],Pw),dH=ye([ur,Mw,Nn,_n],XO),fH=ye([ur,Mw,Nn,_n],QO),hH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=wl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Qs(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},Ha=ye([ur,Nn,$w,y4,p4,dH,fH,_n],hH),Fw=ye([e4,t4,NV],(e,t,r)=>r4(r.shared,e,t)),v4=e=>e.tooltip.settings.trigger,Lw=e=>e.tooltip.settings.defaultIndex,ip=ye([Gc,Fw,v4,Lw],l4),Ac=ye([ip,Yc],Rw),x4=ye([Ha,Ac],n4),w4=ye([ip],e=>{if(e)return e.dataKey}),b4=ye([Gc,Fw,v4,Lw],u4),mH=ye([Ua,Ba,ur,Bn,Ha,Lw,b4,Od],c4),pH=ye([ip,mH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),gH=ye([ip],e=>e.active),yH=ye([b4,Ac,Co,EO,x4,Od,Fw],d4);ye([yH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){vH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vH(e,t,r){return(t=xH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bH=()=>ft(Nn),jH=()=>{var e=bH(),t=ft(Ha),r=ft(y4);return Fh(!e||!r?void 0:HN(HN({},e),{},{scale:r}),t)};function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(r),!0).forEach(function(n){SH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SH(e,t,r){return(t=kH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},CH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return oc(oc(oc({},n),ss(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return oc(oc(oc({},n),ss(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var j4=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(Qs(f-m)!==Qs(p-f)){var x=[];if(Qs(p-f)===Qs(s[1]-s[0])){y=p;var b=f+s[1]-s[0];x[0]=Math.min(b,(b+m)/2),x[1]=Math.max(b,(b+m)/2)}else{y=m;var j=p+s[1]-s[0];x[0]=Math.min(f,(j+f)/2),x[1]=Math.max(f,(j+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},AH=()=>ft(yw),zw=(e,t)=>t,S4=(e,t,r)=>r,Uw=(e,t,r,n)=>n,PH=ye(Ha,e=>Am(e,t=>t.coordinate)),Bw=ye([Gc,zw,S4,Uw],l4),k4=ye([Bw,Yc],Rw),OH=(e,t,r)=>{if(t!=null){var n=Gc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},_4=ye([Gc,zw,S4,Uw],u4),rm=ye([Ua,Ba,ur,Bn,Ha,Uw,_4,Od],c4),TH=ye([Bw,rm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),N4=ye([Ha,k4],n4),IH=ye([_4,k4,Co,EO,N4,Od,zw],d4),DH=ye([Bw],e=>({isActive:e.active,activeIndex:e.index})),RH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&EH(e,l)){var u=kU(e,t),d=j4(u,i,s,r,n),m=NH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},$H=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=S7(e,r);if(u){var d=_U(u,t),m=j4(d,l,i,n,s),f=CH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},MH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?RH(e,t,n,s,i,l,u):$H(e,t,r,n,s,i,l)},FH=ye(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),LH=ye(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values($s)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:Cq}});function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function YN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){zH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WH={},qH={zIndexMap:Object.values($s).reduce((e,t)=>YN(YN({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),WH)},VH=new Set(Object.values($s));function HH(e){return VH.has(e)}var C4=Fs({name:"zIndex",initialState:qH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:bn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!HH(r)&&delete e.zIndexMap[r])},prepare:bn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:bn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:bn()}}}),{registerZIndexPortal:KH,unregisterZIndexPortal:GH,registerZIndexPortalId:YH,unregisterZIndexPortalId:JH}=C4.actions,XH=C4.reducer;function Eo(e){var{zIndex:t,children:r}=e,n=oB(),s=n&&t!==void 0&&t!==0,i=ni(),l=tn();v.useLayoutEffect(()=>s?(l(KH({zIndex:t})),()=>{l(GH({zIndex:t}))}):zc,[l,t,s]);var u=ft(m=>FH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?SC.createPortal(r,d):null}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U0.apply(null,arguments)}function JN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZH(e){var t=eK(e,"string");return typeof t=="symbol"?t:t+""}function eK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function rK(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var b,j,S;if(f==="ScatterChart")b=p,j=FB,S=$s.cursorLine;else if(f==="BarChart")b=LB(u,p,i,l),j=lP,S=$s.cursorRectangle;else if(u==="radial"&&lA(p)){var{cx:_,cy:E,radius:C,startAngle:O,endAngle:T}=cP(p);b={cx:_,cy:E,startAngle:O,endAngle:T,innerRadius:C,outerRadius:C},j=dP,S=$s.cursorLine}else b={points:C7(u,p,i)},j=nP,S=$s.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,$=Xf(Xf(Xf(Xf({stroke:"#ccc",pointerEvents:"none"},i),b),Nx(d)),{},{payload:y,payloadIndex:x,className:Ir("recharts-tooltip-cursor",P)});return v.createElement(Eo,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(tK,{cursor:d,cursorComp:j,cursorProps:$}))}function nK(e){var t=jH(),r=sB(),n=zm(),s=AH();return t==null||r==null||n==null||s==null?null:v.createElement(rK,U0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var E4=v.createContext(null),sK=()=>v.useContext(E4),yv={exports:{}},XN;function iK(){return XN||(XN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),b=r?r+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],x]:d._events[b].push(x):(d._events[b]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,b=new Array(x);y<x;y++)b[y]=p[y].fn;return b},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,b){var j=r?r+m:m;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,b),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var O=S.length,T;for(C=0;C<O;C++)switch(S[C].once&&this.removeListener(m,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,y);break;default:if(!E)for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!y||b.once)&&(!p||b.context===p)&&l(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||y&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(yv)),yv.exports}var aK=iK();const oK=Bi(aK);var dd=new oK,B0="recharts.syncEvent.tooltip",QN="recharts.syncEvent.brush";function lK(e,t){if(t){var r=Number.parseInt(t,10);if(!na(r))return e==null?void 0:e[r]}}var cK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},A4=Fs({name:"options",initialState:cK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),uK=A4.reducer,{createEventEmitter:dK}=A4.actions;function fK(e){return e.tooltip.syncInteraction}var hK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},P4=Fs({name:"chartData",initialState:hK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:ZN,setDataStartEndIndexes:mK,setComputedData:pee}=P4.actions,pK=P4.reducer,gK=["x","y"];function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(n){yK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yK(e,t,r){return(t=vK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=xK(e,"string");return typeof t=="symbol"?t:t+""}function xK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wK(e,t){if(e==null)return{};var r,n,s=bK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jK(){var e=ft(vw),t=ft(xw),r=tn(),n=ft(uO),s=ft(Ha),i=zm(),l=Lm(),u=ft(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return zc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:b,y:j}=x,S=wK(x,gK),{x:_,y:E,width:C,height:O}=f.payload.sourceViewBox,T=lc(lc({},S),{},{x:l.x+(C?(b-_)/C:0)*l.width,y:l.y+(O?(j-E)/O:0)*l.height});r(lc(lc({},f),{},{payload:lc(lc({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var $={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},G=n(s,$);P=s[G]}else n==="value"&&(P=s.find(B=>String(B.value)===f.payload.label));var{coordinate:M}=f.payload;if(P==null||f.payload.active===!1||M==null||l==null){r(L0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:V,y:L}=M,U=Math.min(V,l.x+l.width),le=Math.min(L,l.y+l.height),ee={x:i==="horizontal"?P.coordinate:U,y:i==="horizontal"?le:P.coordinate},se=L0({active:f.payload.active,coordinate:ee,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(se)}}};return dd.on(B0,d),()=>{dd.off(B0,d)}},[u,r,t,e,n,s,i,l])}function SK(){var e=ft(vw),t=ft(xw),r=tn();v.useEffect(()=>{if(e==null)return zc;var n=(s,i,l)=>{t!==l&&e===s&&r(mK(i))};return dd.on(QN,n),()=>{dd.off(QN,n)}},[r,t,e])}function kK(){var e=tn();v.useEffect(()=>{e(dK())},[e]),jK(),SK()}function _K(e,t,r,n,s,i){var l=ft(x=>OH(x,e,t)),u=ft(xw),d=ft(vw),m=ft(uO),f=ft(fK),p=f==null?void 0:f.active,y=Lm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=L0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});dd.emit(B0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){NK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NK(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AK(e){return e.dataKey}function PK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(gB,t)}var n2=[],OK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Uc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function TK(e){var t,r,n=bi(e,OK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:b,useTranslate3d:j,wrapperStyle:S,cursor:_,shared:E,trigger:C,defaultIndex:O,portal:T,axisId:P}=n,$=tn(),G=typeof O=="number"?String(O):O;v.useEffect(()=>{$(PV({shared:E,trigger:C,axisId:P,active:s,defaultIndex:G}))},[$,E,C,P,s,G]);var M=Lm(),V=rP(),L=_V(E),{activeIndex:U,isActive:le}=(t=ft(Z=>DH(Z,L,C,G)))!==null&&t!==void 0?t:{},ee=ft(Z=>IH(Z,L,C,G)),se=ft(Z=>N4(Z,L,C,G)),B=ft(Z=>TH(Z,L,C,G)),re=ee,ne=sK(),ae=(r=s??le)!==null&&r!==void 0?r:!1,[ce,I]=f8([re,ae]),H=L==="axis"?se:void 0;_K(L,C,B,H,U,ae);var Fe=T??ne;if(Fe==null||M==null||L==null)return null;var ie=re??n2;ae||(ie=n2),m&&ie.length&&(ie=Fz(ie.filter(Z=>Z.value!=null&&(Z.hide!==!0||n.includeHidden)),y,AK));var me=ie.length>0,q=v.createElement(SB,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:ae,coordinate:B,hasPayload:me,offset:p,position:x,reverseDirection:b,useTranslate3d:j,viewBox:M,wrapperStyle:S,lastBoundingBox:ce,innerRef:I,hasPortalFromProps:!!T},PK(d,r2(r2({},n),{},{payload:ie,label:H,active:ae,activeIndex:U,coordinate:B,accessibilityLayer:V})));return v.createElement(v.Fragment,null,SC.createPortal(q,Fe),ae&&v.createElement(nK,{cursor:_,tooltipEventType:L,coordinate:B,payload:ie,index:U}))}var Ww=e=>null;Ww.displayName="Cell";function IK(e,t,r){return(t=DK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DK(e){var t=RK(e,"string");return typeof t=="symbol"?t:t+""}function RK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $K{constructor(t){IK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(n){FK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FK(e,t,r){return(t=LK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LK(e){var t=zK(e,"string");return typeof t=="symbol"?t:t+""}function zK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UK={cacheSize:2e3,enableCache:!0},O4=MK({},UK),i2=new $K(O4.cacheSize),BK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},a2="recharts_measurement_span";function WK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var o2=(e,t)=>{try{var r=document.getElementById(a2);r||(r=document.createElement("span"),r.setAttribute("id",a2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,BK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Yu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Uc.isSsr)return{width:0,height:0};if(!O4.enableCache)return o2(t,r);var n=WK(t,r),s=i2.get(n);if(s)return s;var i=o2(t,r);return i2.set(n,i),i},l2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,c2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,T4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HK=Object.keys(T4),pc="NaN";function KK(e,t){return e*T4[t]}class Ts{static parse(t){var r,[,n,s]=(r=VK.exec(t))!==null&&r!==void 0?r:[];return new Ts(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,na(t)&&(this.unit=""),r!==""&&!qK.test(r)&&(this.num=NaN,this.unit=""),HK.includes(r)&&(this.num=KK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ts(NaN,""):new Ts(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ts(NaN,""):new Ts(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ts(NaN,""):new Ts(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ts(NaN,""):new Ts(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return na(this.num)}}function I4(e){if(e.includes(pc))return pc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=l2.exec(t))!==null&&r!==void 0?r:[],l=Ts.parse(n??""),u=Ts.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return pc;t=t.replace(l2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=c2.exec(t))!==null&&m!==void 0?m:[],x=Ts.parse(f??""),b=Ts.parse(y??""),j=p==="+"?x.add(b):x.subtract(b);if(j.isNaN())return pc;t=t.replace(c2,j.toString())}return t}var u2=/\(([^()]*)\)/;function GK(e){for(var t=e,r;(r=u2.exec(t))!=null;){var[,n]=r;t=t.replace(u2,I4(n))}return t}function YK(e){var t=e.replace(/\s+/g,"");return t=GK(t),t=I4(t),t}function JK(e){try{return YK(e)}catch{return pc}}function vv(e){var t=JK(e.slice(5,-1));return t===pc?"":t}var XK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QK=["dx","dy","angle","className","breakAll"];function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(null,arguments)}function d2(e,t){if(e==null)return{};var r,n,s=ZK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var D4=/[ \f\n\r\t\v\u2028\u2029]+/,R4=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Un(t)||(r?s=t.toString().split(""):s=t.toString().split(D4));var i=s.map(u=>({word:u,width:Yu(u,n).width})),l=r?0:Yu("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function eG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var $4=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),M4=e=>e.reduce((t,r)=>t.width>r.width?t:r),tG="",f2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=R4({breakAll:r,style:n,children:d+tG});if(!m)return[!1,[]];var f=$4(m.wordsWithComputedWidth,i,l,u),p=f.length>s||M4(f).width>Number(i);return[p,f]},rG=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=xt(i),f=String(l),p=$4(t,n,r,s);if(!m||s)return p;var y=p.length>i||M4(p).width>Number(n);if(!y)return p;for(var x=0,b=f.length-1,j=0,S;x<=b&&j<=f.length-1;){var _=Math.floor((x+b)/2),E=_-1,[C,O]=f2(f,E,d,u,i,n,r,s),[T]=f2(f,_,d,u,i,n,r,s);if(!C&&!T&&(x=_+1),C&&T&&(b=_-1),!C&&T){S=O;break}j++}return S||p},h2=e=>{var t=Un(e)?[]:e.toString().split(D4);return[{words:t,width:void 0}]},nG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!Uc.isSsr){var u,d,m=R4({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return h2(n);return rG({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return h2(n)},F4="#808080",sG={breakAll:!1,capHeight:"0.71em",fill:F4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},qw=v.forwardRef((e,t)=>{var r=bi(e,sG),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=d2(r,XK),y=v.useMemo(()=>nG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:b,angle:j,className:S,breakAll:_}=p,E=d2(p,QK);if(!sa(n)||!sa(s)||y.length===0)return null;var C=Number(n)+(xt(x)?x:0),O=Number(s)+(xt(b)?b:0);if(!en(C)||!en(O))return null;var T;switch(f){case"start":T=vv("calc(".concat(l,")"));break;case"middle":T=vv("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:T=vv("calc(".concat(y.length-1," * -").concat(i,")"));break}var P=[];if(d){var $=y[0].width,{width:G}=p;P.push("scale(".concat(xt(G)&&xt($)?G/$:1,")"))}return j&&P.push("rotate(".concat(j,", ").concat(C,", ").concat(O,")")),P.length&&(E.transform=P.join(" ")),v.createElement("text",W0({},vi(E),{ref:t,x:C,y:O,className:Ir("recharts-text",S),textAnchor:m,fill:u.includes("url")?F4:u}),y.map((M,V)=>{var L=M.words.join(_?"":" ");return v.createElement("tspan",{x:C,dy:V===0?T:i,key:"".concat(L,"-").concat(V)},L)}))});qw.displayName="Text";var iG=["labelRef"];function aG(e,t){if(e==null)return{};var r,n,s=oG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){lG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lG(e,t,r){return(t=cG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cG(e){var t=uG(e,"string");return typeof t=="symbol"?t:t+""}function uG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sa.apply(null,arguments)}var L4=v.createContext(null),dG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(L4.Provider,{value:d},u)},z4=()=>{var e=v.useContext(L4),t=Lm();return e||eP(t)},fG=v.createContext(null),hG=()=>{var e=v.useContext(fG),t=ft(pO);return e||t},mG=e=>{var{value:t,formatter:r}=e,n=Un(e.children)?t:e.children;return typeof r=="function"?r(n):n},Vw=e=>e!=null&&typeof e=="function",pG=(e,t)=>{var r=Qs(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,b=(m+f)/2,j=pG(p,y),S=j>=0?1:-1,_,E;switch(t){case"insideStart":_=p+S*i,E=x;break;case"insideEnd":_=y-S*i,E=!x;break;case"end":_=y+S*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=j<=0?E:!E;var C=ss(u,d,b,_),O=ss(u,d,b,_+(E?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),P=Un(e.id)?td("recharts-radial-line-"):e.id;return v.createElement("text",Sa({},n,{dominantBaseline:"central",className:Ir("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:P,d:T})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},yG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ss(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:b}=ss(n,s,y,m);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},q0=e=>"cx"in e&&xt(e.cx),vG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!q0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,b=(d+m)/2,j=p+d/2,S=f>=0?1:-1,_=S*n,E=S>0?"end":"start",C=S>0?"start":"end",O=d>=0?1:-1,T=O*n,P=O>0?"end":"start",$=O>0?"start":"end";if(s==="top"){var G={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return Xr(Xr({},G),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var M={x:y+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return Xr(Xr({},M),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var V={x:x-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Xr(Xr({},V),i?{width:Math.max(V.x-i.x,0),height:f}:{})}if(s==="right"){var L={x:x+b+T,y:u+f/2,textAnchor:$,verticalAnchor:"middle"};return Xr(Xr({},L),i?{width:Math.max(i.x+i.width-L.x,0),height:f}:{})}var U=i?{width:b,height:f}:{};return s==="insideLeft"?Xr({x:x+T,y:u+f/2,textAnchor:$,verticalAnchor:"middle"},U):s==="insideRight"?Xr({x:x+b-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},U):s==="insideTop"?Xr({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},U):s==="insideBottom"?Xr({x:y+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},U):s==="insideTopLeft"?Xr({x:p+T,y:u+_,textAnchor:$,verticalAnchor:C},U):s==="insideTopRight"?Xr({x:p+d-T,y:u+_,textAnchor:P,verticalAnchor:C},U):s==="insideBottomLeft"?Xr({x:y+T,y:u+f-_,textAnchor:$,verticalAnchor:E},U):s==="insideBottomRight"?Xr({x:y+m-T,y:u+f-_,textAnchor:P,verticalAnchor:E},U):s&&typeof s=="object"&&(xt(s.x)||Ia(s.x))&&(xt(s.y)||Ia(s.y))?Xr({x:l+Ui(s.x,b),y:u+Ui(s.y,f),textAnchor:"end",verticalAnchor:"end"},U):Xr({x:j,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},U)},xG={offset:5,zIndex:$s.label};function mo(e){var t=bi(e,xG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=hG(),p=z4(),y=n==="center"?p:f??p,x,b,j;if(r==null?x=y:q0(r)?x=r:x=eP(r),!x||Un(s)&&Un(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=Xr(Xr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:_}=S,E=aG(S,iG);return v.cloneElement(l,E)}if(typeof l=="function"){if(b=v.createElement(l,S),v.isValidElement(b))return b}else b=mG(t);var C=vi(t);if(q0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return gG(t,n,b,C,x);j=yG(x,t.offset,t.position)}else j=vG(t,x);return v.createElement(Eo,{zIndex:t.zIndex},v.createElement(qw,Sa({ref:m,className:Ir("recharts-label",u)},C,j,{textAnchor:eG(C.textAnchor)?C.textAnchor:j.textAnchor,breakAll:d}),b))}mo.displayName="Label";var wG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(mo,Sa({key:"label-implicit"},n)):sa(e)?v.createElement(mo,Sa({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===mo?v.cloneElement(e,Xr({key:"label-implicit"},n)):v.createElement(mo,Sa({key:"label-implicit",content:e},n)):Vw(e)?v.createElement(mo,Sa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(mo,Sa({},e,{key:"label-implicit"},n)):null};function bG(e){var{label:t,labelRef:r}=e,n=z4();return wG(t,n,r)||null}var xv={},wv={},p2;function jG(){return p2||(p2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(wv)),wv}var bv={},g2;function SG(){return g2||(g2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(bv)),bv}var y2;function kG(){return y2||(y2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jG(),r=SG(),n=Dx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(xv)),xv}var jv,v2;function _G(){return v2||(v2=1,jv=kG().last),jv}var NG=_G();const CG=Bi(NG);var EG=["valueAccessor"],AG=["dataKey","clockWise","id","textBreakAll","zIndex"];function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nm.apply(null,arguments)}function x2(e,t){if(e==null)return{};var r,n,s=PG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OG=e=>Array.isArray(e.value)?CG(e.value):e.value,U4=v.createContext(void 0),TG=U4.Provider,B4=v.createContext(void 0);B4.Provider;function IG(){return v.useContext(U4)}function DG(){return v.useContext(B4)}function uh(e){var{valueAccessor:t=OG}=e,r=x2(e,EG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=x2(r,AG),m=IG(),f=DG(),p=m||f;return!p||!p.length?null:v.createElement(Eo,{zIndex:u??$s.label},v.createElement(Ta,{className:"recharts-label-list"},p.map((y,x)=>{var b,j=Un(n)?t(y,x):bs(y&&y.payload,n),S=Un(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(mo,nm({key:"label-".concat(x)},vi(y),d,S,{fill:(b=r.fill)!==null&&b!==void 0?b:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}uh.displayName="LabelList";function RG(e){var{label:t}=e;return t?t===!0?v.createElement(uh,{key:"labelList-implicit"}):v.isValidElement(t)||Vw(t)?v.createElement(uh,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(uh,nm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var $G={radiusAxis:{},angleAxis:{}},W4=Fs({name:"polarAxis",initialState:$G,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gee,removeRadiusAxis:yee,addAngleAxis:vee,removeAngleAxis:xee}=W4.actions,MG=W4.reducer,Sv={exports:{}},gr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2;function FG(){if(w2)return gr;w2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case s:case n:case d:case m:case y:return j;default:switch(j=j&&j.$$typeof,j){case l:case u:case p:case f:return j;case i:return j;default:return S}}case t:return S}}}return gr.ContextConsumer=i,gr.ContextProvider=l,gr.Element=e,gr.ForwardRef=u,gr.Fragment=r,gr.Lazy=p,gr.Memo=f,gr.Portal=t,gr.Profiler=s,gr.StrictMode=n,gr.Suspense=d,gr.SuspenseList=m,gr.isContextConsumer=function(j){return b(j)===i},gr.isContextProvider=function(j){return b(j)===l},gr.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},gr.isForwardRef=function(j){return b(j)===u},gr.isFragment=function(j){return b(j)===r},gr.isLazy=function(j){return b(j)===p},gr.isMemo=function(j){return b(j)===f},gr.isPortal=function(j){return b(j)===t},gr.isProfiler=function(j){return b(j)===s},gr.isStrictMode=function(j){return b(j)===n},gr.isSuspense=function(j){return b(j)===d},gr.isSuspenseList=function(j){return b(j)===m},gr.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===s||j===n||j===d||j===m||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===f||j.$$typeof===l||j.$$typeof===i||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},gr.typeOf=b,gr}var b2;function LG(){return b2||(b2=1,Sv.exports=FG()),Sv.exports}var zG=LG(),j2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",S2=null,kv=null,q4=e=>{if(e===S2&&Array.isArray(kv))return kv;var t=[];return v.Children.forEach(e,r=>{Un(r)||(zG.isFragment(r)?t=t.concat(q4(r.props.children)):t.push(r))}),kv=t,S2=e,t};function UG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>j2(s)):n=[j2(t)],q4(e).forEach(s=>{var i=Sc(s,"type.displayName")||Sc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var _v={},k2;function BG(){return k2||(k2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(_v)),_v}var Nv,_2;function WG(){return _2||(_2=1,Nv=BG().isPlainObject),Nv}var qG=WG();const VG=Bi(qG);function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){HG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HG(e,t,r){return(t=KG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KG(e){var t=GG(e,"string");return typeof t=="symbol"?t:t+""}function GG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sm.apply(null,arguments)}var E2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},YG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JG=e=>{var t=bi(e,YG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,b]=v.useState(-1),j=v.useRef(s),S=v.useRef(i),_=v.useRef(l),E=v.useRef(r),C=v.useRef(n),O=qx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ee=y.current.getTotalLength();ee&&b(ee)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var T=Ir("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",sm({},vi(t),{className:T,d:E2(r,n,s,i,l)})));var P=j.current,$=S.current,G=_.current,M=E.current,V=C.current,L="0px ".concat(x===-1?1:x,"px"),U="".concat(x,"px 0px"),le=sP(["strokeDasharray"],m,d);return v.createElement(Wx,{animationId:O,key:O,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},ee=>{var se=rs(P,s,ee),B=rs($,i,ee),re=rs(G,l,ee),ne=rs(M,r,ee),ae=rs(V,n,ee);y.current&&(j.current=se,S.current=B,_.current=re,E.current=ne,C.current=ae);var ce=ee>0?{transition:le,strokeDasharray:U}:{strokeDasharray:L};return v.createElement("path",sm({},vi(t),{className:T,d:E2(ne,ae,se,B,re),ref:y,style:C2(C2({},ce),t.style)}))})},XG=["option","shapeType","propTransformer","activeClassName","isActive"];function QG(e,t){if(e==null)return{};var r,n,s=ZG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){eY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eY(e,t,r){return(t=tY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){var t=rY(e,"string");return typeof t=="symbol"?t:t+""}function rY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nY(e,t){return im(im({},t),e)}function sY(e,t){return e==="symbols"}function P2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(lP,r);case"trapezoid":return v.createElement(JG,r);case"sector":return v.createElement(dP,r);case"symbols":if(sY(t))return v.createElement(oA,r);break;case"curve":return v.createElement(nP,r);default:return null}}function iY(e){return v.isValidElement(e)?e.props:e}function aY(e){var{option:t,shapeType:r,propTransformer:n=nY,activeClassName:s="recharts-active-shape",isActive:i}=e,l=QG(e,XG),u;if(v.isValidElement(t))u=v.cloneElement(t,im(im({},l),iY(t)));else if(typeof t=="function")u=t(l);else if(VG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(P2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(P2,{shapeType:r,elementProps:m})}return i?v.createElement(Ta,{className:s},u):u}var V4=(e,t)=>{var r=tn();return(n,s)=>i=>{e==null||e(n,s,i),r(i4({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},H4=e=>{var t=tn();return(r,n)=>s=>{e==null||e(r,n,s),t(OV())}},K4=(e,t)=>{var r=tn();return(n,s)=>i=>{e==null||e(n,s,i),r(TV({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function oY(e){var{fn:t,args:r}=e,n=tn(),s=ni();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(EV(i)),()=>{n(AV(i))}}},[t,r,n,s]),null}function lY(e){var{legendPayload:t}=e,r=tn(),n=ni();return v.useLayoutEffect(()=>n?zc:(r(cB(t)),()=>{r(uB(t))}),[r,n,t]),null}var Cv,cY=()=>{var[e]=v.useState(()=>td("uid-"));return e},uY=(Cv=oD.useId)!==null&&Cv!==void 0?Cv:cY;function G4(e,t){var r=uY();return t||(e?"".concat(e,"-").concat(r):r)}var dY=v.createContext(void 0),fY=e=>{var{id:t,type:r,children:n}=e,s=G4("recharts-".concat(r),t);return v.createElement(dY.Provider,{value:s},n(s))},hY={cartesianItems:[],polarItems:[]},Y4=Fs({name:"graphicalItems",initialState:hY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:bn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ea(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:bn()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ea(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:bn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:bn()},removePolarGraphicalItem:{reducer(e,t){var r=Ea(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:bn()}}}),{addCartesianGraphicalItem:mY,replaceCartesianGraphicalItem:pY,removeCartesianGraphicalItem:gY,addPolarGraphicalItem:wee,removePolarGraphicalItem:bee}=Y4.actions,yY=Y4.reducer;function vY(e){var t=tn(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(mY(e)):r.current!==e&&t(pY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(gY(r.current)),r.current=null)},[t]),null}function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(n){xY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xY(e,t,r){return(t=wY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=bY(e,"string");return typeof t=="symbol"?t:t+""}function bY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jY={xAxis:{},yAxis:{},zAxis:{}},J4=Fs({name:"cartesianAxis",initialState:jY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:bn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:bn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:bn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:bn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:bn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:bn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=T2(T2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:SY,removeXAxis:kY,addYAxis:_Y,removeYAxis:NY,addZAxis:jee,removeZAxis:See,updateYAxisWidth:CY}=J4.actions,EY=J4.reducer,AY=ye([Bn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),PY=ye([AY,Ua,Ba],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),X4=()=>ft(PY),OY="Invariant failed";function TY(e,t){throw new Error(OY)}var IY=["x","y"];function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(null,arguments)}function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){DY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DY(e,t,r){return(t=RY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MY(e,t){if(e==null)return{};var r,n,s=FY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function FY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LY(e,t){var{x:r,y:n}=e,s=MY(e,IY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return Du(Du(Du(Du(Du({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function am(e){return v.createElement(aY,V0({shapeType:"rectangle",propTransformer:LY,activeClassName:"recharts-active-bar"},e))}var zY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(xt(t))return t;var i=xt(n)||Un(n);return i?t(n,s):(i||TY(),r)}},UY={},Q4=Fs({name:"errorBars",initialState:UY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:kee,replaceErrorBar:_ee,removeErrorBar:Nee}=Q4.actions,BY=Q4.reducer,WY=["children"];function qY(e,t){if(e==null)return{};var r,n,s=VY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},KY=v.createContext(HY);function GY(e){var{children:t}=e,r=qY(e,WY);return v.createElement(KY.Provider,{value:r},t)}function Z4(e,t){var r,n,s=ft(m=>qa(m,e)),i=ft(m=>Va(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Vs.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Hs.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function YY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=X4(),{needClipX:i,needClipY:l,needClip:u}=Z4(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function JY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&en(e.zIndex)?e.zIndex:t}var XY=["onMouseEnter","onMouseLeave","onClick"],QY=["value","background","tooltipPosition"],ZY=["id"],eJ=["onMouseEnter","onClick","onMouseLeave"];function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},La.apply(null,arguments)}function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(n){tJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tJ(e,t,r){return(t=rJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=nJ(e,"string");return typeof t=="symbol"?t:t+""}function nJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function om(e,t){if(e==null)return{};var r,n,s=sJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:YA(r,t),payload:e}]};function aJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:YA(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function oJ(e){var t=ft(Ac),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=om(i,XY),f=V4(l,n),p=H4(u),y=K4(d,n);if(!s||r==null)return null;var x=Nx(s);return v.createElement(Eo,{zIndex:JY(s,$s.barBackground)},r.map((b,j)=>{var{value:S,background:_,tooltipPosition:E}=b,C=om(b,QY);if(!_)return null;var O=f(b,j),T=p(b,j),P=y(b,j),$=xs(xs(xs(xs(xs({option:s,isActive:String(j)===t},C),{},{fill:"#eee"},_),x),Ix(m,b,j)),{},{onMouseEnter:O,onMouseLeave:T,onClick:P,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return v.createElement(am,La({key:"background-bar-".concat(j)},$))}))}function lJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return xs(xs({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(TG,{value:t?s:void 0},r)}function cJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=ft(Ac),d=ft(w4),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(Eo,{zIndex:$s.activeBar},v.createElement(am,La({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(am,La({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function uJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(am,La({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function dJ(e){var t,{data:r,props:n}=e,s=(t=bo(n))!==null&&t!==void 0?t:{},{id:i}=s,l=om(s,ZY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=om(n,eJ),b=V4(f,d),j=H4(y),S=K4(p,d);return r?v.createElement(v.Fragment,null,r.map((_,E)=>v.createElement(Ta,La({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},Ix(x,_,E),{onMouseEnter:b(_,E),onMouseLeave:j(_,E),onClick:S(_,E)}),m?v.createElement(cJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):v.createElement(uJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function fJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=qx(t,"recharts-bar-"),[x,b]=v.useState(!1),j=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),_=v.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return v.createElement(lJ,{showLabels:j,rects:n},v.createElement(Wx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:_,key:y},E=>{var C=E===1?n:n==null?void 0:n.map((O,T)=>{var P=p&&p[T];if(P)return xs(xs({},O),{},{x:rs(P.x,O.x,E),y:rs(P.y,O.y,E),width:rs(P.width,O.width,E),height:rs(P.height,O.height,E)});if(s==="horizontal"){var $=rs(0,O.height,E),G=rs(O.stackedBarStart,O.y,E);return xs(xs({},O),{},{y:G,height:$})}var M=rs(0,O.width,E),V=rs(O.stackedBarStart,O.x,E);return xs(xs({},O),{},{width:M,x:V})});return E>0&&(r.current=C??null),C==null?null:v.createElement(Ta,null,v.createElement(dJ,{props:t,data:C}))}),v.createElement(RG,{label:t.label}),t.children)}function hJ(e){var t=v.useRef(null);return v.createElement(fJ,{previousRectanglesRef:t,props:e})}var eT=0,mJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:bs(e,t)}};class pJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Ir("recharts-bar",s),p=m;return v.createElement(Ta,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(YY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(Ta,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(oJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(hJ,this.props)))}}var gJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Uc.isSsr,legendType:"rect",minPointSize:eT,xAxisId:0,yAxisId:0,zIndex:$s.bar};function yJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=Z4(t,r),y=zm(),x=ni(),b=UG(e.children,Ww),j=ft(E=>VJ(E,t,r,x,e.id,b));if(y!=="vertical"&&y!=="horizontal")return null;var S,_=j==null?void 0:j[0];return _==null||_.height==null||_.width==null?S=0:S=y==="vertical"?_.height/2:_.width/2,v.createElement(GY,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:mJ,errorBarOffset:S},v.createElement(pJ,La({},e,{layout:y,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function vJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:b,dataStartIndex:j}=e,S=t==="horizontal"?u:l,_=f?S.scale.domain():null,E=wU({numericAxis:S}),C=S.scale(E);return p.map((O,T)=>{var P,$,G,M,V,L;f?P=mU(f[T+j],_):(P=bs(O,r),Array.isArray(P)||(P=[E,P]));var U=zY(n,eT)(P[1],T);if(t==="horizontal"){var le,[ee,se]=[u.scale(P[0]),u.scale(P[1])];$=p_({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:O,index:T}),G=(le=se??ee)!==null&&le!==void 0?le:void 0,M=s.size;var B=ee-se;if(V=na(B)?0:B,L={x:$,y:y.top,width:M,height:y.height},Math.abs(U)>0&&Math.abs(V)<Math.abs(U)){var re=Qs(V||U)*(Math.abs(U)-Math.abs(V));G-=re,V+=re}}else{var[ne,ae]=[l.scale(P[0]),l.scale(P[1])];if($=ne,G=p_({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:O,index:T}),M=ae-ne,V=s.size,L={x:y.left,y:G,width:y.width,height:V},Math.abs(U)>0&&Math.abs(M)<Math.abs(U)){var ce=Qs(M||U)*(Math.abs(U)-Math.abs(M));M+=ce}}if($==null||G==null||M==null||V==null)return null;var I=xs(xs({},O),{},{stackedBarStart:C,x:$,y:G,width:M,height:V,value:f?P:P[1],payload:O,background:L,tooltipPosition:{x:$+M/2,y:G+V/2},parentViewBox:b},x&&x[T]&&x[T].props);return I}).filter(Boolean)}function xJ(e){var t=bi(e,gJ),r=ni();return v.createElement(fY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(lY,{legendPayload:iJ(t)}),v.createElement(oY,{fn:aJ,args:t}),v.createElement(vY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:xU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(Eo,{zIndex:t.zIndex},v.createElement(yJ,La({},t,{id:n})))))}var tT=v.memo(xJ);tT.displayName="Bar";function R2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(r),!0).forEach(function(n){wJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wJ(e,t,r){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=jJ(e,"string");return typeof t=="symbol"?t:t+""}function jJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SJ=(e,t)=>t,kJ=(e,t,r)=>r,_J=(e,t,r,n)=>n,NJ=(e,t,r,n,s)=>s,Id=ye([_w,NJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),CJ=ye([Id],e=>e==null?void 0:e.maxBarSize),EJ=(e,t,r,n,s,i)=>i,$2=(e,t,r)=>{var n=r??e;if(!Un(n))return Ui(n,t,0)},AJ=ye([ur,_w,SJ,kJ,_J],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),PJ=(e,t,r,n)=>{var s=ur(e);return s==="horizontal"?F0(e,"yAxis",r,n):F0(e,"xAxis",t,n)},OJ=(e,t,r)=>{var n=ur(e);return n==="horizontal"?UN(e,"xAxis",t):UN(e,"yAxis",r)},TJ=(e,t,r)=>{var n={},s=e.filter(Zm),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(b=>b.dataKey),x=$2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=$2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},IJ=ye([AJ,bq,OJ],TJ),DJ=(e,t,r,n,s)=>{var i,l,u=Id(e,t,r,n,s);if(u!=null){var d=ur(e),m=lO(e),{maxBarSize:f}=u,p=Un(f)?m:f,y,x;return d==="horizontal"?(y=Ec(e,"xAxis",t,n),x=Cc(e,"xAxis",t,n)):(y=Ec(e,"yAxis",r,n),x=Cc(e,"yAxis",r,n)),(i=(l=Fh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},rT=(e,t,r,n)=>{var s=ur(e),i,l;return s==="horizontal"?(i=Ec(e,"xAxis",t,n),l=Cc(e,"xAxis",t,n)):(i=Ec(e,"yAxis",r,n),l=Cc(e,"yAxis",r,n)),Fh(i,l)};function RJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=Ui(e,r,0,!0),u,d=[];if(en(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((_,E)=>{var C,O={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[..._,O];return x=T[T.length-1].position,T},d)}else{var b=Ui(t,r,0,!0);r-2*b-(i-1)*l<=0&&(l=0);var j=(r-2*b-(i-1)*l)/i;j>1&&(j>>=0);var S=en(s)?Math.min(j,s):j;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:b+(j+l)*C+(j-S)/2,size:S}}],d)}return u}}var $J=(e,t,r,n,s,i,l)=>{var u=Un(l)?t:l,d=RJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>Qf(Qf({},m),{},{position:Qf(Qf({},m.position),{},{offset:m.position.offset-s/2})}))),d},MJ=ye([IJ,lO,wq,cO,DJ,rT,CJ],$J),FJ=(e,t,r,n)=>Ec(e,"xAxis",t,n),LJ=(e,t,r,n)=>Ec(e,"yAxis",r,n),zJ=(e,t,r,n)=>Cc(e,"xAxis",t,n),UJ=(e,t,r,n)=>Cc(e,"yAxis",r,n),BJ=ye([MJ,Id],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),WJ=(e,t)=>{var r=Sw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},qJ=ye([PJ,Id],WJ),VJ=ye([Bn,Ux,FJ,LJ,zJ,UJ,BJ,ur,mw,rT,qJ,Id,EJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:j}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,_;if(S!=null&&S.length>0?_=S:_=x==null?void 0:x.slice(b,j+1),_!=null)return vJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:_,offset:e,cells:y,dataStartIndex:b})}}),HJ=e=>{var{chartData:t}=e,r=tn(),n=ni();return v.useEffect(()=>n?()=>{}:(r(ZN(t)),()=>{r(ZN(void 0))}),[t,r,n]),null},M2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},nT=Fs({name:"brush",initialState:M2,reducers:{setBrushSettings(e,t){return t.payload==null?M2:t.payload}}}),{setBrushSettings:Cee}=nT.actions,KJ=nT.reducer;function GJ(e,t,r){return(t=YJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJ(e){var t=JJ(e,"string");return typeof t=="symbol"?t:t+""}function JJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Hw{static create(t){return new Hw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}GJ(Hw,"EPS",1e-4);function XJ(e){return(e%180+180)%180}var QJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=XJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},ZJ={dots:[],areas:[],lines:[]},sT=Fs({name:"referenceElements",initialState:ZJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ea(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ea(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ea(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Eee,removeDot:Aee,addArea:Pee,removeArea:Oee,addLine:Tee,removeLine:Iee}=sT.actions,eX=sT.reducer,tX=v.createContext(void 0),rX=e=>{var{children:t}=e,[r]=v.useState("".concat(td("recharts"),"-clip")),n=X4();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(tX.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function Pc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function iT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function nX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return QJ(n,r)}function sX(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function lm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function iX(e,t){return iT(e,t+1)}function aX(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var b=n==null?void 0:n[d];if(b===void 0)return{v:iT(n,m)};var j=d,S,_=()=>(S===void 0&&(S=r(b,j)),S),E=b.coordinate,C=d===0||lm(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function F2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(r),!0).forEach(function(n){oX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uX(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],b,j=()=>(b===void 0&&(b=r(x,y)),b);if(y===l-1){var S=e*(x.coordinate+e*j()/2-d);i[y]=x=ds(ds({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=ds(ds({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=lm(e,x.tickCoord,j,u,d);_&&(d=x.tickCoord-e*(j()/2+s),i[y]=ds(ds({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function dX(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=ds(ds({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=lm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=ds(ds({},f),{},{isShow:!0}))}}for(var b=i?u-1:u,j=function(E){var C=l[E],O,T=()=>(O===void 0&&(O=r(C,E)),O);if(E===0){var P=e*(C.coordinate-e*T()/2-d);l[E]=C=ds(ds({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else l[E]=C=ds(ds({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var $=lm(e,C.tickCoord,T,d,m);$&&(d=C.tickCoord+e*(T()/2+s),l[E]=ds(ds({},C),{},{isShow:!0}))}},S=0;S<b;S++)j(S);return l}function fX(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(xt(d)||Uc.isSsr){var y;return(y=iX(s,xt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],b=u==="top"||u==="bottom"?"width":"height",j=f&&b==="width"?Yu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(C,O)=>{var T=typeof m=="function"?m(C.value,O):C.value;return b==="width"?nX(Yu(T,{fontSize:t,letterSpacing:r}),j,p):Yu(T,{fontSize:t,letterSpacing:r})[b]},_=s.length>=2?Qs(s[1].coordinate-s[0].coordinate):1,E=sX(i,_,b);return d==="equidistantPreserveStart"?aX(_,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=dX(_,E,S,s,l,d==="preserveStartEnd"):x=uX(_,E,S,s,l),x.filter(C=>C.isShow))}var hX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},mX=["axisLine","width","height","className","hide","ticks","axisType"],pX=["viewBox"],gX=["viewBox"];function H0(e,t){if(e==null)return{};var r,n,s=yX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pl.apply(null,arguments)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){vX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vX(e,t,r){return(t=xX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xX(e){var t=wX(e,"string");return typeof t=="symbol"?t:t+""}function wX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:$s.axis};function jX(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=un(un(un({},d),bo(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=un(un({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=un(un({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",pl({},m,{className:Ir("recharts-cartesian-axis-line",Sc(u,"className"))}))}function SX(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,b,j=u?-1:1,S=e.tickSize||l,_=xt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-j*S,b=p-j*d,x=_;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-j*S,x=m-j*d,b=_;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+j*S,x=m+j*d,b=_;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+j*S,b=p+j*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:b}}}function kX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function _X(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function NX(e){var{option:t,tickProps:r,value:n}=e,s,i=Ir(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,un(un({},r),{},{className:i}));else if(typeof t=="function")s=t(un(un({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Ir(l,t==null?void 0:t.className)),s=v.createElement(qw,pl({},r,{className:l}),n)}return s}var CX=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:b,height:j,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:O,events:T,axisType:P}=e,$=fX(un(un({},O),{},{ticks:r}),E,C),G=kX(f,p),M=_X(f,p),V=bo(O),L=Nx(n),U={};typeof s=="object"&&(U=s);var le=un(un({},V),{},{fill:"none"},U),ee=$.map(re=>un({entry:re},SX(re,y,x,b,j,f,S,p,_))),se=ee.map(re=>{var{entry:ne,line:ae}=re;return v.createElement(Ta,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},s&&v.createElement("line",pl({},le,ae,{className:Ir("recharts-cartesian-axis-tick-line",Sc(s,"className"))})))}),B=ee.map((re,ne)=>{var{entry:ae,tick:ce}=re,I=un(un(un(un({textAnchor:G,verticalAnchor:M},V),{},{stroke:"none",fill:i},L),ce),{},{index:ne,payload:ae,visibleTicksCount:$.length,tickFormatter:l,padding:d},m);return v.createElement(Ta,pl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},Ix(T,ae,ne)),n&&v.createElement(NX,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(ae.value,ne):ae.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},B.length>0&&v.createElement(Eo,{zIndex:$s.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},B)),se.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},se))}),EX=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=H0(e,mX),[f,p]=v.useState(""),[y,x]=v.useState(""),b=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return hX({ticks:b.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=v.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),O=C.fontSize,T=C.letterSpacing;(O!==f||T!==y)&&(p(O),x(T))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(Eo,{zIndex:e.zIndex},v.createElement(Ta,{className:Ir("recharts-cartesian-axis",i)},v.createElement(jX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:bo(e)}),v.createElement(CX,{ref:j,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(dG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(bG,{label:e.label,labelRef:e.labelRef}),e.children)))}),AX=v.memo(EX,(e,t)=>{var{viewBox:r}=e,n=H0(e,pX),{viewBox:s}=t,i=H0(t,gX);return Pc(r,s)&&Pc(n,i)}),Kw=v.forwardRef((e,t)=>{var r=bi(e,bX);return v.createElement(AX,pl({},r,{ref:t}))});Kw.displayName="CartesianAxis";var PX=["dangerouslySetInnerHTML","ticks"],OX=["id"],TX=["domain"],IX=["domain"];function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(null,arguments)}function cm(e,t){if(e==null)return{};var r,n,s=DX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RX(e){var t=tn();return v.useLayoutEffect(()=>(t(SY(e)),()=>{t(kY(e))}),[e,t]),null}var $X=e=>{var{xAxisId:t,className:r}=e,n=ft(Ux),s=ni(),i="xAxis",l=ft(S=>Kc(S,i,t,s)),u=ft(S=>ZO(S,i,t,s)),d=ft(S=>YO(S,t)),m=ft(S=>vV(S,t)),f=ft(S=>yO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=cm(e,PX),{id:b}=f,j=cm(f,OX);return v.createElement(Kw,K0({},x,j,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Ir("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},MX={allowDataOverflow:Vs.allowDataOverflow,allowDecimals:Vs.allowDecimals,allowDuplicatedCategory:Vs.allowDuplicatedCategory,height:Vs.height,hide:!1,mirror:Vs.mirror,orientation:Vs.orientation,padding:Vs.padding,reversed:Vs.reversed,scale:Vs.scale,tickCount:Vs.tickCount,type:Vs.type,xAxisId:0},FX=e=>{var t,r,n,s,i,l=bi(e,MX);return v.createElement(v.Fragment,null,v.createElement(RX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement($X,l))},LX=(e,t)=>{var{domain:r}=e,n=cm(e,TX),{domain:s}=t,i=cm(t,IX);return Pc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Pc({domain:r},{domain:s}):!1},aT=v.memo(FX,LX);aT.displayName="XAxis";var zX=["dangerouslySetInnerHTML","ticks"],UX=["id"],BX=["domain"],WX=["domain"];function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G0.apply(null,arguments)}function um(e,t){if(e==null)return{};var r,n,s=qX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VX(e){var t=tn();return v.useLayoutEffect(()=>(t(_Y(e)),()=>{t(NY(e))}),[e,t]),null}var HX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=ft(Ux),d=ni(),m=tn(),f="yAxis",p=ft(T=>Kc(T,f,t,d)),y=ft(T=>JO(T,t)),x=ft(T=>wV(T,t)),b=ft(T=>ZO(T,f,t,d)),j=ft(T=>vO(T,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Vw(s)||v.isValidElement(s)||j==null)){var T=i.current;if(T){var P=T.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(CY({id:t,width:P}))}}},[b,y,m,s,t,n,j]),y==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:_}=e,E=um(e,zX),{id:C}=j,O=um(j,UX);return v.createElement(Kw,G0({},E,O,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Ir("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:b,axisType:f}))},KX={allowDataOverflow:Hs.allowDataOverflow,allowDecimals:Hs.allowDecimals,allowDuplicatedCategory:Hs.allowDuplicatedCategory,hide:!1,mirror:Hs.mirror,orientation:Hs.orientation,padding:Hs.padding,reversed:Hs.reversed,scale:Hs.scale,tickCount:Hs.tickCount,type:Hs.type,width:Hs.width,yAxisId:0},GX=e=>{var t,r,n,s,i,l=bi(e,KX);return v.createElement(v.Fragment,null,v.createElement(VX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(HX,l))},YX=(e,t)=>{var{domain:r}=e,n=um(e,BX),{domain:s}=t,i=um(t,WX);return Pc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Pc({domain:r},{domain:s}):!1},oT=v.memo(GX,YX);oT.displayName="YAxis";var Ev={exports:{}},Av={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z2;function JX(){if(z2)return Av;z2=1;var e=Oc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Av.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function S(T){if(!_){if(_=!0,E=T,T=p(T),y!==void 0&&b.hasValue){var P=b.value;if(y(P,T))return C=P}return C=T}if(P=C,r(E,T))return P;var $=p(T);return y!==void 0&&y(P,$)?(E=T,P):(E=T,C=$)}var _=!1,E,C,O=f===void 0?null:f;return[function(){return S(m())},O===null?void 0:function(){return S(O())}]},[m,f,p,y]);var j=n(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=j},[j]),u(j),j},Av}var U2;function XX(){return U2||(U2=1,Ev.exports=JX()),Ev.exports}XX();function QX(e){e()}function ZX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){QX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var B2={notify(){},get:()=>[]};function eQ(e,t){let r,n=B2,s=0,i=!1;function l(j){f();const S=n.subscribe(j);let _=!1;return()=>{_||(_=!0,S(),p())}}function u(){n.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=ZX())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=B2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return b}var tQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rQ=tQ(),nQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sQ=nQ(),iQ=()=>rQ||sQ?v.useLayoutEffect:v.useEffect,aQ=iQ(),Pv=Symbol.for("react-redux-context"),Ov=typeof globalThis<"u"?globalThis:{};function oQ(){if(!v.createContext)return{};const e=Ov[Pv]??(Ov[Pv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var lQ=oQ();function cQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=eQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);aQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||lQ;return v.createElement(u.Provider,{value:i},t)}var uQ=cQ,dQ=(e,t)=>t,Gw=ye([dQ,ur,pO,_n,g4,Ha,PH,Bn],MH),Yw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},lT=xi("mouseClick"),cT=bd();cT.startListening({actionCreator:lT,effect:(e,t)=>{var r=e.payload,n=Gw(t.getState(),Yw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(IV({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Y0=xi("mouseMove"),uT=bd();uT.startListening({actionCreator:Y0,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Dw(n,n.tooltip.settings.shared),i=Gw(n,Yw(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(o4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(a4()))}});var W2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},dT=Fs({name:"rootProps",initialState:W2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:W2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),fQ=dT.reducer,{updateOptions:hQ}=dT.actions,fT=Fs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Dee}=fT.actions,mQ=fT.reducer,hT=xi("keyDown"),mT=xi("focus"),Jw=bd();Jw.startListening({actionCreator:hT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(Rw(s,Yc(r))),u=Ha(r);if(i==="Enter"){var d=rm(r,"axis","hover",String(s.index));t.dispatch(z0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=kV(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=rm(r,"axis","hover",String(y));t.dispatch(z0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Jw.startListening({actionCreator:mT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=rm(r,"axis","hover",String(i));t.dispatch(z0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var mi=xi("externalEvent"),pT=bd();pT.startListening({actionCreator:mi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:pH(r),activeDataKey:w4(r),activeIndex:Ac(r),activeLabel:x4(r),activeTooltipIndex:Ac(r),isTooltipActive:gH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var pQ=ye([Gc],e=>e.tooltipItemPayloads),gQ=ye([pQ,Od,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),gT=xi("touchMove"),yT=bd();yT.startListening({actionCreator:gT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Dw(n,n.tooltip.settings.shared);if(s==="axis"){var i=Gw(n,Yw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(o4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(CU),f=(l=d.getAttribute(EU))!==null&&l!==void 0?l:void 0,p=gQ(t.getState(),m,f);t.dispatch(i4({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var yQ=SA({brush:KJ,cartesianAxis:EY,chartData:pK,errorBars:BY,graphicalItems:yY,layout:lU,legend:dB,options:uK,polarAxis:MG,polarOptions:mQ,referenceElements:eX,rootProps:fQ,tooltip:DV,zIndex:XH}),vQ=function(t){return I8({reducer:yQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([cT.middleware,uT.middleware,Jw.middleware,pT.middleware,yT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(RA({type:"raf"}))},devTools:Uc.devToolsEnabled})};function xQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ni(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=vQ(t));var l=Rx;return v.createElement(uQ,{context:l,store:i.current},r)}function wQ(e){var{layout:t,margin:r}=e,n=tn(),s=ni();return v.useEffect(()=>{s||(n(iU(t)),n(sU(r)))},[n,s,t,r]),null}function bQ(e){var t=tn();return v.useEffect(()=>{t(hQ(e))},[t,e]),null}function q2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=G4("".concat(n).concat(t)),i=tn();return v.useLayoutEffect(()=>(i(YH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(JH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function V2(e){var{children:t,isPanorama:r}=e,n=ft(LH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(q2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(q2,{key:l,zIndex:l,isPanorama:r})))}var jQ=["children"];function SQ(e,t){if(e==null)return{};var r,n,s=kQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(null,arguments)}var _Q={width:"100%",height:"100%",display:"block"},NQ=v.forwardRef((e,t)=>{var r=iB(),n=aB(),s=rP();if(!jo(r)||!jo(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(UE,dm({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:_Q,ref:t}),i)}),CQ=e=>{var{children:t}=e,r=ft(Fm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(UE,{width:n,height:s,x:l,y:i},t)},H2=v.forwardRef((e,t)=>{var{children:r}=e,n=SQ(e,jQ),s=ni();return s?v.createElement(CQ,null,v.createElement(V2,{isPanorama:!0},r)):v.createElement(NQ,dm({ref:t},n),v.createElement(V2,{isPanorama:!1},r))});function EQ(){var e=tn(),[t,r]=v.useState(null),n=ft(NU);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;en(i)&&i!==n&&e(oU(i))}},[t,e,n]),r}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){PQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PQ(e,t,r){return(t=OQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OQ(e){var t=TQ(e,"string");return typeof t=="symbol"?t:t+""}function TQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gl.apply(null,arguments)}var IQ=()=>(kK(),null);function fm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var DQ=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:fm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:fm((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=b=>{var{width:j,height:S}=b[0].contentRect;u(j,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(Um,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",gl({ref:d},e)))}),RQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:fm(r),containerHeight:fm(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(Um,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",gl({ref:u},e)))}),$Q=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Um,{width:r,height:n}),v.createElement("div",gl({ref:t},e)))}),MQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ia(r)||Ia(n)?v.createElement(RQ,gl({},e,{ref:t})):v.createElement($Q,gl({},e,{ref:t}))});function FQ(e){return e===!0?DQ:MQ}var LQ=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:b,onTouchStart:j,style:S,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,O=v.useRef(null),T=tn(),[P,$]=v.useState(null),[G,M]=v.useState(null),V=EQ(),L=Bx(),U=(L==null?void 0:L.width)>0?L.width:_,le=(L==null?void 0:L.height)>0?L.height:s,ee=v.useCallback(F=>{V(F),typeof t=="function"&&t(F),$(F),M(F),F!=null&&(O.current=F)},[V,t,$,M]),se=v.useCallback(F=>{T(lT(F)),T(mi({handler:i,reactEvent:F}))},[T,i]),B=v.useCallback(F=>{T(Y0(F)),T(mi({handler:m,reactEvent:F}))},[T,m]),re=v.useCallback(F=>{T(a4()),T(mi({handler:f,reactEvent:F}))},[T,f]),ne=v.useCallback(F=>{T(Y0(F)),T(mi({handler:p,reactEvent:F}))},[T,p]),ae=v.useCallback(()=>{T(mT())},[T]),ce=v.useCallback(F=>{T(hT(F.key))},[T]),I=v.useCallback(F=>{T(mi({handler:l,reactEvent:F}))},[T,l]),H=v.useCallback(F=>{T(mi({handler:u,reactEvent:F}))},[T,u]),Fe=v.useCallback(F=>{T(mi({handler:d,reactEvent:F}))},[T,d]),ie=v.useCallback(F=>{T(mi({handler:y,reactEvent:F}))},[T,y]),me=v.useCallback(F=>{T(mi({handler:j,reactEvent:F}))},[T,j]),q=v.useCallback(F=>{C&&T(gT(F)),T(mi({handler:b,reactEvent:F}))},[T,C,b]),Z=v.useCallback(F=>{T(mi({handler:x,reactEvent:F}))},[T,x]),je=FQ(E);return v.createElement(E4.Provider,{value:P},v.createElement(gL.Provider,{value:G},v.createElement(je,{width:U??(S==null?void 0:S.width),height:le??(S==null?void 0:S.height),className:Ir("recharts-wrapper",n),style:AQ({position:"relative",cursor:"default",width:U,height:le},S),onClick:se,onContextMenu:I,onDoubleClick:H,onFocus:ae,onKeyDown:ce,onMouseDown:Fe,onMouseEnter:B,onMouseLeave:re,onMouseMove:ne,onMouseUp:ie,onTouchEnd:Z,onTouchMove:q,onTouchStart:me,ref:ee},v.createElement(IQ,null),r)))}),zQ=["width","height","responsive","children","className","style","compact","title","desc"];function UQ(e,t){if(e==null)return{};var r,n,s=BQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WQ=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=UQ(e,zQ),y=bo(p);return d?v.createElement(v.Fragment,null,v.createElement(Um,{width:r,height:n}),v.createElement(H2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(LQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(H2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(rX,null,i)))});function J0(){return J0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J0.apply(null,arguments)}var qQ={top:5,right:5,bottom:5,left:5},VQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},HQ=v.forwardRef(function(t,r){var n,s=bi(t.categoricalChartProps,VQ),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(xQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(HJ,{chartData:m.data}),v.createElement(wQ,{layout:s.layout,margin:s.margin}),v.createElement(bQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(WQ,J0({},s,{ref:r})))}),KQ=["axis","item"],GQ=v.forwardRef((e,t)=>v.createElement(HQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:KQ,tooltipPayloadSearcher:lK,categoricalChartProps:e,ref:t}));const ca="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",vT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function YQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const Zs={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return YQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function JQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),xT(e)}async function XQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return xT(new Uint8Array(n))}function xT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function QQ(e){const t=JQ(),r=await XQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:Zs.clientId,response_type:"code",redirect_uri:Zs.redirectUri,response_mode:"query",scope:Zs.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${Zs.tenantId}/oauth2/v2.0/authorize?${n}`}async function ZQ(e){const t=`https://login.microsoftonline.com/${Zs.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:Zs.clientId,scope:Zs.scopes.join(" "),code:e,redirect_uri:Zs.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function eZ(e){const t=`https://login.microsoftonline.com/${Zs.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:Zs.clientId,scope:Zs.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function wT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function G2(e){const t=new Set;for(const r of vT)try{(await wT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function X0(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function tZ(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return X0(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(b=>`'${b}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var j;const b=(j=x.fields)==null?void 0:j["System.AreaPath"];b&&y.add(b)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function rZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(b=>`'${b}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(b=>b.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{var E,C,O;const j=(E=b.fields)==null?void 0:E["System.WorkItemType"],S=(C=b.fields)==null?void 0:C["System.AreaPath"],_=(O=b.fields)==null?void 0:O["System.Tags"];j&&p.add(j),S&&y.add(S),_&&_.split(";").map(T=>T.trim()).forEach(T=>{T&&x.add(T)})}),{types:Array.from(p).sort((b,j)=>b.localeCompare(j)),areaPaths:Array.from(y).sort((b,j)=>b.localeCompare(j)),tags:Array.from(x).sort((b,j)=>b.localeCompare(j))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function nZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function sZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function iZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(b=>`[System.Tags] CONTAINS '${b}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(b=>b.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{b.fields&&(b.fields["System.WorkItemType"]&&p.add(b.fields["System.WorkItemType"]),b.fields["System.State"]&&y.add(b.fields["System.State"]),b.fields["System.AreaPath"]&&x.add(b.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function aZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const b=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${b})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const b=n.map(j=>`[System.AreaPath] UNDER '${j}'`);s.push(`(${b.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(b=>b.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(b=>{b.fields&&b.fields["System.Tags"]&&b.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function Y2(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await oZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function oZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function lZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function cZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await ZQ(t);return sessionStorage.removeItem("oauth_state"),s}async function uZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await QQ(e);window.location.href=r}async function J2(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let C=0;C<f.length;C+=y){const T=f.slice(C,C+y).join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${T}&fields=${p}&api-version=7.0`,$=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(!$.ok)throw new Error(`Failed to fetch work items: ${$.status} ${$.statusText}`);const G=await $.json();G.value&&Array.isArray(G.value)&&x.push(...G.value)}if(x.length===0)return[];const b=new Map,j=new Map,S=new Map,_=10;for(let C=0;C<x.length;C+=_){const O=x.slice(C,C+_);await Promise.all(O.map(async T=>{try{const P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${T.id}?$expand=relations&api-version=7.0`,$=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if($.ok){const G=await $.json();if(G.relations){for(const M of G.relations)if(M.rel==="System.LinkTypes.Hierarchy-Forward"){const V=M.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(V){const L=parseInt(V[1],10);b.set(T.id,L)}}}}}catch(P){console.error(`Error fetching relations for work item ${T.id}:`,P)}}))}const E=Array.from(new Set(b.values()));if(E.length>0){const C=E.slice(0,200).join(","),O=["System.Id","System.Title","System.WorkItemType"].join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${O}&api-version=7.0`;try{const P=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(P.ok){const $=await P.json();for(const G of $.value)S.set(G.id,G.fields["System.Title"]||""),G.fields["System.WorkItemType"]==="Epic"&&j.set(G.id,G.fields["System.Title"]||"")}}catch(P){console.error("Error fetching parent work items:",P)}}return x.map(C=>{let O=null;const T=b.get(C.id);if(T&&(O=j.get(T)||null,!O)){const P=S.get(T)}if(!O&&C.fields){const $=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(G=>G.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(G))];for(const G of $){const M=C.fields[G];if(M!=null){if(typeof M=="string"&&M.trim()!==""){const V=parseInt(M.trim());if(!isNaN(V)&&V>0){if(O=j.get(V)||null,O)break}else{O=M.trim();break}}else if(typeof M=="number"&&(O=j.get(M)||null,O))break}}}return{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:O||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function X2(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?r=d:console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function Q2(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Zi=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,i=parseInt(r[2],10);return new Date(n,s,i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},pi=e=>new Date(e)<new Date,bT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",Z2=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],dZ=e=>e?e.trim().toLowerCase():"",fZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},dh=(e,t,r)=>Math.min(Math.max(e,t),r),hZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Xw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},mZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},pZ=e=>mZ(Xw(e))>.6?"#111827":"#FFFFFF",eC=(e,t)=>{const{r,g:n,b:s}=Xw(e),i=1+t/100,l=dh(Math.round(r*i),0,255),u=dh(Math.round(n*i),0,255),d=dh(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},gZ=(e,t)=>{const{r,g:n,b:s}=Xw(e);return`rgba(${r}, ${n}, ${s}, ${dh(t,0,1)})`},Ln=(e,t)=>{const r=hZ(t);if(r){const l=pZ(r);return{background:r,text:l,border:eC(r,-20),badgeBackground:gZ(r,.15),badgeText:l,hoverBackground:eC(r,-5),hoverText:l}}const n=dZ(e),s=n?fZ(n)%Z2.length:0,i=Z2[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function jT({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:b,onNewProductColorChange:j,onCreateProduct:S,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:O="e.g., Catalyst Cloud",allowDelete:T=!1,onRequestDeleteProduct:P}){const[$,G]=v.useState(!1),M=v.useRef(null),V=v.useRef(null),[L,U]=v.useState(!1),[le,ee]=v.useState(!1),se=v.useMemo(()=>t.find(q=>q.id===r)??null,[t,r]),B=(se==null?void 0:se.name)??s??"",re=B?Ln(B,(se==null?void 0:se.color_hex)??null):null,ne=u||i||t.length===0;v.useEffect(()=>{if(!$)return;function q(je){M.current&&!M.current.contains(je.target)&&G(!1)}function Z(je){je.key==="Escape"&&G(!1)}return document.addEventListener("mousedown",q),document.addEventListener("keydown",Z),()=>{document.removeEventListener("mousedown",q),document.removeEventListener("keydown",Z)}},[$]);const ae=q=>{n(q),G(!1)},ce=!!(p&&x&&S),I=ce&&L,H=!!j,Fe=b??"#2D4660",ie=!!(e&&e.trim().length>0),me=ie||ce;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:M,children:[me&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[ie&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),ce&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:y,onChange:q=>{ee(!1),x==null||x(q.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:b&&y.trim().length>0?b:"#D1D5DB"}}),H&&y.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var q;return(q=V.current)==null?void 0:q.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${b?"":"border-gray-300 bg-white"}`,style:b?{backgroundColor:b,borderColor:b}:void 0,"aria-label":"Choose product color",children:!b&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:V,type:"color",value:Fe,onChange:q=>{ee(!1),j==null||j(q.target.value)},className:"sr-only"}),y.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>ee(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${le?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&b&&le&&a.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!ne&&G(q=>!q),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${ne?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!ne&&re?{borderColor:re.border}:void 0,"aria-expanded":$,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[re&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:re.background,borderColor:re.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${B?"":"text-gray-400"}`,style:re?{color:re.background}:void 0,children:B||(t.length===0?"No products available":d)})]}),a.jsx(ts,{className:`ml-2 h-4 w-4 transition-transform ${$?"rotate-180":""} ${ne?"text-gray-300":"text-gray-500"}`})]}),$&&!ne&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(q=>{const Z=Ln(q.name,q.color_hex??null),je=r===q.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":Z.background,"--product-light-bg":Z.badgeBackground,"--product-border-color":Z.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>ae(q.id),"aria-selected":je,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:q.name}),je&&a.jsx(Tr,{className:"h-4 w-4 text-gray-400"})]}),T&&P&&a.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),G(!1),P(q)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${q.name}`,title:"Delete product",children:a.jsx(zi,{className:"h-4 w-4"})})]},q.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),ce&&E&&I&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const tC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],rC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},yZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return tC[t%tC.length]};function Rn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=rC(t[r]);if(i)return i}const n=rC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return yZ(s)}const vZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],nC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function sC({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",b=l==="green"?"bg-green-50":"bg-blue-50",j=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(ts,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>a.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?b:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&a.jsx(Tr,{className:`h-4 w-4 ${j}`})]},S))})]})}function Zf({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},b=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},j=_=>{_.stopPropagation(),r([])},S=i&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&a.jsx("button",{type:"button",onClick:E=>b(_,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx(Ds,{className:"h-3 w-3"})})]},_))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:j,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ds,{className:"h-4 w-4"})}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:y,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(_=>a.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&a.jsx(Tr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function xZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s}){const[i,l]=v.useState(new Set);v.useEffect(()=>{e&&r&&r.length>0&&l(new Set(r.map(y=>y.id)))},[e,r]);const u=y=>{l(x=>{const b=new Set(x);return b.has(y)?b.delete(y):b.add(y),b})},d=()=>{r&&(i.size===r.length?l(new Set):l(new Set(r.map(y=>y.id))))},m=async()=>{if(!r)return;const y=r.filter(x=>i.has(x.id));await n(y),t()},f=async()=>{!r||!s||(await s(),t())},p=i.size;return a.jsx(es,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:a.jsx("div",{className:"space-y-4",children:r&&r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),d()},className:"flex items-center justify-center",children:r.length>0&&i.size===r.length?a.jsx(Tr,{className:"w-5 h-5 text-green-600"}):a.jsx(zS,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(y=>{const x=i.has(y.id);return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${x?"bg-blue-50":""}`,onClick:()=>u(y.id),children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),u(y.id)},className:"flex items-center justify-center",children:x?a.jsx(Tr,{className:"w-5 h-5 text-green-600"}):a.jsx(zS,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),y.description&&y.description.trim()&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[y.description.replace(/<[^>]*>/g,"").substring(0,100),y.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),y.tags&&y.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[y.tags.slice(0,3).map((b,j)=>a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:b},j)),y.tags.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",y.tags.length-3]})]})]}),y.azureDevOpsId&&a.jsx(op,{id:y.azureDevOpsId,url:y.azureDevOpsUrl||""})]})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:a.jsx("div",{className:"flex items-center",children:y.workItemType==="Epic"?a.jsx(vs,{className:"w-5 h-5 text-green-600"}):y.workItemType==="Feature"?a.jsx(NE,{className:"w-5 h-5 text-purple-600"}):y.workItemType?a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:y.workItemType}):null})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:y.state})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.workItemType!=="Epic"&&y.epic?a.jsx(Dd,{name:y.epic}):a.jsx("span",{className:"text-xs text-gray-400",children:""})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.areaPath?a.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:y.areaPath,children:y.areaPath}):a.jsx("span",{className:"text-xs text-gray-400",children:""})})]},y.id)})})]})})}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[p," of ",r.length," selected"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(dt,{variant:"primary",onClick:m,disabled:p===0,className:"flex items-center",children:[a.jsx($n,{className:"h-4 w-4 mr-2"}),"Add ",p," Feature",p!==1?"s":""]}),s&&a.jsxs(dt,{variant:"danger",onClick:f,className:"flex items-center",children:[a.jsx(ul,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(er,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function wZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:b,resetSignal:j}){const S=vT,[_,E]=v.useState(!1),[C,O]=v.useState(null),[T,P]=v.useState(!1),[$,G]=v.useState(!1),[M,V]=v.useState(!1),L=v.useRef(null),U=v.useRef(!1),le=v.useRef(!1),ee=v.useRef(!1),se=v.useRef(!1),B={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:re,handleSubmit:ne,watch:ae,control:ce,setValue:I,reset:H}=ed({defaultValues:B}),Fe=v.useCallback(()=>{H({...B}),E(!1),le.current=!1,ee.current=!1,se.current=!1},[H]);v.useEffect(()=>{Fe()},[j,Fe]);const ie=ae("workItemTypes"),me=ae("states"),q=ae("areaPaths"),Z=ae("tags"),je=ae("query"),F=v.useCallback((K,He,Ke,Pt,vt,qt)=>{const Rt=[];if(K&&K.length>0)if(K.length===1)Rt.push(`[System.WorkItemType] = '${K[0]}'`);else{const ar=K.map(D=>`'${D}'`).join(", ");Rt.push(`[System.WorkItemType] IN (${ar})`)}if(He&&He.length>0)if(He.length===1)Rt.push(`[System.State] = '${He[0]}'`);else{const ar=He.map(D=>`'${D}'`).join(", ");Rt.push(`[System.State] IN (${ar})`)}if(Ke&&Ke.length>0)if(Ke.length===1)Rt.push(`[System.AreaPath] UNDER '${Ke[0]}'`);else{const ar=Ke.map(D=>`[System.AreaPath] UNDER '${D}'`);Rt.push(`(${ar.join(" OR ")})`)}if(Pt&&Pt.length>0){const ar=Pt.map(D=>`[System.Tags] CONTAINS '${D}'`);Rt.push(`(${ar.join(" OR ")})`)}return qt&&vt&&Rt.push(`(${vt})`),Rt.length>0?Rt.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(le.current||ee.current||se.current)&&m){if(!ie||ie.length===0){m(void 0);return}m(ie[0])}},[ie,m]),v.useEffect(()=>{if(le.current||ee.current||!f)return;(async()=>{G(!0);try{await f(ie&&ie.length>0?ie[0]:void 0,me||[])}finally{G(!1)}})()},[ie,me,f]),v.useEffect(()=>{if(ee.current||!p||!ie||ie.length===0)return;const K=async()=>{V(!0);try{await p(ie[0],me||[],q||[])}finally{V(!1)}},He=setTimeout(()=>{K()},100);return()=>{clearTimeout(He),V(!1)}},[ie,me,q,p]),v.useEffect(()=>{if(!y||ee.current||se.current||!q||q.length===0)return;const K=ie&&ie.length>0,He=me&&me.length>0;K&&He||(le.current=!0,y(q).then(({types:Ke,states:Pt})=>{Ke.length>0&&!K&&I("workItemTypes",Ke,{shouldDirty:!1}),Pt.length>0&&!He&&I("states",Pt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{le.current=!1},300)}))},[q,ie,me,y,I]),v.useEffect(()=>{x&&(le.current||se.current||!Z||Z.length===0||(ee.current=!0,x(Z).then(({types:K,states:He,areaPaths:Ke})=>{K.length>0&&I("workItemTypes",K,{shouldDirty:!1}),He.length>0&&I("states",He,{shouldDirty:!1}),Ke.length>0&&I("areaPaths",Ke,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ee.current=!1},300)})))},[Z,x,I]),v.useEffect(()=>{!b||le.current||ee.current||!me||me.length===0||ie&&ie.length>0||(se.current=!0,b(me).then(({types:He})=>{He.length>0&&I("workItemTypes",He,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{se.current=!1},300)}))},[me,ie,b,I]),v.useEffect(()=>{if(me&&me.length>0&&s.length>0){const K=me.filter(He=>s.includes(He));K.length!==me.length&&I("states",K)}},[s,me,I]),v.useEffect(()=>{if(q&&q.length>0&&i.length>0){const K=q.filter(He=>i.includes(He));K.length!==q.length&&(I("areaPaths",K),K.length===0&&I("tags",[]))}},[i,q,I]),v.useEffect(()=>{if(Z&&Z.length>0&&l.length>0){const K=Z.filter(He=>l.includes(He));K.length!==Z.length&&I("tags",K)}},[l,Z,I]);const be=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!ie||ie.length===0){O(null);return}try{P(!0);const K=ie[0],He=F(ie||[],me||[],q||[],Z||[],je||"",_);let Ke="";He?Ke=`SELECT [System.Id] FROM WorkItems WHERE ${He}`:Ke=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${K}' AND [System.State] = 'Active'`;const Pt=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,vt=await fetch(Pt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Ke})});if(!vt.ok)throw new Error(`Azure DevOps query failed: ${vt.status} ${vt.statusText}`);const qt=await vt.json(),Rt=qt.workItems?qt.workItems.length:0;O(Rt)}catch(K){console.error("[FilterForm] Error fetching feature count:",K),O(null)}finally{P(!1)}},[e,ie,me,q,Z,je,_,F]);v.useEffect(()=>(L.current!==null&&window.clearTimeout(L.current),O(null),ie&&ie.length>0&&e.enabled&&e.accessToken&&(L.current=window.setTimeout(()=>{be()},300)),()=>{L.current!==null&&window.clearTimeout(L.current)}),[ie,me,q,Z,je,_,e.enabled,e.accessToken,be]),v.useEffect(()=>{if(d&&!U.current&&u){const K=u.length;O(K)}U.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!T&&O(u.length)},[u,T]),v.useEffect(()=>{const K=F(ie||[],me||[],q||[],Z||[],je||"",_),He={...e,workItemType:ie&&ie.length>0?ie[0]:e.workItemType||"Feature",query:K,states:me&&me.length>0?me:void 0,areaPath:q&&q.length>0?q[0]:void 0,tags:Z&&Z.length>0?Z:void 0},Ke=window.setTimeout(()=>{t(He)},100);return()=>{window.clearTimeout(Ke)}},[ie,me,q,Z,je,_,F,t]);const Ge=async K=>{await r()};return a.jsxs("form",{onSubmit:ne(Ge),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(sF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:Fe,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),a.jsx(hc,{name:"workItemTypes",control:ce,render:({field:K})=>a.jsx(Zf,{options:S,value:K.value,onChange:K.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(hc,{name:"states",control:ce,render:({field:K})=>a.jsx(Zf,{options:s,value:K.value,onChange:K.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(hc,{name:"areaPaths",control:ce,render:({field:K})=>a.jsx(Zf,{options:i,value:K.value,onChange:K.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:$?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(hc,{name:"tags",control:ce,render:({field:K})=>a.jsx(Zf,{options:l,value:K.value,onChange:K.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!M})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!ie||ie.length===0?"Select work item type to see tags":M?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...re("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(dt,{variant:"gold",type:"submit",disabled:(()=>{const K=((ie==null?void 0:ie.length)??0)>0,He=((me==null?void 0:me.length)??0)>0,Ke=((q==null?void 0:q.length)??0)>0,Pt=((Z==null?void 0:Z.length)??0)>0,vt=je&&je.trim().length>0;return n||T||!(K||He||Ke||Pt||vt)})(),className:"flex items-center",children:[n&&a.jsx(ul,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":C!==null&&!T?`Preview ${C} Feature${C!==1?"s":""}`:"Preview Features"]})})]})}function bZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState("#2D4660"),[E,C]=v.useState(null),[O,T]=v.useState(!1);v.useRef(null);const P=q=>{if(!q||typeof q!="string")return new Date;const je=q.split("T")[0].split(" ")[0].split("-");if(je.length!==3)return new Date;const F=parseInt(je[0],10),be=parseInt(je[1],10),Ge=parseInt(je[2],10);if(isNaN(F)||isNaN(be)||isNaN(Ge))return new Date;const K=new Date(F,be-1,Ge,0,0,0,0);return isNaN(K.getTime())?new Date:K},$=q=>{if(!q||isNaN(q.getTime()))return new Date().toISOString().split("T")[0];const Z=q.getFullYear(),je=String(q.getMonth()+1).padStart(2,"0"),F=String(q.getDate()).padStart(2,"0");return`${Z}-${je}-${F}`},G=(q,Z)=>{const je=q.getFullYear(),F=q.getMonth(),be=q.getDate();return new Date(je,F,be+Z,0,0,0,0)},M=v.useMemo(()=>{const q={};return u.forEach(Z=>{Z.id&&Z.name&&(q[Z.id]=Z.name)}),q},[u]),{register:V,handleSubmit:L,watch:U,reset:le,control:ee,setValue:se,formState:{errors:B}}=ed({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{const q=e.startDate.split("T")[0];le({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:q,endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),H.current=q},[e,le]);const re=e.productName??e.product_name??l??"",ne=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(ne){u.some(je=>je.id===ne)&&se("productId",ne,{shouldDirty:!1,shouldTouch:!1});return}if(!re)return;const q=u.find(Z=>Z.name.toLowerCase()===re.toLowerCase());q&&se("productId",q.id,{shouldDirty:!1,shouldTouch:!1})},[u,ne,re,se]);const ae=U("useAutoVotes"),ce=U("productId"),I=U("startDate"),H=v.useRef("");v.useEffect(()=>{if(I&&I!==H.current){H.current=I;const q=P(I),Z=G(q,14);se("endDate",$(Z),{shouldDirty:!0})}},[I,se]);const Fe=v.useMemo(()=>!E||!ce?u:u.map(q=>q.id===ce?{...q,color_hex:E}:q),[u,E,ce]);v.useEffect(()=>{if(!ce)return;u.some(Z=>Z.id===ce)||se("productId","",{shouldDirty:!0,shouldTouch:!0})},[ce,u,se]),v.useEffect(()=>{if(ce&&u.length>0){const q=u.find(Z=>Z.id===ce);if(q){const Z=q.color_hex??null;x(Z),_(Z||"#2D4660"),C(null),j(!1)}}else ce||(x(null),_("#2D4660"),C(null),j(!1))},[ce,u]);const ie=ae?Math.max(1,Math.floor(t/2)):U("votesPerUser"),me=async q=>{try{if(E&&ce){T(!0);try{await fx(ce,{color_hex:E}),p&&p(),C(null),x(E)}catch(Z){console.error("Error updating product color:",Z)}finally{T(!1)}}r(q)}catch(Z){throw console.error("ERROR in handleFormSubmit:",Z),Z}};return a.jsxs("form",{onSubmit:L(q=>me(q),q=>{}),children:[a.jsx(hc,{control:ee,name:"productId",render:({field:q})=>{const Z=Fe.find(Ke=>Ke.id===q.value)??null,je=q.value?M[q.value]??null:null,F=Z?null:je??(re||null),be=!!q.value,Ge=(Z==null?void 0:Z.color_hex)||null,K=Z?Ln(Z.name,Ge??null):null,He=(K==null?void 0:K.background)||null;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(jT,{products:Fe,value:q.value,onChange:Ke=>{q.onChange(Ke)},fallbackName:F,isLoading:d,error:m,disabled:d||Fe.length===0,helperText:!d&&Fe.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),be&&a.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{const Ke=He||"#2D4660";_(Ke),x(Ke),j(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:He||"#2D4660",borderColor:(K==null?void 0:K.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...V("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...V("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...V("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...V("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...V("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",ie," votes"]})]})]}),!ae&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...V("votesPerUser",{required:ae?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(dt,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(zi,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(dt,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),a.jsx(dt,{variant:"primary",type:"button",onClick:async q=>{q.preventDefault(),q.stopPropagation(),U(),await L(Z=>me(Z),Z=>{alert("Please fix form errors: "+JSON.stringify(Z))})()},children:"Save Changes"})]})]}),b&&ce&&(()=>{const q=Fe.find(Z=>Z.id===ce);return q?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{j(!1),x(q.color_hex??null),_(q.color_hex??"#2D4660"),C(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:Z=>Z.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:Z=>{_(Z.target.value),x(Z.target.value)},ref:Z=>{Z&&b&&setTimeout(()=>Z.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!ce||!S)return;const Z=Fe.find(F=>F.id===ce);if(!Z)return;if((Z.color_hex||null)===S){j(!1);return}C(S),x(S),j(!1)},disabled:O,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:O?a.jsx(ul,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Tr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function jZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:b,onUpdateAzureDevOpsConfig:j,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:O,availableStates:T,availableAreaPaths:P,availableTags:$,previewFeatures:G,showPreviewModal:M,setShowPreviewModal:V,onConfirmSync:L,onReplaceAll:U,onUpdateVotingSession:le,onFetchStatesForType:ee,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:B,onFetchTypesAndStatesForAreaPath:re,onFetchTypesAndStatesForTags:ne,onFetchTypesAndAreaPathsForStates:ae,suggestedFeatures:ce,otherSessions:I,onPromoteSuggestion:H,onMoveSuggestion:Fe,onEditSuggestion:ie,onDeleteSuggestion:me,adminPerspective:q="session",projectOptions:Z}){const je=Ms(),{currentUser:F,currentSession:be}=oa(),[Ge,K]=v.useState(()=>b.project?b.project:Z[0]??""),[He,Ke]=v.useState(0);v.useEffect(()=>{b.project?K(b.project):Z.length>0?K(Z[0]):K("")},[b.project,Z]);const[Pt,vt]=v.useState(!1),[qt,Rt]=v.useState(!1),[ar,D]=v.useState(!1),[Q,de]=v.useState(!1),Ne=v.useRef(null),[pe,ke]=v.useState(!1),Ve=v.useRef(null),[ht,St]=v.useState(null),[$t,yr]=v.useState(!1),[nr,Kr]=v.useState(null),[dr,Bt]=v.useState(null),[rn,sr]=v.useState(""),[Cn,nt]=v.useState(null),[Ft,fr]=v.useState(!1),[Lt,nn]=v.useState(null),[ir,qn]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[is,Dr]=v.useState(null),[Lr,as]=v.useState(!1),[hr,or]=v.useState(null),[En,Ht]=v.useState(!1),[hn,mr]=v.useState(null),[Rr,Nr]=v.useState([]),[An,Ss]=v.useState(!1),[br,Vn]=v.useState([]),[Gr,vr]=v.useState(!1),[rr,Tt]=v.useState(null),[Br,Wr]=v.useState(null),[Hn,sn]=v.useState(!1),[Ls,Si]=v.useState(!1),[Wt,Kn]=v.useState(null),[Y,Se]=v.useState(""),[Te,Re]=v.useState(!1),[Qe,Ee]=v.useState(!1),[wt,kt]=v.useState("#2D4660"),jt=v.useMemo(()=>{const z={};return br.forEach(xe=>{xe.id&&xe.name&&(z[xe.id]=xe.name)}),z},[br]),ze=v.useMemo(()=>{const z={};return br.forEach(xe=>{xe.id&&xe.color_hex&&(z[xe.id]=xe.color_hex)}),z},[br]),Jt=v.useMemo(()=>Rn({...x,product_id:x.product_id??(be==null?void 0:be.product_id)??x.productId??null,product_name:null},jt),[x,be,jt]),xr=v.useMemo(()=>{const z=x.product_id??x.productId??null;return z?ze[z]??null:null},[x,ze]),Cr=v.useMemo(()=>Ln(Jt,xr),[Jt,xr]),Ct=v.useRef(null);v.useEffect(()=>{const z=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId)??null;if(!z){Ct.current=null,Vn([]),Tt(null);return}if(Ct.current===z)return;let xe=!1;return(async()=>{vr(!0),Tt(null);try{const Ye=await ba(z);if(xe)return;Vn(Ye),Ct.current=z}catch(Ye){if(xe)return;console.error("Error loading products for admin dashboard:",Ye),Ca!=null&&Ca(Ye)?Tt("Products are not configured yet. Please create the `products` table in Supabase."):Tt("Unable to load products. Please try again."),Vn([]),Ct.current=null}finally{xe||vr(!1)}})(),()=>{xe=!0}},[F==null?void 0:F.tenant_id,F==null?void 0:F.tenantId]);const Gn=v.useCallback(async()=>{if(Br){sn(!0);try{await VC(Br.id),Vn(z=>z.filter(xe=>xe.id!==Br.id)),Wr(null)}catch(z){console.error("Error deleting product from admin dashboard:",z),Tt("Failed to delete product. Please try again.")}finally{sn(!1)}}},[Br]),si=v.useCallback(z=>{const xe=z==null?void 0:z.trim();if(xe){if(K(xe),xe!==(b.project||"")){const We={...b,project:xe};j(We)}Ke(We=>We+1)}},[b,j]),{register:ks,handleSubmit:ua,reset:ii}=ed({defaultValues:{reason:"",details:""}}),{control:ki,handleSubmit:mn,reset:fs,register:te,formState:{errors:fe}}=ed({defaultValues:{reason:"",details:""}}),ge=x.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):pi(x.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),$e=v.useMemo(()=>{const z=We=>{const Ye=We.type==="reopen",_t=We.createdAt||null,Kt=We.actorName||"Admin",pr=_t?` ${Zi(_t)}`:"";return{id:We.id,type:We.type,reason:We.reason,details:We.details??null,title:Ye?`Reopened${pr} by ${Kt}`:`Ended early${pr} by ${Kt}`,description:`${We.reason}${We.details?": "+We.details:""}`,iconBgClass:Ye?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Ye?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Ye?"text-[#1E5461]":"text-[#C89212]",textColorClass:Ye?"text-[#1E5461]":"text-[#6A4234]"}};if(Rr.length>0)return Rr.map(We=>z(We));const xe=[];return x.reopenReason&&xe.push({id:"fallback-reopen",sessionId:(be==null?void 0:be.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&xe.push({id:"fallback-ended-early",sessionId:(be==null?void 0:be.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),xe.map(We=>z(We))},[Rr,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,be==null?void 0:be.id]);v.useEffect(()=>{$e.length<=2&&Ss(!1)},[$e.length]);const qe=v.useCallback(async()=>{if(!(be!=null&&be.id)){Nr([]);return}try{const z=await xR(be.id);Nr(z)}catch(z){console.error("Error loading session status notes:",z)}},[be==null?void 0:be.id]);v.useEffect(()=>{qe()},[qe]);const ve=v.useCallback(async z=>{if(be!=null&&be.id)try{const xe=await wR({session_id:be.id,type:z.type,reason:z.reason,details:z.details??null,actor_id:z.actorId??null,actor_name:z.actorName||"Admin"});Nr(We=>{const Ye=We.findIndex(_t=>_t.id===xe.id);if(Ye!==-1){const _t=[...We];return _t[Ye]=xe,_t}return[xe,...We]})}catch(xe){console.error("Error logging session status note:",xe)}},[be==null?void 0:be.id]);v.useEffect(()=>{Lt&&(qn({title:Lt.title,summary:Lt.summary??"",whatWouldItDo:Lt.whatWouldItDo??"",howWouldItWork:Lt.howWouldItWork??""}),Dr(null))},[Lt]),v.useEffect(()=>{dr&&I.length>0?sr(I[0].id):sr(""),nt(null)},[dr,I]);const we=z=>{const xe=z.productId&&z.productId.trim()!==""?z.productId:null,We=xe&&br.find(_t=>_t.id===xe)||null,Ye={...x,title:z.title,goal:z.goal,votesPerUser:z.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(z.votesPerUser),useAutoVotes:z.useAutoVotes,startDate:new Date(z.startDate).toISOString(),endDate:new Date(z.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(We==null?void 0:We.id)??null,product_name:null};le(Ye),vt(!1)},ut=z=>{var Ye,_t;const xe=new Date().toISOString(),We={...x,originalEndDate:x.endDate,endDate:xe,isActive:!1,endedEarlyBy:(F==null?void 0:F.name)||"Admin",endedEarlyReason:z.reason,endedEarlyDetails:(Ye=z.details)!=null&&Ye.trim()?z.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};le(We),ve({type:"ended-early",reason:z.reason,details:(_t=z.details)!=null&&_t.trim()?z.details.trim():null,actorName:(F==null?void 0:F.name)||"Admin",actorId:(F==null?void 0:F.id)??null}),Rt(!1),ii()},Mt=z=>{var Ye,_t;const xe=new Date;xe.setDate(xe.getDate()+7);const We={...x,endDate:xe.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:z.reason,reopenDetails:(Ye=z.details)!=null&&Ye.trim()?z.details.trim():null,reopenedBy:(F==null?void 0:F.name)||"Admin",reopenedAt:new Date().toISOString()};le(We),ve({type:"reopen",reason:z.reason,details:(_t=z.details)!=null&&_t.trim()?z.details.trim():null,actorName:(F==null?void 0:F.name)||"Admin",actorId:(F==null?void 0:F.id)??null}),D(!1),fs()},mt=async(z,xe)=>{const We={...b,organization:z,project:xe};j(We),O()},It=z=>{nn(z)},bt=async()=>{if(!Lt)return;const z=ir.title.trim();if(!z){Dr("Title is required.");return}as(!0),Dr(null);try{await ie(Lt.id,{title:z,summary:ir.summary.trim()?ir.summary.trim():null,whatWouldItDo:ir.whatWouldItDo.trim()?ir.whatWouldItDo.trim():null,howWouldItWork:ir.howWouldItWork.trim()?ir.howWouldItWork.trim():null}),nn(null)}catch(xe){console.error("Error updating suggestion:",xe),Dr("Failed to update the suggestion. Please try again.")}finally{as(!1)}},Ue=async()=>{if(dr){if(!rn){nt("Please select a session.");return}fr(!0),nt(null);try{await Fe(dr.id,rn),Bt(null)}catch(z){console.error("Error moving suggestion:",z),nt("Failed to move the suggestion. Please try again.")}finally{fr(!1)}}},Vt=async()=>{if(ht){yr(!0),Kr(null);try{await H(ht.id),St(null)}catch(z){console.error("Error promoting suggestion:",z),Kr("Failed to move the suggestion into the current session.")}finally{yr(!1)}}},zt=async()=>{if(hr){Ht(!0),mr(null);try{await me(hr.id),or(null)}catch(z){console.error("Error deleting suggestion:",z),mr("Failed to delete the suggestion. Please try again.")}finally{Ht(!1)}}},ct=v.useCallback(()=>{vt(!1),i()},[i]);return v.useEffect(()=>{if(!Q)return;const z=xe=>{Ne.current&&!Ne.current.contains(xe.target)&&de(!1)};return document.addEventListener("mousedown",z),document.addEventListener("touchstart",z,{passive:!0}),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("touchstart",z)}},[Q]),v.useEffect(()=>{if(!pe)return;const z=xe=>{Ve.current&&!Ve.current.contains(xe.target)&&ke(!1)};return document.addEventListener("mousedown",z),document.addEventListener("touchstart",z,{passive:!0}),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("touchstart",z)}},[pe]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>je("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ap,{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"})]}),a.jsxs("div",{ref:Ne,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&a.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Vote!"]}),a.jsxs("button",{onClick:()=>je(q==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[q==="system"?a.jsx(Mn,{className:"mr-2 h-4 w-4"}):a.jsx(ns,{className:"mr-2 h-4 w-4"}),q==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>je("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(ns,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>de(!Q),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),Q&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[x.isActive&&a.jsxs("button",{onClick:()=>{de(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{de(!1),je(q==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[q==="system"?a.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),q==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{de(!1),je("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!pi(x.endDate))&&a.jsxs("button",{onClick:()=>{de(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(oh,{className:"h-4 w-4 mr-2 text-gray-700"}),pi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{de(!1),vt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsxs("button",{onClick:()=>{de(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Jt?"3.5rem":"0"},children:[Jt&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Cr.background,color:Cr.text,borderColor:Cr.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&Si(!0)},onMouseLeave:()=>Si(!1),onClick:async z=>{const xe=x.product_id||x.productId;if(!xe)return;z.stopPropagation();const We=br.find(Ye=>Ye.id===xe);We&&(Kn(We),Se(We.name||""),setEditingProductColor(We.color_hex||null),kt(We.color_hex||"#2D4660"))},children:[a.jsx(t0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Jt}),(x.product_id||x.productId)&&Ls&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(kE,{className:"h-4 w-4",style:{color:Cr.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:Ve,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!pi(x.endDate))&&a.jsxs(dt,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(oh,{className:"h-4 w-4 mr-2"}),pi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(dt,{variant:"primary",onClick:()=>vt(!0),className:"flex items-center",children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>ke(!pe),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),pe&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!pi(x.endDate))&&a.jsxs("button",{onClick:()=>{ke(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(oh,{className:"h-4 w-4 mr-2 text-gray-700"}),pi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{ke(!1),vt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),Gr&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),rr&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:rr}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Zi(x.startDate)," - ",Zi(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(er,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(km,{className:"h-4 w-4 mr-1 text-gray-600"}),ge]}),(x.isActive||pi(x.endDate))&&a.jsx(dt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Rt(!0):(fs(),D(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(NE,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),a.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),$e.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:An?a.jsx(Lu,{className:"h-2.5 w-2.5"}):a.jsx($n,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>Ss(z=>!z),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:An?"Show Less":"Show More"})]})]}),$e.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:$e.slice(0,An?$e.length:2).map(z=>{const xe=z.type==="reopen"?ul:er;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${z.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${z.iconBgClass} ${z.iconBorderClass} border rounded-lg`,children:a.jsx(xe,{className:`h-3.5 w-3.5 ${z.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:z.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:z.description})]})]},z.id)})}),$e.length>2&&!An&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:nC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),b.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[a.jsx(Tr,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",b.organization]}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(sC,{options:Z,value:Ge,onChange:si,variant:"green"})})]}),b.lastSyncTime&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Zi(b.lastSyncTime)]})]})]}),a.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),a.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[a.jsx(Ds,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),a.jsx(wZ,{config:b,onUpdateConfig:j,onPreview:S,isFetching:E,availableStates:T,availableAreaPaths:P,availableTags:$,previewFeatures:G,showPreviewModal:M,onFetchStatesForType:ee,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:B,onFetchTypesAndStatesForAreaPath:re,onFetchTypesAndStatesForTags:ne,onFetchTypesAndAreaPathsForStates:ae,resetSignal:He})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:nC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(dt,{variant:"primary",onClick:()=>mt("newmill",Ge||Z[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx(ul,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[ce.length," ",ce.length===1?"suggestion":"suggestions"]})]}),ce.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:ce.map(z=>{const xe=z.requester_name||z.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:z.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:xe}),z.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${z.requester_email}`,className:"text-[#1E5461] hover:underline",children:z.requester_email}),")"]})," on ",Zi(z.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(dt,{variant:"primary",onClick:()=>{Kr(null),St(z)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(BM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(dt,{variant:"secondary",onClick:()=>{I.length>0&&Bt(z)},disabled:I.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Qr,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(dt,{variant:"secondary",onClick:()=>It(z),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Hu,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(dt,{variant:"danger",onClick:()=>{mr(null),or(z)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(zi,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),I.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(er,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:z.summary&&z.summary.length>0?z.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(yx,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:z.whatWouldItDo&&z.whatWouldItDo.length>0?z.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(LF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:z.howWouldItWork&&z.howWouldItWork.length>0?z.howWouldItWork:"No implementation details provided."})]})]})]})},z.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(dt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx($n,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),a.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(z=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:a.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[z.title,z.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(op,{id:z.azureDevOpsId,url:z.azureDevOpsUrl||""})})]})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:a.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:z.description||a.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:z.epic&&a.jsx(Dd,{name:z.epic})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:z.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:z.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:a.jsx("div",{className:"text-gray-600",children:z.areaPath&&typeof z.areaPath=="string"&&z.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words",children:z.areaPath}):a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:z.tags&&z.tags.length>0?a.jsxs("div",{className:"flex flex-wrap gap-1",children:[z.tags.slice(0,3).map((xe,We)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:xe},We)),z.tags.length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",z.tags.length-3]})]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.votes}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(z),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(Hu,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(z.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(zi,{className:"h-5 w-5"})})]})]},z.id))})]})})]}),a.jsx(es,{isOpen:ht!==null,onClose:()=>{$t||(St(null),Kr(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:ht==null?void 0:ht.title})," into the current session so it can be managed and voted on."]}),nr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:nr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{$t||(St(null),Kr(null))},disabled:$t,children:"Cancel"}),a.jsx(dt,{variant:"primary",onClick:Vt,disabled:$t,children:$t?"Moving...":"Move to Current Session"})]})]})}),a.jsx(es,{isOpen:dr!==null,onClose:()=>{Ft||(Bt(null),nt(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:dr==null?void 0:dr.title}),"."]}),I.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:rn,onChange:z=>sr(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:Ft,children:I.map(z=>a.jsxs("option",{value:z.id,children:[z.title," (Starts ",Zi(z.startDate),")"]},z.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Cn&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Cn}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{Ft||(Bt(null),nt(null))},disabled:Ft,children:"Cancel"}),a.jsx(dt,{variant:"primary",onClick:Ue,disabled:Ft||I.length===0,children:Ft?"Moving...":"Move to Session"})]})]})}),a.jsx(es,{isOpen:Lt!==null,onClose:()=>{Lr||(nn(null),Dr(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:ir.title,onChange:z=>qn(xe=>({...xe,title:z.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:ir.summary,onChange:z=>qn(xe=>({...xe,summary:z.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:ir.whatWouldItDo,onChange:z=>qn(xe=>({...xe,whatWouldItDo:z.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:ir.howWouldItWork,onChange:z=>qn(xe=>({...xe,howWouldItWork:z.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),is&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:is}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{Lr||(nn(null),Dr(null))},disabled:Lr,children:"Cancel"}),a.jsx(dt,{variant:"primary",onClick:bt,disabled:Lr,children:Lr?"Saving...":"Save Changes"})]})]})}),a.jsx(es,{isOpen:hr!==null,onClose:()=>{En||(or(null),mr(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:hr==null?void 0:hr.title}),"? This action cannot be undone."]}),hn&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:hn}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{En||(or(null),mr(null))},disabled:En,children:"Cancel"}),a.jsx(dt,{variant:"danger",onClick:zt,disabled:En,children:En?"Deleting...":"Delete"})]})]})}),a.jsx(es,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(aC,{onSubmit:z=>{t(z),d(!1)},onCancel:()=>d(!1)})}),a.jsx(es,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(aC,{feature:m,onSubmit:z=>{r({...m,...z}),f(null)},onCancel:()=>f(null)})}),a.jsx(es,{isOpen:Pt,onClose:()=>vt(!1),title:"Edit Session Settings",children:a.jsx(bZ,{session:x,featureCount:e.length,onSubmit:we,onCancel:()=>vt(!1),onRequestDeleteSession:ct,isDeletingSession:l,productName:Jt,products:br,isLoadingProducts:Gr,productError:rr,onRequestDeleteProduct:z=>Wr(z),onProductColorUpdated:async()=>{const z=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId)??null;if(z)try{const xe=await ba(z);Vn(xe)}catch(xe){console.error("Error refreshing products after color update:",xe)}}})}),Br&&a.jsxs(es,{isOpen:!0,onClose:()=>Wr(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Br.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(dt,{variant:"secondary",onClick:()=>Wr(null),disabled:Hn,children:"Cancel"}),a.jsx(dt,{variant:"danger",onClick:Gn,disabled:Hn,children:Hn?"Deleting...":"Delete"})]})]}),a.jsx(xZ,{isOpen:M,onClose:()=>V(!1),previewFeatures:G,onConfirmSync:L,onReplaceAll:U}),a.jsx(es,{isOpen:ar,onClose:()=>{D(!1),fs()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:mn(Mt),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(hc,{control:ki,name:"reason",rules:{required:"Please select a reason"},render:({field:z})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(sC,{options:vZ,value:z.value,onChange:z.onChange,placeholder:"Select a reason..."}),fe.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:fe.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...te("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(dt,{variant:"secondary",type:"button",onClick:()=>{D(!1),fs()},children:"Cancel"}),a.jsx(dt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(es,{isOpen:qt,onClose:()=>{Rt(!1),ii()},title:"End Session Early",children:a.jsxs("form",{onSubmit:ua(ut),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...ks("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...ks("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(dt,{variant:"secondary",type:"button",onClick:()=>{Rt(!1),ii()},children:"Cancel"}),a.jsx(dt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Wt&&a.jsx(es,{isOpen:!0,onClose:()=>{Kn(null),Se(""),setEditingProductColor(null),Ee(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Y,onChange:z=>Se(z.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{kt(editingProductColor||"#2D4660"),Ee(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&a.jsx("img",{src:bT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{Kn(null),Se(""),setEditingProductColor(null),Ee(!1)},disabled:Te,children:"Cancel"}),a.jsx(dt,{variant:"primary",onClick:async()=>{if(!(!(Wt!=null&&Wt.id)||!Y.trim())){Re(!0);try{await fx(Wt.id,{name:Y.trim(),color_hex:editingProductColor});const z=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId);if(z){const xe=await ba(z);Vn(xe.sort((We,Ye)=>We.name.localeCompare(Ye.name)))}Kn(null),Se(""),setEditingProductColor(null),Ee(!1),onProductColorUpdated&&onProductColorUpdated()}catch(z){console.error("Error updating product:",z),alert("Failed to update product. Please try again.")}finally{Re(!1)}}},disabled:Te||!Y.trim(),children:Te?"Updating...":"Update Product"})]})]})}),Qe&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Ee(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:z=>z.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:wt,onChange:z=>kt(z.target.value),ref:z=>{z&&Qe&&setTimeout(()=>z.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(wt),Ee(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:wt,height:"260px",minWidth:"100px"},children:[a.jsx(Tr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const iC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],SZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},kZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},_Z=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],ST=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,kT=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},_T=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",NT=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",NZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},CZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Bu=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",eh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},EZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function ap({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const dt=lt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class es extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl",hideCloseButton:l=!1,hideHeader:u=!1}=this.props;return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:l?void 0:r,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[u?a.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ds,{className:"h-5 w-5"})})}):a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(yx,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!l&&a.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsx("div",{className:u?"-mt-4":"mt-2 overflow-visible",children:s})]})]})}):null}}const Dd=lt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Bu(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(AF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),a.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),op=lt.memo(function({id:t,url:r}){return t?a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[a.jsx(tF,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),AZ=lt.memo(function({endDate:t}){const r=kT(t),n=_T(r),s=NT(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Zi(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function PZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(EZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(SF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const fh=lt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(zi,{className:"h-5 w-5"}):a.jsx(er,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),OZ=lt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),b=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},j=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${j()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx(op,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(Tr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:b,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(er,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&a.jsx(Dd,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(ts,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(YM,{className:"h-6 w-6"})})]})})]})})]})})});function TZ({feature:e,onClose:t}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function IZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=Ms(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const _=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",_),document.addEventListener("touchstart",_,{passive:!0}),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[f]);const x=v.useMemo(()=>[...e].sort((_,E)=>E.votes-_.votes),[e]),b=v.useMemo(()=>x.slice(0,10).map(_=>({name:_.title,votes:_.votes,id:_.id})),[x]),j=kT(l.endDate),S=_T(j);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ap,{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>m("/sessions")}),a.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:pi(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),a.jsxs("div",{ref:y,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(dt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(dt,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs(dt,{variant:"gray",onClick:d,className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(zi,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):pi(l.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&a.jsx("div",{className:`${NT(j)} relative z-10 rounded-md p-3 mb-4 inline-block border ${j<=2?"border-[#6A4234]/20":j<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:`h-4 w-4 mr-2 ${S}`}),a.jsx("span",{className:`${S} font-medium`,children:j<=0?"Voting ends today!":`${j} ${j===1?"day":"days"} remaining until ${Zi(l.endDate)}`})]})}),a.jsx("div",{className:"h-72",children:a.jsx(rB,{width:"100%",height:"100%",children:a.jsxs(GQ,{data:b,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx(aT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(oT,{}),a.jsx(TK,{}),a.jsx(tT,{dataKey:"votes",fill:"#3B82F6",children:b.map((_,E)=>a.jsx(Ww,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((_,E)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),a.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[_.title,_.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(op,{id:_.azureDevOpsId,url:_.azureDevOpsUrl||""})})]}),a.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:_.epic&&a.jsx(Dd,{name:_.epic})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:_.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(_.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:_.voters.length===0,children:[a.jsx(ns,{className:"h-4 w-4 mr-1"}),_.voters.length," ",_.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(_.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:_.votes===0,children:"Reset Votes"})})]},_.id))})]})})]}),s&&a.jsx(TZ,{feature:e.find(_=>_.id===s),onClose:()=>i(null)})]})}function DZ({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Tr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(dt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function CT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(ns,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Mn,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,b=!y;return a.jsxs("button",{onClick:y,disabled:b,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${b&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,a.jsx("span",{children:f})]},m)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function aC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=ed({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:iC[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:iC.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(dt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(dt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function RZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,_)=>S+_,0),b=u.filter(S=>l[S.id]>0),j=ST(d,m,f);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(ap,{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&a.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),j&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${j.className}`,children:j.label})]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(dt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(dt,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Tr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[b.map(S=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(Dd,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx(_E,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(dt,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx(ul,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(fh,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const $Z=lt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:b,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:_}){const[E,C]=v.useState([...t]),[O,T]=v.useState(!1),[P,$]=v.useState("idle"),[G,M]=v.useState(!1),[V,L]=v.useState({}),[U,le]=v.useState(!0),[ee,se]=v.useState(!1),[B,re]=v.useState(!1),[ne,ae]=v.useState(""),[ce,I]=v.useState(""),[H,Fe]=v.useState(""),[ie,me]=v.useState(""),[q,Z]=v.useState(!1),[je,F]=v.useState(null),[be,Ge]=v.useState(!1),K=v.useRef(null),He=ST(j,S,_);v.useEffect(()=>{if(!ee)return;const Ne=pe=>{K.current&&!K.current.contains(pe.target)&&se(!1)};return document.addEventListener("mousedown",Ne),document.addEventListener("touchstart",Ne,{passive:!0}),()=>{document.removeEventListener("mousedown",Ne),document.removeEventListener("touchstart",Ne)}},[ee]),v.useEffect(()=>{C([...t])},[t]),v.useEffect(()=>{async function Ne(){if(!r||!y){le(!1);return}try{const ke=(await uo(y)).filter(Ve=>Ve.user_id===r.id);if(ke.length>0){const Ve={};ke.forEach(ht=>{Ve[ht.feature_id]=ht.vote_count}),L(Ve),M(!0)}else M(!1),L({})}catch(pe){console.error("Error checking existing votes:",pe),M(!1)}finally{le(!1)}}Ne()},[r,y]);const Ke=v.useCallback(async()=>{if(!(!r||!y))try{await jR(y,r.id),M(!1),L({})}catch(Ne){console.error("Error changing votes:",Ne),alert("Failed to reset votes. Please try again.")}},[r,y]),Pt=v.useCallback(()=>{O||(T(!0),$("fadeOut"),setTimeout(()=>{$("rearranging"),setTimeout(()=>{C(CZ(t)),$("fadeIn"),setTimeout(()=>{$("idle"),T(!1)},400)},200)},400))},[t,O]),vt=v.useCallback(async Ne=>{const pe=t.find(ke=>ke.id===Ne);if(!(!pe||!r))try{await CR({session_id:y,feature_id:Ne,feature_title:pe.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(ke){throw console.error("Error submitting info request:",ke),alert("Failed to submit request. Please try again."),ke}},[t,r,y]),qt=v.useCallback(()=>{F(null),Ge(!1),re(!0)},[]),Rt=v.useCallback(()=>{q||(re(!1),F(null),Ge(!1),ae(""),I(""),Fe(""),me(""))},[q]),ar=v.useCallback(async Ne=>{Ne.preventDefault();const pe=ne.trim(),ke=ce.trim(),Ve=H.trim(),ht=ie.trim();if(!pe){F("Please provide a brief title for your suggestion.");return}if(!y){F("Unable to link this suggestion to the current session.");return}try{Z(!0),F(null);const St=await ER({session_id:y,title:pe,description:ke||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:Ve||null,howWouldItWork:ht||null});b==null||b(St),Ge(!0),ae(""),I(""),Fe(""),me("")}catch(St){console.error("Error submitting feature suggestion:",St),F("We were unable to submit your suggestion. Please try again in a moment.")}finally{Z(!1)}},[ce,ne,H,ie,r,y,q,b]);if(!r)return null;if(U)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(G)return a.jsx(RZ,{currentUser:r,votingSession:m,onChangeVotes:Ke,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:V,features:t,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:_});const D=p-s,Q=D===0,de=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(ap,{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&a.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),He&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${He.className}`,children:He.label})]})]})]}),a.jsxs("div",{ref:K,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(dt,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(jn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(dt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs(dt,{variant:"gray",onClick:x,className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>se(!ee),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),ee&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{se(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{se(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{se(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.goal})]}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsx(AZ,{endDate:m.endDate}),a.jsxs("div",{className:"flex items-center mt-3",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),a.jsxs("p",{className:"text-gray-700",children:["You have ",a.jsxs("span",{className:"font-bold text-[#2d4660]",children:[D," / ",p]})," votes remaining"]})]})]})]})}),!de&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(km,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",pi(m.endDate)?"closed":"not yet open",".",pi(m.endDate)?` Voting ended on ${Zi(m.endDate)}.`:` Voting will open on ${Zi(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(dt,{variant:"gold",onClick:qt,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(yx,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(PZ,{isShuffling:O,onShuffle:Pt})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(Ne=>{const pe=n[Ne.id]||0;return a.jsx(OZ,{feature:Ne,userVoteCount:pe,remainingVotes:D,votingIsActive:de,onVote:i,isShuffling:O,shuffleStage:P,currentUser:r,onRequestInfo:vt},Ne.id)})}),s>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[a.jsxs("div",{children:[!Q&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(_E,{className:"h-5 w-5 text-[#C89212] mr-2"}),a.jsxs("span",{className:"text-gray-700",children:["You still have ",a.jsx("span",{className:"font-semibold text-[#C89212]",children:D})," votes remaining."]})]}),Q&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Tr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),a.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${Q?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!Q,children:"Submit Votes"})]})}),a.jsx(es,{isOpen:B,onClose:Rt,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:ar,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),je&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:je}),be&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:ne,onChange:Ne=>ae(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:q||be})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:ce,onChange:Ne=>I(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:q||be})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:H,onChange:Ne=>Fe(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:q||be})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:ie,onChange:Ne=>me(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:q||be})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(dt,{type:"button",variant:"secondary",onClick:Rt,disabled:q,children:"Close"}),!be&&a.jsxs(dt,{type:"submit",variant:"primary",disabled:q,className:"flex items-center",children:[q&&a.jsx(ul,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function Tv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=oa(),p=Ms(),y=async()=>{try{await Ce.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const Y=new URLSearchParams(window.location.search),Se=Y.has("code")||Y.has("error"),Te=localStorage.getItem("voting_system_current_session");!n&&!Se&&!Te&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const Y=new URLSearchParams(window.location.search);return Y.has("code")||Y.has("error")},[]),[b,j]=v.useState([]),[S,_]=v.useState(!0),[E,C]=v.useState(_Z),[O,T]=v.useState(r?"results":t||x?"admin":"voting"),[P,$]=v.useState(t||x||r),[G,M]=v.useState(null),[V,L]=v.useState(!1),[U,le]=v.useState(null),[ee,se]=v.useState({...SZ,votesPerUser:e}),[B,re]=v.useState(kZ),[ne,ae]=v.useState(Q2()),[ce,I]=v.useState([]),[H,Fe]=v.useState([]),[ie,me]=v.useState([]),[q,Z]=v.useState(!1),[je,F]=v.useState(null),[be,Ge]=v.useState(null),[K,He]=v.useState(!1),[Ke,Pt]=v.useState([]),[vt,qt]=v.useState([]),[Rt,ar]=v.useState(d?"system":"session"),[D,Q]=v.useState({}),[de,Ne]=v.useState(0),[pe,ke]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Ve,ht]=v.useState(!1),St=v.useRef(!1),$t=v.useRef(!1),yr=v.useRef(null),nr=v.useMemo(()=>ee.useAutoVotes?Math.max(1,Math.floor(b.length/2)):ee.votesPerUser,[ee.useAutoVotes,ee.votesPerUser,b.length]),Kr=v.useRef(!1);v.useEffect(()=>{if(Kr.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const Se=new URLSearchParams(window.location.search),Te=Se.has("code")||Se.has("error");if(Te&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Te||St.current)){if(!n){console.log("No session available yet, waiting...");return}Kr.current=!0,St.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Qe=await cZ();if(Qe){const Ee=new Date(Date.now()+Qe.expiresIn*1e3).toISOString(),wt={...B,accessToken:Qe.accessToken,refreshToken:Qe.refreshToken,tokenExpiresAt:Ee,enabled:!0,clientId:Zs.clientId,tenantId:Zs.tenantId};await Vo(n.id,wt),re(wt);const kt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",kt),p(kt,{replace:!0})}}catch(Qe){console.error("OAuth callback error:",Qe),F("Failed to authenticate with Azure DevOps");const Ee="/admin";sessionStorage.removeItem("oauth_return_path"),p(Ee,{replace:!0})}finally{Kr.current=!1}}})()},[n,p,B]);const dr=v.useCallback(Y=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),Y&&sessionStorage.setItem("oauth_action",Y),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),uZ()},[]),Bt=v.useCallback(async Y=>{if(!Y.accessToken||!Y.refreshToken||!Y.tokenExpiresAt)throw new Error("Not authenticated");if(lZ(Y.tokenExpiresAt)){const Se=await eZ(Y.refreshToken),Te=new Date(Date.now()+Se.expiresIn*1e3).toISOString(),Re={...Y,accessToken:Se.accessToken,tokenExpiresAt:Te};return n&&(await Vo(n.id,Re),re(Re)),Se.accessToken}return Y.accessToken},[n]),rn=v.useCallback(async()=>{if(!n)return[];const[Y,Se]=await Promise.all([Ji(n.id),uo(n.id)]);return Y.map(Te=>{const Qe=Se.filter(wt=>wt.feature_id===Te.id).map(wt=>({userId:wt.user_id,name:wt.user_name,email:wt.user_email,voteCount:wt.vote_count})),Ee=Qe.reduce((wt,kt)=>wt+kt.voteCount,0);return{id:Te.id,title:Te.title,description:Te.description,epic:Te.epic,state:Te.state,areaPath:Te.area_path,tags:Te.tags||[],azureDevOpsId:Te.azure_devops_id,azureDevOpsUrl:Te.azure_devops_url,votes:Ee,voters:Qe}})},[n]),sr=v.useCallback(async()=>{if(n)try{const Y=await eS(n.id);Pt(Y)}catch(Y){console.error("Error loading feature suggestions:",Y)}},[n]),Cn=v.useCallback(async()=>{if(n)try{const Y=await wo(),Se=new Date,Te=Y.filter(Re=>Re.id!==n.id&&new Date(Re.start_date)>Se).map(Re=>({id:Re.id,title:Re.title,startDate:Re.start_date}));qt(Te)}catch(Y){console.error("Error loading future sessions:",Y)}},[n]),nt=v.useCallback(Y=>{Pt(Se=>[Y,...Se]),sr(),Cn()},[sr,Cn]),Ft=v.useCallback(async(Y,Se)=>{await AR(Y,Se),await sr()},[sr]),fr=v.useCallback(async Y=>{await PR(Y),await sr()},[sr]),Lt=v.useCallback(async(Y,Se)=>{await OR(Y,Se),await sr()},[sr]),nn=v.useCallback(async Y=>{await TR(Y);const Se=await rn();j(Se),await sr()},[rn,sr]);v.useEffect(()=>{async function Y(){if(n&&!($t.current&&yr.current===n.id)){yr.current=n.id,$t.current=!0;try{_(!0);const[Se,Te]=await Promise.all([Ji(n.id),uo(n.id)]),Re=Se.map(Ee=>{const kt=Te.filter(ze=>ze.feature_id===Ee.id).map(ze=>({userId:ze.user_id,name:ze.user_name,email:ze.user_email,voteCount:ze.vote_count})),jt=kt.reduce((ze,Jt)=>ze+Jt.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,state:Ee.state,areaPath:Ee.area_path,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id,azureDevOpsUrl:Ee.azure_devops_url,votes:jt,voters:kt}});j(Re),se({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Qe=await kR(n.id);re(Qe?{organization:Qe.organization||"newmill",project:Qe.project||"Product",accessToken:Qe.access_token,refreshToken:Qe.refresh_token,tokenExpiresAt:Qe.token_expires_at,tenantId:Qe.tenant_id,clientId:Qe.client_id,enabled:Qe.enabled,workItemType:Qe.work_item_type||"Feature",query:Qe.query,lastSyncTime:Qe.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Ee=await eS(n.id);Pt(Ee)}catch(Ee){console.error("Error loading feature suggestions:",Ee)}}catch(Se){console.error("Error loading data:",Se),j([])}finally{_(!1),$t.current=!1}}}Y()},[n==null?void 0:n.id]),v.useEffect(()=>{async function Y(){const Se=Q2();if(ae(Se),I([]),Fe([]),me([]),B.enabled&&B.accessToken&&B.project)try{const Te=await Bt(B),Re={...B,accessToken:Te},[Qe,Ee,wt,kt]=await Promise.all([nZ(Re).catch(jt=>(console.error("Error loading Azure DevOps projects:",jt),Se)),G2(Re),X0(Re),Y2(Re)]);ae(Qe.length>0?Qe:Se),I(Ee),Fe(wt),me(kt)}catch(Te){console.error("Error loading filter options:",Te),ae(Se)}}Y()},[B.enabled,B.accessToken,B.project,Bt]);const ir=v.useCallback(async(Y,Se)=>{if(!(!B.enabled||!B.accessToken))try{const Te=await Bt(B),Re={...B,accessToken:Te},Qe=Y?await wT(Re,Y):await G2(Re);I(Qe)}catch(Te){console.error("Error loading states for work item type:",Te)}},[B,Bt]),qn=v.useCallback(async Y=>{if(!B.enabled||!B.accessToken)return{types:[],states:[]};try{const Se=await Bt(B),Te={...B,accessToken:Se};return await sZ(Te,Y)}catch(Se){return console.error("Error fetching types and states for area path:",Se),{types:[],states:[]}}},[B,Bt]),is=v.useCallback(async Y=>{if(!B.enabled||!B.accessToken)return{types:[],areaPaths:[]};try{const Se=await Bt(B),Te={...B,accessToken:Se},Re=await rZ(Te,Y);return Re.areaPaths.length>0&&Fe(Re.areaPaths),Re}catch(Se){return console.error("Error fetching types and area paths for states:",Se),{types:[],areaPaths:[]}}},[B,Bt]),Dr=v.useCallback(async Y=>{if(!B.enabled||!B.accessToken)return{types:[],states:[],areaPaths:[]};try{const Se=await Bt(B),Te={...B,accessToken:Se},Re=await iZ(Te,Y);return Re.states.length>0&&I(Re.states),Re.areaPaths.length>0&&Fe(Re.areaPaths),Re}catch(Se){return console.error("Error fetching types, states, and area paths for tags:",Se),{types:[],states:[],areaPaths:[]}}},[B,Bt]),Lr=v.useCallback(async(Y,Se=[],Te=[])=>{if(!(!B.enabled||!B.accessToken))try{const Re=await Bt(B),Qe={...B,accessToken:Re},Ee=Y?await aZ(Qe,Y,Se,Te):await Y2(Qe);me(Ee)}catch(Re){console.error("Error loading tags for type, state, and area path:",Re)}},[B,Bt]),as=v.useCallback(async(Y,Se=[])=>{if(!(!B.enabled||!B.accessToken))try{const Te=await Bt(B),Re={...B,accessToken:Te},Qe=Y?await tZ(Re,Y,Se):await X0(Re);Fe(Qe)}catch(Te){console.error("Error loading area paths for type and state:",Te)}},[B,Bt]);v.useEffect(()=>{const Y=async()=>{const Te=NZ(ee.startDate,ee.endDate);if(ee.isActive!==Te){const Re={...ee,isActive:Te};se(Re);try{n!=null&&n.id&&await Zj(n.id,{title:Re.title,goal:Re.goal,votes_per_user:Re.votesPerUser,start_date:Re.startDate,end_date:Re.endDate,is_active:Re.isActive})}catch(Qe){console.error("Error updating voting session status:",Qe)}}};Y();const Se=setInterval(Y,6e5);return()=>clearInterval(Se)},[ee,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",O==="admin"&&(sr(),Cn())},[O,sr,Cn]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const hr=v.useCallback(async(Y=B)=>{if(!Y.organization||!Y.project||!n){F("Organization and project name are required");return}try{Z(!0),F(null);const Se=await Bt(Y),Te={...Y,accessToken:Se},Re=await J2(Te),Qe=X2(Re);for(const ze of Qe){const xr=(await Ji(n.id)).find(Gn=>Gn.azure_devops_id===ze.azureDevOpsId),Cr=eh(ze.description),Ct=Bu(Cr,300);xr?await Kg(xr.id,{title:ze.title,description:Ct,epic:ze.epic||null,state:ze.state,areaPath:ze.areaPath,tags:ze.tags,azure_devops_id:ze.azureDevOpsId,azure_devops_url:ze.azureDevOpsUrl}):await $f({session_id:n.id,title:ze.title,description:Ct,epic:ze.epic||null,state:ze.state,areaPath:ze.areaPath,tags:ze.tags,azure_devops_id:ze.azureDevOpsId,azure_devops_url:ze.azureDevOpsUrl})}const Ee=await Ji(n.id),wt=await uo(n.id),kt=Ee.map(ze=>{const xr=wt.filter(Ct=>Ct.feature_id===ze.id).map(Ct=>({userId:Ct.user_id,name:Ct.user_name,email:Ct.user_email,voteCount:Ct.vote_count})),Cr=xr.reduce((Ct,Gn)=>Ct+Gn.voteCount,0);return{id:ze.id,title:ze.title,description:ze.description,epic:ze.epic,state:ze.state,areaPath:ze.area_path,tags:ze.tags||[],azureDevOpsId:ze.azure_devops_id,azureDevOpsUrl:ze.azure_devops_url,votes:Cr,voters:xr}});j(kt);const jt={...Te,lastSyncTime:new Date().toISOString()};await Vo(n.id,jt),re(jt)}catch(Se){console.error("Azure DevOps sync error:",Se),Se instanceof Error&&Se.message==="Not authenticated"?(F("Please authenticate with Azure DevOps"),dr()):F("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Z(!1)}},[B,n,Bt,dr]),or=v.useCallback(async()=>{if(!B.organization||!B.project){F("Organization and project name are required");return}try{Z(!0),F(null);const Y=await Bt(B),Se={...B,accessToken:Y},Te=await J2(Se),Qe=X2(Te).map(Ee=>({...Ee,description:Bu(eh(Ee.description),300)}));Ge(Qe),He(!0)}catch(Y){console.error("Azure DevOps preview error:",Y),Y instanceof Error&&Y.message==="Not authenticated"?(F("Please authenticate with Azure DevOps"),dr()):F("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Z(!1)}},[B,Bt,dr]),En=v.useCallback(async()=>{if(!(!be||!n))try{Z(!0);const Y=await Ji(n.id);for(const Ee of Y)await Qj(Ee.id);for(const Ee of be){const wt=eh(Ee.description),kt=Bu(wt,300);await $f({session_id:n.id,title:Ee.title,description:kt,epic:Ee.epic||null,state:Ee.state,areaPath:Ee.areaPath,tags:Ee.tags,azure_devops_id:Ee.azureDevOpsId,azure_devops_url:Ee.azureDevOpsUrl})}const Se=await Ji(n.id),Te=await uo(n.id),Re=Se.map(Ee=>{const kt=Te.filter(ze=>ze.feature_id===Ee.id).map(ze=>({userId:ze.user_id,name:ze.user_name,email:ze.user_email,voteCount:ze.vote_count})),jt=kt.reduce((ze,Jt)=>ze+Jt.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,state:Ee.state,areaPath:Ee.area_path,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id,azureDevOpsUrl:Ee.azure_devops_url,votes:jt,voters:kt}});j(Re);const Qe={...B,lastSyncTime:new Date().toISOString()};await Vo(n.id,Qe),re(Qe)}catch(Y){console.error("Azure DevOps replace all error:",Y),F("Failed to replace all features from Azure DevOps.")}finally{Z(!1),Ge(null)}},[be,n,B]),Ht=v.useCallback(async Y=>{if(!(!Y||Y.length===0||!n))try{Z(!0);for(const Ee of Y){const kt=(await Ji(n.id)).find(Jt=>Jt.azure_devops_id===Ee.azureDevOpsId),jt=eh(Ee.description),ze=Bu(jt,300);kt?await Kg(kt.id,{title:Ee.title,description:ze,epic:Ee.epic||null,state:Ee.state,areaPath:Ee.areaPath,tags:Ee.tags,azure_devops_id:Ee.azureDevOpsId,azure_devops_url:Ee.azureDevOpsUrl}):await $f({session_id:n.id,title:Ee.title,description:ze,epic:Ee.epic||null,state:Ee.state,areaPath:Ee.areaPath,tags:Ee.tags,azure_devops_id:Ee.azureDevOpsId,azure_devops_url:Ee.azureDevOpsUrl})}const Se=await Ji(n.id),Te=await uo(n.id),Re=Se.map(Ee=>{const kt=Te.filter(ze=>ze.feature_id===Ee.id).map(ze=>({userId:ze.user_id,name:ze.user_name,email:ze.user_email,voteCount:ze.vote_count})),jt=kt.reduce((ze,Jt)=>ze+Jt.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,state:Ee.state,areaPath:Ee.area_path,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id,azureDevOpsUrl:Ee.azure_devops_url,votes:jt,voters:kt}});j(Re);const Qe={...B,lastSyncTime:new Date().toISOString()};await Vo(n.id,Qe),re(Qe)}catch(Se){console.error("Azure DevOps sync error:",Se),F("Failed to sync features from Azure DevOps.")}finally{Z(!1),Ge(null)}},[be,n,B]),hn=v.useCallback(async()=>{if(n)try{const Y={organization:B.organization||"newmill",project:B.project||"Product",workItemType:B.workItemType||"Feature",query:B.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await Vo(n.id,Y),re(Y),F(null)}catch(Y){console.error("Error disconnecting Azure DevOps:",Y),F("Failed to disconnect from Azure DevOps")}},[B,n]);v.useEffect(()=>{(async()=>{const Se=sessionStorage.getItem("oauth_action");if(Se&&!(!B.enabled||!B.accessToken))try{Se==="preview"?await or():Se==="sync"&&await hr()}finally{sessionStorage.removeItem("oauth_action")}})()},[B.enabled,B.accessToken,or,hr]);const mr=v.useCallback(()=>{$(!0),ar(d?"system":"session"),T("admin")},[d]),Rr=v.useCallback(()=>{$(!1),ar(d?"system":"session"),T("voting")},[d]),Nr=v.useCallback(()=>{$(!0),ar("session"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting")},[t,O]),An=v.useCallback(()=>{d&&($(!0),ar("system"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting"))},[O,d,t]),Ss=v.useCallback(async Y=>{if(n)try{const Se=await $f({session_id:n.id,title:Y.title,description:Y.description,epic:Y.epic});j(Te=>[...Te,{id:Se.id,title:Se.title,description:Se.description,epic:Se.epic,votes:0,voters:[]}]),L(!1)}catch(Se){console.error("Error adding feature:",Se),alert("Failed to add feature")}},[n]),br=v.useCallback(async Y=>{try{await Kg(Y.id,{title:Y.title,description:Y.description,epic:Y.epic}),j(Se=>Se.map(Te=>Te.id===Y.id?Y:Te)),M(null)}catch(Se){console.error("Error updating feature:",Se),alert("Failed to update feature")}},[]),Vn=v.useCallback(async Y=>{try{await Qj(Y),j(Se=>Se.filter(Te=>Te.id!==Y))}catch(Se){console.error("Error deleting feature:",Se),alert("Failed to delete feature")}},[]),Gr=v.useCallback(Y=>{ke(Se=>({...Se,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:Y}))},[]),vr=v.useCallback(async()=>{const Y=pe.targetId;if(!(!Y||!n))try{await mR(n.id,Y);const Se=await rn();j(Se)}catch(Se){console.error("Error resetting votes:",Se),alert("Failed to reset votes")}},[pe.targetId,n,rn]),rr=v.useCallback(()=>{ke(Y=>({...Y,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Tt=v.useCallback(()=>{ke(Y=>({...Y,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),Br=v.useCallback(async()=>{if(n){ht(!0);try{await hR(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(Y){console.error("Error deleting session:",Y),alert("Failed to delete session. Please try again.")}finally{ht(!1),ke(Y=>({...Y,showDeleteSession:!1}))}}},[n,p,l,u]),Wr=v.useCallback(async()=>{if(n)try{await SR(n.id);const Y=await rn();j(Y)}catch(Y){console.error("Error resetting all votes:",Y),alert("Failed to reset all votes")}},[n,rn]),Hn=v.useCallback((Y,Se)=>{if(!s||!ee.isActive)return;const Te=D[Y]||0;let Re=Te;if(Se)if(de<nr)Re=Te+1;else return;else if(Te>0)Re=Te-1;else return;Q(Qe=>{const Ee={...Qe};return Re===0?delete Ee[Y]:Ee[Y]=Re,Ee}),Ne(Qe=>Se?Qe+1:Qe-1)},[s,D,de,ee.isActive,nr]),sn=v.useCallback(async()=>{if(!(!s||!ee.isActive||!n)&&!(de<nr))try{for(const[Re,Qe]of Object.entries(D))Qe>0&&await bR({session_id:n.id,feature_id:Re,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Qe});const Y=await Ji(n.id),Se=await uo(n.id),Te=Y.map(Re=>{const Ee=Se.filter(kt=>kt.feature_id===Re.id).map(kt=>({userId:kt.user_id,name:kt.user_name,email:kt.user_email,voteCount:kt.vote_count})),wt=Ee.reduce((kt,jt)=>kt+jt.voteCount,0);return{id:Re.id,title:Re.title,description:Re.description,epic:Re.epic,state:Re.state,areaPath:Re.area_path,tags:Re.tags||[],azureDevOpsId:Re.azure_devops_id,azureDevOpsUrl:Re.azure_devops_url,votes:wt,voters:Ee}});j(Te),T("thankyou")}catch(Y){console.error("Error submitting votes:",Y),alert("Failed to submit votes. Please try again.")}},[s,n,de,D,ee.isActive,nr]),Ls=v.useCallback(async Y=>{var wt,kt;const Se={title:Y.title,goal:Y.goal,votes_per_user:Y.votesPerUser,start_date:Y.startDate,end_date:Y.endDate,is_active:Y.isActive,use_auto_votes:Y.useAutoVotes,product_id:Y.product_id??null,product_name:null},Te={},Re=(jt,ze)=>{jt!==void 0&&(Te[ze]=jt)};Re(Y.originalEndDate,"original_end_date"),Re(Y.endedEarlyBy,"ended_early_by"),Re(Y.endedEarlyReason,"ended_early_reason"),Re(Y.endedEarlyDetails,"ended_early_details"),Re(Y.reopenReason,"reopen_reason"),Re(Y.reopenDetails,"reopen_details"),Re(Y.reopenedBy,"reopened_by"),Re(Y.reopenedAt,"reopened_at");const Qe={...Se,...Te},Ee=async jt=>{n!=null&&n.id?await Zj(n.id,jt):await NR(jt)};try{await Ee(Qe),se(Y),n!=null&&n.id&&l({...n,title:Se.title??n.title,goal:Se.goal??n.goal,votes_per_user:Se.votes_per_user??n.votes_per_user,use_auto_votes:Se.use_auto_votes??n.use_auto_votes,start_date:Se.start_date??n.start_date,end_date:Se.end_date??n.end_date,is_active:Se.is_active??n.is_active,product_id:Se.product_id!==void 0?Se.product_id??null:Y.product_id??n.product_id??null,product_name:null,original_end_date:Te.original_end_date??n.original_end_date??null,ended_early_by:Te.ended_early_by??n.ended_early_by??null,ended_early_reason:Te.ended_early_reason??n.ended_early_reason??null,ended_early_details:Te.ended_early_details??n.ended_early_details??null,reopen_reason:Te.reopen_reason??n.reopen_reason??null,reopen_details:Te.reopen_details??n.reopen_details??null,reopened_by:Te.reopened_by??n.reopened_by??null,reopened_at:Te.reopened_at??n.reopened_at??null})}catch(jt){const ze=((kt=(wt=jt==null?void 0:jt.message)==null?void 0:wt.toLowerCase)==null?void 0:kt.call(wt))??"",Jt=ze.includes("column")&&(ze.includes("reopen_reason")||ze.includes("reopen_details")||ze.includes("reopened_by")||ze.includes("reopened_at")||ze.includes("original_end_date")||ze.includes("ended_early_by")||ze.includes("ended_early_reason")||ze.includes("ended_early_details")),xr=ze.includes("product_name")||ze.includes('"product_name"'),Cr=ze.includes("product_id")||ze.includes('"product_id"');if(Jt||xr||Cr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",jt);try{const Ct={...Se};xr&&delete Ct.product_name,Cr&&delete Ct.product_id,await Ee(Ct),se(Y),n!=null&&n.id&&l({...n,title:Ct.title??n.title,goal:Ct.goal??n.goal,votes_per_user:Ct.votes_per_user??n.votes_per_user,use_auto_votes:Ct.use_auto_votes??n.use_auto_votes,start_date:Ct.start_date??n.start_date,end_date:Ct.end_date??n.end_date,is_active:Ct.is_active??n.is_active,product_id:Ct.product_id!==void 0?Ct.product_id??null:Y.productId??n.product_id??null,product_name:null,original_end_date:Y.originalEndDate??n.original_end_date??null,ended_early_by:Y.endedEarlyBy??n.ended_early_by??null,ended_early_reason:Y.endedEarlyReason??n.ended_early_reason??null,ended_early_details:Y.endedEarlyDetails??n.ended_early_details??null,reopen_reason:Y.reopenReason??n.reopen_reason??null,reopen_details:Y.reopenDetails??n.reopen_details??null,reopened_by:Y.reopenedBy??n.reopened_by??null,reopened_at:Y.reopenedAt??n.reopened_at??null})}catch(Ct){console.error("Error updating voting session (fallback):",Ct),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",jt),alert("Failed to update voting session settings")}},[n,l]),Si=v.useCallback(async Y=>{if(n){re(Y);try{await Vo(n.id,{organization:Y.organization,project:Y.project,accessToken:Y.accessToken,refreshToken:Y.refreshToken,tokenExpiresAt:Y.tokenExpiresAt,tenantId:Y.tenantId,clientId:Y.clientId,enabled:Y.enabled,workItemType:Y.workItemType,query:Y.query,lastSyncTime:Y.lastSyncTime})}catch(Se){console.error("Error saving config:",Se)}}},[n]),Wt=v.useCallback(()=>{n?p("/results"):T("results")},[n,p]),Kn=v.useMemo(()=>{switch(O){case"voting":return a.jsx($Z,{features:b,currentUser:s,pendingVotes:D,pendingUsedVotes:de,onVote:Hn,onSubmitVotes:sn,onToggleAdmin:mr,isAdmin:P,votingSession:ee,navigate:p,effectiveVotesPerUser:nr,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:nt,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return a.jsx(IZ,{features:b,onResetVotes:Gr,onResetAllVotes:rr,onBack:r?()=>p("../admin"):()=>T("admin"),showVotersList:U,setShowVotersList:le,votingSession:ee,effectiveVotesPerUser:nr,onLogout:y});case"thankyou":return a.jsx(DZ,{navigate:p,votingSession:ee});case"admin":default:return t?a.jsx(jZ,{features:b,onAddFeature:Ss,onUpdateFeature:br,onDeleteFeature:Vn,onShowResults:Wt,onRequestDeleteSession:Tt,isDeletingSession:Ve,showAddForm:V,setShowAddForm:L,editingFeature:G,setEditingFeature:M,onLogout:y,onShowVoterView:Rr,votingSession:ee,azureDevOpsConfig:B,onUpdateAzureDevOpsConfig:Si,onPreviewAzureDevOpsFeatures:or,onDisconnectAzureDevOps:hn,isFetchingAzureDevOps:q,azureFetchError:je,onInitiateOAuth:dr,availableStates:ce,availableAreaPaths:H,availableTags:ie,previewFeatures:be,showPreviewModal:K,setShowPreviewModal:He,onConfirmSync:Ht,onReplaceAll:En,onUpdateVotingSession:Ls,onFetchStatesForType:ir,onFetchAreaPathsForTypeAndState:as,onFetchTagsForTypeStateAndAreaPath:Lr,onFetchTypesAndStatesForAreaPath:qn,onFetchTypesAndStatesForTags:Dr,onFetchTypesAndAreaPathsForStates:is,suggestedFeatures:Ke,otherSessions:vt,onPromoteSuggestion:nn,onMoveSuggestion:Lt,onEditSuggestion:Ft,onDeleteSuggestion:fr,adminPerspective:Rt,projectOptions:ne}):a.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:a.jsx(Mn,{className:"h-8 w-8"})}),a.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),a.jsx(dt,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[O,b,s,D,de,Hn,sn,mr,P,ee,Gr,rr,U,le,Ss,br,Vn,V,L,G,M,B,Si,hr,or,hn,q,je,dr,be,K,He,Ht,p,nr,t,ce,H,ie,ir,n,Rr,nt,Ke,vt,nn,Lt,Ft,fr,Rt,ne,Wt]);return n?S?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!P&&O!=="voting"&&O!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:Kn}),a.jsx(CT,{currentRole:P?Rt==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:P?void 0:Rr,onSelectSessionAdmin:P||d?Nr:void 0,onSelectSystemAdmin:d?An:void 0,showRoleToggle:d||P&&Rt==="system"}),a.jsx(fh,{show:pe.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:vr,onCancel:()=>ke(Y=>({...Y,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(fh,{show:pe.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Wr,onCancel:()=>ke(Y=>({...Y,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(fh,{show:pe.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:Br,onCancel:()=>ke(Y=>({...Y,showDeleteSession:!1})),confirmText:Ve?"Deleting":"Delete Session",type:"delete"})]}):a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}function MZ(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),[d,m]=v.useState(!1),{setCurrentUser:f,setCurrentSession:p}=oa(),y=Ms(),[x]=ix();v.useEffect(()=>{const S=sessionStorage.getItem("oauth_error");S&&(u(S),sessionStorage.removeItem("oauth_error"));const _=x.get("error"),E=x.get("error_description"),C=x.get("error_code");if(_){const O=E?decodeURIComponent(E):"An authentication error occurred.";_==="invalid_request"&&O.includes("AADSTS9002325")?u('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):C==="unexpected_failure"&&O.includes("email")?u("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):u(`Authentication failed: ${O}`),y("/login",{replace:!0})}},[x,y]);const b=async S=>{console.log("[LoginScreen]  handleLogin called!",{email:e,name:r}),S.preventDefault(),console.log("[LoginScreen] Form prevented default"),u(""),i(!0),console.log("[LoginScreen] Set loading state");try{console.log("[LoginScreen] Starting login process..."),console.log("[LoginScreen] Getting or creating user...");const _=await Zo(e.trim().toLowerCase(),r.trim());console.log("[LoginScreen] User created/retrieved:",_),f(_);const E=x.get("session");if(E){console.log("[LoginScreen] Session code found, loading session...");const C=await fR(E);if(C){p(C),console.log("[LoginScreen] Checking user roles...");const[O,T,P]=await Promise.all([vl(_.id),vm(C.id,_.id),hx(C.id,_.email)]);if(O||T)y("/admin");else if(P)y("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),y("/sessions")}catch(_){console.error("[LoginScreen] Login error:",_),u(`Failed to log in: ${_ instanceof Error?_.message:"Unknown error"}. Please try again.`),i(!1)}},j=async()=>{u(""),i(!0);try{const S=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",_=`${window.location.origin}${S}/sessions`,{error:E}=await Ce.auth.signInWithOAuth({provider:"azure",options:{redirectTo:_,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:_}}});E&&(u("Failed to sign in with Azure AD. Please try again."),i(!1))}catch(S){console.error("Azure login error:",S),u("Failed to sign in with Azure AD. Please try again."),i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),a.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:S=>n(S.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:S=>t(S.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:j,disabled:s,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},onMouseEnter:S=>{s||(S.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:S=>{s||(S.currentTarget.style.backgroundColor="#FFFFFF")},children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),a.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:UF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),a.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:()=>m(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),a.jsx(FZ,{isOpen:d,onClose:lt.useCallback(()=>m(!1),[])})]})}const FZ=lt.memo(function({isOpen:t,onClose:r}){const[n,s]=v.useState(""),[i,l]=v.useState(""),[u,d]=v.useState(""),[m,f]=v.useState([]),[p,y]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,E]=v.useState(""),[C,O]=v.useState(!1),T=lt.useRef(null),P=lt.useRef(!1),$=lt.useRef(null),G=lt.useRef(null);v.useEffect(()=>{t&&!P.current?(async()=>{y(!0);try{const se=await dx();f(se),P.current=!0}catch(se){console.error("Error loading products:",se),E("Failed to load products. Please try again.")}finally{y(!1)}})():t||(s(""),l(""),d(""),S(!1),E(""),P.current=!1)},[t]),v.useEffect(()=>{function ee(se){T.current&&!T.current.contains(se.target)&&O(!1)}return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[]);const M=lt.useCallback(ee=>{s(ee.target.value)},[]),V=lt.useCallback(ee=>{l(ee.target.value)},[]),L=async ee=>{if(ee.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!i.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}b(!0);try{const se=await pR(u);if(se.length===0){E("No administrators found for this product. Please contact your system administrator."),b(!1);return}const B=m.find(me=>me.id===u),re=(B==null?void 0:B.name)||"the selected product",ne=Array.from(new Set(se.map(me=>{var q;return(q=me.user)==null?void 0:q.email}).filter(Boolean))),ae=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ce=`${window.location.origin}${ae}/login`,Fe=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative;">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 8px;">Feature Voting System</div>
            <div style="font-size: 14px; color: #6b7280; margin-top: 8px;">Access Request Notification</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${re}</strong>.</p>
            
            <!-- User Details - Keeping as requested -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: bold; color: #2d4660;">Requester Name:</span> <span style="color: #333;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: bold; color: #2d4660;">Requester Email:</span> <span style="color: #333;">${i}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: bold; color: #2d4660;">Product:</span> <span style="color: #333;">${re}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.</p>
            
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${ce}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
        
        <!-- Bottom-left curve image -->
        <tr>
          <td style="position: relative; height: 200px; overflow: hidden; background-color: #f9fafb;">
            <img src="https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png" alt="" width="600" style="max-width: 600px; width: 100%; height: auto; opacity: 0.2; border: 0;" />
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,ie=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${re}.

Requester Name: ${n}
Requester Email: ${i}
Product: ${re}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${ce}

This is an automated message from the Feature Voting System.
      `;try{const me=ne.map(q=>Sm({to:q,subject:`Access Request for ${re} - Feature Voting System`,text:ie,html:Fe}));await Promise.all(me),S(!0)}catch(me){console.error("Email service failed:",me);let q="Failed to send email through the system.";me instanceof Error||me!=null&&me.message?q=me.message:typeof me=="string"&&(q=me),(q.includes("validation_error")||q.includes("403"))&&(q="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${q}. Please check the Supabase Edge Function logs for details.`),b(!1);return}}catch(se){console.error("Error sending access request:",se),E("Failed to send access request. Please try again or contact your administrator.")}finally{b(!1)}},U=m.find(ee=>ee.id===u),le=U?Ln(U.name,U.color_hex??null):null;return a.jsx(es,{isOpen:t,onClose:r,title:j?"":"Request Access",maxWidth:"max-w-lg",hideHeader:j,children:j?a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(Tr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),a.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:U==null?void 0:U.name}),a.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{ref:$,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{ref:G,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:i,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),a.jsxs("div",{ref:T,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>O(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[U&&le&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:le.background}}),a.jsx("span",{className:U?"text-gray-900":"text-gray-400",children:U?U.name:"Select a product..."})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(ee=>{const se=Ln(ee.name,ee.color_hex??null),B=u===ee.id;return a.jsxs("div",{onClick:()=>{d(ee.id),O(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${B?"bg-[#2d4660]/5":""}`,children:[se&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:se.background}}),a.jsx("span",{className:"text-sm text-gray-900",children:ee.name})]},ee.id)})})]})]}),_&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(dt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),a.jsx(dt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lc,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function LZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=oa(),i=Ms(),[l]=ix(),[u,d]=v.useState(!0),[m,f]=v.useState(!1),p=v.useRef(!1),[y,x]=v.useState([]),[b,j]=v.useState({}),[S,_]=v.useState({}),[E,C]=v.useState({}),[O,T]=v.useState(!1),[P,$]=v.useState("admin"),[G,M]=v.useState(!1),V=v.useRef(null),[L,U]=v.useState({}),[le,ee]=v.useState({}),[se,B]=v.useState(!1),[re,ne]=v.useState(!0),[ae,ce]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),[I,H]=v.useState({}),[Fe,ie]=v.useState(!1),[me,q]=v.useState([]),[Z,je]=v.useState(""),[F,be]=v.useState(""),[Ge,K]=v.useState(null),[He,Ke]=v.useState(null),[Pt,vt]=v.useState(!1),[qt,Rt]=v.useState(!1),[ar,D]=v.useState(!1),[Q,de]=v.useState(null),[Ne,pe]=v.useState(!1),[ke,Ve]=v.useState(!1),[ht,St]=v.useState(!1),[$t,yr]=v.useState(null),[nr,Kr]=v.useState(!1),[dr,Bt]=v.useState("#2D4660"),rn=v.useRef(null),[sr,Cn]=v.useState(new Set),[nt,Ft]=v.useState(null),[fr,Lt]=v.useState(null),[nn,ir]=v.useState(!1),[qn,is]=v.useState(null),[Dr,Lr]=v.useState(null),[as,hr]=v.useState(null),[or,En]=v.useState(null),[Ht,hn]=v.useState(""),[mr,Rr]=v.useState(null),[Nr,An]=v.useState(!1),[Ss,br]=v.useState(!1),[Vn,Gr]=v.useState("#2D4660");v.useEffect(()=>{const te=l.get("error"),fe=l.get("error_description"),ge=l.get("error_code");if(te){let $e="Authentication failed.";ge==="unexpected_failure"&&(fe!=null&&fe.includes("email"))?$e="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":fe&&($e=decodeURIComponent(fe)),sessionStorage.setItem("oauth_error",$e),i("/login",{replace:!0})}},[l,i]),v.useEffect(()=>{(async()=>{if(!se||!e)return;const fe=e.tenant_id??e.tenantId??null;if(!fe){q([]),je(""),de("No tenant assigned. Products cannot be loaded.");return}Rt(!0),de(null);try{const $e=await ba(fe);q($e),je(qe=>{if(nn&&qe&&$e.some(we=>we.id===qe))return qe;if(nt){const ve=$e.find(we=>{var ut;return((ut=we.name)==null?void 0:ut.toLowerCase().trim())===nt.toLowerCase().trim()});if(ve!=null&&ve.id)return Ft(null),ve.id}return nn&&qe||""}),U(qe=>{const ve={...qe};return $e.forEach(we=>{we.id&&we.name&&(ve[we.id]=we.name)}),ve}),ee(qe=>{const ve={...qe};return $e.forEach(we=>{we.id&&we.color_hex&&(ve[we.id]=we.color_hex)}),ve})}catch(ge){console.error("Error loading products for modal:",ge),Ca!=null&&Ca(ge)?de("Products are not configured yet. Please create the `products` table in Supabase."):de("Unable to load products. You can still create a session without a product tag."),q([]),je("")}finally{Rt(!1)}})()},[se,e]);const vr=te=>{if(!te||typeof te!="string")return console.error("[parseLocalDate] Invalid date string:",te),new Date;const ge=te.split("T")[0].split(" ")[0].split("-");if(ge.length!==3)return console.error("[parseLocalDate] Invalid date format:",te),new Date;const $e=parseInt(ge[0],10),qe=parseInt(ge[1],10),ve=parseInt(ge[2],10);if(isNaN($e)||isNaN(qe)||isNaN(ve))return console.error("[parseLocalDate] Invalid date components:",{year:$e,month:qe,day:ve}),new Date;const we=new Date($e,qe-1,ve,0,0,0,0);return isNaN(we.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:$e,month:qe,day:ve,dateString:te}),new Date):we},rr=te=>{if(!te||isNaN(te.getTime()))return console.error("[formatDateToISO] Invalid date:",te),new Date().toISOString().split("T")[0];const fe=te.getFullYear(),ge=String(te.getMonth()+1).padStart(2,"0"),$e=String(te.getDate()).padStart(2,"0");return`${fe}-${ge}-${$e}`},Tt=(te,fe)=>{const ge=te.getFullYear(),$e=te.getMonth(),qe=te.getDate();return new Date(ge,$e,qe+fe,0,0,0,0)},Br=()=>{const te="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let fe="";for(let ge=0;ge<8;ge++)fe+=te.charAt(Math.floor(Math.random()*te.length));return fe},Wr=()=>{ce({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),H({}),be(""),K(null),de(null),pe(!1),Ve(!1),St(!1),yr(null),Kr(!1),Bt("#2D4660"),Ft(null),ne(!0),ir(!1),je("")},Hn=()=>{const te={};ae.title.trim()||(te.title="Session title is required"),ae.goal.trim()||(te.goal="Session goal is required"),ae.useAutoVotes||(ae.votesPerUser<1&&(te.votesPerUser="Votes per user must be at least 1"),ae.votesPerUser>100&&(te.votesPerUser="Votes per user cannot exceed 100"));const fe=vr(ae.startDate);vr(ae.endDate)<=fe&&(te.endDate="End date must be after start date");const $e=F.trim().length>0;return!Q&&me.length>0&&!Z&&!$t&&!Ne&&!$e&&(te.product="Please select a product or enter a new product name"),Ne&&!$e&&(te.product="Please enter a product name or select an existing product"),H(te),Object.keys(te).length===0},sn=te=>{const{name:fe,value:ge}=te.target;ce($e=>{const qe={...$e,[fe]:fe==="votesPerUser"?parseInt(ge)||0:ge};if(fe==="startDate"&&ge){const ve=vr(ge),we=Tt(ve,14);qe.endDate=rr(we)}return qe}),I[fe]&&H($e=>{const qe={...$e};return delete qe[fe],qe})},Ls=async()=>{if(!(!He||!e)){vt(!0);try{await VC(He.id),q(te=>te.filter(fe=>fe.id!==He.id)),U(te=>{const fe={...te};return delete fe[He.id],fe}),ee(te=>{const fe={...te};return delete fe[He.id],fe}),Z===He.id&&je("")}catch(te){console.error("Error deleting product:",te),alert("Failed to delete product. Please try again.")}finally{vt(!1),Ke(null)}}},Si=async te=>{if(te.preventDefault(),!!e&&Hn()){ie(!0);try{const fe=Br(),ge=e.tenant_id??e.tenantId??null;let $e=Z&&Z.trim()!==""?Z:null;const qe=F.trim(),ve=qe.length>0,we=Z&&Z.trim()!=="";let ut=null,Mt=null;if($t?(ut=$t.name,Mt=$t.color):ve&&(ut=qe,Mt=Ge),ut){const zt=me.find(ct=>ct.name.toLowerCase().trim()===ut.toLowerCase().trim());if(zt)$e=zt.id;else if(ge)try{const ct=await qC(ge,ut,Mt||void 0);$e=ct.id,q(z=>[...z,ct].sort((xe,We)=>xe.name.localeCompare(We.name))),U(z=>({...z,[ct.id]:ct.name})),ee(z=>{const xe={...z};return ct.color_hex&&(xe[ct.id]=ct.color_hex),xe})}catch(ct){console.error("Error creating product during session creation:",ct),H(z=>({...z,submit:"Failed to create product. Please try again."})),ie(!1);return}else{console.error("No tenantId available to create product"),H(ct=>({...ct,submit:"Unable to create product: No tenant assigned."})),ie(!1);return}}if($e){const zt=y.filter(Ye=>Ye.product_id===$e),ct=ae.startDate.split("T")[0],z=ae.endDate.split("T")[0];if(zt.find(Ye=>{const _t=Ye.start_date.split("T")[0],Kt=Ye.end_date.split("T")[0];return _t===ct&&Kt===z})){const Ye=L[$e]||"this product";H(_t=>({..._t,submit:`A session with the same dates (${Te(ae.startDate)} - ${Te(ae.endDate)}) already exists for ${Ye}. Please choose different dates.`})),ie(!1);return}const We=await GC($e);if(We){const Ye=vr(We.end_date);if(vr(ae.startDate)<=Ye){const Kt=L[$e]||"this product";H(pr=>({...pr,submit:`There is already an active session for ${Kt}. The new session must start after ${Te(We.end_date)}.`})),ie(!1);return}}}const mt=`${ae.startDate}T00:00:00`,It=`${ae.endDate}T23:59:59`,bt=await YC({title:ae.title,goal:ae.goal,votes_per_user:ae.votesPerUser,use_auto_votes:ae.useAutoVotes,start_date:mt,end_date:It,is_active:!0,session_code:fe,access_type:"invite-only",product_id:$e??null,product_name:null});try{await yc(bt.id,e.id)}catch(zt){console.error("Error adding session admin (session was created successfully):",zt),(zt==null?void 0:zt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const Vt=await dR(bt.id)||bt;if(Vt.product_id&&ge)try{const ct=(await ba(ge)).find(z=>z.id===Vt.product_id);ct&&(U(z=>({...z,[ct.id]:ct.name})),ct.color_hex&&ct.color_hex.trim()!==""&&ee(z=>({...z,[ct.id]:ct.color_hex})))}catch(zt){console.error("Error loading product for lookup:",zt)}t(Vt),await r(),await Wt(),B(!1),Wr(),setTimeout(()=>{i("/admin")},100)}catch(fe){console.error("Error creating session from modal:",fe),H(ge=>({...ge,submit:"Failed to create session. Please try again."}))}finally{ie(!1)}}};v.useEffect(()=>{if(!G)return;const te=fe=>{V.current&&!V.current.contains(fe.target)&&M(!1)};return document.addEventListener("mousedown",te),document.addEventListener("touchstart",te,{passive:!0}),()=>{document.removeEventListener("mousedown",te),document.removeEventListener("touchstart",te)}},[G]);const Wt=v.useCallback(async()=>{var te;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const ge=Yv(e.email)||await vl(e.id);T(ge);let $e;ge?$e=await wo():$e=await KC(e.id);const qe=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let ve={},we={};if(qe)try{const It=await ba(qe);ve=It.reduce((bt,Ue)=>(Ue.id&&Ue.name&&(bt[Ue.id]=Ue.name),bt),{}),we=It.reduce((bt,Ue)=>(Ue.id&&Ue.color_hex&&(bt[Ue.id]=Ue.color_hex),bt),{})}catch(It){console.error("Error loading products for session selection:",It)}const ut={},Mt={},mt={};for(let It=0;It<$e.length;It++){const bt=$e[It];try{const[Ue,Vt,zt,ct]=await Promise.all([ge?Promise.resolve(!0):vm(bt.id,e.id),hx(bt.id,e.email),Ji(bt.id),uo(bt.id).catch(xe=>(console.warn(`Failed to load votes for session ${bt.id}:`,xe),[]))]);ut[bt.id]={isAdmin:Ue,isStakeholder:Vt},Mt[bt.id]=zt.length;const z=ct.some(xe=>xe.user_id===e.id);mt[bt.id]=z}catch(Ue){console.warn(`Error loading data for session ${bt.id}:`,Ue),ut[bt.id]={isAdmin:!1,isStakeholder:!1},Mt[bt.id]=0,mt[bt.id]=!1}}await r(),x($e),j(ut),_(Mt),C(mt),U(ve),ee(we)}catch(fe){console.error("Error loading sessions:",fe),(te=fe==null?void 0:fe.message)!=null&&te.includes("Failed to fetch")||(fe==null?void 0:fe.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),j({}),_({}),C({})):(x([]),j({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);v.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const fe=setTimeout(()=>{f(!1),e||i("/login",{replace:!0})},3e3);return()=>clearTimeout(fe)}if(m&&e&&f(!1),!m){if(!e&&!s){i("/login",{replace:!0});return}e&&!s&&!p.current&&Wt()}},[e,s,i,m]);const Kn=te=>{const fe=S[te.id]||0;if(te.use_auto_votes){const ge=Math.max(1,Math.floor(fe/2));return{votes:ge,displayText:`${ge} votes/user`,isAuto:!0,formula:`Auto: ${fe} ${fe===1?"feature":"features"}  2 = ${ge}`}}else return{votes:te.votes_per_user,displayText:`${te.votes_per_user} votes/user`,isAuto:!1,formula:""}},Y=te=>{t(te);const fe=b[te.id];P==="stakeholder"?i("/vote"):fe!=null&&fe.isAdmin?i("/admin"):i("/vote")},Se=async()=>{try{await Ce.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}M(!1),i("/login",{replace:!0})},Te=te=>{const ge=te.split("T")[0].split(" ")[0].split("-");if(ge.length!==3)return new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,It=>`'${It.slice(-2)}`);const $e=parseInt(ge[0],10),qe=parseInt(ge[1],10)-1,ve=parseInt(ge[2],10);return new Date($e,qe,ve).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Mt=>`'${Mt.slice(-2)}`)},Re=te=>{const fe=new Date,ge=new Date(te.start_date),$e=new Date(te.end_date);return fe<ge?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:km}:fe>$e?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:er}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Tr}},Qe=te=>[...te].sort((fe,ge)=>{const $e=fe!=null&&fe.end_date?Date.parse(fe.end_date):0;return(ge!=null&&ge.end_date?Date.parse(ge.end_date):0)-$e}),Ee=(te,fe)=>{te.stopPropagation();const ge=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",$e=`${window.location.origin}${ge}/login?session=${fe.session_code}`,qe=encodeURIComponent(`You're invited to vote: ${fe.title}`),ve=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${fe.title}
Goal: ${fe.goal}

To get started, copy and paste this link into your browser:

${$e}

Voting Period: ${Te(fe.start_date)} - ${Te(fe.end_date)}

Best regards,
${e==null?void 0:e.name}`);window.location.href=`mailto:?subject=${qe}&body=${ve}`},wt=(te,fe)=>{te.stopPropagation(),t(fe),i("/results")},kt=(te,fe)=>{te.stopPropagation(),t(fe),i("/users?filter=session-admin")},jt=(te,fe)=>{te.stopPropagation(),t(fe),i("/users?filter=stakeholder")},ze=()=>{B(!1),ir(!1),Wr()};if(u)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Jt=Qe(y),xr=O?Jt:Jt.filter(te=>{var fe;return(fe=b[te.id])==null?void 0:fe.isAdmin}),Cr=O?[]:Jt.filter(te=>{var fe,ge;return((fe=b[te.id])==null?void 0:fe.isStakeholder)&&!((ge=b[te.id])!=null&&ge.isAdmin)}),Ct=O||xr.length>0,Gn=O&&P==="system-admin",si=P==="stakeholder"?Jt.filter(te=>Re(te).text==="Active"):[],ks=P==="admin"||P==="system-admin"?xr:[],ua=P==="admin"?Cr:[],ii=(te,fe)=>{const ge={};return te.forEach($e=>{const qe=Rn($e,fe);if(!qe||qe==="No Product"||qe.trim()==="")return;const ve=qe.toLowerCase().trim();ge[ve]||(ge[ve]=[]),ge[ve].push($e)}),ge},ki=te=>{Cn(fe=>{const ge=new Set(fe);return ge.has(te)?ge.delete(te):ge.add(te),ge})},mn=(te,fe,ge,$e)=>{const qe=$e||ge||te,ve=async we=>{if(!ge)return;we.stopPropagation();let ut=me.find(Mt=>Mt.id===ge);if(!ut){const Mt=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Mt)try{ut=(await ba(Mt)).find(It=>It.id===ge),ut&&q(It=>It.find(Ue=>Ue.id===ge)?It:[...It,ut].sort((Ue,Vt)=>Ue.name.localeCompare(Vt.name)))}catch(mt){console.error("Error loading product for edit:",mt)}}ut&&(En(ut),hn(ut.name||""),Rr(ut.color_hex||null),Gr(ut.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:fe.background,color:fe.text,borderColor:fe.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{ge&&P!=="stakeholder"&&Ct&&Lr(qe)},onMouseLeave:()=>Lr(null),onClick:P!=="stakeholder"&&Ct?ve:void 0,children:[a.jsx(t0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:te}),ge&&Dr===qe&&P!=="stakeholder"&&Ct&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(kE,{className:"h-4 w-4",style:{color:fe.text}})})]})},fs=(te,fe,ge,$e,qe,ve,we,ut=!0,Mt)=>a.jsxs(a.Fragment,{children:[ut&&mn(fe,ge,Mt),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:$e.text==="Active"&&a.jsx("div",{className:"relative inline-block",style:{marginLeft:"-10px",marginTop:"-10px",marginRight:"10px"},children:a.jsxs("button",{onClick:mt=>{mt.stopPropagation(),Y(te)},className:"inline-flex items-center px-4 py-2 rounded-md text-sm font-semibold transition-colors text-white shadow-md",style:{backgroundColor:"#1E6154"},onMouseEnter:mt=>mt.currentTarget.style.backgroundColor="#15803d",onMouseLeave:mt=>mt.currentTarget.style.backgroundColor="#1E6154",children:[a.jsx(Qn,{className:"h-4 w-4 mr-1.5"}),"Vote!"]})})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:`relative inline-block ${we?"group":""}`,children:[a.jsxs("button",{onClick:mt=>kt(mt,te),disabled:we,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${we?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:we?{cursor:"not-allowed"}:{},children:[a.jsx(jn,{className:"h-3 w-3 mr-1"}),"Admins"]}),we&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),a.jsxs("div",{className:`relative inline-block ${we?"group":""}`,children:[a.jsxs("button",{onClick:mt=>jt(mt,te),disabled:we,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${we?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:we?{cursor:"not-allowed"}:{},children:[a.jsx(ns,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),we&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:te.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:te.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Te(te.start_date)," - ",Te(te.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${$e.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${$e.color}`,children:[a.jsx(qe,{className:`${$e.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),$e.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[te.id]||0," ",S[te.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:fe})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:ve.displayText}),ve.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx(Fu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ve.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),$e.text!=="Upcoming"&&a.jsxs("button",{onClick:mt=>wt(mt,te),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(oh,{className:"h-3 w-3 mr-1"}),$e.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:`relative inline-block w-full ${we?"group":""}`,children:[a.jsxs("button",{onClick:mt=>Ee(mt,te),disabled:we,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${we?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:we?{cursor:"not-allowed"}:{},children:[a.jsx(Lc,{className:`h-4 w-4 mr-2 ${we?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${we?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),we&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return s||m||u&&!e?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>i("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,O&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!O&&xr.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"}),!O&&xr.length===0&&Cr.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#8B5A4A] text-white",children:"Stakeholder"})]})]})]}),a.jsxs("div",{ref:V,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[O&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>i("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(ns,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(O||xr.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{ir(!1),ne(!0),je(""),B(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx($n,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:Se,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>M(!G),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),G&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[O&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{M(!1),i("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(O||xr.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{M(!1),ne(!0),B(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx($n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{M(!1),Se()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),y.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(Qn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),O&&a.jsxs("button",{onClick:()=>{ne(!0),B(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx($n,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[P==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Qn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const te=si.filter(ve=>{const we=Rn(ve,L);return we&&we!=="No Product"&&we.trim()!==""}),fe=si.filter(ve=>{const we=Rn(ve,L);return!we||we==="No Product"||we.trim()===""}),ge=ii(te,L),$e=[],qe=[];return Object.entries(ge).forEach(([ve,we])=>{we.length>=2?$e.push({key:ve,sessions:we}):qe.push(...we)}),a.jsxs("div",{className:"space-y-8",children:[$e.map(({key:ve,sessions:we})=>{var ct,z;const ut=sr.has(ve),Mt=ut?we:we.slice(0,3),mt=we.length>3?we.length-3:0,It=Rn(we[0],L),bt=(ct=we[0])!=null&&ct.product_id?le[we[0].product_id]:void 0,Ue=Ln(It,bt),Vt=(xe,We)=>{const Ye=xe.replace("#",""),_t=parseInt(Ye.substring(0,2),16),Kt=parseInt(Ye.substring(2,4),16),pr=parseInt(Ye.substring(4,6),16);return`rgba(${_t}, ${Kt}, ${pr}, ${We})`},zt=Ue.background?Vt(Ue.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:zt,borderColor:Ue.border||"#E5E7EB"},children:[mn(It,Ue,(z=we[0])==null?void 0:z.product_id,ve),mt>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>ki(ve),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ut?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",mt,")",a.jsx(ts,{className:"h-4 w-4"})]})})}),Ct&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:xe=>{var Pn;xe.stopPropagation();const We=(Pn=we[0])==null?void 0:Pn.product_id,Ye=Rn(we[0],L);We&&je(We),Ye&&Ye!=="No Product"&&Ft(Ye);let _t=we.length>0?vr(we[0].end_date):new Date;we.forEach(Yr=>{const lr=vr(Yr.end_date);lr>_t&&(_t=lr)});const Kt=Tt(_t,1),pr=Tt(Kt,14);ce(Yr=>({...Yr,startDate:rr(Kt),endDate:rr(pr)})),ir(!0),ne(!1),B(!0)},onMouseEnter:()=>Lt(ve),onMouseLeave:()=>Lt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Ue.background||"#C89212",color:Ue.text||"#FFFFFF"},title:`Create new session for ${It}`,children:a.jsx($n,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Mt.map(xe=>{const We=Re(xe),Ye=We.text==="Closed",_t=We.icon,Kt=Kn(xe),pr=E[xe.id],Pn=Rn(xe,L),Yr=xe.product_id?le[xe.product_id]:void 0,lr=Ln(Pn,Yr);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:lr.border,borderWidth:"1px",opacity:Ye&&as!==xe.id?.75:1},onMouseEnter:()=>hr(xe.id),onMouseLeave:()=>hr(null),onClick:()=>Y(xe),children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:pr?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Voted"]}):We.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(er,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:xe.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:xe.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Te(xe.start_date)," - ",Te(xe.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${We.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${We.color}`,children:[a.jsx(_t,{className:`${We.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),We.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[xe.id]||0," ",S[xe.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Pn})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Kt.displayText}),Kt.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Fu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Kt.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:hs=>{hs.stopPropagation(),Ye||Y(xe)},disabled:Ye,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Ye?"bg-gray-100 text-gray-500 cursor-not-allowed":pr?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Ye?{cursor:"not-allowed"}:{},children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),pr?"View or Change Votes":"Cast Your Votes"]})})]})},xe.id)})}),mt>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>ki(ve),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ut?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",mt,")",a.jsx(ts,{className:"h-4 w-4"})]})})})]})},ve)}),(qe.length>0||fe.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...qe,...fe].map(ve=>{const we=Re(ve),ut=we.text==="Closed",Mt=we.icon,mt=Kn(ve),It=E[ve.id],bt=Rn(ve,L),Ue=ve.product_id?le[ve.product_id]:void 0,Vt=Ln(bt,Ue),zt=qe.includes(ve);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Vt.border,borderWidth:"1px",opacity:ut&&as!==ve.id?.75:1},onMouseEnter:()=>hr(ve.id),onMouseLeave:()=>hr(null),onClick:()=>Y(ve),children:[mn(bt,Vt,ve.product_id),zt&&Ct&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:ct=>{ct.stopPropagation();const z=ve.product_id,xe=Rn(ve,L);z&&je(z),xe&&xe!=="No Product"&&Ft(xe);const We=vr(ve.end_date),Ye=Tt(We,1),_t=Tt(Ye,14);ce(Kt=>({...Kt,startDate:rr(Ye),endDate:rr(_t)})),ir(!0),ne(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Vt.background||"#C89212",color:Vt.text||"#FFFFFF"},onMouseEnter:ct=>{const z=Vt.background||"#C89212";ct.currentTarget.style.backgroundColor=z,ct.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:ct=>{ct.currentTarget.style.backgroundColor=Vt.background||"#C89212",ct.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${bt}`,children:a.jsx($n,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:It?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Voted"]}):we.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(er,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:ve.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:ve.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Te(ve.start_date)," - ",Te(ve.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${we.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${we.color}`,children:[a.jsx(Mt,{className:`${we.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),we.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[ve.id]||0," ",S[ve.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:bt})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:mt.displayText}),mt.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Fu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[mt.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:ct=>{ct.stopPropagation(),ut||Y(ve)},disabled:ut,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ut?"bg-gray-100 text-gray-500 cursor-not-allowed":It?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ut?{cursor:"not-allowed"}:{},children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),It?"View or Change Votes":"Cast Your Votes"]})})]})]},ve.id)})})]})})()]}),(P==="admin"||P==="system-admin")&&a.jsxs(a.Fragment,{children:[P==="admin"&&ua.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Qn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ua.map(te=>{const fe=Re(te),ge=fe.text==="Closed",$e=fe.icon,qe=Kn(te),ve=E[te.id],we=Rn(te,L),ut=te.product_id?le[te.product_id]:void 0,Mt=Ln(we,ut);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Mt.border,borderWidth:"1px",opacity:ge&&as!==te.id?.75:1},onMouseEnter:()=>hr(te.id),onMouseLeave:()=>hr(null),onClick:()=>Y(te),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Mt.background,color:Mt.text,borderColor:Mt.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(t0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:we})]}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:ve?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Voted"]}):fe.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(er,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:te.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:te.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Te(te.start_date)," - ",Te(te.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${fe.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${fe.color}`,children:[a.jsx($e,{className:`${fe.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),fe.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[te.id]||0," ",S[te.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:we})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:qe.displayText}),qe.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Fu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[qe.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:mt=>{mt.stopPropagation(),ge||Y(te)},disabled:ge,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ge?"bg-gray-100 text-gray-500 cursor-not-allowed":ve?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ge?{cursor:"not-allowed"}:{},children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),ve?"View or Change Votes":"Cast Your Votes"]})})]})]},te.id)})})]}),ks.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(jn,{className:"h-5 w-5 mr-2"}),Gn?"All Sessions (System Admin)":"Sessions You Manage"]}),Gn&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",ks.length," total sessions across the organization."]})]}),(()=>{const te=ks.filter(ve=>{const we=Rn(ve,L);return we&&we!=="No Product"&&we.trim()!==""}),fe=ks.filter(ve=>{const we=Rn(ve,L);return!we||we==="No Product"||we.trim()===""}),ge=ii(te,L),$e=[],qe=[];return Object.entries(ge).forEach(([ve,we])=>{we.length>=2?$e.push({key:ve,sessions:we}):qe.push(...we)}),a.jsxs("div",{className:"space-y-8",children:[$e.map(({key:ve,sessions:we})=>{var ct,z;const ut=sr.has(ve),Mt=ut?we:we.slice(0,3),mt=we.length>3?we.length-3:0,It=Rn(we[0],L),bt=(ct=we[0])!=null&&ct.product_id?le[we[0].product_id]:void 0,Ue=Ln(It,bt),Vt=(xe,We)=>{const Ye=xe.replace("#",""),_t=parseInt(Ye.substring(0,2),16),Kt=parseInt(Ye.substring(2,4),16),pr=parseInt(Ye.substring(4,6),16);return`rgba(${_t}, ${Kt}, ${pr}, ${We})`},zt=Ue.background?Vt(Ue.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:zt,borderColor:Ue.border||"#E5E7EB"},children:[mn(It,Ue,(z=we[0])==null?void 0:z.product_id,ve),mt>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>ki(ve),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ut?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",mt,")",a.jsx(ts,{className:"h-4 w-4"})]})})}),(O||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:xe=>{var Pn;xe.stopPropagation();const We=(Pn=we[0])==null?void 0:Pn.product_id,Ye=Rn(we[0],L);We&&je(We),Ye&&Ye!=="No Product"&&Ft(Ye);let _t=we.length>0?vr(we[0].end_date):new Date;we.forEach(Yr=>{const lr=vr(Yr.end_date);lr>_t&&(_t=lr)});const Kt=Tt(_t,1),pr=Tt(Kt,14);ce(Yr=>({...Yr,startDate:rr(Kt),endDate:rr(pr)})),ne(!1),B(!0)},onMouseEnter:()=>Lt(ve),onMouseLeave:()=>Lt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Ue.background||"#C89212",color:Ue.text||"#FFFFFF"},title:`Create new session for ${It}`,children:a.jsx($n,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Mt.map(xe=>{const We=Re(xe),Ye=We.icon,_t=Kn(xe),Kt=We.text==="Closed",pr=Rn(xe,L),Pn=xe.product_id?le[xe.product_id]:void 0,Yr=Ln(pr,Pn);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Yr.border,borderWidth:"1px",opacity:Kt&&as!==xe.id?.75:1},onMouseEnter:()=>hr(xe.id),onMouseLeave:()=>hr(null),onClick:()=>Y(xe),children:fs(xe,pr,Yr,We,Ye,_t,Kt,!1,xe.product_id)},xe.id)}),we.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Ue.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>is(ve),onMouseLeave:()=>is(null),onClick:xe=>{var Pn;xe.stopPropagation();const We=(Pn=we[0])==null?void 0:Pn.product_id,Ye=Rn(we[0],L);We&&je(We),Ye&&Ye!=="No Product"&&Ft(Ye);let _t=we.length>0?vr(we[0].end_date):new Date;we.forEach(Yr=>{const lr=vr(Yr.end_date);lr>_t&&(_t=lr)});const Kt=Tt(_t,1),pr=Tt(Kt,14);ce(Yr=>({...Yr,startDate:rr(Kt),endDate:rr(pr)})),ir(!0),ne(!1),B(!0)},children:a.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:fr===ve||qn===ve?`radial-gradient(circle at center, ${Ue.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(fr===ve||qn===ve)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),a.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),a.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),a.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),a.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),a.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),a.jsx(sc,{className:"absolute top-6 left-12",size:8,style:{color:Ue.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),a.jsx(sc,{className:"absolute top-9 right-12",size:6,style:{color:Ue.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),a.jsx(sc,{className:"absolute bottom-9 left-6",size:7,style:{color:Ue.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),a.jsx(sc,{className:"absolute bottom-5 right-12",size:5,style:{color:Ue.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx(sc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:Ue.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),a.jsx(sc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:Ue.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),a.jsx(nc,{className:"absolute top-2 left-6",size:6,style:{color:Ue.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),a.jsx(nc,{className:"absolute top-11 right-6",size:5,style:{color:Ue.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),a.jsx(nc,{className:"absolute bottom-10 left-10",size:7,style:{color:Ue.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),a.jsx(nc,{className:"absolute bottom-2 right-8",size:6,style:{color:Ue.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),a.jsx(nc,{className:"absolute top-1/2 left-2",size:5,style:{color:Ue.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),a.jsx(nc,{className:"absolute top-1/2 right-2",size:6,style:{color:Ue.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ue.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:fr===ve||qn===ve?1:0,transformOrigin:"center center",animation:fr===ve||qn===ve?"growFromCenter 0.3s ease-out forwards":"none"},children:[a.jsx($n,{className:"h-8 w-8",style:{color:Ue.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Ue.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),mt>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>ki(ve),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ut?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",mt,")",a.jsx(ts,{className:"h-4 w-4"})]})})})]})},ve)}),(qe.length>0||fe.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...qe,...fe].map(ve=>{const we=Re(ve),ut=we.icon,Mt=Kn(ve),mt=we.text==="Closed",It=Rn(ve,L),bt=ve.product_id?le[ve.product_id]:void 0,Ue=Ln(It,bt),Vt=qe.includes(ve);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Ue.border,borderWidth:"1px",opacity:mt&&as!==ve.id?.75:1},onMouseEnter:()=>hr(ve.id),onMouseLeave:()=>hr(null),onClick:()=>Y(ve),children:[Vt&&(O||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:zt=>{zt.stopPropagation();const ct=ve.product_id,z=Rn(ve,L);ct&&je(ct),z&&z!=="No Product"&&Ft(z);const xe=vr(ve.end_date),We=Tt(xe,1),Ye=Tt(We,14);ce(_t=>({..._t,startDate:rr(We),endDate:rr(Ye)})),ir(!0),ne(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Ue.background||"#C89212",color:Ue.text||"#FFFFFF"},onMouseEnter:zt=>{const ct=Ue.background||"#C89212";zt.currentTarget.style.backgroundColor=ct,zt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:zt=>{zt.currentTarget.style.backgroundColor=Ue.background||"#C89212",zt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${It}`,children:a.jsx($n,{className:"h-5 w-5"})})}),fs(ve,It,Ue,we,ut,Mt,mt,!0,ve.product_id)]},ve.id)}),ks.length===2&&qe.length+fe.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:a.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:a.jsxs("button",{onClick:()=>{ne(!0),B(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx($n,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(es,{isOpen:se,onClose:ze,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:Si,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!Ne&&!$t?nn&&Z?a.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const te=me.find(qe=>qe.id===Z),fe=(te==null?void 0:te.name)||L[Z]||"Unknown Product",ge=(te==null?void 0:te.color_hex)||le[Z],$e=Ln(fe,ge);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:$e.background||"#2D4660",borderColor:$e.border||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:fe})]})})()}):a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(jT,{label:"",products:me,value:Z,onChange:async te=>{if(je(te),te){be("");try{const fe=y.filter(ge=>ge.product_id===te);if(fe.length>0){let ge=vr(fe[0].end_date);fe.forEach(ve=>{const we=vr(ve.end_date);we>ge&&(ge=we)});const $e=Tt(ge,1),qe=Tt($e,14);ce(ve=>({...ve,startDate:rr($e),endDate:rr(qe)}))}else{const ge=new Date,$e=Tt(ge,14);ce(qe=>({...qe,startDate:rr(ge),endDate:rr($e)}))}}catch(fe){console.error("Error calculating dates for selected product:",fe);const ge=new Date,$e=Tt(ge,14);ce(qe=>({...qe,startDate:rr(ge),endDate:rr($e)}))}}I.product&&H(fe=>{const ge={...fe};return delete ge.product,ge})},isLoading:qt,error:Q,disabled:qt||me.length===0,placeholder:"Select a product",helperText:!qt&&me.length===0&&!Q&&re?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:re,onRequestDeleteProduct:re?(te=>{Ke(te)}):void 0,className:"w-full"})}),re&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>pe(!0),disabled:qt,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx($n,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):$t?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{yr(null),be($t.name),K($t.color),pe(!0),Ve(!0),St(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:$t.color||"#2D4660",borderColor:$t.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:$t.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):re&&Ne?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:F,onChange:te=>{be(te.target.value),te.target.value.trim()&&!ke&&setTimeout(()=>Ve(!0),200),Q&&de(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),ke&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{Bt(Ge||"#2D4660"),Kr(!0),setTimeout(()=>{var te;(te=document.getElementById("native-color-input"))==null||te.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Ge?{backgroundColor:Ge}:{backgroundColor:"#ffffff"},children:!Ge&&a.jsx("img",{src:bT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,I.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),I.product]}),Q&&(Ne||!!$t)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),Q]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:rn,type:"text",name:"title",value:ae.title,onChange:sn,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.title?"border-red-500":"border-gray-300"}`}),I.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),I.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:ae.goal,onChange:sn,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.goal?"border-red-500":"border-gray-300"}`}),I.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),I.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:ae.useAutoVotes,onChange:te=>ce(fe=>({...fe,useAutoVotes:te.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!ae.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:ae.votesPerUser,onChange:sn,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.votesPerUser?"border-red-500":"border-gray-300"}`}),I.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),I.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:ae.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:ae.startDate,onChange:sn,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:ae.endDate,onChange:sn,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.endDate?"border-red-500":"border-gray-300"}`}),I.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),I.endDate]})]})]})]}),I.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-2"}),I.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(dt,{type:"button",variant:"secondary",onClick:ze,disabled:Fe,children:"Cancel"}),a.jsx(dt,{type:"submit",variant:Ne&&F.trim()&&Ge?"gold":"primary",disabled:Fe,className:`transition-all duration-500 ease-in-out ${Ne&&F.trim()&&Ge?"relative overflow-hidden":""}`,children:Fe?"Creating...":Ne&&F.trim()&&Ge?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx($n,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),nr&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Kr(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:te=>te.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:dr,onChange:te=>Bt(te.target.value),ref:te=>{te&&nr&&setTimeout(()=>te.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{K(dr),Kr(!1),setTimeout(()=>{var te;(te=rn.current)==null||te.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:dr,height:"260px",minWidth:"100px"},children:[a.jsx(Tr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),P==="stakeholder"&&y.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Qn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&ua.length>0&&ks.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Qn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&ks.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),P==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Mn,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(CT,{currentRole:O&&P==="system-admin"?"system-admin":P==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>$("stakeholder"),onSelectSessionAdmin:()=>$("admin"),onSelectSystemAdmin:O?()=>$("system-admin"):void 0,showRoleToggle:Ct||O}),He&&a.jsxs(es,{isOpen:!0,onClose:()=>Ke(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:He.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(dt,{variant:"secondary",onClick:()=>Ke(null),disabled:Pt,children:"Cancel"}),a.jsx(dt,{variant:"danger",onClick:Ls,disabled:Pt,children:Pt?"Deleting":"Delete"})]})]}),or&&a.jsx(es,{isOpen:!0,onClose:()=>{En(null),hn(""),Rr(null),br(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Ht,onChange:te=>hn(te.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Gr(mr||"#2D4660"),br(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:mr?{backgroundColor:mr}:{backgroundColor:"#ffffff"},children:!mr&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:mr||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(dt,{variant:"secondary",onClick:()=>{En(null),hn(""),Rr(null),br(!1)},disabled:Nr,children:"Cancel"}),a.jsx(dt,{variant:"primary",onClick:async()=>{if(!(!(or!=null&&or.id)||!Ht.trim())){An(!0);try{await fx(or.id,{name:Ht.trim(),color_hex:mr});const te=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(te){const fe=await ba(te);q(fe.sort((qe,ve)=>qe.name.localeCompare(ve.name)));const ge={},$e={};fe.forEach(qe=>{ge[qe.id]=qe.name||"",qe.color_hex&&($e[qe.id]=qe.color_hex)}),U(ge),ee($e)}En(null),hn(""),Rr(null),br(!1),await r(),await Wt()}catch(te){console.error("Error updating product:",te),alert("Failed to update product. Please try again.")}finally{An(!1)}}},disabled:Nr||!Ht.trim(),children:Nr?"Updating...":"Update Product"})]})]})}),Ss&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>br(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:te=>te.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:Vn,onChange:te=>Gr(te.target.value),ref:te=>{te&&Ss&&setTimeout(()=>te.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{Rr(Vn),br(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Vn,height:"260px",minWidth:"100px"},children:[a.jsx(Tr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function zZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=oa(),s=Ms(),i=async()=>{try{await Ce.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[b,j]=v.useState([]),[S,_]=v.useState(""),[E,C]=v.useState(""),[O,T]=v.useState(!1),[P,$]=v.useState(!1),[G,M]=v.useState(null);v.useEffect(()=>{(async()=>{var re;if(!e){j([]),_("");return}const B=e.tenant_id??e.tenantId??null;if(!B){j([]),_(""),M("No tenant assigned. Products cannot be loaded.");return}T(!0),M(null);try{const ne=await ba(B);j(ne),_(((re=ne[0])==null?void 0:re.id)??"")}catch(ne){console.error("Error loading products for create session:",ne),Ca!=null&&Ca(ne)?M("Products are not configured yet. Please create the `products` table in Supabase."):M("Unable to load products. You can still create a session without a product tag."),j([]),_("")}finally{T(!1)}})()},[e]);const V=()=>{const se="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let B="";for(let re=0;re<8;re++)B+=se.charAt(Math.floor(Math.random()*se.length));return B},L=()=>{const se={};l.title.trim()||(se.title="Session title is required"),l.goal.trim()||(se.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(se.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(se.votesPerUser="Votes per user cannot exceed 100"));const B=new Date(l.startDate);return new Date(l.endDate)<=B&&(se.endDate="End date must be after start date"),!G&&b.length>0&&!S&&(se.product="Please select a product for this session"),m(se),Object.keys(se).length===0},U=async se=>{if(se.preventDefault(),!(!L()||!e)){p(!0);try{const B=V(),re=b.find(ae=>ae.id===S)||null;if(re!=null&&re.id&&await GC(re.id)){m({submit:`There is already an active session for ${re.name}. Each product can only have one active session at a time.`}),p(!1);return}const ne=await YC({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:B,product_id:(re==null?void 0:re.id)??null,product_name:null});await yc(ne.id,e.id),await r(),x(!0),setTimeout(()=>{t(ne),s("/admin")},3e3)}catch(B){console.error("Error creating session:",B),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},le=async()=>{if(!e)return;const se=e.tenant_id??e.tenantId??null;if(!se){M("Cannot create products because no tenant is associated with your account.");return}const B=E.trim();if(!B){M("Product name is required.");return}$(!0),M(null);try{const re=await qC(se,B);j(ne=>[...ne,re].sort((ce,I)=>ce.name.localeCompare(I.name))),_(re.id),C("")}catch(re){console.error("Error creating product:",re),M(re instanceof Error?re.message:"Unable to create product. Please try again.")}finally{$(!1)}},ee=se=>{const{name:B,value:re}=se.target;u(ne=>({...ne,[B]:B==="votesPerUser"?parseInt(re)||0:re})),d[B]&&m(ne=>{const ae={...ne};return delete ae[B],ae})};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Tr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),a.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"})]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:U,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),a.jsx("input",{type:"text",name:"title",value:l.title,onChange:ee,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),d.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:l.goal,onChange:ee,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),d.goal]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),O?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):b.length>0?a.jsxs("select",{value:S,onChange:se=>{_(se.target.value),d.product&&m(B=>{const re={...B};return delete re.product,re})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a product"}),b.map(se=>a.jsx("option",{value:se.id,children:se.name},se.id))]}):a.jsx("p",{className:"text-sm text-gray-500",children:G??"No products found. Add a product below to associate this session."}),d.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),d.product]}),G&&b.length>0&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:G}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:se=>{C(se.target.value),G&&M(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:le,disabled:P,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Adding...":"Add Product"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Qn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:se=>u(B=>({...B,useAutoVotes:se.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:ee,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Qr,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),a.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:ee,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Qr,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),a.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:ee,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),a.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),a.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-2"}),d.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function UZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Ln(d.name,d.color_hex??null):null;return a.jsxs("div",{ref:u,className:"relative",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Ln(f.name,f.color_hex??null),y=t===f.id;return a.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&a.jsx(Tr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function BZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=oa(),s=Ms(),i=async()=>{try{await Ce.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[b,j]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null),[T,P]=v.useState([]),[$,G]=v.useState(""),[M,V]=v.useState([]),[L,U]=v.useState([]),[le,ee]=v.useState({});v.useEffect(()=>{if(!E)return;const ie=me=>{O.current&&!O.current.contains(me.target)&&C(!1)};return document.addEventListener("mousedown",ie),document.addEventListener("touchstart",ie,{passive:!0}),()=>{document.removeEventListener("mousedown",ie),document.removeEventListener("touchstart",ie)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}re(),se()},[e,s]);const se=async()=>{try{const ie=await dx(),me=await wo(),q=new Date,Z=ie.filter(F=>me.some(be=>be.product_id!==F.id?!1:new Date(be.end_date)>=q));P(Z);const je={};Z.forEach(F=>{je[F.id]=F.name}),ee(je)}catch(ie){console.error("Error loading products:",ie)}},B=async ie=>{try{const me=await wo(),q=new Date,Z=me.filter(je=>je.product_id!==ie?!1:new Date(je.end_date)>=q);V(Z)}catch(me){console.error("Error loading sessions:",me),V([])}};v.useEffect(()=>{$?(B($),U([])):(V([]),U([]))},[$]);const re=async()=>{if(e){m(!0);try{const ie=await yR(e.id);u(ie)}catch(ie){console.error("Error loading stakeholders:",ie)}finally{m(!1)}}},ne=ie=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie),ae=ie=>{const me=new Date,q=new Date(ie.start_date),Z=new Date(ie.end_date);return ie.is_active&&me>=q&&me<=Z?{text:"Active",color:"text-green-600"}:me<q?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},ce=ie=>{const me=new Date(ie.start_date),q=new Date(ie.end_date),Z=me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),je=q.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Z} - ${je}`},I=async ie=>{ie.preventDefault();const me={};if(y.name.trim()||(me.name="Name is required"),y.email.trim()?ne(y.email)||(me.email="Invalid email address"):me.email="Email is required",$||(me.product="Please select a product"),L.length===0&&(me.sessions="Please select at least one session"),j(me),!(Object.keys(me).length>0)){_(!0);try{for(const q of L)await QC({session_id:q,user_name:y.name,user_email:y.email,has_voted:!1});for(const q of L){const Z=M.find(je=>je.id===q);if(Z)try{const je=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",F=`${window.location.origin}${je}/login?session=${Z.session_code}`;await Sm({to:y.email,subject:`You're invited to vote: ${Z.title}`,text:`Hi,

You've been invited to vote in "${Z.title}".

Open: ${F}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${Z.title}</strong>.</p><p><a href="${F}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const je=ZC(Z,y.email,(t==null?void 0:t.name)||"");window.location.href=je}catch{}}}await re(),x({name:"",email:""}),G(""),U([]),p(!1),j({})}catch(q){console.error("Error adding stakeholder:",q),j({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},H=async ie=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Kv(e.id,ie),await re()}catch(me){console.error("Error removing stakeholder:",me),alert("Failed to remove stakeholder")}},Fe=ie=>{const q=ie.split("T")[0].split(" ")[0].split("-");let Z;if(q.length===3){const je=parseInt(q[0],10),F=parseInt(q[1],10)-1,be=parseInt(q[2],10);Z=new Date(je,F,be);const Ge=ie.match(/T(\d{2}):(\d{2}):(\d{2})/);Ge&&Z.setHours(parseInt(Ge[1],10),parseInt(Ge[2],10),parseInt(Ge[3],10))}else Z=new Date(ie);return Z.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(sl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(sl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(gs,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[a.jsx(sl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(ie=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:ie.user_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Lc,{className:"h-4 w-4 mr-2"}),ie.user_email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ie.has_voted?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Voted"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(km,{className:"h-3 w-3 mr-1"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Fe(ie.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>H(ie.user_email),className:"text-red-600 hover:text-red-900",children:a.jsx(zi,{className:"h-5 w-5"})})})]},ie.id))})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),a.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),G(""),U([]),j({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:ie=>x(me=>({...me,name:ie.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),b.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),b.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:y.email,onChange:ie=>x(me=>({...me,email:ie.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),b.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),b.email]})]}),a.jsxs("div",{children:[a.jsx(UZ,{products:T,value:$,onChange:G,label:"Product *",error:!!b.product}),b.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),b.product]})]}),$&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),M.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:M.map(ie=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:L.includes(ie.id),onChange:me=>{me.target.checked?U(q=>[...q,ie.id]):U(q=>q.filter(Z=>Z!==ie.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ie.title}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:ce(ie)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${ae(ie).color}`,children:ae(ie).text})})]})]},ie.id))}),b.sessions&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),b.sessions]})]}),b.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-2"}),b.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),G(""),U([]),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function WZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=oa(),s=Ms(),i=async()=>{try{await Ce.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[b,j]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null);v.useEffect(()=>{if(!E)return;const V=L=>{O.current&&!O.current.contains(L.target)&&C(!1)};return document.addEventListener("mousedown",V),document.addEventListener("touchstart",V,{passive:!0}),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("touchstart",V)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}T()},[e,s]);const T=async()=>{if(e){m(!0);try{const V=await XC(e.id);u(V)}catch(V){console.error("Error loading admins:",V)}finally{m(!1)}}},P=V=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V),$=async V=>{V.preventDefault();const L={};if(y.email.trim()?P(y.email)||(L.email="Invalid email address"):L.email="Email is required",l.some(U=>U.user.email.toLowerCase()===y.email.toLowerCase())&&(L.email="This user is already an admin"),j(L),!(Object.keys(L).length>0)&&e){_(!0);try{const U=y.email.split("@")[0].replace(/\./g," ");await gR(e.id,y.email,U);try{const le=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${le}/login?session=${e.session_code}`;await Sm({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${ee}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${ee}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const le=ZC(e,y.email,(t==null?void 0:t.name)||"");window.location.href=le}catch{}}await T(),x({email:""}),p(!1)}catch(U){console.error("Error adding admin:",U),j({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},G=async V=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(V===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await nh(e.id,V),await T()}catch(L){console.error("Error removing admin:",L),alert("Failed to remove admin")}}},M=V=>{const U=V.split("T")[0].split(" ")[0].split("-");let le;if(U.length===3){const ee=parseInt(U[0],10),se=parseInt(U[1],10)-1,B=parseInt(U[2],10);le=new Date(ee,se,B);const re=V.match(/T(\d{2}):(\d{2}):(\d{2})/);re&&le.setHours(parseInt(re[1],10),parseInt(re[2],10),parseInt(re[3],10))}else le=new Date(V);return le.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(sl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(sl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mn,{className:"h-5 w-5 text-blue-500 mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[V.user.name,V.user.id===(t==null?void 0:t.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Lc,{className:"h-4 w-4 mr-2"}),V.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M(V.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>G(V.user_id),className:`text-red-600 hover:text-red-900 ${V.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:V.user.id===(t==null?void 0:t.id)||l.length===1,title:V.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:a.jsx(zi,{className:"h-5 w-5"})})})]},V.id))})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Mn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Manage features and voting settings for this session"}),a.jsx("li",{children:"Add and remove stakeholders for this session"}),a.jsx("li",{children:"View voting results and analytics for this session"}),a.jsx("li",{children:"Add and remove other session admins"})]}),a.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),a.jsx("button",{onClick:()=>{p(!1),x({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:$,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:y.email,onChange:V=>x(L=>({...L,email:V.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),b.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),b.email]})]}),b.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-2"}),b.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function qZ(){const{currentUser:e,sessions:t}=oa(),r=Ms(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await XC(x.id)).forEach(j=>{j.user&&j.user.email&&y.add(j.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),b=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=b,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(cF,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(Tr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx($S,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(Lc,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx($S,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function VZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=oa(),n=Ms(),s=async()=>{try{await Ce.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,b]=v.useState({}),[j,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(null);v.useEffect(()=>{if(!_)return;const M=V=>{C.current&&!C.current.contains(V.target)&&E(!1)};return document.addEventListener("mousedown",M),document.addEventListener("touchstart",M,{passive:!0}),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("touchstart",M)}},[_]),v.useEffect(()=>{O()},[]);const O=async()=>{d(!0);try{let M=await Gv();M.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await xh(e.id),M=await Gv()),l(M)}catch(M){console.error("Error loading system admins:",M)}finally{d(!1)}},T=M=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M),P=async M=>{M.preventDefault();const V={};if(p.email.trim()?T(p.email)||(V.email="Invalid email address"):V.email="Email is required",i.some(L=>L.user.email.toLowerCase()===p.email.toLowerCase())&&(V.email="This user is already a system admin"),b(V),!(Object.keys(V).length>0)){S(!0);try{const L=p.email.split("@")[0].replace(/\./g," "),U=await Zo(p.email,L);await xh(U.id);try{const le=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${le}/login`;await Sm({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${ee}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${ee}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const le=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${le}/login`,se=encodeURIComponent("You're a System Admin: Feature Voting System"),B=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${ee}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${se}&body=${B}`}catch{}}await O(),y({email:""}),f(!1)}catch(L){console.error("Error adding system admin:",L),b({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},$=async M=>{const V=i.reduce((L,U)=>new Date(U.created_at)<new Date(L.created_at)?U:L);if(M===V.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(M===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await sh(M),await O()}catch(L){console.error("Error removing system admin:",L),alert("Failed to remove system admin")}},G=M=>{const L=M.split("T")[0].split(" ")[0].split("-");let U;if(L.length===3){const le=parseInt(L[0],10),ee=parseInt(L[1],10)-1,se=parseInt(L[2],10);U=new Date(le,ee,se);const B=M.match(/T(\d{2}):(\d{2}):(\d{2})/);B&&U.setHours(parseInt(B[1],10),parseInt(B[2],10),parseInt(B[3],10))}else U=new Date(M);return U.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"})]}),a.jsxs("div",{ref:C,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(sl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(sl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const M=i.reduce((V,L)=>new Date(L.created_at)<new Date(V.created_at)?L:V);return i.map(V=>{const L=V.user_id===M.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[V.user.name,V.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),L&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Lc,{className:"h-4 w-4 mr-2"}),V.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(V.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>$(V.user_id),className:`text-red-600 hover:text-red-900 ${V.user.id===(e==null?void 0:e.id)||i.length===1||L?"opacity-50 cursor-not-allowed":""}`,disabled:V.user.id===(e==null?void 0:e.id)||i.length===1||L,title:L?"Cannot remove the original system admin":V.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(zi,{className:"h-5 w-5"})})})]},V.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(vs,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),y({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:M=>y(V=>({...V,email:M.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(er,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add System Admin"})]})]})]})})]})}async function HZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:i},error:l}=await Ce.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!i)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=i.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=i.user)==null?void 0:n.identities)==null?void 0:s.some(j=>j.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=i.provider_token||i.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,y=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!y.ok){const j=await y.text();let S="";throw y.status===401?(S="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",j)):y.status===403?(S='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",j)):y.status===400?(S="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",j)):(S=`Unable to search users (${y.status}). Please try again.`,console.error("Azure AD search error:",y.status,j)),new Error(S)}return((await y.json()).value||[]).map(j=>({id:j.id,displayName:j.displayName||"",mail:j.mail||j.userPrincipalName||"",userPrincipalName:j.userPrincipalName||"",givenName:j.givenName,surname:j.surname,jobTitle:j.jobTitle,department:j.department})).sort((j,S)=>{const _=j.displayName.toLowerCase(),E=S.displayName.toLowerCase();return _.localeCompare(E)})}catch(i){throw console.error("Error searching Azure AD users:",i),i}}const Ru=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function hh({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Ln(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=Ln(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(Tr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function KZ({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(hh,{products:e,value:r,onChange:y=>{n(y),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function GZ(){var kl,Po;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=oa(),s=Ms(),[i]=ix(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[b,j]=v.useState("all"),[S,_]=v.useState(!1),[E,C]=v.useState(null),[O,T]=v.useState(null),[P,$]=v.useState(null),[G,M]=v.useState(null),V=N=>{const X=new Date,Pe=N.filter(Oe=>{const Ae=Oe.start_date?new Date(Oe.start_date):null,Be=Oe.end_date?new Date(Oe.end_date):null;return Ae&&X<Ae||Be&&X>Be?!1:!!(Ae&&X>=Ae&&(!Be||X<=Be))});return Pe.length===0?null:Pe.sort((Oe,Ae)=>{const Be=Oe.start_date?new Date(Oe.start_date).getTime():0;return(Ae.start_date?new Date(Ae.start_date).getTime():0)-Be})[0]},L=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),U=v.useRef(null),le=v.useRef({}),ee=v.useRef(null),se=v.useRef(!1),[B,re]=v.useState(!1),[ne,ae]=v.useState(!1),[ce,I]=v.useState([]),[H,Fe]=v.useState("system-admin"),[ie,me]=v.useState(!0),[q,Z]=v.useState(!1),[je,F]=v.useState(null),[be,Ge]=v.useState(null),[K,He]=v.useState([]),[Ke,Pt]=v.useState({adminSessions:[],stakeholderSessions:[]}),[vt,qt]=v.useState(""),[Rt,ar]=v.useState(!0),[D,Q]=v.useState([]),[de,Ne]=v.useState(!1),[pe,ke]=v.useState(null),[Ve,ht]=v.useState(!1),[St,$t]=v.useState(null),[yr,nr]=v.useState(new Set),[Kr,dr]=v.useState(new Map),[Bt,rn]=v.useState(!1),[sr,Cn]=v.useState(!1),[nt,Ft]=v.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[fr,Lt]=v.useState(Ru()),[nn,ir]=v.useState(!0),[qn,is]=v.useState(null),[Dr,Lr]=v.useState({sessionAdmin:!1,stakeholder:!1}),[as,hr]=v.useState("User Management"),[or,En]=v.useState([]),[Ht,hn]=v.useState(""),[mr,Rr]=v.useState([]),[Nr,An]=v.useState(""),[Ss,br]=v.useState([]),[Vn,Gr]=v.useState(!1),[vr,rr]=v.useState(null),[Tt,Br]=v.useState(!0),[Wr,Hn]=v.useState(!0),sn=!!Nr&&(Wr||nt.sessionAdminIds.length>0),Ls=!!Ht&&(Tt||nt.stakeholderSessionIds.length>0),Si=((kl=or.find(N=>N.id===Nr))==null?void 0:kl.name)||"",Wt=((Po=or.find(N=>N.id===Ht))==null?void 0:Po.name)||"",Kn=N=>{const X=N.map(Oe=>K.find(Ae=>Ae.id===Oe)).filter(Oe=>!!Oe);return X.length===0?"":X.map(Oe=>Oe.title||"Unnamed Session").join(", ")},Y=sn?`${Si||"Selected Product"}  ${Wr?"All Sessions":Kn(nt.sessionAdminIds)||"Sessions selected"}`:"",Se=Ls?`${Wt||"Selected Product"}  ${Tt?"All Sessions":Kn(nt.stakeholderSessionIds)||"Sessions selected"}`:"",Te=(()=>{const N=[];return nt.isSystemAdmin&&N.push("System Admin"),sn&&N.push("Session Admin"),Ls&&N.push("Stakeholder"),N})(),Re=N=>{if(Te.length===0)return N?"Creating User...":"Create User";const X=Te.join(" & ");return N?`Adding ${X}...`:`Add ${X}`},[Qe,Ee]=v.useState(!1),[wt,kt]=v.useState(null),[jt,ze]=v.useState(""),[Jt,xr]=v.useState(""),[Cr,Ct]=v.useState(!1),Gn=async N=>{N&&(N.preventDefault(),N.stopPropagation());try{await Ce.auth.signOut()}catch(X){console.error("Error signing out:",X)}try{r(null)}catch(X){console.error("Error clearing session:",X)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(X){console.error("Error clearing storage:",X)}_(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const N=X=>{U.current&&!U.current.contains(X.target)&&_(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[S]),v.useEffect(()=>{if(!E)return;const N=X=>{const Pe=le.current[E];Pe&&!Pe.contains(X.target)&&C(null)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[E]);const si=v.useCallback(async()=>{try{const N=await dx(),X=new Date,Pe=N.filter(Oe=>K.some(Ae=>Ae.product_id!==Oe.id?!1:new Date(Ae.end_date)>=X));En(Pe)}catch(N){console.error("Error loading products:",N)}},[K]),ks=()=>{An(""),br([]),Ft(N=>({...N,sessionAdminIds:[]})),Hn(!0),Lr(N=>({...N,sessionAdmin:!1}))},ua=()=>{hn(""),Ft(N=>({...N,stakeholderSessionIds:[]})),Br(!0),Lr(N=>({...N,stakeholder:!1}))},ii=N=>{if(!N){Rr([]);return}const X=new Date,Pe=K.filter(Oe=>Oe.product_id!==N?!1:new Date(Oe.end_date)>=X);Rr(Pe)};v.useEffect(()=>{Ht?ii(Ht):Rr([])},[Ht,K]);const ki=N=>{if(!N){br([]);return}const X=new Date,Pe=K.filter(Oe=>Oe.product_id!==N?!1:new Date(Oe.end_date)>=X);br(Pe)};v.useEffect(()=>{Nr?ki(Nr):br([])},[Nr,K]),v.useEffect(()=>{const N=i.get("filter");N==="session-admin"?(hr("Session Admin Management"),j("session-admin")):N==="stakeholder"?(hr("Stakeholder Management"),j("stakeholder")):hr("User Management")},[i]);const mn=async N=>{p(!0);try{const[X,Pe,Oe]=await Promise.all([Yj(),Ce.from("session_admins").select("user_id, session_id, created_at").then(({data:Et,error:qr})=>qr?(console.error("Error fetching all admin relations:",qr),[]):Et||[]),Ce.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:Et,error:qr})=>qr?(console.error("Error fetching all stakeholder relations:",qr),[]):Et||[])]),Ae=new Map;Pe.forEach(Et=>{Ae.has(Et.user_id)||Ae.set(Et.user_id,[]),Ae.get(Et.user_id).push({session_id:Et.session_id,created_at:Et.created_at})});const Be=new Map;Oe.forEach(Et=>{var _i;const qr=((_i=Et.user_email)==null?void 0:_i.toLowerCase())||"";qr&&(Be.has(qr)||Be.set(qr,[]),Be.get(qr).push({session_id:Et.session_id,created_at:Et.created_at}))});const _e=new Map(N.map(Et=>[Et.id,Et])),it=await Promise.all(X.map(async Et=>{const qr=await uR(Et.id),_i=[],Rd=[];(Ae.get(Et.id)||[]).forEach(Vi=>{const Ka=_e.get(Vi.session_id);Ka&&_i.push({...Ka,assignedAt:Vi.created_at,assignedBy:"System",assignedByName:"System"})});const Xc=Et.email.toLowerCase();return(Be.get(Xc)||[]).forEach(Vi=>{const Ka=_e.get(Vi.session_id);Ka&&Rd.push({...Ka,assignedAt:Vi.created_at,assignedBy:"System",assignedByName:"System"})}),{...Et,roles:qr,adminInSessions:_i,stakeholderInSessions:Rd}}));u(it);const tt=new Map;it.forEach(Et=>{const qr=Et.email.toLowerCase().trim();tt.has(qr)||tt.set(qr,[]),tt.get(qr).push(Et.id)});const Xt=new Map;tt.forEach((Et,qr)=>{Et.length>1&&Xt.set(qr,Et)}),dr(Xt)}catch(X){console.error("Error loading users:",X)}finally{p(!1)}},fs=async()=>{if(e){me(!0);try{const N=await wo(),[X,Pe]=await Promise.all([vl(e.id),Ce.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:Ae,error:Be})=>Be?(console.error("Error fetching admin sessions:",Be),[]):(Ae||[]).map(_e=>_e.session_id))]);re(X);const Oe=Pe;if(X)He(N),await Promise.all([te(),mn(N)]);else{const Ae=Oe.length>0;if(ae(Ae),I(Oe),!Ae){s("/sessions");return}const Be=N.filter(_e=>Oe.includes(_e.id));He(Be),Fe("session-admin"),await mn(Be)}}catch(N){console.error("Error checking access:",N),s("/sessions")}finally{me(!1)}}},te=async()=>{try{const N=["chris.rodes@newmill.com","spencer.faull@newmill.com"],X=new Set,Pe=await Gv();if(Pe.length>0){const Ae=Pe.reduce((Be,_e)=>new Date(_e.created_at)<new Date(Be.created_at)?_e:Be);$t(Ae.user_id),X.add(Ae.user_id)}(await Yj()).forEach(Ae=>{N.includes(Ae.email.toLowerCase())&&X.add(Ae.id)}),nr(X)}catch(N){console.error("Error loading protected accounts:",N)}},fe=N=>{if(N.id===St)return"Original Admin";const X=N.email.toLowerCase();return X==="chris.rodes@newmill.com"?"Manager":X==="spencer.faull@newmill.com"?"Portfolio Owner":null},ge=N=>{const X=N.email.toLowerCase().trim(),Pe=Kr.get(X);return Pe?Pe.length>1:!1},$e=N=>{const X=N.email.toLowerCase().trim(),Pe=Kr.get(X);return Pe?Pe.length:1},qe=()=>{let N=[...l];if(H==="session-admin"&&K.length>0){const X=new Set(K.map(Pe=>Pe.id));N=N.filter(Pe=>{var Be,_e;if(Pe.id===(e==null?void 0:e.id))return!0;const Oe=(Be=Pe.adminInSessions)==null?void 0:Be.some(it=>it&&X.has(it.id)),Ae=(_e=Pe.stakeholderInSessions)==null?void 0:_e.some(it=>it&&X.has(it.id));return!!Oe||!!Ae})}if(y.trim()){const X=y.toLowerCase();N=N.filter(Pe=>Pe.name.toLowerCase().includes(X)||Pe.email.toLowerCase().includes(X))}b!=="all"&&(N=N.filter(X=>{switch(b){case"system-admin":return X.roles.isSystemAdmin;case"session-admin":return X.roles.sessionAdminCount>0&&!X.roles.isSystemAdmin;case"stakeholder":return X.roles.stakeholderSessionCount>0&&X.roles.sessionAdminCount===0&&!X.roles.isSystemAdmin;case"none":return!X.roles.isSystemAdmin&&X.roles.sessionAdminCount===0&&X.roles.stakeholderSessionCount===0;default:return!0}})),m(N)};v.useEffect(()=>{if(!e){s("/login");return}if(!se.current)return se.current=!0,fs(),()=>{}},[e]),v.useEffect(()=>{const N=i.get("filter");N&&["system-admin","session-admin","stakeholder","none"].includes(N)&&j(N)},[i]),v.useEffect(()=>{H==="session-admin"?(b==="system-admin"||b==="session-admin"||b==="all")&&j("stakeholder"):H==="system-admin"&&j("all")},[H]);const ve=v.useCallback(()=>{qe()},[l,y,b,H,K,e]);v.useEffect(()=>{ve()},[ve]),v.useEffect(()=>{function N(X){ee.current&&!ee.current.contains(X.target)&&Lt(Pe=>({...Pe,showResults:!1}))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const we=async N=>{try{const X=[],Pe=[];for(const Oe of K)await vm(N,Oe.id)&&X.push(Oe.id),await vR(N,Oe.id)&&Pe.push(Oe.id);Pt({adminSessions:X,stakeholderSessions:Pe})}catch(X){console.error("Error loading user session memberships:",X)}},ut=async(N,X)=>{Ge(N),F(X),qt(""),ar(!0),Q([]),Z(!0),C(null),or.length===0&&await si(),await we(N.id)},Mt=()=>{Z(!1),F(null),Ge(null),qt(""),ar(!0),Q([]),Pt({adminSessions:[],stakeholderSessions:[]})},mt=(N,X)=>{if(!X)return[];const Pe=new Date;return N.filter(Oe=>Oe.product_id!==X?!1:new Date(Oe.end_date)>=Pe)},It=async()=>{if(!be||!je)return;if(!vt){alert("Please select a product first.");return}let N=[];if(Rt)N=mt(Jc(je),vt).map(Pe=>Pe.id);else{if(D.length===0){alert("Please select at least one session.");return}N=D}if(N.length===0){alert("No sessions available for this product.");return}try{for(const X of N)je==="session-admin"?await yc(X,be.id):je==="stakeholder"?await Jj(X,be.email,be.name):je==="remove-stakeholder"&&await Kv(X,be.email);Mt(),await mn(K)}catch(X){console.error("Error modifying user session role:",X);const Pe=(X==null?void 0:X.message)||(X==null?void 0:X.toString())||"Unknown error";console.error("Full error details:",X),alert(`Failed to ${je==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${Pe}

Please check the console for more details.`)}},bt=async(N,X)=>{if(C(null),!!confirm(`Are you sure you want to ${X?"remove":"grant"} system admin access for this user?`))try{X?await sh(N):await xh(N),await mn(K)}catch(Pe){console.error("Error toggling system admin:",Pe),alert("Failed to update system admin status. Please try again.")}},Ue=async(N,X)=>{C(null);const Pe=H==="session-admin"?`Are you sure you want to remove ${X} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${X}? This will remove them from all sessions and revoke system admin access.`;if(confirm(Pe))try{if(H==="system-admin"&&await sh(N),H==="session-admin"){for(const Oe of ce)try{await nh(Oe,N)}catch(Ae){console.error(`Error removing session admin from ${Oe}:`,Ae)}for(const Oe of ce)try{await Hg(Oe,N)}catch(Ae){console.error(`Error removing stakeholder from ${Oe}:`,Ae)}}else for(const Oe of K)try{await nh(Oe.id,N),await Hg(Oe.id,N)}catch{}await mn(K)}catch(Oe){console.error("Error removing roles:",Oe),alert("Failed to remove roles. Please try again.")}},Vt=async(N,X)=>{const Pe=l.find(Oe=>Oe.id===N);if(Pe){if(H==="session-admin"){if(Pe.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const Oe=`Are you sure you want to remove ${X} as a stakeholder from all sessions you manage?`;if(!confirm(Oe))return;try{let Ae=0;for(const Be of K)try{await Kv(Be.id,Pe.email),Ae++}catch(_e){console.error(`Error removing stakeholder from session ${Be.id}:`,_e)}await mn(K),Ae>0?alert(`${X} has been removed as a stakeholder from ${Ae} session(s) you manage.`):alert(`${X} was not a stakeholder in any of the sessions you manage.`)}catch(Ae){console.error("Error removing stakeholder:",Ae),alert("Failed to remove stakeholder. Please try again.")}return}ke(Pe),Ne(!0)}},zt=async()=>{if(pe){if(yr.has(pe.id)){const N=fe(pe);alert(`Cannot delete this protected account${N?` (${N})`:""}. This protects against accidentally locking important users out of the system.`),Ne(!1),ke(null);return}ht(!0);try{for(const X of K)try{await nh(X.id,pe.id),await Hg(X.id,pe.id)}catch{}if(pe.roles.isSystemAdmin)try{await sh(pe.id)}catch(X){console.error("Error removing system admin role:",X)}const{error:N}=await Ce.from("users").delete().eq("id",pe.id);if(N)throw N;await mn(K),Ne(!1),ke(null)}catch(N){console.error("Error deleting user:",N),alert("Failed to delete user. Please try again.")}finally{ht(!1)}}},ct=()=>{Ne(!1),ke(null)},z=async()=>{if(!wt)return;if(!jt.trim()){alert("Name is required");return}if(!Jt.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Jt.trim())){alert("Please enter a valid email address");return}Ct(!0);try{const{error:X}=await Ce.from("users").update({name:jt.trim(),email:Jt.trim().toLowerCase()}).eq("id",wt.id);if(X)throw X;u(Pe=>Pe.map(Oe=>Oe.id===wt.id?{...Oe,name:jt.trim(),email:Jt.trim().toLowerCase()}:Oe)),Ee(!1),kt(null),ze(""),xr("")}catch(X){console.error("Error updating user:",X),alert("Failed to update user. Please try again.")}finally{Ct(!1)}},xe=()=>{_(!1),rn(!0),Ft({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Lt(Ru()),hn(""),Rr([]),An(""),br([]),si(),ir(!0)},We=()=>{rn(!1),Ft({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Lt(Ru()),hn(""),Rr([]),An(""),br([]),Br(!0),Hn(!0),Lr({sessionAdmin:!1,stakeholder:!1}),ir(!0)};v.useEffect(()=>{(async()=>{var Pe,Oe,Ae,Be;try{const{data:{session:_e}}=await Ce.auth.getSession();if(_e){const it=((Oe=(Pe=_e.user)==null?void 0:Pe.app_metadata)==null?void 0:Oe.provider)==="azure"||((Be=(Ae=_e.user)==null?void 0:Ae.identities)==null?void 0:Be.some(tt=>tt.provider==="azure"));is(it||!1)}else is(!1)}catch(_e){console.error("Error checking Azure sign-in status:",_e),is(!1)}})();const{data:{subscription:X}}=Ce.auth.onAuthStateChange((Pe,Oe)=>{var Ae,Be,_e,it;if(Oe){const tt=((Be=(Ae=Oe.user)==null?void 0:Ae.app_metadata)==null?void 0:Be.provider)==="azure"||((it=(_e=Oe.user)==null?void 0:_e.identities)==null?void 0:it.some(Xt=>Xt.provider==="azure"));is(tt||!1)}else is(!1)});return()=>{X.unsubscribe()}},[]);const Ye=async()=>{try{const N=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:X}=await Ce.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${N}/users`,scopes:"email openid profile User.ReadBasic.All"}});X&&(console.error("Azure sign-in error:",X),Lt(Pe=>({...Pe,error:"Failed to sign in with Microsoft. Please try again."})))}catch(N){console.error("Azure sign-in error:",N),Lt(X=>({...X,error:"Failed to sign in with Microsoft. Please try again."}))}},_t=async N=>{if(Lt(X=>({...X,searchTerm:N,isSearching:!0,showResults:!1,error:""})),!N||N.trim().length<2){Lt(X=>({...X,results:[],isSearching:!1,error:""}));return}try{const X=await HZ(N);Lt(Pe=>({...Pe,results:X,isSearching:!1,showResults:X.length>0,error:""}))}catch(X){console.error("Error searching Azure AD users:",X);const Pe=(X==null?void 0:X.message)||"Failed to search company users. Please try again.";Lt(Oe=>({...Oe,results:[],isSearching:!1,showResults:!1,error:Pe}))}},Kt=N=>{let X="";if(N.givenName&&N.surname)X=`${N.givenName} ${N.surname}`;else if(N.displayName){const Pe=N.displayName.trim();if(Pe.includes(",")){const Oe=Pe.split(",").map(Ae=>Ae.trim());Oe.length===2?X=`${Oe[1]} ${Oe[0]}`:X=Pe}else X=Pe}else X=N.mail||N.userPrincipalName||"";Ft({...nt,name:X,email:N.mail||N.userPrincipalName}),Lt(Ru()),ir(!1)},pr=async()=>{if(!nt.name.trim()||!nt.email.trim()){alert("Please fill in all required fields (Name, Email)");return}Cn(!0);try{const{data:N,error:X}=await Ce.from("users").insert({name:nt.name.trim(),email:nt.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(X)throw X;if(!N)throw new Error("User creation failed");const Pe=N.id;if(H==="system-admin"&&nt.isSystemAdmin&&await xh(Pe),H==="system-admin"&&Dr.sessionAdmin&&Nr)if(Wr)for(const Be of Ss)try{await yc(Be.id,Pe)}catch(_e){console.error(`Error adding session admin role to session ${Be.id}:`,_e)}else for(const Be of nt.sessionAdminIds)try{await yc(Be,Pe)}catch(_e){console.error("Error adding session admin role:",_e)}console.log("Adding stakeholder to sessions:",nt.stakeholderSessionIds),console.log("View mode:",H),console.log("User admin sessions:",ce),console.log("All sessions:",K.map(Be=>({id:Be.id,title:Be.title})));let Oe=[];if(H==="session-admin"?Ht&&Tt?Oe=mr.map(Be=>Be.id):Ht&&!Tt&&(Oe=nt.stakeholderSessionIds):H==="system-admin"&&Dr.stakeholder&&Ht&&(Tt?Oe=mr.map(Be=>Be.id):Oe=nt.stakeholderSessionIds),Oe.length===0)console.log("No stakeholder sessions to add");else{for(const Be of Oe){if(H==="session-admin"&&!K.some(it=>it.id===Be)){console.warn(`Skipping session ${Be} - not in managed sessions`);continue}try{console.log(`Adding ${nt.email} as stakeholder to session ${Be}`);const _e=await Jj(Be,nt.email,nt.name);console.log(`Successfully added stakeholder to session ${Be}:`,_e)}catch(_e){console.error(`Error adding stakeholder role to session ${Be}:`,_e);const it=(_e==null?void 0:_e.message)||(_e==null?void 0:_e.toString())||"Unknown error";alert(`Warning: Failed to add ${nt.email} to session ${Be}.

Error: ${it}`)}}console.log("Finished adding stakeholder roles")}let Ae="User";nt.isSystemAdmin?Ae="System Admin":Dr.sessionAdmin&&Nr&&(Wr||nt.sessionAdminIds.length>0)?Ae="Session Admin":(H==="session-admin"&&Ht&&(Tt||nt.stakeholderSessionIds.length>0)||H==="system-admin"&&Dr.stakeholder&&Ht&&(Tt||nt.stakeholderSessionIds.length>0))&&(Ae="Stakeholder"),We(),await mn(K),rr({email:nt.email,userType:Ae}),Gr(!0)}catch(N){console.error("Error creating user:",N),alert(`Failed to create user: ${N.message||"Unknown error"}`)}finally{Cn(!1)}},Pn=N=>{Ft(X=>({...X,sessionAdminIds:X.sessionAdminIds.includes(N)?X.sessionAdminIds.filter(Pe=>Pe!==N):[...X.sessionAdminIds,N]}))},Yr=N=>{Ft(X=>({...X,stakeholderSessionIds:X.stakeholderSessionIds.includes(N)?X.stakeholderSessionIds.filter(Pe=>Pe!==N):[...X.stakeholderSessionIds,N]}))},lr=N=>{const Pe=N.split("T")[0].split(" ")[0].split("-");if(Pe.length!==3)return new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const Oe=parseInt(Pe[0],10),Ae=parseInt(Pe[1],10)-1,Be=parseInt(Pe[2],10);return new Date(Oe,Ae,Be).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},hs=N=>{const X=new Date,Pe=new Date(N.start_date),Oe=new Date(N.end_date);return N.is_active&&X>=Pe&&X<=Oe?{text:"Active",color:"text-green-600"}:X<Pe?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},pn=N=>{const X=new Date(N.start_date),Pe=new Date(N.end_date),Oe=X.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ae=Pe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Oe} - ${Ae}`},Ao=N=>N.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(vs,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):N.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Mn,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",N.roles.sessionAdminCount,")"]}):N.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(gs,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",N.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Jc=N=>N?N==="session-admin"?K.filter(X=>!Ke.adminSessions.includes(X.id)):N==="remove-stakeholder"?K.filter(X=>Ke.stakeholderSessions.includes(X.id)&&(H==="system-admin"||ce.includes(X.id))):K.filter(X=>!Ke.stakeholderSessions.includes(X.id)):[],Sl=(N,X)=>X?X==="session-admin"?N.roles.sessionAdminCount<K.length:N.roles.stakeholderSessionCount<K.length:!1;return ie||f?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:ie?"Checking access...":"Loading users..."})]})}):B?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ri,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:ca,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),a.jsx("button",{onClick:()=>{n!=null&&n.id?s("/admin"):s("/sessions")},className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer flex-shrink-0",children:a.jsx(Fc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:as})]}),a.jsxs("div",{ref:U,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(B||ne)&&a.jsxs("button",{onClick:xe,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(ns,{className:"h-4 w-4 mr-2"}),H==="session-admin"?"Add Stakeholder":"Add User"]}),(B||ne)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(jn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),Gn(N)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>_(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(B||ne)&&a.jsxs("button",{onClick:()=>{_(!1),xe()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:H==="session-admin"?"Add Stakeholder":"Add User"})]}),(B||ne)&&n&&a.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Mn,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(jn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),_(!1),Gn(N)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(FS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&a.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("select",{value:b==="system-admin"&&H==="session-admin"?"session-admin":b,onChange:N=>j(N.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[H!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),H!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),H!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."}):d.map(N=>{var X,Pe;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("h3",{className:"text-base font-semibold text-gray-900 truncate",children:[N.name,N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),fe(N)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",fe(N),")"]}),ge(N)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",$e(N),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:N.email})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:Oe=>{le.current[N.id]=Oe},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${N.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(MS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const Oe=le.current[N.id];if(!Oe)return{};const Ae=Oe.getBoundingClientRect();return window.innerWidth<768?{top:`${Ae.bottom+4}px`,right:`${window.innerWidth-Ae.right+4}px`,left:"auto"}:{}})(),children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),H==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>bt(N.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>bt(N.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Sl(N,"session-admin")&&a.jsxs("button",{onClick:()=>ut(N,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Mn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Sl(N,"stakeholder")&&a.jsxs("button",{onClick:()=>ut(N,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),H==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(Oe=>ce.includes(Oe.id))&&a.jsxs("button",{onClick:()=>ut(N,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(_u,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>Ue(N.id,N.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(_u,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(H==="system-admin"||H==="session-admin"&&N.roles.stakeholderSessionCount>0&&((X=N.stakeholderInSessions)==null?void 0:X.some(Oe=>K.some(Ae=>Ae.id===Oe.id)))&&!L.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),H==="system-admin"&&a.jsxs("button",{onClick:()=>{kt(N),ze(N.name),xr(N.email),Ee(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Hu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(H==="system-admin"||H==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Pe=N.stakeholderInSessions)==null?void 0:Pe.some(Oe=>K.some(Ae=>Ae.id===Oe.id))))&&!L.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),Vt(N.id,N.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||H==="system-admin"&&yr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||H==="system-admin"&&yr.has(N.id),children:[a.jsx(zi,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:H==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:H==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":yr.has(N.id)?`Cannot delete protected account${fe(N)?` (${fe(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:Ao(N)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[N.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(LS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[N.roles.sessionAdminCount," as Session Admin"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Ae=V(N.adminInSessions)||N.adminInSessions[0],Be=N.adminInSessions.length>1,_e=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Ae&&a.jsxs("button",{onClick:async it=>{it.stopPropagation(),await r(Ae),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Ae.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(Ae)})]}),Be&&a.jsxs("button",{onClick:it=>{it.stopPropagation(),$(_e?null:{userId:N.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:_e?a.jsx(Lu,{className:"h-2.5 w-2.5"}):a.jsx($n,{className:"h-2.5 w-2.5"})}),_e?"Hide":"Show"]}),_e&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.adminInSessions.filter(it=>it.id!==(Ae==null?void 0:Ae.id)).map(it=>a.jsxs("button",{onClick:async tt=>{tt.stopPropagation(),await r(it),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:it.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(it)})]},it.id))})]})})()})]}),N.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[N.roles.stakeholderSessionCount," as Stakeholder"]})]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Ae=V(N.stakeholderInSessions)||N.stakeholderInSessions[0],Be=N.stakeholderInSessions.length>1,_e=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Ae&&a.jsxs("button",{onClick:async it=>{it.stopPropagation(),await r(Ae),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Ae.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(Ae)})]}),Be&&a.jsxs("button",{onClick:it=>{it.stopPropagation(),$(_e?null:{userId:N.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:_e?a.jsx(Lu,{className:"h-2.5 w-2.5"}):a.jsx($n,{className:"h-2.5 w-2.5"})}),_e?"Hide":"Show"]}),_e&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.stakeholderInSessions.filter(it=>it.id!==(Ae==null?void 0:Ae.id)).map(it=>a.jsxs("button",{onClick:async tt=>{tt.stopPropagation(),await r(it),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:it.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(it)})]},it.id))})]})})()})]}),N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const Ae=V(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const Be=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Ae&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Ae.assignedAt?lr(Ae.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Ae.assignedByName||"System"]})]}),Be&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.adminInSessions.filter(_e=>_e.id!==(Ae==null?void 0:Ae.id)).map(_e=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:_e.assignedAt?lr(_e.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",_e.assignedByName||"System"]})]},_e.id))})]})})()}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const Ae=V(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const Be=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Ae&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Ae.assignedAt?lr(Ae.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Ae.assignedByName||"System"]})]}),Be&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.stakeholderInSessions.filter(_e=>_e.id!==(Ae==null?void 0:Ae.id)).map(_e=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:_e.assignedAt?lr(_e.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",_e.assignedByName||"System"]})]},_e.id))})]})})()})})]})]})]})]},N.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."})}):d.map(N=>{var X,Pe,Oe,Ae;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>T(N.id),onMouseLeave:()=>T(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.name,N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),fe(N)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",fe(N),")"]}),ge(N)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",$e(N),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:Ao(N)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Xt;const Be=((Xt=N.adminInSessions)==null?void 0:Xt.length)||0,_e=Be>1,it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin",tt=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(LS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",Be," session",Be!==1?"s":""]}),_e&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[it?a.jsx(Lu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx($n,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:it?"Hide":"Show"})]})]});return _e?a.jsx("button",{onClick:Et=>{Et.stopPropagation(),$(it?null:{userId:N.id,role:"admin"})},className:"text-left",children:a.jsx(tt,{})}):a.jsx(tt,{})})()}),(()=>{const _e=V(N.adminInSessions)||N.adminInSessions[0],it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[_e&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>M(`${N.id}-${_e.id}`),onMouseLeave:()=>M(null),onClick:async tt=>{tt.stopPropagation(),await r(_e),s("/admin")},children:[G===`${N.id}-${_e.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:_e.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:pn(_e)})]})]}),it&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(tt=>tt.id!==(_e==null?void 0:_e.id)).map((tt,Xt)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>M(`${N.id}-${tt.id}`),onMouseLeave:()=>M(null),onClick:async Et=>{Et.stopPropagation(),await r(tt),s("/admin")},children:[G===`${N.id}-${tt.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:tt.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:pn(tt)})]})]},tt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Xt;const Be=((Xt=N.stakeholderInSessions)==null?void 0:Xt.length)||0,_e=Be>1,it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder",tt=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",Be," session",Be!==1?"s":""]}),_e&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[it?a.jsx(Lu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx($n,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:it?"Hide":"Show"})]})]});return _e?a.jsx("button",{onClick:Et=>{Et.stopPropagation(),$(it?null:{userId:N.id,role:"stakeholder"})},className:"text-left",children:a.jsx(tt,{})}):a.jsx(tt,{})})()}),(()=>{const _e=V(N.stakeholderInSessions)||N.stakeholderInSessions[0],it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[_e&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>M(`${N.id}-${_e.id}`),onMouseLeave:()=>M(null),onClick:async tt=>{tt.stopPropagation(),await r(_e),s("/admin")},children:[G===`${N.id}-${_e.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:_e.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:pn(_e)})]})]}),it&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(tt=>tt.id!==(_e==null?void 0:_e.id)).map((tt,Xt)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>M(`${N.id}-${tt.id}`),onMouseLeave:()=>M(null),onClick:async Et=>{Et.stopPropagation(),await r(tt),s("/admin")},children:[G===`${N.id}-${tt.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:tt.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:pn(tt)})]})]},tt.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(Qr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Qr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),(()=>{const _e=V(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[_e&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>M(`${N.id}-${_e.id}`),onMouseLeave:()=>M(null),onClick:async tt=>{tt.stopPropagation(),await r(_e),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:_e.assignedAt?lr(_e.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",_e.assignedByName||"System"]})]})}),it&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(tt=>tt.id!==(_e==null?void 0:_e.id)).map((tt,Xt)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>M(`${N.id}-${tt.id}`),onMouseLeave:()=>M(null),onClick:async Et=>{Et.stopPropagation(),await r(tt),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:tt.assignedAt?lr(tt.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",tt.assignedByName||"System"]})]})},tt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!N.adminInSessions||N.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Qr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(gs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const _e=V(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const it=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[_e&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>M(`${N.id}-${_e.id}`),onMouseLeave:()=>M(null),onClick:async tt=>{tt.stopPropagation(),await r(_e),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:_e.assignedAt?lr(_e.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",_e.assignedByName||"System"]})]})}),it&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(tt=>tt.id!==(_e==null?void 0:_e.id)).map((tt,Xt)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>M(`${N.id}-${tt.id}`),onMouseLeave:()=>M(null),onClick:async Et=>{Et.stopPropagation(),await r(tt),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Qr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:tt.assignedAt?lr(tt.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",tt.assignedByName||"System"]})]})},tt.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${O===N.id?N.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:Be=>{le.current[N.id]=Be},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(MS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((X=le.current[N.id])==null?void 0:X.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((Pe=le.current[N.id])==null?void 0:Pe.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),H==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>bt(N.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>bt(N.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Sl(N,"session-admin")&&a.jsxs("button",{onClick:()=>ut(N,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Mn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Sl(N,"stakeholder")&&a.jsxs("button",{onClick:()=>ut(N,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),H==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(Be=>ce.includes(Be.id))&&a.jsxs("button",{onClick:()=>ut(N,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(_u,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>Ue(N.id,N.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(_u,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(H==="system-admin"||H==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Oe=N.stakeholderInSessions)==null?void 0:Oe.some(Be=>K.some(_e=>_e.id===Be.id)))&&!L.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),H==="system-admin"&&a.jsxs("button",{onClick:()=>{kt(N),ze(N.name),xr(N.email),Ee(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Hu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(H==="system-admin"||H==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Ae=N.stakeholderInSessions)==null?void 0:Ae.some(Be=>K.some(_e=>_e.id===Be.id))))&&!L.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),Vt(N.id,N.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||H==="system-admin"&&yr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||H==="system-admin"&&yr.has(N.id),children:[a.jsx(zi,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:H==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:H==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":yr.has(N.id)?`Cannot delete protected account${fe(N)?` (${fe(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},N.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ns,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mn,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})}),(B||ne)&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(ne||B)&&Fe("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${H==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Mn,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{B&&Fe("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${H==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!B,title:B?"System Admin View":"Only available for System Admins",children:[a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),q&&be&&je&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Mt,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:je==="session-admin"?"Add Session Admin":je==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:je==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:be.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:be.name})," as ",je==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:Mt,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx(KZ,{products:or,sessions:Jc(je),selectedProductId:vt,onProductChange:N=>{qt(N),Q([]),ar(!0)},useAllSessions:Rt,onToggleAllSessions:N=>{ar(N),N&&Q([])},selectedSessionIds:D,onSessionToggle:N=>{D.includes(N)?Q(D.filter(X=>X!==N)):Q([...D,N])},getSessionStatus:hs,formatSessionDateRange:pn,filterSessions:mt})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:It,disabled:!vt||!Rt&&D.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${vt&&(Rt||D.length>0)?je==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const X=(Rt?mt(Jc(je),vt||"").length:D.length)>1;return je==="remove-stakeholder"?`Remove from Session${X?"s":""}`:je==="session-admin"?`Add to Session${X?"s":""} as Session Admin`:`Add to Session${X?"s":""} as a Stakeholder`})()})})]})})}),de&&pe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(_u,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:pe.name}),a.jsx("div",{className:"text-sm text-gray-500",children:pe.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),pe.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),pe.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",pe.roles.sessionAdminCount," session",pe.roles.sessionAdminCount!==1?"s":""]})]}),pe.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",pe.roles.stakeholderSessionCount," session",pe.roles.stakeholderSessionCount!==1?"s":""]})]}),!pe.roles.isSystemAdmin&&pe.roles.sessionAdminCount===0&&pe.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),pe.adminInSessions&&pe.adminInSessions.length>0||pe.stakeholderInSessions&&pe.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[pe.adminInSessions&&pe.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Mn,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",pe.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:pe.adminInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]}),pe.stakeholderInSessions&&pe.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(gs,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",pe.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:pe.stakeholderInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:ct,disabled:Ve,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:zt,disabled:Ve,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Ve?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),Bt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:We,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(ns,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:H==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:H==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:We,disabled:sr,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[nn?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),qn===!1?a.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),a.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),a.jsxs("button",{type:"button",onClick:Ye,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[a.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:ee,children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(FS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:fr.searchTerm,onChange:N=>{const X=N.target.value;Lt(Pe=>({...Pe,searchTerm:X})),_t(X)},onFocus:()=>{fr.results.length>0&&Lt(N=>({...N,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),fr.isSearching&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),fr.showResults&&fr.results.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:fr.results.map(N=>a.jsxs("button",{type:"button",onClick:()=>Kt(N),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.displayName}),a.jsx("div",{className:"text-sm text-gray-500",children:N.mail||N.userPrincipalName}),N.jobTitle&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:N.jobTitle})]},N.id))}),fr.error&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[a.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),a.jsx("div",{className:"mb-2",children:fr.error}),fr.error.includes("User.ReadBasic.All")&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[a.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),a.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),a.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),a.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),a.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),fr.searchTerm.length>=2&&!fr.isSearching&&fr.results.length===0&&!fr.error&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):a.jsx("div",{children:a.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{ir(!0),Lt(Ru())},children:"Search Company Users again"})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:nt.name,onChange:N=>Ft({...nt,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:nt.email,onChange:N=>Ft({...nt,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),H==="system-admin"&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:a.jsx(vs,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:nt.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:nt.isSystemAdmin,onChange:N=>Ft({...nt,isSystemAdmin:N.target.checked}),className:"sr-only"}),a.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:nt.isSystemAdmin?"#C89212":"#ffffff"},children:nt.isSystemAdmin&&a.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),H==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>Lr(N=>({sessionAdmin:!N.sessionAdmin,stakeholder:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:sn?"scale(1.2)":"scale(1)"},children:a.jsx(Mn,{className:"h-4 w-4 text-[#576C71]"})}),a.jsx("span",{children:"Session Admin"}),sn&&Y&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Y})]}),sn&&a.jsx("button",{type:"button",onClick:ks,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),a.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${Dr.sessionAdmin?"rotate-180":""}`})]}),Dr.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(hh,{products:or,value:Nr,onChange:N=>{An(N),Ft(X=>({...X,sessionAdminIds:[]})),Hn(!0)},label:"Product *"})}),Nr&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>Hn(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Wr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Hn(!0),Ft(N=>({...N,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Wr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Wr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Wr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Ss.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Ss.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:nt.sessionAdminIds.includes(N.id),onChange:()=>Pn(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${hs(N).color}`,children:hs(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(N)})]})]},N.id))})]})]})]})]}),H==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),nt.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:nt.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(hh,{products:or,value:Ht,onChange:N=>{hn(N),Ft(X=>({...X,stakeholderSessionIds:[]})),Br(!0)},label:"Product *"})}),Ht&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{Br(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Br(!0),Ft(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Tt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Tt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),mr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:mr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:nt.stakeholderSessionIds.includes(N.id),onChange:()=>Yr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(N)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${hs(N).color}`,children:hs(N).text})})]})]},N.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>Lr(N=>({stakeholder:!N.stakeholder,sessionAdmin:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:Ls?"scale(1.2)":"scale(1)"},children:a.jsx(gs,{className:"h-4 w-4 text-[#8B5A4A]"})}),a.jsx("span",{children:"Stakeholder"}),Ls&&Se&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Se})]}),Ls&&a.jsx("button",{type:"button",onClick:ua,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),a.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${Dr.stakeholder?"rotate-180":""}`})]}),Dr.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(hh,{products:or,value:Ht,onChange:N=>{hn(N),Ft(X=>({...X,stakeholderSessionIds:[]})),Br(!0)},label:"Product *"})}),Ht&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{Br(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Br(!0),Ft(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Tt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Tt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),mr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:mr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:nt.stakeholderSessionIds.includes(N.id),onChange:()=>Yr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${hs(N).color}`,children:hs(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pn(N)})]})]},N.id))})]})]})]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:pr,disabled:!!(sr||!nt.name.trim()||!nt.email.trim()||H==="session-admin"&&(!Ht||!Tt&&nt.stakeholderSessionIds.length===0)||H==="system-admin"&&Dr.sessionAdmin&&Nr&&!Wr&&nt.sessionAdminIds.length===0||H==="system-admin"&&Dr.stakeholder&&Ht&&!Tt&&nt.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:sr?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Re(!0)]}):Re(!1)})})]})})}),Qe&&wt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Hu,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{Ee(!1),kt(null),ze(""),xr("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:jt,onChange:N=>ze(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Cr})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Jt,onChange:N=>xr(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Cr})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{Ee(!1),kt(null),ze(""),xr("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:Cr,children:"Cancel"}),a.jsx("button",{onClick:z,disabled:Cr||!jt.trim()||!Jt.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Cr?"Updating...":"Update User"})]})]})})}),Vn&&vr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Tr,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[vr.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{Gr(!1),rr(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ds,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:vr.email})]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Fu,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),a.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{Gr(!1),rr(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const YZ="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",JZ=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:YZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function XZ(){return a.jsx(OM,{children:a.jsxs($R,{children:[a.jsx(JZ,{}),a.jsx(E5,{basename:"/feature-voting-app",children:a.jsxs(s5,{children:[a.jsx(Ws,{path:"/",element:a.jsx(r5,{to:"/login",replace:!0})}),a.jsx(Ws,{path:"/login",element:a.jsx(MZ,{})}),a.jsx(Ws,{path:"/sessions",element:a.jsx(LZ,{})}),a.jsx(Ws,{path:"/create-session",element:a.jsx(zZ,{})}),a.jsx(Ws,{path:"/manage-stakeholders",element:a.jsx(BZ,{})}),a.jsx(Ws,{path:"/manage-admins",element:a.jsx(WZ,{})}),a.jsx(Ws,{path:"/vote",element:a.jsx(Tv,{adminMode:!1})}),a.jsx(Ws,{path:"/admin",element:a.jsx(Tv,{adminMode:!0})}),a.jsx(Ws,{path:"/results",element:a.jsx(Tv,{resultsMode:!0})}),a.jsx(Ws,{path:"/unauthorized",element:a.jsx(qZ,{})}),a.jsx(Ws,{path:"/system-admins",element:a.jsx(VZ,{})}),a.jsx(Ws,{path:"/users",element:a.jsx(GZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}hD.createRoot(document.getElementById("root")).render(a.jsx(lt.StrictMode,{children:a.jsx(XZ,{})}));
