var sD=Object.defineProperty;var iD=(e,t,r)=>t in e?sD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $g=(e,t,r)=>iD(e,typeof t!="symbol"?t+"":t,r);function aD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Mg={exports:{}},Tu={},Fg={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yj;function lD(){if(yj)return At;yj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=p&&D[p]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function S(D,q,Te){this.props=D,this.context=q,this.refs=b,this.updater=Te||x}S.prototype.isReactComponent={},S.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function _(){}_.prototype=S.prototype;function E(D,q,Te){this.props=D,this.context=q,this.refs=b,this.updater=Te||x}var C=E.prototype=new _;C.constructor=E,j(C,S.prototype),C.isPureReactComponent=!0;var T=Array.isArray,I=Object.prototype.hasOwnProperty,P={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function J(D,q,Te){var be,Ee={},le=null,fe=null;if(q!=null)for(be in q.ref!==void 0&&(fe=q.ref),q.key!==void 0&&(le=""+q.key),q)I.call(q,be)&&!z.hasOwnProperty(be)&&(Ee[be]=q[be]);var Q=arguments.length-2;if(Q===1)Ee.children=Te;else if(1<Q){for(var R=Array(Q),ye=0;ye<Q;ye++)R[ye]=arguments[ye+2];Ee.children=R}if(D&&D.defaultProps)for(be in Q=D.defaultProps,Q)Ee[be]===void 0&&(Ee[be]=Q[be]);return{$$typeof:e,type:D,key:le,ref:fe,props:Ee,_owner:P.current}}function H(D,q){return{$$typeof:e,type:D.type,key:q,ref:D.ref,props:D.props,_owner:D._owner}}function pe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Z(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Te){return q[Te]})}var K=/\/+/g;function ce(D,q){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):q.toString(36)}function B(D,q,Te,be,Ee){var le=typeof D;(le==="undefined"||le==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(le){case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case e:case t:fe=!0}}if(fe)return fe=D,Ee=Ee(fe),D=be===""?"."+ce(fe,0):be,T(Ee)?(Te="",D!=null&&(Te=D.replace(K,"$&/")+"/"),B(Ee,q,Te,"",function(ye){return ye})):Ee!=null&&(pe(Ee)&&(Ee=H(Ee,Te+(!Ee.key||fe&&fe.key===Ee.key?"":(""+Ee.key).replace(K,"$&/")+"/")+D)),q.push(Ee)),1;if(fe=0,be=be===""?".":be+":",T(D))for(var Q=0;Q<D.length;Q++){le=D[Q];var R=be+ce(le,Q);fe+=B(le,q,Te,R,Ee)}else if(R=y(D),typeof R=="function")for(D=R.call(D),Q=0;!(le=D.next()).done;)le=le.value,R=be+ce(le,Q++),fe+=B(le,q,Te,R,Ee);else if(le==="object")throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return fe}function se(D,q,Te){if(D==null)return D;var be=[],Ee=0;return B(D,be,"","",function(le){return q.call(Te,le,Ee++)}),be}function W(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(Te){(D._status===0||D._status===-1)&&(D._status=1,D._result=Te)},function(Te){(D._status===0||D._status===-1)&&(D._status=2,D._result=Te)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var de={current:null},oe={transition:null},X={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:oe,ReactCurrentOwner:P};function ee(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:se,forEach:function(D,q,Te){se(D,function(){q.apply(this,arguments)},Te)},count:function(D){var q=0;return se(D,function(){q++}),q},toArray:function(D){return se(D,function(q){return q})||[]},only:function(D){if(!pe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},At.Component=S,At.Fragment=r,At.Profiler=s,At.PureComponent=E,At.StrictMode=n,At.Suspense=d,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,At.act=ee,At.cloneElement=function(D,q,Te){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var be=j({},D.props),Ee=D.key,le=D.ref,fe=D._owner;if(q!=null){if(q.ref!==void 0&&(le=q.ref,fe=P.current),q.key!==void 0&&(Ee=""+q.key),D.type&&D.type.defaultProps)var Q=D.type.defaultProps;for(R in q)I.call(q,R)&&!z.hasOwnProperty(R)&&(be[R]=q[R]===void 0&&Q!==void 0?Q[R]:q[R])}var R=arguments.length-2;if(R===1)be.children=Te;else if(1<R){Q=Array(R);for(var ye=0;ye<R;ye++)Q[ye]=arguments[ye+2];be.children=Q}return{$$typeof:e,type:D.type,key:Ee,ref:le,props:be,_owner:fe}},At.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:i,_context:D},D.Consumer=D},At.createElement=J,At.createFactory=function(D){var q=J.bind(null,D);return q.type=D,q},At.createRef=function(){return{current:null}},At.forwardRef=function(D){return{$$typeof:u,render:D}},At.isValidElement=pe,At.lazy=function(D){return{$$typeof:f,_payload:{_status:-1,_result:D},_init:W}},At.memo=function(D,q){return{$$typeof:m,type:D,compare:q===void 0?null:q}},At.startTransition=function(D){var q=oe.transition;oe.transition={};try{D()}finally{oe.transition=q}},At.unstable_act=ee,At.useCallback=function(D,q){return de.current.useCallback(D,q)},At.useContext=function(D){return de.current.useContext(D)},At.useDebugValue=function(){},At.useDeferredValue=function(D){return de.current.useDeferredValue(D)},At.useEffect=function(D,q){return de.current.useEffect(D,q)},At.useId=function(){return de.current.useId()},At.useImperativeHandle=function(D,q,Te){return de.current.useImperativeHandle(D,q,Te)},At.useInsertionEffect=function(D,q){return de.current.useInsertionEffect(D,q)},At.useLayoutEffect=function(D,q){return de.current.useLayoutEffect(D,q)},At.useMemo=function(D,q){return de.current.useMemo(D,q)},At.useReducer=function(D,q,Te){return de.current.useReducer(D,q,Te)},At.useRef=function(D){return de.current.useRef(D)},At.useState=function(D){return de.current.useState(D)},At.useSyncExternalStore=function(D,q,Te){return de.current.useSyncExternalStore(D,q,Te)},At.useTransition=function(){return de.current.useTransition()},At.version="18.3.1",At}var vj;function Vc(){return vj||(vj=1,Fg.exports=lD()),Fg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xj;function cD(){if(xj)return Tu;xj=1;var e=Vc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return Tu.Fragment=r,Tu.jsx=l,Tu.jsxs=l,Tu}var wj;function uD(){return wj||(wj=1,Mg.exports=cD()),Mg.exports}var a=uD(),v=Vc();const it=ea(v),dD=aD({__proto__:null,default:it},[v]);var Lf={},Lg={exports:{}},Rs={},zg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bj;function fD(){return bj||(bj=1,(function(e){function t(oe,X){var ee=oe.length;oe.push(X);e:for(;0<ee;){var D=ee-1>>>1,q=oe[D];if(0<s(q,X))oe[D]=X,oe[ee]=q,ee=D;else break e}}function r(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var X=oe[0],ee=oe.pop();if(ee!==X){oe[0]=ee;e:for(var D=0,q=oe.length,Te=q>>>1;D<Te;){var be=2*(D+1)-1,Ee=oe[be],le=be+1,fe=oe[le];if(0>s(Ee,ee))le<q&&0>s(fe,Ee)?(oe[D]=fe,oe[le]=ee,D=le):(oe[D]=Ee,oe[be]=ee,D=be);else if(le<q&&0>s(fe,ee))oe[D]=fe,oe[le]=ee,D=le;else break e}}return X}function s(oe,X){var ee=oe.sortIndex-X.sortIndex;return ee!==0?ee:oe.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,j=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(oe){for(var X=r(m);X!==null;){if(X.callback===null)n(m);else if(X.startTime<=oe)n(m),X.sortIndex=X.expirationTime,t(d,X);else break;X=r(m)}}function T(oe){if(b=!1,C(oe),!j)if(r(d)!==null)j=!0,W(I);else{var X=r(m);X!==null&&de(T,X.startTime-oe)}}function I(oe,X){j=!1,b&&(b=!1,_(J),J=-1),x=!0;var ee=y;try{for(C(X),p=r(d);p!==null&&(!(p.expirationTime>X)||oe&&!Z());){var D=p.callback;if(typeof D=="function"){p.callback=null,y=p.priorityLevel;var q=D(p.expirationTime<=X);X=e.unstable_now(),typeof q=="function"?p.callback=q:p===r(d)&&n(d),C(X)}else n(d);p=r(d)}if(p!==null)var Te=!0;else{var be=r(m);be!==null&&de(T,be.startTime-X),Te=!1}return Te}finally{p=null,y=ee,x=!1}}var P=!1,z=null,J=-1,H=5,pe=-1;function Z(){return!(e.unstable_now()-pe<H)}function K(){if(z!==null){var oe=e.unstable_now();pe=oe;var X=!0;try{X=z(!0,oe)}finally{X?ce():(P=!1,z=null)}}else P=!1}var ce;if(typeof E=="function")ce=function(){E(K)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,se=B.port2;B.port1.onmessage=K,ce=function(){se.postMessage(null)}}else ce=function(){S(K,0)};function W(oe){z=oe,P||(P=!0,ce())}function de(oe,X){J=S(function(){oe(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){j||x||(j=!0,W(I))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(oe){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var ee=y;y=X;try{return oe()}finally{y=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,X){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ee=y;y=oe;try{return X()}finally{y=ee}},e.unstable_scheduleCallback=function(oe,X,ee){var D=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?D+ee:D):ee=D,oe){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ee+q,oe={id:f++,callback:X,priorityLevel:oe,startTime:ee,expirationTime:q,sortIndex:-1},ee>D?(oe.sortIndex=ee,t(m,oe),r(d)===null&&oe===r(m)&&(b?(_(J),J=-1):b=!0,de(T,ee-D))):(oe.sortIndex=q,t(d,oe),j||x||(j=!0,W(I))),oe},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(oe){var X=y;return function(){var ee=y;y=X;try{return oe.apply(this,arguments)}finally{y=ee}}}})(Ug)),Ug}var jj;function hD(){return jj||(jj=1,zg.exports=fD()),zg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sj;function mD(){if(Sj)return Rs;Sj=1;var e=Vc(),t=hD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,h,g,w,k,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=O}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var w=S.hasOwnProperty(c)?S[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):w.mustUseProperty?o[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?o.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),oe=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=oe&&o[oe]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Object.assign,D;function q(o){if(D===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);D=c&&c[1]||""}return`
`+D+o}var Te=!1;function be(o,c){if(!o||Te)return"";Te=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var g=xe}Reflect.construct(o,[],c)}else{try{c.call()}catch(xe){g=xe}o.call(c.prototype)}else{try{throw Error()}catch(xe){g=xe}o()}}catch(xe){if(xe&&g&&typeof xe.stack=="string"){for(var w=xe.stack.split(`
`),k=g.stack.split(`
`),O=w.length-1,L=k.length-1;1<=O&&0<=L&&w[O]!==k[L];)L--;for(;1<=O&&0<=L;O--,L--)if(w[O]!==k[L]){if(O!==1||L!==1)do if(O--,L--,0>L||w[O]!==k[L]){var G=`
`+w[O].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=O&&0<=L);break}}}finally{Te=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?q(o):""}function Ee(o){switch(o.tag){case 5:return q(o.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return o=be(o.type,!1),o;case 11:return o=be(o.type.render,!1),o;case 1:return o=be(o.type,!0),o;default:return""}}function le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case z:return"Fragment";case P:return"Portal";case H:return"Profiler";case J:return"StrictMode";case ce:return"Suspense";case B:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Z:return(o.displayName||"Context")+".Consumer";case pe:return(o._context.displayName||"Context")+".Provider";case K:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case se:return c=o.displayName||null,c!==null?c:le(o.type)||"Memo";case W:c=o._payload,o=o._init;try{return le(o(c))}catch{}}return null}function fe(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(c);case 8:return c===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Q(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function R(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ye(o){var c=R(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,k=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(O){g=""+O,k.call(this,O)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Me(o){o._valueTracker||(o._valueTracker=ye(o))}function V(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=R(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Le(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ze(o,c){var h=c.checked;return ee({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function dt(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Q(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ft(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function $t(o,c){ft(o,c);var h=Q(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Qt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Qt(o,c.type,Q(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function _t(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Qt(o,c,h){(c!=="number"||Le(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var M=Array.isArray;function ie(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Q(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function ge(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ke(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(M(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Q(h)}}function ve(o,c){var h=Q(c.value),g=Q(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function je(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Be(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Be(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var bt,Tt=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,w)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=bt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function nr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nn=["Webkit","ms","Moz","O"];Object.keys(Mt).forEach(function(o){nn.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Mt[c]=Mt[o]})});function yr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Mt.hasOwnProperty(o)&&Mt[o]?(""+c).trim():c+"px"}function Ft(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=yr(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,w):o[h]=w}}var vn=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qt(o,c){if(c){if(vn[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function _r(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function It(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Zt=null,Yt=null,Br=null;function vr(o){if(o=yu(o)){if(typeof Zt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=Zd(c),Zt(o.stateNode,o.type,c))}}function Es(o){Yt?Br?Br.push(o):Br=[o]:Yt=o}function Rr(){if(Yt){var o=Yt,c=Br;if(Br=Yt=null,vr(o),c)for(o=0;o<c.length;o++)vr(c[o])}}function Wr(o,c){return o(c)}function xr(){}var xn=!1;function Cr(o,c,h){if(xn)return o(c,h);xn=!0;try{return Wr(o,c,h)}finally{xn=!1,(Yt!==null||Br!==null)&&(xr(),Rr())}}function Jt(o,c){var h=o.stateNode;if(h===null)return null;var g=Zd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var qr=!1;if(u)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){qr=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{qr=!1}function $r(o,c,h,g,w,k,O,L,G){var xe=Array.prototype.slice.call(arguments,3);try{c.apply(h,xe)}catch(Pe){this.onError(Pe)}}var lr=!1,dr=null,Er=!1,os=null,Jn={onError:function(o){lr=!0,dr=o}};function Vr(o,c,h,g,w,k,O,L,G){lr=!1,dr=null,$r.apply(Jn,arguments)}function As(o,c,h,g,w,k,O,L,G){if(Vr.apply(this,arguments),lr){if(lr){var xe=dr;lr=!1,dr=null}else throw Error(r(198));Er||(Er=!0,os=xe)}}function Mr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function qs(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function sn(o){if(Mr(o)!==o)throw Error(r(188))}function Dt(o){var c=o.alternate;if(!c){if(c=Mr(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var k=w.alternate;if(k===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===k.child){for(k=w.child;k;){if(k===h)return sn(w),o;if(k===g)return sn(w),c;k=k.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=k;else{for(var O=!1,L=w.child;L;){if(L===h){O=!0,h=w,g=k;break}if(L===g){O=!0,g=w,h=k;break}L=L.sibling}if(!O){for(L=k.child;L;){if(L===h){O=!0,h=k,g=w;break}if(L===g){O=!0,g=k,h=w;break}L=L.sibling}if(!O)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function an(o){return o=Dt(o),o!==null?fr(o):null}function fr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=fr(o);if(c!==null)return c;o=o.sibling}return null}var Hr=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,wn=t.unstable_shouldYield,hs=t.unstable_requestPaint,Ut=t.unstable_now,Xn=t.unstable_getCurrentPriorityLevel,ae=t.unstable_ImmediatePriority,Ne=t.unstable_UserBlockingPriority,Re=t.unstable_NormalPriority,$e=t.unstable_LowPriority,qe=t.unstable_IdlePriority,_e=null,ht=null;function pt(o){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(_e,o,void 0,(o.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:Ar,Oe=Math.log,cr=Math.LN2;function Ar(o){return o>>>=0,o===0?32:31-(Oe(o)/cr|0)|0}var Pr=64,Ct=4194304;function Rt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function sr(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,w=o.suspendedLanes,k=o.pingedLanes,O=h&268435455;if(O!==0){var L=O&~w;L!==0?g=Rt(L):(k&=O,k!==0&&(g=Rt(k)))}else O=h&~w,O!==0?g=Rt(O):k!==0&&(g=Rt(k));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,k=c&-c,w>=k||w===16&&(k&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-gt(c),w=1<<h,g|=o[h],c&=~w;return g}function Or(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,k=o.pendingLanes;0<k;){var O=31-gt(k),L=1<<O,G=w[O];G===-1?((L&h)===0||(L&g)!==0)&&(w[O]=Or(L,c)):G<=c&&(o.expiredLanes|=L),k&=~L}}function sa(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function uo(){var o=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),o}function Kr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ii(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-gt(c),o[c]=h}function ka(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var w=31-gt(h),k=1<<w;c[w]=0,g[w]=-1,o[w]=-1,h&=~k}}function bn(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-gt(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}var Et=0;function ln(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Na,Fr,Vs,jn,fi,Hs=!1,Di=[],Sn=null,ms=null,ps=null,Ri=new Map,Ks=new Map,gs=[],fo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ia(o,c){switch(o){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Ri.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(c.pointerId)}}function $i(o,c,h,g,w,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:k,targetContainers:[w]},c!==null&&(c=yu(c),c!==null&&Fr(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function re(o,c,h,g,w){switch(c){case"focusin":return Sn=$i(Sn,o,c,h,g,w),!0;case"dragenter":return ms=$i(ms,o,c,h,g,w),!0;case"mouseover":return ps=$i(ps,o,c,h,g,w),!0;case"pointerover":var k=w.pointerId;return Ri.set(k,$i(Ri.get(k)||null,o,c,h,g,w)),!0;case"gotpointercapture":return k=w.pointerId,Ks.set(k,$i(Ks.get(k)||null,o,c,h,g,w)),!0}return!1}function Ue(o){var c=Ko(o.target);if(c!==null){var h=Mr(c);if(h!==null){if(c=h.tag,c===13){if(c=qs(h),c!==null){o.blockedOn=c,fi(o.priority,function(){Vs(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function rt(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=N(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Ze=g,h.target.dispatchEvent(g),Ze=null}else return c=yu(h),c!==null&&Fr(c),o.blockedOn=h,!1;c.shift()}return!0}function Pt(o,c,h){rt(o)&&h.delete(c)}function Lr(){Hs=!1,Sn!==null&&rt(Sn)&&(Sn=null),ms!==null&&rt(ms)&&(ms=null),ps!==null&&rt(ps)&&(ps=null),Ri.forEach(Pt),Ks.forEach(Pt)}function ir(o,c){o.blockedOn===c&&(o.blockedOn=null,Hs||(Hs=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lr)))}function kn(o){function c(w){return ir(w,o)}if(0<Di.length){ir(Di[0],o);for(var h=1;h<Di.length;h++){var g=Di[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Sn!==null&&ir(Sn,o),ms!==null&&ir(ms,o),ps!==null&&ir(ps,o),Ri.forEach(c),Ks.forEach(c),h=0;h<gs.length;h++)g=gs[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<gs.length&&(h=gs[0],h.blockedOn===null);)Ue(h),h.blockedOn===null&&gs.shift()}var Gr=T.ReactCurrentBatchConfig,ys=!0;function _a(o,c,h,g){var w=Et,k=Gr.transition;Gr.transition=null;try{Et=1,Mi(o,c,h,g)}finally{Et=w,Gr.transition=k}}function Ca(o,c,h,g){var w=Et,k=Gr.transition;Gr.transition=null;try{Et=4,Mi(o,c,h,g)}finally{Et=w,Gr.transition=k}}function Mi(o,c,h,g){if(ys){var w=N(o,c,h,g);if(w===null)_p(o,c,g,hi,h),ia(o,g);else if(re(w,o,c,h,g))g.stopPropagation();else if(ia(o,g),c&4&&-1<fo.indexOf(o)){for(;w!==null;){var k=yu(w);if(k!==null&&Na(k),k=N(o,c,h,g),k===null&&_p(o,c,g,hi,h),k===w)break;w=k}w!==null&&g.stopPropagation()}else _p(o,c,g,null,h)}}var hi=null;function N(o,c,h,g){if(hi=null,o=It(g),o=Ko(o),o!==null)if(c=Mr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=qs(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return hi=o,null}function A(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xn()){case ae:return 1;case Ne:return 4;case Re:case $e:return 16;case qe:return 536870912;default:return 16}default:return 16}}var F=null,U=null,Y=null;function ue(){if(Y)return Y;var o,c=U,h=c.length,g,w="value"in F?F.value:F.textContent,k=w.length;for(o=0;o<h&&c[o]===w[o];o++);var O=h-o;for(g=1;g<=O&&c[h-g]===w[k-g];g++);return Y=w.slice(o,1<g?1-g:void 0)}function $(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ne(){return!0}function Ce(){return!1}function Ke(o){function c(h,g,w,k,O){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(h=o[L],this[L]=h?h(k):k[L]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ne:Ce,this.isPropagationStopped=Ce,this}return ee(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ne)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ne)},persist:function(){},isPersistent:ne}),c}var Ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},st=Ke(Ie),xt=ee({},Ie,{view:0,detail:0}),We=Ke(xt),wr,Lt,at,St=ee({},xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==at&&(at&&o.type==="mousemove"?(wr=o.screenX-at.screenX,Lt=o.screenY-at.screenY):Lt=wr=0,at=o),wr)},movementY:function(o){return"movementY"in o?o.movementY:Lt}}),Je=Ke(St),Ot=ee({},St,{dataTransfer:0}),kt=Ke(Ot),Xt=ee({},xt,{relatedTarget:0}),er=Ke(Xt),cn=ee({},Ie,{animationName:0,elapsedTime:0,pseudoElement:0}),vs=Ke(cn),$n=ee({},Ie,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),mi=Ke($n),mp=ee({},Ie,{data:0}),ob=Ke(mp),zT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=BT[o])?!!c[o]:!1}function pp(){return WT}var qT=ee({},xt,{key:function(o){if(o.key){var c=zT[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=$(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?UT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pp,charCode:function(o){return o.type==="keypress"?$(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),VT=Ke(qT),HT=ee({},St,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lb=Ke(HT),KT=ee({},xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pp}),GT=Ke(KT),YT=ee({},Ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),JT=Ke(YT),XT=ee({},St,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),QT=Ke(XT),ZT=[9,13,27,32],gp=u&&"CompositionEvent"in window,lu=null;u&&"documentMode"in document&&(lu=document.documentMode);var eI=u&&"TextEvent"in window&&!lu,cb=u&&(!gp||lu&&8<lu&&11>=lu),ub=" ",db=!1;function fb(o,c){switch(o){case"keyup":return ZT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zl=!1;function tI(o,c){switch(o){case"compositionend":return hb(c);case"keypress":return c.which!==32?null:(db=!0,ub);case"textInput":return o=c.data,o===ub&&db?null:o;default:return null}}function rI(o,c){if(zl)return o==="compositionend"||!gp&&fb(o,c)?(o=ue(),Y=U=F=null,zl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return cb&&c.locale!=="ko"?null:c.data;default:return null}}var nI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!nI[o.type]:c==="textarea"}function pb(o,c,h,g){Es(g),c=Jd(c,"onChange"),0<c.length&&(h=new st("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var cu=null,uu=null;function sI(o){Ib(o,0)}function Hd(o){var c=Vl(o);if(V(c))return o}function iI(o,c){if(o==="change")return c}var gb=!1;if(u){var yp;if(u){var vp="oninput"in document;if(!vp){var yb=document.createElement("div");yb.setAttribute("oninput","return;"),vp=typeof yb.oninput=="function"}yp=vp}else yp=!1;gb=yp&&(!document.documentMode||9<document.documentMode)}function vb(){cu&&(cu.detachEvent("onpropertychange",xb),uu=cu=null)}function xb(o){if(o.propertyName==="value"&&Hd(uu)){var c=[];pb(c,uu,o,It(o)),Cr(sI,c)}}function aI(o,c,h){o==="focusin"?(vb(),cu=c,uu=h,cu.attachEvent("onpropertychange",xb)):o==="focusout"&&vb()}function oI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Hd(uu)}function lI(o,c){if(o==="click")return Hd(c)}function cI(o,c){if(o==="input"||o==="change")return Hd(c)}function uI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Fi=typeof Object.is=="function"?Object.is:uI;function du(o,c){if(Fi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!Fi(o[w],c[w]))return!1}return!0}function wb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function bb(o,c){var h=wb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=wb(h)}}function jb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?jb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Sb(){for(var o=window,c=Le();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Le(o.document)}return c}function xp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function dI(o){var c=Sb(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&jb(h.ownerDocument.documentElement,h)){if(g!==null&&xp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var w=h.textContent.length,k=Math.min(g.start,w);g=g.end===void 0?k:Math.min(g.end,w),!o.extend&&k>g&&(w=g,g=k,k=w),w=bb(h,k);var O=bb(h,g);w&&O&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==O.node||o.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),o.removeAllRanges(),k>g?(o.addRange(c),o.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var fI=u&&"documentMode"in document&&11>=document.documentMode,Ul=null,wp=null,fu=null,bp=!1;function kb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;bp||Ul==null||Ul!==Le(g)||(g=Ul,"selectionStart"in g&&xp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),fu&&du(fu,g)||(fu=g,g=Jd(wp,"onSelect"),0<g.length&&(c=new st("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Ul)))}function Kd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Bl={animationend:Kd("Animation","AnimationEnd"),animationiteration:Kd("Animation","AnimationIteration"),animationstart:Kd("Animation","AnimationStart"),transitionend:Kd("Transition","TransitionEnd")},jp={},Nb={};u&&(Nb=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function Gd(o){if(jp[o])return jp[o];if(!Bl[o])return o;var c=Bl[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Nb)return jp[o]=c[h];return o}var _b=Gd("animationend"),Cb=Gd("animationiteration"),Eb=Gd("animationstart"),Ab=Gd("transitionend"),Pb=new Map,Ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(o,c){Pb.set(o,c),i(c,[o])}for(var Sp=0;Sp<Ob.length;Sp++){var kp=Ob[Sp],hI=kp.toLowerCase(),mI=kp[0].toUpperCase()+kp.slice(1);ho(hI,"on"+mI)}ho(_b,"onAnimationEnd"),ho(Cb,"onAnimationIteration"),ho(Eb,"onAnimationStart"),ho("dblclick","onDoubleClick"),ho("focusin","onFocus"),ho("focusout","onBlur"),ho(Ab,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pI=new Set("cancel close invalid load scroll toggle".split(" ").concat(hu));function Tb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,As(g,c,void 0,o),o.currentTarget=null}function Ib(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var k=void 0;if(c)for(var O=g.length-1;0<=O;O--){var L=g[O],G=L.instance,xe=L.currentTarget;if(L=L.listener,G!==k&&w.isPropagationStopped())break e;Tb(w,L,xe),k=G}else for(O=0;O<g.length;O++){if(L=g[O],G=L.instance,xe=L.currentTarget,L=L.listener,G!==k&&w.isPropagationStopped())break e;Tb(w,L,xe),k=G}}}if(Er)throw o=os,Er=!1,os=null,o}function br(o,c){var h=c[Tp];h===void 0&&(h=c[Tp]=new Set);var g=o+"__bubble";h.has(g)||(Db(c,o,2,!1),h.add(g))}function Np(o,c,h){var g=0;c&&(g|=4),Db(h,o,g,c)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function mu(o){if(!o[Yd]){o[Yd]=!0,n.forEach(function(h){h!=="selectionchange"&&(pI.has(h)||Np(h,!1,o),Np(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Yd]||(c[Yd]=!0,Np("selectionchange",!1,c))}}function Db(o,c,h,g){switch(A(c)){case 1:var w=_a;break;case 4:w=Ca;break;default:w=Mi}h=w.bind(null,c,h,o),w=void 0,!qr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function _p(o,c,h,g,w){var k=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var L=g.stateNode.containerInfo;if(L===w||L.nodeType===8&&L.parentNode===w)break;if(O===4)for(O=g.return;O!==null;){var G=O.tag;if((G===3||G===4)&&(G=O.stateNode.containerInfo,G===w||G.nodeType===8&&G.parentNode===w))return;O=O.return}for(;L!==null;){if(O=Ko(L),O===null)return;if(G=O.tag,G===5||G===6){g=k=O;continue e}L=L.parentNode}}g=g.return}Cr(function(){var xe=k,Pe=It(h),De=[];e:{var Ae=Pb.get(o);if(Ae!==void 0){var He=st,Xe=o;switch(o){case"keypress":if($(h)===0)break e;case"keydown":case"keyup":He=VT;break;case"focusin":Xe="focus",He=er;break;case"focusout":Xe="blur",He=er;break;case"beforeblur":case"afterblur":He=er;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=kt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=GT;break;case _b:case Cb:case Eb:He=vs;break;case Ab:He=JT;break;case"scroll":He=We;break;case"wheel":He=QT;break;case"copy":case"cut":case"paste":He=mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=lb}var Qe=(c&4)!==0,Xr=!Qe&&o==="scroll",he=Qe?Ae!==null?Ae+"Capture":null:Ae;Qe=[];for(var te=xe,me;te!==null;){me=te;var Fe=me.stateNode;if(me.tag===5&&Fe!==null&&(me=Fe,he!==null&&(Fe=Jt(te,he),Fe!=null&&Qe.push(pu(te,Fe,me)))),Xr)break;te=te.return}0<Qe.length&&(Ae=new He(Ae,Xe,null,h,Pe),De.push({event:Ae,listeners:Qe}))}}if((c&7)===0){e:{if(Ae=o==="mouseover"||o==="pointerover",He=o==="mouseout"||o==="pointerout",Ae&&h!==Ze&&(Xe=h.relatedTarget||h.fromElement)&&(Ko(Xe)||Xe[Ea]))break e;if((He||Ae)&&(Ae=Pe.window===Pe?Pe:(Ae=Pe.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,He?(Xe=h.relatedTarget||h.toElement,He=xe,Xe=Xe?Ko(Xe):null,Xe!==null&&(Xr=Mr(Xe),Xe!==Xr||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(He=null,Xe=xe),He!==Xe)){if(Qe=Je,Fe="onMouseLeave",he="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(Qe=lb,Fe="onPointerLeave",he="onPointerEnter",te="pointer"),Xr=He==null?Ae:Vl(He),me=Xe==null?Ae:Vl(Xe),Ae=new Qe(Fe,te+"leave",He,h,Pe),Ae.target=Xr,Ae.relatedTarget=me,Fe=null,Ko(Pe)===xe&&(Qe=new Qe(he,te+"enter",Xe,h,Pe),Qe.target=me,Qe.relatedTarget=Xr,Fe=Qe),Xr=Fe,He&&Xe)t:{for(Qe=He,he=Xe,te=0,me=Qe;me;me=Wl(me))te++;for(me=0,Fe=he;Fe;Fe=Wl(Fe))me++;for(;0<te-me;)Qe=Wl(Qe),te--;for(;0<me-te;)he=Wl(he),me--;for(;te--;){if(Qe===he||he!==null&&Qe===he.alternate)break t;Qe=Wl(Qe),he=Wl(he)}Qe=null}else Qe=null;He!==null&&Rb(De,Ae,He,Qe,!1),Xe!==null&&Xr!==null&&Rb(De,Xr,Xe,Qe,!0)}}e:{if(Ae=xe?Vl(xe):window,He=Ae.nodeName&&Ae.nodeName.toLowerCase(),He==="select"||He==="input"&&Ae.type==="file")var et=iI;else if(mb(Ae))if(gb)et=cI;else{et=oI;var lt=aI}else(He=Ae.nodeName)&&He.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(et=lI);if(et&&(et=et(o,xe))){pb(De,et,h,Pe);break e}lt&&lt(o,Ae,xe),o==="focusout"&&(lt=Ae._wrapperState)&&lt.controlled&&Ae.type==="number"&&Qt(Ae,"number",Ae.value)}switch(lt=xe?Vl(xe):window,o){case"focusin":(mb(lt)||lt.contentEditable==="true")&&(Ul=lt,wp=xe,fu=null);break;case"focusout":fu=wp=Ul=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,kb(De,h,Pe);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":kb(De,h,Pe)}var ct;if(gp)e:{switch(o){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else zl?fb(o,h)&&(vt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(vt="onCompositionStart");vt&&(cb&&h.locale!=="ko"&&(zl||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&zl&&(ct=ue()):(F=Pe,U="value"in F?F.value:F.textContent,zl=!0)),lt=Jd(xe,vt),0<lt.length&&(vt=new ob(vt,o,null,h,Pe),De.push({event:vt,listeners:lt}),ct?vt.data=ct:(ct=hb(h),ct!==null&&(vt.data=ct)))),(ct=eI?tI(o,h):rI(o,h))&&(xe=Jd(xe,"onBeforeInput"),0<xe.length&&(Pe=new ob("onBeforeInput","beforeinput",null,h,Pe),De.push({event:Pe,listeners:xe}),Pe.data=ct))}Ib(De,c)})}function pu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Jd(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,k=w.stateNode;w.tag===5&&k!==null&&(w=k,k=Jt(o,h),k!=null&&g.unshift(pu(o,k,w)),k=Jt(o,c),k!=null&&g.push(pu(o,k,w))),o=o.return}return g}function Wl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Rb(o,c,h,g,w){for(var k=c._reactName,O=[];h!==null&&h!==g;){var L=h,G=L.alternate,xe=L.stateNode;if(G!==null&&G===g)break;L.tag===5&&xe!==null&&(L=xe,w?(G=Jt(h,k),G!=null&&O.unshift(pu(h,G,L))):w||(G=Jt(h,k),G!=null&&O.push(pu(h,G,L)))),h=h.return}O.length!==0&&o.push({event:c,listeners:O})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function $b(o){return(typeof o=="string"?o:""+o).replace(gI,`
`).replace(yI,"")}function Xd(o,c,h){if(c=$b(c),$b(o)!==c&&h)throw Error(r(425))}function Qd(){}var Cp=null,Ep=null;function Ap(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,Mb=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof Mb<"u"?function(o){return Mb.resolve(null).then(o).catch(wI)}:Pp;function wI(o){setTimeout(function(){throw o})}function Op(o,c){var h=c,g=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){o.removeChild(w),kn(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);kn(c)}function mo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Fb(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var ql=Math.random().toString(36).slice(2),aa="__reactFiber$"+ql,gu="__reactProps$"+ql,Ea="__reactContainer$"+ql,Tp="__reactEvents$"+ql,bI="__reactListeners$"+ql,jI="__reactHandles$"+ql;function Ko(o){var c=o[aa];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Ea]||h[aa]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Fb(o);o!==null;){if(h=o[aa])return h;o=Fb(o)}return c}o=h,h=o.parentNode}return null}function yu(o){return o=o[aa]||o[Ea],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Vl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function Zd(o){return o[gu]||null}var Ip=[],Hl=-1;function po(o){return{current:o}}function jr(o){0>Hl||(o.current=Ip[Hl],Ip[Hl]=null,Hl--)}function hr(o,c){Hl++,Ip[Hl]=o.current,o.current=c}var go={},ls=po(go),Ps=po(!1),Go=go;function Kl(o,c){var h=o.type.contextTypes;if(!h)return go;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},k;for(k in h)w[k]=c[k];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=w),w}function Os(o){return o=o.childContextTypes,o!=null}function ef(){jr(Ps),jr(ls)}function Lb(o,c,h){if(ls.current!==go)throw Error(r(168));hr(ls,c),hr(Ps,h)}function zb(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,fe(o)||"Unknown",w));return ee({},h,g)}function tf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||go,Go=ls.current,hr(ls,o),hr(Ps,Ps.current),!0}function Ub(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=zb(o,c,Go),g.__reactInternalMemoizedMergedChildContext=o,jr(Ps),jr(ls),hr(ls,o)):jr(Ps),hr(Ps,h)}var Aa=null,rf=!1,Dp=!1;function Bb(o){Aa===null?Aa=[o]:Aa.push(o)}function SI(o){rf=!0,Bb(o)}function yo(){if(!Dp&&Aa!==null){Dp=!0;var o=0,c=Et;try{var h=Aa;for(Et=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Aa=null,rf=!1}catch(w){throw Aa!==null&&(Aa=Aa.slice(o+1)),Hr(ae,yo),w}finally{Et=c,Dp=!1}}return null}var Gl=[],Yl=0,nf=null,sf=0,pi=[],gi=0,Yo=null,Pa=1,Oa="";function Jo(o,c){Gl[Yl++]=sf,Gl[Yl++]=nf,nf=o,sf=c}function Wb(o,c,h){pi[gi++]=Pa,pi[gi++]=Oa,pi[gi++]=Yo,Yo=o;var g=Pa;o=Oa;var w=32-gt(g)-1;g&=~(1<<w),h+=1;var k=32-gt(c)+w;if(30<k){var O=w-w%5;k=(g&(1<<O)-1).toString(32),g>>=O,w-=O,Pa=1<<32-gt(c)+w|h<<w|g,Oa=k+o}else Pa=1<<k|h<<w|g,Oa=o}function Rp(o){o.return!==null&&(Jo(o,1),Wb(o,1,0))}function $p(o){for(;o===nf;)nf=Gl[--Yl],Gl[Yl]=null,sf=Gl[--Yl],Gl[Yl]=null;for(;o===Yo;)Yo=pi[--gi],pi[gi]=null,Oa=pi[--gi],pi[gi]=null,Pa=pi[--gi],pi[gi]=null}var Gs=null,Ys=null,Tr=!1,Li=null;function qb(o,c){var h=wi(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function Vb(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Gs=o,Ys=mo(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Gs=o,Ys=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Yo!==null?{id:Pa,overflow:Oa}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=wi(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,Gs=o,Ys=null,!0):!1;default:return!1}}function Mp(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Fp(o){if(Tr){var c=Ys;if(c){var h=c;if(!Vb(o,c)){if(Mp(o))throw Error(r(418));c=mo(h.nextSibling);var g=Gs;c&&Vb(o,c)?qb(g,h):(o.flags=o.flags&-4097|2,Tr=!1,Gs=o)}}else{if(Mp(o))throw Error(r(418));o.flags=o.flags&-4097|2,Tr=!1,Gs=o}}}function Hb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Gs=o}function af(o){if(o!==Gs)return!1;if(!Tr)return Hb(o),Tr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Ap(o.type,o.memoizedProps)),c&&(c=Ys)){if(Mp(o))throw Kb(),Error(r(418));for(;c;)qb(o,c),c=mo(c.nextSibling)}if(Hb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Ys=mo(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Ys=null}}else Ys=Gs?mo(o.stateNode.nextSibling):null;return!0}function Kb(){for(var o=Ys;o;)o=mo(o.nextSibling)}function Jl(){Ys=Gs=null,Tr=!1}function Lp(o){Li===null?Li=[o]:Li.push(o)}var kI=T.ReactCurrentBatchConfig;function vu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var w=g,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(O){var L=w.refs;O===null?delete L[k]:L[k]=O},c._stringRef=k,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function of(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Gb(o){var c=o._init;return c(o._payload)}function Yb(o){function c(he,te){if(o){var me=he.deletions;me===null?(he.deletions=[te],he.flags|=16):me.push(te)}}function h(he,te){if(!o)return null;for(;te!==null;)c(he,te),te=te.sibling;return null}function g(he,te){for(he=new Map;te!==null;)te.key!==null?he.set(te.key,te):he.set(te.index,te),te=te.sibling;return he}function w(he,te){return he=No(he,te),he.index=0,he.sibling=null,he}function k(he,te,me){return he.index=me,o?(me=he.alternate,me!==null?(me=me.index,me<te?(he.flags|=2,te):me):(he.flags|=2,te)):(he.flags|=1048576,te)}function O(he){return o&&he.alternate===null&&(he.flags|=2),he}function L(he,te,me,Fe){return te===null||te.tag!==6?(te=Pg(me,he.mode,Fe),te.return=he,te):(te=w(te,me),te.return=he,te)}function G(he,te,me,Fe){var et=me.type;return et===z?Pe(he,te,me.props.children,Fe,me.key):te!==null&&(te.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===W&&Gb(et)===te.type)?(Fe=w(te,me.props),Fe.ref=vu(he,te,me),Fe.return=he,Fe):(Fe=Of(me.type,me.key,me.props,null,he.mode,Fe),Fe.ref=vu(he,te,me),Fe.return=he,Fe)}function xe(he,te,me,Fe){return te===null||te.tag!==4||te.stateNode.containerInfo!==me.containerInfo||te.stateNode.implementation!==me.implementation?(te=Og(me,he.mode,Fe),te.return=he,te):(te=w(te,me.children||[]),te.return=he,te)}function Pe(he,te,me,Fe,et){return te===null||te.tag!==7?(te=sl(me,he.mode,Fe,et),te.return=he,te):(te=w(te,me),te.return=he,te)}function De(he,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Pg(""+te,he.mode,me),te.return=he,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return me=Of(te.type,te.key,te.props,null,he.mode,me),me.ref=vu(he,null,te),me.return=he,me;case P:return te=Og(te,he.mode,me),te.return=he,te;case W:var Fe=te._init;return De(he,Fe(te._payload),me)}if(M(te)||X(te))return te=sl(te,he.mode,me,null),te.return=he,te;of(he,te)}return null}function Ae(he,te,me,Fe){var et=te!==null?te.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return et!==null?null:L(he,te,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case I:return me.key===et?G(he,te,me,Fe):null;case P:return me.key===et?xe(he,te,me,Fe):null;case W:return et=me._init,Ae(he,te,et(me._payload),Fe)}if(M(me)||X(me))return et!==null?null:Pe(he,te,me,Fe,null);of(he,me)}return null}function He(he,te,me,Fe,et){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return he=he.get(me)||null,L(te,he,""+Fe,et);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case I:return he=he.get(Fe.key===null?me:Fe.key)||null,G(te,he,Fe,et);case P:return he=he.get(Fe.key===null?me:Fe.key)||null,xe(te,he,Fe,et);case W:var lt=Fe._init;return He(he,te,me,lt(Fe._payload),et)}if(M(Fe)||X(Fe))return he=he.get(me)||null,Pe(te,he,Fe,et,null);of(te,Fe)}return null}function Xe(he,te,me,Fe){for(var et=null,lt=null,ct=te,vt=te=0,Ln=null;ct!==null&&vt<me.length;vt++){ct.index>vt?(Ln=ct,ct=null):Ln=ct.sibling;var Vt=Ae(he,ct,me[vt],Fe);if(Vt===null){ct===null&&(ct=Ln);break}o&&ct&&Vt.alternate===null&&c(he,ct),te=k(Vt,te,vt),lt===null?et=Vt:lt.sibling=Vt,lt=Vt,ct=Ln}if(vt===me.length)return h(he,ct),Tr&&Jo(he,vt),et;if(ct===null){for(;vt<me.length;vt++)ct=De(he,me[vt],Fe),ct!==null&&(te=k(ct,te,vt),lt===null?et=ct:lt.sibling=ct,lt=ct);return Tr&&Jo(he,vt),et}for(ct=g(he,ct);vt<me.length;vt++)Ln=He(ct,he,vt,me[vt],Fe),Ln!==null&&(o&&Ln.alternate!==null&&ct.delete(Ln.key===null?vt:Ln.key),te=k(Ln,te,vt),lt===null?et=Ln:lt.sibling=Ln,lt=Ln);return o&&ct.forEach(function(_o){return c(he,_o)}),Tr&&Jo(he,vt),et}function Qe(he,te,me,Fe){var et=X(me);if(typeof et!="function")throw Error(r(150));if(me=et.call(me),me==null)throw Error(r(151));for(var lt=et=null,ct=te,vt=te=0,Ln=null,Vt=me.next();ct!==null&&!Vt.done;vt++,Vt=me.next()){ct.index>vt?(Ln=ct,ct=null):Ln=ct.sibling;var _o=Ae(he,ct,Vt.value,Fe);if(_o===null){ct===null&&(ct=Ln);break}o&&ct&&_o.alternate===null&&c(he,ct),te=k(_o,te,vt),lt===null?et=_o:lt.sibling=_o,lt=_o,ct=Ln}if(Vt.done)return h(he,ct),Tr&&Jo(he,vt),et;if(ct===null){for(;!Vt.done;vt++,Vt=me.next())Vt=De(he,Vt.value,Fe),Vt!==null&&(te=k(Vt,te,vt),lt===null?et=Vt:lt.sibling=Vt,lt=Vt);return Tr&&Jo(he,vt),et}for(ct=g(he,ct);!Vt.done;vt++,Vt=me.next())Vt=He(ct,he,vt,Vt.value,Fe),Vt!==null&&(o&&Vt.alternate!==null&&ct.delete(Vt.key===null?vt:Vt.key),te=k(Vt,te,vt),lt===null?et=Vt:lt.sibling=Vt,lt=Vt);return o&&ct.forEach(function(nD){return c(he,nD)}),Tr&&Jo(he,vt),et}function Xr(he,te,me,Fe){if(typeof me=="object"&&me!==null&&me.type===z&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case I:e:{for(var et=me.key,lt=te;lt!==null;){if(lt.key===et){if(et=me.type,et===z){if(lt.tag===7){h(he,lt.sibling),te=w(lt,me.props.children),te.return=he,he=te;break e}}else if(lt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===W&&Gb(et)===lt.type){h(he,lt.sibling),te=w(lt,me.props),te.ref=vu(he,lt,me),te.return=he,he=te;break e}h(he,lt);break}else c(he,lt);lt=lt.sibling}me.type===z?(te=sl(me.props.children,he.mode,Fe,me.key),te.return=he,he=te):(Fe=Of(me.type,me.key,me.props,null,he.mode,Fe),Fe.ref=vu(he,te,me),Fe.return=he,he=Fe)}return O(he);case P:e:{for(lt=me.key;te!==null;){if(te.key===lt)if(te.tag===4&&te.stateNode.containerInfo===me.containerInfo&&te.stateNode.implementation===me.implementation){h(he,te.sibling),te=w(te,me.children||[]),te.return=he,he=te;break e}else{h(he,te);break}else c(he,te);te=te.sibling}te=Og(me,he.mode,Fe),te.return=he,he=te}return O(he);case W:return lt=me._init,Xr(he,te,lt(me._payload),Fe)}if(M(me))return Xe(he,te,me,Fe);if(X(me))return Qe(he,te,me,Fe);of(he,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,te!==null&&te.tag===6?(h(he,te.sibling),te=w(te,me),te.return=he,he=te):(h(he,te),te=Pg(me,he.mode,Fe),te.return=he,he=te),O(he)):h(he,te)}return Xr}var Xl=Yb(!0),Jb=Yb(!1),lf=po(null),cf=null,Ql=null,zp=null;function Up(){zp=Ql=cf=null}function Bp(o){var c=lf.current;jr(lf),o._currentValue=c}function Wp(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Zl(o,c){cf=o,zp=Ql=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Ts=!0),o.firstContext=null)}function yi(o){var c=o._currentValue;if(zp!==o)if(o={context:o,memoizedValue:c,next:null},Ql===null){if(cf===null)throw Error(r(308));Ql=o,cf.dependencies={lanes:0,firstContext:o}}else Ql=Ql.next=o;return c}var Xo=null;function qp(o){Xo===null?Xo=[o]:Xo.push(o)}function Xb(o,c,h,g){var w=c.interleaved;return w===null?(h.next=h,qp(c)):(h.next=w.next,w.next=h),c.interleaved=h,Ta(o,g)}function Ta(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var vo=!1;function Vp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ia(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function xo(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Bt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Ta(o,h)}return w=g.interleaved,w===null?(c.next=c,qp(g)):(c.next=w.next,w.next=c),g.interleaved=c,Ta(o,h)}function uf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,bn(o,h)}}function Zb(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?w=k=O:k=k.next=O,h=h.next}while(h!==null);k===null?w=k=c:k=k.next=c}else w=k=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:k,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function df(o,c,h,g){var w=o.updateQueue;vo=!1;var k=w.firstBaseUpdate,O=w.lastBaseUpdate,L=w.shared.pending;if(L!==null){w.shared.pending=null;var G=L,xe=G.next;G.next=null,O===null?k=xe:O.next=xe,O=G;var Pe=o.alternate;Pe!==null&&(Pe=Pe.updateQueue,L=Pe.lastBaseUpdate,L!==O&&(L===null?Pe.firstBaseUpdate=xe:L.next=xe,Pe.lastBaseUpdate=G))}if(k!==null){var De=w.baseState;O=0,Pe=xe=G=null,L=k;do{var Ae=L.lane,He=L.eventTime;if((g&Ae)===Ae){Pe!==null&&(Pe=Pe.next={eventTime:He,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Xe=o,Qe=L;switch(Ae=c,He=h,Qe.tag){case 1:if(Xe=Qe.payload,typeof Xe=="function"){De=Xe.call(He,De,Ae);break e}De=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Qe.payload,Ae=typeof Xe=="function"?Xe.call(He,De,Ae):Xe,Ae==null)break e;De=ee({},De,Ae);break e;case 2:vo=!0}}L.callback!==null&&L.lane!==0&&(o.flags|=64,Ae=w.effects,Ae===null?w.effects=[L]:Ae.push(L))}else He={eventTime:He,lane:Ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Pe===null?(xe=Pe=He,G=De):Pe=Pe.next=He,O|=Ae;if(L=L.next,L===null){if(L=w.shared.pending,L===null)break;Ae=L,L=Ae.next,Ae.next=null,w.lastBaseUpdate=Ae,w.shared.pending=null}}while(!0);if(Pe===null&&(G=De),w.baseState=G,w.firstBaseUpdate=xe,w.lastBaseUpdate=Pe,c=w.shared.interleaved,c!==null){w=c;do O|=w.lane,w=w.next;while(w!==c)}else k===null&&(w.shared.lanes=0);el|=O,o.lanes=O,o.memoizedState=De}}function e1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var xu={},oa=po(xu),wu=po(xu),bu=po(xu);function Qo(o){if(o===xu)throw Error(r(174));return o}function Hp(o,c){switch(hr(bu,c),hr(wu,o),hr(oa,xu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:yt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=yt(c,o)}jr(oa),hr(oa,c)}function ec(){jr(oa),jr(wu),jr(bu)}function t1(o){Qo(bu.current);var c=Qo(oa.current),h=yt(c,o.type);c!==h&&(hr(wu,o),hr(oa,h))}function Kp(o){wu.current===o&&(jr(oa),jr(wu))}var zr=po(0);function ff(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Gp=[];function Yp(){for(var o=0;o<Gp.length;o++)Gp[o]._workInProgressVersionPrimary=null;Gp.length=0}var hf=T.ReactCurrentDispatcher,Jp=T.ReactCurrentBatchConfig,Zo=0,Ur=null,Nn=null,Mn=null,mf=!1,ju=!1,Su=0,NI=0;function cs(){throw Error(r(321))}function Xp(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Fi(o[h],c[h]))return!1;return!0}function Qp(o,c,h,g,w,k){if(Zo=k,Ur=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,hf.current=o===null||o.memoizedState===null?AI:PI,o=h(g,w),ju){k=0;do{if(ju=!1,Su=0,25<=k)throw Error(r(301));k+=1,Mn=Nn=null,c.updateQueue=null,hf.current=OI,o=h(g,w)}while(ju)}if(hf.current=yf,c=Nn!==null&&Nn.next!==null,Zo=0,Mn=Nn=Ur=null,mf=!1,c)throw Error(r(300));return o}function Zp(){var o=Su!==0;return Su=0,o}function la(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Ur.memoizedState=Mn=o:Mn=Mn.next=o,Mn}function vi(){if(Nn===null){var o=Ur.alternate;o=o!==null?o.memoizedState:null}else o=Nn.next;var c=Mn===null?Ur.memoizedState:Mn.next;if(c!==null)Mn=c,Nn=o;else{if(o===null)throw Error(r(310));Nn=o,o={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Mn===null?Ur.memoizedState=Mn=o:Mn=Mn.next=o}return Mn}function ku(o,c){return typeof c=="function"?c(o):c}function eg(o){var c=vi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=Nn,w=g.baseQueue,k=h.pending;if(k!==null){if(w!==null){var O=w.next;w.next=k.next,k.next=O}g.baseQueue=w=k,h.pending=null}if(w!==null){k=w.next,g=g.baseState;var L=O=null,G=null,xe=k;do{var Pe=xe.lane;if((Zo&Pe)===Pe)G!==null&&(G=G.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),g=xe.hasEagerState?xe.eagerState:o(g,xe.action);else{var De={lane:Pe,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};G===null?(L=G=De,O=g):G=G.next=De,Ur.lanes|=Pe,el|=Pe}xe=xe.next}while(xe!==null&&xe!==k);G===null?O=g:G.next=L,Fi(g,c.memoizedState)||(Ts=!0),c.memoizedState=g,c.baseState=O,c.baseQueue=G,h.lastRenderedState=g}if(o=h.interleaved,o!==null){w=o;do k=w.lane,Ur.lanes|=k,el|=k,w=w.next;while(w!==o)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function tg(o){var c=vi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,k=c.memoizedState;if(w!==null){h.pending=null;var O=w=w.next;do k=o(k,O.action),O=O.next;while(O!==w);Fi(k,c.memoizedState)||(Ts=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),h.lastRenderedState=k}return[k,g]}function r1(){}function n1(o,c){var h=Ur,g=vi(),w=c(),k=!Fi(g.memoizedState,w);if(k&&(g.memoizedState=w,Ts=!0),g=g.queue,rg(a1.bind(null,h,g,o),[o]),g.getSnapshot!==c||k||Mn!==null&&Mn.memoizedState.tag&1){if(h.flags|=2048,Nu(9,i1.bind(null,h,g,w,c),void 0,null),Fn===null)throw Error(r(349));(Zo&30)!==0||s1(h,c,w)}return w}function s1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function i1(o,c,h,g){c.value=h,c.getSnapshot=g,o1(c)&&l1(o)}function a1(o,c,h){return h(function(){o1(c)&&l1(o)})}function o1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Fi(o,h)}catch{return!0}}function l1(o){var c=Ta(o,1);c!==null&&Wi(c,o,1,-1)}function c1(o){var c=la();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:o},c.queue=o,o=o.dispatch=EI.bind(null,Ur,o),[c.memoizedState,o]}function Nu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function u1(){return vi().memoizedState}function pf(o,c,h,g){var w=la();Ur.flags|=o,w.memoizedState=Nu(1|c,h,void 0,g===void 0?null:g)}function gf(o,c,h,g){var w=vi();g=g===void 0?null:g;var k=void 0;if(Nn!==null){var O=Nn.memoizedState;if(k=O.destroy,g!==null&&Xp(g,O.deps)){w.memoizedState=Nu(c,h,k,g);return}}Ur.flags|=o,w.memoizedState=Nu(1|c,h,k,g)}function d1(o,c){return pf(8390656,8,o,c)}function rg(o,c){return gf(2048,8,o,c)}function f1(o,c){return gf(4,2,o,c)}function h1(o,c){return gf(4,4,o,c)}function m1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function p1(o,c,h){return h=h!=null?h.concat([o]):null,gf(4,4,m1.bind(null,c,o),h)}function ng(){}function g1(o,c){var h=vi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Xp(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function y1(o,c){var h=vi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Xp(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function v1(o,c,h){return(Zo&21)===0?(o.baseState&&(o.baseState=!1,Ts=!0),o.memoizedState=h):(Fi(h,c)||(h=uo(),Ur.lanes|=h,el|=h,o.baseState=!0),c)}function _I(o,c){var h=Et;Et=h!==0&&4>h?h:4,o(!0);var g=Jp.transition;Jp.transition={};try{o(!1),c()}finally{Et=h,Jp.transition=g}}function x1(){return vi().memoizedState}function CI(o,c,h){var g=So(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},w1(o))b1(c,h);else if(h=Xb(o,c,h,g),h!==null){var w=ws();Wi(h,o,g,w),j1(h,c,g)}}function EI(o,c,h){var g=So(o),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(w1(o))b1(c,w);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var O=c.lastRenderedState,L=k(O,h);if(w.hasEagerState=!0,w.eagerState=L,Fi(L,O)){var G=c.interleaved;G===null?(w.next=w,qp(c)):(w.next=G.next,G.next=w),c.interleaved=w;return}}catch{}finally{}h=Xb(o,c,w,g),h!==null&&(w=ws(),Wi(h,o,g,w),j1(h,c,g))}}function w1(o){var c=o.alternate;return o===Ur||c!==null&&c===Ur}function b1(o,c){ju=mf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function j1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,bn(o,h)}}var yf={readContext:yi,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},AI={readContext:yi,useCallback:function(o,c){return la().memoizedState=[o,c===void 0?null:c],o},useContext:yi,useEffect:d1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,pf(4194308,4,m1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return pf(4194308,4,o,c)},useInsertionEffect:function(o,c){return pf(4,2,o,c)},useMemo:function(o,c){var h=la();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=la();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=CI.bind(null,Ur,o),[g.memoizedState,o]},useRef:function(o){var c=la();return o={current:o},c.memoizedState=o},useState:c1,useDebugValue:ng,useDeferredValue:function(o){return la().memoizedState=o},useTransition:function(){var o=c1(!1),c=o[0];return o=_I.bind(null,o[1]),la().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Ur,w=la();if(Tr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Fn===null)throw Error(r(349));(Zo&30)!==0||s1(g,c,h)}w.memoizedState=h;var k={value:h,getSnapshot:c};return w.queue=k,d1(a1.bind(null,g,k,o),[o]),g.flags|=2048,Nu(9,i1.bind(null,g,k,h,c),void 0,null),h},useId:function(){var o=la(),c=Fn.identifierPrefix;if(Tr){var h=Oa,g=Pa;h=(g&~(1<<32-gt(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Su++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=NI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},PI={readContext:yi,useCallback:g1,useContext:yi,useEffect:rg,useImperativeHandle:p1,useInsertionEffect:f1,useLayoutEffect:h1,useMemo:y1,useReducer:eg,useRef:u1,useState:function(){return eg(ku)},useDebugValue:ng,useDeferredValue:function(o){var c=vi();return v1(c,Nn.memoizedState,o)},useTransition:function(){var o=eg(ku)[0],c=vi().memoizedState;return[o,c]},useMutableSource:r1,useSyncExternalStore:n1,useId:x1,unstable_isNewReconciler:!1},OI={readContext:yi,useCallback:g1,useContext:yi,useEffect:rg,useImperativeHandle:p1,useInsertionEffect:f1,useLayoutEffect:h1,useMemo:y1,useReducer:tg,useRef:u1,useState:function(){return tg(ku)},useDebugValue:ng,useDeferredValue:function(o){var c=vi();return Nn===null?c.memoizedState=o:v1(c,Nn.memoizedState,o)},useTransition:function(){var o=tg(ku)[0],c=vi().memoizedState;return[o,c]},useMutableSource:r1,useSyncExternalStore:n1,useId:x1,unstable_isNewReconciler:!1};function zi(o,c){if(o&&o.defaultProps){c=ee({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function sg(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:ee({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var vf={isMounted:function(o){return(o=o._reactInternals)?Mr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=ws(),w=So(o),k=Ia(g,w);k.payload=c,h!=null&&(k.callback=h),c=xo(o,k,w),c!==null&&(Wi(c,o,w,g),uf(c,o,w))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=ws(),w=So(o),k=Ia(g,w);k.tag=1,k.payload=c,h!=null&&(k.callback=h),c=xo(o,k,w),c!==null&&(Wi(c,o,w,g),uf(c,o,w))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=ws(),g=So(o),w=Ia(h,g);w.tag=2,c!=null&&(w.callback=c),c=xo(o,w,g),c!==null&&(Wi(c,o,g,h),uf(c,o,g))}};function S1(o,c,h,g,w,k,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,k,O):c.prototype&&c.prototype.isPureReactComponent?!du(h,g)||!du(w,k):!0}function k1(o,c,h){var g=!1,w=go,k=c.contextType;return typeof k=="object"&&k!==null?k=yi(k):(w=Os(c)?Go:ls.current,g=c.contextTypes,k=(g=g!=null)?Kl(o,w):go),c=new c(h,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=vf,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=k),c}function N1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&vf.enqueueReplaceState(c,c.state,null)}function ig(o,c,h,g){var w=o.stateNode;w.props=h,w.state=o.memoizedState,w.refs={},Vp(o);var k=c.contextType;typeof k=="object"&&k!==null?w.context=yi(k):(k=Os(c)?Go:ls.current,w.context=Kl(o,k)),w.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(sg(o,c,k,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&vf.enqueueReplaceState(w,w.state,null),df(o,h,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function tc(o,c){try{var h="",g=c;do h+=Ee(g),g=g.return;while(g);var w=h}catch(k){w=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:w,digest:null}}function ag(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function og(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var TI=typeof WeakMap=="function"?WeakMap:Map;function _1(o,c,h){h=Ia(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Nf||(Nf=!0,jg=g),og(o,c)},h}function C1(o,c,h){h=Ia(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){og(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){og(o,c),typeof g!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),h}function E1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new TI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),o=HI.bind(null,o,c,h),c.then(o,o))}function A1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function P1(o,c,h,g,w){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Ia(-1,1),c.tag=2,xo(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var II=T.ReactCurrentOwner,Ts=!1;function xs(o,c,h,g){c.child=o===null?Jb(c,null,h,g):Xl(c,o.child,h,g)}function O1(o,c,h,g,w){h=h.render;var k=c.ref;return Zl(c,w),g=Qp(o,c,h,g,k,w),h=Zp(),o!==null&&!Ts?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Da(o,c,w)):(Tr&&h&&Rp(c),c.flags|=1,xs(o,c,g,w),c.child)}function T1(o,c,h,g,w){if(o===null){var k=h.type;return typeof k=="function"&&!Ag(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=k,I1(o,c,k,g,w)):(o=Of(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&w)===0){var O=k.memoizedProps;if(h=h.compare,h=h!==null?h:du,h(O,g)&&o.ref===c.ref)return Da(o,c,w)}return c.flags|=1,o=No(k,g),o.ref=c.ref,o.return=c,c.child=o}function I1(o,c,h,g,w){if(o!==null){var k=o.memoizedProps;if(du(k,g)&&o.ref===c.ref)if(Ts=!1,c.pendingProps=g=k,(o.lanes&w)!==0)(o.flags&131072)!==0&&(Ts=!0);else return c.lanes=o.lanes,Da(o,c,w)}return lg(o,c,h,g,w)}function D1(o,c,h){var g=c.pendingProps,w=g.children,k=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(nc,Js),Js|=h;else{if((h&1073741824)===0)return o=k!==null?k.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,hr(nc,Js),Js|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:h,hr(nc,Js),Js|=g}else k!==null?(g=k.baseLanes|h,c.memoizedState=null):g=h,hr(nc,Js),Js|=g;return xs(o,c,w,h),c.child}function R1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function lg(o,c,h,g,w){var k=Os(h)?Go:ls.current;return k=Kl(c,k),Zl(c,w),h=Qp(o,c,h,g,k,w),g=Zp(),o!==null&&!Ts?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Da(o,c,w)):(Tr&&g&&Rp(c),c.flags|=1,xs(o,c,h,w),c.child)}function $1(o,c,h,g,w){if(Os(h)){var k=!0;tf(c)}else k=!1;if(Zl(c,w),c.stateNode===null)wf(o,c),k1(c,h,g),ig(c,h,g,w),g=!0;else if(o===null){var O=c.stateNode,L=c.memoizedProps;O.props=L;var G=O.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=yi(xe):(xe=Os(h)?Go:ls.current,xe=Kl(c,xe));var Pe=h.getDerivedStateFromProps,De=typeof Pe=="function"||typeof O.getSnapshotBeforeUpdate=="function";De||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(L!==g||G!==xe)&&N1(c,O,g,xe),vo=!1;var Ae=c.memoizedState;O.state=Ae,df(c,g,O,w),G=c.memoizedState,L!==g||Ae!==G||Ps.current||vo?(typeof Pe=="function"&&(sg(c,h,Pe,g),G=c.memoizedState),(L=vo||S1(c,h,L,g,Ae,G,xe))?(De||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=G),O.props=g,O.state=G,O.context=xe,g=L):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{O=c.stateNode,Qb(o,c),L=c.memoizedProps,xe=c.type===c.elementType?L:zi(c.type,L),O.props=xe,De=c.pendingProps,Ae=O.context,G=h.contextType,typeof G=="object"&&G!==null?G=yi(G):(G=Os(h)?Go:ls.current,G=Kl(c,G));var He=h.getDerivedStateFromProps;(Pe=typeof He=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(L!==De||Ae!==G)&&N1(c,O,g,G),vo=!1,Ae=c.memoizedState,O.state=Ae,df(c,g,O,w);var Xe=c.memoizedState;L!==De||Ae!==Xe||Ps.current||vo?(typeof He=="function"&&(sg(c,h,He,g),Xe=c.memoizedState),(xe=vo||S1(c,h,xe,g,Ae,Xe,G)||!1)?(Pe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Xe,G),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Xe,G)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||L===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Xe),O.props=g,O.state=Xe,O.context=G,g=xe):(typeof O.componentDidUpdate!="function"||L===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=1024),g=!1)}return cg(o,c,h,g,k,w)}function cg(o,c,h,g,w,k){R1(o,c);var O=(c.flags&128)!==0;if(!g&&!O)return w&&Ub(c,h,!1),Da(o,c,k);g=c.stateNode,II.current=c;var L=O&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&O?(c.child=Xl(c,o.child,null,k),c.child=Xl(c,null,L,k)):xs(o,c,L,k),c.memoizedState=g.state,w&&Ub(c,h,!0),c.child}function M1(o){var c=o.stateNode;c.pendingContext?Lb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Lb(o,c.context,!1),Hp(o,c.containerInfo)}function F1(o,c,h,g,w){return Jl(),Lp(w),c.flags|=256,xs(o,c,h,g),c.child}var ug={dehydrated:null,treeContext:null,retryLane:0};function dg(o){return{baseLanes:o,cachePool:null,transitions:null}}function L1(o,c,h){var g=c.pendingProps,w=zr.current,k=!1,O=(c.flags&128)!==0,L;if((L=O)||(L=o!==null&&o.memoizedState===null?!1:(w&2)!==0),L?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),hr(zr,w&1),o===null)return Fp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=g.children,o=g.fallback,k?(g=c.mode,k=c.child,O={mode:"hidden",children:O},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=O):k=Tf(O,g,0,null),o=sl(o,g,h,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=dg(h),c.memoizedState=ug,o):fg(c,O));if(w=o.memoizedState,w!==null&&(L=w.dehydrated,L!==null))return DI(o,c,O,g,L,w,h);if(k){k=g.fallback,O=c.mode,w=o.child,L=w.sibling;var G={mode:"hidden",children:g.children};return(O&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=G,c.deletions=null):(g=No(w,G),g.subtreeFlags=w.subtreeFlags&14680064),L!==null?k=No(L,k):(k=sl(k,O,h,null),k.flags|=2),k.return=c,g.return=c,g.sibling=k,c.child=g,g=k,k=c.child,O=o.child.memoizedState,O=O===null?dg(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},k.memoizedState=O,k.childLanes=o.childLanes&~h,c.memoizedState=ug,g}return k=o.child,o=k.sibling,g=No(k,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function fg(o,c){return c=Tf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function xf(o,c,h,g){return g!==null&&Lp(g),Xl(c,o.child,null,h),o=fg(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function DI(o,c,h,g,w,k,O){if(h)return c.flags&256?(c.flags&=-257,g=ag(Error(r(422))),xf(o,c,O,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=g.fallback,w=c.mode,g=Tf({mode:"visible",children:g.children},w,0,null),k=sl(k,w,O,null),k.flags|=2,g.return=c,k.return=c,g.sibling=k,c.child=g,(c.mode&1)!==0&&Xl(c,o.child,null,O),c.child.memoizedState=dg(O),c.memoizedState=ug,k);if((c.mode&1)===0)return xf(o,c,O,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var L=g.dgst;return g=L,k=Error(r(419)),g=ag(k,g,void 0),xf(o,c,O,g)}if(L=(O&o.childLanes)!==0,Ts||L){if(g=Fn,g!==null){switch(O&-O){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|O))!==0?0:w,w!==0&&w!==k.retryLane&&(k.retryLane=w,Ta(o,w),Wi(g,o,w,-1))}return Eg(),g=ag(Error(r(421))),xf(o,c,O,g)}return w.data==="$?"?(c.flags|=128,c.child=o.child,c=KI.bind(null,o),w._reactRetry=c,null):(o=k.treeContext,Ys=mo(w.nextSibling),Gs=c,Tr=!0,Li=null,o!==null&&(pi[gi++]=Pa,pi[gi++]=Oa,pi[gi++]=Yo,Pa=o.id,Oa=o.overflow,Yo=c),c=fg(c,g.children),c.flags|=4096,c)}function z1(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Wp(o.return,c,h)}function hg(o,c,h,g,w){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=h,k.tailMode=w)}function U1(o,c,h){var g=c.pendingProps,w=g.revealOrder,k=g.tail;if(xs(o,c,g.children,h),g=zr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&z1(o,h,c);else if(o.tag===19)z1(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(hr(zr,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&ff(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),hg(c,!1,w,h,k);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&ff(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}hg(c,!0,h,null,k);break;case"together":hg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function wf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Da(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),el|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=No(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=No(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function RI(o,c,h){switch(c.tag){case 3:M1(c),Jl();break;case 5:t1(c);break;case 1:Os(c.type)&&tf(c);break;case 4:Hp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;hr(lf,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(hr(zr,zr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?L1(o,c,h):(hr(zr,zr.current&1),o=Da(o,c,h),o!==null?o.sibling:null);hr(zr,zr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return U1(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),hr(zr,zr.current),g)break;return null;case 22:case 23:return c.lanes=0,D1(o,c,h)}return Da(o,c,h)}var B1,mg,W1,q1;B1=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},mg=function(){},W1=function(o,c,h,g){var w=o.memoizedProps;if(w!==g){o=c.stateNode,Qo(oa.current);var k=null;switch(h){case"input":w=ze(o,w),g=ze(o,g),k=[];break;case"select":w=ee({},w,{value:void 0}),g=ee({},g,{value:void 0}),k=[];break;case"textarea":w=ge(o,w),g=ge(o,g),k=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Qd)}qt(h,g);var O;h=null;for(xe in w)if(!g.hasOwnProperty(xe)&&w.hasOwnProperty(xe)&&w[xe]!=null)if(xe==="style"){var L=w[xe];for(O in L)L.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?k||(k=[]):(k=k||[]).push(xe,null));for(xe in g){var G=g[xe];if(L=w!=null?w[xe]:void 0,g.hasOwnProperty(xe)&&G!==L&&(G!=null||L!=null))if(xe==="style")if(L){for(O in L)!L.hasOwnProperty(O)||G&&G.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in G)G.hasOwnProperty(O)&&L[O]!==G[O]&&(h||(h={}),h[O]=G[O])}else h||(k||(k=[]),k.push(xe,h)),h=G;else xe==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,L=L?L.__html:void 0,G!=null&&L!==G&&(k=k||[]).push(xe,G)):xe==="children"?typeof G!="string"&&typeof G!="number"||(k=k||[]).push(xe,""+G):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(G!=null&&xe==="onScroll"&&br("scroll",o),k||L===G||(k=[])):(k=k||[]).push(xe,G))}h&&(k=k||[]).push("style",h);var xe=k;(c.updateQueue=xe)&&(c.flags|=4)}},q1=function(o,c,h,g){h!==g&&(c.flags|=4)};function _u(o,c){if(!Tr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function us(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function $I(o,c,h){var g=c.pendingProps;switch($p(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(c),null;case 1:return Os(c.type)&&ef(),us(c),null;case 3:return g=c.stateNode,ec(),jr(Ps),jr(ls),Yp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(af(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Li!==null&&(Ng(Li),Li=null))),mg(o,c),us(c),null;case 5:Kp(c);var w=Qo(bu.current);if(h=c.type,o!==null&&c.stateNode!=null)W1(o,c,h,g,w),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return us(c),null}if(o=Qo(oa.current),af(c)){g=c.stateNode,h=c.type;var k=c.memoizedProps;switch(g[aa]=c,g[gu]=k,o=(c.mode&1)!==0,h){case"dialog":br("cancel",g),br("close",g);break;case"iframe":case"object":case"embed":br("load",g);break;case"video":case"audio":for(w=0;w<hu.length;w++)br(hu[w],g);break;case"source":br("error",g);break;case"img":case"image":case"link":br("error",g),br("load",g);break;case"details":br("toggle",g);break;case"input":dt(g,k),br("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},br("invalid",g);break;case"textarea":ke(g,k),br("invalid",g)}qt(h,k),w=null;for(var O in k)if(k.hasOwnProperty(O)){var L=k[O];O==="children"?typeof L=="string"?g.textContent!==L&&(k.suppressHydrationWarning!==!0&&Xd(g.textContent,L,o),w=["children",L]):typeof L=="number"&&g.textContent!==""+L&&(k.suppressHydrationWarning!==!0&&Xd(g.textContent,L,o),w=["children",""+L]):s.hasOwnProperty(O)&&L!=null&&O==="onScroll"&&br("scroll",g)}switch(h){case"input":Me(g),_t(g,k,!0);break;case"textarea":Me(g),je(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=Qd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{O=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Be(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=O.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=O.createElement(h,{is:g.is}):(o=O.createElement(h),h==="select"&&(O=o,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):o=O.createElementNS(o,h),o[aa]=c,o[gu]=g,B1(o,c,!1,!1),c.stateNode=o;e:{switch(O=_r(h,g),h){case"dialog":br("cancel",o),br("close",o),w=g;break;case"iframe":case"object":case"embed":br("load",o),w=g;break;case"video":case"audio":for(w=0;w<hu.length;w++)br(hu[w],o);w=g;break;case"source":br("error",o),w=g;break;case"img":case"image":case"link":br("error",o),br("load",o),w=g;break;case"details":br("toggle",o),w=g;break;case"input":dt(o,g),w=ze(o,g),br("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=ee({},g,{value:void 0}),br("invalid",o);break;case"textarea":ke(o,g),w=ge(o,g),br("invalid",o);break;default:w=g}qt(h,w),L=w;for(k in L)if(L.hasOwnProperty(k)){var G=L[k];k==="style"?Ft(o,G):k==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Tt(o,G)):k==="children"?typeof G=="string"?(h!=="textarea"||G!=="")&&nr(o,G):typeof G=="number"&&nr(o,""+G):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?G!=null&&k==="onScroll"&&br("scroll",o):G!=null&&C(o,k,G,O))}switch(h){case"input":Me(o),_t(o,g,!1);break;case"textarea":Me(o),je(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Q(g.value));break;case"select":o.multiple=!!g.multiple,k=g.value,k!=null?ie(o,!!g.multiple,k,!1):g.defaultValue!=null&&ie(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=Qd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return us(c),null;case 6:if(o&&c.stateNode!=null)q1(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=Qo(bu.current),Qo(oa.current),af(c)){if(g=c.stateNode,h=c.memoizedProps,g[aa]=c,(k=g.nodeValue!==h)&&(o=Gs,o!==null))switch(o.tag){case 3:Xd(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Xd(g.nodeValue,h,(o.mode&1)!==0)}k&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[aa]=c,c.stateNode=g}return us(c),null;case 13:if(jr(zr),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Tr&&Ys!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Kb(),Jl(),c.flags|=98560,k=!1;else if(k=af(c),g!==null&&g.dehydrated!==null){if(o===null){if(!k)throw Error(r(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[aa]=c}else Jl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;us(c),k=!1}else Li!==null&&(Ng(Li),Li=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(zr.current&1)!==0?_n===0&&(_n=3):Eg())),c.updateQueue!==null&&(c.flags|=4),us(c),null);case 4:return ec(),mg(o,c),o===null&&mu(c.stateNode.containerInfo),us(c),null;case 10:return Bp(c.type._context),us(c),null;case 17:return Os(c.type)&&ef(),us(c),null;case 19:if(jr(zr),k=c.memoizedState,k===null)return us(c),null;if(g=(c.flags&128)!==0,O=k.rendering,O===null)if(g)_u(k,!1);else{if(_n!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(O=ff(o),O!==null){for(c.flags|=128,_u(k,!1),g=O.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)k=h,o=g,k.flags&=14680066,O=k.alternate,O===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=O.childLanes,k.lanes=O.lanes,k.child=O.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=O.memoizedProps,k.memoizedState=O.memoizedState,k.updateQueue=O.updateQueue,k.type=O.type,o=O.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return hr(zr,zr.current&1|2),c.child}o=o.sibling}k.tail!==null&&Ut()>sc&&(c.flags|=128,g=!0,_u(k,!1),c.lanes=4194304)}else{if(!g)if(o=ff(O),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),_u(k,!0),k.tail===null&&k.tailMode==="hidden"&&!O.alternate&&!Tr)return us(c),null}else 2*Ut()-k.renderingStartTime>sc&&h!==1073741824&&(c.flags|=128,g=!0,_u(k,!1),c.lanes=4194304);k.isBackwards?(O.sibling=c.child,c.child=O):(h=k.last,h!==null?h.sibling=O:c.child=O,k.last=O)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=Ut(),c.sibling=null,h=zr.current,hr(zr,g?h&1|2:h&1),c):(us(c),null);case 22:case 23:return Cg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Js&1073741824)!==0&&(us(c),c.subtreeFlags&6&&(c.flags|=8192)):us(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function MI(o,c){switch($p(c),c.tag){case 1:return Os(c.type)&&ef(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return ec(),jr(Ps),jr(ls),Yp(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Kp(c),null;case 13:if(jr(zr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Jl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return jr(zr),null;case 4:return ec(),null;case 10:return Bp(c.type._context),null;case 22:case 23:return Cg(),null;case 24:return null;default:return null}}var bf=!1,ds=!1,FI=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function rc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Yr(o,c,g)}else h.current=null}function pg(o,c,h){try{h()}catch(g){Yr(o,c,g)}}var V1=!1;function LI(o,c){if(Cp=ys,o=Sb(),xp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var O=0,L=-1,G=-1,xe=0,Pe=0,De=o,Ae=null;t:for(;;){for(var He;De!==h||w!==0&&De.nodeType!==3||(L=O+w),De!==k||g!==0&&De.nodeType!==3||(G=O+g),De.nodeType===3&&(O+=De.nodeValue.length),(He=De.firstChild)!==null;)Ae=De,De=He;for(;;){if(De===o)break t;if(Ae===h&&++xe===w&&(L=O),Ae===k&&++Pe===g&&(G=O),(He=De.nextSibling)!==null)break;De=Ae,Ae=De.parentNode}De=He}h=L===-1||G===-1?null:{start:L,end:G}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ep={focusedElem:o,selectionRange:h},ys=!1,Ge=c;Ge!==null;)if(c=Ge,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ge=o;else for(;Ge!==null;){c=Ge;try{var Xe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Qe=Xe.memoizedProps,Xr=Xe.memoizedState,he=c.stateNode,te=he.getSnapshotBeforeUpdate(c.elementType===c.type?Qe:zi(c.type,Qe),Xr);he.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var me=c.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Fe){Yr(c,c.return,Fe)}if(o=c.sibling,o!==null){o.return=c.return,Ge=o;break}Ge=c.return}return Xe=V1,V1=!1,Xe}function Cu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var k=w.destroy;w.destroy=void 0,k!==void 0&&pg(c,h,k)}w=w.next}while(w!==g)}}function jf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function gg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function H1(o){var c=o.alternate;c!==null&&(o.alternate=null,H1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[aa],delete c[gu],delete c[Tp],delete c[bI],delete c[jI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function K1(o){return o.tag===5||o.tag===3||o.tag===4}function G1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||K1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function yg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Qd));else if(g!==4&&(o=o.child,o!==null))for(yg(o,c,h),o=o.sibling;o!==null;)yg(o,c,h),o=o.sibling}function vg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(vg(o,c,h),o=o.sibling;o!==null;)vg(o,c,h),o=o.sibling}var Qn=null,Ui=!1;function wo(o,c,h){for(h=h.child;h!==null;)Y1(o,c,h),h=h.sibling}function Y1(o,c,h){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(_e,h)}catch{}switch(h.tag){case 5:ds||rc(h,c);case 6:var g=Qn,w=Ui;Qn=null,wo(o,c,h),Qn=g,Ui=w,Qn!==null&&(Ui?(o=Qn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Qn.removeChild(h.stateNode));break;case 18:Qn!==null&&(Ui?(o=Qn,h=h.stateNode,o.nodeType===8?Op(o.parentNode,h):o.nodeType===1&&Op(o,h),kn(o)):Op(Qn,h.stateNode));break;case 4:g=Qn,w=Ui,Qn=h.stateNode.containerInfo,Ui=!0,wo(o,c,h),Qn=g,Ui=w;break;case 0:case 11:case 14:case 15:if(!ds&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var k=w,O=k.destroy;k=k.tag,O!==void 0&&((k&2)!==0||(k&4)!==0)&&pg(h,c,O),w=w.next}while(w!==g)}wo(o,c,h);break;case 1:if(!ds&&(rc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(L){Yr(h,c,L)}wo(o,c,h);break;case 21:wo(o,c,h);break;case 22:h.mode&1?(ds=(g=ds)||h.memoizedState!==null,wo(o,c,h),ds=g):wo(o,c,h);break;default:wo(o,c,h)}}function J1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new FI),c.forEach(function(g){var w=GI.bind(null,o,g);h.has(g)||(h.add(g),g.then(w,w))})}}function Bi(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var k=o,O=c,L=O;e:for(;L!==null;){switch(L.tag){case 5:Qn=L.stateNode,Ui=!1;break e;case 3:Qn=L.stateNode.containerInfo,Ui=!0;break e;case 4:Qn=L.stateNode.containerInfo,Ui=!0;break e}L=L.return}if(Qn===null)throw Error(r(160));Y1(k,O,w),Qn=null,Ui=!1;var G=w.alternate;G!==null&&(G.return=null),w.return=null}catch(xe){Yr(w,c,xe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)X1(c,o),c=c.sibling}function X1(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Bi(c,o),ca(o),g&4){try{Cu(3,o,o.return),jf(3,o)}catch(Qe){Yr(o,o.return,Qe)}try{Cu(5,o,o.return)}catch(Qe){Yr(o,o.return,Qe)}}break;case 1:Bi(c,o),ca(o),g&512&&h!==null&&rc(h,h.return);break;case 5:if(Bi(c,o),ca(o),g&512&&h!==null&&rc(h,h.return),o.flags&32){var w=o.stateNode;try{nr(w,"")}catch(Qe){Yr(o,o.return,Qe)}}if(g&4&&(w=o.stateNode,w!=null)){var k=o.memoizedProps,O=h!==null?h.memoizedProps:k,L=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{L==="input"&&k.type==="radio"&&k.name!=null&&ft(w,k),_r(L,O);var xe=_r(L,k);for(O=0;O<G.length;O+=2){var Pe=G[O],De=G[O+1];Pe==="style"?Ft(w,De):Pe==="dangerouslySetInnerHTML"?Tt(w,De):Pe==="children"?nr(w,De):C(w,Pe,De,xe)}switch(L){case"input":$t(w,k);break;case"textarea":ve(w,k);break;case"select":var Ae=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!k.multiple;var He=k.value;He!=null?ie(w,!!k.multiple,He,!1):Ae!==!!k.multiple&&(k.defaultValue!=null?ie(w,!!k.multiple,k.defaultValue,!0):ie(w,!!k.multiple,k.multiple?[]:"",!1))}w[gu]=k}catch(Qe){Yr(o,o.return,Qe)}}break;case 6:if(Bi(c,o),ca(o),g&4){if(o.stateNode===null)throw Error(r(162));w=o.stateNode,k=o.memoizedProps;try{w.nodeValue=k}catch(Qe){Yr(o,o.return,Qe)}}break;case 3:if(Bi(c,o),ca(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{kn(c.containerInfo)}catch(Qe){Yr(o,o.return,Qe)}break;case 4:Bi(c,o),ca(o);break;case 13:Bi(c,o),ca(o),w=o.child,w.flags&8192&&(k=w.memoizedState!==null,w.stateNode.isHidden=k,!k||w.alternate!==null&&w.alternate.memoizedState!==null||(bg=Ut())),g&4&&J1(o);break;case 22:if(Pe=h!==null&&h.memoizedState!==null,o.mode&1?(ds=(xe=ds)||Pe,Bi(c,o),ds=xe):Bi(c,o),ca(o),g&8192){if(xe=o.memoizedState!==null,(o.stateNode.isHidden=xe)&&!Pe&&(o.mode&1)!==0)for(Ge=o,Pe=o.child;Pe!==null;){for(De=Ge=Pe;Ge!==null;){switch(Ae=Ge,He=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:Cu(4,Ae,Ae.return);break;case 1:rc(Ae,Ae.return);var Xe=Ae.stateNode;if(typeof Xe.componentWillUnmount=="function"){g=Ae,h=Ae.return;try{c=g,Xe.props=c.memoizedProps,Xe.state=c.memoizedState,Xe.componentWillUnmount()}catch(Qe){Yr(g,h,Qe)}}break;case 5:rc(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){ej(De);continue}}He!==null?(He.return=Ae,Ge=He):ej(De)}Pe=Pe.sibling}e:for(Pe=null,De=o;;){if(De.tag===5){if(Pe===null){Pe=De;try{w=De.stateNode,xe?(k=w.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(L=De.stateNode,G=De.memoizedProps.style,O=G!=null&&G.hasOwnProperty("display")?G.display:null,L.style.display=yr("display",O))}catch(Qe){Yr(o,o.return,Qe)}}}else if(De.tag===6){if(Pe===null)try{De.stateNode.nodeValue=xe?"":De.memoizedProps}catch(Qe){Yr(o,o.return,Qe)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===o)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===o)break e;for(;De.sibling===null;){if(De.return===null||De.return===o)break e;Pe===De&&(Pe=null),De=De.return}Pe===De&&(Pe=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:Bi(c,o),ca(o),g&4&&J1(o);break;case 21:break;default:Bi(c,o),ca(o)}}function ca(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(K1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(nr(w,""),g.flags&=-33);var k=G1(o);vg(o,k,w);break;case 3:case 4:var O=g.stateNode.containerInfo,L=G1(o);yg(o,L,O);break;default:throw Error(r(161))}}catch(G){Yr(o,o.return,G)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function zI(o,c,h){Ge=o,Q1(o)}function Q1(o,c,h){for(var g=(o.mode&1)!==0;Ge!==null;){var w=Ge,k=w.child;if(w.tag===22&&g){var O=w.memoizedState!==null||bf;if(!O){var L=w.alternate,G=L!==null&&L.memoizedState!==null||ds;L=bf;var xe=ds;if(bf=O,(ds=G)&&!xe)for(Ge=w;Ge!==null;)O=Ge,G=O.child,O.tag===22&&O.memoizedState!==null?tj(w):G!==null?(G.return=O,Ge=G):tj(w);for(;k!==null;)Ge=k,Q1(k),k=k.sibling;Ge=w,bf=L,ds=xe}Z1(o)}else(w.subtreeFlags&8772)!==0&&k!==null?(k.return=w,Ge=k):Z1(o)}}function Z1(o){for(;Ge!==null;){var c=Ge;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:ds||jf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!ds)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:zi(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&e1(c,k,g);break;case 3:var O=c.updateQueue;if(O!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}e1(c,O,h)}break;case 5:var L=c.stateNode;if(h===null&&c.flags&4){h=L;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&h.focus();break;case"img":G.src&&(h.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var xe=c.alternate;if(xe!==null){var Pe=xe.memoizedState;if(Pe!==null){var De=Pe.dehydrated;De!==null&&kn(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ds||c.flags&512&&gg(c)}catch(Ae){Yr(c,c.return,Ae)}}if(c===o){Ge=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ge=h;break}Ge=c.return}}function ej(o){for(;Ge!==null;){var c=Ge;if(c===o){Ge=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ge=h;break}Ge=c.return}}function tj(o){for(;Ge!==null;){var c=Ge;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{jf(4,c)}catch(G){Yr(c,h,G)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(G){Yr(c,w,G)}}var k=c.return;try{gg(c)}catch(G){Yr(c,k,G)}break;case 5:var O=c.return;try{gg(c)}catch(G){Yr(c,O,G)}}}catch(G){Yr(c,c.return,G)}if(c===o){Ge=null;break}var L=c.sibling;if(L!==null){L.return=c.return,Ge=L;break}Ge=c.return}}var UI=Math.ceil,Sf=T.ReactCurrentDispatcher,xg=T.ReactCurrentOwner,xi=T.ReactCurrentBatchConfig,Bt=0,Fn=null,un=null,Zn=0,Js=0,nc=po(0),_n=0,Eu=null,el=0,kf=0,wg=0,Au=null,Is=null,bg=0,sc=1/0,Ra=null,Nf=!1,jg=null,bo=null,_f=!1,jo=null,Cf=0,Pu=0,Sg=null,Ef=-1,Af=0;function ws(){return(Bt&6)!==0?Ut():Ef!==-1?Ef:Ef=Ut()}function So(o){return(o.mode&1)===0?1:(Bt&2)!==0&&Zn!==0?Zn&-Zn:kI.transition!==null?(Af===0&&(Af=uo()),Af):(o=Et,o!==0||(o=window.event,o=o===void 0?16:A(o.type)),o)}function Wi(o,c,h,g){if(50<Pu)throw Pu=0,Sg=null,Error(r(185));Ii(o,h,g),((Bt&2)===0||o!==Fn)&&(o===Fn&&((Bt&2)===0&&(kf|=h),_n===4&&ko(o,Zn)),Ds(o,g),h===1&&Bt===0&&(c.mode&1)===0&&(sc=Ut()+500,rf&&yo()))}function Ds(o,c){var h=o.callbackNode;na(o,c);var g=sr(o,o===Fn?Zn:0);if(g===0)h!==null&&on(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&on(h),c===1)o.tag===0?SI(nj.bind(null,o)):Bb(nj.bind(null,o)),xI(function(){(Bt&6)===0&&yo()}),h=null;else{switch(ln(g)){case 1:h=ae;break;case 4:h=Ne;break;case 16:h=Re;break;case 536870912:h=qe;break;default:h=Re}h=dj(h,rj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function rj(o,c){if(Ef=-1,Af=0,(Bt&6)!==0)throw Error(r(327));var h=o.callbackNode;if(ic()&&o.callbackNode!==h)return null;var g=sr(o,o===Fn?Zn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=Pf(o,g);else{c=g;var w=Bt;Bt|=2;var k=ij();(Fn!==o||Zn!==c)&&(Ra=null,sc=Ut()+500,rl(o,c));do try{qI();break}catch(L){sj(o,L)}while(!0);Up(),Sf.current=k,Bt=w,un!==null?c=0:(Fn=null,Zn=0,c=_n)}if(c!==0){if(c===2&&(w=sa(o),w!==0&&(g=w,c=kg(o,w))),c===1)throw h=Eu,rl(o,0),ko(o,g),Ds(o,Ut()),h;if(c===6)ko(o,g);else{if(w=o.current.alternate,(g&30)===0&&!BI(w)&&(c=Pf(o,g),c===2&&(k=sa(o),k!==0&&(g=k,c=kg(o,k))),c===1))throw h=Eu,rl(o,0),ko(o,g),Ds(o,Ut()),h;switch(o.finishedWork=w,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:nl(o,Is,Ra);break;case 3:if(ko(o,g),(g&130023424)===g&&(c=bg+500-Ut(),10<c)){if(sr(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){ws(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=Pp(nl.bind(null,o,Is,Ra),c);break}nl(o,Is,Ra);break;case 4:if(ko(o,g),(g&4194240)===g)break;for(c=o.eventTimes,w=-1;0<g;){var O=31-gt(g);k=1<<O,O=c[O],O>w&&(w=O),g&=~k}if(g=w,g=Ut()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*UI(g/1960))-g,10<g){o.timeoutHandle=Pp(nl.bind(null,o,Is,Ra),g);break}nl(o,Is,Ra);break;case 5:nl(o,Is,Ra);break;default:throw Error(r(329))}}}return Ds(o,Ut()),o.callbackNode===h?rj.bind(null,o):null}function kg(o,c){var h=Au;return o.current.memoizedState.isDehydrated&&(rl(o,c).flags|=256),o=Pf(o,c),o!==2&&(c=Is,Is=h,c!==null&&Ng(c)),o}function Ng(o){Is===null?Is=o:Is.push.apply(Is,o)}function BI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],k=w.getSnapshot;w=w.value;try{if(!Fi(k(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ko(o,c){for(c&=~wg,c&=~kf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-gt(c),g=1<<h;o[h]=-1,c&=~g}}function nj(o){if((Bt&6)!==0)throw Error(r(327));ic();var c=sr(o,0);if((c&1)===0)return Ds(o,Ut()),null;var h=Pf(o,c);if(o.tag!==0&&h===2){var g=sa(o);g!==0&&(c=g,h=kg(o,g))}if(h===1)throw h=Eu,rl(o,0),ko(o,c),Ds(o,Ut()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,nl(o,Is,Ra),Ds(o,Ut()),null}function _g(o,c){var h=Bt;Bt|=1;try{return o(c)}finally{Bt=h,Bt===0&&(sc=Ut()+500,rf&&yo())}}function tl(o){jo!==null&&jo.tag===0&&(Bt&6)===0&&ic();var c=Bt;Bt|=1;var h=xi.transition,g=Et;try{if(xi.transition=null,Et=1,o)return o()}finally{Et=g,xi.transition=h,Bt=c,(Bt&6)===0&&yo()}}function Cg(){Js=nc.current,jr(nc)}function rl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,vI(h)),un!==null)for(h=un.return;h!==null;){var g=h;switch($p(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ef();break;case 3:ec(),jr(Ps),jr(ls),Yp();break;case 5:Kp(g);break;case 4:ec();break;case 13:jr(zr);break;case 19:jr(zr);break;case 10:Bp(g.type._context);break;case 22:case 23:Cg()}h=h.return}if(Fn=o,un=o=No(o.current,null),Zn=Js=c,_n=0,Eu=null,wg=kf=el=0,Is=Au=null,Xo!==null){for(c=0;c<Xo.length;c++)if(h=Xo[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,k=h.pending;if(k!==null){var O=k.next;k.next=w,g.next=O}h.pending=g}Xo=null}return o}function sj(o,c){do{var h=un;try{if(Up(),hf.current=yf,mf){for(var g=Ur.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}mf=!1}if(Zo=0,Mn=Nn=Ur=null,ju=!1,Su=0,xg.current=null,h===null||h.return===null){_n=1,Eu=c,un=null;break}e:{var k=o,O=h.return,L=h,G=c;if(c=Zn,L.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var xe=G,Pe=L,De=Pe.tag;if((Pe.mode&1)===0&&(De===0||De===11||De===15)){var Ae=Pe.alternate;Ae?(Pe.updateQueue=Ae.updateQueue,Pe.memoizedState=Ae.memoizedState,Pe.lanes=Ae.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var He=A1(O);if(He!==null){He.flags&=-257,P1(He,O,L,k,c),He.mode&1&&E1(k,xe,c),c=He,G=xe;var Xe=c.updateQueue;if(Xe===null){var Qe=new Set;Qe.add(G),c.updateQueue=Qe}else Xe.add(G);break e}else{if((c&1)===0){E1(k,xe,c),Eg();break e}G=Error(r(426))}}else if(Tr&&L.mode&1){var Xr=A1(O);if(Xr!==null){(Xr.flags&65536)===0&&(Xr.flags|=256),P1(Xr,O,L,k,c),Lp(tc(G,L));break e}}k=G=tc(G,L),_n!==4&&(_n=2),Au===null?Au=[k]:Au.push(k),k=O;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var he=_1(k,G,c);Zb(k,he);break e;case 1:L=G;var te=k.type,me=k.stateNode;if((k.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(bo===null||!bo.has(me)))){k.flags|=65536,c&=-c,k.lanes|=c;var Fe=C1(k,L,c);Zb(k,Fe);break e}}k=k.return}while(k!==null)}oj(h)}catch(et){c=et,un===h&&h!==null&&(un=h=h.return);continue}break}while(!0)}function ij(){var o=Sf.current;return Sf.current=yf,o===null?yf:o}function Eg(){(_n===0||_n===3||_n===2)&&(_n=4),Fn===null||(el&268435455)===0&&(kf&268435455)===0||ko(Fn,Zn)}function Pf(o,c){var h=Bt;Bt|=2;var g=ij();(Fn!==o||Zn!==c)&&(Ra=null,rl(o,c));do try{WI();break}catch(w){sj(o,w)}while(!0);if(Up(),Bt=h,Sf.current=g,un!==null)throw Error(r(261));return Fn=null,Zn=0,_n}function WI(){for(;un!==null;)aj(un)}function qI(){for(;un!==null&&!wn();)aj(un)}function aj(o){var c=uj(o.alternate,o,Js);o.memoizedProps=o.pendingProps,c===null?oj(o):un=c,xg.current=null}function oj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=$I(h,c,Js),h!==null){un=h;return}}else{if(h=MI(h,c),h!==null){h.flags&=32767,un=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{_n=6,un=null;return}}if(c=c.sibling,c!==null){un=c;return}un=c=o}while(c!==null);_n===0&&(_n=5)}function nl(o,c,h){var g=Et,w=xi.transition;try{xi.transition=null,Et=1,VI(o,c,h,g)}finally{xi.transition=w,Et=g}return null}function VI(o,c,h,g){do ic();while(jo!==null);if((Bt&6)!==0)throw Error(r(327));h=o.finishedWork;var w=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var k=h.lanes|h.childLanes;if(ka(o,k),o===Fn&&(un=Fn=null,Zn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||_f||(_f=!0,dj(Re,function(){return ic(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=xi.transition,xi.transition=null;var O=Et;Et=1;var L=Bt;Bt|=4,xg.current=null,LI(o,h),X1(h,o),dI(Ep),ys=!!Cp,Ep=Cp=null,o.current=h,zI(h),hs(),Bt=L,Et=O,xi.transition=k}else o.current=h;if(_f&&(_f=!1,jo=o,Cf=w),k=o.pendingLanes,k===0&&(bo=null),pt(h.stateNode),Ds(o,Ut()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(Nf)throw Nf=!1,o=jg,jg=null,o;return(Cf&1)!==0&&o.tag!==0&&ic(),k=o.pendingLanes,(k&1)!==0?o===Sg?Pu++:(Pu=0,Sg=o):Pu=0,yo(),null}function ic(){if(jo!==null){var o=ln(Cf),c=xi.transition,h=Et;try{if(xi.transition=null,Et=16>o?16:o,jo===null)var g=!1;else{if(o=jo,jo=null,Cf=0,(Bt&6)!==0)throw Error(r(331));var w=Bt;for(Bt|=4,Ge=o.current;Ge!==null;){var k=Ge,O=k.child;if((Ge.flags&16)!==0){var L=k.deletions;if(L!==null){for(var G=0;G<L.length;G++){var xe=L[G];for(Ge=xe;Ge!==null;){var Pe=Ge;switch(Pe.tag){case 0:case 11:case 15:Cu(8,Pe,k)}var De=Pe.child;if(De!==null)De.return=Pe,Ge=De;else for(;Ge!==null;){Pe=Ge;var Ae=Pe.sibling,He=Pe.return;if(H1(Pe),Pe===xe){Ge=null;break}if(Ae!==null){Ae.return=He,Ge=Ae;break}Ge=He}}}var Xe=k.alternate;if(Xe!==null){var Qe=Xe.child;if(Qe!==null){Xe.child=null;do{var Xr=Qe.sibling;Qe.sibling=null,Qe=Xr}while(Qe!==null)}}Ge=k}}if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,Ge=O;else e:for(;Ge!==null;){if(k=Ge,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Cu(9,k,k.return)}var he=k.sibling;if(he!==null){he.return=k.return,Ge=he;break e}Ge=k.return}}var te=o.current;for(Ge=te;Ge!==null;){O=Ge;var me=O.child;if((O.subtreeFlags&2064)!==0&&me!==null)me.return=O,Ge=me;else e:for(O=te;Ge!==null;){if(L=Ge,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:jf(9,L)}}catch(et){Yr(L,L.return,et)}if(L===O){Ge=null;break e}var Fe=L.sibling;if(Fe!==null){Fe.return=L.return,Ge=Fe;break e}Ge=L.return}}if(Bt=w,yo(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(_e,o)}catch{}g=!0}return g}finally{Et=h,xi.transition=c}}return!1}function lj(o,c,h){c=tc(h,c),c=_1(o,c,1),o=xo(o,c,1),c=ws(),o!==null&&(Ii(o,1,c),Ds(o,c))}function Yr(o,c,h){if(o.tag===3)lj(o,o,h);else for(;c!==null;){if(c.tag===3){lj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(bo===null||!bo.has(g))){o=tc(h,o),o=C1(c,o,1),c=xo(c,o,1),o=ws(),c!==null&&(Ii(c,1,o),Ds(c,o));break}}c=c.return}}function HI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=ws(),o.pingedLanes|=o.suspendedLanes&h,Fn===o&&(Zn&h)===h&&(_n===4||_n===3&&(Zn&130023424)===Zn&&500>Ut()-bg?rl(o,0):wg|=h),Ds(o,c)}function cj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ct,Ct<<=1,(Ct&130023424)===0&&(Ct=4194304)));var h=ws();o=Ta(o,c),o!==null&&(Ii(o,c,h),Ds(o,h))}function KI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),cj(o,h)}function GI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),cj(o,h)}var uj;uj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Ps.current)Ts=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Ts=!1,RI(o,c,h);Ts=(o.flags&131072)!==0}else Ts=!1,Tr&&(c.flags&1048576)!==0&&Wb(c,sf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;wf(o,c),o=c.pendingProps;var w=Kl(c,ls.current);Zl(c,h),w=Qp(null,c,g,o,w,h);var k=Zp();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Os(g)?(k=!0,tf(c)):k=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Vp(c),w.updater=vf,c.stateNode=w,w._reactInternals=c,ig(c,g,o,h),c=cg(null,c,g,!0,k,h)):(c.tag=0,Tr&&k&&Rp(c),xs(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(wf(o,c),o=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=JI(g),o=zi(g,o),w){case 0:c=lg(null,c,g,o,h);break e;case 1:c=$1(null,c,g,o,h);break e;case 11:c=O1(null,c,g,o,h);break e;case 14:c=T1(null,c,g,zi(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:zi(g,w),lg(o,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:zi(g,w),$1(o,c,g,w,h);case 3:e:{if(M1(c),o===null)throw Error(r(387));g=c.pendingProps,k=c.memoizedState,w=k.element,Qb(o,c),df(c,g,null,h);var O=c.memoizedState;if(g=O.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){w=tc(Error(r(423)),c),c=F1(o,c,g,h,w);break e}else if(g!==w){w=tc(Error(r(424)),c),c=F1(o,c,g,h,w);break e}else for(Ys=mo(c.stateNode.containerInfo.firstChild),Gs=c,Tr=!0,Li=null,h=Jb(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Jl(),g===w){c=Da(o,c,h);break e}xs(o,c,g,h)}c=c.child}return c;case 5:return t1(c),o===null&&Fp(c),g=c.type,w=c.pendingProps,k=o!==null?o.memoizedProps:null,O=w.children,Ap(g,w)?O=null:k!==null&&Ap(g,k)&&(c.flags|=32),R1(o,c),xs(o,c,O,h),c.child;case 6:return o===null&&Fp(c),null;case 13:return L1(o,c,h);case 4:return Hp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Xl(c,null,g,h):xs(o,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:zi(g,w),O1(o,c,g,w,h);case 7:return xs(o,c,c.pendingProps,h),c.child;case 8:return xs(o,c,c.pendingProps.children,h),c.child;case 12:return xs(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,k=c.memoizedProps,O=w.value,hr(lf,g._currentValue),g._currentValue=O,k!==null)if(Fi(k.value,O)){if(k.children===w.children&&!Ps.current){c=Da(o,c,h);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var L=k.dependencies;if(L!==null){O=k.child;for(var G=L.firstContext;G!==null;){if(G.context===g){if(k.tag===1){G=Ia(-1,h&-h),G.tag=2;var xe=k.updateQueue;if(xe!==null){xe=xe.shared;var Pe=xe.pending;Pe===null?G.next=G:(G.next=Pe.next,Pe.next=G),xe.pending=G}}k.lanes|=h,G=k.alternate,G!==null&&(G.lanes|=h),Wp(k.return,h,c),L.lanes|=h;break}G=G.next}}else if(k.tag===10)O=k.type===c.type?null:k.child;else if(k.tag===18){if(O=k.return,O===null)throw Error(r(341));O.lanes|=h,L=O.alternate,L!==null&&(L.lanes|=h),Wp(O,h,c),O=k.sibling}else O=k.child;if(O!==null)O.return=k;else for(O=k;O!==null;){if(O===c){O=null;break}if(k=O.sibling,k!==null){k.return=O.return,O=k;break}O=O.return}k=O}xs(o,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,Zl(c,h),w=yi(w),g=g(w),c.flags|=1,xs(o,c,g,h),c.child;case 14:return g=c.type,w=zi(g,c.pendingProps),w=zi(g.type,w),T1(o,c,g,w,h);case 15:return I1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:zi(g,w),wf(o,c),c.tag=1,Os(g)?(o=!0,tf(c)):o=!1,Zl(c,h),k1(c,g,w),ig(c,g,w,h),cg(null,c,g,!0,o,h);case 19:return U1(o,c,h);case 22:return D1(o,c,h)}throw Error(r(156,c.tag))};function dj(o,c){return Hr(o,c)}function YI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(o,c,h,g){return new YI(o,c,h,g)}function Ag(o){return o=o.prototype,!(!o||!o.isReactComponent)}function JI(o){if(typeof o=="function")return Ag(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===se)return 14}return 2}function No(o,c){var h=o.alternate;return h===null?(h=wi(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Of(o,c,h,g,w,k){var O=2;if(g=o,typeof o=="function")Ag(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case z:return sl(h.children,w,k,c);case J:O=8,w|=8;break;case H:return o=wi(12,h,c,w|2),o.elementType=H,o.lanes=k,o;case ce:return o=wi(13,h,c,w),o.elementType=ce,o.lanes=k,o;case B:return o=wi(19,h,c,w),o.elementType=B,o.lanes=k,o;case de:return Tf(h,w,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case pe:O=10;break e;case Z:O=9;break e;case K:O=11;break e;case se:O=14;break e;case W:O=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=wi(O,h,c,w),c.elementType=o,c.type=g,c.lanes=k,c}function sl(o,c,h,g){return o=wi(7,o,g,c),o.lanes=h,o}function Tf(o,c,h,g){return o=wi(22,o,g,c),o.elementType=de,o.lanes=h,o.stateNode={isHidden:!1},o}function Pg(o,c,h){return o=wi(6,o,null,c),o.lanes=h,o}function Og(o,c,h){return c=wi(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function XI(o,c,h,g,w){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Tg(o,c,h,g,w,k,O,L,G){return o=new XI(o,c,h,L,G),c===1?(c=1,k===!0&&(c|=8)):c=0,k=wi(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vp(k),o}function QI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function fj(o){if(!o)return go;o=o._reactInternals;e:{if(Mr(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Os(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Os(h))return zb(o,h,c)}return c}function hj(o,c,h,g,w,k,O,L,G){return o=Tg(h,g,!0,o,w,k,O,L,G),o.context=fj(null),h=o.current,g=ws(),w=So(h),k=Ia(g,w),k.callback=c??null,xo(h,k,w),o.current.lanes=w,Ii(o,w,g),Ds(o,g),o}function If(o,c,h,g){var w=c.current,k=ws(),O=So(w);return h=fj(h),c.context===null?c.context=h:c.pendingContext=h,c=Ia(k,O),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=xo(w,c,O),o!==null&&(Wi(o,w,O,k),uf(o,w,O)),O}function Df(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function mj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Ig(o,c){mj(o,c),(o=o.alternate)&&mj(o,c)}function ZI(){return null}var pj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Dg(o){this._internalRoot=o}Rf.prototype.render=Dg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));If(o,c,null,null)},Rf.prototype.unmount=Dg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;tl(function(){If(null,o,null,null)}),c[Ea]=null}};function Rf(o){this._internalRoot=o}Rf.prototype.unstable_scheduleHydration=function(o){if(o){var c=jn();o={blockedOn:null,target:o,priority:c};for(var h=0;h<gs.length&&c!==0&&c<gs[h].priority;h++);gs.splice(h,0,o),h===0&&Ue(o)}};function Rg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function $f(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function gj(){}function eD(o,c,h,g,w){if(w){if(typeof g=="function"){var k=g;g=function(){var xe=Df(O);k.call(xe)}}var O=hj(c,g,o,0,null,!1,!1,"",gj);return o._reactRootContainer=O,o[Ea]=O.current,mu(o.nodeType===8?o.parentNode:o),tl(),O}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var L=g;g=function(){var xe=Df(G);L.call(xe)}}var G=Tg(o,0,!1,null,null,!1,!1,"",gj);return o._reactRootContainer=G,o[Ea]=G.current,mu(o.nodeType===8?o.parentNode:o),tl(function(){If(c,G,h,g)}),G}function Mf(o,c,h,g,w){var k=h._reactRootContainer;if(k){var O=k;if(typeof w=="function"){var L=w;w=function(){var G=Df(O);L.call(G)}}If(c,O,o,w)}else O=eD(h,c,o,w,g);return Df(O)}Na=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Rt(c.pendingLanes);h!==0&&(bn(c,h|1),Ds(c,Ut()),(Bt&6)===0&&(sc=Ut()+500,yo()))}break;case 13:tl(function(){var g=Ta(o,1);if(g!==null){var w=ws();Wi(g,o,1,w)}}),Ig(o,1)}},Fr=function(o){if(o.tag===13){var c=Ta(o,134217728);if(c!==null){var h=ws();Wi(c,o,134217728,h)}Ig(o,134217728)}},Vs=function(o){if(o.tag===13){var c=So(o),h=Ta(o,c);if(h!==null){var g=ws();Wi(h,o,c,g)}Ig(o,c)}},jn=function(){return Et},fi=function(o,c){var h=Et;try{return Et=o,c()}finally{Et=h}},Zt=function(o,c,h){switch(c){case"input":if($t(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=Zd(g);if(!w)throw Error(r(90));V(g),$t(g,w)}}}break;case"textarea":ve(o,h);break;case"select":c=h.value,c!=null&&ie(o,!!h.multiple,c,!1)}},Wr=_g,xr=tl;var tD={usingClientEntryPoint:!1,Events:[yu,Vl,Zd,Es,Rr,_g]},Ou={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rD={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=an(o),o===null?null:o.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{_e=Ff.inject(rD),ht=Ff}catch{}}return Rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tD,Rs.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(c))throw Error(r(200));return QI(o,c,null,h)},Rs.createRoot=function(o,c){if(!Rg(o))throw Error(r(299));var h=!1,g="",w=pj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=Tg(o,1,!1,null,null,h,!1,g,w),o[Ea]=c.current,mu(o.nodeType===8?o.parentNode:o),new Dg(c)},Rs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=an(c),o=o===null?null:o.stateNode,o},Rs.flushSync=function(o){return tl(o)},Rs.hydrate=function(o,c,h){if(!$f(c))throw Error(r(200));return Mf(null,o,c,!0,h)},Rs.hydrateRoot=function(o,c,h){if(!Rg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,k="",O=pj;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),c=hj(c,null,o,1,h??null,w,!1,k,O),o[Ea]=c.current,mu(o),g)for(o=0;o<g.length;o++)h=g[o],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new Rf(c)},Rs.render=function(o,c,h){if(!$f(c))throw Error(r(200));return Mf(null,o,c,!1,h)},Rs.unmountComponentAtNode=function(o){if(!$f(o))throw Error(r(40));return o._reactRootContainer?(tl(function(){Mf(null,null,o,!1,function(){o._reactRootContainer=null,o[Ea]=null})}),!0):!1},Rs.unstable_batchedUpdates=_g,Rs.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!$f(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Mf(o,c,h,!1,g)},Rs.version="18.3.1-next-f1338f8080-20240426",Rs}var kj;function gC(){if(kj)return Lg.exports;kj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lg.exports=mD(),Lg.exports}var Nj;function pD(){if(Nj)return Lf;Nj=1;var e=gC();return Lf.createRoot=e.createRoot,Lf.hydrateRoot=e.hydrateRoot,Lf}var gD=pD();const yD=ea(gD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _j="popstate";function vD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return Fv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ad(s)}return wD(t,r,null,e)}function Dr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _i(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xD(){return Math.random().toString(36).substring(2,10)}function Cj(e,t){return{usr:e.state,key:e.key,idx:t}}function Fv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Hc(t):t,state:r,key:t&&t.key||n||xD()}}function ad({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-m;m=S,d&&d({action:u,location:b.location,delta:_})}function y(S,_){u="PUSH";let E=Fv(b.location,S,_);m=f()+1;let C=Cj(E,m),T=b.createHref(E);try{l.pushState(C,"",T)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(T)}i&&d&&d({action:u,location:b.location,delta:1})}function x(S,_){u="REPLACE";let E=Fv(b.location,S,_);m=f();let C=Cj(E,m),T=b.createHref(E);l.replaceState(C,"",T),i&&d&&d({action:u,location:b.location,delta:0})}function j(S){return bD(S)}let b={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(_j,p),d=S,()=>{s.removeEventListener(_j,p),d=null}},createHref(S){return t(s,S)},createURL:j,encodeLocation(S){let _=j(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(S){return l.go(S)}};return b}function bD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Dr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ad(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function yC(e,t,r="/"){return jD(e,t,r,!1)}function jD(e,t,r,n){let s=typeof t=="string"?Hc(t):t,i=Ka(s.pathname||"/",r);if(i==null)return null;let l=vC(e);SD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=DD(i);u=TD(l[d],m,n)}return u}function vC(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Dr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Wa([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Dr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),vC(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:PD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of xC(l.path))i(l,u,!0,m)}),t}function xC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=xC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function SD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:OD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var kD=/^:[\w-]+$/,ND=3,_D=2,CD=1,ED=10,AD=-2,Ej=e=>e==="*";function PD(e,t){let r=e.split("/"),n=r.length;return r.some(Ej)&&(n+=AD),t&&(n+=_D),r.filter(s=>!Ej(s)).reduce((s,i)=>s+(kD.test(i)?ND:i===""?CD:ED),n)}function OD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function TD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=bh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=bh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Wa([i,p.pathname]),pathnameBase:FD(Wa([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=Wa([i,p.pathnameBase]))}return l}function bh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ID(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let j=u[y]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function ID(e,t=!1,r=!0){_i(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function DD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _i(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function RD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Hc(e):e;return{pathname:r?r.startsWith("/")?r:$D(r,t):t,search:LD(n),hash:zD(s)}}function $D(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Bg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ox(e){let t=MD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function lx(e,t,r,n=!1){let s;typeof e=="string"?s=Hc(e):(s={...e},Dr(!s.pathname||!s.pathname.includes("?"),Bg("?","pathname","search",s)),Dr(!s.pathname||!s.pathname.includes("#"),Bg("#","pathname","hash",s)),Dr(!s.search||!s.search.includes("#"),Bg("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=RD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Wa=e=>e.join("/").replace(/\/\/+/g,"/"),FD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var wC=["POST","PUT","PATCH","DELETE"];new Set(wC);var BD=["GET",...wC];new Set(BD);var Kc=v.createContext(null);Kc.displayName="DataRouter";var wm=v.createContext(null);wm.displayName="DataRouterState";v.createContext(!1);var bC=v.createContext({isTransitioning:!1});bC.displayName="ViewTransition";var WD=v.createContext(new Map);WD.displayName="Fetchers";var qD=v.createContext(null);qD.displayName="Await";var ta=v.createContext(null);ta.displayName="Navigation";var jd=v.createContext(null);jd.displayName="Location";var wa=v.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var cx=v.createContext(null);cx.displayName="RouteError";function VD(e,{relative:t}={}){Dr(Gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ta),{hash:s,pathname:i,search:l}=Sd(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:Wa([r,i])),n.createHref({pathname:u,search:l,hash:s})}function Gc(){return v.useContext(jd)!=null}function no(){return Dr(Gc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(jd).location}var jC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SC(e){v.useContext(ta).static||v.useLayoutEffect(e)}function Bs(){let{isDataRoute:e}=v.useContext(wa);return e?s5():HD()}function HD(){Dr(Gc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Kc),{basename:t,navigator:r}=v.useContext(ta),{matches:n}=v.useContext(wa),{pathname:s}=no(),i=JSON.stringify(ox(n)),l=v.useRef(!1);return SC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(_i(l.current,jC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=lx(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Wa([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function Sd(e,{relative:t}={}){let{matches:r}=v.useContext(wa),{pathname:n}=no(),s=JSON.stringify(ox(r));return v.useMemo(()=>lx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function KD(e,t){return kC(e,t)}function kC(e,t,r,n,s){var E;Dr(Gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(ta),{matches:l}=v.useContext(wa),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";NC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=no(),x;if(t){let C=typeof t=="string"?Hc(t):t;Dr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let j=x.pathname||"/",b=j;if(f!=="/"){let C=f.replace(/^\//,"").split("/");b="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=yC(e,{pathname:b});_i(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),_i(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=QD(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Wa([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Wa([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?v.createElement(jd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function GD(){let e=n5(),t=UD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var YD=v.createElement(GD,null),JD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(wa.Provider,{value:this.props.routeContext},v.createElement(cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XD({routeContext:e,match:t,children:r}){let n=v.useContext(Kc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(wa.Provider,{value:e},r)}function QD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Dr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,j=null,b=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,j=f.route.errorElement||YD,u&&(d<0&&p===0?(NC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):d===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),_=()=>{let E;return y?E=j:x?E=b:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(XD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(JD,{location:r.location,revalidation:r.revalidation,component:j,error:y,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function ux(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZD(e){let t=v.useContext(Kc);return Dr(t,ux(e)),t}function e5(e){let t=v.useContext(wm);return Dr(t,ux(e)),t}function t5(e){let t=v.useContext(wa);return Dr(t,ux(e)),t}function dx(e){let t=t5(e),r=t.matches[t.matches.length-1];return Dr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function r5(){return dx("useRouteId")}function n5(){var n;let e=v.useContext(cx),t=e5("useRouteError"),r=dx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function s5(){let{router:e}=ZD("useNavigate"),t=dx("useNavigate"),r=v.useRef(!1);return SC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{_i(r.current,jC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Aj={};function NC(e,t,r){!t&&!Aj[e]&&(Aj[e]=!0,_i(!1,r))}v.memo(i5);function i5({routes:e,future:t,state:r,unstable_onError:n}){return kC(e,void 0,r,n,t)}function a5({to:e,replace:t,state:r,relative:n}){Dr(Gc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ta);_i(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(wa),{pathname:l}=no(),u=Bs(),d=lx(e,ox(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function Xs(e){Dr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Dr(!Gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=Hc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let j=Ka(d,l);return j==null?null:{location:{pathname:j,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return _i(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(ta.Provider,{value:u},v.createElement(jd.Provider,{children:t,value:x}))}function l5({children:e,location:t}){return KD(Lv(e),t)}function Lv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Lv(n.props.children,i));return}Dr(n.type===Xs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Lv(n.props.children,i)),r.push(l)}),r}var uh="get",dh="application/x-www-form-urlencoded";function bm(e){return e!=null&&typeof e.tagName=="string"}function c5(e){return bm(e)&&e.tagName.toLowerCase()==="button"}function u5(e){return bm(e)&&e.tagName.toLowerCase()==="form"}function d5(e){return bm(e)&&e.tagName.toLowerCase()==="input"}function f5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h5(e,t){return e.button===0&&(!t||t==="_self")&&!f5(e)}function zv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function m5(e,t){let r=zv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var zf=null;function p5(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var g5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wg(e){return e!=null&&!g5.has(e)?(_i(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):e}function y5(e,t){let r,n,s,i,l;if(u5(e)){let u=e.getAttribute("action");n=u?Ka(u,t):null,r=e.getAttribute("method")||uh,s=Wg(e.getAttribute("enctype"))||dh,i=new FormData(e)}else if(c5(e)||d5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Ka(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||uh,s=Wg(e.getAttribute("formenctype"))||Wg(u.getAttribute("enctype"))||dh,i=new FormData(u,e),!p5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(bm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=uh,n=null,s=dh,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function v5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Ka(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function x5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function b5(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await x5(i,r);return l.links?l.links():[]}return[]}));return N5(n.flat(1).filter(w5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function j5(e,t,{includeHydrateFallback:r}={}){return S5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function S5(e){return[...new Set(e)]}function k5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function N5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(k5(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function _C(){let e=v.useContext(Kc);return fx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _5(){let e=v.useContext(wm);return fx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var hx=v.createContext(void 0);hx.displayName="FrameworkContext";function CC(){let e=v.useContext(hx);return fx(e,"You must render this element inside a <HydratedRouter> element"),e}function C5(e,t){let r=v.useContext(hx),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{s(!0)},j=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Iu(u,x),onBlur:Iu(d,j),onMouseEnter:Iu(m,x),onMouseLeave:Iu(f,j),onTouchStart:Iu(p,x)}]:[!1,y,{}]}function Iu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function E5({page:e,...t}){let{router:r}=_C(),n=v.useMemo(()=>yC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(P5,{page:e,matches:n,...t}):null}function A5(e){let{manifest:t,routeModules:r}=CC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return b5(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function P5({page:e,matches:t,...r}){let n=no(),{manifest:s,routeModules:i}=CC(),{basename:l}=_C(),{loaderData:u,matches:d}=_5(),m=v.useMemo(()=>Pj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>Pj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,b=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(T=>T.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?b=!0:j.add(_.route.id))}),j.size===0)return[];let S=v5(e,l,"data");return b&&j.size>0&&S.searchParams.set("_routes",t.filter(_=>j.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>j5(f,s),[f,s]),x=A5(f);return v.createElement(v.Fragment,null,p.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),y.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),x.map(({key:j,link:b})=>v.createElement("link",{key:j,nonce:r.nonce,...b})))}function O5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var EC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EC&&(window.__reactRouterVersion="7.9.4")}catch{}function T5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=vD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(o5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var AC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:j}=v.useContext(ta),b=typeof m=="string"&&AC.test(m),S,_=!1;if(typeof m=="string"&&b&&(S=m,EC))try{let H=new URL(window.location.href),pe=m.startsWith("//")?new URL(H.protocol+m):new URL(m),Z=Ka(pe.pathname,j);pe.origin===H.origin&&Z!=null?m=Z+pe.search+pe.hash:_=!0}catch{_i(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=VD(m,{relative:s}),[C,T,I]=C5(n,y),P=$5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function z(H){t&&t(H),H.defaultPrevented||P(H)}let J=v.createElement("a",{...y,...I,href:S||E,onClick:_||i?t:z,ref:O5(x,T),target:d,"data-discover":!b&&r==="render"?"true":void 0});return C&&!b?v.createElement(v.Fragment,null,J,v.createElement(E5,{page:E})):J});PC.displayName="Link";var I5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=Sd(l,{relative:m.relative}),y=no(),x=v.useContext(wm),{navigator:j,basename:b}=v.useContext(ta),S=x!=null&&U5(p)&&u===!0,_=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,E=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&b&&(C=Ka(C,b)||C);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=E===_||!s&&E.startsWith(_)&&E.charAt(T)==="/",P=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),z={isActive:I,isPending:P,isTransitioning:S},J=I?t:void 0,H;typeof n=="function"?H=n(z):H=[n,I?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let pe=typeof i=="function"?i(z):i;return v.createElement(PC,{...m,"aria-current":J,className:H,ref:f,style:pe,to:l,viewTransition:u},typeof d=="function"?d(z):d)});I5.displayName="NavLink";var D5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=uh,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let j=L5(),b=z5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&AC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let T=C.nativeEvent.submitter,I=(T==null?void 0:T.getAttribute("formmethod"))||l;j(T||C.currentTarget,{fetcherKey:t,method:I,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:b,onSubmit:n?d:E,...y,"data-discover":!_&&e==="render"?"true":void 0})});D5.displayName="Form";function R5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OC(e){let t=v.useContext(Kc);return Dr(t,R5(e)),t}function $5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=Bs(),d=no(),m=Sd(e,{relative:i});return v.useCallback(f=>{if(h5(f,t)){f.preventDefault();let p=r!==void 0?r:ad(d)===ad(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function mx(e){_i(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(zv(e)),r=v.useRef(!1),n=no(),s=v.useMemo(()=>m5(n.search,r.current?null:t.current),[n.search]),i=Bs(),l=v.useCallback((u,d)=>{const m=zv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var M5=0,F5=()=>`__${String(++M5)}__`;function L5(){let{router:e}=OC("useSubmit"),{basename:t}=v.useContext(ta),r=r5();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=y5(n,t);if(s.navigate===!1){let f=s.fetcherKey||F5();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function z5(e,{relative:t}={}){let{basename:r}=v.useContext(ta),n=v.useContext(wa);Dr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Sd(e||".",{relative:t})},l=no();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Wa([r,i.pathname])),ad(i)}function U5(e,{relative:t}={}){let r=v.useContext(bC);Dr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=OC("useViewTransitionState"),s=Sd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Ka(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ka(r.nextLocation.pathname,n)||r.nextLocation.pathname;return bh(s.pathname,l)!=null||bh(s.pathname,i)!=null}var TC=gC();const B5="modulepreload",W5=function(e){return"/feature-voting-app/"+e},Oj={},kd=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=W5(m),m in Oj)return;Oj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":B5,f||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((x,j)=>{y.addEventListener("load",x),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},q5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kd(async()=>{const{default:n}=await Promise.resolve().then(()=>Yc);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class px extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Tj extends px{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ij extends px{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Dj extends px{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Uv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Uv||(Uv={}));var V5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class H5{constructor(t,{headers:r={},customFetch:n,region:s=Uv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=q5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return V5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Tj(_)}),j=x.headers.get("x-relay-error");if(j&&j==="true")throw new Ij(x);if(!x.ok)throw new Dj(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield x.json():b==="application/octet-stream"?S=yield x.blob():b==="text/event-stream"?S=x:b==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Tj(i)}:{data:null,error:i,response:i instanceof Dj||i instanceof Ij?i.context:void 0}}})}}var zn={},ac={},oc={},lc={},cc={},uc={},K5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rc=K5();const G5=Rc.fetch,IC=Rc.fetch.bind(Rc),DC=Rc.Headers,Y5=Rc.Request,J5=Rc.Response,Yc=Object.freeze(Object.defineProperty({__proto__:null,Headers:DC,Request:Y5,Response:J5,default:IC,fetch:G5},Symbol.toStringTag,{value:"Module"})),X5=oD(Yc);var Uf={},Rj;function RC(){if(Rj)return Uf;Rj=1,Object.defineProperty(Uf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Uf.default=e,Uf}var $j;function $C(){if($j)return uc;$j=1;var e=uc&&uc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(uc,"__esModule",{value:!0});const t=e(X5),r=e(RC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let j=null,b=null,S=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=P:b=JSON.parse(P))}const T=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),I=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");T&&I&&I.length>1&&(S=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(j={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,S=null,_=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const T=await m.text();try{j=JSON.parse(T),Array.isArray(j)&&m.status===404&&(b=[],j=null,_=200,E="OK")}catch{m.status===404&&T===""?(_=204,E="No Content"):j={message:T}}if(j&&this.isMaybeSingle&&(!((x=j==null?void 0:j.details)===null||x===void 0)&&x.includes("0 rows"))&&(j=null,_=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:b,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return uc.default=n,uc}var Mj;function MC(){if(Mj)return cc;Mj=1;var e=cc&&cc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(cc,"__esModule",{value:!0});const t=e($C());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return cc.default=r,cc}var Fj;function gx(){if(Fj)return lc;Fj=1;var e=lc&&lc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(lc,"__esModule",{value:!0});const t=e(MC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return lc.default=r,lc}var Lj;function FC(){if(Lj)return oc;Lj=1;var e=oc&&oc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(oc,"__esModule",{value:!0});const t=e(gx());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return oc.default=r,oc}var zj;function Q5(){if(zj)return ac;zj=1;var e=ac&&ac.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ac,"__esModule",{value:!0});const t=e(FC()),r=e(gx());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{y.searchParams.append(b,S)})):(p="POST",x=l);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return ac.default=n,ac}var Uj;function Z5(){if(Uj)return zn;Uj=1;var e=zn&&zn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(zn,"__esModule",{value:!0}),zn.PostgrestError=zn.PostgrestBuilder=zn.PostgrestTransformBuilder=zn.PostgrestFilterBuilder=zn.PostgrestQueryBuilder=zn.PostgrestClient=void 0;const t=e(Q5());zn.PostgrestClient=t.default;const r=e(FC());zn.PostgrestQueryBuilder=r.default;const n=e(gx());zn.PostgrestFilterBuilder=n.default;const s=e(MC());zn.PostgrestTransformBuilder=s.default;const i=e($C());zn.PostgrestBuilder=i.default;const l=e(RC());return zn.PostgrestError=l.default,zn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},zn}var e3=Z5();const t3=ea(e3),{PostgrestClient:r3,PostgrestQueryBuilder:eee,PostgrestFilterBuilder:tee,PostgrestTransformBuilder:ree,PostgrestBuilder:nee,PostgrestError:see}=t3;class n3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const s3="2.74.0",i3=`realtime-js/${s3}`,a3="1.0.0",Bv=1e4,o3=1e3,l3=100;var Zu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zu||(Zu={}));var Cn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Cn||(Cn={}));var Vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vi||(Vi={}));var Wv;(function(e){e.websocket="websocket"})(Wv||(Wv={}));var fl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fl||(fl={}));class c3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class LC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mr||(mr={}));const Bj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=u3(l,e,t,s),i),{}):{}},u3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?zC(i,l):qv(l)},zC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return m3(t,r)}switch(e){case mr.bool:return d3(t);case mr.float4:case mr.float8:case mr.int2:case mr.int4:case mr.int8:case mr.numeric:case mr.oid:return f3(t);case mr.json:case mr.jsonb:return h3(t);case mr.timestamp:return p3(t);case mr.abstime:case mr.date:case mr.daterange:case mr.int4range:case mr.int8range:case mr.money:case mr.reltime:case mr.text:case mr.time:case mr.timestamptz:case mr.timetz:case mr.tsrange:case mr.tstzrange:return qv(t);default:return qv(t)}},qv=e=>e,d3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},f3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},h3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},m3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>zC(t,u))}return e},p3=e=>typeof e=="string"?e.replace(" ","T"):e,UC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class qg{constructor(t,r,n={},s=Bv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Wj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Wj||(Wj={}));class ed{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ed.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=ed.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ed.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),j=f.filter(S=>x.indexOf(S.presence_ref)<0),b=p.filter(S=>y.indexOf(S.presence_ref)<0);j.length>0&&(u[m]=j),b.length>0&&(d[m]=b)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qj||(qj={}));var td;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(td||(td={}));var Ma;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ma||(Ma={}));class yx{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qg(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new LC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ed(this),this.broadcastEndpointURL=UC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Cn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[td.PRESENCE]&&this.bindings[td.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Ma.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Ma.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){t==null||t(Ma.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(j=b==null?void 0:b.length)!==null&&j!==void 0?j:0,_=[];for(let E=0;E<S;E++){const C=b[E],{filter:{event:T,schema:I,table:P,filter:z}}=C,J=x&&x[E];if(J&&J.event===T&&J.schema===I&&J.table===P&&J.filter===z)_.push(Object.assign(Object.assign({},C),{id:J.id}));else{this.unsubscribe(),this.state=Cn.errored,t==null||t(Ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Ma.SUBSCRIBED);return}}).receive("error",x=>{this.state=Cn.errored,t==null||t(Ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Cn.joined&&t===td.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Cn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new qg(this,Vi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Cn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>l3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Vi;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,b,S;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(b=x.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var j,b,S,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const T=x.id,I=(j=x.filter)===null||j===void 0?void 0:j.event;return T&&((b=r.ids)===null||b===void 0?void 0:b.includes(T))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const T=(E=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return T==="*"||T===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:b,table:S,commit_timestamp:_,type:E,errors:C}=j;y=Object.assign(Object.assign({},{schema:b,table:S,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}x.callback(y,n)})}_isClosed(){return this.state===Cn.closed}_isJoined(){return this.state===Cn.joined}_isJoining(){return this.state===Cn.joining}_isLeaving(){return this.state===Cn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&yx.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vi.close,{},t)}_onError(t){this._on(Vi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Bj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Bj(t.columns,t.old_record)),r}}const Vg=()=>{},Bf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g3=[1e3,2e3,5e3,1e4],y3=1e4,v3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bv,this.transport=null,this.heartbeatIntervalMs=Bf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vg,this.ref=0,this.reconnectTimer=null,this.logger=Vg,this.conn=null,this.sendBuffer=[],this.serializer=new c3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>kd(async()=>{const{default:u}=await Promise.resolve().then(()=>Yc);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Wv.websocket}`,this.httpEndpoint=UC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zu.connecting:return fl.Connecting;case Zu.open:return fl.Open;case Zu.closing:return fl.Closing;default:return fl.Closed}}isConnected(){return this.connectionState()===fl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new yx(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(o3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Bf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([v3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:i3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Vi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new LC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Bv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Bf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Vg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>g3[p-1]||y3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class vx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function hn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class w3 extends vx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vv extends vx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var b3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const BC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kd(async()=>{const{default:n}=await Promise.resolve().then(()=>Yc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},j3=()=>b3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kd(()=>Promise.resolve().then(()=>Yc),void 0)).Response:Response}),Hv=e=>{if(Array.isArray(e))return e.map(r=>Hv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Hv(n)}),t},S3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Rl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const Hg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k3=(e,t,r)=>Rl(void 0,void 0,void 0,function*(){const n=yield j3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new w3(Hg(s),i,l))}).catch(s=>{t(new Vv(Hg(s),s))}):t(new Vv(Hg(e),e))}),N3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(S3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Nd(e,t,r,n,s,i){return Rl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,N3(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>k3(d,u,n))})})}function jh(e,t,r,n){return Rl(this,void 0,void 0,function*(){return Nd(e,"GET",t,r,n)})}function fa(e,t,r,n,s){return Rl(this,void 0,void 0,function*(){return Nd(e,"POST",t,n,s,r)})}function Kv(e,t,r,n,s){return Rl(this,void 0,void 0,function*(){return Nd(e,"PUT",t,n,s,r)})}function _3(e,t,r,n){return Rl(this,void 0,void 0,function*(){return Nd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function WC(e,t,r,n,s){return Rl(this,void 0,void 0,function*(){return Nd(e,"DELETE",t,n,s,r)})}var C3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class E3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return C3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}var A3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class P3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new E3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return A3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}var $s=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const O3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class T3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=BC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return $s(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Vj),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Kv:fa)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return $s(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:Vj.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Kv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(hn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return $s(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield fa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new vx("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}update(t,r,n){return $s(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $s(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return $s(this,void 0,void 0,function*(){try{return{data:{path:(yield fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return $s(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield fa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return $s(this,void 0,void 0,function*(){try{const s=yield fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>jh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new P3(d,this.shouldThrowOnError)}info(t){return $s(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield jh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Hv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}exists(t){return $s(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield _3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n)&&n instanceof Vv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return $s(this,void 0,void 0,function*(){try{return{data:yield WC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}list(t,r,n){return $s(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},O3),r),{prefix:t||""});return{data:yield fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}listV2(t,r){return $s(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield fa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const I3="2.74.0",D3={"X-Client-Info":`storage-js/${I3}`};var dc=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class R3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},D3),r),this.fetch=BC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return dc(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}getBucket(t){return dc(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}createBucket(t){return dc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return dc(this,void 0,void 0,function*(){try{return{data:yield Kv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return dc(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return dc(this,void 0,void 0,function*(){try{return{data:yield WC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}}class $3 extends R3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new T3(this.url,this.headers,t,this.fetch)}}const M3="2.74.0";let Hu="";typeof Deno<"u"?Hu="deno":typeof document<"u"?Hu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hu="react-native":Hu="node";const F3={"X-Client-Info":`supabase-js-${Hu}/${M3}`},L3={headers:F3},z3={schema:"public"},U3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},B3={};var W3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const q3=e=>{let t;return e?t=e:typeof fetch>"u"?t=IC:t=fetch,(...r)=>t(...r)},V3=()=>typeof Headers>"u"?DC:Headers,H3=(e,t,r)=>{const n=q3(r),s=V3();return(i,l)=>W3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var K3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function G3(e){return e.endsWith("/")?e:e+"/"}function Y3(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>K3(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function J3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(G3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qC="2.74.0",Sc=30*1e3,Gv=3,Kg=Gv*Sc,X3="http://localhost:9999",Q3="supabase.auth.token",Z3={"X-Client-Info":`gotrue-js/${qC}`},Yv="X-Supabase-Api-Version",VC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t6=600*1e3;class od extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ut(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class r6 extends od{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function n6(e){return ut(e)&&e.name==="AuthApiError"}class hl extends od{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Uo extends od{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Eo extends Uo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function s6(e){return ut(e)&&e.name==="AuthSessionMissingError"}class fc extends Uo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wf extends Uo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qf extends Uo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i6(e){return ut(e)&&e.name==="AuthImplicitGrantRedirectError"}class Hj extends Uo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jv extends Uo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Gg(e){return ut(e)&&e.name==="AuthRetryableFetchError"}class Kj extends Uo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Xv extends Uo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gj=` 	
\r=`.split(""),a6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gj.length;t+=1)e[Gj[t].charCodeAt(0)]=-2;for(let t=0;t<Sh.length;t+=1)e[Sh[t].charCodeAt(0)]=t;return e})();function Yj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sh[n]),t.queuedBits-=6}}function HC(e,t,r){const n=a6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{c6(l,n,r)};for(let l=0;l<e.length;l+=1)HC(e.charCodeAt(l),s,i);return t.join("")}function o6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function l6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}o6(n,t)}}function c6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Pc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)HC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function u6(e){const t=[];return l6(e,r=>t.push(r)),new Uint8Array(t)}function ml(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Yj(s,r,n)),Yj(null,r,n),t.join("")}function d6(e){return Math.round(Date.now()/1e3)+e}function f6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qs=()=>typeof window<"u"&&typeof document<"u",il={tested:!1,writable:!1},KC=()=>{if(!Qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(il.tested)return il.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),il.tested=!0,il.writable=!0}catch{il.tested=!0,il.writable=!1}return il.writable};function h6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const GC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kd(async()=>{const{default:n}=await Promise.resolve().then(()=>Yc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},m6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",kc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},al=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Co=async(e,t)=>{await e.removeItem(t)};class jm{constructor(){this.promise=new jm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}jm.promiseConstructor=Promise;function Yg(e){const t=e.split(".");if(t.length!==3)throw new Xv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!e6.test(t[n]))throw new Xv("JWT not in base64url format");return{header:JSON.parse(Jj(t[0])),payload:JSON.parse(Jj(t[1])),signature:Pc(t[2]),raw:{header:t[0],payload:t[1]}}}async function p6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g6(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function y6(e){return("0"+e.toString(16)).substr(-2)}function v6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,y6).join("")}async function x6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await x6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hc(e,t,r=!1){const n=v6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await kc(e,`${t}-code-verifier`,s);const i=await w6(n);return[i,n===i?"plain":"s256"]}const b6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j6(e){const t=e.headers.get(Yv);if(!t||!t.match(b6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function S6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function k6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mc(e){if(!N6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xj(e){return JSON.parse(JSON.stringify(e))}var _6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ll=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C6=[502,503,504];async function Qj(e){var t;if(!m6(e))throw new Jv(ll(e),0);if(C6.includes(e.status))throw new Jv(ll(e),e.status);let r;try{r=await e.json()}catch(i){throw new hl(ll(i),i)}let n;const s=j6(e);if(s&&s.getTime()>=VC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Kj(ll(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Eo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Kj(ll(r),e.status,r.weak_password.reasons);throw new r6(ll(r),e.status||500,n)}const E6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function jt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Yv]||(i[Yv]=VC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await A6(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function A6(e,t,r,n,s,i){const l=E6(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Jv(ll(d),0)}if(u.ok||await Qj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Qj(d)}}function qi(e){var t;let r=null;T6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=d6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Zj(e){const t=qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Io(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function P6(e){return{data:e,error:null}}function O6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=_6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function eS(e){return e}function T6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xg=["global","local","others"];var I6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class D6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=GC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Xg[0]){if(Xg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xg.join(", ")}`);try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Io})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=I6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:O6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ut(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Io})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:eS});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ut(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){mc(t);try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Io})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){mc(t);try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Io})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){mc(t);try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Io})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){mc(t.userId);try{const{data:r,error:n}=await jt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _deleteFactor(t){mc(t.userId),mc(t.id);try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:eS});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ut(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}}function tS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const pc={debug:!!(globalThis&&KC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class YC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class R6 extends YC{}async function $6(e,t,r){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),pc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new R6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function M6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function F6(e){return parseInt(e,16)}function L6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function z6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=JC(e.address),j=f?`${f}://${n}`:n,b=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${x}

${b}`;let _=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${S}
${_}`}class fn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class kh extends fn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function U6({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new fn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new fn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new fn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new fn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new fn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new fn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(QC(l)){if(i.rp.id!==l)return new fn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new fn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new fn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function B6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(QC(n)){if(r.rpId!==n)return new fn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new fn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var XC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class W6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const q6=new W6;function V6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=XC(e,["challenge","user","excludeCredentials"]),i=Pc(t).buffer,l=Object.assign(Object.assign({},r),{id:Pc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Pc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function H6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=XC(e,["challenge","allowCredentials"]),s=Pc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Pc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function K6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ml(new Uint8Array(e.response.attestationObject)),clientDataJSON:ml(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function G6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ml(new Uint8Array(s.authenticatorData)),clientDataJSON:ml(new Uint8Array(s.clientDataJSON)),signature:ml(new Uint8Array(s.signature)),userHandle:s.userHandle?ml(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function QC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function rS(){var e,t;return!!(Qs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Y6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kh("Browser returned unexpected credential type",t)}:{data:null,error:new kh("Empty credential response",t)}}catch(t){return{data:null,error:U6({error:t,options:e})}}}async function J6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kh("Browser returned unexpected credential type",t)}:{data:null,error:new kh("Empty credential response",t)}}catch(t){return{data:null,error:B6({error:t,options:e})}}}const X6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Q6={userVerification:"preferred",hints:["security-key"]};function Nh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=Nh(u,l):n[i]=Nh(l)}else n[i]=l}return n}function Z6(e,t){return Nh(X6,e,t||{})}function eR(e,t){return Nh(Q6,e,t||{})}class tR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??q6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=Z6(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await Y6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=eR(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await J6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new hl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new od("rpId is required for WebAuthn authentication")};try{if(!rS())return{data:null,error:new hl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new hl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new od("rpId is required for WebAuthn registration")};try{if(!rS())return{data:null,error:new hl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new hl("Unexpected error in register",l)}}}}M6();const rR={url:X3,storageKey:Q3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nS(e,t,r){return await r()}const gc={};class ld{get jwks(){var t,r;return(r=(t=gc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gc[this.storageKey]=Object.assign(Object.assign({},gc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gc[this.storageKey]=Object.assign(Object.assign({},gc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ld.nextInstanceID,ld.nextInstanceID+=1,this.instanceID>0&&Qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},rR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=GC(s.fetch),this.lock=s.lock||nS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=$6:this.lock=nS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tR(this)},this.persistSession?(s.storage?this.storage=s.storage:KC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=tS(this.memoryStorage)),Qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=h6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),i6(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ut(r)?{error:r}:{error:new hl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qi}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await hc(this.storage,this.storageKey)),i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:j},xform:qi})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:qi})}else throw new Wf("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Zj})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Zj})}else throw new Wf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:b,wallet:S,statement:_,options:E}=t;let C;if(Qs())if(typeof S=="object")C=S;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")C=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const T=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),I=await C.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=JC(I[0]);let z=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!z){const H=await C.request({method:"eth_chainId"});z=F6(H)}const J={domain:T.host,address:P,statement:_,uri:T.href,version:"1",chainId:z,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=z6(J),j=await C.request({method:"personal_sign",params:[L6(x),P]})}try{const{data:b,error:S}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:qi});if(S)throw S;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new fc}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:S})}catch(b){if(ut(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let j,b;if("message"in t)j=t.message,b=t.signature;else{const{chain:S,wallet:_,statement:E,options:C}=t;let T;if(Qs())if(typeof _=="object")T=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const I=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),E?{statement:E}:null));let z;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")z=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)z=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)j=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),b=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${I.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(j),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:S,error:_}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ml(b)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:qi});if(_)throw _;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new fc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:_})}catch(S){if(ut(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await al(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qi});if(await Co(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(ut(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qi}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new fc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await hc(this.storage,this.storageKey));const{error:p}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new Wf("You must provide either an email or phone number.")}catch(u){if(ut(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:qi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(ut(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await hc(this.storage,this.storageKey)),await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:P6})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Eo;const{error:s}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ut(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Wf("You must provide either an email or phone number and a type")}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await al(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Kg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await al(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Jg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Io}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Eo}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Io})})}catch(r){if(ut(r))return s6(r)&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Eo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await hc(this.storage,this.storageKey));const{data:m,error:f}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Io});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Eo;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Yg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ut(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Eo;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qs())throw new qf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Hj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Hj("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new qf("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=Sc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const j=y-p;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,f);const{data:b,error:S}=await this._getUser(i);if(S)throw S;const _={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(ut(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await al(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(n6(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=f6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await hc(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Qs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ut(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qi}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new fc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(ut(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await g6(async s=>(s>0&&await p6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qi})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Gg(i)&&Date.now()+l-n<Sc})}catch(n){if(this._debug(r,"error",n),ut(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await al(this.storage,this.storageKey);if(s&&this.userStorage){let l=await al(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await kc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Jg()}else if(s&&!s.user&&!s.user){const l=await al(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Co(this.storage,this.storageKey+"-user"),await kc(this.storage,this.storageKey,s)):s.user=Jg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Kg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Kg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Gg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Eo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new jm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Eo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),ut(i)){const l={data:null,error:i};return Gg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await kc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Xj(s);await kc(this.storage,this.storageKey,i)}else{const s=Xj(r);await kc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Co(this.storage,this.storageKey),await Co(this.storage,this.storageKey+"-code-verifier"),await Co(this.storage,this.storageKey+"-user"),this.userStorage&&await Co(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Sc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Sc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sc}ms, refresh threshold is ${Gv} ticks`),s<=Gv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof YC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await hc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await jt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?K6(t.webauthn.credential_response):G6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:V6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:H6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Yg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+t6>s)return n;const{data:i,error:l}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Yg(n);r!=null&&r.allowExpired||S6(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=k6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,u6(`${u}.${d}`)))throw new Xv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}}ld.nextInstanceID=0;const nR=ld;class sR extends nR{constructor(t){super(t)}}var iR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class aR{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=J3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:z3,realtime:B3,auth:Object.assign(Object.assign({},U3),{storageKey:d}),global:L3},f=Y3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=H3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new r3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new $3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new H5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return iR(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sR({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new x3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oR=(e,t,r)=>new aR(e,t,r);function lR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}lR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cR="https://okdzllfpsvltjqryslnn.supabase.co",uR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Se=oR(cR,uR,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),Ga="__FEATURE_SUGGESTION__",xx="__feature_suggestion__",dR="__feature_future_session__";function Sm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(dR)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function ZC(e){try{if(!Se||typeof Se.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Se.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const y=await f.text();throw console.error("[databaseService] Direct fetch error:",y),new Error(`API error: ${f.status} - ${y}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const i=Se.from("users").select("*").eq("email",e).single(),u=await Promise.race([i,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function fR(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Se.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function pl(e,t){try{let r=await ZC(e);return r||(r=await fR({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function Qv(){const{data:e,error:t}=await Se.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function hR(e){var l,u;const[t,r,n]=await Promise.all([Pi(e),Se.from("session_admins").select("session_id").eq("user_id",e),Se.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await Se.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const Jc="PRODUCTS_TABLE_MISSING";function qa(e){return typeof e=="object"&&e!==null&&e.code===Jc}async function wx(){const{data:e,error:t}=await Se.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Jc,r}throw t}return e||[]}async function Fa(e){const{data:t,error:r}=await Se.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Jc,n}throw r}return t||[]}async function bx(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Se.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=Jc,i}throw s}return n}async function eE(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await Se.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Jc,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await Se.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function tE(e){const{error:t}=await Se.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Jc,r}throw t}}const _d="*, product:products(name)";function km(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function rE(e){return!e||e.length===0?[]:e.map(t=>km(t))}async function Fo(){try{const e=`${Se.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(_d)}&order=created_at.desc`,t={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return rE(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function mR(e){const{data:t,error:r}=await Se.from("voting_sessions").select(_d).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?km(t):null}async function pR(e){const{data:t,error:r}=await Se.from("voting_sessions").select(_d).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?km(t):null}async function nE(e){var t;try{if(await Pi(e))return Fo();const n=`${Se.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const i=await s.json(),l=(i==null?void 0:i.map(C=>C.session_id))||[],u=`${Se.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Se.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,y=await fetch(p,{method:"GET",headers:{apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"}});if(!y.ok){const C=await y.text();throw console.error("[databaseService] Error loading session stakeholders:",y.status,C),new Error(`API error: ${y.status} - ${C}`)}const x=await y.json(),j=(x==null?void 0:x.map(C=>C.session_id))||[],b=[...new Set([...l,...j])];if(b.length===0)return[];const S=`${Se.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(_d)}&id=in.(${b.join(",")})&order=created_at.desc`,_=await fetch(S,{method:"GET",headers:{apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return rE(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function sE(e){if(!e)return null;const{data:t,error:r}=await Se.from("voting_sessions").select(_d).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?km(t):null}async function iE(e){const{data:t,error:r}=await Se.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function aE(e,t){const{data:r,error:n}=await Se.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function gR(e){const{error:t}=await Se.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function yR(e,t){const{error:r}=await Se.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function oE(e){const{data:t,error:r}=await Se.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function lE(e){const{data:t,error:r}=await Se.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:i}=await Se.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(i)throw i;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function Oc(e,t){const{data:r,error:n}=await Se.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function vR(e,t,r){const n=await pl(t,r);return Oc(e,n.id)}async function Zv(e,t){const{error:r}=await Se.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Nm(e,t){try{if(await Pi(t))return!0;const n=`${Se.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},i=await fetch(n,{method:"GET",headers:s});if(!i.ok)return console.error("Error checking admin status:",i.status),!1;const l=await i.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function cE(e){const{data:t,error:r}=await Se.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function uE(e){const{data:t,error:r}=await Se.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function sS(e,t,r){return uE({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function dE(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,i=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?iS(e.start_date):""} - ${e.end_date?iS(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${i}&body=${l}`}function iS(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function e0(e,t){const{error:r}=await Se.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function jx(e,t){try{const r=`${Se.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const i=await s.json();return Array.isArray(i)&&i.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function xR(e,t){const{data:r,error:n}=await Se.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function aS(e,t){const{error:r}=await Se.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ua(e){const t=`${Se.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return(await n.json()||[]).filter(i=>{const l=i.state===Ga,u=Array.isArray(i.tags)&&i.tags.includes(xx);return!l&&!u})}async function Vf(e){const{data:t,error:r}=await Se.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Qg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await Se.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function oS(e){const{error:t}=await Se.from("features").delete().eq("id",e);if(t)throw t}function fE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function wR(e){try{const{data:t,error:r}=await Se.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(fE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function bR(e){try{const{data:t,error:r}=await Se.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return fE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Ao(e){const t=`${Se.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return await n.json()||[]}async function jR(e){const{data:t}=await Se.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Se.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Se.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function SR(e,t){const{error:r}=await Se.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function kR(e){const{error:t}=await Se.from("votes").delete().eq("session_id",e);if(t)throw t}async function NR(e){try{const{data:t,error:r}=await Se.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function ol(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Se.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await Se.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Se.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function _R(){return(await Fo())[0]||null}async function CR(e){const t=await _R();if(!t)throw new Error("No session found");return aE(t.id,e)}async function lS(e,t){return aE(e,t)}async function ER(e){const{data:t,error:r}=await Se.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function AR(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await Se.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Ga,area_path:null,tags:[xx],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Sm(r)}async function PR(e,t){const{data:r,error:n}=await Se.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Ga).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await Se.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",Ga).select("id, session_id, title, description, created_at").single();if(u)throw u;return Sm(l)}async function OR(e){const{error:t}=await Se.from("features").delete().eq("id",e).eq("state",Ga);if(t)throw t}async function TR(e,t){const{data:r,error:n}=await Se.from("features").update({session_id:t}).eq("id",e).eq("state",Ga).select("id, session_id, title, description, created_at").single();if(n)throw n;return Sm(r)}async function IR(e){const{data:t,error:r}=await Se.from("features").select("*").eq("id",e).eq("state",Ga).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==xx):[],{data:l,error:u}=await Se.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",Ga).select("*").single();if(u)throw u;return l}async function cS(e){const{data:t,error:r}=await Se.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Ga).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Sm)}async function t0(){const{data:e,error:t}=await Se.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function _h(e){const{data:t,error:r}=await Se.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function r0(e){const{error:t}=await Se.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Pi(e){try{const t=`${Se.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Se.supabaseKey,Authorization:`Bearer ${Se.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const DR=["dave.hoffman@newmill.com"],RR="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),$R=Array.from(new Set([...DR,...RR]));function n0(e){return e?$R.includes(e.toLowerCase()):!1}const hE=v.createContext(void 0);function MR({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,j]=v.useState(!0),[b,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(!1),T=v.useCallback(async J=>{if(_)return;const H=J||i;if(!H){s([]),r(pe=>{if(pe)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const pe=n0(H.email);let Z;pe?Z=await Fo():Z=await nE(H.id),s(Z),r(K=>{if(!K)return K;const ce=Z.find(B=>B.id===K.id);if(!ce){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ce.id!==K.id)return K;if(ce!==K){try{localStorage.setItem("voting_system_current_session",ce.id)}catch{}return ce}return K})}catch(pe){console.error("Error loading sessions:",pe),s([])}finally{E(!1)}},[i,_]);v.useEffect(()=>{if(C.current)return;C.current=!0;const J=setTimeout(()=>{j(!1)},5e3);(async()=>{var Z,K;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var se,W;try{const{data:{session:de}}=await Se.auth.getSession();if(de!=null&&de.user){const oe=de.user.email;if(oe){const X=((se=de.user.user_metadata)==null?void 0:se.full_name)||((W=de.user.user_metadata)==null?void 0:W.name)||oe.split("@")[0]||"User";try{const ee=await pl(oe.toLowerCase(),X);l(ee),await T(ee),setTimeout(()=>{if(window.location.hash){const D=window.location.pathname+window.location.search;window.history.replaceState(null,"",D)}},200)}catch(ee){console.error("Error getting/creating user:",ee)}}}}catch(de){console.error("Error in OAuth callback handler:",de)}finally{j(!1),clearTimeout(J)}},1e3);return}const{data:{session:B}}=await Se.auth.getSession();if(B!=null&&B.user){const se=B.user.email;if(se){const W=((Z=B.user.user_metadata)==null?void 0:Z.full_name)||((K=B.user.user_metadata)==null?void 0:K.name)||se.split("@")[0]||"User";try{const de=await pl(se.toLowerCase(),W);l(de),await T(de)}catch(de){console.error("Error getting/creating user:",de)}}}else{const se=localStorage.getItem("voting_system_user");if(se)try{const W=JSON.parse(se);l(W);try{await T(W)}catch(de){console.error("Error refreshing sessions:",de)}}catch(W){console.error("Error loading stored user:",W),localStorage.removeItem("voting_system_user")}}}catch(ce){console.error("Error checking Supabase auth:",ce);const B=localStorage.getItem("voting_system_user");if(B)try{const se=JSON.parse(B);l(se)}catch(se){console.error("Error loading stored user:",se),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(j(!1),clearTimeout(J))}})();const{data:{subscription:pe}}=Se.auth.onAuthStateChange(async(Z,K)=>{var ce,B,se,W;if(Z==="SIGNED_IN"&&(K!=null&&K.user)){const de=K.user.email;if(de){const oe=((ce=K.user.user_metadata)==null?void 0:ce.full_name)||((B=K.user.user_metadata)==null?void 0:B.name)||de.split("@")[0]||"User",X=await pl(de.toLowerCase(),oe);l(X),await T(X),j(!1),setTimeout(()=>{if(window.location.hash){const ee=window.location.pathname+window.location.search;window.history.replaceState(null,"",ee)}},100)}}else if(Z==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),j(!1);else if(Z==="TOKEN_REFRESHED"&&(K!=null&&K.user)){if(!i&&K.user.email){const de=K.user.email,oe=((se=K.user.user_metadata)==null?void 0:se.full_name)||((W=K.user.user_metadata)==null?void 0:W.name)||de.split("@")[0]||"User",X=await pl(de.toLowerCase(),oe);l(X),await T(X)}j(!1)}});return()=>{pe.unsubscribe(),clearTimeout(J)}},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!b)try{const[H,pe]=await Promise.all([Nm(t.id,i.id),jx(t.id,i.email)]);d(H),f(pe),S(!1)}catch(H){console.error("Error checking user roles:",H),d(!1),f(!1),S(!0)}})()},[t,i,b]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(n0(i.email)){y(!0);return}try{const pe=await Pi(i.id);y(pe)}catch(pe){console.error("Error checking system admin status:",pe),y(!1)}})()},[i]);const I=v.useCallback(async J=>{l(J),S(!1),J?(localStorage.setItem("voting_system_user",JSON.stringify(J)),await T(J)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[T]),P=v.useCallback(J=>{r(J),S(!1),J?localStorage.setItem("voting_system_current_session",J.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const H=localStorage.getItem("voting_system_current_session");if(H){const pe=n.find(Z=>Z.id===H);pe&&r(pe)}})()},[i,n]),v.useEffect(()=>{const J=()=>{const Z=window.location.hash;if(Z==="#"||Z===""){const K=window.location.pathname+window.location.search;window.history.replaceState(null,"",K)}};J();const H=()=>{J()},pe=setInterval(J,500);return window.addEventListener("hashchange",H),()=>{clearInterval(pe),window.removeEventListener("hashchange",H)}},[]);const z={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:P,refreshSessions:T,setCurrentUser:I};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(hE.Provider,{value:z,children:e})}function ba(){const e=v.useContext(hE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Sx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Bo(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var uS,dS,fS,Ch,hS,mS,pS,s0,gS,yS;function FR(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(uS||(uS={})),(function(e){e.M365Content="m365content"})(dS||(dS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(fS||(fS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Ch||(Ch={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(hS||(hS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(mS||(mS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(pS||(pS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(s0||(s0={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(gS||(gS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(yS||(yS={}));var Wt,i0,a0,vS,xS,wS,bS,jS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Wt||(Wt={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(i0||(i0={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(a0||(a0={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(vS||(vS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(xS||(xS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(wS||(wS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(bS||(bS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(jS||(jS={}));const LR={errorCode:Ch.NOT_SUPPORTED_ON_PLATFORM},zR={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var SS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Hf;const UR=new Uint8Array(16);function BR(){if(!Hf&&(Hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hf(UR)}const es=[];for(let e=0;e<256;++e)es.push((e+256).toString(16).slice(1));function WR(e,t=0){return es[e[t+0]]+es[e[t+1]]+es[e[t+2]]+es[e[t+3]]+"-"+es[e[t+4]]+es[e[t+5]]+"-"+es[e[t+6]]+es[e[t+7]]+"-"+es[e[t+8]]+es[e[t+9]]+"-"+es[e[t+10]]+es[e[t+11]]+es[e[t+12]]+es[e[t+13]]+es[e[t+14]]+es[e[t+15]]}function qR(e,t,r){if(SS.randomUUID&&!e)return SS.randomUUID();const n=(e=e||{}).random||(e.rng||BR)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,WR(n)}var VR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function HR(e){return typeof e=="string"&&VR.test(e)}function mE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function KR(){return qR()}function pE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&pE(e[t])})),Object.freeze(e)}function GR(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function YR(e){return e.protocol==="https:"}function JR(){if(_m())throw new Error("window object undefined at SSR check");return window}function _m(){return typeof window>"u"}function XR(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function QR(e){if(!e)throw new Error("id must not be empty");if(HR(e)===!1)throw new Error("id must be a valid UUID")}const ZR=!!performance&&"now"in performance;function kx(){return ZR?performance.now()+performance.timeOrigin:void 0}function kS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:s0.NotAdult})})})}let Cd=class{constructor(t=KR()){this.uuid=t,QR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const gE=e=>{const{uuid:t}=e,r=Sx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},e$=e=>{const{uuidAsString:t}=e,r=Sx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Cd(t):void 0})};var o0={exports:{}},NS,_S;function t$(){if(_S)return NS;_S=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return NS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var r$=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let j=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((b,S)=>{if(b==="%%")return"%";j++;const _=t.formatters[S];if(typeof _=="function"){const E=f[j];b=_.call(p,E),f.splice(j,1),j--}return b})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=t$(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},n$={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=n$.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r$(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(o0,o0.exports);var Nx=o0.exports;const s$=new Cd,i$=Nx.debug.formatArgs;Nx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${s$.toString()}]`,i$.call(this,e)};const a$=Nx.debug("teamsJs");function ja(e){return a$.extend(e)}function en(e,t){return`${e}_${t}`}function yE(e){return/^v\d+_[\w.]+$/.test(e)}function $o(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const o$=ja("flushMessageQueue");function vE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=gE(s);o$("Flushing message %s from %s message queue via postMessage.",$o(i),n),e.postMessage(i,t)}}}var l$=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const CS="2.0.1",fh=l$,ES=1500,c$=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),u$=/^https:\/\//,cd="The library has not yet been initialized",d$="The runtime has not yet been initialized",f$="The runtime version is not supported";let Nt=class{};Nt.initializeCalled=!1,Nt.initializeCompleted=!1,Nt.additionalValidOrigins=[],Nt.initializePromise=void 0,Nt.isFramelessWindow=!1,Nt.frameContext=void 0,Nt.hostClientType=void 0,Nt.printCapabilityEnabled=!1,Nt.teamsJsInstanceId=new Cd().toString();const xE=ja("runtime"),Cm=4;function wE(e){return e.apiVersion===Cm}function h$(e){if(wE(e))return!0;throw e.apiVersion===-1?new Error(d$):new Error(f$)}let pa={apiVersion:-1,supports:{}};const m$={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},bE=[Wt.desktop,Wt.web,Wt.rigel,Wt.surfaceHub,Wt.teamsRoomsWindows,Wt.teamsRoomsAndroid,Wt.teamsPhones,Wt.teamsDisplays],p$=[Wt.android,Wt.ios,Wt.ipados,Wt.visionOS],AS=[...bE,...p$];function g$(e){let t=e;if(t.apiVersion<Cm&&y$.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),wE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const y$=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Sx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],v$={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:bE}],"1.9.0":[{capability:{location:{}},hostClientTypes:AS}],"2.0.0":[{capability:{people:{}},hostClientTypes:AS},{capability:{sharing:{}},hostClientTypes:[Wt.desktop,Wt.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Wt.android,Wt.desktop,Wt.ios,Wt.teamsRoomsAndroid,Wt.teamsPhones,Wt.teamsDisplays,Wt.web]},{capability:{webStorage:{}},hostClientTypes:[Wt.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Wt.android,Wt.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Wt.android,Wt.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Wt.android,Wt.ios,Wt.ipados,Wt.visionOS]}],"2.1.2":[]},Zg=xE.extend("generateBackCompatRuntimeConfig");function jE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=jE(e[n]||{},t[n]));return r}function x$(e,t,r){Zg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Zg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{mE(e,i)>=0&&r[i].forEach((l=>{Nt.hostClientType!==void 0&&l.hostClientTypes.includes(Nt.hostClientType)&&(n=jE(n,l.capability))}))}));const s={apiVersion:Cm,hostVersionsInfo:zR,isLegacyTeams:!0,supports:n};return Zg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const ey=xE.extend("applyRuntimeConfig");function ty(e){typeof e.apiVersion=="string"&&(ey("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),ey("Fast-forwarding runtime %o",e);const t=g$(e);ey("Applying runtime %o",t),pa=pE(t)}function w$(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Eh="2.46.0";let Ah=class Nc{static storeCallbackInformation(t,r){Nc.callbackInformation.set(t,r)}static clearMessages(){Nc.callbackInformation.clear()}static deleteMessageInformation(t){Nc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?BS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Nc.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(BS({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Nc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Ah.callbackInformation=new Map;const SE=ja("nestedAppAuthUtils"),b$=SE.extend("tryPolyfillWithNestedAppAuthBridge"),j$="v2";function S$(e,t,r){var n;const s=b$;if(Nt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=k$;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=j=>b=>p(b,j);return{addEventListener:(j,b)=>{j==="message"?d.addEventListener(j,x(b)):f(`Event ${j} is not supported by nestedAppAuthBridge`)},postMessage:j=>{const b=(()=>{try{return JSON.parse(j)}catch{return null}})();if(!b||typeof b!="object"||b.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",j);const S=en(j$,"nestedAppAuth.execute");y(j,S)},removeEventListener:(j,b)=>{d.removeEventListener(j,x(b))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const k$=SE.extend("createNestedAppAuthBridge");let Po=[];const Do=ja("validateOrigin");let Ku;function N$(){return Bo(this,void 0,void 0,(function*(){Ku||(yield NE())}))}function kE(){return Po.length===0}function NE(e=!1){return Bo(this,void 0,void 0,(function*(){if(!kE()&&!e)return Po;if(Ku)return Ku;if(_m())return Po=fh,fh;{Do("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),ES);return Ku=fetch(c$,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Do("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Do("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Po=s.validOrigins,Po;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Do(`validOrigins fetch call to CDN failed due to Timeout of ${ES} ms. Defaulting to fallback list`):Do("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Po=fh,Po))),Ku}}))}function PS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function _$(e,t){const r=kE()?fh:Po;return OS(e,r)?Promise.resolve(!0):(Do("Origin %s is not in the local valid origins list, fetching from CDN",e),NE(t).then((n=>OS(e,n))))}function OS(e,t){if(!YR(e))return Do("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>PS(n,r))))return!0;for(const n of Nt.additionalValidOrigins)if(PS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Do(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Nt.additionalValidOrigins),!1}N$();const $l=ja("communication");let tt=class{},Ht=class{};function C$(e,t){if(Ht.messageListener=r=>(function(n){return Bo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void TS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return EE(s,i).then((l=>{l?((function(u,d){Nt.isFramelessWindow||tt.parentWindow&&!tt.parentWindow.closed&&u!==tt.parentWindow||(tt.parentWindow=u,tt.parentOrigin=d),tt.parentWindow&&tt.parentWindow.closed&&(tt.parentWindow=null,tt.parentOrigin=null),vE(tt.parentWindow,tt.parentOrigin,Ht.parentMessageQueue,"parent")})(s,i),s!==tt.parentWindow?PM():DS(n)):TS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),tt.currentWindow=tt.currentWindow||JR(),tt.parentWindow=tt.currentWindow.parent!==tt.currentWindow.self?tt.currentWindow.parent:tt.currentWindow.opener,tt.topWindow=tt.currentWindow.top,(tt.parentWindow||e)&&tt.currentWindow.addEventListener("message",Ht.messageListener,!1),!tt.parentWindow){const r=tt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Nt.isFramelessWindow=!0,r.onNativeMessage=DS}try{return tt.parentOrigin="*",Em(t,"initialize",[Eh,Cm,e]).then((([r,n,s,i])=>(S$(i,tt.currentWindow,{onMessage:M$,sendPostMessage:I$}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{tt.parentOrigin=null}}function E$(e,t,...r){return Em(e,t,r).then((([n])=>n))}function A$(e,t,r,...n){return Em(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function Em(e,t,r=void 0){if(!yE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=CE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{Ht.promiseCallbacks.set(i,l)}))))}))}function P$(e){return e.map((t=>w$(t)?t.serialize():t))}function O$(e,t,r,n,s){var i;return Bo(this,void 0,void 0,(function*(){const l=P$(t),[u]=yield Em(n,e,l);if(FR(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Ch.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function Xi(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!yE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=CE(e,t,s);n&&Ht.callbacks.set(i.uuid,n)}Ht.parentMessageQueue=[],Ht.topMessageQueue=[],Ht.nextMessageId=0,Ht.callbacks=new Map,Ht.promiseCallbacks=new Map,Ht.portCallbacks=new Map,Ht.legacyMessageIdsToUuidMap={};const T$=$l.extend("sendNestedAuthRequestToTopWindow");function I$(e,t){const r=T$,n=tt.topWindow,s=(function(i,l){const u=Ht.nextMessageId++,d=new Cd;return Ht.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:kx(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",$o(s),{actionName:s.func}),_E(n,s)}const D$=$l.extend("sendRequestToTargetWindowHelper");function _E(e,t){const r=D$,n=(function(i){return i===tt.topWindow&&l0()?"top":i===tt.parentWindow?"parent":null})(e),s=gE(t);if(Nt.isFramelessWindow)tt.currentWindow&&tt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",$o(s),n),tt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===tt.topWindow&&l0()?tt.topOrigin:l===tt.parentWindow?tt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",$o(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",$o(s),n),F$(e).push(t))}return t}const R$=$l.extend("sendMessageToParentHelper");function CE(e,t,r,n,s){const i=R$,l=tt.parentWindow,u=(function(d,m,f,p,y){const x=Ht.nextMessageId++,j=new Cd;Ht.legacyMessageIdsToUuidMap[x]=j;const b=Nt.teamsJsInstanceId;return{id:x,uuid:j,func:m,timestamp:Date.now(),monotonicTimestamp:kx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:b}})(e,t,r,n);return Ah.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",$o(u),{actionName:t,args:r}),_E(l,u)}const TS=$l.extend("processIncomingMessage"),$$=$l.extend("processAuthBridgeMessage");function M$(e,t){var r,n;const s=$$;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?EE(d,m)?(tt.topWindow&&!tt.topWindow.closed&&d!==tt.topWindow||(tt.topWindow=d,tt.topOrigin=m),tt.topWindow&&tt.topWindow.closed&&(tt.topWindow=null,tt.topOrigin=null),vE(tt.topWindow,tt.topOrigin,Ht.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const ry=$l.extend("shouldProcessIncomingMessage");function EE(e,t){return Bo(this,void 0,void 0,(function*(){if(tt.currentWindow&&e===tt.currentWindow)return ry("Should not process message because it is coming from the current window"),!1;if(tt.currentWindow&&tt.currentWindow.location&&t&&t===tt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return ry("Message has an invalid origin of %s",t),!1}const n=yield _$(r);return n||ry("Message has an invalid origin of %s",t),n}}))}const IS=$l.extend("handleIncomingMessageFromParent");function hh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function ny(e,t){const r=hh(t,e.uuid);r&&t.delete(r),e.uuid?Ht.legacyMessageIdsToUuidMap={}:delete Ht.legacyMessageIdsToUuidMap[e.id]}function DS(e){const t=IS,r=kx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=e$(n),i=(function(l){const u=IS;if(!l.uuid)return Ht.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=hh(Ht.callbacks,d);if(m)return m;const f=hh(Ht.promiseCallbacks,d);if(f)return f;const p=hh(Ht.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",$o(l))})(s);if(i){const l=Ht.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),Ah.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),ny(s,Ht.callbacks)));const u=Ht.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),ny(s,Ht.promiseCallbacks));const d=Ht.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),ny(s,Ht.portCallbacks)}s.uuid&&(Ht.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Ah.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',$o(n),n.func),SM(n.func,n.args)}else t("Received an unknown message: %O",e)}function l0(){return tt.topWindow!==tt.parentWindow}function F$(e){return e===tt.topWindow&&l0()?Ht.topMessageQueue:e===tt.parentWindow?Ht.parentMessageQueue:[]}const AE=ja("internal"),L$=AE.extend("ensureInitializeCalled"),z$=AE.extend("ensureInitialized");function PE(){if(!Nt.initializeCalled)throw L$(cd),new Error(cd)}function Xc(e,...t){if(!Nt.initializeCompleted)throw z$("%s. initializeCalled: %s",cd,Nt.initializeCalled.toString()),new Error(cd);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Nt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Nt.frameContext}".`)}return h$(e)}function U$(e){let t=Nt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&u$.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Nt.additionalValidOrigins=t}function B$(e){if(!q$(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${OE}-${TE}).`)}function W$(e){if(XR(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(V$(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const OE=4,TE=256;function q$(e){return e.length<TE&&e.length>OE}function V$(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let H$=class{constructor(t){this.idAsString=t,W$(t)}serialize(){return this.toString()}toString(){return this.idAsString}},K$=class extends H${constructor(t){super(t),B$(t)}toJSON(){return{appIdAsString:this.toString()}}};function IE(e){return e==null}const Am="v2",sy=ja("app"),RS={Success:"appInitialization.success"};var $S,MS;function G$(e){return hM(en(Am,"app.initialize"),e)}function Y$(){return new Promise((e=>{PE(),e(E$(en(Am,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:i0.teams,clientType:t.hostClientType?t.hostClientType:Wt.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new K$(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Nt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function J$(){return mM(en(Am,"app.notifySuccess"))}function X$(e){pM(en(Am,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})($S||($S={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(MS||(MS={})),sy("teamsjs instance is version %s, starting at %s UTC (%s local)",Eh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(_m())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?sy("teamsjs is being used from %s. %s",t,r):sy("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const Q$="v2",Z$=[];function eM(e){Nt.frameContext&&(Nt.frameContext===a0.task?Z$.push(e):kM("messageForChild"))}function tM(){xl(en(Q$,"dialog.registerMessageForChildHandler"),"messageForChild",eM,!1)}const Tc="v2";var FS,LS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(FS||(FS={}));function rM(){xl(en(Tc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",sM,!1),xl(en(Tc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",iM,!1),xl(en(Tc,"menus.registerSetModuleViewHandler"),"setModuleView",nM,!1)}function nM(e){Xc(pa),Xi(en(Tc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function sM(e){Xc(pa),Xi(en(Tc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function iM(e){Xc(pa),Xi(en(Tc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(LS||(LS={}));class aM{}let oM=class extends aM{validate(t){return!0}deserialize(t){return t}};function lM(){xl(en(Nl,"pages.config.registerSettingsSaveHandler"),"settings.save",cM,!1),xl(en(Nl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",dM,!1)}function cM(e){new uM(e).notifySuccess()}let uM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),Xi(en(Nl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Xi(en(Nl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function dM(){new fM().notifySuccess()}let fM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),Xi(en(Nl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Xi(en(Nl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const DE=ja("app");function hM(e,t){return _m()?(DE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):GR((()=>(function(r,n){return new Promise((s=>{Nt.initializeCalled||(Nt.initializeCalled=!0,jM(),Nt.initializePromise=C$(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=CS})=>{Nt.frameContext=i,Nt.hostClientType=l,Nt.clientSupportedSDKVersion=d;try{Du("Parsing %s",u);let m=JSON.parse(u);if(Du("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=kS(m),u&&ty(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Du("Attempting to parse %s as an SDK version",u),isNaN(mE(u,CS))||(Nt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Du("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=kS(f),ty(f)}catch(f){if(!(f instanceof SyntaxError))throw f;ty(x$(Nt.clientSupportedSDKVersion,m$,v$))}}Nt.initializeCompleted=!0})),rM(),lM(),tM()),Array.isArray(n)&&U$(n),Nt.initializePromise!==void 0?s(Nt.initializePromise):Du("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function mM(e){return Bo(this,void 0,void 0,(function*(){if(Nt.initializeCompleted)return zS(e);if(!Nt.initializePromise)throw new Error(cd);return Nt.initializePromise.then((()=>zS(e)))}))}function zS(e){return Bo(this,void 0,void 0,(function*(){return Xc(pa)&&(!((t=pa.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?O$(RS.Success,[Eh],new oM,e).then((()=>({hasFinishedSuccessfully:!0}))):(Xi(e,RS.Success,[Eh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Du=DE.extend("initializeHelper");function pM(e,t){!IE(t)&&PE(),NM(e,t)}function gM(){return vM(en(Nl,"pages.backStack.navigateBack"))}function yM(){return!(!Xc(pa)||!pa.supports.pages)&&!!pa.supports.pages.backStack}const Nl="v2";function vM(e){return new Promise((t=>{if(Xc(pa),!yM())throw LR;t(A$(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function xM(){xl(en("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",wM,!1)}function wM(){gM()}const bM=ja("handlers");let kr=class da{static initializeHandlers(){da.handlers.themeChange=_M,da.handlers.load=CM,da.handlers.beforeUnload=EM,xM()}static uninitializeHandlers(){da.handlers={},da.themeChangeHandler=null,da.loadHandler=null,da.beforeUnloadHandler=null,da.beforeSuspendOrTerminateHandler=null,da.resumeHandler=null}};function jM(){kr.initializeHandlers()}kr.handlers={},kr.themeChangeHandler=null,kr.loadHandler=null,kr.beforeUnloadHandler=null,kr.beforeSuspendOrTerminateHandler=null,kr.resumeHandler=null,kr.hostToAppPerformanceMetricsHandler=null;const US=bM.extend("callHandler");function SM(e,t){const r=kr.handlers[e];return r?(US("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(US("Handler for action message %s not found.",e),[!1,void 0])}function xl(e,t,r,n=!0,s=[]){r?(kr.handlers[t]=r,n&&Xi(e,"registerHandler",[t,...s])):delete kr.handlers[t]}function kM(e){delete kr.handlers[e]}function NM(e,t){kr.themeChangeHandler=t,!IE(t)&&Xi(e,"registerHandler",["themeChange"])}function _M(e){kr.themeChangeHandler&&kr.themeChangeHandler(e)}function BS(e){kr.hostToAppPerformanceMetricsHandler&&kr.hostToAppPerformanceMetricsHandler(e)}function CM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;kr.resumeHandler?(kr.resumeHandler(t),WS()):kr.loadHandler&&(kr.loadHandler(e),WS())}function EM(){return Bo(this,void 0,void 0,(function*(){const e=()=>{Xi(en("v2","handleBeforeUnload"),"readyToUnload",[])};kr.beforeSuspendOrTerminateHandler?(yield kr.beforeSuspendOrTerminateHandler(),e()):kr.beforeUnloadHandler&&kr.beforeUnloadHandler(e)||e()}))}const AM=ja("childProxyingCommunication");function WS(){return!1}function PM(e,t){return!1}AM.extend("handleIncomingMessageFromChild");const OM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),TM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await G$();const y=await Y$();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),X$(x=>{d(x)}),J$()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(OM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})},IM="service_idsx5cg",DM="template_4owif48",RM="OXfL2jaTJuDR5IThS";async function _l(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:IM,template_id:DM,user_id:RM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let i=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?i=l.text:l.message?i=l.message:l.error&&(i=l.error)}catch{i=s||i}throw new Error(i)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),qS=e=>{const t=MM(e);return t.charAt(0).toUpperCase()+t.slice(1)},RE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),FM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...LM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:RE("lucide",s),...!i&&!FM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(zM,{ref:i,iconNode:t,className:RE(`lucide-${$M(qS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=qS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],VS=wt("arrow-left",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],WM=wt("arrow-right",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],c0=wt("badge-check",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zr=wt("calendar",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],mh=wt("chart-no-axes-column",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ns=wt("chevron-down",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ed=wt("chevron-left",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JM=wt("chevron-up",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kt=wt("circle-alert",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],or=wt("circle-check-big",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pm=wt("clock",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ss=wt("crown",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],rF=wt("database",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],HS=wt("ellipsis-vertical",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],iF=wt("funnel",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gu=wt("info",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_x=wt("lightbulb",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ni=wt("list",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uF=wt("lock",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],fF=wt("log-in",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Hn=wt("log-out",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cl=wt("mail",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Yu=wt("minus",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],$E=wt("pencil",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bn=wt("plus",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],El=wt("refresh-cw",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],KS=wt("search",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],On=wt("settings",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],GS=wt("shield-check",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wn=wt("shield",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],kF=wt("shuffle",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],yc=wt("sparkles",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rd=wt("square-pen",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],u0=wt("square",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vc=wt("star",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],PF=wt("tag",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qi=wt("trash-2",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ME=wt("triangle-alert",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],FE=wt("trophy",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wl=wt("user-plus",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ru=wt("user-x",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bs=wt("user",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],is=wt("users",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],ts=wt("vote",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],zF=wt("workflow",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ls=wt("x",UF),ui="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",BF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Ad=e=>e.type==="checkbox",gl=e=>e instanceof Date,Fs=e=>e==null;const LE=e=>typeof e=="object";var gn=e=>!Fs(e)&&!Array.isArray(e)&&LE(e)&&!gl(e),zE=e=>gn(e)&&e.target?Ad(e.target)?e.target.checked:e.target.value:e,WF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,UE=(e,t)=>e.has(WF(t)),qF=e=>{const t=e.constructor&&e.constructor.prototype;return gn(t)&&t.hasOwnProperty("isPrototypeOf")},Cx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function En(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Cx&&(e instanceof Blob||n))&&(r||gn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!qF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=En(e[s]));else return e;return t}var Om=e=>/^\w*$/.test(e),Jr=e=>e===void 0,Ex=e=>Array.isArray(e)?e.filter(Boolean):[],Ax=e=>Ex(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ve=(e,t,r)=>{if(!t||!gn(e))return r;const n=(Om(t)?[t]:Ax(t)).reduce((s,i)=>Fs(s)?s:s[i],e);return Jr(n)||n===e?Jr(e[t])?r:e[t]:n},ti=e=>typeof e=="boolean",pr=(e,t,r)=>{let n=-1;const s=Om(t)?[t]:Ax(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=gn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Ph={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Hi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$a={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},BE=it.createContext(null);BE.displayName="HookFormContext";const Px=()=>it.useContext(BE);var WE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Hi.all&&(t._proxyFormState[l]=!n||Hi.all),r&&(r[l]=!0),e[l]}});return s};const Ox=typeof window<"u"?it.useLayoutEffect:it.useEffect;function VF(e){const t=Px(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=it.useState(r._formState),d=it.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ox(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),it.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),it.useMemo(()=>WE(l,r,d.current,!1),[l,r])}var si=e=>typeof e=="string",d0=(e,t,r,n,s)=>si(e)?(n&&t.watch.add(e),Ve(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ve(r,i))):(n&&(t.watchAll=!0),r),f0=e=>Fs(e)||!LE(e);function Ki(e,t,r=new WeakSet){if(f0(e)||f0(t))return e===t;if(gl(e)&&gl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(gl(l)&&gl(u)||gn(l)&&gn(u)||Array.isArray(l)&&Array.isArray(u)?!Ki(l,u,r):l!==u)return!1}}return!0}function HF(e){const t=Px(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=it.useRef(s),m=it.useRef(u),f=it.useRef(void 0),p=it.useRef(r),y=it.useRef(n);m.current=u;const[x,j]=it.useState(()=>{const T=r._getWatch(n,d.current);return m.current?m.current(T):T}),b=it.useCallback(T=>{const I=d0(n,r._names,T||r._formValues,!1,d.current);return m.current?m.current(I):I},[r._formValues,r._names,n]),S=it.useCallback(T=>{if(!i){const I=d0(n,r._names,T||r._formValues,!1,d.current);if(m.current){const P=m.current(I);Ki(P,f.current)||(j(P),f.current=P)}else j(I)}},[r._formValues,r._names,i,n]);Ox(()=>((p.current!==r||!Ki(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:T=>{S(T.values)}})),[r,l,n,S]),it.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=y.current,C=it.useMemo(()=>{if(i)return null;const T=!_&&!Ki(E,n);return _||T?b():null},[i,_,n,E,b]);return C!==null?C:x}function KF(e){const t=Px(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=UE(s._names.array,r),d=it.useMemo(()=>Ve(s._formValues,r,Ve(s._defaultValues,r,l)),[s,r,l]),m=HF({control:s,name:r,defaultValue:d,exact:!0}),f=VF({control:s,name:r,exact:!0}),p=it.useRef(e),y=it.useRef(void 0),x=it.useRef(s.register(r,{...e.rules,value:m,...ti(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=it.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ve(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ve(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ve(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ve(f.validatingFields,r)},error:{enumerable:!0,get:()=>Ve(f.errors,r)}}),[f,r]),b=it.useCallback(C=>x.current.onChange({target:{value:zE(C),name:r},type:Ph.CHANGE}),[r]),S=it.useCallback(()=>x.current.onBlur({target:{value:Ve(s._formValues,r),name:r},type:Ph.BLUR}),[r,s._formValues]),_=it.useCallback(C=>{const T=Ve(s._fields,r);T&&C&&(T._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:I=>C.setCustomValidity(I),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=it.useMemo(()=>({name:r,value:m,...ti(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:b,onBlur:S,ref:_}),[r,n,f.disabled,b,S,_,m]);return it.useEffect(()=>{const C=s._options.shouldUnregister||i,T=y.current;T&&T!==r&&!u&&s.unregister(T),s.register(r,{...p.current.rules,...ti(p.current.disabled)?{disabled:p.current.disabled}:{}});const I=(P,z)=>{const J=Ve(s._fields,P);J&&J._f&&(J._f.mount=z)};if(I(r,!0),C){const P=En(Ve(s._options.defaultValues,r,p.current.defaultValue));pr(s._defaultValues,r,P),Jr(Ve(s._formValues,r))&&pr(s._formValues,r,P)}return!u&&s.register(r),y.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):I(r,!1)}},[r,s,u,i]),it.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),it.useMemo(()=>({field:E,formState:f,fieldState:j}),[E,f,j])}const Cc=e=>e.render(KF(e));var GF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},nd=e=>Array.isArray(e)?e:[e],YS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function qE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&gn(s)&&i){const l=qE(s,i);gn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var js=e=>gn(e)&&!Object.keys(e).length,Tx=e=>e.type==="file",Gi=e=>typeof e=="function",Oh=e=>{if(!Cx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},VE=e=>e.type==="select-multiple",Ix=e=>e.type==="radio",YF=e=>Ix(e)||Ad(e),iy=e=>Oh(e)&&e.isConnected;function JF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Jr(e)?n++:e[t[n++]];return e}function XF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Jr(e[t]))return!1;return!0}function dn(e,t){const r=Array.isArray(t)?t:Om(t)?[t]:Ax(t),n=r.length===1?e:JF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(gn(n)&&js(n)||Array.isArray(n)&&XF(n))&&dn(e,r.slice(0,-1)),e}var QF=e=>{for(const t in e)if(Gi(e[t]))return!0;return!1};function HE(e){return Array.isArray(e)||gn(e)&&!QF(e)}function h0(e,t={}){for(const r in e)HE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},h0(e[r],t[r])):Jr(e[r])||(t[r]=!0);return t}function _c(e,t,r){r||(r=h0(t));for(const n in e)HE(e[n])?Jr(t)||f0(r[n])?r[n]=h0(e[n],Array.isArray(e[n])?[]:{}):_c(e[n],Fs(t)?{}:t[n],r[n]):r[n]=!Ki(e[n],t[n]);return r}const JS={value:!1,isValid:!1},XS={value:!0,isValid:!0};var KE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Jr(e[0].attributes.value)?Jr(e[0].value)||e[0].value===""?XS:{value:e[0].value,isValid:!0}:XS:JS}return JS},GE=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Jr(e)?e:t?e===""?NaN:e&&+e:r&&si(e)?new Date(e):n?n(e):e;const QS={isValid:!1,value:null};var YE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,QS):QS;function ZS(e){const t=e.ref;return Tx(t)?t.files:Ix(t)?YE(e.refs).value:VE(t)?[...t.selectedOptions].map(({value:r})=>r):Ad(t)?KE(e.refs).value:GE(Jr(t.value)?e.ref.value:t.value,e)}var ZF=(e,t,r,n)=>{const s={};for(const i of e){const l=Ve(t,i);l&&pr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Th=e=>e instanceof RegExp,$u=e=>Jr(e)?e:Th(e)?e.source:gn(e)?Th(e.value)?e.value.source:e.value:e,ek=e=>({isOnSubmit:!e||e===Hi.onSubmit,isOnBlur:e===Hi.onBlur,isOnChange:e===Hi.onChange,isOnAll:e===Hi.all,isOnTouch:e===Hi.onTouched});const tk="AsyncFunction";var eL=e=>!!e&&!!e.validate&&!!(Gi(e.validate)&&e.validate.constructor.name===tk||gn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===tk)),tL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),rk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const sd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Ve(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(sd(u,t))break}else if(gn(u)&&sd(u,t))break}}};function nk(e,t,r){const n=Ve(e,r);if(n||Om(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=Ve(t,i),u=Ve(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var rL=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return js(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Hi.all))},nL=(e,t,r)=>!e||!t||e===t||nd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),sL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,iL=(e,t)=>!Ex(Ve(e,t)).length&&dn(e,t),aL=(e,t,r)=>{const n=nd(Ve(e,r));return pr(n,"root",t[r]),pr(e,r,n),e};function sk(e,t,r="validate"){if(si(e)||Array.isArray(e)&&e.every(si)||ti(e)&&!e)return{type:r,message:si(e)?e:"",ref:t}}var xc=e=>gn(e)&&!Th(e)?e:{value:e,message:""},ik=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:j,name:b,valueAsNumber:S,mount:_}=e._f,E=Ve(r,b);if(!_||t.has(b))return{};const C=u?u[0]:l,T=K=>{s&&C.reportValidity&&(C.setCustomValidity(ti(K)?"":K||""),C.reportValidity())},I={},P=Ix(l),z=Ad(l),J=P||z,H=(S||Tx(l))&&Jr(l.value)&&Jr(E)||Oh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,pe=GF.bind(null,b,n,I),Z=(K,ce,B,se=$a.maxLength,W=$a.minLength)=>{const de=K?ce:B;I[b]={type:K?se:W,message:de,ref:l,...pe(K?se:W,de)}};if(i?!Array.isArray(E)||!E.length:d&&(!J&&(H||Fs(E))||ti(E)&&!E||z&&!KE(u).isValid||P&&!YE(u).isValid)){const{value:K,message:ce}=si(d)?{value:!!d,message:d}:xc(d);if(K&&(I[b]={type:$a.required,message:ce,ref:C,...pe($a.required,ce)},!n))return T(ce),I}if(!H&&(!Fs(p)||!Fs(y))){let K,ce;const B=xc(y),se=xc(p);if(!Fs(E)&&!isNaN(E)){const W=l.valueAsNumber||E&&+E;Fs(B.value)||(K=W>B.value),Fs(se.value)||(ce=W<se.value)}else{const W=l.valueAsDate||new Date(E),de=ee=>new Date(new Date().toDateString()+" "+ee),oe=l.type=="time",X=l.type=="week";si(B.value)&&E&&(K=oe?de(E)>de(B.value):X?E>B.value:W>new Date(B.value)),si(se.value)&&E&&(ce=oe?de(E)<de(se.value):X?E<se.value:W<new Date(se.value))}if((K||ce)&&(Z(!!K,B.message,se.message,$a.max,$a.min),!n))return T(I[b].message),I}if((m||f)&&!H&&(si(E)||i&&Array.isArray(E))){const K=xc(m),ce=xc(f),B=!Fs(K.value)&&E.length>+K.value,se=!Fs(ce.value)&&E.length<+ce.value;if((B||se)&&(Z(B,K.message,ce.message),!n))return T(I[b].message),I}if(x&&!H&&si(E)){const{value:K,message:ce}=xc(x);if(Th(K)&&!E.match(K)&&(I[b]={type:$a.pattern,message:ce,ref:l,...pe($a.pattern,ce)},!n))return T(ce),I}if(j){if(Gi(j)){const K=await j(E,r),ce=sk(K,C);if(ce&&(I[b]={...ce,...pe($a.validate,ce.message)},!n))return T(ce.message),I}else if(gn(j)){let K={};for(const ce in j){if(!js(K)&&!n)break;const B=sk(await j[ce](E,r),C,ce);B&&(K={...B,...pe(ce,B.message)},T(B.message),n&&(I[b]=K))}if(!js(K)&&(I[b]={ref:C,...K},!n))return I}}return T(!0),I};const oL={mode:Hi.onSubmit,reValidateMode:Hi.onChange,shouldFocusError:!0};function lL(e={}){let t={...oL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Gi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=gn(t.defaultValues)||gn(t.values)?En(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:En(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:YS(),state:YS()},x=t.criteriaMode===Hi.all,j=M=>ie=>{clearTimeout(m),m=setTimeout(M,ie)},b=async M=>{if(!t.disabled&&(f.isValid||p.isValid||M)){const ie=t.resolver?js((await z()).errors):await H(n,!0);ie!==r.isValid&&y.state.next({isValid:ie})}},S=(M,ie)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((M||Array.from(u.mount)).forEach(ge=>{ge&&(ie?pr(r.validatingFields,ge,ie):dn(r.validatingFields,ge))}),y.state.next({validatingFields:r.validatingFields,isValidating:!js(r.validatingFields)}))},_=(M,ie=[],ge,ke,ve=!0,je=!0)=>{if(ke&&ge&&!t.disabled){if(l.action=!0,je&&Array.isArray(Ve(n,M))){const Be=ge(Ve(n,M),ke.argA,ke.argB);ve&&pr(n,M,Be)}if(je&&Array.isArray(Ve(r.errors,M))){const Be=ge(Ve(r.errors,M),ke.argA,ke.argB);ve&&pr(r.errors,M,Be),iL(r.errors,M)}if((f.touchedFields||p.touchedFields)&&je&&Array.isArray(Ve(r.touchedFields,M))){const Be=ge(Ve(r.touchedFields,M),ke.argA,ke.argB);ve&&pr(r.touchedFields,M,Be)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=_c(s,i)),y.state.next({name:M,isDirty:Z(M,ie),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else pr(i,M,ie)},E=(M,ie)=>{pr(r.errors,M,ie),y.state.next({errors:r.errors})},C=M=>{r.errors=M,y.state.next({errors:r.errors,isValid:!1})},T=(M,ie,ge,ke)=>{const ve=Ve(n,M);if(ve){const je=Ve(i,M,Jr(ge)?Ve(s,M):ge);Jr(je)||ke&&ke.defaultChecked||ie?pr(i,M,ie?je:ZS(ve._f)):B(M,je),l.mount&&b()}},I=(M,ie,ge,ke,ve)=>{let je=!1,Be=!1;const yt={name:M};if(!t.disabled){if(!ge||ke){(f.isDirty||p.isDirty)&&(Be=r.isDirty,r.isDirty=yt.isDirty=Z(),je=Be!==yt.isDirty);const bt=Ki(Ve(s,M),ie);Be=!!Ve(r.dirtyFields,M),bt?dn(r.dirtyFields,M):pr(r.dirtyFields,M,!0),yt.dirtyFields=r.dirtyFields,je=je||(f.dirtyFields||p.dirtyFields)&&Be!==!bt}if(ge){const bt=Ve(r.touchedFields,M);bt||(pr(r.touchedFields,M,ge),yt.touchedFields=r.touchedFields,je=je||(f.touchedFields||p.touchedFields)&&bt!==ge)}je&&ve&&y.state.next(yt)}return je?yt:{}},P=(M,ie,ge,ke)=>{const ve=Ve(r.errors,M),je=(f.isValid||p.isValid)&&ti(ie)&&r.isValid!==ie;if(t.delayError&&ge?(d=j(()=>E(M,ge)),d(t.delayError)):(clearTimeout(m),d=null,ge?pr(r.errors,M,ge):dn(r.errors,M)),(ge?!Ki(ve,ge):ve)||!js(ke)||je){const Be={...ke,...je&&ti(ie)?{isValid:ie}:{},errors:r.errors,name:M};r={...r,...Be},y.state.next(Be)}},z=async M=>{S(M,!0);const ie=await t.resolver(i,t.context,ZF(M||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(M),ie},J=async M=>{const{errors:ie}=await z(M);if(M)for(const ge of M){const ke=Ve(ie,ge);ke?pr(r.errors,ge,ke):dn(r.errors,ge)}else r.errors=ie;return ie},H=async(M,ie,ge={valid:!0})=>{for(const ke in M){const ve=M[ke];if(ve){const{_f:je,...Be}=ve;if(je){const yt=u.array.has(je.name),bt=ve._f&&eL(ve._f);bt&&f.validatingFields&&S([je.name],!0);const Tt=await ik(ve,u.disabled,i,x,t.shouldUseNativeValidation&&!ie,yt);if(bt&&f.validatingFields&&S([je.name]),Tt[je.name]&&(ge.valid=!1,ie))break;!ie&&(Ve(Tt,je.name)?yt?aL(r.errors,Tt,je.name):pr(r.errors,je.name,Tt[je.name]):dn(r.errors,je.name))}!js(Be)&&await H(Be,ie,ge)}}return ge.valid},pe=()=>{for(const M of u.unMount){const ie=Ve(n,M);ie&&(ie._f.refs?ie._f.refs.every(ge=>!iy(ge)):!iy(ie._f.ref))&&fe(M)}u.unMount=new Set},Z=(M,ie)=>!t.disabled&&(M&&ie&&pr(i,M,ie),!Ki(ee(),s)),K=(M,ie,ge)=>d0(M,u,{...l.mount?i:Jr(ie)?s:si(M)?{[M]:ie}:ie},ge,ie),ce=M=>Ex(Ve(l.mount?i:s,M,t.shouldUnregister?Ve(s,M,[]):[])),B=(M,ie,ge={})=>{const ke=Ve(n,M);let ve=ie;if(ke){const je=ke._f;je&&(!je.disabled&&pr(i,M,GE(ie,je)),ve=Oh(je.ref)&&Fs(ie)?"":ie,VE(je.ref)?[...je.ref.options].forEach(Be=>Be.selected=ve.includes(Be.value)):je.refs?Ad(je.ref)?je.refs.forEach(Be=>{(!Be.defaultChecked||!Be.disabled)&&(Array.isArray(ve)?Be.checked=!!ve.find(yt=>yt===Be.value):Be.checked=ve===Be.value||!!ve)}):je.refs.forEach(Be=>Be.checked=Be.value===ve):Tx(je.ref)?je.ref.value="":(je.ref.value=ve,je.ref.type||y.state.next({name:M,values:En(i)})))}(ge.shouldDirty||ge.shouldTouch)&&I(M,ve,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&X(M)},se=(M,ie,ge)=>{for(const ke in ie){if(!ie.hasOwnProperty(ke))return;const ve=ie[ke],je=M+"."+ke,Be=Ve(n,je);(u.array.has(M)||gn(ve)||Be&&!Be._f)&&!gl(ve)?se(je,ve,ge):B(je,ve,ge)}},W=(M,ie,ge={})=>{const ke=Ve(n,M),ve=u.array.has(M),je=En(ie);pr(i,M,je),ve?(y.array.next({name:M,values:En(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ge.shouldDirty&&y.state.next({name:M,dirtyFields:_c(s,i),isDirty:Z(M,je)})):ke&&!ke._f&&!Fs(je)?se(M,je,ge):B(M,je,ge),rk(M,u)&&y.state.next({...r,name:M}),y.state.next({name:l.mount?M:void 0,values:En(i)})},de=async M=>{l.mount=!0;const ie=M.target;let ge=ie.name,ke=!0;const ve=Ve(n,ge),je=bt=>{ke=Number.isNaN(bt)||gl(bt)&&isNaN(bt.getTime())||Ki(bt,Ve(i,ge,bt))},Be=ek(t.mode),yt=ek(t.reValidateMode);if(ve){let bt,Tt;const nr=ie.type?ZS(ve._f):zE(M),Mt=M.type===Ph.BLUR||M.type===Ph.FOCUS_OUT,nn=!tL(ve._f)&&!t.resolver&&!Ve(r.errors,ge)&&!ve._f.deps||sL(Mt,Ve(r.touchedFields,ge),r.isSubmitted,yt,Be),yr=rk(ge,u,Mt);pr(i,ge,nr),Mt?(!ie||!ie.readOnly)&&(ve._f.onBlur&&ve._f.onBlur(M),d&&d(0)):ve._f.onChange&&ve._f.onChange(M);const Ft=I(ge,nr,Mt),vn=!js(Ft)||yr;if(!Mt&&y.state.next({name:ge,type:M.type,values:En(i)}),nn)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Mt&&b():Mt||b()),vn&&y.state.next({name:ge,...yr?{}:Ft});if(!Mt&&yr&&y.state.next({...r}),t.resolver){const{errors:qt}=await z([ge]);if(je(nr),ke){const _r=nk(r.errors,n,ge),Ze=nk(qt,n,_r.name||ge);bt=Ze.error,ge=Ze.name,Tt=js(qt)}}else S([ge],!0),bt=(await ik(ve,u.disabled,i,x,t.shouldUseNativeValidation))[ge],S([ge]),je(nr),ke&&(bt?Tt=!1:(f.isValid||p.isValid)&&(Tt=await H(n,!0)));ke&&(ve._f.deps&&(!Array.isArray(ve._f.deps)||ve._f.deps.length>0)&&X(ve._f.deps),P(ge,Tt,bt,Ft))}},oe=(M,ie)=>{if(Ve(r.errors,ie)&&M.focus)return M.focus(),1},X=async(M,ie={})=>{let ge,ke;const ve=nd(M);if(t.resolver){const je=await J(Jr(M)?M:ve);ge=js(je),ke=M?!ve.some(Be=>Ve(je,Be)):ge}else M?(ke=(await Promise.all(ve.map(async je=>{const Be=Ve(n,je);return await H(Be&&Be._f?{[je]:Be}:Be)}))).every(Boolean),!(!ke&&!r.isValid)&&b()):ke=ge=await H(n);return y.state.next({...!si(M)||(f.isValid||p.isValid)&&ge!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:ge}:{},errors:r.errors}),ie.shouldFocus&&!ke&&sd(n,oe,M?ve:u.mount),ke},ee=(M,ie)=>{let ge={...l.mount?i:s};return ie&&(ge=qE(ie.dirtyFields?r.dirtyFields:r.touchedFields,ge)),Jr(M)?ge:si(M)?Ve(ge,M):M.map(ke=>Ve(ge,ke))},D=(M,ie)=>({invalid:!!Ve((ie||r).errors,M),isDirty:!!Ve((ie||r).dirtyFields,M),error:Ve((ie||r).errors,M),isValidating:!!Ve(r.validatingFields,M),isTouched:!!Ve((ie||r).touchedFields,M)}),q=M=>{M&&nd(M).forEach(ie=>dn(r.errors,ie)),y.state.next({errors:M?r.errors:{}})},Te=(M,ie,ge)=>{const ke=(Ve(n,M,{_f:{}})._f||{}).ref,ve=Ve(r.errors,M)||{},{ref:je,message:Be,type:yt,...bt}=ve;pr(r.errors,M,{...bt,...ie,ref:ke}),y.state.next({name:M,errors:r.errors,isValid:!1}),ge&&ge.shouldFocus&&ke&&ke.focus&&ke.focus()},be=(M,ie)=>Gi(M)?y.state.subscribe({next:ge=>"values"in ge&&M(K(void 0,ie),ge)}):K(M,ie,!0),Ee=M=>y.state.subscribe({next:ie=>{nL(M.name,ie.name,M.exact)&&rL(ie,M.formState||f,$t,M.reRenderRoot)&&M.callback({values:{...i},...r,...ie,defaultValues:s})}}).unsubscribe,le=M=>(l.mount=!0,p={...p,...M.formState},Ee({...M,formState:p})),fe=(M,ie={})=>{for(const ge of M?nd(M):u.mount)u.mount.delete(ge),u.array.delete(ge),ie.keepValue||(dn(n,ge),dn(i,ge)),!ie.keepError&&dn(r.errors,ge),!ie.keepDirty&&dn(r.dirtyFields,ge),!ie.keepTouched&&dn(r.touchedFields,ge),!ie.keepIsValidating&&dn(r.validatingFields,ge),!t.shouldUnregister&&!ie.keepDefaultValue&&dn(s,ge);y.state.next({values:En(i)}),y.state.next({...r,...ie.keepDirty?{isDirty:Z()}:{}}),!ie.keepIsValid&&b()},Q=({disabled:M,name:ie})=>{(ti(M)&&l.mount||M||u.disabled.has(ie))&&(M?u.disabled.add(ie):u.disabled.delete(ie))},R=(M,ie={})=>{let ge=Ve(n,M);const ke=ti(ie.disabled)||ti(t.disabled);return pr(n,M,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:M}},name:M,mount:!0,...ie}}),u.mount.add(M),ge?Q({disabled:ti(ie.disabled)?ie.disabled:t.disabled,name:M}):T(M,!0,ie.value),{...ke?{disabled:ie.disabled||t.disabled}:{},...t.progressive?{required:!!ie.required,min:$u(ie.min),max:$u(ie.max),minLength:$u(ie.minLength),maxLength:$u(ie.maxLength),pattern:$u(ie.pattern)}:{},name:M,onChange:de,onBlur:de,ref:ve=>{if(ve){R(M,ie),ge=Ve(n,M);const je=Jr(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Be=YF(je),yt=ge._f.refs||[];if(Be?yt.find(bt=>bt===je):je===ge._f.ref)return;pr(n,M,{_f:{...ge._f,...Be?{refs:[...yt.filter(iy),je,...Array.isArray(Ve(s,M))?[{}]:[]],ref:{type:je.type,name:M}}:{ref:je}}}),T(M,!1,void 0,je)}else ge=Ve(n,M,{}),ge._f&&(ge._f.mount=!1),(t.shouldUnregister||ie.shouldUnregister)&&!(UE(u.array,M)&&l.action)&&u.unMount.add(M)}}},ye=()=>t.shouldFocusError&&sd(n,oe,u.mount),Me=M=>{ti(M)&&(y.state.next({disabled:M}),sd(n,(ie,ge)=>{const ke=Ve(n,ge);ke&&(ie.disabled=ke._f.disabled||M,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(ve=>{ve.disabled=ke._f.disabled||M}))},0,!1))},V=(M,ie)=>async ge=>{let ke;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let ve=En(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:je,values:Be}=await z();r.errors=je,ve=En(Be)}else await H(n);if(u.disabled.size)for(const je of u.disabled)dn(ve,je);if(dn(r.errors,"root"),js(r.errors)){y.state.next({errors:{}});try{await M(ve,ge)}catch(je){ke=je}}else ie&&await ie({...r.errors},ge),ye(),setTimeout(ye);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:js(r.errors)&&!ke,submitCount:r.submitCount+1,errors:r.errors}),ke)throw ke},Le=(M,ie={})=>{Ve(n,M)&&(Jr(ie.defaultValue)?W(M,En(Ve(s,M))):(W(M,ie.defaultValue),pr(s,M,En(ie.defaultValue))),ie.keepTouched||dn(r.touchedFields,M),ie.keepDirty||(dn(r.dirtyFields,M),r.isDirty=ie.defaultValue?Z(M,En(Ve(s,M))):Z()),ie.keepError||(dn(r.errors,M),f.isValid&&b()),y.state.next({...r}))},ze=(M,ie={})=>{const ge=M?En(M):s,ke=En(ge),ve=js(M),je=ve?s:ke;if(ie.keepDefaultValues||(s=ge),!ie.keepValues){if(ie.keepDirtyValues){const Be=new Set([...u.mount,...Object.keys(_c(s,i))]);for(const yt of Array.from(Be))Ve(r.dirtyFields,yt)?pr(je,yt,Ve(i,yt)):W(yt,Ve(je,yt))}else{if(Cx&&Jr(M))for(const Be of u.mount){const yt=Ve(n,Be);if(yt&&yt._f){const bt=Array.isArray(yt._f.refs)?yt._f.refs[0]:yt._f.ref;if(Oh(bt)){const Tt=bt.closest("form");if(Tt){Tt.reset();break}}}}if(ie.keepFieldsRef)for(const Be of u.mount)W(Be,Ve(je,Be));else n={}}i=t.shouldUnregister?ie.keepDefaultValues?En(s):{}:En(je),y.array.next({values:{...je}}),y.state.next({values:{...je}})}u={mount:ie.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues||!t.shouldUnregister&&!js(je),l.watch=!!t.shouldUnregister,y.state.next({submitCount:ie.keepSubmitCount?r.submitCount:0,isDirty:ve?!1:ie.keepDirty?r.isDirty:!!(ie.keepDefaultValues&&!Ki(M,s)),isSubmitted:ie.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ve?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?_c(s,i):r.dirtyFields:ie.keepDefaultValues&&M?_c(s,M):ie.keepDirty?r.dirtyFields:{},touchedFields:ie.keepTouched?r.touchedFields:{},errors:ie.keepErrors?r.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},dt=(M,ie)=>ze(Gi(M)?M(i):M,ie),ft=(M,ie={})=>{const ge=Ve(n,M),ke=ge&&ge._f;if(ke){const ve=ke.refs?ke.refs[0]:ke.ref;ve.focus&&(ve.focus(),ie.shouldSelect&&Gi(ve.select)&&ve.select())}},$t=M=>{r={...r,...M}},Qt={control:{register:R,unregister:fe,getFieldState:D,handleSubmit:V,setError:Te,_subscribe:Ee,_runSchema:z,_focusError:ye,_getWatch:K,_getDirty:Z,_setValid:b,_setFieldArray:_,_setDisabledField:Q,_setErrors:C,_getFieldArray:ce,_reset:ze,_resetDefaultValues:()=>Gi(t.defaultValues)&&t.defaultValues().then(M=>{dt(M,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:pe,_disableForm:Me,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(M){l=M},get _defaultValues(){return s},get _names(){return u},set _names(M){u=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:le,trigger:X,register:R,handleSubmit:V,watch:be,setValue:W,getValues:ee,reset:dt,resetField:Le,clearErrors:q,unregister:fe,setError:Te,setFocus:ft,getFieldState:D};return{...Qt,formControl:Qt}}function ud(e={}){const t=it.useRef(void 0),r=it.useRef(void 0),[n,s]=it.useState({isDirty:!1,isValidating:!1,isLoading:Gi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Gi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Gi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=lL(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,Ox(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),it.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),it.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),it.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),it.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),it.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),it.useEffect(()=>{e.values&&!Ki(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),it.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=WE(n,i),t.current}function JE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=JE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Nr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=JE(e))&&(n&&(n+=" "),n+=t);return n}var cL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Dx(e){if(typeof e!="string")return!1;var t=cL;return t.includes(e)}var uL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function XE(e){if(typeof e!="string")return!1;var t=uL;return t.includes(e)}function QE(e){return typeof e=="string"&&e.startsWith("data-")}function Lo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return XE(n)||QE(n)});return Object.fromEntries(t)}function Rx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Lo(t)}return typeof e=="object"&&!Array.isArray(e)?Lo(e):null}function Ci(e){var t=Object.entries(e).filter(r=>{var[n]=r;return XE(n)||QE(n)||Dx(n)});return Object.fromEntries(t)}var dL=["children","width","height","viewBox","className","style","title","desc"];function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m0.apply(null,arguments)}function fL(e,t){if(e==null)return{};var r,n,s=hL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=fL(e,dL),p=i||{width:n,height:s,x:0,y:0},y=Nr("recharts-surface",l);return v.createElement("svg",m0({},Ci(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),mL=["children","className"];function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p0.apply(null,arguments)}function pL(e,t){if(e==null)return{};var r,n,s=gL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ya=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=pL(e,mL),i=Nr("recharts-layer",n);return v.createElement("g",p0({className:i},Ci(s),{ref:t}),r)}),yL=v.createContext(null);function gr(e){return function(){return e}}const eA=Math.cos,Ih=Math.sin,ra=Math.sqrt,Dh=Math.PI,Tm=2*Dh,g0=Math.PI,y0=2*g0,cl=1e-6,vL=y0-cl;function tA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function xL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tA;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class wL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tA:xL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>cl)if(!(Math.abs(p*d-m*f)>cl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,j=s-u,b=d*d+m*m,S=x*x+j*j,_=Math.sqrt(b),E=Math.sqrt(y),C=i*Math.tan((g0-Math.acos((b+y-S)/(2*_*E)))/2),T=C/E,I=C/_;Math.abs(T-1)>cl&&this._append`L${t+T*f},${r+T*p}`,this._append`A${i},${i},0,0,${+(p*x>f*j)},${this._x1=t+I*d},${this._y1=r+I*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>cl||Math.abs(this._y1-f)>cl)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%y0+y0),y>vL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>cl&&this._append`A${n},${n},0,${+(y>=g0)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function $x(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new wL(t)}function Mx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rA(e){this._context=e}rA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Im(e){return new rA(e)}function nA(e){return e[0]}function sA(e){return e[1]}function iA(e,t){var r=gr(!0),n=null,s=Im,i=null,l=$x(u);e=typeof e=="function"?e:e===void 0?nA:gr(e),t=typeof t=="function"?t:t===void 0?sA:gr(t);function u(d){var m,f=(d=Mx(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:gr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:gr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:gr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function Kf(e,t,r){var n=null,s=gr(!0),i=null,l=Im,u=null,d=$x(m);e=typeof e=="function"?e:e===void 0?nA:gr(+e),t=typeof t=="function"?t:gr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?sA:gr(+r);function m(p){var y,x,j,b=(p=Mx(p)).length,S,_=!1,E,C=new Array(b),T=new Array(b);for(i==null&&(u=l(E=d())),y=0;y<=b;++y){if(!(y<b&&s(S=p[y],y,p))===_)if(_=!_)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=y-1;j>=x;--j)u.point(C[j],T[j]);u.lineEnd(),u.areaEnd()}_&&(C[y]=+e(S,y,p),T[y]=+t(S,y,p),u.point(n?+n(S,y,p):C[y],r?+r(S,y,p):T[y]))}if(E)return u=null,E+""||null}function f(){return iA().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:gr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:gr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:gr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:gr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:gr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:gr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:gr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class aA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function bL(e){return new aA(e,!0)}function jL(e){return new aA(e,!1)}const Fx={draw(e,t){const r=ra(t/Dh);e.moveTo(r,0),e.arc(0,0,r,0,Tm)}},SL={draw(e,t){const r=ra(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},oA=ra(1/3),kL=oA*2,NL={draw(e,t){const r=ra(t/kL),n=r*oA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_L={draw(e,t){const r=ra(t),n=-r/2;e.rect(n,n,r,r)}},CL=.8908130915292852,lA=Ih(Dh/10)/Ih(7*Dh/10),EL=Ih(Tm/10)*lA,AL=-eA(Tm/10)*lA,PL={draw(e,t){const r=ra(t*CL),n=EL*r,s=AL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=Tm*i/5,u=eA(l),d=Ih(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},ay=ra(3),OL={draw(e,t){const r=-ra(t/(ay*3));e.moveTo(0,r*2),e.lineTo(-ay*r,-r),e.lineTo(ay*r,-r),e.closePath()}},bi=-.5,ji=ra(3)/2,v0=1/ra(12),TL=(v0/2+1)*3,IL={draw(e,t){const r=ra(t/TL),n=r/2,s=r*v0,i=n,l=r*v0+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(bi*n-ji*s,ji*n+bi*s),e.lineTo(bi*i-ji*l,ji*i+bi*l),e.lineTo(bi*u-ji*d,ji*u+bi*d),e.lineTo(bi*n+ji*s,bi*s-ji*n),e.lineTo(bi*i+ji*l,bi*l-ji*i),e.lineTo(bi*u+ji*d,bi*d-ji*u),e.closePath()}};function DL(e,t){let r=null,n=$x(s);e=typeof e=="function"?e:gr(e||Fx),t=typeof t=="function"?t:gr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:gr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:gr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Rh(){}function $h(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cA(e){this._context=e}cA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$h(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RL(e){return new cA(e)}function uA(e){this._context=e}uA.prototype={areaStart:Rh,areaEnd:Rh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $L(e){return new uA(e)}function dA(e){this._context=e}dA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ML(e){return new dA(e)}function fA(e){this._context=e}fA.prototype={areaStart:Rh,areaEnd:Rh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function FL(e){return new fA(e)}function ak(e){return e<0?-1:1}function ok(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(ak(i)+ak(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function lk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function oy(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function Mh(e){this._context=e}Mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oy(this,this._t0,lk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oy(this,lk(this,r=ok(this,e,t)),r);break;default:oy(this,this._t0,r=ok(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hA(e){this._context=new mA(e)}(hA.prototype=Object.create(Mh.prototype)).point=function(e,t){Mh.prototype.point.call(this,t,e)};function mA(e){this._context=e}mA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function LL(e){return new Mh(e)}function zL(e){return new hA(e)}function pA(e){this._context=e}pA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=ck(e),s=ck(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ck(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function UL(e){return new pA(e)}function Dm(e,t){this._context=e,this._t=t}Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function BL(e){return new Dm(e,.5)}function WL(e){return new Dm(e,0)}function qL(e){return new Dm(e,1)}function $c(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function x0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function VL(e,t){return e[t]}function HL(e){const t=[];return t.key=e,t}function KL(){var e=gr([]),t=x0,r=$c,n=VL;function s(i){var l=Array.from(e.apply(this,arguments),HL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=Mx(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:gr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:gr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?x0:typeof i=="function"?i:gr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??$c,s):r},s}function GL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}$c(e,t)}}function YL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}$c(e,t)}}function JL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,j=0;j<u;++j){var b=e[t[j]],S=b[n][1]||0,_=b[n-1][1]||0;x+=S-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,$c(e,t)}}var ly={},cy={},uk;function XL(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(cy)),cy}var uy={},dk;function gA(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(uy)),uy}var dy={},fk;function Lx(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(dy)),dy}var fy={},hy={},hk;function QL(){return hk||(hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(hy)),hy}var mk;function zx(){return mk||(mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QL(),r=Lx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(fy)),fy}var pk;function Ux(){return pk||(pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XL(),r=gA(),n=Lx(),s=zx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(ly)),ly}var my,gk;function ZL(){return gk||(gk=1,my=Ux().get),my}var ez=ZL();const Mc=ea(ez);var ai=e=>e===0?0:e>0?1:-1,ya=e=>typeof e=="number"&&e!=+e,Ja=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,mt=e=>(typeof e=="number"||e instanceof Number)&&!ya(e),va=e=>mt(e)||typeof e=="string",tz=0,dd=e=>{var t=++tz;return"".concat(e||"").concat(t)},Zi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(t)&&typeof t!="string")return n;var i;if(Ja(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return ya(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},yA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function ss(e,t,r){return mt(e)&&mt(t)?e+r*(t-e):t}function rz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Mc(n,t))===r)}var Kn=e=>e===null||typeof e>"u",Pd=e=>Kn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function nz(e){return e!=null}function Qc(){}var sz=["type","size","sizeType"];function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w0.apply(null,arguments)}function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){iz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iz(e,t,r){return(t=az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=oz(e,"string");return typeof t=="symbol"?t:t+""}function oz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lz(e,t){if(e==null)return{};var r,n,s=cz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vA={symbolCircle:Fx,symbolCross:SL,symbolDiamond:NL,symbolSquare:_L,symbolStar:PL,symbolTriangle:OL,symbolWye:IL},uz=Math.PI/180,dz=e=>{var t="symbol".concat(Pd(e));return vA[t]||Fx},fz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*uz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hz=(e,t)=>{vA["symbol".concat(Pd(e))]=t},xA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=lz(e,sz),i=vk(vk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=dz(l),x=DL().type(y).size(fz(r,n,l)),j=x();if(j!==null)return j},{className:d,cx:m,cy:f}=i,p=Ci(i);return mt(m)&&mt(f)&&mt(r)?v.createElement("path",w0({},p,{className:Nr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};xA.registerSymbol=hz;var wA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,mz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Dx(s)&&(n[s]=(i=>r[s](r,i)))}),n},pz=(e,t,r)=>n=>(e(t,r,n),null),Bx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Dx(s)&&typeof i=="function"&&(n||(n={}),n[s]=pz(i,t,r))}),n};function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t,r){return(t=vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=xz(e,"string");return typeof t=="symbol"?t:t+""}function xz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oi(e,t){var r=gz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var py={},gy={},wk;function wz(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(gy)),gy}var yy={},bk;function bA(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(yy)),yy}var vy={},xy={},wy={},jk;function bz(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(wy)),wy}var Sk;function Wx(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(xy)),xy}var by={},kk;function jz(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(by)),by}var Nk;function Sz(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wx(),r=jz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(vy)),vy}var jy={},Sy={},_k;function kz(){return _k||(_k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ux();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Sy)),Sy}var ky={},Ny={},_y={},Cy={},Ck;function jA(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Cy)),Cy}var Ey={},Ek;function SA(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Ey)),Ey}var Ay={},Ak;function kA(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Ay)),Ay}var Pk;function Nz(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jA(),r=SA(),n=kA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(j,b,S,_,E,C){const T=y(j,b,S,_,E,C);return T!==void 0?!!T:i(j,b,x,C)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const j=Object.keys(p);if(f==null)return j.length===0;if(j.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let b=0;b<j.length;b++){const S=j[b];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,b]of p.entries()){const S=f.get(j);if(y(S,b,j,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let b=0;b<p.length;b++){const S=p[b];let _=!1;for(let E=0;E<f.length;E++){if(j.has(E))continue;const C=f[E];let T=!1;if(y(C,S,b,f,p,x)&&(T=!0),T){j.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(_y)),_y}var Ok;function NA(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Ny)),Ny}var Py={},Oy={},Ty={},Tk;function _z(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Ty)),Ty}var Iy={},Ik;function _A(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Iy)),Iy}var Dy={},Dk;function CA(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",j="[object Error]",b="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",T="[object BigUint64Array]",I="[object Int8Array]",P="[object Int16Array]",z="[object Int32Array]",J="[object BigInt64Array]",H="[object Float32Array]",pe="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=J,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=H,e.float64ArrayTag=pe,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=z,e.int8ArrayTag=I,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(Dy)),Dy}var Ry={},Rk;function Cz(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Ry)),Ry}var $k;function EA(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_z(),r=_A(),n=CA(),s=SA(),i=Cz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,j=void 0){const b=j==null?void 0:j(f,p,y,x);if(b!==void 0)return b;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,j);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[_,E]of f)S.set(_,u(E,_,y,x,j));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const _ of f)S.add(u(_,void 0,y,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,j);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,j),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,j),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,j),S}return f}function d(f,p,y=f,x,j){const b=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<b.length;S++){const _=b[S],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,y,x,j))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Oy)),Oy}var Mk;function Ez(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Py)),Py}var Fk;function Az(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NA(),r=Ez();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(ky)),ky}var $y={},My={},Fy={},Lk;function Pz(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EA(),r=CA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(Fy)),Fy}var zk;function Oz(){return zk||(zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(My)),My}var Ly={},zy={},Uk;function AA(){return Uk||(Uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(zy)),zy}var Uy={},Bk;function Tz(){return Bk||(Bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_A();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Uy)),Uy}var Wk;function Iz(){return Wk||(Wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gA(),r=AA(),n=Tz(),s=zx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(Ly)),Ly}var qk;function Dz(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NA(),r=Lx(),n=Oz(),s=Ux(),i=Iz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})($y)),$y}var Vk;function Rz(){return Vk||(Vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bA(),r=kz(),n=Az(),s=Dz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(jy)),jy}var Hk;function $z(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wz(),r=bA(),n=Sz(),s=Rz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(py)),py}var By,Kk;function Mz(){return Kk||(Kk=1,By=$z().uniqBy),By}var Fz=Mz();const Gk=ea(Fz);function Lz(e,t,r){return t===!0?Gk(e,r):typeof t=="function"?Gk(e,t):e}var Wy={exports:{}},qy={},Vy={exports:{}},Hy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk;function zz(){if(Yk)return Hy;Yk=1;var e=Vc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),j=n({inst:{value:x,getSnapshot:y}}),b=j[0].inst,S=j[1];return i(function(){b.value=x,b.getSnapshot=y,d(b)&&S({inst:b})},[p,x,y]),s(function(){return d(b)&&S({inst:b}),p(function(){d(b)&&S({inst:b})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return Hy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Hy}var Jk;function Uz(){return Jk||(Jk=1,Vy.exports=zz()),Vy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk;function Bz(){if(Xk)return qy;Xk=1;var e=Vc(),t=Uz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return qy.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var j=i(null);if(j.current===null){var b={hasValue:!1,value:null};j.current=b}else b=j.current;j=u(function(){function _(P){if(!E){if(E=!0,C=P,P=y(P),x!==void 0&&b.hasValue){var z=b.value;if(x(z,P))return T=z}return T=P}if(z=T,n(C,P))return z;var J=y(P);return x!==void 0&&x(z,J)?(C=P,z):(C=P,T=J)}var E=!1,C,T,I=p===void 0?null:p;return[function(){return _(f())},I===null?void 0:function(){return _(I())}]},[f,p,y,x]);var S=s(m,j[0],j[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),d(S),S},qy}var Qk;function Wz(){return Qk||(Qk=1,Wy.exports=Bz()),Wy.exports}var qz=Wz(),qx=v.createContext(null),Vz=e=>e,rn=()=>{var e=v.useContext(qx);return e?e.store.dispatch:Vz},ph=()=>{},Hz=()=>ph,Kz=(e,t)=>e===t;function ot(e){var t=v.useContext(qx);return qz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Hz,t?t.store.getState:ph,t?t.store.getState:ph,t?e:ph,Kz)}function Gz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Jz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Zk=e=>Array.isArray(e)?e:[e];function Xz(e){const t=Array.isArray(e[0])?e[0]:e;return Jz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Qz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Zz=class{constructor(e){this.value=e}deref(){return this.value}},e8=typeof WeakRef<"u"?WeakRef:Zz,t8=0,eN=1;function Gf(){return{s:t8,v:void 0,o:null,p:null}}function PA(e,t={}){let r=Gf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const S=b.get(j);S===void 0?(u=Gf(),b.set(j,u)):u=S}else{let b=u.p;b===null&&(u.p=b=new Map);const S=b.get(j);S===void 0?(u=Gf(),b.set(j,u)):u=S}}const m=u;let f;if(u.s===eN)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new e8(f):f}return m.s=eN,m.v=f,f}return l.clearCache=()=>{r=Gf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function r8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Gz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=PA,argsMemoizeOptions:j=[]}=f,b=Zk(y),S=Zk(j),_=Xz(s),E=p(function(){return i++,m.apply(null,arguments)},...b),C=x(function(){l++;const I=Qz(_,arguments);return u=E.apply(null,I),u},...S);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var we=r8(PA),n8=Object.assign((e,t=we)=>{Yz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>n8}),Ky={},Gy={},Yy={},tN;function s8(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(Yy)),Yy}var Jy={},Xy={},rN;function OA(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Xy)),Xy}var nN;function i8(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Jy)),Jy}var sN;function a8(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s8(),r=i8(),n=zx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,j)=>{let b=x;for(let S=0;S<j.length&&b!=null;++S)b=b[j[S]];return b},f=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:m(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?m(j,x):typeof j=="object"?j[x]:j,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(j=>f(j,x))})).slice().sort((x,j)=>{for(let b=0;b<p.length;b++){const S=t.compareValues(x.criteria[b],j.criteria[b],u[b]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(Gy)),Gy}var Qy={},iN;function o8(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Qy)),Qy}var Zy={},aN;function TA(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AA(),r=Wx(),n=jA(),s=kA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Zy)),Zy}var oN;function l8(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a8(),r=o8(),n=TA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(Ky)),Ky}var ev,lN;function c8(){return lN||(lN=1,ev=l8().sortBy),ev}var u8=c8();const Rm=ea(u8);var IA=e=>e.legend.settings,d8=e=>e.legend.size,f8=e=>e.legend.payload;we([f8,IA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rm(n,r):n});var Yf=1;function h8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>Yf||Math.abs(l.left-t.left)>Yf||Math.abs(l.top-t.top)>Yf||Math.abs(l.width-t.width)>Yf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function rs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m8=typeof Symbol=="function"&&Symbol.observable||"@@observable",cN=m8,tv=()=>Math.random().toString(36).substring(7).split("").join("."),p8={INIT:`@@redux/INIT${tv()}`,REPLACE:`@@redux/REPLACE${tv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tv()}`},Fh=p8;function Vx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function DA(e,t,r){if(typeof e!="function")throw new Error(rs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(rs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(rs(1));return r(DA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,_)=>{l.set(_,S)}))}function f(){if(d)throw new Error(rs(3));return s}function p(S){if(typeof S!="function")throw new Error(rs(4));if(d)throw new Error(rs(5));let _=!0;m();const E=u++;return l.set(E,S),function(){if(_){if(d)throw new Error(rs(6));_=!1,m(),l.delete(E),i=null}}}function y(S){if(!Vx(S))throw new Error(rs(7));if(typeof S.type>"u")throw new Error(rs(8));if(typeof S.type!="string")throw new Error(rs(17));if(d)throw new Error(rs(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(rs(10));n=S,y({type:Fh.REPLACE})}function j(){const S=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(rs(11));function E(){const T=_;T.next&&T.next(f())}return E(),{unsubscribe:S(E)}},[cN](){return this}}}return y({type:Fh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[cN]:j}}function g8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Fh.INIT})>"u")throw new Error(rs(12));if(typeof r(void 0,{type:Fh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(rs(13))})}function RA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{g8(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],j=y(x,u);if(typeof j>"u")throw u&&u.type,new Error(rs(14));m[p]=j,d=d||j!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function Lh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function y8(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(rs(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=Lh(...u)(s.dispatch),{...s,dispatch:i}}}function $A(e){return Vx(e)&&"type"in e&&typeof e.type=="string"}var MA=Symbol.for("immer-nothing"),uN=Symbol.for("immer-draftable"),ci=Symbol.for("immer-state");function Yi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fd=Object.getPrototypeOf;function Al(e){return!!e&&!!e[ci]}function Xa(e){var t;return e?FA(e)||Array.isArray(e)||!!e[uN]||!!((t=e.constructor)!=null&&t[uN])||Od(e)||Mm(e):!1}var v8=Object.prototype.constructor.toString(),dN=new WeakMap;function FA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=dN.get(r);return n===void 0&&(n=Function.toString.call(r),dN.set(r,n)),n===v8}function zh(e,t,r=!0){$m(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function $m(e){const t=e[ci];return t?t.type_:Array.isArray(e)?1:Od(e)?2:Mm(e)?3:0}function b0(e,t){return $m(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function LA(e,t,r){const n=$m(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function x8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Od(e){return e instanceof Map}function Mm(e){return e instanceof Set}function ul(e){return e.copy_||e.base_}function j0(e,t){if(Od(e))return new Map(e);if(Mm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=FA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ci];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(fd(e),n)}else{const n=fd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Hx(e,t=!1){return Fm(e)||Al(e)||!Xa(e)||($m(e)>1&&Object.defineProperties(e,{set:Jf,add:Jf,clear:Jf,delete:Jf}),Object.freeze(e),t&&Object.values(e).forEach(r=>Hx(r,!0))),e}function w8(){Yi(2)}var Jf={value:w8};function Fm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var b8={};function Pl(e){const t=b8[e];return t||Yi(0,e),t}var hd;function zA(){return hd}function j8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fN(e,t){t&&(Pl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function S0(e){k0(e),e.drafts_.forEach(S8),e.drafts_=null}function k0(e){e===hd&&(hd=e.parent_)}function hN(e){return hd=j8(hd,e)}function S8(e){const t=e[ci];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ci].modified_&&(S0(t),Yi(4)),Xa(e)&&(e=Uh(t,e),t.parent_||Bh(t,e)),t.patches_&&Pl("Patches").generateReplacementPatches_(r[ci].base_,e,t.patches_,t.inversePatches_)):e=Uh(t,r,[]),S0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==MA?e:void 0}function Uh(e,t,r){if(Fm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ci];if(!s)return zh(t,(i,l)=>pN(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Bh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),zh(l,(d,m)=>pN(e,s,i,d,m,r,u),n),Bh(e,i,!1),r&&e.patches_&&Pl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function pN(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=Fm(s);if(!(u&&!l)){if(Al(s)){const d=i&&t&&t.type_!==3&&!b0(t.assigned_,n)?i.concat(n):void 0,m=Uh(e,s,d);if(LA(r,n,m),Al(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Xa(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;Uh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Od(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Bh(e,s)}}}function Bh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Hx(t,r)}function k8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:zA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Kx;r&&(s=[n],i=md);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var Kx={get(e,t){if(t===ci)return e;const r=ul(e);if(!b0(r,t))return N8(e,r,t);const n=r[t];return e.finalized_||!Xa(n)?n:n===rv(e.base_,t)?(nv(e),e.copy_[t]=_0(n,e)):n},has(e,t){return t in ul(e)},ownKeys(e){return Reflect.ownKeys(ul(e))},set(e,t,r){const n=UA(ul(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=rv(ul(e),t),i=s==null?void 0:s[ci];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(x8(r,s)&&(r!==void 0||b0(e.base_,t)))return!0;nv(e),N0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,nv(e),N0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ul(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Yi(11)},getPrototypeOf(e){return fd(e.base_)},setPrototypeOf(){Yi(12)}},md={};zh(Kx,(e,t)=>{md[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});md.deleteProperty=function(e,t){return md.set.call(this,e,t,void 0)};md.set=function(e,t,r){return Kx.set.call(this,e[0],t,r,e[0])};function rv(e,t){const r=e[ci];return(r?ul(r):e)[t]}function N8(e,t,r){var s;const n=UA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function UA(e,t){if(!(t in e))return;let r=fd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=fd(r)}}function N0(e){e.modified_||(e.modified_=!0,e.parent_&&N0(e.parent_))}function nv(e){e.copy_||(e.copy_=j0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&Yi(6),n!==void 0&&typeof n!="function"&&Yi(7);let s;if(Xa(t)){const i=hN(this),l=_0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?S0(i):k0(i)}return fN(i,n),mN(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===MA&&(s=void 0),this.autoFreeze_&&Hx(s,!0),n){const i=[],l=[];Pl("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else Yi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Xa(e)||Yi(8),Al(e)&&(e=Va(e));const t=hN(this),r=_0(e,void 0);return r[ci].isManual_=!0,k0(t),r}finishDraft(e,t){const r=e&&e[ci];(!r||!r.isManual_)&&Yi(9);const{scope_:n}=r;return fN(n,t),mN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Pl("Patches").applyPatches_;return Al(e)?n(e,t):this.produce(e,s=>n(s,t))}};function _0(e,t){const r=Od(e)?Pl("MapSet").proxyMap_(e,t):Mm(e)?Pl("MapSet").proxySet_(e,t):k8(e,t);return(t?t.scope_:zA()).drafts_.push(r),r}function Va(e){return Al(e)||Yi(10,e),BA(e)}function BA(e){if(!Xa(e)||Fm(e))return e;const t=e[ci];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=j0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=j0(e,!0);return zh(r,(s,i)=>{LA(r,s,BA(i))},n),t&&(t.finalized_=!1),r}var C0=new _8,WA=C0.produce,C8=C0.setUseStrictIteration.bind(C0);function qA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var E8=qA(),A8=qA,P8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lh:Lh.apply(null,arguments)};function Ei(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(li(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>$A(n)&&n.type===e,r}var VA=class Ju extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ju.prototype)}static get[Symbol.species](){return Ju}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ju(...t[0].concat(this)):new Ju(...t.concat(this))}};function gN(e){return Xa(e)?WA(e,()=>{}):e}function Xf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function O8(e){return typeof e=="boolean"}var T8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new VA;return r&&(O8(r)?l.push(E8):l.push(A8(r.extraArgument))),l},HA="RTK_autoBatch",Pn=()=>e=>({payload:e,meta:{[HA]:!0}}),yN=e=>t=>{setTimeout(t,e)},KA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yN(10):e.type==="callback"?e.queueNotification:yN(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[HA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},I8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new VA(e);return n&&s.push(KA(typeof n=="object"?n:void 0)),s};function D8(e){const t=T8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Vx(r))u=RA(r);else throw new Error(li(1));let d;typeof n=="function"?d=n(t):d=t();let m=Lh;s&&(m=P8({trace:!1,...typeof s=="object"&&s}));const f=y8(...d),p=I8(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return DA(u,i,x)}function GA(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(li(28));if(u in t)throw new Error(li(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}C8(!1);function R8(e){return typeof e=="function"}function $8(e,t){let[r,n,s]=GA(t),i;if(R8(e))i=()=>gN(e());else{const u=gN(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Al(f)){const x=p(f,d);return x===void 0?f:x}else{if(Xa(f))return WA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var M8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",F8=(e=21)=>{let t="",r=e;for(;r--;)t+=M8[Math.random()*64|0];return t},L8=Symbol.for("rtk-slice-createasyncthunk");function z8(e,t){return`${e}/${t}`}function U8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[L8];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(li(11));const u=(typeof s.reducers=="function"?s.reducers(W8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,I){const P=typeof T=="string"?T:T.type;if(!P)throw new Error(li(12));if(P in m.sliceCaseReducersByType)throw new Error(li(13));return m.sliceCaseReducersByType[P]=I,f},addMatcher(T,I){return m.sliceMatchers.push({matcher:T,reducer:I}),f},exposeAction(T,I){return m.actionCreators[T]=I,f},exposeCaseReducer(T,I){return m.sliceCaseReducersByName[T]=I,f}};d.forEach(T=>{const I=u[T],P={reducerName:T,type:z8(i,T),createNotation:typeof s.reducers=="function"};V8(I)?K8(P,I,f,t):q8(P,I,f)});function p(){const[T={},I=[],P=void 0]=typeof s.extraReducers=="function"?GA(s.extraReducers):[s.extraReducers],z={...T,...m.sliceCaseReducersByType};return $8(s.initialState,J=>{for(let H in z)J.addCase(H,z[H]);for(let H of m.sliceMatchers)J.addMatcher(H.matcher,H.reducer);for(let H of I)J.addMatcher(H.matcher,H.reducer);P&&J.addDefaultCase(P)})}const y=T=>T,x=new Map,j=new WeakMap;let b;function S(T,I){return b||(b=p()),b(T,I)}function _(){return b||(b=p()),b.getInitialState()}function E(T,I=!1){function P(J){let H=J[T];return typeof H>"u"&&I&&(H=Xf(j,P,_)),H}function z(J=y){const H=Xf(x,I,()=>new WeakMap);return Xf(H,J,()=>{const pe={};for(const[Z,K]of Object.entries(s.selectors??{}))pe[Z]=B8(K,J,()=>Xf(j,J,_),I);return pe})}return{reducerPath:T,getSelectors:z,get selectors(){return z(P)},selectSlice:P}}const C={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(T,{reducerPath:I,...P}={}){const z=I??l;return T.inject({reducerPath:z,reducer:S},P),{...C,...E(z,!0)}}};return C}}function B8(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Ws=U8();function W8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function q8({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!H8(n))throw new Error(li(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Ei(e,l):Ei(e))}function V8(e){return e._reducerDefinitionType==="asyncThunk"}function H8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function K8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(li(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||Qf,pending:u||Qf,rejected:d||Qf,settled:m||Qf})}function Qf(){}var G8="task",YA="listener",JA="completed",Gx="cancelled",Y8=`task-${Gx}`,J8=`task-${JA}`,E0=`${YA}-${Gx}`,X8=`${YA}-${JA}`,Lm=class{constructor(e){$g(this,"name","TaskAbortError");$g(this,"message");this.code=e,this.message=`${G8} ${Gx} (reason: ${e})`}},Yx=(e,t)=>{if(typeof e!="function")throw new TypeError(li(32))},Wh=()=>{},XA=(e,t=Wh)=>(e.catch(t),e),QA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),bl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jl=e=>{if(e.aborted){const{reason:t}=e;throw new Lm(t)}};function ZA(e,t){let r=Wh;return new Promise((n,s)=>{const i=()=>s(new Lm(e.reason));if(e.aborted){i();return}r=QA(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Wh})}var Q8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Lm?"cancelled":"rejected",error:r}}finally{t==null||t()}},qh=e=>t=>XA(ZA(e,t).then(r=>(jl(e),r))),eP=e=>{const t=qh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ic}=Object,vN={},zm="listenerMiddleware",Z8=(e,t)=>{const r=n=>QA(e,()=>bl(n,e.reason));return(n,s)=>{Yx(n);const i=new AbortController;r(i);const l=Q8(async()=>{jl(e),jl(i.signal);const u=await n({pause:qh(i.signal),delay:eP(i.signal),signal:i.signal});return jl(i.signal),u},()=>bl(i,J8));return s!=null&&s.autoJoin&&t.push(l.catch(Wh)),{result:qh(e)(l),cancel(){bl(i,Y8)}}}},eU=(e,t)=>{const r=async(n,s)=>{jl(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await ZA(t,Promise.race(u));return jl(t),d}finally{i()}};return(n,s)=>XA(r(n,s))},tP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Ei(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(li(21));return Yx(i),{predicate:s,type:t,effect:i}},rP=Ic(e=>{const{type:t,predicate:r,effect:n}=tP(e);return{id:F8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(li(22))}}},{withTypes:()=>rP}),xN=(e,t)=>{const{type:r,effect:n,predicate:s}=tP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},A0=e=>{e.pending.forEach(t=>{bl(t,E0)})},tU=(e,t)=>()=>{for(const r of t.keys())A0(r);e.clear()},wN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},nP=Ic(Ei(`${zm}/add`),{withTypes:()=>nP}),rU=Ei(`${zm}/removeAll`),sP=Ic(Ei(`${zm}/remove`),{withTypes:()=>sP}),nU=(...e)=>{console.error(`${zm}/error`,...e)},Td=(e={})=>{const t=new Map,r=new Map,n=x=>{const j=r.get(x)??0;r.set(x,j+1)},s=x=>{const j=r.get(x)??1;j===1?r.delete(x):r.set(x,j-1)},{extra:i,onError:l=nU}=e;Yx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),j=>{x.unsubscribe(),j!=null&&j.cancelActive&&A0(x)}),d=x=>{const j=xN(t,x)??rP(x);return u(j)};Ic(d,{withTypes:()=>d});const m=x=>{const j=xN(t,x);return j&&(j.unsubscribe(),x.cancelActive&&A0(j)),!!j};Ic(m,{withTypes:()=>m});const f=async(x,j,b,S)=>{const _=new AbortController,E=eU(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(j,Ic({},b,{getOriginalState:S,condition:(T,I)=>E(T,I).then(Boolean),take:E,delay:eP(_.signal),pause:qh(_.signal),extra:i,signal:_.signal,fork:Z8(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((T,I,P)=>{T!==_&&(bl(T,E0),P.delete(T))})},cancel:()=>{bl(_,E0),x.pending.delete(_)},throwIfCancelled:()=>{jl(_.signal)}})))}catch(T){T instanceof Lm||wN(l,T,{raisedBy:"effect"})}finally{await Promise.all(C),bl(_,X8),s(x),x.pending.delete(_)}},p=tU(t,r);return{middleware:x=>j=>b=>{if(!$A(b))return j(b);if(nP.match(b))return d(b.payload);if(rU.match(b)){p();return}if(sP.match(b))return m(b.payload);let S=x.getState();const _=()=>{if(S===vN)throw new Error(li(23));return S};let E;try{if(E=j(b),t.size>0){const C=x.getState(),T=Array.from(t.values());for(const I of T){let P=!1;try{P=I.predicate(b,C,S)}catch(z){P=!1,wN(l,z,{raisedBy:"predicate"})}P&&f(I,b,x,_)}}}finally{S=vN}return E},startListening:d,stopListening:m,clearListeners:p}};function li(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},iP=Ws({name:"chartLayout",initialState:sU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:iU,setLayout:aU,setChartSize:oU,setScale:lU}=iP.actions,cU=iP.reducer;function aP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(r),!0).forEach(function(n){uU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uU(e,t,r){return(t=dU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=fU(e,"string");return typeof t=="symbol"?t:t+""}function fU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(e,t,r){return Kn(e)||Kn(t)?r:va(t)?Mc(e,t,r):typeof t=="function"?t(e):r}var hU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&mt(e[i]))return Ec(Ec({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&mt(e[l]))return Ec(Ec({},e),{},{[l]:e[l]+(s||0)})}return e},Ml=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",jN=1e-4,mU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-jN,i=Math.max(n[0],n[1])+jN,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},pU=(e,t)=>{if(!t||t.length!==2||!mt(t[0])||!mt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!mt(e[0])||e[0]<r)&&(s[0]=r),(!mt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},gU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=ya(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},yU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=ya(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},vU={sign:gU,expand:GL,none:$c,silhouette:YL,wiggle:JL,positive:yU},xU=(e,t,r)=>{var n=vU[r],s=KL().keys(t).value((i,l)=>Number(_s(i,l,0))).order(x0).offset(n);return s(e)};function wU(e){return e==null?void 0:String(e)}var SN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=_s(i,t.dataKey,t.scale.domain()[l]);return Kn(u)?null:t.scale(u)-s/2+n},bU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},jU=e=>{var t=e.flat(2).filter(mt);return[Math.min(...t),Math.max(...t)]},SU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],kU=(e,t,r)=>{if(e!=null)return SU(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=aP(m,t,r),p=jU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},kN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Rm(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function _N(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Ec(Ec({},t),{},{dataKey:r,payload:n,value:s,name:i})}function oP(e,t){if(e)return String(e);if(typeof t=="string")return t}var NU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},_U=(e,t)=>t==="centric"?e.angle:e.radius,so=e=>e.layout.width,io=e=>e.layout.height,CU=e=>e.layout.scale,lP=e=>e.layout.margin,Um=we(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Bm=we(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),EU="data-recharts-item-index",AU="data-recharts-item-data-key",Id=60;function CN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CN(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=OU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=TU(e,"string");return typeof t=="symbol"?t:t+""}function TU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IU=e=>e.brush.height;function DU(e){var t=Bm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Id;return r+s}return r},0)}function RU(e){var t=Bm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Id;return r+s}return r},0)}function $U(e){var t=Um(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function MU(e){var t=Um(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Gn=we([so,io,lP,IU,DU,RU,$U,MU,IA,d8],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=Zf(Zf({},p),f),x=y.bottom;y.bottom+=n,y=hU(y,d,m);var j=e-y.left-y.right,b=t-y.top-y.bottom;return Zf(Zf({brushBottom:x},y),{},{width:Math.max(j,0),height:Math.max(b,0)})}),FU=we(Gn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Jx=we(so,io,(e,t)=>({x:0,y:0,width:e,height:t})),LU=v.createContext(null),di=()=>v.useContext(LU)!=null,Wm=e=>e.brush,qm=we([Wm,Gn,lP],(e,t,r)=>({height:e.height,x:mt(e.x)?e.x:t.left,y:mt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:mt(e.width)?e.width:t.width})),sv={},iv={},av={},EN;function zU(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),b()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},b=()=>{j(),l=void 0,u=null},S=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=y==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=b,_.flush=S,s==null||s.addEventListener("abort",b,{once:!0}),_}e.debounce=t})(av)),av}var AN;function UU(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...b){f=n.apply(this,b),p=null},s,{edges:m}),x=function(...b){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,b),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,b),f)},j=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=j,x}e.debounce=r})(iv)),iv}var PN;function BU(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(sv)),sv}var ov,ON;function WU(){return ON||(ON=1,ov=BU().throttle),ov}var qU=WU();const VU=ea(qU);var TN=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},cP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=Ja(n)?e:Number(n),d=Ja(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},HU={width:0,height:0,overflow:"visible"},KU={width:0,overflowX:"visible"},GU={height:0,overflowY:"visible"},YU={},JU=e=>{var{width:t,height:r}=e,n=Ja(t),s=Ja(r);return n&&s?HU:n?KU:s?GU:YU};function XU(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function tn(e){return Number.isFinite(e)}function zo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P0.apply(null,arguments)}function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(n){QU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QU(e,t,r){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZU(e){var t=eB(e,"string");return typeof t=="symbol"?t:t+""}function eB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uP=v.createContext({width:-1,height:-1});function tB(e){return zo(e.width)&&zo(e.height)}function dP(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return tB(s)?v.createElement(uP.Provider,{value:s},t):null}var Xx=()=>v.useContext(uP),rB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:j={}}=e,b=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>b.current);var[_,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),C=v.useCallback((J,H)=>{E(pe=>{var Z=Math.round(J),K=Math.round(H);return pe.containerWidth===Z&&pe.containerHeight===K?pe:{containerWidth:Z,containerHeight:K}})},[]);v.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return Qc;var J=K=>{var ce,{width:B,height:se}=K[0].contentRect;C(B,se),(ce=S.current)===null||ce===void 0||ce.call(S,B,se)};f>0&&(J=VU(J,f,{trailing:!0,leading:!1}));var H=new ResizeObserver(J),{width:pe,height:Z}=b.current.getBoundingClientRect();return C(pe,Z),H.observe(b.current),()=>{H.disconnect()}},[C,f]);var{containerWidth:T,containerHeight:I}=_;TN(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:z}=cP(T,I,{width:s,height:i,aspect:r,maxHeight:d});return TN(P!=null&&P>0||z!=null&&z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,z,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Nr("recharts-responsive-container",y),style:DN(DN({},j),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},v.createElement("div",{style:JU({width:s,height:i})},v.createElement(dP,{width:P,height:z},m)))}),nB=v.forwardRef((e,t)=>{var r=Xx();if(zo(r.width)&&zo(r.height))return e.children;var{width:n,height:s}=XU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=cP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return mt(i)&&mt(l)?v.createElement(dP,{width:i,height:l},e.children):v.createElement(rB,P0({},e,{width:n,height:s,ref:t}))});function fP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Vm=()=>{var e,t=di(),r=ot(FU),n=ot(qm),s=(e=ot(Wm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},sB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iB=()=>{var e;return(e=ot(Gn))!==null&&e!==void 0?e:sB},aB=()=>ot(so),oB=()=>ot(io),rr=e=>e.layout.layoutType,Hm=()=>ot(rr),lB=()=>{var e=Hm();return e!==void 0},Km=e=>{var t=rn(),r=di(),{width:n,height:s}=e,i=Xx(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&zo(l)&&zo(u)&&t(oU({width:l,height:u}))},[t,r,l,u]),null},cB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hP=Ws({name:"legend",initialState:cB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Pn()},removeLegendPayload:{reducer(e,t){var r=Va(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Pn()}}}),{setLegendSize:mee,setLegendSettings:pee,addLegendPayload:uB,removeLegendPayload:dB}=hP.actions,fB=hP.reducer;function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O0.apply(null,arguments)}function RN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(r),!0).forEach(function(n){hB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hB(e,t,r){return(t=mB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mB(e){var t=pB(e,"string");return typeof t=="symbol"?t:t+""}function pB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gB(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var yB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var I={padding:0,margin:0},P=(u?Rm(i,u):i).map((z,J)=>{if(z.type==="none")return null;var H=z.formatter||l||gB,{value:pe,name:Z}=z,K=pe,ce=Z;if(H){var B=H(pe,Z,z,J,i);if(Array.isArray(B))[K,ce]=B;else if(B!=null)K=B;else return null}var se=lv({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:se},va(ce)?v.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,va(ce)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},K),v.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:I},P)}return null},j=lv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=lv({margin:0},s),S=!Kn(f),_=S?f:"",E=Nr("recharts-default-tooltip",d),C=Nr("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(_=p(f,i));var T=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",O0({className:E,style:j},T),v.createElement("p",{className:C,style:b},v.isValidElement(_)?_:"".concat(_)),x())},Mu="recharts-tooltip-wrapper",vB={visibility:"hidden"};function xB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Nr(Mu,{["".concat(Mu,"-right")]:mt(r)&&t&&mt(t.x)&&r>=t.x,["".concat(Mu,"-left")]:mt(r)&&t&&mt(t.x)&&r<t.x,["".concat(Mu,"-bottom")]:mt(n)&&t&&mt(t.y)&&n>=t.y,["".concat(Mu,"-top")]:mt(n)&&t&&mt(t.y)&&n<t.y})}function $N(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&mt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,j=y;return x<j?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var b=p+u,S=y+m;return b>S?Math.max(f,y):Math.max(p,y)}function wB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function bB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=$N({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=$N({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=wB({translateX:f,translateY:p,useTranslate3d:u})):m=vB,{cssProperties:m,cssClasses:xB({translateX:f,translateY:p,coordinate:r})}}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){T0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T0(e,t,r){return(t=jB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jB(e){var t=SB(e,"string");return typeof t=="symbol"?t:t+""}function SB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kB extends v.PureComponent{constructor(){super(...arguments),T0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),T0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:j,lastBoundingBox:b,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=bB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:y,viewBox:x}),T=_?{}:eh(eh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),I=eh(eh({},T),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:I,ref:S},i)}}var NB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Zc={devToolsEnabled:!1,isSsr:NB()},mP=()=>{var e;return(e=ot(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}function FN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(r),!0).forEach(function(n){_B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _B(e,t,r){return(t=CB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CB(e){var t=EB(e,"string");return typeof t=="symbol"?t:t+""}function EB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zN={curveBasisClosed:$L,curveBasisOpen:ML,curveBasis:RL,curveBumpX:bL,curveBumpY:jL,curveLinearClosed:FL,curveLinear:Im,curveMonotoneX:LL,curveMonotoneY:zL,curveNatural:UL,curveStep:BL,curveStepAfter:qL,curveStepBefore:WL},Hh=e=>tn(e.x)&&tn(e.y),UN=e=>e.base!=null&&Hh(e.base)&&Hh(e),Fu=e=>e.x,Lu=e=>e.y,AB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Pd(e));return(r==="curveMonotone"||r==="curveBump")&&t?zN["".concat(r).concat(t==="vertical"?"Y":"X")]:zN[r]||Im},PB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=AB(t,s),u=i?r.filter(Hh):r,d;if(Array.isArray(n)){var m=r.map((x,j)=>LN(LN({},x),{},{base:n[j]}));s==="vertical"?d=Kf().y(Lu).x1(Fu).x0(x=>x.base.x):d=Kf().x(Fu).y1(Lu).y0(x=>x.base.y);var f=d.defined(UN).curve(l),p=i?m.filter(UN):m;return f(p)}s==="vertical"&&mt(n)?d=Kf().y(Lu).x1(Fu).x0(n):mt(n)?d=Kf().x(Fu).y1(Lu).y0(n):d=iA().x(Fu).y(Lu);var y=d.defined(Hh).curve(l);return y(u)},pP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?PB(e):n;return v.createElement("path",I0({},Lo(e),mz(e),{className:Nr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},OB=["x","y","top","left","width","height","className"];function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(null,arguments)}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){IB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=RB(e,"string");return typeof t=="symbol"?t:t+""}function RB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $B(e,t){if(e==null)return{};var r,n,s=MB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FB=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),LB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=$B(e,OB),m=TB({x:t,y:r,top:n,left:s,width:i,height:l},d);return!mt(t)||!mt(r)||!mt(i)||!mt(l)||!mt(n)||!mt(s)?null:v.createElement("path",D0({},Ci(m),{className:Nr("recharts-cross",u),d:FB(t,r,i,l,n,s)}))};function zB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(n){UB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UB(e,t,r){return(t=BB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BB(e){var t=WB(e,"string");return typeof t=="symbol"?t:t+""}function WB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gP=(e,t,r)=>e.map(n=>"".concat(qB(n)," ").concat(t,"ms ").concat(r)).join(","),VB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),pd=(e,t)=>Object.keys(t).reduce((r,n)=>qN(qN({},r),{},{[n]:e(n,t[n])}),{});function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){HB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=GB(e,"string");return typeof t=="symbol"?t:t+""}function GB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kh=(e,t,r)=>e+(t-e)*r,R0=e=>{var{from:t,to:r}=e;return t!==r},yP=(e,t,r)=>{var n=pd((s,i)=>{if(R0(i)){var[l,u]=e(i.from,i.to,i.velocity);return An(An({},i),{},{from:l,velocity:u})}return i},t);return r<1?pd((s,i)=>R0(i)?An(An({},i),{},{velocity:Kh(i.velocity,n[s].velocity,r),from:Kh(i.from,n[s].from,r)}):i,t):yP(e,n,r-1)};function YB(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>An(An({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>pd((y,x)=>x.from,u),m=()=>!Object.values(u).filter(R0).length,f=null,p=y=>{l||(l=y);var x=y-l,j=x/r.dt;u=yP(r,u,j),s(An(An(An({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function JB(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>An(An({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=pd((b,S)=>Kh(...S,r(y)),d);if(i(An(An(An({},e),t),x)),y<1)u=l.setTimeout(f);else{var j=pd((b,S)=>Kh(...S,r(1)),d);i(An(An(An({},e),t),j))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const XB=(e,t,r,n,s,i)=>{var l=VB(e,t);return r==null?()=>(s(An(An({},e),t)),()=>{}):r.isStepper===!0?YB(e,t,r,l,s,i):JB(e,t,r,n,l,s,i)};var Gh=1e-4,vP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),HN=(e,t)=>r=>{var n=vP(e,t);return xP(n,r)},QB=(e,t)=>r=>{var n=vP(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return xP(s,r)},ZB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},e7=(e,t,r,n)=>{var s=HN(e,r),i=HN(t,n),l=QB(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,j=l(p);if(Math.abs(x-f)<Gh||j<Gh)return i(p);p=u(p-x/j)}return i(p)};return d.isStepper=!1,d},KN=function(){return e7(...ZB(...arguments))},t7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<Gh&&Math.abs(p)<Gh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},r7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return KN(e);case"spring":return t7();default:if(e.split("(")[0]==="cubic-bezier")return KN(e)}return typeof e=="function"?e:null};function n7(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class s7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function i7(){return n7(new s7)}var a7=v.createContext(i7);function o7(e,t){var r=v.useContext(a7);return v.useMemo(()=>t??r(e),[e,t,r])}var l7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GN={t:0},cv={t:1};function Qx(e){var t=Oi(e,l7),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=o7(t.animationId,t.animationManager),[p,y]=v.useState(r?GN:cv),x=v.useRef(null);return v.useEffect(()=>{r||y(cv)},[r]),v.useEffect(()=>{if(!r||!n)return Qc;var j=XB(GN,cv,r7(i),s,y,f.getTimeoutController()),b=()=>{x.current=j()};return f.start([d,l,b,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function Zx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(dd(t)),n=v.useRef(e);return n.current!==e&&(r.current=dd(t),n.current=e),r.current}var c7=["radius"],u7=["radius"];function YN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YN(Object(r),!0).forEach(function(n){d7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d7(e,t,r){return(t=f7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=h7(e,"string");return typeof t=="symbol"?t:t+""}function h7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yh.apply(null,arguments)}function XN(e,t){if(e==null)return{};var r,n,s=m7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function m7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QN=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},ZN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wP=e=>{var t=Oi(e,ZN),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var de=r.current.getTotalLength();de&&s(de)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:b}=t,S=v.useRef(u),_=v.useRef(d),E=v.useRef(i),C=v.useRef(l),T=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),I=Zx(T,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=Nr("recharts-rectangle",f);if(!b){var z=Ci(t),{radius:J}=z,H=XN(z,c7);return v.createElement("path",Yh({},H,{radius:typeof m=="number"?m:void 0,className:P,d:QN(i,l,u,d,m)}))}var pe=S.current,Z=_.current,K=E.current,ce=C.current,B="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),W=gP(["strokeDasharray"],y,typeof p=="string"?p:ZN.animationEasing);return v.createElement(Qx,{animationId:I,key:I,canBegin:n>0,duration:y,easing:p,isActive:b,begin:x},de=>{var oe=ss(pe,u,de),X=ss(Z,d,de),ee=ss(K,i,de),D=ss(ce,l,de);r.current&&(S.current=oe,_.current=X,E.current=ee,C.current=D);var q;j?de>0?q={transition:W,strokeDasharray:se}:q={strokeDasharray:B}:q={strokeDasharray:se};var Te=Ci(t),{radius:be}=Te,Ee=XN(Te,u7);return v.createElement("path",Yh({},Ee,{radius:typeof m=="number"?m:void 0,className:P,d:QN(ee,D,oe,X,m),ref:r,style:JN(JN({},q),t.style)}))})};function e_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function t_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e_(Object(r),!0).forEach(function(n){p7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jh=Math.PI/180,v7=e=>e*180/Math.PI,as=(e,t,r,n)=>({x:e+Math.cos(-Jh*n)*r,y:t+Math.sin(-Jh*n)*r}),x7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},w7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},b7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=w7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:v7(d),angleInRadian:d}},j7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},S7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},k7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=b7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=j7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?t_(t_({},t),{},{radius:s,angle:S7(f,t)}):null};function bP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=as(t,r,n,s),u=as(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0.apply(null,arguments)}var N7=(e,t)=>{var r=ai(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},th=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/Jh,p=d?s:s+i*f,y=as(t,r,m,p),x=as(t,r,n,p),j=d?s-i*f:s,b=as(t,r,m*Math.cos(f*Jh),j);return{center:y,circleTangency:x,lineTangency:b,theta:f}},jP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=N7(i,l),d=i+u,m=as(t,r,s,i),f=as(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=as(t,r,n,i),x=as(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},_7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=ai(m-d),{circleTangency:p,lineTangency:y,theta:x}=th({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:j,lineTangency:b,theta:S}=th({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):jP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:T,theta:I}=th({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:P,lineTangency:z,theta:J}=th({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),H=u?Math.abs(d-m):Math.abs(d-m)-I-J;if(H<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(z.x,",").concat(z.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},C7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SP=e=>{var t=Oi(e,C7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=Nr("recharts-sector",p),x=i-s,j=Zi(l,x,0,!0),b;return j>0&&Math.abs(m-f)<360?b=_7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):b=jP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",$0({},Ci(t),{className:y,d:b}))};function E7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(wA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=as(n,s,i,u),m=as(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return bP(t)}}var uv={},dv={},fv={},r_;function A7(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(fv)),fv}var n_;function P7(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(dv)),dv}var s_;function O7(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TA(),r=P7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(uv)),uv}var hv,i_;function T7(){return i_||(i_=1,hv=O7().range),hv}var I7=T7();const kP=ea(I7);function Mo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ew(e){let t,r,n;e.length!==2?(t=Mo,r=(u,d)=>Mo(e(u),d),n=(u,d)=>e(u)-d):(t=e===Mo||e===D7?e:R7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function R7(){return 0}function NP(e){return e===null?NaN:+e}function*$7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const M7=ew(Mo),Dd=M7.right;ew(NP).center;class a_ extends Map{constructor(t,r=z7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(o_(this,t))}has(t){return super.has(o_(this,t))}set(t,r){return super.set(F7(this,t),r)}delete(t){return super.delete(L7(this,t))}}function o_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function F7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function L7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function z7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function U7(e=Mo){if(e===Mo)return _P;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function _P(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const B7=Math.sqrt(50),W7=Math.sqrt(10),q7=Math.sqrt(2);function Xh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=B7?10:i>=W7?5:i>=q7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?Xh(e,t,r*2):[u,d,m]}function M0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?Xh(t,e,r):Xh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function F0(e,t,r){return t=+t,e=+e,r=+r,Xh(e,t,r)[2]}function L0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?F0(t,e,r):F0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function l_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function c_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function CP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?_P:U7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),j=Math.min(n,Math.floor(t+(d-m)*p/d+y));CP(e,t,x,j,s)}const i=e[t];let l=r,u=n;for(zu(e,r,t),s(e[n],i)>0&&zu(e,r,n);l<u;){for(zu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?zu(e,r,u):(++u,zu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function zu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function V7(e,t,r){if(e=Float64Array.from($7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return c_(e);if(t>=1)return l_(e);var n,s=(n-1)*t,i=Math.floor(s),l=l_(CP(e,i).subarray(0,i+1)),u=c_(e.subarray(i+1));return l+(u-l)*(s-i)}}function H7(e,t,r=NP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function K7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Ti(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ao(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const z0=Symbol("implicit");function tw(){var e=new a_,t=[],r=[],n=z0;function s(i){let l=e.get(i);if(l===void 0){if(n!==z0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new a_;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return tw(t,r).unknown(n)},Ti.apply(s,arguments),s}function rw(){var e=tw().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,j=x?s:n,b=x?n:s;i=(b-j)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),j+=(b-j-i*(y-d))*f,l=i*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=K7(y).map(function(_){return j+i*_});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return rw(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Ti.apply(p(),arguments)}function EP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return EP(t())},e}function G7(){return EP(rw.apply(null,arguments).paddingInner(1))}function nw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function AP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Rd(){}var gd=.7,Qh=1/gd,Dc="\\s*([+-]?\\d+)\\s*",yd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y7=/^#([0-9a-f]{3,8})$/,J7=new RegExp(`^rgb\\(${Dc},${Dc},${Dc}\\)$`),X7=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),Q7=new RegExp(`^rgba\\(${Dc},${Dc},${Dc},${yd}\\)$`),Z7=new RegExp(`^rgba\\(${ga},${ga},${ga},${yd}\\)$`),e9=new RegExp(`^hsl\\(${yd},${ga},${ga}\\)$`),t9=new RegExp(`^hsla\\(${yd},${ga},${ga},${yd}\\)$`),u_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nw(Rd,vd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:d_,formatHex:d_,formatHex8:r9,formatHsl:n9,formatRgb:f_,toString:f_});function d_(){return this.rgb().formatHex()}function r9(){return this.rgb().formatHex8()}function n9(){return PP(this).formatHsl()}function f_(){return this.rgb().formatRgb()}function vd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Y7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?h_(t):r===3?new zs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=J7.exec(e))?new zs(t[1],t[2],t[3],1):(t=X7.exec(e))?new zs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Q7.exec(e))?rh(t[1],t[2],t[3],t[4]):(t=Z7.exec(e))?rh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e9.exec(e))?g_(t[1],t[2]/100,t[3]/100,1):(t=t9.exec(e))?g_(t[1],t[2]/100,t[3]/100,t[4]):u_.hasOwnProperty(e)?h_(u_[e]):e==="transparent"?new zs(NaN,NaN,NaN,0):null}function h_(e){return new zs(e>>16&255,e>>8&255,e&255,1)}function rh(e,t,r,n){return n<=0&&(e=t=r=NaN),new zs(e,t,r,n)}function s9(e){return e instanceof Rd||(e=vd(e)),e?(e=e.rgb(),new zs(e.r,e.g,e.b,e.opacity)):new zs}function U0(e,t,r,n){return arguments.length===1?s9(e):new zs(e,t,r,n??1)}function zs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}nw(zs,U0,AP(Rd,{brighter(e){return e=e==null?Qh:Math.pow(Qh,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gd:Math.pow(gd,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zs(Sl(this.r),Sl(this.g),Sl(this.b),Zh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m_,formatHex:m_,formatHex8:i9,formatRgb:p_,toString:p_}));function m_(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}`}function i9(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}${yl((isNaN(this.opacity)?1:this.opacity)*255)}`}function p_(){const e=Zh(this.opacity);return`${e===1?"rgb(":"rgba("}${Sl(this.r)}, ${Sl(this.g)}, ${Sl(this.b)}${e===1?")":`, ${e})`}`}function Zh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yl(e){return e=Sl(e),(e<16?"0":"")+e.toString(16)}function g_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,r,n)}function PP(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof Rd||(e=vd(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new Ji(l,u,d,e.opacity)}function a9(e,t,r,n){return arguments.length===1?PP(e):new Ji(e,t,r,n??1)}function Ji(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}nw(Ji,a9,AP(Rd,{brighter(e){return e=e==null?Qh:Math.pow(Qh,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gd:Math.pow(gd,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new zs(mv(e>=240?e-240:e+120,s,n),mv(e,s,n),mv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Ji(y_(this.h),nh(this.s),nh(this.l),Zh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zh(this.opacity);return`${e===1?"hsl(":"hsla("}${y_(this.h)}, ${nh(this.s)*100}%, ${nh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function y_(e){return e=(e||0)%360,e<0?e+360:e}function nh(e){return Math.max(0,Math.min(1,e||0))}function mv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sw=e=>()=>e;function o9(e,t){return function(r){return e+r*t}}function l9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function c9(e){return(e=+e)==1?OP:function(t,r){return r-t?l9(t,r,e):sw(isNaN(t)?r:t)}}function OP(e,t){var r=t-e;return r?o9(e,r):sw(isNaN(e)?t:e)}const v_=(function e(t){var r=c9(t);function n(s,i){var l=r((s=U0(s)).r,(i=U0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=OP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function u9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function d9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=eu(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function h9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function em(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function m9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=eu(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var B0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pv=new RegExp(B0.source,"g");function p9(e){return function(){return e}}function g9(e){return function(t){return e(t)+""}}function y9(e,t){var r=B0.lastIndex=pv.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=B0.exec(e))&&(s=pv.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:em(n,s)})),r=pv.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?g9(d[0].x):p9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function eu(e,t){var r=typeof t,n;return t==null||r==="boolean"?sw(t):(r==="number"?em:r==="string"?(n=vd(t))?(t=n,v_):y9:t instanceof vd?v_:t instanceof Date?h9:d9(t)?u9:Array.isArray(t)?f9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?m9:em)(e,t)}function iw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function v9(e,t){t===void 0&&(t=e,e=eu);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function x9(e){return function(){return e}}function tm(e){return+e}var x_=[0,1];function Ns(e){return e}function W0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:x9(isNaN(t)?NaN:.5)}function w9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function b9(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=W0(s,n),i=r(l,i)):(n=W0(n,s),i=r(i,l)),function(u){return i(n(u))}}function j9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=W0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Dd(e,u,1,n)-1;return i[d](s[d](u))}}function $d(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gm(){var e=x_,t=x_,r=eu,n,s,i,l=Ns,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==Ns&&(l=w9(e[0],e[y-1])),u=y>2?j9:b9,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),em)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,tm),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=iw,f()},p.clamp=function(y){return arguments.length?(l=y?!0:Ns,f()):l!==Ns},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function aw(){return Gm()(Ns,Ns)}function S9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Fc(e){return e=rm(Math.abs(e)),e?e[1]:NaN}function k9(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function N9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xd(e){if(!(t=_9.exec(e)))throw new Error("invalid format: "+e);var t;return new ow({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xd.prototype=ow.prototype;function ow(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ow.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var TP;function E9(e,t){var r=rm(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(TP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+rm(e,Math.max(0,t+i-1))[0]}function w_(e,t){var r=rm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const b_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>w_(e*100,t),r:w_,s:E9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function j_(e){return e}var S_=Array.prototype.map,k_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A9(e){var t=e.grouping===void 0||e.thousands===void 0?j_:k9(S_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?j_:N9(S_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=xd(p);var y=p.fill,x=p.align,j=p.sign,b=p.symbol,S=p.zero,_=p.width,E=p.comma,C=p.precision,T=p.trim,I=p.type;I==="n"?(E=!0,I="g"):b_[I]||(C===void 0&&(C=12),T=!0,I="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var P=b==="$"?r:b==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",z=b==="$"?n:/[%p]/.test(I)?l:"",J=b_[I],H=/[defgprs%]/.test(I);C=C===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function pe(Z){var K=P,ce=z,B,se,W;if(I==="c")ce=J(Z)+ce,Z="";else{Z=+Z;var de=Z<0||1/Z<0;if(Z=isNaN(Z)?d:J(Math.abs(Z),C),T&&(Z=C9(Z)),de&&+Z==0&&j!=="+"&&(de=!1),K=(de?j==="("?j:u:j==="-"||j==="("?"":j)+K,ce=(I==="s"?k_[8+TP/3]:"")+ce+(de&&j==="("?")":""),H){for(B=-1,se=Z.length;++B<se;)if(W=Z.charCodeAt(B),48>W||W>57){ce=(W===46?s+Z.slice(B+1):Z.slice(B))+ce,Z=Z.slice(0,B);break}}}E&&!S&&(Z=t(Z,1/0));var oe=K.length+Z.length+ce.length,X=oe<_?new Array(_-oe+1).join(y):"";switch(E&&S&&(Z=t(X+Z,X.length?_-ce.length:1/0),X=""),x){case"<":Z=K+Z+ce+X;break;case"=":Z=K+X+Z+ce;break;case"^":Z=X.slice(0,oe=X.length>>1)+K+Z+ce+X.slice(oe);break;default:Z=X+K+Z+ce;break}return i(Z)}return pe.toString=function(){return p+""},pe}function f(p,y){var x=m((p=xd(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor(Fc(y)/3)))*3,b=Math.pow(10,-j),S=k_[8+j/3];return function(_){return x(b*_)+S}}return{format:m,formatPrefix:f}}var sh,lw,IP;P9({thousands:",",grouping:[3],currency:["$",""]});function P9(e){return sh=A9(e),lw=sh.format,IP=sh.formatPrefix,sh}function O9(e){return Math.max(0,-Fc(Math.abs(e)))}function T9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fc(t)/3)))*3-Fc(Math.abs(e)))}function I9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fc(t)-Fc(e))+1}function DP(e,t,r,n){var s=L0(e,t,r),i;switch(n=xd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=T9(s,l))&&(n.precision=i),IP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=I9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=O9(s))&&(n.precision=i-(n.type==="%")*2);break}}return lw(n)}function Wo(e){var t=e.domain;return e.ticks=function(r){var n=t();return M0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return DP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=F0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function RP(){var e=aw();return e.copy=function(){return $d(e,RP())},Ti.apply(e,arguments),Wo(e)}function $P(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,tm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return $P(e).unknown(t)},e=arguments.length?Array.from(e,tm):[0,1],Wo(r)}function MP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function N_(e){return Math.log(e)}function __(e){return Math.exp(e)}function D9(e){return-Math.log(-e)}function R9(e){return-Math.exp(-e)}function $9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function M9(e){return e===10?$9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function F9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function C_(e){return(t,r)=>-e(-t,r)}function cw(e){const t=e(N_,__),r=t.domain;let n=10,s,i;function l(){return s=F9(n),i=M9(n),r()[0]<0?(s=C_(s),i=C_(i),e(D9,R9)):e(N_,__),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),j,b;const S=u==null?10:+u;let _=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(j=1;j<n;++j)if(b=y<0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;_.push(b)}}else for(;y<=x;++y)for(j=n-1;j>=1;--j)if(b=y>0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;_.push(b)}_.length*2<S&&(_=M0(m,f,S))}else _=M0(y,x,Math.min(x-y,S)).map(i);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=xd(d)).precision==null&&(d.trim=!0),d=lw(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(MP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function FP(){const e=cw(Gm()).domain([1,10]);return e.copy=()=>$d(e,FP()).base(e.base()),Ti.apply(e,arguments),e}function E_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function A_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uw(e){var t=1,r=e(E_(t),A_(t));return r.constant=function(n){return arguments.length?e(E_(t=+n),A_(t)):t},Wo(r)}function LP(){var e=uw(Gm());return e.copy=function(){return $d(e,LP()).constant(e.constant())},Ti.apply(e,arguments)}function P_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function z9(e){return e<0?-e*e:e*e}function dw(e){var t=e(Ns,Ns),r=1;function n(){return r===1?e(Ns,Ns):r===.5?e(L9,z9):e(P_(r),P_(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Wo(t)}function fw(){var e=dw(Gm());return e.copy=function(){return $d(e,fw()).exponent(e.exponent())},Ti.apply(e,arguments),e}function U9(){return fw.apply(null,arguments).exponent(.5)}function O_(e){return Math.sign(e)*e*e}function B9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function zP(){var e=aw(),t=[0,1],r=!1,n;function s(i){var l=B9(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(O_(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,tm)).map(O_)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return zP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ti.apply(s,arguments),Wo(s)}function UP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=H7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Dd(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Mo),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return UP().domain(e).range(t).unknown(n)},Ti.apply(i,arguments)}function BP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Dd(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return BP().domain([e,t]).range(s).unknown(i)},Ti.apply(Wo(l),arguments)}function WP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Dd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return WP().domain(e).range(t).unknown(r)},Ti.apply(s,arguments)}const gv=new Date,yv=new Date;function Tn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Tn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(gv.setTime(+i),yv.setTime(+l),e(gv),e(yv),Math.floor(r(gv,yv))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const nm=Tn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);nm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Tn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):nm);nm.range;const Ua=1e3,Ni=Ua*60,Ba=Ni*60,Qa=Ba*24,hw=Qa*7,T_=Qa*30,vv=Qa*365,vl=Tn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());vl.range;const mw=Tn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getMinutes());mw.range;const pw=Tn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getUTCMinutes());pw.range;const gw=Tn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Ni)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());gw.range;const yw=Tn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());yw.range;const Md=Tn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ni)/Qa,e=>e.getDate()-1);Md.range;const Ym=Tn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Qa,e=>e.getUTCDate()-1);Ym.range;const qP=Tn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Qa,e=>Math.floor(e/Qa));qP.range;function Fl(e){return Tn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ni)/hw)}const Jm=Fl(0),sm=Fl(1),W9=Fl(2),q9=Fl(3),Lc=Fl(4),V9=Fl(5),H9=Fl(6);Jm.range;sm.range;W9.range;q9.range;Lc.range;V9.range;H9.range;function Ll(e){return Tn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/hw)}const Xm=Ll(0),im=Ll(1),K9=Ll(2),G9=Ll(3),zc=Ll(4),Y9=Ll(5),J9=Ll(6);Xm.range;im.range;K9.range;G9.range;zc.range;Y9.range;J9.range;const vw=Tn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vw.range;const xw=Tn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xw.range;const Za=Tn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Tn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Za.range;const eo=Tn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());eo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Tn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});eo.range;function VP(e,t,r,n,s,i){const l=[[vl,1,Ua],[vl,5,5*Ua],[vl,15,15*Ua],[vl,30,30*Ua],[i,1,Ni],[i,5,5*Ni],[i,15,15*Ni],[i,30,30*Ni],[s,1,Ba],[s,3,3*Ba],[s,6,6*Ba],[s,12,12*Ba],[n,1,Qa],[n,2,2*Qa],[r,1,hw],[t,1,T_],[t,3,3*T_],[e,1,vv]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),j=x?x.range(m,+f+1):[];return y?j.reverse():j}function d(m,f,p){const y=Math.abs(f-m)/p,x=ew(([,,S])=>S).right(l,y);if(x===l.length)return e.every(L0(m/vv,f/vv,p));if(x===0)return nm.every(Math.max(L0(m,f,p),1));const[j,b]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return j.every(b)}return[u,d]}const[X9,Q9]=VP(eo,xw,Xm,qP,yw,pw),[Z9,eW]=VP(Za,vw,Jm,Md,gw,mw);function xv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Uu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function tW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Bu(s),f=Wu(s),p=Bu(i),y=Wu(i),x=Bu(l),j=Wu(l),b=Bu(u),S=Wu(u),_=Bu(d),E=Wu(d),C={a:de,A:oe,b:X,B:ee,c:null,d:F_,e:F_,f:kW,g:DW,G:$W,H:bW,I:jW,j:SW,L:HP,m:NW,M:_W,p:D,q,Q:U_,s:B_,S:CW,u:EW,U:AW,V:PW,w:OW,W:TW,x:null,X:null,y:IW,Y:RW,Z:MW,"%":z_},T={a:Te,A:be,b:Ee,B:le,c:null,d:L_,e:L_,f:UW,g:XW,G:ZW,H:FW,I:LW,j:zW,L:GP,m:BW,M:WW,p:fe,q:Q,Q:U_,s:B_,S:qW,u:VW,U:HW,V:KW,w:GW,W:YW,x:null,X:null,y:JW,Y:QW,Z:eq,"%":z_},I={a:pe,A:Z,b:K,B:ce,c:B,d:$_,e:$_,f:yW,g:R_,G:D_,H:M_,I:M_,j:hW,L:gW,m:fW,M:mW,p:H,q:dW,Q:xW,s:wW,S:pW,u:aW,U:oW,V:lW,w:iW,W:cW,x:se,X:W,y:R_,Y:D_,Z:uW,"%":vW};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),T.x=P(r,T),T.X=P(n,T),T.c=P(t,T);function P(R,ye){return function(Me){var V=[],Le=-1,ze=0,dt=R.length,ft,$t,_t;for(Me instanceof Date||(Me=new Date(+Me));++Le<dt;)R.charCodeAt(Le)===37&&(V.push(R.slice(ze,Le)),($t=I_[ft=R.charAt(++Le)])!=null?ft=R.charAt(++Le):$t=ft==="e"?" ":"0",(_t=ye[ft])&&(ft=_t(Me,$t)),V.push(ft),ze=Le+1);return V.push(R.slice(ze,Le)),V.join("")}}function z(R,ye){return function(Me){var V=Uu(1900,void 0,1),Le=J(V,R,Me+="",0),ze,dt;if(Le!=Me.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ye&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ze=wv(Uu(V.y,0,1)),dt=ze.getUTCDay(),ze=dt>4||dt===0?im.ceil(ze):im(ze),ze=Ym.offset(ze,(V.V-1)*7),V.y=ze.getUTCFullYear(),V.m=ze.getUTCMonth(),V.d=ze.getUTCDate()+(V.w+6)%7):(ze=xv(Uu(V.y,0,1)),dt=ze.getDay(),ze=dt>4||dt===0?sm.ceil(ze):sm(ze),ze=Md.offset(ze,(V.V-1)*7),V.y=ze.getFullYear(),V.m=ze.getMonth(),V.d=ze.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),dt="Z"in V?wv(Uu(V.y,0,1)).getUTCDay():xv(Uu(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(dt+5)%7:V.w+V.U*7-(dt+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,wv(V)):xv(V)}}function J(R,ye,Me,V){for(var Le=0,ze=ye.length,dt=Me.length,ft,$t;Le<ze;){if(V>=dt)return-1;if(ft=ye.charCodeAt(Le++),ft===37){if(ft=ye.charAt(Le++),$t=I[ft in I_?ye.charAt(Le++):ft],!$t||(V=$t(R,Me,V))<0)return-1}else if(ft!=Me.charCodeAt(V++))return-1}return V}function H(R,ye,Me){var V=m.exec(ye.slice(Me));return V?(R.p=f.get(V[0].toLowerCase()),Me+V[0].length):-1}function pe(R,ye,Me){var V=x.exec(ye.slice(Me));return V?(R.w=j.get(V[0].toLowerCase()),Me+V[0].length):-1}function Z(R,ye,Me){var V=p.exec(ye.slice(Me));return V?(R.w=y.get(V[0].toLowerCase()),Me+V[0].length):-1}function K(R,ye,Me){var V=_.exec(ye.slice(Me));return V?(R.m=E.get(V[0].toLowerCase()),Me+V[0].length):-1}function ce(R,ye,Me){var V=b.exec(ye.slice(Me));return V?(R.m=S.get(V[0].toLowerCase()),Me+V[0].length):-1}function B(R,ye,Me){return J(R,t,ye,Me)}function se(R,ye,Me){return J(R,r,ye,Me)}function W(R,ye,Me){return J(R,n,ye,Me)}function de(R){return l[R.getDay()]}function oe(R){return i[R.getDay()]}function X(R){return d[R.getMonth()]}function ee(R){return u[R.getMonth()]}function D(R){return s[+(R.getHours()>=12)]}function q(R){return 1+~~(R.getMonth()/3)}function Te(R){return l[R.getUTCDay()]}function be(R){return i[R.getUTCDay()]}function Ee(R){return d[R.getUTCMonth()]}function le(R){return u[R.getUTCMonth()]}function fe(R){return s[+(R.getUTCHours()>=12)]}function Q(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var ye=P(R+="",C);return ye.toString=function(){return R},ye},parse:function(R){var ye=z(R+="",!1);return ye.toString=function(){return R},ye},utcFormat:function(R){var ye=P(R+="",T);return ye.toString=function(){return R},ye},utcParse:function(R){var ye=z(R+="",!0);return ye.toString=function(){return R},ye}}}var I_={"-":"",_:" ",0:"0"},Yn=/^\s*\d+/,rW=/^%/,nW=/[\\^$*+?|[\]().{}]/g;function Gt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function sW(e){return e.replace(nW,"\\$&")}function Bu(e){return new RegExp("^(?:"+e.map(sW).join("|")+")","i")}function Wu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function iW(e,t,r){var n=Yn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=Yn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function D_(e,t,r){var n=Yn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function R_(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dW(e,t,r){var n=Yn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $_(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=Yn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function M_(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=Yn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=Yn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yW(e,t,r){var n=Yn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vW(e,t,r){var n=rW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xW(e,t,r){var n=Yn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=Yn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function F_(e,t){return Gt(e.getDate(),t,2)}function bW(e,t){return Gt(e.getHours(),t,2)}function jW(e,t){return Gt(e.getHours()%12||12,t,2)}function SW(e,t){return Gt(1+Md.count(Za(e),e),t,3)}function HP(e,t){return Gt(e.getMilliseconds(),t,3)}function kW(e,t){return HP(e,t)+"000"}function NW(e,t){return Gt(e.getMonth()+1,t,2)}function _W(e,t){return Gt(e.getMinutes(),t,2)}function CW(e,t){return Gt(e.getSeconds(),t,2)}function EW(e){var t=e.getDay();return t===0?7:t}function AW(e,t){return Gt(Jm.count(Za(e)-1,e),t,2)}function KP(e){var t=e.getDay();return t>=4||t===0?Lc(e):Lc.ceil(e)}function PW(e,t){return e=KP(e),Gt(Lc.count(Za(e),e)+(Za(e).getDay()===4),t,2)}function OW(e){return e.getDay()}function TW(e,t){return Gt(sm.count(Za(e)-1,e),t,2)}function IW(e,t){return Gt(e.getFullYear()%100,t,2)}function DW(e,t){return e=KP(e),Gt(e.getFullYear()%100,t,2)}function RW(e,t){return Gt(e.getFullYear()%1e4,t,4)}function $W(e,t){var r=e.getDay();return e=r>=4||r===0?Lc(e):Lc.ceil(e),Gt(e.getFullYear()%1e4,t,4)}function MW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Gt(t/60|0,"0",2)+Gt(t%60,"0",2)}function L_(e,t){return Gt(e.getUTCDate(),t,2)}function FW(e,t){return Gt(e.getUTCHours(),t,2)}function LW(e,t){return Gt(e.getUTCHours()%12||12,t,2)}function zW(e,t){return Gt(1+Ym.count(eo(e),e),t,3)}function GP(e,t){return Gt(e.getUTCMilliseconds(),t,3)}function UW(e,t){return GP(e,t)+"000"}function BW(e,t){return Gt(e.getUTCMonth()+1,t,2)}function WW(e,t){return Gt(e.getUTCMinutes(),t,2)}function qW(e,t){return Gt(e.getUTCSeconds(),t,2)}function VW(e){var t=e.getUTCDay();return t===0?7:t}function HW(e,t){return Gt(Xm.count(eo(e)-1,e),t,2)}function YP(e){var t=e.getUTCDay();return t>=4||t===0?zc(e):zc.ceil(e)}function KW(e,t){return e=YP(e),Gt(zc.count(eo(e),e)+(eo(e).getUTCDay()===4),t,2)}function GW(e){return e.getUTCDay()}function YW(e,t){return Gt(im.count(eo(e)-1,e),t,2)}function JW(e,t){return Gt(e.getUTCFullYear()%100,t,2)}function XW(e,t){return e=YP(e),Gt(e.getUTCFullYear()%100,t,2)}function QW(e,t){return Gt(e.getUTCFullYear()%1e4,t,4)}function ZW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zc(e):zc.ceil(e),Gt(e.getUTCFullYear()%1e4,t,4)}function eq(){return"+0000"}function z_(){return"%"}function U_(e){return+e}function B_(e){return Math.floor(+e/1e3)}var wc,JP,XP;tq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tq(e){return wc=tW(e),JP=wc.format,wc.parse,XP=wc.utcFormat,wc.utcParse,wc}function rq(e){return new Date(e)}function nq(e){return e instanceof Date?+e:+new Date(+e)}function ww(e,t,r,n,s,i,l,u,d,m){var f=aw(),p=f.invert,y=f.domain,x=m(".%L"),j=m(":%S"),b=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),T=m("%Y");function I(P){return(d(P)<P?x:u(P)<P?j:l(P)<P?b:i(P)<P?S:n(P)<P?s(P)<P?_:E:r(P)<P?C:T)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,nq)):y().map(rq)},f.ticks=function(P){var z=y();return e(z[0],z[z.length-1],P??10)},f.tickFormat=function(P,z){return z==null?I:m(z)},f.nice=function(P){var z=y();return(!P||typeof P.range!="function")&&(P=t(z[0],z[z.length-1],P??10)),P?y(MP(z,P)):f},f.copy=function(){return $d(f,ww(e,t,r,n,s,i,l,u,d,m))},f}function sq(){return Ti.apply(ww(Z9,eW,Za,vw,Jm,Md,gw,mw,vl,JP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iq(){return Ti.apply(ww(X9,Q9,eo,xw,Xm,Ym,yw,pw,vl,XP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qm(){var e=0,t=1,r,n,s,i,l=Ns,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,j;return arguments.length?([x,j]=y,l=p(x,j),m):[l(0),l(1)]}}return m.range=f(eu),m.rangeRound=f(iw),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QP(){var e=Wo(Qm()(Ns));return e.copy=function(){return qo(e,QP())},ao.apply(e,arguments)}function ZP(){var e=cw(Qm()).domain([1,10]);return e.copy=function(){return qo(e,ZP()).base(e.base())},ao.apply(e,arguments)}function eO(){var e=uw(Qm());return e.copy=function(){return qo(e,eO()).constant(e.constant())},ao.apply(e,arguments)}function bw(){var e=dw(Qm());return e.copy=function(){return qo(e,bw()).exponent(e.exponent())},ao.apply(e,arguments)}function aq(){return bw.apply(null,arguments).exponent(.5)}function tO(){var e=[],t=Ns;function r(n){if(n!=null&&!isNaN(n=+n))return t((Dd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Mo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>V7(e,i/n))},r.copy=function(){return tO(t).domain(e)},ao.apply(r,arguments)}function Zm(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=Ns,f,p=!1,y;function x(b){return isNaN(b=+b)?y:(b=.5+((b=+f(b))-i)*(n*b<n*i?u:d),m(p?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(p=!!b,x):p},x.interpolator=function(b){return arguments.length?(m=b,x):m};function j(b){return function(S){var _,E,C;return arguments.length?([_,E,C]=S,m=v9(b,[_,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=j(eu),x.rangeRound=j(iw),x.unknown=function(b){return arguments.length?(y=b,x):y},function(b){return f=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function rO(){var e=Wo(Zm()(Ns));return e.copy=function(){return qo(e,rO())},ao.apply(e,arguments)}function nO(){var e=cw(Zm()).domain([.1,1,10]);return e.copy=function(){return qo(e,nO()).base(e.base())},ao.apply(e,arguments)}function sO(){var e=uw(Zm());return e.copy=function(){return qo(e,sO()).constant(e.constant())},ao.apply(e,arguments)}function jw(){var e=dw(Zm());return e.copy=function(){return qo(e,jw()).exponent(e.exponent())},ao.apply(e,arguments)}function oq(){return jw.apply(null,arguments).exponent(.5)}const Xu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rw,scaleDiverging:rO,scaleDivergingLog:nO,scaleDivergingPow:jw,scaleDivergingSqrt:oq,scaleDivergingSymlog:sO,scaleIdentity:$P,scaleImplicit:z0,scaleLinear:RP,scaleLog:FP,scaleOrdinal:tw,scalePoint:G7,scalePow:fw,scaleQuantile:UP,scaleQuantize:BP,scaleRadial:zP,scaleSequential:QP,scaleSequentialLog:ZP,scaleSequentialPow:bw,scaleSequentialQuantile:tO,scaleSequentialSqrt:aq,scaleSequentialSymlog:eO,scaleSqrt:U9,scaleSymlog:LP,scaleThreshold:WP,scaleTime:sq,scaleUtc:iq,tickFormat:DP},Symbol.toStringTag,{value:"Module"}));var Vo=e=>e.chartData,lq=we([Vo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Sw=(e,t,r,n)=>n?lq(e):Vo(e);function Ol(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(tn(t)&&tn(r))return!0}return!1}function W_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(tn(r))s=r;else if(typeof r=="function")return;if(tn(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(Ol(l))return l}}function cq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ol(n))return W_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(mt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&kN.test(s)){var d=kN.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(mt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&NN.test(i)){var f=NN.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(Ol(y))return t==null?y:W_(y,t,r)}}}var tu=1e9,uq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Nw,Ir=!0,Ai="[DecimalError] ",kl=Ai+"Invalid argument: ",kw=Ai+"Exponent out of range: ",ru=Math.floor,dl=Math.pow,dq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ii,qn=1e7,Sr=7,aO=9007199254740991,am=ru(aO/Sr),Ye={};Ye.absoluteValue=Ye.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ye.comparedTo=Ye.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ye.decimalPlaces=Ye.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Sr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ye.dividedBy=Ye.div=function(e){return Ha(this,new this.constructor(e))};Ye.dividedToIntegerBy=Ye.idiv=function(e){var t=this,r=t.constructor;return ur(Ha(t,new r(e),0,1),r.precision)};Ye.equals=Ye.eq=function(e){return!this.cmp(e)};Ye.exponent=function(){return yn(this)};Ye.greaterThan=Ye.gt=function(e){return this.cmp(e)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(e){return this.cmp(e)>=0};Ye.isInteger=Ye.isint=function(){return this.e>this.d.length-2};Ye.isNegative=Ye.isneg=function(){return this.s<0};Ye.isPositive=Ye.ispos=function(){return this.s>0};Ye.isZero=function(){return this.s===0};Ye.lessThan=Ye.lt=function(e){return this.cmp(e)<0};Ye.lessThanOrEqualTo=Ye.lte=function(e){return this.cmp(e)<1};Ye.logarithm=Ye.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ii))throw Error(Ai+"NaN");if(r.s<1)throw Error(Ai+(r.s?"NaN":"-Infinity"));return r.eq(ii)?new n(0):(Ir=!1,t=Ha(wd(r,i),wd(e,i),i),Ir=!0,ur(t,s))};Ye.minus=Ye.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cO(t,e):oO(t,(e.s=-e.s,e))};Ye.modulo=Ye.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ai+"NaN");return r.s?(Ir=!1,t=Ha(r,e,0,1).times(e),Ir=!0,r.minus(t)):ur(new n(r),s)};Ye.naturalExponential=Ye.exp=function(){return lO(this)};Ye.naturalLogarithm=Ye.ln=function(){return wd(this)};Ye.negated=Ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ye.plus=Ye.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oO(t,e):cO(t,(e.s=-e.s,e))};Ye.precision=Ye.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(kl+e);if(t=yn(s)+1,n=s.d.length-1,r=n*Sr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ye.squareRoot=Ye.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Ai+"NaN")}for(e=yn(u),Ir=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=ma(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=ru((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(Ha(u,i,l+2)).times(.5),ma(i.d).slice(0,l)===(t=ma(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(ur(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Ir=!0,ur(n,r)};Ye.times=Ye.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%qn|0,t=u/qn|0;i[s]=(i[s]+t)%qn|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ir?ur(e,p.precision):e};Ye.toDecimalPlaces=Ye.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xa(e,0,tu),t===void 0?t=n.rounding:xa(t,0,8),ur(r,e+yn(r)+1,t))};Ye.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Tl(n,!0):(xa(e,0,tu),t===void 0?t=s.rounding:xa(t,0,8),n=ur(new s(n),e+1,t),r=Tl(n,!0,e+1)),r};Ye.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Tl(s):(xa(e,0,tu),t===void 0?t=i.rounding:xa(t,0,8),n=ur(new i(s),e+yn(s)+1,t),r=Tl(n.abs(),!1,e+yn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ye.toInteger=Ye.toint=function(){var e=this,t=e.constructor;return ur(new t(e),yn(e)+1,t.rounding)};Ye.toNumber=function(){return+this};Ye.toPower=Ye.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(ii);if(u=new d(u),!u.s){if(e.s<1)throw Error(Ai+"Infinity");return u}if(u.eq(ii))return u;if(n=d.precision,e.eq(ii))return ur(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=aO){for(s=new d(ii),t=Math.ceil(n/Sr+4),Ir=!1;r%2&&(s=s.times(u),V_(s.d,t)),r=ru(r/2),r!==0;)u=u.times(u),V_(u.d,t);return Ir=!0,e.s<0?new d(ii).div(s):ur(s,n)}}else if(i<0)throw Error(Ai+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Ir=!1,s=e.times(wd(u,n+m)),Ir=!0,s=lO(s),s.s=i,s};Ye.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=yn(s),n=Tl(s,r<=i.toExpNeg||r>=i.toExpPos)):(xa(e,1,tu),t===void 0?t=i.rounding:xa(t,0,8),s=ur(new i(s),e,t),r=yn(s),n=Tl(s,e<=r||r<=i.toExpNeg,e)),n};Ye.toSignificantDigits=Ye.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xa(e,1,tu),t===void 0?t=n.rounding:xa(t,0,8)),ur(new n(r),e,t)};Ye.toString=Ye.valueOf=Ye.val=Ye.toJSON=Ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=yn(e),r=e.constructor;return Tl(e,t<=r.toExpNeg||t>=r.toExpPos)};function oO(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ir?ur(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Sr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/qn|0,d[i]%=qn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Ir?ur(t,p):t}function xa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(kl+e)}function ma(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Sr-n.length,r&&(i+=Oo(r)),i+=n;l=e[t],n=l+"",r=Sr-n.length,r&&(i+=Oo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ha=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%qn|0,l=i/qn|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*qn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,j,b,S,_,E,C,T,I,P,z,J,H=n.constructor,pe=n.s==s.s?1:-1,Z=n.d,K=s.d;if(!n.s)return new H(n);if(!s.s)throw Error(Ai+"Division by zero");for(d=n.e-s.e,z=K.length,I=Z.length,x=new H(pe),j=x.d=[],m=0;K[m]==(Z[m]||0);)++m;if(K[m]>(Z[m]||0)&&--d,i==null?E=i=H.precision:l?E=i+(yn(n)-yn(s))+1:E=i,E<0)return new H(0);if(E=E/Sr+2|0,m=0,z==1)for(f=0,K=K[0],E++;(m<I||f)&&E--;m++)C=f*qn+(Z[m]||0),j[m]=C/K|0,f=C%K|0;else{for(f=qn/(K[0]+1)|0,f>1&&(K=e(K,f),Z=e(Z,f),z=K.length,I=Z.length),T=z,b=Z.slice(0,z),S=b.length;S<z;)b[S++]=0;J=K.slice(),J.unshift(0),P=K[0],K[1]>=qn/2&&++P;do f=0,u=t(K,b,z,S),u<0?(_=b[0],z!=S&&(_=_*qn+(b[1]||0)),f=_/P|0,f>1?(f>=qn&&(f=qn-1),p=e(K,f),y=p.length,S=b.length,u=t(p,b,y,S),u==1&&(f--,r(p,z<y?J:K,y))):(f==0&&(u=f=1),p=K.slice()),y=p.length,y<S&&p.unshift(0),r(b,p,S),u==-1&&(S=b.length,u=t(K,b,z,S),u<1&&(f++,r(b,z<S?J:K,S))),S=b.length):u===0&&(f++,b=[0]),j[m++]=f,u&&b[0]?b[S++]=Z[T]||0:(b=[Z[T]],S=1);while((T++<I||b[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=d,ur(x,l?i+yn(x)+1:i)}})();function lO(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(yn(e)>16)throw Error(kw+yn(e));if(!e.s)return new f(ii);for(Ir=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(dl(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(ii),f.precision=u;;){if(s=ur(s.times(e),u),r=r.times(++d),l=i.plus(Ha(s,r,u)),ma(l.d).slice(0,u)===ma(i.d).slice(0,u)){for(;m--;)i=ur(i.times(i),u);return f.precision=p,t==null?(Ir=!0,ur(i,p)):i}i=l}}function yn(e){for(var t=e.e*Sr,r=e.d[0];r>=10;r/=10)t++;return t}function bv(e,t,r){if(t>e.LN10.sd())throw Ir=!0,r&&(e.precision=r),Error(Ai+"LN10 precision limit exceeded");return ur(new e(e.LN10),t)}function Oo(e){for(var t="";e--;)t+="0";return t}function wd(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,j=x.d,b=x.constructor,S=b.precision;if(x.s<1)throw Error(Ai+(x.s?"NaN":"-Infinity"));if(x.eq(ii))return new b(0);if(t==null?(Ir=!1,m=S):m=t,x.eq(10))return t==null&&(Ir=!0),bv(b,m);if(m+=y,b.precision=m,r=ma(j),n=r.charAt(0),i=yn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ma(x.d),n=r.charAt(0),p++;i=yn(x),n>1?(x=new b("0."+r),i++):x=new b(n+"."+r.slice(1))}else return d=bv(b,m+2,S).times(i+""),x=wd(new b(n+"."+r.slice(1)),m-y).plus(d),b.precision=S,t==null?(Ir=!0,ur(x,S)):x;for(u=l=x=Ha(x.minus(ii),x.plus(ii),m),f=ur(x.times(x),m),s=3;;){if(l=ur(l.times(f),m),d=u.plus(Ha(l,new b(s),m)),ma(d.d).slice(0,m)===ma(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(bv(b,m+2,S).times(i+""))),u=Ha(u,new b(p),m),b.precision=S,t==null?(Ir=!0,ur(u,S)):u;u=d,s+=2}}function q_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=ru(r/Sr),e.d=[],n=(r+1)%Sr,r<0&&(n+=Sr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Sr;n<s;)e.d.push(+t.slice(n,n+=Sr));t=t.slice(n),n=Sr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ir&&(e.e>am||e.e<-am))throw Error(kw+r)}else e.s=0,e.e=0,e.d=[0];return e}function ur(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Sr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Sr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Sr,s=n-Sr+l}if(r!==void 0&&(i=dl(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/dl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=yn(e),p.length=1,t=t-i-1,p[0]=dl(10,(Sr-t%Sr)%Sr),e.e=ru(-t/Sr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=dl(10,Sr-n),p[f]=s>0?(m/dl(10,l-s)%dl(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==qn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=qn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Ir&&(e.e>am||e.e<-am))throw Error(kw+yn(e));return e}function cO(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ir?ur(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Sr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=qn-1;--d[i],d[s]+=qn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Ir?ur(t,x):t):new y(0)}function Tl(e,t,r){var n,s=yn(e),i=ma(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Oo(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Oo(-s-1)+i,r&&(n=r-l)>0&&(i+=Oo(n))):s>=l?(i+=Oo(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Oo(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Oo(n))),e.s<0?"-"+i:i}function V_(e,t){if(e.length>t)return e.length=t,!0}function uO(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(kl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return q_(l,i.toString())}else if(typeof i!="string")throw Error(kl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,dq.test(i))q_(l,i);else throw Error(kl+i)}if(s.prototype=Ye,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=uO,s.config=s.set=fq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function fq(e){if(!e||typeof e!="object")throw Error(Ai+"Object expected");var t,r,n,s=["precision",1,tu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(ru(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(kl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(kl+r+": "+n);return this}var Nw=uO(uq);ii=new Nw(1);const tr=Nw;var hq=e=>e,dO={},fO=e=>e===dO,H_=e=>function t(){return arguments.length===0||arguments.length===1&&fO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},hO=(e,t)=>e===1?t:H_(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==dO).length;return i>=e?t(...n):hO(e-i,H_(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>fO(f)?u.shift():f);return t(...m,...u)}))}),ep=e=>hO(e.length,e),q0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mq=ep((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),pq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hq;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},V0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),mO=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function pO(e){var t;return e===0?t=1:t=Math.floor(new tr(e).abs().log(10).toNumber())+1,t}function gO(e,t,r){for(var n=new tr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}ep((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});ep((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ep((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var yO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},vO=(e,t,r)=>{if(e.lte(0))return new tr(0);var n=pO(e.toNumber()),s=new tr(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new tr(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new tr(d.toNumber()):new tr(Math.ceil(d.toNumber()))},gq=(e,t,r)=>{var n=new tr(1),s=new tr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new tr(10).pow(pO(e)-1),s=new tr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new tr(Math.floor(e)))}else e===0?s=new tr(Math.floor((t-1)/2)):r||(s=new tr(Math.floor(e)));var l=Math.floor((t-1)/2),u=pq(mq(d=>s.add(new tr(d-l).mul(n)).toNumber()),q0);return u(0,t)},xO=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new tr(0),tickMin:new tr(0),tickMax:new tr(0)};var l=vO(new tr(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new tr(0):(u=new tr(t).add(r).div(2),u=u.sub(new tr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new tr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?xO(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new tr(d).mul(l)),tickMax:u.add(new tr(m).mul(l))})};function yq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=yO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...q0(0,n-1).map(()=>1/0)]:[...q0(0,n-1).map(()=>-1/0),u];return t>r?V0(d):d}if(l===u)return gq(l,n,s);var{step:m,tickMin:f,tickMax:p}=xO(l,u,i,s,0),y=gO(f,p.add(new tr(.1).mul(m)),m);return t>r?V0(y):y}function vq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=yO([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=vO(new tr(l).sub(i).div(u-1),s,0),m=[...gO(new tr(i),new tr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?V0(m):m}var xq=mO(yq),wq=mO(vq),wO=e=>e.rootProps.maxBarSize,bq=e=>e.rootProps.barGap,bO=e=>e.rootProps.barCategoryGap,jq=e=>e.rootProps.barSize,tp=e=>e.rootProps.stackOffset,_w=e=>e.options.chartName,Cw=e=>e.rootProps.syncId,jO=e=>e.rootProps.syncMethod,Ew=e=>e.options.eventEmitter,Us={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},La={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ri={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},rp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Sq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:La.reversed,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:La.type,unit:void 0},kq={allowDataOverflow:ri.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ri.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ri.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ri.scale,tick:ri.tick,tickCount:ri.tickCount,ticks:void 0,type:ri.type,unit:void 0},Nq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:La.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_q={allowDataOverflow:ri.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ri.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ri.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ri.scale,tick:ri.tick,tickCount:ri.tickCount,ticks:void 0,type:"category",unit:void 0},Aw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Nq:Sq,Pw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_q:kq,np=e=>e.polarOptions,Ow=we([so,io,Gn],x7),SO=we([np,Ow],(e,t)=>{if(e!=null)return Zi(e.innerRadius,t,0)}),kO=we([np,Ow],(e,t)=>{if(e!=null)return Zi(e.outerRadius,t,t*.8)}),Cq=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},NO=we([np],Cq);we([Aw,NO],rp);var _O=we([Ow,SO,kO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});we([Pw,_O],rp);var CO=we([rr,np,SO,kO,so,io],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:Zi(l,s,s/2),cy:Zi(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),In=(e,t)=>t,sp=(e,t,r)=>r;function Tw(e){return e==null?void 0:e.id}function EO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Tw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(_s(p,i,null)),j=_s(p,u.dataKey,0),b;l.has(x)?b=l.get(x):b={},Object.assign(b,{[f]:j}),l.set(x,b)})}}),Array.from(l.values())}function ip(e){return e.stackId!=null&&e.dataKey!=null}var ap=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function op(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Eq(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Dn=e=>{var t=rr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},nu=e=>e.tooltip.settings.axisId;function K_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K_(Object(r),!0).forEach(function(n){Aq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aq(e,t,r){return(t=Pq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pq(e){var t=Oq(e,"string");return typeof t=="symbol"?t:t+""}function Oq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H0=[0,"auto"],Zs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},AO=(e,t)=>e.cartesianAxis.xAxis[t],oo=(e,t)=>{var r=AO(e,t);return r??Zs},ei={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:H0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Id},PO=(e,t)=>e.cartesianAxis.yAxis[t],lo=(e,t)=>{var r=PO(e,t);return r??ei},Tq={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Iw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Tq},Cs=(e,t,r)=>{switch(t){case"xAxis":return oo(e,r);case"yAxis":return lo(e,r);case"zAxis":return Iw(e,r);case"angleAxis":return Aw(e,r);case"radiusAxis":return Pw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Iq=(e,t,r)=>{switch(t){case"xAxis":return oo(e,r);case"yAxis":return lo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Fd=(e,t,r)=>{switch(t){case"xAxis":return oo(e,r);case"yAxis":return lo(e,r);case"angleAxis":return Aw(e,r);case"radiusAxis":return Pw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},OO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function TO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Dw=e=>e.graphicalItems.cartesianItems,Dq=we([In,sp],TO),IO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Ld=we([Dw,Cs,Dq],IO,{memoizeOptions:{resultEqualityCheck:op}}),DO=we([Ld],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(ip)),RO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Rq=we([Ld],RO),$O=e=>e.map(t=>t.data).filter(Boolean).flat(1),$q=we([Ld],$O,{memoizeOptions:{resultEqualityCheck:op}}),MO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Rw=we([$q,Sw],MO),FO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:_s(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:_s(s,n)}))):e.map(n=>({value:n})),lp=we([Rw,Cs,Ld],FO);function LO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function gh(e){if(va(e)||e instanceof Date){var t=Number(e);if(tn(t))return t}}function G_(e){if(Array.isArray(e)){var t=[gh(e[0]),gh(e[1])];return Ol(t)?t:void 0}var r=gh(e);if(r!=null)return[r,r]}function to(e){return e.map(gh).filter(nz)}function Mq(e,t,r){return!r||typeof t!="number"||ya(t)?[]:r.length?to(r.flatMap(n=>{var s=_s(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!tn(i)||!tn(l)))return[t-i,t+l]})):[]}var Rn=e=>{var t=Dn(e),r=nu(e);return Fd(e,t,r)},zO=we([Rn],e=>e==null?void 0:e.dataKey),Fq=we([DO,Sw,Rn],EO),UO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(Tw);return[l,{stackedData:xU(e,d,r),graphicalItems:u}]}))},K0=we([Fq,DO,tp],UO),BO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=kU(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Lq=we([Cs],e=>e.allowDataOverflow),$w=e=>{var t;if(e==null||!("domain"in e))return H0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=to(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:H0},WO=we([Cs],$w),qO=we([WO,Lq],iO),zq=we([K0,Vo,In,qO],BO,{memoizeOptions:{resultEqualityCheck:ap}}),Mw=e=>e.errorBars,Uq=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>LO(r,n)),lm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},VO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>LO(s,_)),y=_s(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=Mq(u,y,p);if(x.length>=2){var j=Math.min(...x),b=Math.max(...x);(i==null||j<i)&&(i=j),(l==null||b>l)&&(l=b)}var S=G_(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=G_(_s(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),tn(i)&&tn(l))return[i,l]},Bq=we([Rw,Cs,Rq,Mw,In],VO,{memoizeOptions:{resultEqualityCheck:ap}});function Wq(e){var{value:t}=e;if(va(t)||t instanceof Date)return t}var qq=(e,t,r)=>{var n=e.map(Wq).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&yA(n))?kP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},HO=e=>e.referenceElements.dots,su=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Vq=we([HO,In,sp],su),KO=e=>e.referenceElements.areas,Hq=we([KO,In,sp],su),GO=e=>e.referenceElements.lines,Kq=we([GO,In,sp],su),YO=(e,t)=>{var r=to(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gq=we(Vq,In,YO),JO=(e,t)=>{var r=to(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Yq=we([Hq,In],JO);function Jq(e){var t;if(e.x!=null)return to([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:to(r)}function Xq(e){var t;if(e.y!=null)return to([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:to(r)}var XO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Jq(n):Xq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Qq=we([Kq,In],XO),Zq=we(Gq,Qq,Yq,(e,t,r)=>lm(e,r,t)),QO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?lm(n,i,s):lm(i,s);return cq(t,m,e.allowDataOverflow)},eV=we([Cs,WO,qO,zq,Bq,Zq,rr,In],QO,{memoizeOptions:{resultEqualityCheck:ap}}),tV=[0,1],ZO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Ml(t,i);if(m&&u==null){var f;return kP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?qq(n,e,m):s==="expand"?tV:l}},Fw=we([Cs,rr,Rw,lp,tp,In,eV],ZO),e4=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Pd(i));return u in Xu?u:"point"}}},zd=we([Cs,rr,OO,_w,In],e4);function rV(e){if(e!=null){if(e in Xu)return Xu[e]();var t="scale".concat(Pd(e));if(t in Xu)return Xu[t]()}}function Lw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=rV(t);if(s!=null){var i=s.domain(r).range(n);return mU(i),i}}}var t4=(e,t,r)=>{var n=$w(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ol(e))return xq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ol(e))return wq(e,t.tickCount,t.allowDecimals)}},zw=we([Fw,Fd,zd],t4),r4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ol(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},nV=we([Cs,Fw,zw,In],r4),sV=we(lp,Cs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(to(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),n4=we(sV,rr,bO,Gn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!tn(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=Zi(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),iV=(e,t)=>{var r=oo(e,t);return r==null||typeof r.padding!="string"?0:n4(e,"xAxis",t,r.padding)},aV=(e,t)=>{var r=lo(e,t);return r==null||typeof r.padding!="string"?0:n4(e,"yAxis",t,r.padding)},oV=we(oo,iV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),lV=we(lo,aV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),cV=we([Gn,oV,qm,Wm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),uV=we([Gn,rr,lV,qm,Wm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ud=(e,t,r,n)=>{var s;switch(t){case"xAxis":return cV(e,r,n);case"yAxis":return uV(e,r,n);case"zAxis":return(s=Iw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return NO(e);case"radiusAxis":return _O(e,r);default:return}},s4=we([Cs,Ud],rp),iu=we([Cs,zd,nV,s4],Lw);we([Ld,Mw,In],Uq);function i4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var cp=(e,t)=>t,up=(e,t,r)=>r,dV=we(Um,cp,up,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(i4)),fV=we(Bm,cp,up,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(i4)),a4=(e,t)=>({width:e.width,height:t.height}),hV=(e,t)=>{var r=typeof t.width=="number"?t.width:Id;return{width:r,height:e.height}},o4=we(Gn,oo,a4),mV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},pV=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},gV=we(io,Gn,dV,cp,up,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=a4(t,u);l==null&&(l=mV(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),yV=we(so,Gn,fV,cp,up,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=hV(t,u);l==null&&(l=pV(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),vV=(e,t)=>{var r=oo(e,t);if(r!=null)return gV(e,r.orientation,r.mirror)},xV=we([Gn,oo,vV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),wV=(e,t)=>{var r=lo(e,t);if(r!=null)return yV(e,r.orientation,r.mirror)},bV=we([Gn,lo,wV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),l4=we(Gn,lo,(e,t)=>{var r=typeof t.width=="number"?t.width:Id;return{width:r,height:e.height}}),Y_=(e,t,r)=>{switch(t){case"xAxis":return o4(e,r).width;case"yAxis":return l4(e,r).height;default:return}},c4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Ml(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&yA(d))return d}},Uw=we([rr,lp,Cs,In],c4),u4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Ml(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},Bw=we([rr,lp,Fd,In],u4);we([rr,Iq,zd,iu,Uw,Bw,Ud,zw,In],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Ml(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var jV=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Ml(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=f==="category"&&n.bandwidth?n.bandwidth()/x:0;j=d==="angleAxis"&&i!=null&&i.length>=2?ai(i[0]-i[1])*2*j:j;var b=p||s;if(b){var S=b.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+j,value:_,offset:j}});return S.filter(_=>tn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+j,value:_,index:E,offset:j})).filter(_=>tn(_.coordinate)):n.ticks?n.ticks(y).map(_=>({coordinate:n(_)+j,value:_,offset:j})):n.domain().map((_,E)=>({coordinate:n(_)+j,value:l?l[_]:_,index:E,offset:j}))}},d4=we([rr,Fd,zd,iu,zw,Ud,Uw,Bw,In],jV),SV=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Ml(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?ai(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Uc=we([rr,Fd,iu,Ud,Uw,Bw,In],SV),Bc=we(Cs,iu,(e,t)=>{if(!(e==null||t==null))return om(om({},e),{},{scale:t})}),kV=we([Cs,zd,Fw,s4],Lw);we((e,t,r)=>Iw(e,r),kV,(e,t)=>{if(!(e==null||t==null))return om(om({},e),{},{scale:t})});var NV=we([rr,Um,Bm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),f4=e=>e.options.defaultTooltipEventType,h4=e=>e.options.validateTooltipEventTypes;function m4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Ww(e,t){var r=f4(e),n=h4(e);return m4(t,r,n)}function _V(e){return ot(t=>Ww(t,e))}var p4=(e,t)=>{var r,n=Number(t);if(!(ya(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},CV=e=>e.tooltip.settings,Ro={active:!1,index:null,dataKey:void 0,coordinate:void 0},EV={itemInteraction:{click:Ro,hover:Ro},axisInteraction:{click:Ro,hover:Ro},keyboardInteraction:Ro,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},g4=Ws({name:"tooltip",initialState:EV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Pn()},removeTooltipEntrySettings:{reducer(e,t){var r=Va(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Pn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:AV,removeTooltipEntrySettings:PV,setTooltipSettingsState:OV,setActiveMouseOverItemIndex:y4,mouseLeaveItem:TV,mouseLeaveChart:v4,setActiveClickItemIndex:IV,setMouseOverAxisIndex:x4,setMouseClickAxisIndex:DV,setSyncInteraction:G0,setKeyboardInteraction:Y0}=g4.actions,RV=g4.reducer;function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(r),!0).forEach(function(n){$V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $V(e,t,r){return(t=MV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MV(e){var t=FV(e,"string");return typeof t=="symbol"?t:t+""}function FV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LV(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function zV(e){return e.index!=null}var w4=(e,t,r,n)=>{if(t==null)return Ro;var s=LV(e,t,r);if(s==null)return Ro;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(zV(s)){if(i)return ih(ih({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return ih(ih({},Ro),{},{coordinate:s.coordinate})},qw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!tn(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},b4=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},j4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},Bd=e=>e.options.tooltipPayloadSearcher,au=e=>e.tooltip;function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(r),!0).forEach(function(n){UV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t,r){return(t=BV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qV(e,t){return e??t}var S4=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var j,{dataDefinedOnItem:b,settings:S}=x,_=qV(b,u),E=Array.isArray(_)?aP(_,m,f):_,C=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:n,T=S==null?void 0:S.nameKey,I;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?I=rz(E,n,s):I=i(E,t,d,T),Array.isArray(I))I.forEach(z=>{var J=Q_(Q_({},S),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});y.push(_N({tooltipEntrySettings:J,dataKey:z.dataKey,payload:z.payload,value:_s(z.payload,z.dataKey),name:z.name}))});else{var P;y.push(_N({tooltipEntrySettings:S,dataKey:C,payload:I,value:_s(I,C),name:(P=_s(I,T))!==null&&P!==void 0?P:S==null?void 0:S.name}))}return y},p)}},Vw=we([Rn,rr,OO,_w,Dn],e4),VV=we([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),HV=we([Dn,nu],TO),Wd=we([VV,Rn,HV],IO,{memoizeOptions:{resultEqualityCheck:op}}),KV=we([Wd],e=>e.filter(ip)),GV=we([Wd],$O,{memoizeOptions:{resultEqualityCheck:op}}),ou=we([GV,Vo],MO),YV=we([KV,Vo,Rn],EO),Hw=we([ou,Rn,Wd],FO),k4=we([Rn],$w),JV=we([Rn],e=>e.allowDataOverflow),N4=we([k4,JV],iO),XV=we([Wd],e=>e.filter(ip)),QV=we([YV,XV,tp],UO),ZV=we([QV,Vo,Dn,N4],BO),eH=we([Wd],RO),tH=we([ou,Rn,eH,Mw,Dn],VO,{memoizeOptions:{resultEqualityCheck:ap}}),rH=we([HO,Dn,nu],su),nH=we([rH,Dn],YO),sH=we([KO,Dn,nu],su),iH=we([sH,Dn],JO),aH=we([GO,Dn,nu],su),oH=we([aH,Dn],XO),lH=we([nH,oH,iH],lm),cH=we([Rn,k4,N4,ZV,tH,lH,rr,Dn],QO),_4=we([Rn,rr,ou,Hw,tp,Dn,cH],ZO),uH=we([_4,Rn,Vw],t4),dH=we([Rn,_4,uH,Dn],r4),C4=e=>{var t=Dn(e),r=nu(e),n=!1;return Ud(e,t,r,n)},E4=we([Rn,C4],rp),A4=we([Rn,Vw,dH,E4],Lw),fH=we([rr,Hw,Rn,Dn],c4),hH=we([rr,Hw,Rn,Dn],u4),mH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Ml(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?ai(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},co=we([rr,Rn,Vw,A4,C4,fH,hH,Dn],mH),Kw=we([f4,h4,CV],(e,t,r)=>m4(r.shared,e,t)),P4=e=>e.tooltip.settings.trigger,Gw=e=>e.tooltip.settings.defaultIndex,dp=we([au,Kw,P4,Gw],w4),Wc=we([dp,ou],qw),O4=we([co,Wc],p4),T4=we([dp],e=>{if(e)return e.dataKey}),I4=we([au,Kw,P4,Gw],j4),pH=we([so,io,rr,Gn,co,Gw,I4,Bd],b4),gH=we([dp,pH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),yH=we([dp],e=>e.active),vH=we([I4,Wc,Vo,zO,O4,Bd,Kw],S4);we([vH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(n){xH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xH(e,t,r){return(t=wH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jH=()=>ot(Rn),SH=()=>{var e=jH(),t=ot(co),r=ot(A4);return Vh(!e||!r?void 0:e2(e2({},e),{},{scale:r}),t)};function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){kH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kH(e,t,r){return(t=NH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},EH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return bc(bc(bc({},n),as(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return bc(bc(bc({},n),as(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function AH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var D4=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(ai(f-m)!==ai(p-f)){var x=[];if(ai(p-f)===ai(s[1]-s[0])){y=p;var j=f+s[1]-s[0];x[0]=Math.min(j,(j+m)/2),x[1]=Math.max(j,(j+m)/2)}else{y=m;var b=p+s[1]-s[0];x[0]=Math.min(f,(b+f)/2),x[1]=Math.max(f,(b+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},PH=()=>ot(_w),Yw=(e,t)=>t,R4=(e,t,r)=>r,Jw=(e,t,r,n)=>n,OH=we(co,e=>Rm(e,t=>t.coordinate)),Xw=we([au,Yw,R4,Jw],w4),$4=we([Xw,ou],qw),TH=(e,t,r)=>{if(t!=null){var n=au(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},M4=we([au,Yw,R4,Jw],j4),cm=we([so,io,rr,Gn,co,Jw,M4,Bd],b4),IH=we([Xw,cm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),F4=we([co,$4],p4),DH=we([M4,$4,Vo,zO,F4,Bd,Yw],S4),RH=we([Xw],e=>({isActive:e.active,activeIndex:e.index})),$H=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&AH(e,l)){var u=NU(e,t),d=D4(u,i,s,r,n),m=CH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},MH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=k7(e,r);if(u){var d=_U(u,t),m=D4(d,l,i,n,s),f=EH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},FH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?$H(e,t,n,s,i,l,u):MH(e,t,r,n,s,i,l)},LH=we(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),zH=we(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Us)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:Eq}});function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function n2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){UH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UH(e,t,r){return(t=BH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qH={},VH={zIndexMap:Object.values(Us).reduce((e,t)=>n2(n2({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),qH)},HH=new Set(Object.values(Us));function KH(e){return HH.has(e)}var L4=Ws({name:"zIndex",initialState:VH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Pn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!KH(r)&&delete e.zIndexMap[r])},prepare:Pn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Pn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Pn()}}}),{registerZIndexPortal:GH,unregisterZIndexPortal:YH,registerZIndexPortalId:JH,unregisterZIndexPortalId:XH}=L4.actions,QH=L4.reducer;function Ho(e){var{zIndex:t,children:r}=e,n=lB(),s=n&&t!==void 0&&t!==0,i=di(),l=rn();v.useLayoutEffect(()=>s?(l(GH({zIndex:t})),()=>{l(YH({zIndex:t}))}):Qc,[l,t,s]);var u=ot(m=>LH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?TC.createPortal(r,d):null}function J0(){return J0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J0.apply(null,arguments)}function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(n){ZH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZH(e,t,r){return(t=eK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eK(e){var t=tK(e,"string");return typeof t=="symbol"?t:t+""}function tK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function nK(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var j,b,S;if(f==="ScatterChart")j=p,b=LB,S=Us.cursorLine;else if(f==="BarChart")j=zB(u,p,i,l),b=wP,S=Us.cursorRectangle;else if(u==="radial"&&wA(p)){var{cx:_,cy:E,radius:C,startAngle:T,endAngle:I}=bP(p);j={cx:_,cy:E,startAngle:T,endAngle:I,innerRadius:C,outerRadius:C},b=SP,S=Us.cursorLine}else j={points:E7(u,p,i)},b=pP,S=Us.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,z=ah(ah(ah(ah({stroke:"#ccc",pointerEvents:"none"},i),j),Rx(d)),{},{payload:y,payloadIndex:x,className:Nr("recharts-tooltip-cursor",P)});return v.createElement(Ho,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(rK,{cursor:d,cursorComp:b,cursorProps:z}))}function sK(e){var t=SH(),r=iB(),n=Hm(),s=PH();return t==null||r==null||n==null||s==null?null:v.createElement(nK,J0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var z4=v.createContext(null),iK=()=>v.useContext(z4),jv={exports:{}},i2;function aK(){return i2||(i2=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),j=r?r+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,j=new Array(x);y<x;y++)j[y]=p[y].fn;return j},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,j){var b=r?r+m:m;if(!this._events[b])return!1;var S=this._events[b],_=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,j),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var T=S.length,I;for(C=0;C<T;C++)switch(S[C].once&&this.removeListener(m,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,y);break;default:if(!E)for(I=1,E=new Array(_-1);I<_;I++)E[I-1]=arguments[I];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===f&&(!y||j.once)&&(!p||j.context===p)&&l(this,x);else{for(var b=0,S=[],_=j.length;b<_;b++)(j[b].fn!==f||y&&!j[b].once||p&&j[b].context!==p)&&S.push(j[b]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(jv)),jv.exports}var oK=aK();const lK=ea(oK);var bd=new lK,X0="recharts.syncEvent.tooltip",a2="recharts.syncEvent.brush";function cK(e,t){if(t){var r=Number.parseInt(t,10);if(!ya(r))return e==null?void 0:e[r]}}var uK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},U4=Ws({name:"options",initialState:uK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dK=U4.reducer,{createEventEmitter:fK}=U4.actions;function hK(e){return e.tooltip.syncInteraction}var mK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},B4=Ws({name:"chartData",initialState:mK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:o2,setDataStartEndIndexes:pK,setComputedData:gee}=B4.actions,gK=B4.reducer,yK=["x","y"];function l2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=wK(e,"string");return typeof t=="symbol"?t:t+""}function wK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bK(e,t){if(e==null)return{};var r,n,s=jK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SK(){var e=ot(Cw),t=ot(Ew),r=rn(),n=ot(jO),s=ot(co),i=Hm(),l=Vm(),u=ot(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return Qc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:j,y:b}=x,S=bK(x,yK),{x:_,y:E,width:C,height:T}=f.payload.sourceViewBox,I=jc(jc({},S),{},{x:l.x+(C?(j-_)/C:0)*l.width,y:l.y+(T?(b-E)/T:0)*l.height});r(jc(jc({},f),{},{payload:jc(jc({},f.payload),{},{coordinate:I})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var z={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},J=n(s,z);P=s[J]}else n==="value"&&(P=s.find(W=>String(W.value)===f.payload.label));var{coordinate:H}=f.payload;if(P==null||f.payload.active===!1||H==null||l==null){r(G0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:pe,y:Z}=H,K=Math.min(pe,l.x+l.width),ce=Math.min(Z,l.y+l.height),B={x:i==="horizontal"?P.coordinate:K,y:i==="horizontal"?ce:P.coordinate},se=G0({active:f.payload.active,coordinate:B,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(se)}}};return bd.on(X0,d),()=>{bd.off(X0,d)}},[u,r,t,e,n,s,i,l])}function kK(){var e=ot(Cw),t=ot(Ew),r=rn();v.useEffect(()=>{if(e==null)return Qc;var n=(s,i,l)=>{t!==l&&e===s&&r(pK(i))};return bd.on(a2,n),()=>{bd.off(a2,n)}},[r,t,e])}function NK(){var e=rn();v.useEffect(()=>{e(fK())},[e]),SK(),kK()}function _K(e,t,r,n,s,i){var l=ot(x=>TH(x,e,t)),u=ot(Ew),d=ot(Cw),m=ot(jO),f=ot(hK),p=f==null?void 0:f.active,y=Vm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=G0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});bd.emit(X0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function u2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){CK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CK(e,t,r){return(t=EK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PK(e){return e.dataKey}function OK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(yB,t)}var d2=[],TK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Zc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function IK(e){var t,r,n=Oi(e,TK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:j,useTranslate3d:b,wrapperStyle:S,cursor:_,shared:E,trigger:C,defaultIndex:T,portal:I,axisId:P}=n,z=rn(),J=typeof T=="number"?String(T):T;v.useEffect(()=>{z(OV({shared:E,trigger:C,axisId:P,active:s,defaultIndex:J}))},[z,E,C,P,s,J]);var H=Vm(),pe=mP(),Z=_V(E),{activeIndex:K,isActive:ce}=(t=ot(fe=>RH(fe,Z,C,J)))!==null&&t!==void 0?t:{},B=ot(fe=>DH(fe,Z,C,J)),se=ot(fe=>F4(fe,Z,C,J)),W=ot(fe=>IH(fe,Z,C,J)),de=B,oe=iK(),X=(r=s??ce)!==null&&r!==void 0?r:!1,[ee,D]=h8([de,X]),q=Z==="axis"?se:void 0;_K(Z,C,W,q,K,X);var Te=I??oe;if(Te==null||H==null||Z==null)return null;var be=de??d2;X||(be=d2),m&&be.length&&(be=Lz(be.filter(fe=>fe.value!=null&&(fe.hide!==!0||n.includeHidden)),y,PK));var Ee=be.length>0,le=v.createElement(kB,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:X,coordinate:W,hasPayload:Ee,offset:p,position:x,reverseDirection:j,useTranslate3d:b,viewBox:H,wrapperStyle:S,lastBoundingBox:ee,innerRef:D,hasPortalFromProps:!!I},OK(d,u2(u2({},n),{},{payload:be,label:q,active:X,activeIndex:K,coordinate:W,accessibilityLayer:pe})));return v.createElement(v.Fragment,null,TC.createPortal(le,Te),X&&v.createElement(sK,{cursor:_,tooltipEventType:Z,coordinate:W,payload:be,index:K}))}var Qw=e=>null;Qw.displayName="Cell";function DK(e,t,r){return(t=RK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e){var t=$K(e,"string");return typeof t=="symbol"?t:t+""}function $K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MK{constructor(t){DK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){LK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LK(e,t,r){return(t=zK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BK={cacheSize:2e3,enableCache:!0},W4=FK({},BK),h2=new MK(W4.cacheSize),WK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},m2="recharts_measurement_span";function qK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var p2=(e,t)=>{try{var r=document.getElementById(m2);r||(r=document.createElement("span"),r.setAttribute("id",m2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,WK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},id=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Zc.isSsr)return{width:0,height:0};if(!W4.enableCache)return p2(t,r);var n=qK(t,r),s=h2.get(n);if(s)return s;var i=p2(t,r);return h2.set(n,i),i},g2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,y2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,q4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KK=Object.keys(q4),Ac="NaN";function GK(e,t){return e*q4[t]}class Ms{static parse(t){var r,[,n,s]=(r=HK.exec(t))!==null&&r!==void 0?r:[];return new Ms(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ya(t)&&(this.unit=""),r!==""&&!VK.test(r)&&(this.num=NaN,this.unit=""),KK.includes(r)&&(this.num=GK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ms(NaN,""):new Ms(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ms(NaN,""):new Ms(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ms(NaN,""):new Ms(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ms(NaN,""):new Ms(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ya(this.num)}}function V4(e){if(e.includes(Ac))return Ac;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=g2.exec(t))!==null&&r!==void 0?r:[],l=Ms.parse(n??""),u=Ms.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Ac;t=t.replace(g2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=y2.exec(t))!==null&&m!==void 0?m:[],x=Ms.parse(f??""),j=Ms.parse(y??""),b=p==="+"?x.add(j):x.subtract(j);if(b.isNaN())return Ac;t=t.replace(y2,b.toString())}return t}var v2=/\(([^()]*)\)/;function YK(e){for(var t=e,r;(r=v2.exec(t))!=null;){var[,n]=r;t=t.replace(v2,V4(n))}return t}function JK(e){var t=e.replace(/\s+/g,"");return t=YK(t),t=V4(t),t}function XK(e){try{return JK(e)}catch{return Ac}}function Sv(e){var t=XK(e.slice(5,-1));return t===Ac?"":t}var QK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZK=["dx","dy","angle","className","breakAll"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(null,arguments)}function x2(e,t){if(e==null)return{};var r,n,s=eG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var H4=/[ \f\n\r\t\v\u2028\u2029]+/,K4=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Kn(t)||(r?s=t.toString().split(""):s=t.toString().split(H4));var i=s.map(u=>({word:u,width:id(u,n).width})),l=r?0:id("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function tG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var G4=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),Y4=e=>e.reduce((t,r)=>t.width>r.width?t:r),rG="",w2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=K4({breakAll:r,style:n,children:d+rG});if(!m)return[!1,[]];var f=G4(m.wordsWithComputedWidth,i,l,u),p=f.length>s||Y4(f).width>Number(i);return[p,f]},nG=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=mt(i),f=String(l),p=G4(t,n,r,s);if(!m||s)return p;var y=p.length>i||Y4(p).width>Number(n);if(!y)return p;for(var x=0,j=f.length-1,b=0,S;x<=j&&b<=f.length-1;){var _=Math.floor((x+j)/2),E=_-1,[C,T]=w2(f,E,d,u,i,n,r,s),[I]=w2(f,_,d,u,i,n,r,s);if(!C&&!I&&(x=_+1),C&&I&&(j=_-1),!C&&I){S=T;break}b++}return S||p},b2=e=>{var t=Kn(e)?[]:e.toString().split(H4);return[{words:t,width:void 0}]},sG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!Zc.isSsr){var u,d,m=K4({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return b2(n);return nG({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return b2(n)},J4="#808080",iG={breakAll:!1,capHeight:"0.71em",fill:J4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Zw=v.forwardRef((e,t)=>{var r=Oi(e,iG),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=x2(r,QK),y=v.useMemo(()=>sG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:j,angle:b,className:S,breakAll:_}=p,E=x2(p,ZK);if(!va(n)||!va(s)||y.length===0)return null;var C=Number(n)+(mt(x)?x:0),T=Number(s)+(mt(j)?j:0);if(!tn(C)||!tn(T))return null;var I;switch(f){case"start":I=Sv("calc(".concat(l,")"));break;case"middle":I=Sv("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:I=Sv("calc(".concat(y.length-1," * -").concat(i,")"));break}var P=[];if(d){var z=y[0].width,{width:J}=p;P.push("scale(".concat(mt(J)&&mt(z)?J/z:1,")"))}return b&&P.push("rotate(".concat(b,", ").concat(C,", ").concat(T,")")),P.length&&(E.transform=P.join(" ")),v.createElement("text",Q0({},Ci(E),{ref:t,x:C,y:T,className:Nr("recharts-text",S),textAnchor:m,fill:u.includes("url")?J4:u}),y.map((H,pe)=>{var Z=H.words.join(_?"":" ");return v.createElement("tspan",{x:C,dy:pe===0?I:i,key:"".concat(Z,"-").concat(pe)},Z)}))});Zw.displayName="Text";var aG=["labelRef"];function oG(e,t){if(e==null)return{};var r,n,s=lG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){cG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cG(e,t,r){return(t=uG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=dG(e,"string");return typeof t=="symbol"?t:t+""}function dG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},za.apply(null,arguments)}var X4=v.createContext(null),fG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(X4.Provider,{value:d},u)},Q4=()=>{var e=v.useContext(X4),t=Vm();return e||fP(t)},hG=v.createContext(null),mG=()=>{var e=v.useContext(hG),t=ot(CO);return e||t},pG=e=>{var{value:t,formatter:r}=e,n=Kn(e.children)?t:e.children;return typeof r=="function"?r(n):n},eb=e=>e!=null&&typeof e=="function",gG=(e,t)=>{var r=ai(t-e),n=Math.min(Math.abs(t-e),360);return r*n},yG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,j=(m+f)/2,b=gG(p,y),S=b>=0?1:-1,_,E;switch(t){case"insideStart":_=p+S*i,E=x;break;case"insideEnd":_=y-S*i,E=!x;break;case"end":_=y+S*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=b<=0?E:!E;var C=as(u,d,j,_),T=as(u,d,j,_+(E?1:-1)*359),I="M".concat(C.x,",").concat(C.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(T.x,",").concat(T.y),P=Kn(e.id)?dd("recharts-radial-line-"):e.id;return v.createElement("text",za({},n,{dominantBaseline:"central",className:Nr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:P,d:I})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},vG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=as(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:j}=as(n,s,y,m);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Z0=e=>"cx"in e&&mt(e.cx),xG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!Z0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,j=(d+m)/2,b=p+d/2,S=f>=0?1:-1,_=S*n,E=S>0?"end":"start",C=S>0?"start":"end",T=d>=0?1:-1,I=T*n,P=T>0?"end":"start",z=T>0?"start":"end";if(s==="top"){var J={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return Qr(Qr({},J),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var H={x:y+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},H),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var pe={x:x-I,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Qr(Qr({},pe),i?{width:Math.max(pe.x-i.x,0),height:f}:{})}if(s==="right"){var Z={x:x+j+I,y:u+f/2,textAnchor:z,verticalAnchor:"middle"};return Qr(Qr({},Z),i?{width:Math.max(i.x+i.width-Z.x,0),height:f}:{})}var K=i?{width:j,height:f}:{};return s==="insideLeft"?Qr({x:x+I,y:u+f/2,textAnchor:z,verticalAnchor:"middle"},K):s==="insideRight"?Qr({x:x+j-I,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},K):s==="insideTop"?Qr({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},K):s==="insideBottom"?Qr({x:y+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},K):s==="insideTopLeft"?Qr({x:p+I,y:u+_,textAnchor:z,verticalAnchor:C},K):s==="insideTopRight"?Qr({x:p+d-I,y:u+_,textAnchor:P,verticalAnchor:C},K):s==="insideBottomLeft"?Qr({x:y+I,y:u+f-_,textAnchor:z,verticalAnchor:E},K):s==="insideBottomRight"?Qr({x:y+m-I,y:u+f-_,textAnchor:P,verticalAnchor:E},K):s&&typeof s=="object"&&(mt(s.x)||Ja(s.x))&&(mt(s.y)||Ja(s.y))?Qr({x:l+Zi(s.x,j),y:u+Zi(s.y,f),textAnchor:"end",verticalAnchor:"end"},K):Qr({x:b,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},K)},wG={offset:5,zIndex:Us.label};function To(e){var t=Oi(e,wG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=mG(),p=Q4(),y=n==="center"?p:f??p,x,j,b;if(r==null?x=y:Z0(r)?x=r:x=fP(r),!x||Kn(s)&&Kn(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=Qr(Qr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:_}=S,E=oG(S,aG);return v.cloneElement(l,E)}if(typeof l=="function"){if(j=v.createElement(l,S),v.isValidElement(j))return j}else j=pG(t);var C=Ci(t);if(Z0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return yG(t,n,j,C,x);b=vG(x,t.offset,t.position)}else b=xG(t,x);return v.createElement(Ho,{zIndex:t.zIndex},v.createElement(Zw,za({ref:m,className:Nr("recharts-label",u)},C,b,{textAnchor:tG(C.textAnchor)?C.textAnchor:b.textAnchor,breakAll:d}),j))}To.displayName="Label";var bG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(To,za({key:"label-implicit"},n)):va(e)?v.createElement(To,za({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===To?v.cloneElement(e,Qr({key:"label-implicit"},n)):v.createElement(To,za({key:"label-implicit",content:e},n)):eb(e)?v.createElement(To,za({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(To,za({},e,{key:"label-implicit"},n)):null};function jG(e){var{label:t,labelRef:r}=e,n=Q4();return bG(t,n,r)||null}var kv={},Nv={},S2;function SG(){return S2||(S2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Nv)),Nv}var _v={},k2;function kG(){return k2||(k2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(_v)),_v}var N2;function NG(){return N2||(N2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SG(),r=kG(),n=Wx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(kv)),kv}var Cv,_2;function _G(){return _2||(_2=1,Cv=NG().last),Cv}var CG=_G();const EG=ea(CG);var AG=["valueAccessor"],PG=["dataKey","clockWise","id","textBreakAll","zIndex"];function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function C2(e,t){if(e==null)return{};var r,n,s=OG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TG=e=>Array.isArray(e.value)?EG(e.value):e.value,Z4=v.createContext(void 0),IG=Z4.Provider,eT=v.createContext(void 0);eT.Provider;function DG(){return v.useContext(Z4)}function RG(){return v.useContext(eT)}function yh(e){var{valueAccessor:t=TG}=e,r=C2(e,AG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=C2(r,PG),m=DG(),f=RG(),p=m||f;return!p||!p.length?null:v.createElement(Ho,{zIndex:u??Us.label},v.createElement(Ya,{className:"recharts-label-list"},p.map((y,x)=>{var j,b=Kn(n)?t(y,x):_s(y&&y.payload,n),S=Kn(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(To,um({key:"label-".concat(x)},Ci(y),d,S,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:b,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}yh.displayName="LabelList";function $G(e){var{label:t}=e;return t?t===!0?v.createElement(yh,{key:"labelList-implicit"}):v.isValidElement(t)||eb(t)?v.createElement(yh,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(yh,um({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var MG={radiusAxis:{},angleAxis:{}},tT=Ws({name:"polarAxis",initialState:MG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:yee,removeRadiusAxis:vee,addAngleAxis:xee,removeAngleAxis:wee}=tT.actions,FG=tT.reducer,Ev={exports:{}},ar={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function LG(){if(E2)return ar;E2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case e:switch(b=b.type,b){case r:case s:case n:case d:case m:case y:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case p:case f:return b;case i:return b;default:return S}}case t:return S}}}return ar.ContextConsumer=i,ar.ContextProvider=l,ar.Element=e,ar.ForwardRef=u,ar.Fragment=r,ar.Lazy=p,ar.Memo=f,ar.Portal=t,ar.Profiler=s,ar.StrictMode=n,ar.Suspense=d,ar.SuspenseList=m,ar.isContextConsumer=function(b){return j(b)===i},ar.isContextProvider=function(b){return j(b)===l},ar.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},ar.isForwardRef=function(b){return j(b)===u},ar.isFragment=function(b){return j(b)===r},ar.isLazy=function(b){return j(b)===p},ar.isMemo=function(b){return j(b)===f},ar.isPortal=function(b){return j(b)===t},ar.isProfiler=function(b){return j(b)===s},ar.isStrictMode=function(b){return j(b)===n},ar.isSuspense=function(b){return j(b)===d},ar.isSuspenseList=function(b){return j(b)===m},ar.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===f||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},ar.typeOf=j,ar}var A2;function zG(){return A2||(A2=1,Ev.exports=LG()),Ev.exports}var UG=zG(),P2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",O2=null,Av=null,rT=e=>{if(e===O2&&Array.isArray(Av))return Av;var t=[];return v.Children.forEach(e,r=>{Kn(r)||(UG.isFragment(r)?t=t.concat(rT(r.props.children)):t.push(r))}),Av=t,O2=e,t};function BG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>P2(s)):n=[P2(t)],rT(e).forEach(s=>{var i=Mc(s,"type.displayName")||Mc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var Pv={},T2;function WG(){return T2||(T2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Pv)),Pv}var Ov,I2;function qG(){return I2||(I2=1,Ov=WG().isPlainObject),Ov}var VG=qG();const HG=ea(VG);function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(n){KG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KG(e,t,r){return(t=GG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(null,arguments)}var $2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},JG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XG=e=>{var t=Oi(e,JG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,j]=v.useState(-1),b=v.useRef(s),S=v.useRef(i),_=v.useRef(l),E=v.useRef(r),C=v.useRef(n),T=Zx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var B=y.current.getTotalLength();B&&j(B)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var I=Nr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",dm({},Ci(t),{className:I,d:$2(r,n,s,i,l)})));var P=b.current,z=S.current,J=_.current,H=E.current,pe=C.current,Z="0px ".concat(x===-1?1:x,"px"),K="".concat(x,"px 0px"),ce=gP(["strokeDasharray"],m,d);return v.createElement(Qx,{animationId:T,key:T,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},B=>{var se=ss(P,s,B),W=ss(z,i,B),de=ss(J,l,B),oe=ss(H,r,B),X=ss(pe,n,B);y.current&&(b.current=se,S.current=W,_.current=de,E.current=oe,C.current=X);var ee=B>0?{transition:ce,strokeDasharray:K}:{strokeDasharray:Z};return v.createElement("path",dm({},Ci(t),{className:I,d:$2(oe,X,se,W,de),ref:y,style:R2(R2({},ee),t.style)}))})},QG=["option","shapeType","propTransformer","activeClassName","isActive"];function ZG(e,t){if(e==null)return{};var r,n,s=eY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function M2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sY(e,t){return fm(fm({},t),e)}function iY(e,t){return e==="symbols"}function F2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(wP,r);case"trapezoid":return v.createElement(XG,r);case"sector":return v.createElement(SP,r);case"symbols":if(iY(t))return v.createElement(xA,r);break;case"curve":return v.createElement(pP,r);default:return null}}function aY(e){return v.isValidElement(e)?e.props:e}function oY(e){var{option:t,shapeType:r,propTransformer:n=sY,activeClassName:s="recharts-active-shape",isActive:i}=e,l=ZG(e,QG),u;if(v.isValidElement(t))u=v.cloneElement(t,fm(fm({},l),aY(t)));else if(typeof t=="function")u=t(l);else if(HG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(F2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(F2,{shapeType:r,elementProps:m})}return i?v.createElement(Ya,{className:s},u):u}var nT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(y4({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},sT=e=>{var t=rn();return(r,n)=>s=>{e==null||e(r,n,s),t(TV())}},iT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(IV({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function lY(e){var{fn:t,args:r}=e,n=rn(),s=di();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(AV(i)),()=>{n(PV(i))}}},[t,r,n,s]),null}function cY(e){var{legendPayload:t}=e,r=rn(),n=di();return v.useLayoutEffect(()=>n?Qc:(r(uB(t)),()=>{r(dB(t))}),[r,n,t]),null}var Tv,uY=()=>{var[e]=v.useState(()=>dd("uid-"));return e},dY=(Tv=dD.useId)!==null&&Tv!==void 0?Tv:uY;function aT(e,t){var r=dY();return t||(e?"".concat(e,"-").concat(r):r)}var fY=v.createContext(void 0),hY=e=>{var{id:t,type:r,children:n}=e,s=aT("recharts-".concat(r),t);return v.createElement(fY.Provider,{value:s},n(s))},mY={cartesianItems:[],polarItems:[]},oT=Ws({name:"graphicalItems",initialState:mY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Pn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Va(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Pn()},removeCartesianGraphicalItem:{reducer(e,t){var r=Va(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Pn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Pn()},removePolarGraphicalItem:{reducer(e,t){var r=Va(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Pn()}}}),{addCartesianGraphicalItem:pY,replaceCartesianGraphicalItem:gY,removeCartesianGraphicalItem:yY,addPolarGraphicalItem:bee,removePolarGraphicalItem:jee}=oT.actions,vY=oT.reducer;function xY(e){var t=rn(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(pY(e)):r.current!==e&&t(gY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(yY(r.current)),r.current=null)},[t]),null}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=bY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SY={xAxis:{},yAxis:{},zAxis:{}},lT=Ws({name:"cartesianAxis",initialState:SY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Pn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Pn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Pn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Pn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Pn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Pn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=z2(z2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:kY,removeXAxis:NY,addYAxis:_Y,removeYAxis:CY,addZAxis:See,removeZAxis:kee,updateYAxisWidth:EY}=lT.actions,AY=lT.reducer,PY=we([Gn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),OY=we([PY,so,io],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),cT=()=>ot(OY),TY="Invariant failed";function IY(e,t){throw new Error(TY)}var DY=["x","y"];function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}function U2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(r),!0).forEach(function(n){RY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RY(e,t,r){return(t=$Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e){var t=MY(e,"string");return typeof t=="symbol"?t:t+""}function MY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FY(e,t){if(e==null)return{};var r,n,s=LY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zY(e,t){var{x:r,y:n}=e,s=FY(e,DY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return qu(qu(qu(qu(qu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function hm(e){return v.createElement(oY,ex({shapeType:"rectangle",propTransformer:zY,activeClassName:"recharts-active-bar"},e))}var UY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(mt(t))return t;var i=mt(n)||Kn(n);return i?t(n,s):(i||IY(),r)}},BY={},uT=Ws({name:"errorBars",initialState:BY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Nee,replaceErrorBar:_ee,removeErrorBar:Cee}=uT.actions,WY=uT.reducer,qY=["children"];function VY(e,t){if(e==null)return{};var r,n,s=HY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},GY=v.createContext(KY);function YY(e){var{children:t}=e,r=VY(e,qY);return v.createElement(GY.Provider,{value:r},t)}function dT(e,t){var r,n,s=ot(m=>oo(m,e)),i=ot(m=>lo(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Zs.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ei.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function JY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=cT(),{needClipX:i,needClipY:l,needClip:u}=dT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function XY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&tn(e.zIndex)?e.zIndex:t}var QY=["onMouseEnter","onMouseLeave","onClick"],ZY=["value","background","tooltipPosition"],eJ=["id"],tJ=["onMouseEnter","onClick","onMouseLeave"];function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ro.apply(null,arguments)}function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){rJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJ(e,t,r){return(t=nJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mm(e,t){if(e==null)return{};var r,n,s=iJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:oP(r,t),payload:e}]};function oJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:oP(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function lJ(e){var t=ot(Wc),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=mm(i,QY),f=nT(l,n),p=sT(u),y=iT(d,n);if(!s||r==null)return null;var x=Rx(s);return v.createElement(Ho,{zIndex:XY(s,Us.barBackground)},r.map((j,b)=>{var{value:S,background:_,tooltipPosition:E}=j,C=mm(j,ZY);if(!_)return null;var T=f(j,b),I=p(j,b),P=y(j,b),z=ks(ks(ks(ks(ks({option:s,isActive:String(b)===t},C),{},{fill:"#eee"},_),x),Bx(m,j,b)),{},{onMouseEnter:T,onMouseLeave:I,onClick:P,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return v.createElement(hm,ro({key:"background-bar-".concat(b)},z))}))}function cJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return ks(ks({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(IG,{value:t?s:void 0},r)}function uJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=ot(Wc),d=ot(T4),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(Ho,{zIndex:Us.activeBar},v.createElement(hm,ro({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(hm,ro({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function dJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(hm,ro({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function fJ(e){var t,{data:r,props:n}=e,s=(t=Lo(n))!==null&&t!==void 0?t:{},{id:i}=s,l=mm(s,eJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=mm(n,tJ),j=nT(f,d),b=sT(y),S=iT(p,d);return r?v.createElement(v.Fragment,null,r.map((_,E)=>v.createElement(Ya,ro({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},Bx(x,_,E),{onMouseEnter:j(_,E),onMouseLeave:b(_,E),onClick:S(_,E)}),m?v.createElement(uJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):v.createElement(dJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function hJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=Zx(t,"recharts-bar-"),[x,j]=v.useState(!1),b=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),_=v.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return v.createElement(cJ,{showLabels:b,rects:n},v.createElement(Qx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:_,key:y},E=>{var C=E===1?n:n==null?void 0:n.map((T,I)=>{var P=p&&p[I];if(P)return ks(ks({},T),{},{x:ss(P.x,T.x,E),y:ss(P.y,T.y,E),width:ss(P.width,T.width,E),height:ss(P.height,T.height,E)});if(s==="horizontal"){var z=ss(0,T.height,E),J=ss(T.stackedBarStart,T.y,E);return ks(ks({},T),{},{y:J,height:z})}var H=ss(0,T.width,E),pe=ss(T.stackedBarStart,T.x,E);return ks(ks({},T),{},{width:H,x:pe})});return E>0&&(r.current=C??null),C==null?null:v.createElement(Ya,null,v.createElement(fJ,{props:t,data:C}))}),v.createElement($G,{label:t.label}),t.children)}function mJ(e){var t=v.useRef(null);return v.createElement(hJ,{previousRectanglesRef:t,props:e})}var fT=0,pJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:_s(e,t)}};class gJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Nr("recharts-bar",s),p=m;return v.createElement(Ya,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(JY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(Ya,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(lJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(mJ,this.props)))}}var yJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Zc.isSsr,legendType:"rect",minPointSize:fT,xAxisId:0,yAxisId:0,zIndex:Us.bar};function vJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=dT(t,r),y=Hm(),x=di(),j=BG(e.children,Qw),b=ot(E=>HJ(E,t,r,x,e.id,j));if(y!=="vertical"&&y!=="horizontal")return null;var S,_=b==null?void 0:b[0];return _==null||_.height==null||_.width==null?S=0:S=y==="vertical"?_.height/2:_.width/2,v.createElement(YY,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:pJ,errorBarOffset:S},v.createElement(gJ,ro({},e,{layout:y,needClip:p,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function xJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:j,dataStartIndex:b}=e,S=t==="horizontal"?u:l,_=f?S.scale.domain():null,E=bU({numericAxis:S}),C=S.scale(E);return p.map((T,I)=>{var P,z,J,H,pe,Z;f?P=pU(f[I+b],_):(P=_s(T,r),Array.isArray(P)||(P=[E,P]));var K=UY(n,fT)(P[1],I);if(t==="horizontal"){var ce,[B,se]=[u.scale(P[0]),u.scale(P[1])];z=SN({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:T,index:I}),J=(ce=se??B)!==null&&ce!==void 0?ce:void 0,H=s.size;var W=B-se;if(pe=ya(W)?0:W,Z={x:z,y:y.top,width:H,height:y.height},Math.abs(K)>0&&Math.abs(pe)<Math.abs(K)){var de=ai(pe||K)*(Math.abs(K)-Math.abs(pe));J-=de,pe+=de}}else{var[oe,X]=[l.scale(P[0]),l.scale(P[1])];if(z=oe,J=SN({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:T,index:I}),H=X-oe,pe=s.size,Z={x:y.left,y:J,width:y.width,height:pe},Math.abs(K)>0&&Math.abs(H)<Math.abs(K)){var ee=ai(H||K)*(Math.abs(K)-Math.abs(H));H+=ee}}if(z==null||J==null||H==null||pe==null)return null;var D=ks(ks({},T),{},{stackedBarStart:C,x:z,y:J,width:H,height:pe,value:f?P:P[1],payload:T,background:Z,tooltipPosition:{x:z+H/2,y:J+pe/2},parentViewBox:j},x&&x[I]&&x[I].props);return D}).filter(Boolean)}function wJ(e){var t=Oi(e,yJ),r=di();return v.createElement(hY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(cY,{legendPayload:aJ(t)}),v.createElement(lY,{fn:oJ,args:t}),v.createElement(xY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:wU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(Ho,{zIndex:t.zIndex},v.createElement(vJ,ro({},t,{id:n})))))}var hT=v.memo(wJ);hT.displayName="Bar";function W2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(r),!0).forEach(function(n){bJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bJ(e,t,r){return(t=jJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jJ(e){var t=SJ(e,"string");return typeof t=="symbol"?t:t+""}function SJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kJ=(e,t)=>t,NJ=(e,t,r)=>r,_J=(e,t,r,n)=>n,CJ=(e,t,r,n,s)=>s,qd=we([Dw,CJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),EJ=we([qd],e=>e==null?void 0:e.maxBarSize),AJ=(e,t,r,n,s,i)=>i,q2=(e,t,r)=>{var n=r??e;if(!Kn(n))return Zi(n,t,0)},PJ=we([rr,Dw,kJ,NJ,_J],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),OJ=(e,t,r,n)=>{var s=rr(e);return s==="horizontal"?K0(e,"yAxis",r,n):K0(e,"xAxis",t,n)},TJ=(e,t,r)=>{var n=rr(e);return n==="horizontal"?Y_(e,"xAxis",t):Y_(e,"yAxis",r)},IJ=(e,t,r)=>{var n={},s=e.filter(ip),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(j=>j.dataKey),x=q2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=q2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},DJ=we([PJ,jq,TJ],IJ),RJ=(e,t,r,n,s)=>{var i,l,u=qd(e,t,r,n,s);if(u!=null){var d=rr(e),m=wO(e),{maxBarSize:f}=u,p=Kn(f)?m:f,y,x;return d==="horizontal"?(y=Bc(e,"xAxis",t,n),x=Uc(e,"xAxis",t,n)):(y=Bc(e,"yAxis",r,n),x=Uc(e,"yAxis",r,n)),(i=(l=Vh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},mT=(e,t,r,n)=>{var s=rr(e),i,l;return s==="horizontal"?(i=Bc(e,"xAxis",t,n),l=Uc(e,"xAxis",t,n)):(i=Bc(e,"yAxis",r,n),l=Uc(e,"yAxis",r,n)),Vh(i,l)};function $J(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=Zi(e,r,0,!0),u,d=[];if(tn(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((_,E)=>{var C,T={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},I=[..._,T];return x=I[I.length-1].position,I},d)}else{var j=Zi(t,r,0,!0);r-2*j-(i-1)*l<=0&&(l=0);var b=(r-2*j-(i-1)*l)/i;b>1&&(b>>=0);var S=tn(s)?Math.min(b,s):b;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(b+l)*C+(b-S)/2,size:S}}],d)}return u}}var MJ=(e,t,r,n,s,i,l)=>{var u=Kn(l)?t:l,d=$J(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>oh(oh({},m),{},{position:oh(oh({},m.position),{},{offset:m.position.offset-s/2})}))),d},FJ=we([DJ,wO,bq,bO,RJ,mT,EJ],MJ),LJ=(e,t,r,n)=>Bc(e,"xAxis",t,n),zJ=(e,t,r,n)=>Bc(e,"yAxis",r,n),UJ=(e,t,r,n)=>Uc(e,"xAxis",t,n),BJ=(e,t,r,n)=>Uc(e,"yAxis",r,n),WJ=we([FJ,qd],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),qJ=(e,t)=>{var r=Tw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},VJ=we([OJ,qd],qJ),HJ=we([Gn,Jx,LJ,zJ,UJ,BJ,WJ,rr,Sw,mT,VJ,qd,AJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:b}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,_;if(S!=null&&S.length>0?_=S:_=x==null?void 0:x.slice(j,b+1),_!=null)return xJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:_,offset:e,cells:y,dataStartIndex:j})}}),KJ=e=>{var{chartData:t}=e,r=rn(),n=di();return v.useEffect(()=>n?()=>{}:(r(o2(t)),()=>{r(o2(void 0))}),[t,r,n]),null},V2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},pT=Ws({name:"brush",initialState:V2,reducers:{setBrushSettings(e,t){return t.payload==null?V2:t.payload}}}),{setBrushSettings:Eee}=pT.actions,GJ=pT.reducer;function YJ(e,t,r){return(t=JJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=XJ(e,"string");return typeof t=="symbol"?t:t+""}function XJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tb{static create(t){return new tb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}YJ(tb,"EPS",1e-4);function QJ(e){return(e%180+180)%180}var ZJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=QJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},eX={dots:[],areas:[],lines:[]},gT=Ws({name:"referenceElements",initialState:eX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Va(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Va(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Va(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Aee,removeDot:Pee,addArea:Oee,removeArea:Tee,addLine:Iee,removeLine:Dee}=gT.actions,tX=gT.reducer,rX=v.createContext(void 0),nX=e=>{var{children:t}=e,[r]=v.useState("".concat(dd("recharts"),"-clip")),n=cT();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(rX.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function qc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function yT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function sX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ZJ(n,r)}function iX(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function pm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function aX(e,t){return yT(e,t+1)}function oX(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:yT(n,m)};var b=d,S,_=()=>(S===void 0&&(S=r(j,b)),S),E=j.coordinate,C=d===0||pm(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return(t=cX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return typeof t=="symbol"?t:t+""}function uX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dX(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],j,b=()=>(j===void 0&&(j=r(x,y)),j);if(y===l-1){var S=e*(x.coordinate+e*b()/2-d);i[y]=x=fs(fs({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=fs(fs({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=pm(e,x.tickCoord,b,u,d);_&&(d=x.tickCoord-e*(b()/2+s),i[y]=fs(fs({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function fX(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=fs(fs({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=pm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=fs(fs({},f),{},{isShow:!0}))}}for(var j=i?u-1:u,b=function(E){var C=l[E],T,I=()=>(T===void 0&&(T=r(C,E)),T);if(E===0){var P=e*(C.coordinate-e*I()/2-d);l[E]=C=fs(fs({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else l[E]=C=fs(fs({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var z=pm(e,C.tickCoord,I,d,m);z&&(d=C.tickCoord+e*(I()/2+s),l[E]=fs(fs({},C),{},{isShow:!0}))}},S=0;S<j;S++)b(S);return l}function hX(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(mt(d)||Zc.isSsr){var y;return(y=aX(s,mt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",b=f&&j==="width"?id(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(C,T)=>{var I=typeof m=="function"?m(C.value,T):C.value;return j==="width"?sX(id(I,{fontSize:t,letterSpacing:r}),b,p):id(I,{fontSize:t,letterSpacing:r})[j]},_=s.length>=2?ai(s[1].coordinate-s[0].coordinate):1,E=iX(i,_,j);return d==="equidistantPreserveStart"?oX(_,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=fX(_,E,S,s,l,d==="preserveStartEnd"):x=dX(_,E,S,s,l),x.filter(C=>C.isShow))}var mX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},pX=["axisLine","width","height","className","hide","ticks","axisType"],gX=["viewBox"],yX=["viewBox"];function tx(e,t){if(e==null)return{};var r,n,s=vX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Il.apply(null,arguments)}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){xX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xX(e,t,r){return(t=wX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=bX(e,"string");return typeof t=="symbol"?t:t+""}function bX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Us.axis};function SX(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=pn(pn(pn({},d),Lo(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=pn(pn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=pn(pn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Il({},m,{className:Nr("recharts-cartesian-axis-line",Mc(u,"className"))}))}function kX(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,j,b=u?-1:1,S=e.tickSize||l,_=mt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-b*S,j=p-b*d,x=_;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-b*S,x=m-b*d,j=_;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+b*S,x=m+b*d,j=_;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+b*S,j=p+b*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:j}}}function NX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function _X(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function CX(e){var{option:t,tickProps:r,value:n}=e,s,i=Nr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,pn(pn({},r),{},{className:i}));else if(typeof t=="function")s=t(pn(pn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Nr(l,t==null?void 0:t.className)),s=v.createElement(Zw,Il({},r,{className:l}),n)}return s}var EX=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:j,height:b,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:T,events:I,axisType:P}=e,z=hX(pn(pn({},T),{},{ticks:r}),E,C),J=NX(f,p),H=_X(f,p),pe=Lo(T),Z=Rx(n),K={};typeof s=="object"&&(K=s);var ce=pn(pn({},pe),{},{fill:"none"},K),B=z.map(de=>pn({entry:de},kX(de,y,x,j,b,f,S,p,_))),se=B.map(de=>{var{entry:oe,line:X}=de;return v.createElement(Ya,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},s&&v.createElement("line",Il({},ce,X,{className:Nr("recharts-cartesian-axis-tick-line",Mc(s,"className"))})))}),W=B.map((de,oe)=>{var{entry:X,tick:ee}=de,D=pn(pn(pn(pn({textAnchor:J,verticalAnchor:H},pe),{},{stroke:"none",fill:i},Z),ee),{},{index:oe,payload:X,visibleTicksCount:z.length,tickFormatter:l,padding:d},m);return v.createElement(Ya,Il({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},Bx(I,X,oe)),n&&v.createElement(CX,{option:n,tickProps:D,value:"".concat(typeof l=="function"?l(X.value,oe):X.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},W.length>0&&v.createElement(Ho,{zIndex:Us.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},W)),se.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},se))}),AX=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=tx(e,pX),[f,p]=v.useState(""),[y,x]=v.useState(""),j=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return mX({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=v.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),T=C.fontSize,I=C.letterSpacing;(T!==f||I!==y)&&(p(T),x(I))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(Ho,{zIndex:e.zIndex},v.createElement(Ya,{className:Nr("recharts-cartesian-axis",i)},v.createElement(SX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Lo(e)}),v.createElement(EX,{ref:b,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(fG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(jG,{label:e.label,labelRef:e.labelRef}),e.children)))}),PX=v.memo(AX,(e,t)=>{var{viewBox:r}=e,n=tx(e,gX),{viewBox:s}=t,i=tx(t,yX);return qc(r,s)&&qc(n,i)}),rb=v.forwardRef((e,t)=>{var r=Oi(e,jX);return v.createElement(PX,Il({},r,{ref:t}))});rb.displayName="CartesianAxis";var OX=["dangerouslySetInnerHTML","ticks"],TX=["id"],IX=["domain"],DX=["domain"];function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(null,arguments)}function gm(e,t){if(e==null)return{};var r,n,s=RX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $X(e){var t=rn();return v.useLayoutEffect(()=>(t(kY(e)),()=>{t(NY(e))}),[e,t]),null}var MX=e=>{var{xAxisId:t,className:r}=e,n=ot(Jx),s=di(),i="xAxis",l=ot(S=>iu(S,i,t,s)),u=ot(S=>d4(S,i,t,s)),d=ot(S=>o4(S,t)),m=ot(S=>xV(S,t)),f=ot(S=>AO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=gm(e,OX),{id:j}=f,b=gm(f,TX);return v.createElement(rb,rx({},x,b,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Nr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},FX={allowDataOverflow:Zs.allowDataOverflow,allowDecimals:Zs.allowDecimals,allowDuplicatedCategory:Zs.allowDuplicatedCategory,height:Zs.height,hide:!1,mirror:Zs.mirror,orientation:Zs.orientation,padding:Zs.padding,reversed:Zs.reversed,scale:Zs.scale,tickCount:Zs.tickCount,type:Zs.type,xAxisId:0},LX=e=>{var t,r,n,s,i,l=Oi(e,FX);return v.createElement(v.Fragment,null,v.createElement($X,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(MX,l))},zX=(e,t)=>{var{domain:r}=e,n=gm(e,IX),{domain:s}=t,i=gm(t,DX);return qc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:qc({domain:r},{domain:s}):!1},vT=v.memo(LX,zX);vT.displayName="XAxis";var UX=["dangerouslySetInnerHTML","ticks"],BX=["id"],WX=["domain"],qX=["domain"];function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nx.apply(null,arguments)}function ym(e,t){if(e==null)return{};var r,n,s=VX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HX(e){var t=rn();return v.useLayoutEffect(()=>(t(_Y(e)),()=>{t(CY(e))}),[e,t]),null}var KX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=ot(Jx),d=di(),m=rn(),f="yAxis",p=ot(I=>iu(I,f,t,d)),y=ot(I=>l4(I,t)),x=ot(I=>bV(I,t)),j=ot(I=>d4(I,f,t,d)),b=ot(I=>PO(I,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||eb(s)||v.isValidElement(s)||b==null)){var I=i.current;if(I){var P=I.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(EY({id:t,width:P}))}}},[j,y,m,s,t,n,b]),y==null||x==null||b==null)return null;var{dangerouslySetInnerHTML:S,ticks:_}=e,E=ym(e,UX),{id:C}=b,T=ym(b,BX);return v.createElement(rb,nx({},E,T,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Nr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:j,axisType:f}))},GX={allowDataOverflow:ei.allowDataOverflow,allowDecimals:ei.allowDecimals,allowDuplicatedCategory:ei.allowDuplicatedCategory,hide:!1,mirror:ei.mirror,orientation:ei.orientation,padding:ei.padding,reversed:ei.reversed,scale:ei.scale,tickCount:ei.tickCount,type:ei.type,width:ei.width,yAxisId:0},YX=e=>{var t,r,n,s,i,l=Oi(e,GX);return v.createElement(v.Fragment,null,v.createElement(HX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(KX,l))},JX=(e,t)=>{var{domain:r}=e,n=ym(e,WX),{domain:s}=t,i=ym(t,qX);return qc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:qc({domain:r},{domain:s}):!1},xT=v.memo(YX,JX);xT.displayName="YAxis";var Iv={exports:{}},Dv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function XX(){if(G2)return Dv;G2=1;var e=Vc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Dv.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function S(I){if(!_){if(_=!0,E=I,I=p(I),y!==void 0&&j.hasValue){var P=j.value;if(y(P,I))return C=P}return C=I}if(P=C,r(E,I))return P;var z=p(I);return y!==void 0&&y(P,z)?(E=I,P):(E=I,C=z)}var _=!1,E,C,T=f===void 0?null:f;return[function(){return S(m())},T===null?void 0:function(){return S(T())}]},[m,f,p,y]);var b=n(d,x[0],x[1]);return i(function(){j.hasValue=!0,j.value=b},[b]),u(b),b},Dv}var Y2;function QX(){return Y2||(Y2=1,Iv.exports=XX()),Iv.exports}QX();function ZX(e){e()}function eQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var J2={notify(){},get:()=>[]};function tQ(e,t){let r,n=J2,s=0,i=!1;function l(b){f();const S=n.subscribe(b);let _=!1;return()=>{_||(_=!0,S(),p())}}function u(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=eQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=J2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return j}var rQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nQ=rQ(),sQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iQ=sQ(),aQ=()=>nQ||iQ?v.useLayoutEffect:v.useEffect,oQ=aQ(),Rv=Symbol.for("react-redux-context"),$v=typeof globalThis<"u"?globalThis:{};function lQ(){if(!v.createContext)return{};const e=$v[Rv]??($v[Rv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var cQ=lQ();function uQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=tQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);oQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||cQ;return v.createElement(u.Provider,{value:i},t)}var dQ=uQ,fQ=(e,t)=>t,nb=we([fQ,rr,CO,Dn,E4,co,OH,Gn],FH),sb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},wT=Ei("mouseClick"),bT=Td();bT.startListening({actionCreator:wT,effect:(e,t)=>{var r=e.payload,n=nb(t.getState(),sb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(DV({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sx=Ei("mouseMove"),jT=Td();jT.startListening({actionCreator:sx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Ww(n,n.tooltip.settings.shared),i=nb(n,sb(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(x4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(v4()))}});var X2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},ST=Ws({name:"rootProps",initialState:X2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:X2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),hQ=ST.reducer,{updateOptions:mQ}=ST.actions,kT=Ws({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Ree}=kT.actions,pQ=kT.reducer,NT=Ei("keyDown"),_T=Ei("focus"),ib=Td();ib.startListening({actionCreator:NT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(qw(s,ou(r))),u=co(r);if(i==="Enter"){var d=cm(r,"axis","hover",String(s.index));t.dispatch(Y0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=NV(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=cm(r,"axis","hover",String(y));t.dispatch(Y0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});ib.startListening({actionCreator:_T,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=cm(r,"axis","hover",String(i));t.dispatch(Y0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Si=Ei("externalEvent"),CT=Td();CT.startListening({actionCreator:Si,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:gH(r),activeDataKey:T4(r),activeIndex:Wc(r),activeLabel:O4(r),activeTooltipIndex:Wc(r),isTooltipActive:yH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var gQ=we([au],e=>e.tooltipItemPayloads),yQ=we([gQ,Bd,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),ET=Ei("touchMove"),AT=Td();AT.startListening({actionCreator:ET,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Ww(n,n.tooltip.settings.shared);if(s==="axis"){var i=nb(n,sb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(x4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(EU),f=(l=d.getAttribute(AU))!==null&&l!==void 0?l:void 0,p=yQ(t.getState(),m,f);t.dispatch(y4({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var vQ=RA({brush:GJ,cartesianAxis:AY,chartData:gK,errorBars:WY,graphicalItems:vY,layout:cU,legend:fB,options:dK,polarAxis:FG,polarOptions:pQ,referenceElements:tX,rootProps:hQ,tooltip:RV,zIndex:QH}),xQ=function(t){return D8({reducer:vQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([bT.middleware,jT.middleware,ib.middleware,CT.middleware,AT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(KA({type:"raf"}))},devTools:Zc.devToolsEnabled})};function wQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=di(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=xQ(t));var l=qx;return v.createElement(dQ,{context:l,store:i.current},r)}function bQ(e){var{layout:t,margin:r}=e,n=rn(),s=di();return v.useEffect(()=>{s||(n(aU(t)),n(iU(r)))},[n,s,t,r]),null}function jQ(e){var t=rn();return v.useEffect(()=>{t(mQ(e))},[t,e]),null}function Q2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=aT("".concat(n).concat(t)),i=rn();return v.useLayoutEffect(()=>(i(JH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(XH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function Z2(e){var{children:t,isPanorama:r}=e,n=ot(zH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(Q2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(Q2,{key:l,zIndex:l,isPanorama:r})))}var SQ=["children"];function kQ(e,t){if(e==null)return{};var r,n,s=NQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vm.apply(null,arguments)}var _Q={width:"100%",height:"100%",display:"block"},CQ=v.forwardRef((e,t)=>{var r=aB(),n=oB(),s=mP();if(!zo(r)||!zo(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(ZE,vm({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:_Q,ref:t}),i)}),EQ=e=>{var{children:t}=e,r=ot(qm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(ZE,{width:n,height:s,x:l,y:i},t)},eC=v.forwardRef((e,t)=>{var{children:r}=e,n=kQ(e,SQ),s=di();return s?v.createElement(EQ,null,v.createElement(Z2,{isPanorama:!0},r)):v.createElement(CQ,vm({ref:t},n),v.createElement(Z2,{isPanorama:!1},r))});function AQ(){var e=rn(),[t,r]=v.useState(null),n=ot(CU);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;tn(i)&&i!==n&&e(lU(i))}},[t,e,n]),r}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){OQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OQ(e,t,r){return(t=TQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TQ(e){var t=IQ(e,"string");return typeof t=="symbol"?t:t+""}function IQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dl.apply(null,arguments)}var DQ=()=>(NK(),null);function xm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var RQ=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:xm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:xm((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=j=>{var{width:b,height:S}=j[0].contentRect;u(b,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(Km,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",Dl({ref:d},e)))}),$Q=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:xm(r),containerHeight:xm(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(Km,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Dl({ref:u},e)))}),MQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Km,{width:r,height:n}),v.createElement("div",Dl({ref:t},e)))}),FQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ja(r)||Ja(n)?v.createElement($Q,Dl({},e,{ref:t})):v.createElement(MQ,Dl({},e,{ref:t}))});function LQ(e){return e===!0?RQ:FQ}var zQ=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:j,onTouchStart:b,style:S,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,T=v.useRef(null),I=rn(),[P,z]=v.useState(null),[J,H]=v.useState(null),pe=AQ(),Z=Xx(),K=(Z==null?void 0:Z.width)>0?Z.width:_,ce=(Z==null?void 0:Z.height)>0?Z.height:s,B=v.useCallback(R=>{pe(R),typeof t=="function"&&t(R),z(R),H(R),R!=null&&(T.current=R)},[pe,t,z,H]),se=v.useCallback(R=>{I(wT(R)),I(Si({handler:i,reactEvent:R}))},[I,i]),W=v.useCallback(R=>{I(sx(R)),I(Si({handler:m,reactEvent:R}))},[I,m]),de=v.useCallback(R=>{I(v4()),I(Si({handler:f,reactEvent:R}))},[I,f]),oe=v.useCallback(R=>{I(sx(R)),I(Si({handler:p,reactEvent:R}))},[I,p]),X=v.useCallback(()=>{I(_T())},[I]),ee=v.useCallback(R=>{I(NT(R.key))},[I]),D=v.useCallback(R=>{I(Si({handler:l,reactEvent:R}))},[I,l]),q=v.useCallback(R=>{I(Si({handler:u,reactEvent:R}))},[I,u]),Te=v.useCallback(R=>{I(Si({handler:d,reactEvent:R}))},[I,d]),be=v.useCallback(R=>{I(Si({handler:y,reactEvent:R}))},[I,y]),Ee=v.useCallback(R=>{I(Si({handler:b,reactEvent:R}))},[I,b]),le=v.useCallback(R=>{C&&I(ET(R)),I(Si({handler:j,reactEvent:R}))},[I,C,j]),fe=v.useCallback(R=>{I(Si({handler:x,reactEvent:R}))},[I,x]),Q=LQ(E);return v.createElement(z4.Provider,{value:P},v.createElement(yL.Provider,{value:J},v.createElement(Q,{width:K??(S==null?void 0:S.width),height:ce??(S==null?void 0:S.height),className:Nr("recharts-wrapper",n),style:PQ({position:"relative",cursor:"default",width:K,height:ce},S),onClick:se,onContextMenu:D,onDoubleClick:q,onFocus:X,onKeyDown:ee,onMouseDown:Te,onMouseEnter:W,onMouseLeave:de,onMouseMove:oe,onMouseUp:be,onTouchEnd:fe,onTouchMove:le,onTouchStart:Ee,ref:B},v.createElement(DQ,null),r)))}),UQ=["width","height","responsive","children","className","style","compact","title","desc"];function BQ(e,t){if(e==null)return{};var r,n,s=WQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qQ=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=BQ(e,UQ),y=Lo(p);return d?v.createElement(v.Fragment,null,v.createElement(Km,{width:r,height:n}),v.createElement(eC,{otherAttributes:y,title:m,desc:f},i)):v.createElement(zQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(eC,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(nX,null,i)))});function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ix.apply(null,arguments)}var VQ={top:5,right:5,bottom:5,left:5},HQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:VQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},KQ=v.forwardRef(function(t,r){var n,s=Oi(t.categoricalChartProps,HQ),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(wQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(KJ,{chartData:m.data}),v.createElement(bQ,{layout:s.layout,margin:s.margin}),v.createElement(jQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(qQ,ix({},s,{ref:r})))}),GQ=["axis","item"],YQ=v.forwardRef((e,t)=>v.createElement(KQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:GQ,tooltipPayloadSearcher:cK,categoricalChartProps:e,ref:t}));const Sa="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",PT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function JQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const oi={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return JQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function XQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),OT(e)}async function QQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return OT(new Uint8Array(n))}function OT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function ZQ(e){const t=XQ(),r=await QQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:oi.clientId,response_type:"code",redirect_uri:oi.redirectUri,response_mode:"query",scope:oi.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${oi.tenantId}/oauth2/v2.0/authorize?${n}`}async function eZ(e){const t=`https://login.microsoftonline.com/${oi.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:oi.clientId,scope:oi.scopes.join(" "),code:e,redirect_uri:oi.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function tZ(e){const t=`https://login.microsoftonline.com/${oi.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:oi.clientId,scope:oi.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function TT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function rC(e){const t=new Set;for(const r of PT)try{(await TT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function ax(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function rZ(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return ax(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(j=>`'${j}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var b;const j=(b=x.fields)==null?void 0:b["System.AreaPath"];j&&y.add(j)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function nZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(j=>j.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{var E,C,T;const b=(E=j.fields)==null?void 0:E["System.WorkItemType"],S=(C=j.fields)==null?void 0:C["System.AreaPath"],_=(T=j.fields)==null?void 0:T["System.Tags"];b&&p.add(b),S&&y.add(S),_&&_.split(";").map(I=>I.trim()).forEach(I=>{I&&x.add(I)})}),{types:Array.from(p).sort((j,b)=>j.localeCompare(b)),areaPaths:Array.from(y).sort((j,b)=>j.localeCompare(b)),tags:Array.from(x).sort((j,b)=>j.localeCompare(b))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function sZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function iZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function aZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(j=>j.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{j.fields&&(j.fields["System.WorkItemType"]&&p.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&y.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&x.add(j.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function oZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${j})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const j=n.map(b=>`[System.AreaPath] UNDER '${b}'`);s.push(`(${j.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(j=>{j.fields&&j.fields["System.Tags"]&&j.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function nC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await lZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function lZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function cZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function uZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await eZ(t);return sessionStorage.removeItem("oauth_state"),s}async function dZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await ZQ(e);window.location.href=r}async function sC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let C=0;C<f.length;C+=y){const I=f.slice(C,C+y).join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${I}&fields=${p}&api-version=7.0`,z=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(!z.ok)throw new Error(`Failed to fetch work items: ${z.status} ${z.statusText}`);const J=await z.json();J.value&&Array.isArray(J.value)&&x.push(...J.value)}if(x.length===0)return[];const j=new Map,b=new Map,S=new Map,_=10;for(let C=0;C<x.length;C+=_){const T=x.slice(C,C+_);await Promise.all(T.map(async I=>{try{const P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${I.id}?$expand=relations&api-version=7.0`,z=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(z.ok){const J=await z.json();if(J.relations){for(const H of J.relations)if(H.rel==="System.LinkTypes.Hierarchy-Forward"){const pe=H.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(pe){const Z=parseInt(pe[1],10);j.set(I.id,Z)}}}}}catch(P){console.error(`Error fetching relations for work item ${I.id}:`,P)}}))}const E=Array.from(new Set(j.values()));if(E.length>0){const C=E.slice(0,200).join(","),T=["System.Id","System.Title","System.WorkItemType"].join(","),I=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${T}&api-version=7.0`;try{const P=await fetch(I,{headers:{Authorization:`Bearer ${i}`}});if(P.ok){const z=await P.json();for(const J of z.value)S.set(J.id,J.fields["System.Title"]||""),J.fields["System.WorkItemType"]==="Epic"&&b.set(J.id,J.fields["System.Title"]||"")}}catch(P){console.error("Error fetching parent work items:",P)}}return x.map(C=>{let T=null;const I=j.get(C.id);if(I&&(T=b.get(I)||null,!T)){const P=S.get(I)}if(!T&&C.fields){const z=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(J=>J.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(J))];for(const J of z){const H=C.fields[J];if(H!=null){if(typeof H=="string"&&H.trim()!==""){const pe=parseInt(H.trim());if(!isNaN(pe)&&pe>0){if(T=b.get(pe)||null,T)break}else{T=H.trim();break}}else if(typeof H=="number"&&(T=b.get(H)||null,T))break}}}return{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:T||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function iC(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?r=d:console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function aC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const ha=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,i=parseInt(r[2],10);return new Date(n,s,i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ki=e=>new Date(e)<new Date,IT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",oC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],fZ=e=>e?e.trim().toLowerCase():"",hZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},vh=(e,t,r)=>Math.min(Math.max(e,t),r),mZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},ab=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},pZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},gZ=e=>pZ(ab(e))>.6?"#111827":"#FFFFFF",lC=(e,t)=>{const{r,g:n,b:s}=ab(e),i=1+t/100,l=vh(Math.round(r*i),0,255),u=vh(Math.round(n*i),0,255),d=vh(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},yZ=(e,t)=>{const{r,g:n,b:s}=ab(e);return`rgba(${r}, ${n}, ${s}, ${vh(t,0,1)})`},Vn=(e,t)=>{const r=mZ(t);if(r){const l=gZ(r);return{background:r,text:l,border:lC(r,-20),badgeBackground:yZ(r,.15),badgeText:l,hoverBackground:lC(r,-5),hoverText:l}}const n=fZ(e),s=n?hZ(n)%oC.length:0,i=oC[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function DT({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:j,onNewProductColorChange:b,onCreateProduct:S,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:T="e.g., Catalyst Cloud",allowDelete:I=!1,onRequestDeleteProduct:P}){const[z,J]=v.useState(!1),H=v.useRef(null),pe=v.useRef(null),[Z,K]=v.useState(!1),[ce,B]=v.useState(!1),se=v.useMemo(()=>t.find(le=>le.id===r)??null,[t,r]),W=(se==null?void 0:se.name)??s??"",de=W?Vn(W,(se==null?void 0:se.color_hex)??null):null,oe=u||i||t.length===0;v.useEffect(()=>{if(!z)return;function le(Q){H.current&&!H.current.contains(Q.target)&&J(!1)}function fe(Q){Q.key==="Escape"&&J(!1)}return document.addEventListener("mousedown",le),document.addEventListener("keydown",fe),()=>{document.removeEventListener("mousedown",le),document.removeEventListener("keydown",fe)}},[z]);const X=le=>{n(le),J(!1)},ee=!!(p&&x&&S),D=ee&&Z,q=!!b,Te=j??"#2D4660",be=!!(e&&e.trim().length>0),Ee=be||ee;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:H,children:[Ee&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[be&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),ee&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:D?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:y,onChange:le=>{B(!1),x==null||x(le.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:j&&y.trim().length>0?j:"#D1D5DB"}}),q&&y.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var le;return(le=pe.current)==null?void 0:le.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${j?"":"border-gray-300 bg-white"}`,style:j?{backgroundColor:j,borderColor:j}:void 0,"aria-label":"Choose product color",children:!j&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:pe,type:"color",value:Te,onChange:le=>{B(!1),b==null||b(le.target.value)},className:"sr-only"}),y.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>B(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ce?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&j&&ce&&a.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>K(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!oe&&J(le=>!le),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${oe?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!oe&&de?{borderColor:de.border}:void 0,"aria-expanded":z,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[de&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:de.background,borderColor:de.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${W?"":"text-gray-400"}`,style:de?{color:de.background}:void 0,children:W||(t.length===0?"No products available":d)})]}),a.jsx(ns,{className:`ml-2 h-4 w-4 transition-transform ${z?"rotate-180":""} ${oe?"text-gray-300":"text-gray-500"}`})]}),z&&!oe&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(le=>{const fe=Vn(le.name,le.color_hex??null),Q=r===le.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":fe.background,"--product-light-bg":fe.badgeBackground,"--product-border-color":fe.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>X(le.id),"aria-selected":Q,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:le.name}),Q&&a.jsx(or,{className:"h-4 w-4 text-gray-400"})]}),I&&P&&a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),J(!1),P(le)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${le.name}`,title:"Delete product",children:a.jsx(Qi,{className:"h-4 w-4"})})]},le.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),ee&&E&&D&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const cC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],uC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},vZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return cC[t%cC.length]};function Un(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=uC(t[r]);if(i)return i}const n=uC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return vZ(s)}const xZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],dC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function fC({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",j=l==="green"?"bg-green-50":"bg-blue-50",b=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(ns,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>a.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?j:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&a.jsx(or,{className:`h-4 w-4 ${b}`})]},S))})]})}function lh({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},j=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},b=_=>{_.stopPropagation(),r([])},S=i&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&a.jsx("button",{type:"button",onClick:E=>j(_,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx(Ls,{className:"h-3 w-3"})})]},_))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ls,{className:"h-4 w-4"})}),a.jsx(ns,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:y,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(_=>a.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&a.jsx(or,{className:"h-4 w-4 text-[#1E5461]"})]},_)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function wZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s}){const[i,l]=v.useState(new Set);v.useEffect(()=>{e&&r&&r.length>0&&l(new Set(r.map(y=>y.id)))},[e,r]);const u=y=>{l(x=>{const j=new Set(x);return j.has(y)?j.delete(y):j.add(y),j})},d=()=>{r&&(i.size===r.length?l(new Set):l(new Set(r.map(y=>y.id))))},m=async()=>{if(!r)return;const y=r.filter(x=>i.has(x.id));await n(y),t()},f=async()=>{!r||!s||(await s(),t())},p=i.size;return a.jsx(mn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:a.jsx("div",{className:"space-y-4",children:r&&r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),d()},className:"flex items-center justify-center",children:r.length>0&&i.size===r.length?a.jsx(or,{className:"w-5 h-5 text-green-600"}):a.jsx(u0,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(y=>{const x=i.has(y.id);return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${x?"bg-blue-50":""}`,onClick:()=>u(y.id),children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u(y.id)},className:"flex items-center justify-center",children:x?a.jsx(or,{className:"w-5 h-5 text-green-600"}):a.jsx(u0,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),y.description&&y.description.trim()&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[y.description.replace(/<[^>]*>/g,"").substring(0,100),y.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),y.tags&&y.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[y.tags.slice(0,3).map((j,b)=>a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},b)),y.tags.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",y.tags.length-3]})]})]}),y.azureDevOpsId&&a.jsx(hp,{id:y.azureDevOpsId,url:y.azureDevOpsUrl||""})]})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:a.jsx("div",{className:"flex items-center",children:y.workItemType==="Epic"?a.jsx(Ss,{className:"w-5 h-5 text-green-600"}):y.workItemType==="Feature"?a.jsx(FE,{className:"w-5 h-5 text-purple-600"}):y.workItemType?a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:y.workItemType}):null})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:y.state})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.workItemType!=="Epic"&&y.epic?a.jsx(Vd,{name:y.epic}):a.jsx("span",{className:"text-xs text-gray-400",children:""})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.areaPath?a.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:y.areaPath,children:y.areaPath}):a.jsx("span",{className:"text-xs text-gray-400",children:""})})]},y.id)})})]})})}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[p," of ",r.length," selected"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(nt,{variant:"primary",onClick:m,disabled:p===0,className:"flex items-center",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Add ",p," Feature",p!==1?"s":""]}),s&&a.jsxs(nt,{variant:"danger",onClick:f,className:"flex items-center",children:[a.jsx(El,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function bZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:j,resetSignal:b}){const S=PT,[_,E]=v.useState(!1),[C,T]=v.useState(null),[I,P]=v.useState(!1),[z,J]=v.useState(!1),[H,pe]=v.useState(!1),Z=v.useRef(null),K=v.useRef(!1),ce=v.useRef(!1),B=v.useRef(!1),se=v.useRef(!1),W={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:de,handleSubmit:oe,watch:X,control:ee,setValue:D,reset:q}=ud({defaultValues:W}),Te=v.useCallback(()=>{q({...W}),E(!1),ce.current=!1,B.current=!1,se.current=!1},[q]);v.useEffect(()=>{Te()},[b,Te]);const be=X("workItemTypes"),Ee=X("states"),le=X("areaPaths"),fe=X("tags"),Q=X("query"),R=v.useCallback((V,Le,ze,dt,ft,$t)=>{const _t=[];if(V&&V.length>0)if(V.length===1)_t.push(`[System.WorkItemType] = '${V[0]}'`);else{const Qt=V.map(M=>`'${M}'`).join(", ");_t.push(`[System.WorkItemType] IN (${Qt})`)}if(Le&&Le.length>0)if(Le.length===1)_t.push(`[System.State] = '${Le[0]}'`);else{const Qt=Le.map(M=>`'${M}'`).join(", ");_t.push(`[System.State] IN (${Qt})`)}if(ze&&ze.length>0)if(ze.length===1)_t.push(`[System.AreaPath] UNDER '${ze[0]}'`);else{const Qt=ze.map(M=>`[System.AreaPath] UNDER '${M}'`);_t.push(`(${Qt.join(" OR ")})`)}if(dt&&dt.length>0){const Qt=dt.map(M=>`[System.Tags] CONTAINS '${M}'`);_t.push(`(${Qt.join(" OR ")})`)}return $t&&ft&&_t.push(`(${ft})`),_t.length>0?_t.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(ce.current||B.current||se.current)&&m){if(!be||be.length===0){m(void 0);return}m(be[0])}},[be,m]),v.useEffect(()=>{if(ce.current||B.current||!f)return;(async()=>{J(!0);try{await f(be&&be.length>0?be[0]:void 0,Ee||[])}finally{J(!1)}})()},[be,Ee,f]),v.useEffect(()=>{if(B.current||!p||!be||be.length===0)return;const V=async()=>{pe(!0);try{await p(be[0],Ee||[],le||[])}finally{pe(!1)}},Le=setTimeout(()=>{V()},100);return()=>{clearTimeout(Le),pe(!1)}},[be,Ee,le,p]),v.useEffect(()=>{if(!y||B.current||se.current||!le||le.length===0)return;const V=be&&be.length>0,Le=Ee&&Ee.length>0;V&&Le||(ce.current=!0,y(le).then(({types:ze,states:dt})=>{ze.length>0&&!V&&D("workItemTypes",ze,{shouldDirty:!1}),dt.length>0&&!Le&&D("states",dt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ce.current=!1},300)}))},[le,be,Ee,y,D]),v.useEffect(()=>{x&&(ce.current||se.current||!fe||fe.length===0||(B.current=!0,x(fe).then(({types:V,states:Le,areaPaths:ze})=>{V.length>0&&D("workItemTypes",V,{shouldDirty:!1}),Le.length>0&&D("states",Le,{shouldDirty:!1}),ze.length>0&&D("areaPaths",ze,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{B.current=!1},300)})))},[fe,x,D]),v.useEffect(()=>{!j||ce.current||B.current||!Ee||Ee.length===0||be&&be.length>0||(se.current=!0,j(Ee).then(({types:Le})=>{Le.length>0&&D("workItemTypes",Le,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{se.current=!1},300)}))},[Ee,be,j,D]),v.useEffect(()=>{if(Ee&&Ee.length>0&&s.length>0){const V=Ee.filter(Le=>s.includes(Le));V.length!==Ee.length&&D("states",V)}},[s,Ee,D]),v.useEffect(()=>{if(le&&le.length>0&&i.length>0){const V=le.filter(Le=>i.includes(Le));V.length!==le.length&&(D("areaPaths",V),V.length===0&&D("tags",[]))}},[i,le,D]),v.useEffect(()=>{if(fe&&fe.length>0&&l.length>0){const V=fe.filter(Le=>l.includes(Le));V.length!==fe.length&&D("tags",V)}},[l,fe,D]);const ye=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!be||be.length===0){T(null);return}try{P(!0);const V=be[0],Le=R(be||[],Ee||[],le||[],fe||[],Q||"",_);let ze="";Le?ze=`SELECT [System.Id] FROM WorkItems WHERE ${Le}`:ze=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${V}' AND [System.State] = 'Active'`;const dt=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,ft=await fetch(dt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:ze})});if(!ft.ok)throw new Error(`Azure DevOps query failed: ${ft.status} ${ft.statusText}`);const $t=await ft.json(),_t=$t.workItems?$t.workItems.length:0;T(_t)}catch(V){console.error("[FilterForm] Error fetching feature count:",V),T(null)}finally{P(!1)}},[e,be,Ee,le,fe,Q,_,R]);v.useEffect(()=>(Z.current!==null&&window.clearTimeout(Z.current),T(null),be&&be.length>0&&e.enabled&&e.accessToken&&(Z.current=window.setTimeout(()=>{ye()},300)),()=>{Z.current!==null&&window.clearTimeout(Z.current)}),[be,Ee,le,fe,Q,_,e.enabled,e.accessToken,ye]),v.useEffect(()=>{if(d&&!K.current&&u){const V=u.length;T(V)}K.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!I&&T(u.length)},[u,I]),v.useEffect(()=>{const V=R(be||[],Ee||[],le||[],fe||[],Q||"",_),Le={...e,workItemType:be&&be.length>0?be[0]:e.workItemType||"Feature",query:V,states:Ee&&Ee.length>0?Ee:void 0,areaPath:le&&le.length>0?le[0]:void 0,tags:fe&&fe.length>0?fe:void 0},ze=window.setTimeout(()=>{t(Le)},100);return()=>{window.clearTimeout(ze)}},[be,Ee,le,fe,Q,_,R,t]);const Me=async V=>{await r()};return a.jsxs("form",{onSubmit:oe(Me),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(iF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:Te,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),a.jsx(Cc,{name:"workItemTypes",control:ee,render:({field:V})=>a.jsx(lh,{options:S,value:V.value,onChange:V.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(Cc,{name:"states",control:ee,render:({field:V})=>a.jsx(lh,{options:s,value:V.value,onChange:V.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(Cc,{name:"areaPaths",control:ee,render:({field:V})=>a.jsx(lh,{options:i,value:V.value,onChange:V.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:z?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(Cc,{name:"tags",control:ee,render:({field:V})=>a.jsx(lh,{options:l,value:V.value,onChange:V.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!H})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!be||be.length===0?"Select work item type to see tags":H?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...de("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(nt,{variant:"gold",type:"submit",disabled:(()=>{const V=((be==null?void 0:be.length)??0)>0,Le=((Ee==null?void 0:Ee.length)??0)>0,ze=((le==null?void 0:le.length)??0)>0,dt=((fe==null?void 0:fe.length)??0)>0,ft=Q&&Q.trim().length>0;return n||I||!(V||Le||ze||dt||ft)})(),className:"flex items-center",children:[n&&a.jsx(El,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":C!==null&&!I?`Preview ${C} Feature${C!==1?"s":""}`:"Preview Features"]})})]})}function jZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[j,b]=v.useState(!1),[S,_]=v.useState("#2D4660"),[E,C]=v.useState(null),[T,I]=v.useState(!1);v.useRef(null);const P=le=>{if(!le||typeof le!="string")return new Date;const Q=le.split("T")[0].split(" ")[0].split("-");if(Q.length!==3)return new Date;const R=parseInt(Q[0],10),ye=parseInt(Q[1],10),Me=parseInt(Q[2],10);if(isNaN(R)||isNaN(ye)||isNaN(Me))return new Date;const V=new Date(R,ye-1,Me,0,0,0,0);return isNaN(V.getTime())?new Date:V},z=le=>{if(!le||isNaN(le.getTime()))return new Date().toISOString().split("T")[0];const fe=le.getFullYear(),Q=String(le.getMonth()+1).padStart(2,"0"),R=String(le.getDate()).padStart(2,"0");return`${fe}-${Q}-${R}`},J=(le,fe)=>{const Q=le.getFullYear(),R=le.getMonth(),ye=le.getDate();return new Date(Q,R,ye+fe,0,0,0,0)},H=v.useMemo(()=>{const le={};return u.forEach(fe=>{fe.id&&fe.name&&(le[fe.id]=fe.name)}),le},[u]),{register:pe,handleSubmit:Z,watch:K,reset:ce,control:B,setValue:se,formState:{errors:W}}=ud({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{const le=e.startDate.split("T")[0];ce({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:le,endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),q.current=le},[e,ce]);const de=e.productName??e.product_name??l??"",oe=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(oe){u.some(Q=>Q.id===oe)&&se("productId",oe,{shouldDirty:!1,shouldTouch:!1});return}if(!de)return;const le=u.find(fe=>fe.name.toLowerCase()===de.toLowerCase());le&&se("productId",le.id,{shouldDirty:!1,shouldTouch:!1})},[u,oe,de,se]);const X=K("useAutoVotes"),ee=K("productId"),D=K("startDate"),q=v.useRef("");v.useEffect(()=>{if(D&&D!==q.current){q.current=D;const le=P(D),fe=J(le,14);se("endDate",z(fe),{shouldDirty:!0})}},[D,se]);const Te=v.useMemo(()=>!E||!ee?u:u.map(le=>le.id===ee?{...le,color_hex:E}:le),[u,E,ee]);v.useEffect(()=>{if(!ee)return;u.some(fe=>fe.id===ee)||se("productId","",{shouldDirty:!0,shouldTouch:!0})},[ee,u,se]),v.useEffect(()=>{if(ee&&u.length>0){const le=u.find(fe=>fe.id===ee);if(le){const fe=le.color_hex??null;x(fe),_(fe||"#2D4660"),C(null),b(!1)}}else ee||(x(null),_("#2D4660"),C(null),b(!1))},[ee,u]);const be=X?Math.max(1,Math.floor(t/2)):K("votesPerUser"),Ee=async le=>{try{if(E&&ee){I(!0);try{await bx(ee,{color_hex:E}),p&&p(),C(null),x(E)}catch(fe){console.error("Error updating product color:",fe)}finally{I(!1)}}r(le)}catch(fe){throw console.error("ERROR in handleFormSubmit:",fe),fe}};return a.jsxs("form",{onSubmit:Z(le=>Ee(le),le=>{}),children:[a.jsx(Cc,{control:B,name:"productId",render:({field:le})=>{const fe=Te.find(ze=>ze.id===le.value)??null,Q=le.value?H[le.value]??null:null,R=fe?null:Q??(de||null),ye=!!le.value,Me=(fe==null?void 0:fe.color_hex)||null,V=fe?Vn(fe.name,Me??null):null,Le=(V==null?void 0:V.background)||null;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(DT,{products:Te,value:le.value,onChange:ze=>{le.onChange(ze)},fallbackName:R,isLoading:d,error:m,disabled:d||Te.length===0,helperText:!d&&Te.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),ye&&a.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{const ze=Le||"#2D4660";_(ze),x(ze),b(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:Le||"#2D4660",borderColor:(V==null?void 0:V.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...pe("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),W.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...pe("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),W.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...pe("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),W.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...pe("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),W.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...pe("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",be," votes"]})]})]}),!X&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...pe("votesPerUser",{required:X?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),W.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(nt,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(Qi,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"button",onClick:async le=>{le.preventDefault(),le.stopPropagation(),K(),await Z(fe=>Ee(fe),fe=>{alert("Please fix form errors: "+JSON.stringify(fe))})()},children:"Save Changes"})]})]}),j&&ee&&(()=>{const le=Te.find(fe=>fe.id===ee);return le?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{b(!1),x(le.color_hex??null),_(le.color_hex??"#2D4660"),C(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:fe=>fe.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:fe=>{_(fe.target.value),x(fe.target.value)},ref:fe=>{fe&&j&&setTimeout(()=>fe.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!ee||!S)return;const fe=Te.find(R=>R.id===ee);if(!fe)return;if((fe.color_hex||null)===S){b(!1);return}C(S),x(S),b(!1)},disabled:T,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:T?a.jsx(El,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(or,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function SZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:j,onUpdateAzureDevOpsConfig:b,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:T,availableStates:I,availableAreaPaths:P,availableTags:z,previewFeatures:J,showPreviewModal:H,setShowPreviewModal:pe,onConfirmSync:Z,onReplaceAll:K,onUpdateVotingSession:ce,onFetchStatesForType:B,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:W,onFetchTypesAndStatesForAreaPath:de,onFetchTypesAndStatesForTags:oe,onFetchTypesAndAreaPathsForStates:X,suggestedFeatures:ee,otherSessions:D,onPromoteSuggestion:q,onMoveSuggestion:Te,onEditSuggestion:be,onDeleteSuggestion:Ee,adminPerspective:le="session",projectOptions:fe}){const Q=Bs(),{currentUser:R,currentSession:ye}=ba(),[Me,V]=v.useState(()=>j.project?j.project:fe[0]??""),[Le,ze]=v.useState(0);v.useEffect(()=>{j.project?V(j.project):fe.length>0?V(fe[0]):V("")},[j.project,fe]);const[dt,ft]=v.useState(!1),[$t,_t]=v.useState(!1),[Qt,M]=v.useState(!1),[ie,ge]=v.useState(!1),ke=v.useRef(null),[ve,je]=v.useState(!1),[Be,yt]=v.useState(!1),[bt,Tt]=v.useState(!1),nr=v.useRef(null),[Mt,nn]=v.useState(null),[yr,Ft]=v.useState(!1),[vn,qt]=v.useState(null),[_r,Ze]=v.useState(null),[It,Zt]=v.useState(""),[Yt,Br]=v.useState(null),[vr,Es]=v.useState(!1),[Rr,Wr]=v.useState(null),[xr,xn]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[Cr,Jt]=v.useState(null),[qr,zt]=v.useState(!1),[$r,lr]=v.useState(null),[dr,Er]=v.useState(!1),[os,Jn]=v.useState(null),[Vr,As]=v.useState([]),[Mr,qs]=v.useState(!1),[sn,Dt]=v.useState([]),[an,fr]=v.useState(!1),[Hr,on]=v.useState(null),[wn,hs]=v.useState(null),[Ut,Xn]=v.useState(!1),[ae,Ne]=v.useState(!1),[Re,$e]=v.useState(null),[qe,_e]=v.useState(""),[ht,pt]=v.useState(!1),[gt,Oe]=v.useState(!1),[cr,Ar]=v.useState("#2D4660"),Pr=v.useMemo(()=>{const re={};return sn.forEach(Ue=>{Ue.id&&Ue.name&&(re[Ue.id]=Ue.name)}),re},[sn]),Ct=v.useMemo(()=>{const re={};return sn.forEach(Ue=>{Ue.id&&Ue.color_hex&&(re[Ue.id]=Ue.color_hex)}),re},[sn]),Rt=v.useMemo(()=>Un({...x,product_id:x.product_id??(ye==null?void 0:ye.product_id)??x.productId??null,product_name:null},Pr),[x,ye,Pr]),sr=v.useMemo(()=>{const re=x.product_id??x.productId??null;return re?Ct[re]??null:null},[x,Ct]),Or=v.useMemo(()=>Vn(Rt,sr),[Rt,sr]),na=v.useRef(null);v.useEffect(()=>{(async()=>{if(!R)return;const Ue=await Pi(R.id);yt(Ue);const{data:rt}=await Se.from("session_admins").select("session_id").eq("user_id",R.id).limit(1);Tt(rt&&rt.length>0)})()},[R]),v.useEffect(()=>{const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId)??null;if(!re){na.current=null,Dt([]),on(null);return}if(na.current===re)return;let Ue=!1;return(async()=>{fr(!0),on(null);try{const Pt=await Fa(re);if(Ue)return;Dt(Pt),na.current=re}catch(Pt){if(Ue)return;console.error("Error loading products for admin dashboard:",Pt),qa!=null&&qa(Pt)?on("Products are not configured yet. Please create the `products` table in Supabase."):on("Unable to load products. Please try again."),Dt([]),na.current=null}finally{Ue||fr(!1)}})(),()=>{Ue=!0}},[R==null?void 0:R.tenant_id,R==null?void 0:R.tenantId]);const sa=v.useCallback(async()=>{if(wn){Xn(!0);try{await tE(wn.id),Dt(re=>re.filter(Ue=>Ue.id!==wn.id)),hs(null)}catch(re){console.error("Error deleting product from admin dashboard:",re),on("Failed to delete product. Please try again.")}finally{Xn(!1)}}},[wn]),uo=v.useCallback(re=>{const Ue=re==null?void 0:re.trim();if(Ue){if(V(Ue),Ue!==(j.project||"")){const rt={...j,project:Ue};b(rt)}ze(rt=>rt+1)}},[j,b]),{register:Kr,handleSubmit:Ii,reset:ka}=ud({defaultValues:{reason:"",details:""}}),{control:bn,handleSubmit:Et,reset:ln,register:Na,formState:{errors:Fr}}=ud({defaultValues:{reason:"",details:""}}),Vs=x.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):ki(x.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),jn=v.useMemo(()=>{const re=rt=>{const Pt=rt.type==="reopen",Lr=rt.createdAt||null,ir=rt.actorName||"Admin",kn=Lr?` ${ha(Lr)}`:"";return{id:rt.id,type:rt.type,reason:rt.reason,details:rt.details??null,title:Pt?`Reopened${kn} by ${ir}`:`Ended early${kn} by ${ir}`,description:`${rt.reason}${rt.details?": "+rt.details:""}`,iconBgClass:Pt?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Pt?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Pt?"text-[#1E5461]":"text-[#C89212]",textColorClass:Pt?"text-[#1E5461]":"text-[#6A4234]"}};if(Vr.length>0)return Vr.map(rt=>re(rt));const Ue=[];return x.reopenReason&&Ue.push({id:"fallback-reopen",sessionId:(ye==null?void 0:ye.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&Ue.push({id:"fallback-ended-early",sessionId:(ye==null?void 0:ye.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),Ue.map(rt=>re(rt))},[Vr,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,ye==null?void 0:ye.id]);v.useEffect(()=>{jn.length<=2&&qs(!1)},[jn.length]);const fi=v.useCallback(async()=>{if(!(ye!=null&&ye.id)){As([]);return}try{const re=await wR(ye.id);As(re)}catch(re){console.error("Error loading session status notes:",re)}},[ye==null?void 0:ye.id]);v.useEffect(()=>{fi()},[fi]);const Hs=v.useCallback(async re=>{if(ye!=null&&ye.id)try{const Ue=await bR({session_id:ye.id,type:re.type,reason:re.reason,details:re.details??null,actor_id:re.actorId??null,actor_name:re.actorName||"Admin"});As(rt=>{const Pt=rt.findIndex(Lr=>Lr.id===Ue.id);if(Pt!==-1){const Lr=[...rt];return Lr[Pt]=Ue,Lr}return[Ue,...rt]})}catch(Ue){console.error("Error logging session status note:",Ue)}},[ye==null?void 0:ye.id]);v.useEffect(()=>{Rr&&(xn({title:Rr.title,summary:Rr.summary??"",whatWouldItDo:Rr.whatWouldItDo??"",howWouldItWork:Rr.howWouldItWork??""}),Jt(null))},[Rr]),v.useEffect(()=>{_r&&D.length>0?Zt(D[0].id):Zt(""),Br(null)},[_r,D]);const Di=re=>{const Ue=re.productId&&re.productId.trim()!==""?re.productId:null,rt=Ue&&sn.find(Lr=>Lr.id===Ue)||null,Pt={...x,title:re.title,goal:re.goal,votesPerUser:re.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(re.votesPerUser),useAutoVotes:re.useAutoVotes,startDate:new Date(re.startDate).toISOString(),endDate:new Date(re.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(rt==null?void 0:rt.id)??null,product_name:null};ce(Pt),ft(!1)},Sn=re=>{var Pt,Lr;const Ue=new Date().toISOString(),rt={...x,originalEndDate:x.endDate,endDate:Ue,isActive:!1,endedEarlyBy:(R==null?void 0:R.name)||"Admin",endedEarlyReason:re.reason,endedEarlyDetails:(Pt=re.details)!=null&&Pt.trim()?re.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};ce(rt),Hs({type:"ended-early",reason:re.reason,details:(Lr=re.details)!=null&&Lr.trim()?re.details.trim():null,actorName:(R==null?void 0:R.name)||"Admin",actorId:(R==null?void 0:R.id)??null}),_t(!1),ka()},ms=re=>{var Pt,Lr;const Ue=new Date;Ue.setDate(Ue.getDate()+7);const rt={...x,endDate:Ue.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:re.reason,reopenDetails:(Pt=re.details)!=null&&Pt.trim()?re.details.trim():null,reopenedBy:(R==null?void 0:R.name)||"Admin",reopenedAt:new Date().toISOString()};ce(rt),Hs({type:"reopen",reason:re.reason,details:(Lr=re.details)!=null&&Lr.trim()?re.details.trim():null,actorName:(R==null?void 0:R.name)||"Admin",actorId:(R==null?void 0:R.id)??null}),M(!1),ln()},ps=async(re,Ue)=>{const rt={...j,organization:re,project:Ue};b(rt),T()},Ri=re=>{Wr(re)},Ks=async()=>{if(!Rr)return;const re=xr.title.trim();if(!re){Jt("Title is required.");return}zt(!0),Jt(null);try{await be(Rr.id,{title:re,summary:xr.summary.trim()?xr.summary.trim():null,whatWouldItDo:xr.whatWouldItDo.trim()?xr.whatWouldItDo.trim():null,howWouldItWork:xr.howWouldItWork.trim()?xr.howWouldItWork.trim():null}),Wr(null)}catch(Ue){console.error("Error updating suggestion:",Ue),Jt("Failed to update the suggestion. Please try again.")}finally{zt(!1)}},gs=async()=>{if(_r){if(!It){Br("Please select a session.");return}Es(!0),Br(null);try{await Te(_r.id,It),Ze(null)}catch(re){console.error("Error moving suggestion:",re),Br("Failed to move the suggestion. Please try again.")}finally{Es(!1)}}},fo=async()=>{if(Mt){Ft(!0),qt(null);try{await q(Mt.id),nn(null)}catch(re){console.error("Error promoting suggestion:",re),qt("Failed to move the suggestion into the current session.")}finally{Ft(!1)}}},ia=async()=>{if($r){Er(!0),Jn(null);try{await Ee($r.id),lr(null)}catch(re){console.error("Error deleting suggestion:",re),Jn("Failed to delete the suggestion. Please try again.")}finally{Er(!1)}}},$i=v.useCallback(()=>{ft(!1),i()},[i]);return v.useEffect(()=>{if(!ie)return;const re=Ue=>{ke.current&&!ke.current.contains(Ue.target)&&ge(!1)};return document.addEventListener("mousedown",re),document.addEventListener("touchstart",re,{passive:!0}),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re)}},[ie]),v.useEffect(()=>{if(!ve)return;const re=Ue=>{nr.current&&!nr.current.contains(Ue.target)&&je(!1)};return document.addEventListener("mousedown",re),document.addEventListener("touchstart",re,{passive:!0}),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re)}},[ve]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Q("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(fp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),R&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[R.name,Be&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!Be&&bt&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:ke,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&a.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(ts,{className:"mr-2 h-4 w-4"}),"Vote!"]}),a.jsxs("button",{onClick:()=>Q(le==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[le==="system"?a.jsx(Wn,{className:"mr-2 h-4 w-4"}):a.jsx(is,{className:"mr-2 h-4 w-4"}),le==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>Q("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(is,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Hn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>ge(!ie),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),ie&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[x.isActive&&a.jsxs("button",{onClick:()=>{ge(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{ge(!1),Q(le==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[le==="system"?a.jsx(Wn,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(is,{className:"h-4 w-4 mr-2 text-gray-700"}),le==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{ge(!1),Q("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(is,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!ki(x.endDate))&&a.jsxs("button",{onClick:()=>{ge(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(mh,{className:"h-4 w-4 mr-2 text-gray-700"}),ki(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{ge(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsxs("button",{onClick:()=>{ge(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Rt?"3.5rem":"0"},children:[Rt&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Or.background,color:Or.text,borderColor:Or.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&Ne(!0)},onMouseLeave:()=>Ne(!1),onClick:async re=>{const Ue=x.product_id||x.productId;if(!Ue)return;re.stopPropagation();const rt=sn.find(Pt=>Pt.id===Ue);rt&&($e(rt),_e(rt.name||""),setEditingProductColor(rt.color_hex||null),Ar(rt.color_hex||"#2D4660"))},children:[a.jsx(c0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Rt}),(x.product_id||x.productId)&&ae&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx($E,{className:"h-4 w-4",style:{color:Or.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:nr,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!ki(x.endDate))&&a.jsxs(nt,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(mh,{className:"h-4 w-4 mr-2"}),ki(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(nt,{variant:"primary",onClick:()=>ft(!0),className:"flex items-center",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>je(!ve),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),ve&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!ki(x.endDate))&&a.jsxs("button",{onClick:()=>{je(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(mh,{className:"h-4 w-4 mr-2 text-gray-700"}),ki(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{je(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),an&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),Hr&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:Hr}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[ha(x.startDate)," - ",ha(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Kt,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pm,{className:"h-4 w-4 mr-1 text-gray-600"}),Vs]}),(x.isActive||ki(x.endDate))&&a.jsx(nt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?_t(!0):(ln(),M(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(FE,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),a.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),jn.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Mr?a.jsx(Yu,{className:"h-2.5 w-2.5"}):a.jsx(Bn,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>qs(re=>!re),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Mr?"Show Less":"Show More"})]})]}),jn.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:jn.slice(0,Mr?jn.length:2).map(re=>{const Ue=re.type==="reopen"?El:Kt;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${re.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${re.iconBgClass} ${re.iconBorderClass} border rounded-lg`,children:a.jsx(Ue,{className:`h-3.5 w-3.5 ${re.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:re.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:re.description})]})]},re.id)})}),jn.length>2&&!Mr&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:dC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),j.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[a.jsx(or,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",j.organization]}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(fC,{options:fe,value:Me,onChange:uo,variant:"green"})})]}),j.lastSyncTime&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",ha(j.lastSyncTime)]})]})]}),a.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),a.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[a.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),a.jsx(bZ,{config:j,onUpdateConfig:b,onPreview:S,isFetching:E,availableStates:I,availableAreaPaths:P,availableTags:z,previewFeatures:J,showPreviewModal:H,onFetchStatesForType:B,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:W,onFetchTypesAndStatesForAreaPath:de,onFetchTypesAndStatesForTags:oe,onFetchTypesAndAreaPathsForStates:X,resetSignal:Le})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:dC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(nt,{variant:"primary",onClick:()=>ps("newmill",Me||fe[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx(El,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[ee.length," ",ee.length===1?"suggestion":"suggestions"]})]}),ee.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:ee.map(re=>{const Ue=re.requester_name||re.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:re.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:Ue}),re.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${re.requester_email}`,className:"text-[#1E5461] hover:underline",children:re.requester_email}),")"]})," on ",ha(re.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(nt,{variant:"primary",onClick:()=>{qt(null),nn(re)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(WM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(nt,{variant:"secondary",onClick:()=>{D.length>0&&Ze(re)},disabled:D.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Zr,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(nt,{variant:"secondary",onClick:()=>Ri(re),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(rd,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(nt,{variant:"danger",onClick:()=>{Jn(null),lr(re)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Qi,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),D.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Kt,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.summary&&re.summary.length>0?re.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_x,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.whatWouldItDo&&re.whatWouldItDo.length>0?re.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(zF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.howWouldItWork&&re.howWouldItWork.length>0?re.howWouldItWork:"No implementation details provided."})]})]})]})},re.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(nt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx(Bn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),a.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(re=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:a.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[re.title,re.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(hp,{id:re.azureDevOpsId,url:re.azureDevOpsUrl||""})})]})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:a.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:re.description||a.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:re.epic&&a.jsx(Vd,{name:re.epic})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:re.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:re.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:a.jsx("div",{className:"text-gray-600",children:re.areaPath&&typeof re.areaPath=="string"&&re.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words",children:re.areaPath}):a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:re.tags&&re.tags.length>0?a.jsxs("div",{className:"flex flex-wrap gap-1",children:[re.tags.slice(0,3).map((Ue,rt)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:Ue},rt)),re.tags.length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",re.tags.length-3]})]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:re.votes}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(re),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(rd,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(re.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(Qi,{className:"h-5 w-5"})})]})]},re.id))})]})})]}),a.jsx(mn,{isOpen:Mt!==null,onClose:()=>{yr||(nn(null),qt(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:Mt==null?void 0:Mt.title})," into the current session so it can be managed and voted on."]}),vn&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:vn}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{yr||(nn(null),qt(null))},disabled:yr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:fo,disabled:yr,children:yr?"Moving...":"Move to Current Session"})]})]})}),a.jsx(mn,{isOpen:_r!==null,onClose:()=>{vr||(Ze(null),Br(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:_r==null?void 0:_r.title}),"."]}),D.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:It,onChange:re=>Zt(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:vr,children:D.map(re=>a.jsxs("option",{value:re.id,children:[re.title," (Starts ",ha(re.startDate),")"]},re.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Yt&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Yt}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{vr||(Ze(null),Br(null))},disabled:vr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:gs,disabled:vr||D.length===0,children:vr?"Moving...":"Move to Session"})]})]})}),a.jsx(mn,{isOpen:Rr!==null,onClose:()=>{qr||(Wr(null),Jt(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:xr.title,onChange:re=>xn(Ue=>({...Ue,title:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:xr.summary,onChange:re=>xn(Ue=>({...Ue,summary:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:xr.whatWouldItDo,onChange:re=>xn(Ue=>({...Ue,whatWouldItDo:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:xr.howWouldItWork,onChange:re=>xn(Ue=>({...Ue,howWouldItWork:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),Cr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Cr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{qr||(Wr(null),Jt(null))},disabled:qr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:Ks,disabled:qr,children:qr?"Saving...":"Save Changes"})]})]})}),a.jsx(mn,{isOpen:$r!==null,onClose:()=>{dr||(lr(null),Jn(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:$r==null?void 0:$r.title}),"? This action cannot be undone."]}),os&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:os}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{dr||(lr(null),Jn(null))},disabled:dr,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:ia,disabled:dr,children:dr?"Deleting...":"Delete"})]})]})}),a.jsx(mn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(mC,{onSubmit:re=>{t(re),d(!1)},onCancel:()=>d(!1)})}),a.jsx(mn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(mC,{feature:m,onSubmit:re=>{r({...m,...re}),f(null)},onCancel:()=>f(null)})}),a.jsx(mn,{isOpen:dt,onClose:()=>ft(!1),title:"Edit Session Settings",children:a.jsx(jZ,{session:x,featureCount:e.length,onSubmit:Di,onCancel:()=>ft(!1),onRequestDeleteSession:$i,isDeletingSession:l,productName:Rt,products:sn,isLoadingProducts:an,productError:Hr,onRequestDeleteProduct:re=>hs(re),onProductColorUpdated:async()=>{const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId)??null;if(re)try{const Ue=await Fa(re);Dt(Ue)}catch(Ue){console.error("Error refreshing products after color update:",Ue)}}})}),wn&&a.jsxs(mn,{isOpen:!0,onClose:()=>hs(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:wn.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(nt,{variant:"secondary",onClick:()=>hs(null),disabled:Ut,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:sa,disabled:Ut,children:Ut?"Deleting...":"Delete"})]})]}),a.jsx(wZ,{isOpen:H,onClose:()=>pe(!1),previewFeatures:J,onConfirmSync:Z,onReplaceAll:K}),a.jsx(mn,{isOpen:Qt,onClose:()=>{M(!1),ln()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:Et(ms),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(Cc,{control:bn,name:"reason",rules:{required:"Please select a reason"},render:({field:re})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(fC,{options:xZ,value:re.value,onChange:re.onChange,placeholder:"Select a reason..."}),Fr.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:Fr.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Na("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{M(!1),ln()},children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(mn,{isOpen:$t,onClose:()=>{_t(!1),ka()},title:"End Session Early",children:a.jsxs("form",{onSubmit:Ii(Sn),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...Kr("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Kr("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{_t(!1),ka()},children:"Cancel"}),a.jsx(nt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Re&&a.jsx(mn,{isOpen:!0,onClose:()=>{$e(null),_e(""),setEditingProductColor(null),Oe(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:qe,onChange:re=>_e(re.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Ar(editingProductColor||"#2D4660"),Oe(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&a.jsx("img",{src:IT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{$e(null),_e(""),setEditingProductColor(null),Oe(!1)},disabled:ht,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(Re!=null&&Re.id)||!qe.trim())){pt(!0);try{await bx(Re.id,{name:qe.trim(),color_hex:editingProductColor});const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId);if(re){const Ue=await Fa(re);Dt(Ue.sort((rt,Pt)=>rt.name.localeCompare(Pt.name)))}$e(null),_e(""),setEditingProductColor(null),Oe(!1),onProductColorUpdated&&onProductColorUpdated()}catch(re){console.error("Error updating product:",re),alert("Failed to update product. Please try again.")}finally{pt(!1)}}},disabled:ht||!qe.trim(),children:ht?"Updating...":"Update Product"})]})]})}),gt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Oe(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:re=>re.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:cr,onChange:re=>Ar(re.target.value),ref:re=>{re&&gt&&setTimeout(()=>re.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(cr),Oe(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:cr,height:"260px",minWidth:"100px"},children:[a.jsx(or,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const hC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],kZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},NZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},_Z=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],RT=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,$T=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},MT=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",FT=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",CZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},EZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Qu=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",ch=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},AZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function fp({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const nt=it.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class mn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl",hideCloseButton:l=!1,hideHeader:u=!1}=this.props;return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:l?void 0:r,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[u?a.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ls,{className:"h-5 w-5"})})}):a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(_x,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!l&&a.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsx("div",{className:u?"-mt-4":"mt-2 overflow-visible",children:s})]})]})}):null}}const Vd=it.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Qu(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(PF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),a.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),hp=it.memo(function({id:t,url:r}){return t?a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[a.jsx(rF,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),PZ=it.memo(function({endDate:t}){const r=$T(t),n=MT(r),s=FT(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",ha(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function OZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(AZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(kF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const xh=it.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(Qi,{className:"h-5 w-5"}):a.jsx(Kt,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),TZ=it.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),j=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx(hp,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(or,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:j,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&a.jsx(Vd,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(ns,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(JM,{className:"h-6 w-6"})})]})})]})})]})})});function IZ({feature:e,onClose:t}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function DZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=Bs(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const _=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",_),document.addEventListener("touchstart",_,{passive:!0}),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[f]);const x=v.useMemo(()=>[...e].sort((_,E)=>E.votes-_.votes),[e]),j=v.useMemo(()=>x.slice(0,10).map(_=>({name:_.title,votes:_.votes,id:_.id})),[x]),b=$T(l.endDate),S=MT(b);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(fp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>m("/sessions")}),a.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Ed,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:ki(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),a.jsxs("div",{ref:y,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(On,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(nt,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs(nt,{variant:"gray",onClick:d,className:"flex items-center",children:[a.jsx(Hn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(Qi,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):ki(l.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&a.jsx("div",{className:`${FT(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-4 w-4 mr-2 ${S}`}),a.jsx("span",{className:`${S} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${ha(l.endDate)}`})]})}),a.jsx("div",{className:"h-72",children:a.jsx(nB,{width:"100%",height:"100%",children:a.jsxs(YQ,{data:j,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx(vT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(xT,{}),a.jsx(IK,{}),a.jsx(hT,{dataKey:"votes",fill:"#3B82F6",children:j.map((_,E)=>a.jsx(Qw,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((_,E)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),a.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[_.title,_.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(hp,{id:_.azureDevOpsId,url:_.azureDevOpsUrl||""})})]}),a.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:_.epic&&a.jsx(Vd,{name:_.epic})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:_.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(_.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:_.voters.length===0,children:[a.jsx(is,{className:"h-4 w-4 mr-1"}),_.voters.length," ",_.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(_.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:_.votes===0,children:"Reset Votes"})})]},_.id))})]})})]}),s&&a.jsx(IZ,{feature:e.find(_=>_.id===s),onClose:()=>i(null)})]})}function RZ({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(or,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(nt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function LT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(is,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Wn,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:a.jsx(Ss,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,j=!y;return a.jsxs("button",{onClick:y,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,a.jsx("span",{children:f})]},m)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function mC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=ud({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:hC[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:hC.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(nt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function $Z({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,_)=>S+_,0),j=u.filter(S=>l[S.id]>0),b=RT(d,m,f);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(fp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&a.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),b&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b.className}`,children:b.label})]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(On,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(nt,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(Hn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(or,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[j.map(S=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(Vd,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx(ME,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(nt,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx(El,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(xh,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const MZ=it.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:j,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:_}){const[E,C]=v.useState([...t]),[T,I]=v.useState(!1),[P,z]=v.useState("idle"),[J,H]=v.useState(!1),[pe,Z]=v.useState({}),[K,ce]=v.useState(!0),[B,se]=v.useState(!1),[W,de]=v.useState(!1),[oe,X]=v.useState(""),[ee,D]=v.useState(""),[q,Te]=v.useState(""),[be,Ee]=v.useState(""),[le,fe]=v.useState(!1),[Q,R]=v.useState(null),[ye,Me]=v.useState(!1),V=v.useRef(null),Le=RT(b,S,_);v.useEffect(()=>{if(!B)return;const ke=ve=>{V.current&&!V.current.contains(ve.target)&&se(!1)};return document.addEventListener("mousedown",ke),document.addEventListener("touchstart",ke,{passive:!0}),()=>{document.removeEventListener("mousedown",ke),document.removeEventListener("touchstart",ke)}},[B]),v.useEffect(()=>{C([...t])},[t]),v.useEffect(()=>{async function ke(){if(!r||!y){ce(!1);return}try{const je=(await Ao(y)).filter(Be=>Be.user_id===r.id);if(je.length>0){const Be={};je.forEach(yt=>{Be[yt.feature_id]=yt.vote_count}),Z(Be),H(!0)}else H(!1),Z({})}catch(ve){console.error("Error checking existing votes:",ve),H(!1)}finally{ce(!1)}}ke()},[r,y]);const ze=v.useCallback(async()=>{if(!(!r||!y))try{await SR(y,r.id),H(!1),Z({})}catch(ke){console.error("Error changing votes:",ke),alert("Failed to reset votes. Please try again.")}},[r,y]),dt=v.useCallback(()=>{T||(I(!0),z("fadeOut"),setTimeout(()=>{z("rearranging"),setTimeout(()=>{C(EZ(t)),z("fadeIn"),setTimeout(()=>{z("idle"),I(!1)},400)},200)},400))},[t,T]),ft=v.useCallback(async ke=>{const ve=t.find(je=>je.id===ke);if(!(!ve||!r))try{await ER({session_id:y,feature_id:ke,feature_title:ve.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(je){throw console.error("Error submitting info request:",je),alert("Failed to submit request. Please try again."),je}},[t,r,y]),$t=v.useCallback(()=>{R(null),Me(!1),de(!0)},[]),_t=v.useCallback(()=>{le||(de(!1),R(null),Me(!1),X(""),D(""),Te(""),Ee(""))},[le]),Qt=v.useCallback(async ke=>{ke.preventDefault();const ve=oe.trim(),je=ee.trim(),Be=q.trim(),yt=be.trim();if(!ve){R("Please provide a brief title for your suggestion.");return}if(!y){R("Unable to link this suggestion to the current session.");return}try{fe(!0),R(null);const bt=await AR({session_id:y,title:ve,description:je||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:Be||null,howWouldItWork:yt||null});j==null||j(bt),Me(!0),X(""),D(""),Te(""),Ee("")}catch(bt){console.error("Error submitting feature suggestion:",bt),R("We were unable to submit your suggestion. Please try again in a moment.")}finally{fe(!1)}},[ee,oe,q,be,r,y,le,j]);if(!r)return null;if(K)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(J)return a.jsx($Z,{currentUser:r,votingSession:m,onChangeVotes:ze,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:pe,features:t,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:_});const M=p-s,ie=M===0,ge=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(fp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&a.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),Le&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Le.className}`,children:Le.label})]})]})]}),a.jsxs("div",{ref:V,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(nt,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(On,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(nt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs(nt,{variant:"gray",onClick:x,className:"flex items-center",children:[a.jsx(Hn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>se(!B),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),B&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{se(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{se(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{se(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.goal})]}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsx(PZ,{endDate:m.endDate}),a.jsxs("div",{className:"flex items-center mt-3",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),a.jsxs("p",{className:"text-gray-700",children:["You have ",a.jsxs("span",{className:"font-bold text-[#2d4660]",children:[M," / ",p]})," votes remaining"]})]})]})]})}),!ge&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(Pm,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",ki(m.endDate)?"closed":"not yet open",".",ki(m.endDate)?` Voting ended on ${ha(m.endDate)}.`:` Voting will open on ${ha(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(nt,{variant:"gold",onClick:$t,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(_x,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(OZ,{isShuffling:T,onShuffle:dt})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(ke=>{const ve=n[ke.id]||0;return a.jsx(TZ,{feature:ke,userVoteCount:ve,remainingVotes:M,votingIsActive:ge,onVote:i,isShuffling:T,shuffleStage:P,currentUser:r,onRequestInfo:ft},ke.id)})}),s>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[a.jsxs("div",{children:[!ie&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(ME,{className:"h-5 w-5 text-[#C89212] mr-2"}),a.jsxs("span",{className:"text-gray-700",children:["You still have ",a.jsx("span",{className:"font-semibold text-[#C89212]",children:M})," votes remaining."]})]}),ie&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(or,{className:"h-5 w-5 text-[#1E5461] mr-2"}),a.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${ie?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!ie,children:"Submit Votes"})]})}),a.jsx(mn,{isOpen:W,onClose:_t,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:Qt,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),Q&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Q}),ye&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:oe,onChange:ke=>X(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:le||ye})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:ee,onChange:ke=>D(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:le||ye})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:q,onChange:ke=>Te(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:le||ye})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:be,onChange:ke=>Ee(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:le||ye})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{type:"button",variant:"secondary",onClick:_t,disabled:le,children:"Close"}),!ye&&a.jsxs(nt,{type:"submit",variant:"primary",disabled:le,className:"flex items-center",children:[le&&a.jsx(El,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function Mv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=ba(),p=Bs(),y=async()=>{try{await Se.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const ae=new URLSearchParams(window.location.search),Ne=ae.has("code")||ae.has("error"),Re=localStorage.getItem("voting_system_current_session");!n&&!Ne&&!Re&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const ae=new URLSearchParams(window.location.search);return ae.has("code")||ae.has("error")},[]),[j,b]=v.useState([]),[S,_]=v.useState(!0),[E,C]=v.useState(_Z),[T,I]=v.useState(r?"results":t||x?"admin":"voting"),[P,z]=v.useState(t||x||r),[J,H]=v.useState(null),[pe,Z]=v.useState(!1),[K,ce]=v.useState(null),[B,se]=v.useState({...kZ,votesPerUser:e}),[W,de]=v.useState(NZ),[oe,X]=v.useState(aC()),[ee,D]=v.useState([]),[q,Te]=v.useState([]),[be,Ee]=v.useState([]),[le,fe]=v.useState(!1),[Q,R]=v.useState(null),[ye,Me]=v.useState(null),[V,Le]=v.useState(!1),[ze,dt]=v.useState([]),[ft,$t]=v.useState([]),[_t,Qt]=v.useState(d?"system":"session"),[M,ie]=v.useState({}),[ge,ke]=v.useState(0),[ve,je]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Be,yt]=v.useState(!1),bt=v.useRef(!1),Tt=v.useRef(!1),nr=v.useRef(null),Mt=v.useMemo(()=>B.useAutoVotes?Math.max(1,Math.floor(j.length/2)):B.votesPerUser,[B.useAutoVotes,B.votesPerUser,j.length]),nn=v.useRef(!1);v.useEffect(()=>{if(nn.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const Ne=new URLSearchParams(window.location.search),Re=Ne.has("code")||Ne.has("error");if(Re&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Re||bt.current)){if(!n){console.log("No session available yet, waiting...");return}nn.current=!0,bt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const qe=await uZ();if(qe){const _e=new Date(Date.now()+qe.expiresIn*1e3).toISOString(),ht={...W,accessToken:qe.accessToken,refreshToken:qe.refreshToken,tokenExpiresAt:_e,enabled:!0,clientId:oi.clientId,tenantId:oi.tenantId};await ol(n.id,ht),de(ht);const pt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",pt),p(pt,{replace:!0})}}catch(qe){console.error("OAuth callback error:",qe),R("Failed to authenticate with Azure DevOps");const _e="/admin";sessionStorage.removeItem("oauth_return_path"),p(_e,{replace:!0})}finally{nn.current=!1}}})()},[n,p,W]);const yr=v.useCallback(ae=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),ae&&sessionStorage.setItem("oauth_action",ae),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),dZ()},[]),Ft=v.useCallback(async ae=>{if(!ae.accessToken||!ae.refreshToken||!ae.tokenExpiresAt)throw new Error("Not authenticated");if(cZ(ae.tokenExpiresAt)){const Ne=await tZ(ae.refreshToken),Re=new Date(Date.now()+Ne.expiresIn*1e3).toISOString(),$e={...ae,accessToken:Ne.accessToken,tokenExpiresAt:Re};return n&&(await ol(n.id,$e),de($e)),Ne.accessToken}return ae.accessToken},[n]),vn=v.useCallback(async()=>{if(!n)return[];const[ae,Ne]=await Promise.all([ua(n.id),Ao(n.id)]);return ae.map(Re=>{const qe=Ne.filter(ht=>ht.feature_id===Re.id).map(ht=>({userId:ht.user_id,name:ht.user_name,email:ht.user_email,voteCount:ht.vote_count})),_e=qe.reduce((ht,pt)=>ht+pt.voteCount,0);return{id:Re.id,title:Re.title,description:Re.description,epic:Re.epic,state:Re.state,areaPath:Re.area_path,tags:Re.tags||[],azureDevOpsId:Re.azure_devops_id,azureDevOpsUrl:Re.azure_devops_url,votes:_e,voters:qe}})},[n]),qt=v.useCallback(async()=>{if(n)try{const ae=await cS(n.id);dt(ae)}catch(ae){console.error("Error loading feature suggestions:",ae)}},[n]),_r=v.useCallback(async()=>{if(n)try{const ae=await Fo(),Ne=new Date,Re=ae.filter($e=>$e.id!==n.id&&new Date($e.start_date)>Ne).map($e=>({id:$e.id,title:$e.title,startDate:$e.start_date}));$t(Re)}catch(ae){console.error("Error loading future sessions:",ae)}},[n]),Ze=v.useCallback(ae=>{dt(Ne=>[ae,...Ne]),qt(),_r()},[qt,_r]),It=v.useCallback(async(ae,Ne)=>{await PR(ae,Ne),await qt()},[qt]),Zt=v.useCallback(async ae=>{await OR(ae),await qt()},[qt]),Yt=v.useCallback(async(ae,Ne)=>{await TR(ae,Ne),await qt()},[qt]),Br=v.useCallback(async ae=>{await IR(ae);const Ne=await vn();b(Ne),await qt()},[vn,qt]);v.useEffect(()=>{async function ae(){if(n&&!(Tt.current&&nr.current===n.id)){nr.current=n.id,Tt.current=!0;try{_(!0);const[Ne,Re]=await Promise.all([ua(n.id),Ao(n.id)]),$e=Ne.map(_e=>{const pt=Re.filter(Oe=>Oe.feature_id===_e.id).map(Oe=>({userId:Oe.user_id,name:Oe.user_name,email:Oe.user_email,voteCount:Oe.vote_count})),gt=pt.reduce((Oe,cr)=>Oe+cr.voteCount,0);return{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic,state:_e.state,areaPath:_e.area_path,tags:_e.tags||[],azureDevOpsId:_e.azure_devops_id,azureDevOpsUrl:_e.azure_devops_url,votes:gt,voters:pt}});b($e),se({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const qe=await NR(n.id);de(qe?{organization:qe.organization||"newmill",project:qe.project||"Product",accessToken:qe.access_token,refreshToken:qe.refresh_token,tokenExpiresAt:qe.token_expires_at,tenantId:qe.tenant_id,clientId:qe.client_id,enabled:qe.enabled,workItemType:qe.work_item_type||"Feature",query:qe.query,lastSyncTime:qe.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const _e=await cS(n.id);dt(_e)}catch(_e){console.error("Error loading feature suggestions:",_e)}}catch(Ne){console.error("Error loading data:",Ne),b([])}finally{_(!1),Tt.current=!1}}}ae()},[n==null?void 0:n.id]),v.useEffect(()=>{async function ae(){const Ne=aC();if(X(Ne),D([]),Te([]),Ee([]),W.enabled&&W.accessToken&&W.project)try{const Re=await Ft(W),$e={...W,accessToken:Re},[qe,_e,ht,pt]=await Promise.all([sZ($e).catch(gt=>(console.error("Error loading Azure DevOps projects:",gt),Ne)),rC($e),ax($e),nC($e)]);X(qe.length>0?qe:Ne),D(_e),Te(ht),Ee(pt)}catch(Re){console.error("Error loading filter options:",Re),X(Ne)}}ae()},[W.enabled,W.accessToken,W.project,Ft]);const vr=v.useCallback(async(ae,Ne)=>{if(!(!W.enabled||!W.accessToken))try{const Re=await Ft(W),$e={...W,accessToken:Re},qe=ae?await TT($e,ae):await rC($e);D(qe)}catch(Re){console.error("Error loading states for work item type:",Re)}},[W,Ft]),Es=v.useCallback(async ae=>{if(!W.enabled||!W.accessToken)return{types:[],states:[]};try{const Ne=await Ft(W),Re={...W,accessToken:Ne};return await iZ(Re,ae)}catch(Ne){return console.error("Error fetching types and states for area path:",Ne),{types:[],states:[]}}},[W,Ft]),Rr=v.useCallback(async ae=>{if(!W.enabled||!W.accessToken)return{types:[],areaPaths:[]};try{const Ne=await Ft(W),Re={...W,accessToken:Ne},$e=await nZ(Re,ae);return $e.areaPaths.length>0&&Te($e.areaPaths),$e}catch(Ne){return console.error("Error fetching types and area paths for states:",Ne),{types:[],areaPaths:[]}}},[W,Ft]),Wr=v.useCallback(async ae=>{if(!W.enabled||!W.accessToken)return{types:[],states:[],areaPaths:[]};try{const Ne=await Ft(W),Re={...W,accessToken:Ne},$e=await aZ(Re,ae);return $e.states.length>0&&D($e.states),$e.areaPaths.length>0&&Te($e.areaPaths),$e}catch(Ne){return console.error("Error fetching types, states, and area paths for tags:",Ne),{types:[],states:[],areaPaths:[]}}},[W,Ft]),xr=v.useCallback(async(ae,Ne=[],Re=[])=>{if(!(!W.enabled||!W.accessToken))try{const $e=await Ft(W),qe={...W,accessToken:$e},_e=ae?await oZ(qe,ae,Ne,Re):await nC(qe);Ee(_e)}catch($e){console.error("Error loading tags for type, state, and area path:",$e)}},[W,Ft]),xn=v.useCallback(async(ae,Ne=[])=>{if(!(!W.enabled||!W.accessToken))try{const Re=await Ft(W),$e={...W,accessToken:Re},qe=ae?await rZ($e,ae,Ne):await ax($e);Te(qe)}catch(Re){console.error("Error loading area paths for type and state:",Re)}},[W,Ft]);v.useEffect(()=>{const ae=async()=>{const Re=CZ(B.startDate,B.endDate);if(B.isActive!==Re){const $e={...B,isActive:Re};se($e);try{n!=null&&n.id&&await lS(n.id,{title:$e.title,goal:$e.goal,votes_per_user:$e.votesPerUser,start_date:$e.startDate,end_date:$e.endDate,is_active:$e.isActive})}catch(qe){console.error("Error updating voting session status:",qe)}}};ae();const Ne=setInterval(ae,6e5);return()=>clearInterval(Ne)},[B,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",T==="admin"&&(qt(),_r())},[T,qt,_r]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Cr=v.useCallback(async(ae=W)=>{if(!ae.organization||!ae.project||!n){R("Organization and project name are required");return}try{fe(!0),R(null);const Ne=await Ft(ae),Re={...ae,accessToken:Ne},$e=await sC(Re),qe=iC($e);for(const Oe of qe){const Ar=(await ua(n.id)).find(Rt=>Rt.azure_devops_id===Oe.azureDevOpsId),Pr=ch(Oe.description),Ct=Qu(Pr,300);Ar?await Qg(Ar.id,{title:Oe.title,description:Ct,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl}):await Vf({session_id:n.id,title:Oe.title,description:Ct,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl})}const _e=await ua(n.id),ht=await Ao(n.id),pt=_e.map(Oe=>{const Ar=ht.filter(Ct=>Ct.feature_id===Oe.id).map(Ct=>({userId:Ct.user_id,name:Ct.user_name,email:Ct.user_email,voteCount:Ct.vote_count})),Pr=Ar.reduce((Ct,Rt)=>Ct+Rt.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:Pr,voters:Ar}});b(pt);const gt={...Re,lastSyncTime:new Date().toISOString()};await ol(n.id,gt),de(gt)}catch(Ne){console.error("Azure DevOps sync error:",Ne),Ne instanceof Error&&Ne.message==="Not authenticated"?(R("Please authenticate with Azure DevOps"),yr()):R("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{fe(!1)}},[W,n,Ft,yr]),Jt=v.useCallback(async()=>{if(!W.organization||!W.project){R("Organization and project name are required");return}try{fe(!0),R(null);const ae=await Ft(W),Ne={...W,accessToken:ae},Re=await sC(Ne),qe=iC(Re).map(_e=>({..._e,description:Qu(ch(_e.description),300)}));Me(qe),Le(!0)}catch(ae){console.error("Azure DevOps preview error:",ae),ae instanceof Error&&ae.message==="Not authenticated"?(R("Please authenticate with Azure DevOps"),yr()):R("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{fe(!1)}},[W,Ft,yr]),qr=v.useCallback(async()=>{if(!(!ye||!n))try{fe(!0);const ae=await ua(n.id);for(const _e of ae)await oS(_e.id);for(const _e of ye){const ht=ch(_e.description),pt=Qu(ht,300);await Vf({session_id:n.id,title:_e.title,description:pt,epic:_e.epic||null,state:_e.state,areaPath:_e.areaPath,tags:_e.tags,azure_devops_id:_e.azureDevOpsId,azure_devops_url:_e.azureDevOpsUrl})}const Ne=await ua(n.id),Re=await Ao(n.id),$e=Ne.map(_e=>{const pt=Re.filter(Oe=>Oe.feature_id===_e.id).map(Oe=>({userId:Oe.user_id,name:Oe.user_name,email:Oe.user_email,voteCount:Oe.vote_count})),gt=pt.reduce((Oe,cr)=>Oe+cr.voteCount,0);return{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic,state:_e.state,areaPath:_e.area_path,tags:_e.tags||[],azureDevOpsId:_e.azure_devops_id,azureDevOpsUrl:_e.azure_devops_url,votes:gt,voters:pt}});b($e);const qe={...W,lastSyncTime:new Date().toISOString()};await ol(n.id,qe),de(qe)}catch(ae){console.error("Azure DevOps replace all error:",ae),R("Failed to replace all features from Azure DevOps.")}finally{fe(!1),Me(null)}},[ye,n,W]),zt=v.useCallback(async ae=>{if(!(!ae||ae.length===0||!n))try{fe(!0);for(const _e of ae){const pt=(await ua(n.id)).find(cr=>cr.azure_devops_id===_e.azureDevOpsId),gt=ch(_e.description),Oe=Qu(gt,300);pt?await Qg(pt.id,{title:_e.title,description:Oe,epic:_e.epic||null,state:_e.state,areaPath:_e.areaPath,tags:_e.tags,azure_devops_id:_e.azureDevOpsId,azure_devops_url:_e.azureDevOpsUrl}):await Vf({session_id:n.id,title:_e.title,description:Oe,epic:_e.epic||null,state:_e.state,areaPath:_e.areaPath,tags:_e.tags,azure_devops_id:_e.azureDevOpsId,azure_devops_url:_e.azureDevOpsUrl})}const Ne=await ua(n.id),Re=await Ao(n.id),$e=Ne.map(_e=>{const pt=Re.filter(Oe=>Oe.feature_id===_e.id).map(Oe=>({userId:Oe.user_id,name:Oe.user_name,email:Oe.user_email,voteCount:Oe.vote_count})),gt=pt.reduce((Oe,cr)=>Oe+cr.voteCount,0);return{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic,state:_e.state,areaPath:_e.area_path,tags:_e.tags||[],azureDevOpsId:_e.azure_devops_id,azureDevOpsUrl:_e.azure_devops_url,votes:gt,voters:pt}});b($e);const qe={...W,lastSyncTime:new Date().toISOString()};await ol(n.id,qe),de(qe)}catch(Ne){console.error("Azure DevOps sync error:",Ne),R("Failed to sync features from Azure DevOps.")}finally{fe(!1),Me(null)}},[ye,n,W]),$r=v.useCallback(async()=>{if(n)try{const ae={organization:W.organization||"newmill",project:W.project||"Product",workItemType:W.workItemType||"Feature",query:W.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await ol(n.id,ae),de(ae),R(null)}catch(ae){console.error("Error disconnecting Azure DevOps:",ae),R("Failed to disconnect from Azure DevOps")}},[W,n]);v.useEffect(()=>{(async()=>{const Ne=sessionStorage.getItem("oauth_action");if(Ne&&!(!W.enabled||!W.accessToken))try{Ne==="preview"?await Jt():Ne==="sync"&&await Cr()}finally{sessionStorage.removeItem("oauth_action")}})()},[W.enabled,W.accessToken,Jt,Cr]);const lr=v.useCallback(()=>{z(!0),Qt(d?"system":"session"),I("admin")},[d]),dr=v.useCallback(()=>{z(!1),Qt(d?"system":"session"),I("voting")},[d]),Er=v.useCallback(()=>{z(!0),Qt("session"),t?T!=="admin"&&I("admin"):T!=="voting"&&I("voting")},[t,T]),os=v.useCallback(()=>{d&&(z(!0),Qt("system"),t?T!=="admin"&&I("admin"):T!=="voting"&&I("voting"))},[T,d,t]),Jn=v.useCallback(async ae=>{if(n)try{const Ne=await Vf({session_id:n.id,title:ae.title,description:ae.description,epic:ae.epic});b(Re=>[...Re,{id:Ne.id,title:Ne.title,description:Ne.description,epic:Ne.epic,votes:0,voters:[]}]),Z(!1)}catch(Ne){console.error("Error adding feature:",Ne),alert("Failed to add feature")}},[n]),Vr=v.useCallback(async ae=>{try{await Qg(ae.id,{title:ae.title,description:ae.description,epic:ae.epic}),b(Ne=>Ne.map(Re=>Re.id===ae.id?ae:Re)),H(null)}catch(Ne){console.error("Error updating feature:",Ne),alert("Failed to update feature")}},[]),As=v.useCallback(async ae=>{try{await oS(ae),b(Ne=>Ne.filter(Re=>Re.id!==ae))}catch(Ne){console.error("Error deleting feature:",Ne),alert("Failed to delete feature")}},[]),Mr=v.useCallback(ae=>{je(Ne=>({...Ne,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:ae}))},[]),qs=v.useCallback(async()=>{const ae=ve.targetId;if(!(!ae||!n))try{await yR(n.id,ae);const Ne=await vn();b(Ne)}catch(Ne){console.error("Error resetting votes:",Ne),alert("Failed to reset votes")}},[ve.targetId,n,vn]),sn=v.useCallback(()=>{je(ae=>({...ae,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Dt=v.useCallback(()=>{je(ae=>({...ae,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),an=v.useCallback(async()=>{if(n){yt(!0);try{await gR(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(ae){console.error("Error deleting session:",ae),alert("Failed to delete session. Please try again.")}finally{yt(!1),je(ae=>({...ae,showDeleteSession:!1}))}}},[n,p,l,u]),fr=v.useCallback(async()=>{if(n)try{await kR(n.id);const ae=await vn();b(ae)}catch(ae){console.error("Error resetting all votes:",ae),alert("Failed to reset all votes")}},[n,vn]),Hr=v.useCallback((ae,Ne)=>{if(!s||!B.isActive)return;const Re=M[ae]||0;let $e=Re;if(Ne)if(ge<Mt)$e=Re+1;else return;else if(Re>0)$e=Re-1;else return;ie(qe=>{const _e={...qe};return $e===0?delete _e[ae]:_e[ae]=$e,_e}),ke(qe=>Ne?qe+1:qe-1)},[s,M,ge,B.isActive,Mt]),on=v.useCallback(async()=>{if(!(!s||!B.isActive||!n)&&!(ge<Mt))try{for(const[$e,qe]of Object.entries(M))qe>0&&await jR({session_id:n.id,feature_id:$e,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:qe});const ae=await ua(n.id),Ne=await Ao(n.id),Re=ae.map($e=>{const _e=Ne.filter(pt=>pt.feature_id===$e.id).map(pt=>({userId:pt.user_id,name:pt.user_name,email:pt.user_email,voteCount:pt.vote_count})),ht=_e.reduce((pt,gt)=>pt+gt.voteCount,0);return{id:$e.id,title:$e.title,description:$e.description,epic:$e.epic,state:$e.state,areaPath:$e.area_path,tags:$e.tags||[],azureDevOpsId:$e.azure_devops_id,azureDevOpsUrl:$e.azure_devops_url,votes:ht,voters:_e}});b(Re),I("thankyou")}catch(ae){console.error("Error submitting votes:",ae),alert("Failed to submit votes. Please try again.")}},[s,n,ge,M,B.isActive,Mt]),wn=v.useCallback(async ae=>{var ht,pt;const Ne={title:ae.title,goal:ae.goal,votes_per_user:ae.votesPerUser,start_date:ae.startDate,end_date:ae.endDate,is_active:ae.isActive,use_auto_votes:ae.useAutoVotes,product_id:ae.product_id??null,product_name:null},Re={},$e=(gt,Oe)=>{gt!==void 0&&(Re[Oe]=gt)};$e(ae.originalEndDate,"original_end_date"),$e(ae.endedEarlyBy,"ended_early_by"),$e(ae.endedEarlyReason,"ended_early_reason"),$e(ae.endedEarlyDetails,"ended_early_details"),$e(ae.reopenReason,"reopen_reason"),$e(ae.reopenDetails,"reopen_details"),$e(ae.reopenedBy,"reopened_by"),$e(ae.reopenedAt,"reopened_at");const qe={...Ne,...Re},_e=async gt=>{n!=null&&n.id?await lS(n.id,gt):await CR(gt)};try{await _e(qe),se(ae),n!=null&&n.id&&l({...n,title:Ne.title??n.title,goal:Ne.goal??n.goal,votes_per_user:Ne.votes_per_user??n.votes_per_user,use_auto_votes:Ne.use_auto_votes??n.use_auto_votes,start_date:Ne.start_date??n.start_date,end_date:Ne.end_date??n.end_date,is_active:Ne.is_active??n.is_active,product_id:Ne.product_id!==void 0?Ne.product_id??null:ae.product_id??n.product_id??null,product_name:null,original_end_date:Re.original_end_date??n.original_end_date??null,ended_early_by:Re.ended_early_by??n.ended_early_by??null,ended_early_reason:Re.ended_early_reason??n.ended_early_reason??null,ended_early_details:Re.ended_early_details??n.ended_early_details??null,reopen_reason:Re.reopen_reason??n.reopen_reason??null,reopen_details:Re.reopen_details??n.reopen_details??null,reopened_by:Re.reopened_by??n.reopened_by??null,reopened_at:Re.reopened_at??n.reopened_at??null})}catch(gt){const Oe=((pt=(ht=gt==null?void 0:gt.message)==null?void 0:ht.toLowerCase)==null?void 0:pt.call(ht))??"",cr=Oe.includes("column")&&(Oe.includes("reopen_reason")||Oe.includes("reopen_details")||Oe.includes("reopened_by")||Oe.includes("reopened_at")||Oe.includes("original_end_date")||Oe.includes("ended_early_by")||Oe.includes("ended_early_reason")||Oe.includes("ended_early_details")),Ar=Oe.includes("product_name")||Oe.includes('"product_name"'),Pr=Oe.includes("product_id")||Oe.includes('"product_id"');if(cr||Ar||Pr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",gt);try{const Ct={...Ne};Ar&&delete Ct.product_name,Pr&&delete Ct.product_id,await _e(Ct),se(ae),n!=null&&n.id&&l({...n,title:Ct.title??n.title,goal:Ct.goal??n.goal,votes_per_user:Ct.votes_per_user??n.votes_per_user,use_auto_votes:Ct.use_auto_votes??n.use_auto_votes,start_date:Ct.start_date??n.start_date,end_date:Ct.end_date??n.end_date,is_active:Ct.is_active??n.is_active,product_id:Ct.product_id!==void 0?Ct.product_id??null:ae.productId??n.product_id??null,product_name:null,original_end_date:ae.originalEndDate??n.original_end_date??null,ended_early_by:ae.endedEarlyBy??n.ended_early_by??null,ended_early_reason:ae.endedEarlyReason??n.ended_early_reason??null,ended_early_details:ae.endedEarlyDetails??n.ended_early_details??null,reopen_reason:ae.reopenReason??n.reopen_reason??null,reopen_details:ae.reopenDetails??n.reopen_details??null,reopened_by:ae.reopenedBy??n.reopened_by??null,reopened_at:ae.reopenedAt??n.reopened_at??null})}catch(Ct){console.error("Error updating voting session (fallback):",Ct),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",gt),alert("Failed to update voting session settings")}},[n,l]),hs=v.useCallback(async ae=>{if(n){de(ae);try{await ol(n.id,{organization:ae.organization,project:ae.project,accessToken:ae.accessToken,refreshToken:ae.refreshToken,tokenExpiresAt:ae.tokenExpiresAt,tenantId:ae.tenantId,clientId:ae.clientId,enabled:ae.enabled,workItemType:ae.workItemType,query:ae.query,lastSyncTime:ae.lastSyncTime})}catch(Ne){console.error("Error saving config:",Ne)}}},[n]),Ut=v.useCallback(()=>{n?p("/results"):I("results")},[n,p]),Xn=v.useMemo(()=>{switch(T){case"voting":return a.jsx(MZ,{features:j,currentUser:s,pendingVotes:M,pendingUsedVotes:ge,onVote:Hr,onSubmitVotes:on,onToggleAdmin:lr,isAdmin:P,votingSession:B,navigate:p,effectiveVotesPerUser:Mt,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:Ze,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return a.jsx(DZ,{features:j,onResetVotes:Mr,onResetAllVotes:sn,onBack:r?()=>p("../admin"):()=>I("admin"),showVotersList:K,setShowVotersList:ce,votingSession:B,effectiveVotesPerUser:Mt,onLogout:y});case"thankyou":return a.jsx(RZ,{navigate:p,votingSession:B});case"admin":default:return t?a.jsx(SZ,{features:j,onAddFeature:Jn,onUpdateFeature:Vr,onDeleteFeature:As,onShowResults:Ut,onRequestDeleteSession:Dt,isDeletingSession:Be,showAddForm:pe,setShowAddForm:Z,editingFeature:J,setEditingFeature:H,onLogout:y,onShowVoterView:dr,votingSession:B,azureDevOpsConfig:W,onUpdateAzureDevOpsConfig:hs,onPreviewAzureDevOpsFeatures:Jt,onDisconnectAzureDevOps:$r,isFetchingAzureDevOps:le,azureFetchError:Q,onInitiateOAuth:yr,availableStates:ee,availableAreaPaths:q,availableTags:be,previewFeatures:ye,showPreviewModal:V,setShowPreviewModal:Le,onConfirmSync:zt,onReplaceAll:qr,onUpdateVotingSession:wn,onFetchStatesForType:vr,onFetchAreaPathsForTypeAndState:xn,onFetchTagsForTypeStateAndAreaPath:xr,onFetchTypesAndStatesForAreaPath:Es,onFetchTypesAndStatesForTags:Wr,onFetchTypesAndAreaPathsForStates:Rr,suggestedFeatures:ze,otherSessions:ft,onPromoteSuggestion:Br,onMoveSuggestion:Yt,onEditSuggestion:It,onDeleteSuggestion:Zt,adminPerspective:_t,projectOptions:oe}):a.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:a.jsx(Wn,{className:"h-8 w-8"})}),a.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),a.jsx(nt,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[T,j,s,M,ge,Hr,on,lr,P,B,Mr,sn,K,ce,Jn,Vr,As,pe,Z,J,H,W,hs,Cr,Jt,$r,le,Q,yr,ye,V,Le,zt,p,Mt,t,ee,q,be,vr,n,dr,Ze,ze,ft,Br,Yt,It,Zt,_t,oe,Ut]);return n?S?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!P&&T!=="voting"&&T!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:Xn}),a.jsx(LT,{currentRole:P?_t==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:P?void 0:dr,onSelectSessionAdmin:P||d?Er:void 0,onSelectSystemAdmin:d?os:void 0,showRoleToggle:d||P&&_t==="system"}),a.jsx(xh,{show:ve.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:qs,onCancel:()=>je(ae=>({...ae,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(xh,{show:ve.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:fr,onCancel:()=>je(ae=>({...ae,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(xh,{show:ve.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:an,onCancel:()=>je(ae=>({...ae,showDeleteSession:!1})),confirmText:Be?"Deleting":"Delete Session",type:"delete"})]}):a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}async function pC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function FZ(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),[d,m]=v.useState(!1),[f,p]=v.useState(null),{currentUser:y,setCurrentUser:x,setCurrentSession:j}=ba(),b=Bs(),[S]=mx();v.useEffect(()=>{const C=sessionStorage.getItem("oauth_error");C&&(u(C),sessionStorage.removeItem("oauth_error"));const T=S.get("error"),I=S.get("error_description"),P=S.get("error_code");if(T){const z=I?decodeURIComponent(I):"An authentication error occurred.";T==="invalid_request"&&z.includes("AADSTS9002325")?u('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):P==="unexpected_failure"&&z.includes("email")?u("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):u(`Authentication failed: ${z}`),b("/login",{replace:!0})}},[S,b]),v.useEffect(()=>{const C=S.get("token"),T=S.get("action"),I=S.get("email"),P=S.get("product");C&&T&&I&&P&&(T==="grant-admin"||T==="grant-stakeholder")&&(async()=>{var J,H;try{i(!0),u("");const Z=`${Se.supabaseUrl}/functions/v1/grant-access`;let K;try{K=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se.supabaseKey}`},body:JSON.stringify({token:C,action:T,email:I,productId:P})})}catch(Q){throw(J=Q.message)!=null&&J.includes("CORS")||(H=Q.message)!=null&&H.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+Q.message):Q}if(!K.ok){let Q="Failed to grant access";try{Q=(await K.json()).error||Q}catch{Q=`Server returned ${K.status}: ${K.statusText}`}throw new Error(Q)}const ce=await K.json(),B=I.split("@")[0].replace(/\./g," "),se=ce.productName||"the product",W=T==="grant-admin"?"Session Admin":"Stakeholder";let de=B;try{const Q=await ZC(I);Q&&(de=Q.name)}catch{}const oe=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",X=`${window.location.origin}${oe}/login`,ee="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",q=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <div style="position: relative; display: inline-block;">
        <div style="position: absolute; bottom: 0; left: 0; width: 300px; height: 200px; background-image: url('https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png'); background-position: bottom left; background-repeat: no-repeat; background-size: contain; opacity: 0.2; z-index: 0; pointer-events: none;"></div>
        <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ee}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${de},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${W}</strong> access to all voting sessions for <strong style="color: #2d4660;">${se}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${X}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Te=`
Access Granted - Feature Voting System

Hello ${de},

Your access request has been approved! You have been granted ${W} access to all voting sessions for ${se}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${X}

This is an automated message from the Feature Voting System.
          `;let be=[];try{const Q=await lE(P);be=Array.from(new Set(Q.map(R=>{var ye;return(ye=R.user)==null?void 0:ye.email}).filter(R=>!!R).map(R=>R.toLowerCase())))}catch(Q){console.error("Error getting session admins for product:",Q),y!=null&&y.email&&(be=[y.email.toLowerCase()])}const Ee=be.length>0?`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ee}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted Confirmation</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You have successfully granted <strong style="color: #2d4660;">${W}</strong> access to <strong style="color: #2d4660;">${de}</strong> (${I}) for all sessions in <strong style="color: #2d4660;">${se}</strong>.</p>
            
            <!-- Status Box -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <strong style="color: #166534; font-size: 14px;"> Access Granted</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Role: <strong>${W}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    User: <strong>${de}</strong> (${I})
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Product: <strong>${se}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Status: <strong>Email notification sent to requester</strong>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">The requester has been notified and can now access all voting sessions for this product.</p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${X}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`:null,le=be.length>0?`
Access Granted Confirmation - Feature Voting System

Hello,

You have successfully granted ${W} access to ${de} (${I}) for all sessions in ${se}.

Status: Access Granted
Role: ${W}
User: ${de} (${I})
Product: ${se}
Email notification sent to requester: Yes

The requester has been notified and can now access all voting sessions for this product.

Login: ${X}

This is an automated message from the Feature Voting System.
          `:null,fe=[_l({to:I,subject:`Access Granted - ${se} - Feature Voting System`,text:Te,html:q})];be.length>0&&Ee&&le&&be.forEach(Q=>{fe.push(_l({to:Q,subject:`Access Granted: ${de} - ${se} - Feature Voting System`,text:le,html:Ee}))});try{await Promise.all(fe)}catch(Q){console.error("Error sending emails:",Q)}p({roleName:W,productName:se,requesterName:de,requesterEmail:I}),b("/login",{replace:!0})}catch(pe){console.error("Error granting access:",pe),u(pe.message||"Failed to grant access. Please try again."),b("/login",{replace:!0})}finally{i(!1)}})()},[S,b]);const _=async C=>{console.log("[LoginScreen]  handleLogin called!",{email:e,name:r}),C.preventDefault(),console.log("[LoginScreen] Form prevented default"),u(""),i(!0),console.log("[LoginScreen] Set loading state");try{console.log("[LoginScreen] Starting login process..."),console.log("[LoginScreen] Getting or creating user...");const T=await pl(e.trim().toLowerCase(),r.trim());console.log("[LoginScreen] User created/retrieved:",T),x(T);const I=S.get("session");if(I){console.log("[LoginScreen] Session code found, loading session...");const P=await pR(I);if(P){j(P),console.log("[LoginScreen] Checking user roles...");const[z,J,H]=await Promise.all([Pi(T.id),Nm(P.id,T.id),jx(P.id,T.email)]);if(z||J)b("/admin");else if(H)b("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),b("/sessions")}catch(T){console.error("[LoginScreen] Login error:",T),u(`Failed to log in: ${T instanceof Error?T.message:"Unknown error"}. Please try again.`),i(!1)}},E=async()=>{u(""),i(!0);try{const C=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",T=`${window.location.origin}${C}/sessions`,{error:I}=await Se.auth.signInWithOAuth({provider:"azure",options:{redirectTo:T,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:T}}});I&&(u("Failed to sign in with Azure AD. Please try again."),i(!1))}catch(C){console.error("Azure login error:",C),u("Failed to sign in with Azure AD. Please try again."),i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),a.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:C=>n(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:C=>t(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:E,disabled:s,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},onMouseEnter:C=>{s||(C.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:C=>{s||(C.currentTarget.style.backgroundColor="#FFFFFF")},children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),a.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:BF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),a.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:()=>m(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),a.jsx(LZ,{isOpen:d,onClose:it.useCallback(()=>m(!1),[])}),f&&a.jsx(mn,{isOpen:!0,onClose:()=>p(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(or,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",a.jsx("span",{className:"font-semibold text-green-700",children:f.roleName})," access to"]}),a.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:f.requesterName}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:f.requesterEmail}),a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),a.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:f.productName}),a.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const LZ=it.memo(function({isOpen:t,onClose:r}){const[n,s]=v.useState(""),[i,l]=v.useState(""),[u,d]=v.useState(""),[m,f]=v.useState([]),[p,y]=v.useState(!1),[x,j]=v.useState(!1),[b,S]=v.useState(!1),[_,E]=v.useState(""),[C,T]=v.useState(!1),I=it.useRef(null),P=it.useRef(!1),z=it.useRef(null),J=it.useRef(null);v.useEffect(()=>{t&&!P.current?(async()=>{y(!0);try{const se=await wx();f(se),P.current=!0}catch(se){console.error("Error loading products:",se),E("Failed to load products. Please try again.")}finally{y(!1)}})():t||(s(""),l(""),d(""),S(!1),E(""),P.current=!1)},[t]),v.useEffect(()=>{function B(se){I.current&&!I.current.contains(se.target)&&T(!1)}return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]);const H=it.useCallback(B=>{s(B.target.value)},[]),pe=it.useCallback(B=>{l(B.target.value)},[]),Z=async B=>{if(B.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!i.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}j(!0);try{const se=await lE(u);if(se.length===0){E("No administrators found for this product. Please contact your system administrator."),j(!1);return}const W=m.find(Q=>Q.id===u),de=(W==null?void 0:W.name)||"the selected product",oe=Array.from(new Set(se.map(Q=>{var R;return(R=Q.user)==null?void 0:R.email}).filter(Boolean))),X=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${X}/login`,D=await pC(i,u,"grant-admin"),q=await pC(i,u,"grant-stakeholder"),be=`${Se.supabaseUrl}/functions/v1/grant-access`,le=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${de}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${de}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${i}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${de}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${ee}?token=${D}&action=grant-admin&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${ee}?token=${q}&action=grant-stakeholder&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${ee}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,fe=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${de}.

Requester Name: ${n}
Requester Email: ${i}
Product: ${de}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${ee}

This is an automated message from the Feature Voting System.
      `;try{const Q=oe.map(R=>_l({to:R,subject:`Access Request for ${de} - Feature Voting System`,text:fe,html:le}));await Promise.all(Q),S(!0)}catch(Q){console.error("Email service failed:",Q);let R="Failed to send email through the system.";Q instanceof Error||Q!=null&&Q.message?R=Q.message:typeof Q=="string"&&(R=Q),(R.includes("validation_error")||R.includes("403"))&&(R="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${R}. Please check the Supabase Edge Function logs for details.`),j(!1);return}}catch(se){console.error("Error sending access request:",se),E("Failed to send access request. Please try again or contact your administrator.")}finally{j(!1)}},K=m.find(B=>B.id===u),ce=K?Vn(K.name,K.color_hex??null):null;return a.jsx(mn,{isOpen:t,onClose:r,title:b?"":"Request Access",maxWidth:"max-w-lg",hideHeader:b,children:b?a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(or,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),a.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:K==null?void 0:K.name}),a.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{ref:z,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{ref:J,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:i,onChange:pe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),a.jsxs("div",{ref:I,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>T(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[K&&ce&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ce.background}}),a.jsx("span",{className:K?"text-gray-900":"text-gray-400",children:K?K.name:"Select a product..."})]}),a.jsx(ns,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(B=>{const se=Vn(B.name,B.color_hex??null),W=u===B.id;return a.jsxs("div",{onClick:()=>{d(B.id),T(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${W?"bg-[#2d4660]/5":""}`,children:[se&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:se.background}}),a.jsx("span",{className:"text-sm text-gray-900",children:B.name})]},B.id)})})]})]}),_&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function zZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=ba(),i=Bs(),[l]=mx(),[u,d]=v.useState(!0),[m,f]=v.useState(!1),p=v.useRef(!1),[y,x]=v.useState([]),[j,b]=v.useState({}),[S,_]=v.useState({}),[E,C]=v.useState({}),[T,I]=v.useState(!1),[P,z]=v.useState("admin"),[J,H]=v.useState(!1),pe=v.useRef(null),[Z,K]=v.useState({}),[ce,B]=v.useState({}),[se,W]=v.useState(!1),[de,oe]=v.useState(!0),[X,ee]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),[D,q]=v.useState({}),[Te,be]=v.useState(!1),[Ee,le]=v.useState([]),[fe,Q]=v.useState(""),[R,ye]=v.useState(""),[Me,V]=v.useState(null),[Le,ze]=v.useState(null),[dt,ft]=v.useState(!1),[$t,_t]=v.useState(!1),[Qt,M]=v.useState(!1),[ie,ge]=v.useState(null),[ke,ve]=v.useState(!1),[je,Be]=v.useState(!1),[yt,bt]=v.useState(!1),[Tt,nr]=v.useState(null),[Mt,nn]=v.useState(!1),[yr,Ft]=v.useState("#2D4660"),vn=v.useRef(null),[qt,_r]=v.useState(new Set),[Ze,It]=v.useState(null),[Zt,Yt]=v.useState(null),[Br,vr]=v.useState(!1),[Es,Rr]=v.useState(null),[Wr,xr]=v.useState(null),[xn,Cr]=v.useState(null),[Jt,qr]=v.useState(null),[zt,$r]=v.useState(""),[lr,dr]=v.useState(null),[Er,os]=v.useState(!1),[Jn,Vr]=v.useState(!1),[As,Mr]=v.useState("#2D4660"),[qs,sn]=v.useState(!1),[Dt,an]=v.useState([]),[fr,Hr]=v.useState([]),[on,wn]=v.useState(""),[hs,Ut]=v.useState(""),[Xn,ae]=v.useState(""),[Ne,Re]=v.useState(!1),[$e,qe]=v.useState(""),[_e,ht]=v.useState(null),[pt,gt]=v.useState(!1),[Oe,cr]=v.useState(null),Ar=()=>cr(null),Pr=Dt.map(A=>A.user_email.toLowerCase()),Ct=Pr.length>0&&Pr.every(A=>fr.includes(A));v.useEffect(()=>{const A=l.get("error"),F=l.get("error_description"),U=l.get("error_code");if(A){let Y="Authentication failed.";U==="unexpected_failure"&&(F!=null&&F.includes("email"))?Y="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":F&&(Y=decodeURIComponent(F)),sessionStorage.setItem("oauth_error",Y),i("/login",{replace:!0})}},[l,i]),v.useEffect(()=>{(async()=>{if(!se||!e)return;const F=e.tenant_id??e.tenantId??null;if(!F){le([]),Q(""),ge("No tenant assigned. Products cannot be loaded.");return}_t(!0),ge(null);try{const Y=await Fa(F);le(Y),Q(ue=>{if(Br&&ue&&Y.some(ne=>ne.id===ue))return ue;if(Ze){const $=Y.find(ne=>{var Ce;return((Ce=ne.name)==null?void 0:Ce.toLowerCase().trim())===Ze.toLowerCase().trim()});if($!=null&&$.id)return It(null),$.id}return Br&&ue||""}),K(ue=>{const $={...ue};return Y.forEach(ne=>{ne.id&&ne.name&&($[ne.id]=ne.name)}),$}),B(ue=>{const $={...ue};return Y.forEach(ne=>{ne.id&&ne.color_hex&&($[ne.id]=ne.color_hex)}),$})}catch(U){console.error("Error loading products for modal:",U),qa!=null&&qa(U)?ge("Products are not configured yet. Please create the `products` table in Supabase."):ge("Unable to load products. You can still create a session without a product tag."),le([]),Q("")}finally{_t(!1)}})()},[se,e]);const Rt=A=>{if(!A||typeof A!="string")return console.error("[parseLocalDate] Invalid date string:",A),new Date;const U=A.split("T")[0].split(" ")[0].split("-");if(U.length!==3)return console.error("[parseLocalDate] Invalid date format:",A),new Date;const Y=parseInt(U[0],10),ue=parseInt(U[1],10),$=parseInt(U[2],10);if(isNaN(Y)||isNaN(ue)||isNaN($))return console.error("[parseLocalDate] Invalid date components:",{year:Y,month:ue,day:$}),new Date;const ne=new Date(Y,ue-1,$,0,0,0,0);return isNaN(ne.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Y,month:ue,day:$,dateString:A}),new Date):ne},sr=A=>{if(!A||isNaN(A.getTime()))return console.error("[formatDateToISO] Invalid date:",A),new Date().toISOString().split("T")[0];const F=A.getFullYear(),U=String(A.getMonth()+1).padStart(2,"0"),Y=String(A.getDate()).padStart(2,"0");return`${F}-${U}-${Y}`},Or=(A,F)=>{const U=A.getFullYear(),Y=A.getMonth(),ue=A.getDate();return new Date(U,Y,ue+F,0,0,0,0)},na=()=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let F="";for(let U=0;U<8;U++)F+=A.charAt(Math.floor(Math.random()*A.length));return F},sa=()=>{ee({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),q({}),ye(""),V(null),ge(null),ve(!1),Be(!1),bt(!1),nr(null),nn(!1),Ft("#2D4660"),It(null),oe(!0),vr(!1),Q("")},uo=()=>{const A={};X.title.trim()||(A.title="Session title is required"),X.goal.trim()||(A.goal="Session goal is required"),X.useAutoVotes||(X.votesPerUser<1&&(A.votesPerUser="Votes per user must be at least 1"),X.votesPerUser>100&&(A.votesPerUser="Votes per user cannot exceed 100"));const F=Rt(X.startDate);Rt(X.endDate)<=F&&(A.endDate="End date must be after start date");const Y=R.trim().length>0;return!ie&&Ee.length>0&&!fe&&!Tt&&!ke&&!Y&&(A.product="Please select a product or enter a new product name"),ke&&!Y&&(A.product="Please enter a product name or select an existing product"),q(A),Object.keys(A).length===0},Kr=A=>{const{name:F,value:U}=A.target;ee(Y=>{const ue={...Y,[F]:F==="votesPerUser"?parseInt(U)||0:U};if(F==="startDate"&&U){const $=Rt(U),ne=Or($,14);ue.endDate=sr(ne)}return ue}),D[F]&&q(Y=>{const ue={...Y};return delete ue[F],ue})},Ii=async()=>{if(!(!Le||!e)){ft(!0);try{await tE(Le.id),le(A=>A.filter(F=>F.id!==Le.id)),K(A=>{const F={...A};return delete F[Le.id],F}),B(A=>{const F={...A};return delete F[Le.id],F}),fe===Le.id&&Q("")}catch(A){console.error("Error deleting product:",A),alert("Failed to delete product. Please try again.")}finally{ft(!1),ze(null)}}},ka=async A=>{if(A.preventDefault(),!!e&&uo()){be(!0);try{const F=na(),U=e.tenant_id??e.tenantId??null;let Y=fe&&fe.trim()!==""?fe:null;const ue=R.trim(),$=ue.length>0,ne=fe&&fe.trim()!=="";let Ce=null,Ke=null;if(Tt?(Ce=Tt.name,Ke=Tt.color):$&&(Ce=ue,Ke=Me),Ce){const Lt=Ee.find(at=>at.name.toLowerCase().trim()===Ce.toLowerCase().trim());if(Lt)Y=Lt.id;else if(U)try{const at=await eE(U,Ce,Ke||void 0);Y=at.id,le(St=>[...St,at].sort((Je,Ot)=>Je.name.localeCompare(Ot.name))),K(St=>({...St,[at.id]:at.name})),B(St=>{const Je={...St};return at.color_hex&&(Je[at.id]=at.color_hex),Je})}catch(at){console.error("Error creating product during session creation:",at),q(St=>({...St,submit:"Failed to create product. Please try again."})),be(!1);return}else{console.error("No tenantId available to create product"),q(at=>({...at,submit:"Unable to create product: No tenant assigned."})),be(!1);return}}if(Y){const Lt=y.filter(kt=>kt.product_id===Y),at=X.startDate.split("T")[0],St=X.endDate.split("T")[0];if(Lt.find(kt=>{const Xt=kt.start_date.split("T")[0],er=kt.end_date.split("T")[0];return Xt===at&&er===St})){const kt=Z[Y]||"this product";q(Xt=>({...Xt,submit:`A session with the same dates (${Fr(X.startDate)} - ${Fr(X.endDate)}) already exists for ${kt}. Please choose different dates.`})),be(!1);return}const Ot=await sE(Y);if(Ot){const kt=Rt(Ot.end_date);if(Rt(X.startDate)<=kt){const er=Z[Y]||"this product";q(cn=>({...cn,submit:`There is already an active session for ${er}. The new session must start after ${Fr(Ot.end_date)}.`})),be(!1);return}}}const Ie=`${X.startDate}T00:00:00`,st=`${X.endDate}T23:59:59`,xt=await iE({title:X.title,goal:X.goal,votes_per_user:X.votesPerUser,use_auto_votes:X.useAutoVotes,start_date:Ie,end_date:st,is_active:!0,session_code:F,access_type:"invite-only",product_id:Y??null,product_name:null});try{await Oc(xt.id,e.id)}catch(Lt){console.error("Error adding session admin (session was created successfully):",Lt),(Lt==null?void 0:Lt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const wr=await mR(xt.id)||xt;if(wr.product_id&&U)try{const at=(await Fa(U)).find(St=>St.id===wr.product_id);at&&(K(St=>({...St,[at.id]:at.name})),at.color_hex&&at.color_hex.trim()!==""&&B(St=>({...St,[at.id]:at.color_hex})))}catch(Lt){console.error("Error loading product for lookup:",Lt)}t(wr),await r(),await bn(),W(!1),sa(),setTimeout(()=>{i("/admin")},100)}catch(F){console.error("Error creating session from modal:",F),q(U=>({...U,submit:"Failed to create session. Please try again."}))}finally{be(!1)}}};v.useEffect(()=>{if(!J)return;const A=F=>{pe.current&&!pe.current.contains(F.target)&&H(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[J]);const bn=v.useCallback(async()=>{var A;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const U=n0(e.email)||await Pi(e.id);I(U);let Y;U?Y=await Fo():Y=await nE(e.id);const ue=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let $={},ne={};if(ue)try{const st=await Fa(ue);$=st.reduce((xt,We)=>(We.id&&We.name&&(xt[We.id]=We.name),xt),{}),ne=st.reduce((xt,We)=>(We.id&&We.color_hex&&(xt[We.id]=We.color_hex),xt),{})}catch(st){console.error("Error loading products for session selection:",st)}const Ce={},Ke={},Ie={};for(let st=0;st<Y.length;st++){const xt=Y[st];try{const[We,wr,Lt,at]=await Promise.all([U?Promise.resolve(!0):Nm(xt.id,e.id),jx(xt.id,e.email),ua(xt.id),Ao(xt.id).catch(Je=>(console.warn(`Failed to load votes for session ${xt.id}:`,Je),[]))]);Ce[xt.id]={isAdmin:We,isStakeholder:wr},Ke[xt.id]=Lt.length;const St=at.some(Je=>Je.user_id===e.id);Ie[xt.id]=St}catch(We){console.warn(`Error loading data for session ${xt.id}:`,We),Ce[xt.id]={isAdmin:!1,isStakeholder:!1},Ke[xt.id]=0,Ie[xt.id]=!1}}await r(),x(Y),b(Ce),_(Ke),C(Ie),K($),B(ne)}catch(F){console.error("Error loading sessions:",F),(A=F==null?void 0:F.message)!=null&&A.includes("Failed to fetch")||(F==null?void 0:F.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),b({}),_({}),C({})):(x([]),b({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);v.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const F=setTimeout(()=>{f(!1),e||i("/login",{replace:!0})},3e3);return()=>clearTimeout(F)}if(m&&e&&f(!1),!m){if(!e&&!s){i("/login",{replace:!0});return}e&&!s&&!p.current&&bn()}},[e,s,i,m]);const Et=A=>{const F=S[A.id]||0;if(A.use_auto_votes){const U=Math.max(1,Math.floor(F/2));return{votes:U,displayText:`${U} votes/user`,isAuto:!0,formula:`Auto: ${F} ${F===1?"feature":"features"}  2 = ${U}`}}else return{votes:A.votes_per_user,displayText:`${A.votes_per_user} votes/user`,isAuto:!1,formula:""}},ln=A=>{t(A);const F=j[A.id];P==="stakeholder"?i("/vote"):F!=null&&F.isAdmin?i("/admin"):i("/vote")},Na=async()=>{try{await Se.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}H(!1),i("/login",{replace:!0})},Fr=A=>{const U=A.split("T")[0].split(" ")[0].split("-");if(U.length!==3)return new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,st=>`'${st.slice(-2)}`);const Y=parseInt(U[0],10),ue=parseInt(U[1],10)-1,$=parseInt(U[2],10);return new Date(Y,ue,$).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ke=>`'${Ke.slice(-2)}`)},Vs=A=>{const F=new Date,U=new Date(A.start_date),Y=new Date(A.end_date);return F<U?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Pm}:F>Y?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:Kt}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:or}},jn=A=>[...A].sort((F,U)=>{const Y=F!=null&&F.end_date?Date.parse(F.end_date):0;return(U!=null&&U.end_date?Date.parse(U.end_date):0)-Y}),fi=A=>A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Hs=A=>fi(A).replace(/\n/g,"<br />"),Di=A=>`You're invited to vote: ${A.title}`,Sn=(A,F)=>`Hello,

You're invited to participate in the "${A.title}" feature voting session.

`+(A.goal?`Goal: ${A.goal}

`:"")+`Voting Period: ${Fr(A.start_date)} - ${Fr(A.end_date)}

Click the button below to sign in and cast your votes.

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`,ms=(A,F)=>{const U=Sn(A),Y=Hs(U),ue=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${F}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Sign In to Vote</a>
          </td>
        </tr>
      </table>
    `;return Y.replace(/Need help\?/,ue+"<br />Need help?")},ps=async(A,F)=>{A.stopPropagation();const U=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Y=`${window.location.origin}${U}/login?session=${F.session_code}`;qe(""),ht(F),ae(Y),wn(Di(F)),Ut(Sn(F)),sn(!0),Re(!0),an([]),Hr([]);try{const $=(await cE(F.id)).filter(Ie=>!!Ie.user_email),ne=await Qv(),Ce=new Set(ne.map(Ie=>Ie.email.toLowerCase())),Ke=$.filter(Ie=>Ce.has(Ie.user_email.toLowerCase()));an(Ke),Hr(Ke.map(Ie=>Ie.user_email.toLowerCase())),Ke.length===0&&($.length>0?qe("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):qe("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(ue){console.error("Error loading stakeholders:",ue),qe(ue.message||"Failed to load stakeholders for this session.")}finally{Re(!1)}},Ri=(A,F)=>{A.stopPropagation(),t(F),i("/results")},Ks=()=>{sn(!1),an([]),Hr([]),ht(null),qe("")},gs=A=>{Hr(F=>{const U=A.toLowerCase();return F.includes(U)?F.filter(Y=>Y!==U):[...F,U]})},fo=()=>{Hr(Ct?[]:Pr)},ia=async()=>{if(!_e)return;if(fr.length===0){qe("Select at least one stakeholder to email.");return}qe(""),gt(!0);const A=fr.length,F=_e.title,U=hs||Sn(_e);let Y;if(hs){let $=Hs(U);if(Xn&&$.includes(Xn)){const ne=`
          <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 16px 0;">
            <tr>
              <td align="center">
                <a href="${Xn}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Sign In to Vote</a>
              </td>
            </tr>
          </table>
        `;$=$.replace(new RegExp(fi(Xn),"g"),ne)}Y=$}else Y=ms(_e,Xn);const ue=on||Di(_e);try{await Promise.all(fr.map($=>_l({to:$,subject:ue,text:U,html:`<div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${Y}</div>`}))),Ks(),cr({sessionTitle:F,count:A})}catch($){console.error("Error sending stakeholder invites:",$),qe($.message||"Failed to send invites. Please try again.")}finally{gt(!1)}},$i=(A,F)=>{A.stopPropagation(),t(F),i("/users?filter=session-admin")},re=(A,F)=>{A.stopPropagation(),t(F),i("/users?filter=stakeholder")},Ue=()=>{W(!1),vr(!1),sa()};if(u)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const rt=jn(y),Pt=T?rt:rt.filter(A=>{var F;return(F=j[A.id])==null?void 0:F.isAdmin}),Lr=T?[]:rt.filter(A=>{var F,U;return((F=j[A.id])==null?void 0:F.isStakeholder)&&!((U=j[A.id])!=null&&U.isAdmin)}),ir=T||Pt.length>0,kn=T&&P==="system-admin",Gr=P==="stakeholder"?rt.filter(A=>Vs(A).text==="Active"):[],ys=P==="admin"||P==="system-admin"?Pt:[],_a=P==="admin"?Lr:[],Ca=(A,F)=>{const U={};return A.forEach(Y=>{const ue=Un(Y,F);if(!ue||ue==="No Product"||ue.trim()==="")return;const $=ue.toLowerCase().trim();U[$]||(U[$]=[]),U[$].push(Y)}),U},Mi=A=>{_r(F=>{const U=new Set(F);return U.has(A)?U.delete(A):U.add(A),U})},hi=(A,F,U,Y)=>{const ue=Y||U||A,$=async ne=>{if(!U)return;ne.stopPropagation();let Ce=Ee.find(Ke=>Ke.id===U);if(!Ce){const Ke=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Ke)try{Ce=(await Fa(Ke)).find(st=>st.id===U),Ce&&le(st=>st.find(We=>We.id===U)?st:[...st,Ce].sort((We,wr)=>We.name.localeCompare(wr.name)))}catch(Ie){console.error("Error loading product for edit:",Ie)}}Ce&&(qr(Ce),$r(Ce.name||""),dr(Ce.color_hex||null),Mr(Ce.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:F.background,color:F.text,borderColor:F.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{U&&P!=="stakeholder"&&ir&&xr(ue)},onMouseLeave:()=>xr(null),onClick:P!=="stakeholder"&&ir?$:void 0,children:[a.jsx(c0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:A}),U&&Wr===ue&&P!=="stakeholder"&&ir&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx($E,{className:"h-4 w-4",style:{color:F.text}})})]})},N=(A,F,U,Y,ue,$,ne,Ce=!0,Ke)=>a.jsxs(a.Fragment,{children:[Ce&&hi(F,U,Ke),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:Y.text==="Active"&&a.jsx("div",{className:"relative inline-block",style:{marginLeft:"-10px",marginTop:"-10px",marginRight:"10px"},children:a.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),ln(A)},className:"inline-flex items-center px-4 py-2 rounded-md text-sm font-semibold transition-colors text-white shadow-md",style:{backgroundColor:"#1E6154"},onMouseEnter:Ie=>Ie.currentTarget.style.backgroundColor="#15803d",onMouseLeave:Ie=>Ie.currentTarget.style.backgroundColor="#1E6154",children:[a.jsx(ts,{className:"h-4 w-4 mr-1.5"}),"Vote!"]})})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:`relative inline-block ${ne?"group":""}`,children:[a.jsxs("button",{onClick:Ie=>$i(Ie,A),disabled:ne,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${ne?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:ne?{cursor:"not-allowed"}:{},children:[a.jsx(On,{className:"h-3 w-3 mr-1"}),"Admins"]}),ne&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),a.jsxs("div",{className:`relative inline-block ${ne?"group":""}`,children:[a.jsxs("button",{onClick:Ie=>re(Ie,A),disabled:ne,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${ne?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:ne?{cursor:"not-allowed"}:{},children:[a.jsx(is,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),ne&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:A.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:A.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Fr(A.start_date)," - ",Fr(A.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Y.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Y.color}`,children:[a.jsx(ue,{className:`${Y.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Y.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ni,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[A.id]||0," ",S[A.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:F})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:$.displayText}),$.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx(Gu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[$.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Y.text!=="Upcoming"&&a.jsxs("button",{onClick:Ie=>Ri(Ie,A),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(mh,{className:"h-3 w-3 mr-1"}),Y.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:`relative inline-block w-full ${ne?"group":""}`,children:[a.jsxs("button",{onClick:Ie=>ps(Ie,A),disabled:ne,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${ne?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:ne?{cursor:"not-allowed"}:{},children:[a.jsx(Cl,{className:`h-4 w-4 mr-2 ${ne?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${ne?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),ne&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return s||m||u&&!e?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>i("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,T&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&Pt.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"}),!T&&Pt.length===0&&Lr.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#8B5A4A] text-white",children:"Stakeholder"})]})]})]}),a.jsxs("div",{ref:pe,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[T&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>i("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(is,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(T||Pt.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{vr(!1),oe(!0),Q(""),W(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:Na,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>H(!J),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),J&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[T&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{H(!1),i("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(is,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(T||Pt.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{H(!1),oe(!0),W(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{H(!1),Na()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),y.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(ts,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),T&&a.jsxs("button",{onClick:()=>{oe(!0),W(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Bn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[P==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(ts,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const A=Gr.filter($=>{const ne=Un($,Z);return ne&&ne!=="No Product"&&ne.trim()!==""}),F=Gr.filter($=>{const ne=Un($,Z);return!ne||ne==="No Product"||ne.trim()===""}),U=Ca(A,Z),Y=[],ue=[];return Object.entries(U).forEach(([$,ne])=>{ne.length>=2?Y.push({key:$,sessions:ne}):ue.push(...ne)}),a.jsxs("div",{className:"space-y-8",children:[Y.map(({key:$,sessions:ne})=>{var at,St;const Ce=qt.has($),Ke=Ce?ne:ne.slice(0,3),Ie=ne.length>3?ne.length-3:0,st=Un(ne[0],Z),xt=(at=ne[0])!=null&&at.product_id?ce[ne[0].product_id]:void 0,We=Vn(st,xt),wr=(Je,Ot)=>{const kt=Je.replace("#",""),Xt=parseInt(kt.substring(0,2),16),er=parseInt(kt.substring(2,4),16),cn=parseInt(kt.substring(4,6),16);return`rgba(${Xt}, ${er}, ${cn}, ${Ot})`},Lt=We.background?wr(We.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Lt,borderColor:We.border||"#E5E7EB"},children:[hi(st,We,(St=ne[0])==null?void 0:St.product_id,$),Ie>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Mi($),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Ce?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ns,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ie,")",a.jsx(ns,{className:"h-4 w-4"})]})})}),ir&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Je=>{var vs;Je.stopPropagation();const Ot=(vs=ne[0])==null?void 0:vs.product_id,kt=Un(ne[0],Z);Ot&&Q(Ot),kt&&kt!=="No Product"&&It(kt);let Xt=ne.length>0?Rt(ne[0].end_date):new Date;ne.forEach($n=>{const mi=Rt($n.end_date);mi>Xt&&(Xt=mi)});const er=Or(Xt,1),cn=Or(er,14);ee($n=>({...$n,startDate:sr(er),endDate:sr(cn)})),vr(!0),oe(!1),W(!0)},onMouseEnter:()=>Yt($),onMouseLeave:()=>Yt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:We.background||"#C89212",color:We.text||"#FFFFFF"},title:`Create new session for ${st}`,children:a.jsx(Bn,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Ke.map(Je=>{const Ot=Vs(Je),kt=Ot.text==="Closed",Xt=Ot.icon,er=Et(Je),cn=E[Je.id],vs=Un(Je,Z),$n=Je.product_id?ce[Je.product_id]:void 0,mi=Vn(vs,$n);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:mi.border,borderWidth:"1px",opacity:kt&&xn!==Je.id?.75:1},onMouseEnter:()=>Cr(Je.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(Je),children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:cn?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(or,{className:"h-3 w-3 mr-1"}),"Voted"]}):Ot.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:Je.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:Je.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Fr(Je.start_date)," - ",Fr(Je.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Ot.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ot.color}`,children:[a.jsx(Xt,{className:`${Ot.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ot.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ni,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[Je.id]||0," ",S[Je.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:vs})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:er.displayText}),er.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Gu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[er.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:mp=>{mp.stopPropagation(),kt||ln(Je)},disabled:kt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${kt?"bg-gray-100 text-gray-500 cursor-not-allowed":cn?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:kt?{cursor:"not-allowed"}:{},children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),cn?"View or Change Votes":"Cast Your Votes"]})})]})},Je.id)})}),Ie>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Mi($),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Ce?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ns,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ie,")",a.jsx(ns,{className:"h-4 w-4"})]})})})]})},$)}),(ue.length>0||F.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...ue,...F].map($=>{const ne=Vs($),Ce=ne.text==="Closed",Ke=ne.icon,Ie=Et($),st=E[$.id],xt=Un($,Z),We=$.product_id?ce[$.product_id]:void 0,wr=Vn(xt,We),Lt=ue.includes($);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:wr.border,borderWidth:"1px",opacity:Ce&&xn!==$.id?.75:1},onMouseEnter:()=>Cr($.id),onMouseLeave:()=>Cr(null),onClick:()=>ln($),children:[hi(xt,wr,$.product_id),Lt&&ir&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:at=>{at.stopPropagation();const St=$.product_id,Je=Un($,Z);St&&Q(St),Je&&Je!=="No Product"&&It(Je);const Ot=Rt($.end_date),kt=Or(Ot,1),Xt=Or(kt,14);ee(er=>({...er,startDate:sr(kt),endDate:sr(Xt)})),vr(!0),oe(!1),W(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:wr.background||"#C89212",color:wr.text||"#FFFFFF"},onMouseEnter:at=>{const St=wr.background||"#C89212";at.currentTarget.style.backgroundColor=St,at.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:at=>{at.currentTarget.style.backgroundColor=wr.background||"#C89212",at.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${xt}`,children:a.jsx(Bn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:st?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(or,{className:"h-3 w-3 mr-1"}),"Voted"]}):ne.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:$.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:$.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Fr($.start_date)," - ",Fr($.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${ne.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ne.color}`,children:[a.jsx(Ke,{className:`${ne.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ne.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ni,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[$.id]||0," ",S[$.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:xt})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Ie.displayText}),Ie.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Gu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ie.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:at=>{at.stopPropagation(),Ce||ln($)},disabled:Ce,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Ce?"bg-gray-100 text-gray-500 cursor-not-allowed":st?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Ce?{cursor:"not-allowed"}:{},children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),st?"View or Change Votes":"Cast Your Votes"]})})]})]},$.id)})})]})})()]}),(P==="admin"||P==="system-admin")&&a.jsxs(a.Fragment,{children:[P==="admin"&&_a.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(ts,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:_a.map(A=>{const F=Vs(A),U=F.text==="Closed",Y=F.icon,ue=Et(A),$=E[A.id],ne=Un(A,Z),Ce=A.product_id?ce[A.product_id]:void 0,Ke=Vn(ne,Ce);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Ke.border,borderWidth:"1px",opacity:U&&xn!==A.id?.75:1},onMouseEnter:()=>Cr(A.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(A),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Ke.background,color:Ke.text,borderColor:Ke.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(c0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:ne})]}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:$?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(or,{className:"h-3 w-3 mr-1"}),"Voted"]}):F.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:A.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:A.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Fr(A.start_date)," - ",Fr(A.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${F.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${F.color}`,children:[a.jsx(Y,{className:`${F.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),F.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ni,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[A.id]||0," ",S[A.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:ne})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:ue.displayText}),ue.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Gu,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ue.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),U||ln(A)},disabled:U,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${U?"bg-gray-100 text-gray-500 cursor-not-allowed":$?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:U?{cursor:"not-allowed"}:{},children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),$?"View or Change Votes":"Cast Your Votes"]})})]})]},A.id)})})]}),ys.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(On,{className:"h-5 w-5 mr-2"}),kn?"All Sessions (System Admin)":"Sessions You Manage"]}),kn&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",ys.length," total sessions across the organization."]})]}),(()=>{const A=ys.filter($=>{const ne=Un($,Z);return ne&&ne!=="No Product"&&ne.trim()!==""}),F=ys.filter($=>{const ne=Un($,Z);return!ne||ne==="No Product"||ne.trim()===""}),U=Ca(A,Z),Y=[],ue=[];return Object.entries(U).forEach(([$,ne])=>{ne.length>=2?Y.push({key:$,sessions:ne}):ue.push(...ne)}),a.jsxs("div",{className:"space-y-8",children:[Y.map(({key:$,sessions:ne})=>{var at,St;const Ce=qt.has($),Ke=Ce?ne:ne.slice(0,3),Ie=ne.length>3?ne.length-3:0,st=Un(ne[0],Z),xt=(at=ne[0])!=null&&at.product_id?ce[ne[0].product_id]:void 0,We=Vn(st,xt),wr=(Je,Ot)=>{const kt=Je.replace("#",""),Xt=parseInt(kt.substring(0,2),16),er=parseInt(kt.substring(2,4),16),cn=parseInt(kt.substring(4,6),16);return`rgba(${Xt}, ${er}, ${cn}, ${Ot})`},Lt=We.background?wr(We.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Lt,borderColor:We.border||"#E5E7EB"},children:[hi(st,We,(St=ne[0])==null?void 0:St.product_id,$),Ie>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Mi($),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Ce?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ns,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ie,")",a.jsx(ns,{className:"h-4 w-4"})]})})}),(T||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Je=>{var vs;Je.stopPropagation();const Ot=(vs=ne[0])==null?void 0:vs.product_id,kt=Un(ne[0],Z);Ot&&Q(Ot),kt&&kt!=="No Product"&&It(kt);let Xt=ne.length>0?Rt(ne[0].end_date):new Date;ne.forEach($n=>{const mi=Rt($n.end_date);mi>Xt&&(Xt=mi)});const er=Or(Xt,1),cn=Or(er,14);ee($n=>({...$n,startDate:sr(er),endDate:sr(cn)})),oe(!1),W(!0)},onMouseEnter:()=>Yt($),onMouseLeave:()=>Yt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:We.background||"#C89212",color:We.text||"#FFFFFF"},title:`Create new session for ${st}`,children:a.jsx(Bn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Ke.map(Je=>{const Ot=Vs(Je),kt=Ot.icon,Xt=Et(Je),er=Ot.text==="Closed",cn=Un(Je,Z),vs=Je.product_id?ce[Je.product_id]:void 0,$n=Vn(cn,vs);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:$n.border,borderWidth:"1px",opacity:er&&xn!==Je.id?.75:1},onMouseEnter:()=>Cr(Je.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(Je),children:N(Je,cn,$n,Ot,kt,Xt,er,!1,Je.product_id)},Je.id)}),ne.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:We.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>Rr($),onMouseLeave:()=>Rr(null),onClick:Je=>{var vs;Je.stopPropagation();const Ot=(vs=ne[0])==null?void 0:vs.product_id,kt=Un(ne[0],Z);Ot&&Q(Ot),kt&&kt!=="No Product"&&It(kt);let Xt=ne.length>0?Rt(ne[0].end_date):new Date;ne.forEach($n=>{const mi=Rt($n.end_date);mi>Xt&&(Xt=mi)});const er=Or(Xt,1),cn=Or(er,14);ee($n=>({...$n,startDate:sr(er),endDate:sr(cn)})),vr(!0),oe(!1),W(!0)},children:a.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:Zt===$||Es===$?`radial-gradient(circle at center, ${We.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Zt===$||Es===$)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),a.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),a.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),a.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),a.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),a.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),a.jsx(vc,{className:"absolute top-6 left-12",size:8,style:{color:We.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),a.jsx(vc,{className:"absolute top-9 right-12",size:6,style:{color:We.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),a.jsx(vc,{className:"absolute bottom-9 left-6",size:7,style:{color:We.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),a.jsx(vc,{className:"absolute bottom-5 right-12",size:5,style:{color:We.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx(vc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:We.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),a.jsx(vc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:We.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),a.jsx(yc,{className:"absolute top-2 left-6",size:6,style:{color:We.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),a.jsx(yc,{className:"absolute top-11 right-6",size:5,style:{color:We.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),a.jsx(yc,{className:"absolute bottom-10 left-10",size:7,style:{color:We.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),a.jsx(yc,{className:"absolute bottom-2 right-8",size:6,style:{color:We.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),a.jsx(yc,{className:"absolute top-1/2 left-2",size:5,style:{color:We.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),a.jsx(yc,{className:"absolute top-1/2 right-2",size:6,style:{color:We.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:We.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Zt===$||Es===$?1:0,transformOrigin:"center center",animation:Zt===$||Es===$?"growFromCenter 0.3s ease-out forwards":"none"},children:[a.jsx(Bn,{className:"h-8 w-8",style:{color:We.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:We.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),Ie>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Mi($),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Ce?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ns,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ie,")",a.jsx(ns,{className:"h-4 w-4"})]})})})]})},$)}),(ue.length>0||F.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...ue,...F].map($=>{const ne=Vs($),Ce=ne.icon,Ke=Et($),Ie=ne.text==="Closed",st=Un($,Z),xt=$.product_id?ce[$.product_id]:void 0,We=Vn(st,xt),wr=ue.includes($);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:We.border,borderWidth:"1px",opacity:Ie&&xn!==$.id?.75:1},onMouseEnter:()=>Cr($.id),onMouseLeave:()=>Cr(null),onClick:()=>ln($),children:[wr&&(T||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Lt=>{Lt.stopPropagation();const at=$.product_id,St=Un($,Z);at&&Q(at),St&&St!=="No Product"&&It(St);const Je=Rt($.end_date),Ot=Or(Je,1),kt=Or(Ot,14);ee(Xt=>({...Xt,startDate:sr(Ot),endDate:sr(kt)})),vr(!0),oe(!1),W(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:We.background||"#C89212",color:We.text||"#FFFFFF"},onMouseEnter:Lt=>{const at=We.background||"#C89212";Lt.currentTarget.style.backgroundColor=at,Lt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Lt=>{Lt.currentTarget.style.backgroundColor=We.background||"#C89212",Lt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${st}`,children:a.jsx(Bn,{className:"h-5 w-5"})})}),N($,st,We,ne,Ce,Ke,Ie,!0,$.product_id)]},$.id)}),ys.length===2&&ue.length+F.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:a.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:a.jsxs("button",{onClick:()=>{oe(!0),W(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx(Bn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(mn,{isOpen:se,onClose:Ue,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:ka,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!ke&&!Tt?Br&&fe?a.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const A=Ee.find(ue=>ue.id===fe),F=(A==null?void 0:A.name)||Z[fe]||"Unknown Product",U=(A==null?void 0:A.color_hex)||ce[fe],Y=Vn(F,U);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Y.background||"#2D4660",borderColor:Y.border||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:F})]})})()}):a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(DT,{label:"",products:Ee,value:fe,onChange:async A=>{if(Q(A),A){ye("");try{const F=y.filter(U=>U.product_id===A);if(F.length>0){let U=Rt(F[0].end_date);F.forEach($=>{const ne=Rt($.end_date);ne>U&&(U=ne)});const Y=Or(U,1),ue=Or(Y,14);ee($=>({...$,startDate:sr(Y),endDate:sr(ue)}))}else{const U=new Date,Y=Or(U,14);ee(ue=>({...ue,startDate:sr(U),endDate:sr(Y)}))}}catch(F){console.error("Error calculating dates for selected product:",F);const U=new Date,Y=Or(U,14);ee(ue=>({...ue,startDate:sr(U),endDate:sr(Y)}))}}D.product&&q(F=>{const U={...F};return delete U.product,U})},isLoading:$t,error:ie,disabled:$t||Ee.length===0,placeholder:"Select a product",helperText:!$t&&Ee.length===0&&!ie&&de?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:de,onRequestDeleteProduct:de?(A=>{ze(A)}):void 0,className:"w-full"})}),de&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>ve(!0),disabled:$t,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Bn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Tt?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{nr(null),ye(Tt.name),V(Tt.color),ve(!0),Be(!0),bt(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Tt.color||"#2D4660",borderColor:Tt.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Tt.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):de&&ke?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:R,onChange:A=>{ye(A.target.value),A.target.value.trim()&&!je&&setTimeout(()=>Be(!0),200),ie&&ge(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),je&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{Ft(Me||"#2D4660"),nn(!0),setTimeout(()=>{var A;(A=document.getElementById("native-color-input"))==null||A.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Me?{backgroundColor:Me}:{backgroundColor:"#ffffff"},children:!Me&&a.jsx("img",{src:IT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,D.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),D.product]}),ie&&(ke||!!Tt)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),ie]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:vn,type:"text",name:"title",value:X.title,onChange:Kr,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.title?"border-red-500":"border-gray-300"}`}),D.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),D.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:X.goal,onChange:Kr,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.goal?"border-red-500":"border-gray-300"}`}),D.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),D.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:X.useAutoVotes,onChange:A=>ee(F=>({...F,useAutoVotes:A.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!X.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:X.votesPerUser,onChange:Kr,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.votesPerUser?"border-red-500":"border-gray-300"}`}),D.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),D.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:X.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:X.startDate,onChange:Kr,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:X.endDate,onChange:Kr,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.endDate?"border-red-500":"border-gray-300"}`}),D.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),D.endDate]})]})]})]}),D.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2"}),D.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{type:"button",variant:"secondary",onClick:Ue,disabled:Te,children:"Cancel"}),a.jsx(nt,{type:"submit",variant:ke&&R.trim()&&Me?"gold":"primary",disabled:Te,className:`transition-all duration-500 ease-in-out ${ke&&R.trim()&&Me?"relative overflow-hidden":""}`,children:Te?"Creating...":ke&&R.trim()&&Me?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Mt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>nn(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:A=>A.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:yr,onChange:A=>Ft(A.target.value),ref:A=>{A&&Mt&&setTimeout(()=>A.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{V(yr),nn(!1),setTimeout(()=>{var A;(A=vn.current)==null||A.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:yr,height:"260px",minWidth:"100px"},children:[a.jsx(or,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),P==="stakeholder"&&y.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ts,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&_a.length>0&&ys.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ts,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&ys.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(is,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),P==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Wn,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(LT,{currentRole:T&&P==="system-admin"?"system-admin":P==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>z("stakeholder"),onSelectSessionAdmin:()=>z("admin"),onSelectSystemAdmin:T?()=>z("system-admin"):void 0,showRoleToggle:ir||T}),a.jsxs(mn,{isOpen:qs,onClose:()=>{pt||Ks()},title:_e?`Email Stakeholders  ${_e.title}`:"Email Stakeholders",maxWidth:"max-w-3xl",children:[a.jsxs("div",{className:"space-y-6",children:[$e&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:$e}),Ne?a.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Dt.length,")"]}),Dt.length>0&&a.jsx("button",{type:"button",onClick:fo,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:Ct?"Deselect All":"Select All"})]}),a.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Dt.length===0?a.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Dt.map(A=>{const F=A.user_email.toLowerCase(),U=fr.includes(F);return a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[a.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>gs(A.user_email),children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.user_name||"Unnamed Stakeholder"}),a.jsx("p",{className:"text-xs text-gray-500",children:A.user_email})]}),a.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),gs(A.user_email)},className:"flex-shrink-0 ml-4",children:U?a.jsx(or,{className:"w-5 h-5 text-green-600"}):a.jsx(u0,{className:"w-5 h-5 text-gray-400"})})]},A.id)})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),a.jsx("input",{type:"text",value:on,onChange:A=>wn(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),a.jsx("textarea",{value:hs,onChange:A=>Ut(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10}),Xn&&a.jsx("div",{className:"mt-3",children:a.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(Xn)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 transition-colors",title:"Click to copy link",children:[a.jsx(Cl,{className:"h-3 w-3 mr-1.5"}),"Copy Invite Link"]})})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[a.jsx(nt,{variant:"secondary",onClick:Ks,disabled:pt,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:ia,disabled:pt||Dt.length===0||fr.length===0,children:pt?"Sending...":`Send to ${fr.length} Stakeholder${fr.length===1?"":"s"}`})]})]}),a.jsx(mn,{isOpen:!!Oe,onClose:Ar,title:"",hideHeader:!0,maxWidth:"max-w-md",children:a.jsxs("div",{className:"text-center py-6 px-4",children:[a.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:a.jsx(or,{className:"h-10 w-10 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Oe==null?void 0:Oe.count)??0," stakeholder",(Oe==null?void 0:Oe.count)===1?"":"s"," for"," ",a.jsx("span",{className:"font-semibold text-gray-900",children:Oe==null?void 0:Oe.sessionTitle}),"."]}),a.jsx("div",{className:"mt-6",children:a.jsx(nt,{variant:"primary",onClick:Ar,children:"Close"})})]})}),Le&&a.jsxs(mn,{isOpen:!0,onClose:()=>ze(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Le.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(nt,{variant:"secondary",onClick:()=>ze(null),disabled:dt,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:Ii,disabled:dt,children:dt?"Deleting":"Delete"})]})]}),Jt&&a.jsx(mn,{isOpen:!0,onClose:()=>{qr(null),$r(""),dr(null),Vr(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:zt,onChange:A=>$r(A.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Mr(lr||"#2D4660"),Vr(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:lr?{backgroundColor:lr}:{backgroundColor:"#ffffff"},children:!lr&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:lr||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{qr(null),$r(""),dr(null),Vr(!1)},disabled:Er,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(Jt!=null&&Jt.id)||!zt.trim())){os(!0);try{await bx(Jt.id,{name:zt.trim(),color_hex:lr});const A=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(A){const F=await Fa(A);le(F.sort((ue,$)=>ue.name.localeCompare($.name)));const U={},Y={};F.forEach(ue=>{U[ue.id]=ue.name||"",ue.color_hex&&(Y[ue.id]=ue.color_hex)}),K(U),B(Y)}qr(null),$r(""),dr(null),Vr(!1),await r(),await bn()}catch(A){console.error("Error updating product:",A),alert("Failed to update product. Please try again.")}finally{os(!1)}}},disabled:Er||!zt.trim(),children:Er?"Updating...":"Update Product"})]})]})}),Jn&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Vr(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:A=>A.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:As,onChange:A=>Mr(A.target.value),ref:A=>{A&&Jn&&setTimeout(()=>A.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{dr(As),Vr(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:As,height:"260px",minWidth:"100px"},children:[a.jsx(or,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function UZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=ba(),s=Bs(),i=async()=>{try{await Se.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[j,b]=v.useState([]),[S,_]=v.useState(""),[E,C]=v.useState(""),[T,I]=v.useState(!1),[P,z]=v.useState(!1),[J,H]=v.useState(null),[pe,Z]=v.useState(!1),[K,ce]=v.useState(!1);v.useEffect(()=>{(async()=>{if(!e)return;const ee=await Pi(e.id);Z(ee);const{data:D}=await Se.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);ce(D&&D.length>0)})()},[e]),v.useEffect(()=>{(async()=>{var D;if(!e){b([]),_("");return}const ee=e.tenant_id??e.tenantId??null;if(!ee){b([]),_(""),H("No tenant assigned. Products cannot be loaded.");return}I(!0),H(null);try{const q=await Fa(ee);b(q),_(((D=q[0])==null?void 0:D.id)??"")}catch(q){console.error("Error loading products for create session:",q),qa!=null&&qa(q)?H("Products are not configured yet. Please create the `products` table in Supabase."):H("Unable to load products. You can still create a session without a product tag."),b([]),_("")}finally{I(!1)}})()},[e]);const B=()=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let ee="";for(let D=0;D<8;D++)ee+=X.charAt(Math.floor(Math.random()*X.length));return ee},se=()=>{const X={};l.title.trim()||(X.title="Session title is required"),l.goal.trim()||(X.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(X.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(X.votesPerUser="Votes per user cannot exceed 100"));const ee=new Date(l.startDate);return new Date(l.endDate)<=ee&&(X.endDate="End date must be after start date"),!J&&j.length>0&&!S&&(X.product="Please select a product for this session"),m(X),Object.keys(X).length===0},W=async X=>{if(X.preventDefault(),!(!se()||!e)){p(!0);try{const ee=B(),D=j.find(Te=>Te.id===S)||null;if(D!=null&&D.id&&await sE(D.id)){m({submit:`There is already an active session for ${D.name}. Each product can only have one active session at a time.`}),p(!1);return}const q=await iE({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:ee,product_id:(D==null?void 0:D.id)??null,product_name:null});await Oc(q.id,e.id),await r(),x(!0),setTimeout(()=>{t(q),s("/admin")},3e3)}catch(ee){console.error("Error creating session:",ee),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},de=async()=>{if(!e)return;const X=e.tenant_id??e.tenantId??null;if(!X){H("Cannot create products because no tenant is associated with your account.");return}const ee=E.trim();if(!ee){H("Product name is required.");return}z(!0),H(null);try{const D=await eE(X,ee);b(q=>[...q,D].sort((be,Ee)=>be.name.localeCompare(Ee.name))),_(D.id),C("")}catch(D){console.error("Error creating product:",D),H(D instanceof Error?D.message:"Unable to create product. Please try again.")}finally{z(!1)}},oe=X=>{const{name:ee,value:D}=X.target;u(q=>({...q,[ee]:ee==="votesPerUser"?parseInt(D)||0:D})),d[ee]&&m(q=>{const Te={...q};return delete Te[ee],Te})};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(or,{className:"h-10 w-10 text-green-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),a.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Ed,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"}),e&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,pe&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!pe&&K&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:W,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),a.jsx("input",{type:"text",name:"title",value:l.title,onChange:oe,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),d.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:l.goal,onChange:oe,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),d.goal]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),T?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):j.length>0?a.jsxs("select",{value:S,onChange:X=>{_(X.target.value),d.product&&m(ee=>{const D={...ee};return delete D.product,D})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a product"}),j.map(X=>a.jsx("option",{value:X.id,children:X.name},X.id))]}):a.jsx("p",{className:"text-sm text-gray-500",children:J??"No products found. Add a product below to associate this session."}),d.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),d.product]}),J&&j.length>0&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:J}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:X=>{C(X.target.value),J&&H(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:de,disabled:P,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Adding...":"Add Product"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ts,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:X=>u(ee=>({...ee,useAutoVotes:X.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:oe,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),a.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:oe,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),a.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:oe,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(is,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),a.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),a.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2"}),d.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function BZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Vn(d.name,d.color_hex??null):null;return a.jsxs("div",{ref:u,className:"relative",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),a.jsx(ns,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Vn(f.name,f.color_hex??null),y=t===f.id;return a.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&a.jsx(or,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function WZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=ba(),s=Bs(),i=async()=>{try{await Se.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[j,b]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),T=v.useRef(null),[I,P]=v.useState([]),[z,J]=v.useState(""),[H,pe]=v.useState([]),[Z,K]=v.useState([]),[ce,B]=v.useState({}),[se,W]=v.useState(!1),[de,oe]=v.useState(!1);v.useEffect(()=>{if(!E)return;const Q=R=>{T.current&&!T.current.contains(R.target)&&C(!1)};return document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q,{passive:!0}),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}D(),X()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const R=await Pi(t.id);W(R);const{data:ye}=await Se.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);oe(ye&&ye.length>0)})()},[t]);const X=async()=>{try{const Q=await wx(),R=await Fo(),ye=new Date,Me=Q.filter(Le=>R.some(ze=>ze.product_id!==Le.id?!1:new Date(ze.end_date)>=ye));P(Me);const V={};Me.forEach(Le=>{V[Le.id]=Le.name}),B(V)}catch(Q){console.error("Error loading products:",Q)}},ee=async Q=>{try{const R=await Fo(),ye=new Date,Me=R.filter(V=>V.product_id!==Q?!1:new Date(V.end_date)>=ye);pe(Me)}catch(R){console.error("Error loading sessions:",R),pe([])}};v.useEffect(()=>{z?(ee(z),K([])):(pe([]),K([]))},[z]);const D=async()=>{if(e){m(!0);try{const Q=await cE(e.id);u(Q)}catch(Q){console.error("Error loading stakeholders:",Q)}finally{m(!1)}}},q=Q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),Te=Q=>{const R=new Date,ye=new Date(Q.start_date),Me=new Date(Q.end_date);return Q.is_active&&R>=ye&&R<=Me?{text:"Active",color:"text-green-600"}:R<ye?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},be=Q=>{const R=new Date(Q.start_date),ye=new Date(Q.end_date),Me=R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),V=ye.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Me} - ${V}`},Ee=async Q=>{Q.preventDefault();const R={};if(y.name.trim()||(R.name="Name is required"),y.email.trim()?q(y.email)||(R.email="Invalid email address"):R.email="Email is required",z||(R.product="Please select a product"),Z.length===0&&(R.sessions="Please select at least one session"),b(R),!(Object.keys(R).length>0)){_(!0);try{for(const ye of Z)await uE({session_id:ye,user_name:y.name,user_email:y.email,has_voted:!1});for(const ye of Z){const Me=H.find(V=>V.id===ye);if(Me)try{const V=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Le=`${window.location.origin}${V}/login?session=${Me.session_code}`;await _l({to:y.email,subject:`You're invited to vote: ${Me.title}`,text:`Hi,

You've been invited to vote in "${Me.title}".

Open: ${Le}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${Me.title}</strong>.</p><p><a href="${Le}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const V=dE(Me,y.email,(t==null?void 0:t.name)||"");window.location.href=V}catch{}}}await D(),x({name:"",email:""}),J(""),K([]),p(!1),b({})}catch(ye){console.error("Error adding stakeholder:",ye),b({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},le=async Q=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await e0(e.id,Q),await D()}catch(R){console.error("Error removing stakeholder:",R),alert("Failed to remove stakeholder")}},fe=Q=>{const ye=Q.split("T")[0].split(" ")[0].split("-");let Me;if(ye.length===3){const V=parseInt(ye[0],10),Le=parseInt(ye[1],10)-1,ze=parseInt(ye[2],10);Me=new Date(V,Le,ze);const dt=Q.match(/T(\d{2}):(\d{2}):(\d{2})/);dt&&Me.setHours(parseInt(dt[1],10),parseInt(dt[2],10),parseInt(dt[3],10))}else Me=new Date(Q);return Me.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Ed,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"}),t&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,se&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!se&&de&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:T,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(wl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(wl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(bs,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[a.jsx(wl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(Q=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(bs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:Q.user_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Cl,{className:"h-4 w-4 mr-2"}),Q.user_email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Q.has_voted?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(or,{className:"h-3 w-3 mr-1"}),"Voted"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(Pm,{className:"h-3 w-3 mr-1"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:fe(Q.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>le(Q.user_email),className:"text-red-600 hover:text-red-900",children:a.jsx(Qi,{className:"h-5 w-5"})})})]},Q.id))})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),a.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:Ee,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:Q=>x(R=>({...R,name:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),j.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),j.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:y.email,onChange:Q=>x(R=>({...R,email:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),j.email]})]}),a.jsxs("div",{children:[a.jsx(BZ,{products:I,value:z,onChange:J,label:"Product *",error:!!j.product}),j.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),j.product]})]}),z&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),H.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:H.map(Q=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Z.includes(Q.id),onChange:R=>{R.target.checked?K(ye=>[...ye,Q.id]):K(ye=>ye.filter(Me=>Me!==Q.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.title}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:be(Q)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Te(Q).color}`,children:Te(Q).text})})]})]},Q.id))}),j.sessions&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),j.sessions]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function qZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=ba(),s=Bs(),i=async()=>{try{await Se.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[j,b]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),T=v.useRef(null),[I,P]=v.useState(!1),[z,J]=v.useState(!1);v.useEffect(()=>{if(!E)return;const B=se=>{T.current&&!T.current.contains(se.target)&&C(!1)};return document.addEventListener("mousedown",B),document.addEventListener("touchstart",B,{passive:!0}),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("touchstart",B)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}H()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const se=await Pi(t.id);P(se);const{data:W}=await Se.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);J(W&&W.length>0)})()},[t]);const H=async()=>{if(e){m(!0);try{const B=await oE(e.id);u(B)}catch(B){console.error("Error loading admins:",B)}finally{m(!1)}}},pe=B=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B),Z=async B=>{B.preventDefault();const se={};if(y.email.trim()?pe(y.email)||(se.email="Invalid email address"):se.email="Email is required",l.some(W=>W.user.email.toLowerCase()===y.email.toLowerCase())&&(se.email="This user is already an admin"),b(se),!(Object.keys(se).length>0)&&e){_(!0);try{const W=y.email.split("@")[0].replace(/\./g," ");await vR(e.id,y.email,W);try{const de=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${de}/login?session=${e.session_code}`;await _l({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${oe}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${oe}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const de=dE(e,y.email,(t==null?void 0:t.name)||"");window.location.href=de}catch{}}await H(),x({email:""}),p(!1)}catch(W){console.error("Error adding admin:",W),b({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},K=async B=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(B===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Zv(e.id,B),await H()}catch(se){console.error("Error removing admin:",se),alert("Failed to remove admin")}}},ce=B=>{const W=B.split("T")[0].split(" ")[0].split("-");let de;if(W.length===3){const oe=parseInt(W[0],10),X=parseInt(W[1],10)-1,ee=parseInt(W[2],10);de=new Date(oe,X,ee);const D=B.match(/T(\d{2}):(\d{2}):(\d{2})/);D&&de.setHours(parseInt(D[1],10),parseInt(D[2],10),parseInt(D[3],10))}else de=new Date(B);return de.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Ed,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"}),t&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,I&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!I&&z&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:T,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(wl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(wl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wn,{className:"h-5 w-5 text-blue-500 mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[B.user.name,B.user.id===(t==null?void 0:t.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Cl,{className:"h-4 w-4 mr-2"}),B.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce(B.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>K(B.user_id),className:`text-red-600 hover:text-red-900 ${B.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:B.user.id===(t==null?void 0:t.id)||l.length===1,title:B.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:a.jsx(Qi,{className:"h-5 w-5"})})})]},B.id))})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Wn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Manage features and voting settings for this session"}),a.jsx("li",{children:"Add and remove stakeholders for this session"}),a.jsx("li",{children:"View voting results and analytics for this session"}),a.jsx("li",{children:"Add and remove other session admins"})]}),a.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),a.jsx("button",{onClick:()=>{p(!1),x({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:y.email,onChange:B=>x(se=>({...se,email:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),j.email]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function VZ(){const{currentUser:e,sessions:t}=ba(),r=Bs(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await oE(x.id)).forEach(b=>{b.user&&b.user.email&&y.add(b.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),j=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=j,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(uF,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(or,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx(VS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(is,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(Cl,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(VS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function HZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=ba(),n=Bs(),s=async()=>{try{await Se.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,j]=v.useState({}),[b,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(null),[T,I]=v.useState(!1),[P,z]=v.useState(!1);v.useEffect(()=>{if(!_)return;const ce=B=>{C.current&&!C.current.contains(B.target)&&E(!1)};return document.addEventListener("mousedown",ce),document.addEventListener("touchstart",ce,{passive:!0}),()=>{document.removeEventListener("mousedown",ce),document.removeEventListener("touchstart",ce)}},[_]),v.useEffect(()=>{J()},[]),v.useEffect(()=>{(async()=>{if(!e)return;const B=await Pi(e.id);I(B);const{data:se}=await Se.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);z(se&&se.length>0)})()},[e]);const J=async()=>{d(!0);try{let ce=await t0();ce.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await _h(e.id),ce=await t0()),l(ce)}catch(ce){console.error("Error loading system admins:",ce)}finally{d(!1)}},H=ce=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ce),pe=async ce=>{ce.preventDefault();const B={};if(p.email.trim()?H(p.email)||(B.email="Invalid email address"):B.email="Email is required",i.some(se=>se.user.email.toLowerCase()===p.email.toLowerCase())&&(B.email="This user is already a system admin"),j(B),!(Object.keys(B).length>0)){S(!0);try{const se=p.email.split("@")[0].replace(/\./g," "),W=await pl(p.email,se);await _h(W.id);try{const de=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${de}/login`;await _l({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${oe}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${oe}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const de=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${de}/login`,X=encodeURIComponent("You're a System Admin: Feature Voting System"),ee=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${oe}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${X}&body=${ee}`}catch{}}await J(),y({email:""}),f(!1)}catch(se){console.error("Error adding system admin:",se),j({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},Z=async ce=>{const B=i.reduce((se,W)=>new Date(W.created_at)<new Date(se.created_at)?W:se);if(ce===B.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(ce===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await r0(ce),await J()}catch(se){console.error("Error removing system admin:",se),alert("Failed to remove system admin")}},K=ce=>{const se=ce.split("T")[0].split(" ")[0].split("-");let W;if(se.length===3){const de=parseInt(se[0],10),oe=parseInt(se[1],10)-1,X=parseInt(se[2],10);W=new Date(de,oe,X);const ee=ce.match(/T(\d{2}):(\d{2}):(\d{2})/);ee&&W.setHours(parseInt(ee[1],10),parseInt(ee[2],10),parseInt(ee[3],10))}else W=new Date(ce);return W.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Ed,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,T&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&P&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:C,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(wl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(wl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ss,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const ce=i.reduce((B,se)=>new Date(se.created_at)<new Date(B.created_at)?se:B);return i.map(B=>{const se=B.user_id===ce.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ss,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[B.user.name,B.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),se&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Cl,{className:"h-4 w-4 mr-2"}),B.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(B.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>Z(B.user_id),className:`text-red-600 hover:text-red-900 ${B.user.id===(e==null?void 0:e.id)||i.length===1||se?"opacity-50 cursor-not-allowed":""}`,disabled:B.user.id===(e==null?void 0:e.id)||i.length===1||se,title:se?"Cannot remove the original system admin":B.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(Qi,{className:"h-5 w-5"})})})]},B.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ss,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),y({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:ce=>y(B=>({...B,email:ce.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Kt,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:b,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:b,children:b?"Adding...":"Add System Admin"})]})]})]})})]})}async function KZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:i},error:l}=await Se.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!i)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=i.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=i.user)==null?void 0:n.identities)==null?void 0:s.some(b=>b.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=i.provider_token||i.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,y=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!y.ok){const b=await y.text();let S="";throw y.status===401?(S="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",b)):y.status===403?(S='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",b)):y.status===400?(S="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",b)):(S=`Unable to search users (${y.status}). Please try again.`,console.error("Azure AD search error:",y.status,b)),new Error(S)}return((await y.json()).value||[]).map(b=>({id:b.id,displayName:b.displayName||"",mail:b.mail||b.userPrincipalName||"",userPrincipalName:b.userPrincipalName||"",givenName:b.givenName,surname:b.surname,jobTitle:b.jobTitle,department:b.department})).sort((b,S)=>{const _=b.displayName.toLowerCase(),E=S.displayName.toLowerCase();return _.localeCompare(E)})}catch(i){throw console.error("Error searching Azure AD users:",i),i}}const Vu=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function wh({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Vn(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(ns,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=Vn(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(or,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function GZ({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(wh,{products:e,value:r,onChange:y=>{n(y),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function YZ(){var Mi,hi;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=ba(),s=Bs(),[i]=mx(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[j,b]=v.useState("all"),[S,_]=v.useState(!1),[E,C]=v.useState(null),[T,I]=v.useState(null),[P,z]=v.useState(null),[J,H]=v.useState(null),pe=N=>{const A=new Date,F=N.filter(U=>{const Y=U.start_date?new Date(U.start_date):null,ue=U.end_date?new Date(U.end_date):null;return Y&&A<Y||ue&&A>ue?!1:!!(Y&&A>=Y&&(!ue||A<=ue))});return F.length===0?null:F.sort((U,Y)=>{const ue=U.start_date?new Date(U.start_date).getTime():0;return(Y.start_date?new Date(Y.start_date).getTime():0)-ue})[0]},Z=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),K=v.useRef(null),ce=v.useRef({}),B=v.useRef(null),se=v.useRef(!1),[W,de]=v.useState(!1),[oe,X]=v.useState(!1),[ee,D]=v.useState([]),[q,Te]=v.useState("system-admin"),[be,Ee]=v.useState(!0),[le,fe]=v.useState(!1),[Q,R]=v.useState(null),[ye,Me]=v.useState(null),[V,Le]=v.useState([]),[ze,dt]=v.useState({adminSessions:[],stakeholderSessions:[]}),[ft,$t]=v.useState(""),[_t,Qt]=v.useState(!0),[M,ie]=v.useState([]),[ge,ke]=v.useState(!1),[ve,je]=v.useState(null),[Be,yt]=v.useState(!1),[bt,Tt]=v.useState(null),[nr,Mt]=v.useState(new Set),[nn,yr]=v.useState(new Map),[Ft,vn]=v.useState(!1),[qt,_r]=v.useState(!1),[Ze,It]=v.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Zt,Yt]=v.useState(Vu()),[Br,vr]=v.useState(!0),[Es,Rr]=v.useState(null),[Wr,xr]=v.useState({sessionAdmin:!1,stakeholder:!1}),[xn,Cr]=v.useState("User Management"),[Jt,qr]=v.useState([]),[zt,$r]=v.useState(""),[lr,dr]=v.useState([]),[Er,os]=v.useState(""),[Jn,Vr]=v.useState([]),[As,Mr]=v.useState(!1),[qs,sn]=v.useState(null),[Dt,an]=v.useState(!0),[fr,Hr]=v.useState(!0),on=!!Er&&(fr||Ze.sessionAdminIds.length>0),wn=!!zt&&(Dt||Ze.stakeholderSessionIds.length>0),hs=((Mi=Jt.find(N=>N.id===Er))==null?void 0:Mi.name)||"",Ut=((hi=Jt.find(N=>N.id===zt))==null?void 0:hi.name)||"",Xn=N=>{const A=N.map(U=>V.find(Y=>Y.id===U)).filter(U=>!!U);return A.length===0?"":A.map(U=>U.title||"Unnamed Session").join(", ")},ae=on?`${hs||"Selected Product"}  ${fr?"All Sessions":Xn(Ze.sessionAdminIds)||"Sessions selected"}`:"",Ne=wn?`${Ut||"Selected Product"}  ${Dt?"All Sessions":Xn(Ze.stakeholderSessionIds)||"Sessions selected"}`:"",Re=(()=>{const N=[];return Ze.isSystemAdmin&&N.push("System Admin"),on&&N.push("Session Admin"),wn&&N.push("Stakeholder"),N})(),$e=N=>{if(Re.length===0)return N?"Creating User...":"Create User";const A=Re.join(" & ");return N?`Adding ${A}...`:`Add ${A}`},[qe,_e]=v.useState(!1),[ht,pt]=v.useState(null),[gt,Oe]=v.useState(""),[cr,Ar]=v.useState(""),[Pr,Ct]=v.useState(!1),Rt=async N=>{N&&(N.preventDefault(),N.stopPropagation());try{await Se.auth.signOut()}catch(A){console.error("Error signing out:",A)}try{r(null)}catch(A){console.error("Error clearing session:",A)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(A){console.error("Error clearing storage:",A)}_(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const N=A=>{K.current&&!K.current.contains(A.target)&&_(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[S]),v.useEffect(()=>{if(!E)return;const N=A=>{const F=ce.current[E];F&&!F.contains(A.target)&&C(null)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[E]);const sr=v.useCallback(async()=>{try{const N=await wx(),A=new Date,F=N.filter(U=>V.some(Y=>Y.product_id!==U.id?!1:new Date(Y.end_date)>=A));qr(F)}catch(N){console.error("Error loading products:",N)}},[V]),Or=()=>{os(""),Vr([]),It(N=>({...N,sessionAdminIds:[]})),Hr(!0),xr(N=>({...N,sessionAdmin:!1}))},na=()=>{$r(""),It(N=>({...N,stakeholderSessionIds:[]})),an(!0),xr(N=>({...N,stakeholder:!1}))},sa=N=>{if(!N){dr([]);return}const A=new Date,F=V.filter(U=>U.product_id!==N?!1:new Date(U.end_date)>=A);dr(F)};v.useEffect(()=>{zt?sa(zt):dr([])},[zt,V]);const uo=N=>{if(!N){Vr([]);return}const A=new Date,F=V.filter(U=>U.product_id!==N?!1:new Date(U.end_date)>=A);Vr(F)};v.useEffect(()=>{Er?uo(Er):Vr([])},[Er,V]),v.useEffect(()=>{const N=i.get("filter");N==="session-admin"?(Cr("Session Admin Management"),b("session-admin")):N==="stakeholder"?(Cr("Stakeholder Management"),b("stakeholder")):Cr("User Management")},[i]);const Kr=async N=>{p(!0);try{const[A,F,U]=await Promise.all([Qv(),Se.from("session_admins").select("user_id, session_id, created_at").then(({data:Ie,error:st})=>st?(console.error("Error fetching all admin relations:",st),[]):Ie||[]),Se.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:Ie,error:st})=>st?(console.error("Error fetching all stakeholder relations:",st),[]):Ie||[])]),Y=new Map;F.forEach(Ie=>{Y.has(Ie.user_id)||Y.set(Ie.user_id,[]),Y.get(Ie.user_id).push({session_id:Ie.session_id,created_at:Ie.created_at})});const ue=new Map;U.forEach(Ie=>{var xt;const st=((xt=Ie.user_email)==null?void 0:xt.toLowerCase())||"";st&&(ue.has(st)||ue.set(st,[]),ue.get(st).push({session_id:Ie.session_id,created_at:Ie.created_at}))});const $=new Map(N.map(Ie=>[Ie.id,Ie])),ne=await Promise.all(A.map(async Ie=>{const st=await hR(Ie.id),xt=[],We=[];(Y.get(Ie.id)||[]).forEach(St=>{const Je=$.get(St.session_id);Je&&xt.push({...Je,assignedAt:St.created_at,assignedBy:"System",assignedByName:"System"})});const Lt=Ie.email.toLowerCase();return(ue.get(Lt)||[]).forEach(St=>{const Je=$.get(St.session_id);Je&&We.push({...Je,assignedAt:St.created_at,assignedBy:"System",assignedByName:"System"})}),{...Ie,roles:st,adminInSessions:xt,stakeholderInSessions:We}}));u(ne);const Ce=new Map;ne.forEach(Ie=>{const st=Ie.email.toLowerCase().trim();Ce.has(st)||Ce.set(st,[]),Ce.get(st).push(Ie.id)});const Ke=new Map;Ce.forEach((Ie,st)=>{Ie.length>1&&Ke.set(st,Ie)}),yr(Ke)}catch(A){console.error("Error loading users:",A)}finally{p(!1)}},Ii=async()=>{if(e){Ee(!0);try{const N=await Fo(),[A,F]=await Promise.all([Pi(e.id),Se.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:Y,error:ue})=>ue?(console.error("Error fetching admin sessions:",ue),[]):(Y||[]).map($=>$.session_id))]);de(A);const U=F;if(A)Le(N),await Promise.all([ka(),Kr(N)]);else{const Y=U.length>0;if(X(Y),D(U),!Y){s("/sessions");return}const ue=N.filter($=>U.includes($.id));Le(ue),Te("session-admin"),await Kr(ue)}}catch(N){console.error("Error checking access:",N),s("/sessions")}finally{Ee(!1)}}},ka=async()=>{try{const N=["chris.rodes@newmill.com","spencer.faull@newmill.com"],A=new Set,F=await t0();if(F.length>0){const Y=F.reduce((ue,$)=>new Date($.created_at)<new Date(ue.created_at)?$:ue);Tt(Y.user_id),A.add(Y.user_id)}(await Qv()).forEach(Y=>{N.includes(Y.email.toLowerCase())&&A.add(Y.id)}),Mt(A)}catch(N){console.error("Error loading protected accounts:",N)}},bn=N=>{if(N.id===bt)return"Original Admin";const A=N.email.toLowerCase();return A==="chris.rodes@newmill.com"?"Manager":A==="spencer.faull@newmill.com"?"Portfolio Owner":null},Et=N=>{const A=N.email.toLowerCase().trim(),F=nn.get(A);return F?F.length>1:!1},ln=N=>{const A=N.email.toLowerCase().trim(),F=nn.get(A);return F?F.length:1},Na=()=>{let N=[...l];if(q==="session-admin"&&V.length>0){const A=new Set(V.map(F=>F.id));N=N.filter(F=>{var ue,$;if(F.id===(e==null?void 0:e.id))return!0;const U=(ue=F.adminInSessions)==null?void 0:ue.some(ne=>ne&&A.has(ne.id)),Y=($=F.stakeholderInSessions)==null?void 0:$.some(ne=>ne&&A.has(ne.id));return!!U||!!Y})}if(y.trim()){const A=y.toLowerCase();N=N.filter(F=>F.name.toLowerCase().includes(A)||F.email.toLowerCase().includes(A))}j!=="all"&&(N=N.filter(A=>{switch(j){case"system-admin":return A.roles.isSystemAdmin;case"session-admin":return A.roles.sessionAdminCount>0;case"stakeholder":return A.roles.stakeholderSessionCount>0;case"none":return!A.roles.isSystemAdmin&&A.roles.sessionAdminCount===0&&A.roles.stakeholderSessionCount===0;default:return!0}})),m(N)};v.useEffect(()=>{if(!e){s("/login");return}if(!se.current)return se.current=!0,Ii(),()=>{}},[e]),v.useEffect(()=>{const N=i.get("filter");N&&["system-admin","session-admin","stakeholder","none"].includes(N)&&b(N)},[i]),v.useEffect(()=>{q==="session-admin"?(j==="system-admin"||j==="session-admin"||j==="all")&&b("stakeholder"):q==="system-admin"&&b("all")},[q]);const Fr=v.useCallback(()=>{Na()},[l,y,j,q,V,e]);v.useEffect(()=>{Fr()},[Fr]),v.useEffect(()=>{function N(A){B.current&&!B.current.contains(A.target)&&Yt(F=>({...F,showResults:!1}))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const Vs=async N=>{try{const A=[],F=[];for(const U of V)await Nm(N,U.id)&&A.push(U.id),await xR(N,U.id)&&F.push(U.id);dt({adminSessions:A,stakeholderSessions:F})}catch(A){console.error("Error loading user session memberships:",A)}},jn=async(N,A)=>{Me(N),R(A),$t(""),Qt(!0),ie([]),fe(!0),C(null),Jt.length===0&&await sr(),await Vs(N.id)},fi=()=>{fe(!1),R(null),Me(null),$t(""),Qt(!0),ie([]),dt({adminSessions:[],stakeholderSessions:[]})},Hs=(N,A)=>{if(!A)return[];const F=new Date;return N.filter(U=>U.product_id!==A?!1:new Date(U.end_date)>=F)},Di=async()=>{if(!ye||!Q)return;if(!ft){alert("Please select a product first.");return}let N=[];if(_t)N=Hs(_a(Q),ft).map(F=>F.id);else{if(M.length===0){alert("Please select at least one session.");return}N=M}if(N.length===0){alert("No sessions available for this product.");return}try{for(const A of N)Q==="session-admin"?await Oc(A,ye.id):Q==="stakeholder"?await sS(A,ye.email,ye.name):Q==="remove-stakeholder"&&await e0(A,ye.email);fi(),await Kr(V)}catch(A){console.error("Error modifying user session role:",A);const F=(A==null?void 0:A.message)||(A==null?void 0:A.toString())||"Unknown error";console.error("Full error details:",A),alert(`Failed to ${Q==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${F}

Please check the console for more details.`)}},Sn=async(N,A)=>{if(C(null),!!confirm(`Are you sure you want to ${A?"remove":"grant"} system admin access for this user?`))try{A?await r0(N):await _h(N),await Kr(V)}catch(F){console.error("Error toggling system admin:",F),alert("Failed to update system admin status. Please try again.")}},ms=async(N,A)=>{C(null);const F=q==="session-admin"?`Are you sure you want to remove ${A} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${A}? This will remove them from all sessions and revoke system admin access.`;if(confirm(F))try{if(q==="system-admin"&&await r0(N),q==="session-admin"){for(const U of ee)try{await Zv(U,N)}catch(Y){console.error(`Error removing session admin from ${U}:`,Y)}for(const U of ee)try{await aS(U,N)}catch(Y){console.error(`Error removing stakeholder from ${U}:`,Y)}}else for(const U of V)try{await Zv(U.id,N),await aS(U.id,N)}catch{}await Kr(V)}catch(U){console.error("Error removing roles:",U),alert("Failed to remove roles. Please try again.")}},ps=async(N,A)=>{const F=l.find(U=>U.id===N);if(F){if(q==="session-admin"){if(F.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const U=`Are you sure you want to remove ${A} as a stakeholder from all sessions you manage?`;if(!confirm(U))return;try{let Y=0;for(const ue of V)try{await e0(ue.id,F.email),Y++}catch($){console.error(`Error removing stakeholder from session ${ue.id}:`,$)}await Kr(V),Y>0?alert(`${A} has been removed as a stakeholder from ${Y} session(s) you manage.`):alert(`${A} was not a stakeholder in any of the sessions you manage.`)}catch(Y){console.error("Error removing stakeholder:",Y),alert("Failed to remove stakeholder. Please try again.")}return}je(F),ke(!0)}},Ri=async()=>{var N;if(ve){if(nr.has(ve.id)){const A=bn(ve);alert(`Cannot delete this protected account${A?` (${A})`:""}. This protects against accidentally locking important users out of the system.`),ke(!1),je(null);return}yt(!0);try{if(!e)throw new Error("You must be logged in to delete users");const F=`${Se.supabaseUrl}/functions/v1/delete-user`,U=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se.supabaseKey}`},body:JSON.stringify({userId:ve.id,currentUserId:e.id})});if(!U.ok){let $="Failed to delete user";try{$=(await U.json()).error||$}catch{$=`Server returned ${U.status}: ${U.statusText}`}throw new Error($)}const Y=await U.json();u($=>$.filter(ne=>ne.id!==ve.id)),ke(!1);const ue=ve.id;je(null);try{await Kr(V)}catch($){console.error("Error reloading users after deletion:",$)}}catch(A){console.error("Error deleting user:",A);const F=(A==null?void 0:A.message)||((N=A==null?void 0:A.error)==null?void 0:N.message)||"Unknown error";u(U=>!U.find(ue=>ue.id===(ve==null?void 0:ve.id))&&ve?[...U,ve].sort((ue,$)=>(ue.name||ue.email).localeCompare($.name||$.email)):U),alert(`Failed to delete user: ${F}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await Kr(V)}catch(U){console.error("Error reloading users after failed deletion:",U)}}finally{yt(!1)}}},Ks=()=>{ke(!1),je(null)},gs=async()=>{if(!ht)return;if(!gt.trim()){alert("Name is required");return}if(!cr.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(cr.trim())){alert("Please enter a valid email address");return}Ct(!0);try{const{error:A}=await Se.from("users").update({name:gt.trim(),email:cr.trim().toLowerCase()}).eq("id",ht.id);if(A)throw A;u(F=>F.map(U=>U.id===ht.id?{...U,name:gt.trim(),email:cr.trim().toLowerCase()}:U)),_e(!1),pt(null),Oe(""),Ar("")}catch(A){console.error("Error updating user:",A),alert("Failed to update user. Please try again.")}finally{Ct(!1)}},fo=()=>{_(!1),vn(!0),It({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Yt(Vu()),$r(""),dr([]),os(""),Vr([]),sr(),vr(!0)},ia=()=>{vn(!1),It({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Yt(Vu()),$r(""),dr([]),os(""),Vr([]),an(!0),Hr(!0),xr({sessionAdmin:!1,stakeholder:!1}),vr(!0)};v.useEffect(()=>{(async()=>{var F,U,Y,ue;try{const{data:{session:$}}=await Se.auth.getSession();if($){const ne=((U=(F=$.user)==null?void 0:F.app_metadata)==null?void 0:U.provider)==="azure"||((ue=(Y=$.user)==null?void 0:Y.identities)==null?void 0:ue.some(Ce=>Ce.provider==="azure"));Rr(ne||!1)}else Rr(!1)}catch($){console.error("Error checking Azure sign-in status:",$),Rr(!1)}})();const{data:{subscription:A}}=Se.auth.onAuthStateChange((F,U)=>{var Y,ue,$,ne;if(U){const Ce=((ue=(Y=U.user)==null?void 0:Y.app_metadata)==null?void 0:ue.provider)==="azure"||((ne=($=U.user)==null?void 0:$.identities)==null?void 0:ne.some(Ke=>Ke.provider==="azure"));Rr(Ce||!1)}else Rr(!1)});return()=>{A.unsubscribe()}},[]);const $i=async()=>{try{const N=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:A}=await Se.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${N}/users`,scopes:"email openid profile User.ReadBasic.All"}});A&&(console.error("Azure sign-in error:",A),Yt(F=>({...F,error:"Failed to sign in with Microsoft. Please try again."})))}catch(N){console.error("Azure sign-in error:",N),Yt(A=>({...A,error:"Failed to sign in with Microsoft. Please try again."}))}},re=async N=>{if(Yt(A=>({...A,searchTerm:N,isSearching:!0,showResults:!1,error:""})),!N||N.trim().length<2){Yt(A=>({...A,results:[],isSearching:!1,error:""}));return}try{const A=await KZ(N);Yt(F=>({...F,results:A,isSearching:!1,showResults:A.length>0,error:""}))}catch(A){console.error("Error searching Azure AD users:",A);const F=(A==null?void 0:A.message)||"Failed to search company users. Please try again.";Yt(U=>({...U,results:[],isSearching:!1,showResults:!1,error:F}))}},Ue=N=>{let A="";if(N.givenName&&N.surname)A=`${N.givenName} ${N.surname}`;else if(N.displayName){const F=N.displayName.trim();if(F.includes(",")){const U=F.split(",").map(Y=>Y.trim());U.length===2?A=`${U[1]} ${U[0]}`:A=F}else A=F}else A=N.mail||N.userPrincipalName||"";It({...Ze,name:A,email:N.mail||N.userPrincipalName}),Yt(Vu()),vr(!1)},rt=async()=>{if(!Ze.name.trim()||!Ze.email.trim()){alert("Please fill in all required fields (Name, Email)");return}_r(!0);try{const{data:N,error:A}=await Se.from("users").insert({name:Ze.name.trim(),email:Ze.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(A)throw A;if(!N)throw new Error("User creation failed");const F=N.id;if(q==="system-admin"&&Ze.isSystemAdmin&&await _h(F),q==="system-admin"&&Wr.sessionAdmin&&Er)if(fr)for(const ue of Jn)try{await Oc(ue.id,F)}catch($){console.error(`Error adding session admin role to session ${ue.id}:`,$)}else for(const ue of Ze.sessionAdminIds)try{await Oc(ue,F)}catch($){console.error("Error adding session admin role:",$)}console.log("Adding stakeholder to sessions:",Ze.stakeholderSessionIds),console.log("View mode:",q),console.log("User admin sessions:",ee),console.log("All sessions:",V.map(ue=>({id:ue.id,title:ue.title})));let U=[];if(q==="session-admin"?zt&&Dt?U=lr.map(ue=>ue.id):zt&&!Dt&&(U=Ze.stakeholderSessionIds):q==="system-admin"&&Wr.stakeholder&&zt&&(Dt?U=lr.map(ue=>ue.id):U=Ze.stakeholderSessionIds),U.length===0)console.log("No stakeholder sessions to add");else{for(const ue of U){if(q==="session-admin"&&!V.some(ne=>ne.id===ue)){console.warn(`Skipping session ${ue} - not in managed sessions`);continue}try{console.log(`Adding ${Ze.email} as stakeholder to session ${ue}`);const $=await sS(ue,Ze.email,Ze.name);console.log(`Successfully added stakeholder to session ${ue}:`,$)}catch($){console.error(`Error adding stakeholder role to session ${ue}:`,$);const ne=($==null?void 0:$.message)||($==null?void 0:$.toString())||"Unknown error";alert(`Warning: Failed to add ${Ze.email} to session ${ue}.

Error: ${ne}`)}}console.log("Finished adding stakeholder roles")}let Y="User";Ze.isSystemAdmin?Y="System Admin":Wr.sessionAdmin&&Er&&(fr||Ze.sessionAdminIds.length>0)?Y="Session Admin":(q==="session-admin"&&zt&&(Dt||Ze.stakeholderSessionIds.length>0)||q==="system-admin"&&Wr.stakeholder&&zt&&(Dt||Ze.stakeholderSessionIds.length>0))&&(Y="Stakeholder"),ia(),await Kr(V),sn({email:Ze.email,userType:Y}),Mr(!0)}catch(N){console.error("Error creating user:",N),alert(`Failed to create user: ${N.message||"Unknown error"}`)}finally{_r(!1)}},Pt=N=>{It(A=>({...A,sessionAdminIds:A.sessionAdminIds.includes(N)?A.sessionAdminIds.filter(F=>F!==N):[...A.sessionAdminIds,N]}))},Lr=N=>{It(A=>({...A,stakeholderSessionIds:A.stakeholderSessionIds.includes(N)?A.stakeholderSessionIds.filter(F=>F!==N):[...A.stakeholderSessionIds,N]}))},ir=N=>{const F=N.split("T")[0].split(" ")[0].split("-");if(F.length!==3)return new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const U=parseInt(F[0],10),Y=parseInt(F[1],10)-1,ue=parseInt(F[2],10);return new Date(U,Y,ue).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},kn=N=>{const A=new Date,F=new Date(N.start_date),U=new Date(N.end_date);return N.is_active&&A>=F&&A<=U?{text:"Active",color:"text-green-600"}:A<F?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Gr=N=>{const A=new Date(N.start_date),F=new Date(N.end_date),U=A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Y=F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${U} - ${Y}`},ys=N=>N.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(Ss,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):N.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Wn,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",N.roles.sessionAdminCount,")"]}):N.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(bs,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",N.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),_a=N=>N?N==="session-admin"?V.filter(A=>!ze.adminSessions.includes(A.id)):N==="remove-stakeholder"?V.filter(A=>ze.stakeholderSessions.includes(A.id)&&(q==="system-admin"||ee.includes(A.id))):V.filter(A=>!ze.stakeholderSessions.includes(A.id)):[],Ca=(N,A)=>A?A==="session-admin"?N.roles.sessionAdminCount<V.length:N.roles.stakeholderSessionCount<V.length:!1;return be||f?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:be?"Checking access...":"Loading users..."})]})}):W?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:ui,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:xn}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.name,W&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!W&&oe&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:K,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(W||oe)&&a.jsxs("button",{onClick:fo,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(is,{className:"h-4 w-4 mr-2"}),q==="session-admin"?"Add Stakeholder":"Add User"]}),(W||oe)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(On,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),Rt(N)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>_(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ni,{className:"h-5 w-5 text-gray-700"})})}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(W||oe)&&a.jsxs("button",{onClick:()=>{_(!1),fo()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(is,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:q==="session-admin"?"Add Stakeholder":"Add User"})]}),(W||oe)&&n&&a.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Wn,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(On,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),_(!1),Rt(N)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Hn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(KS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&a.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("select",{value:j==="system-admin"&&q==="session-admin"?"session-admin":j,onChange:N=>b(N.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[q!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),q!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),q!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."}):d.map(N=>{var A,F;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:N.name||N.email}),N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),N.roles.isSystemAdmin&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),N.roles.sessionAdminCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",N.roles.sessionAdminCount,")"]}),N.roles.stakeholderSessionCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",N.roles.stakeholderSessionCount,")"]}),bn(N)&&a.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",bn(N),")"]}),Et(N)&&a.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(N),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:N.email})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:U=>{ce.current[N.id]=U},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${N.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(HS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const U=ce.current[N.id];if(!U)return{};const Y=U.getBoundingClientRect();return window.innerWidth<768?{top:`${Y.bottom+4}px`,right:`${window.innerWidth-Y.right+4}px`,left:"auto"}:{}})(),children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),q==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>Sn(N.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(Ss,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>Sn(N.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(Ss,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ca(N,"session-admin")&&a.jsxs("button",{onClick:()=>jn(N,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Wn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ca(N,"stakeholder")&&a.jsxs("button",{onClick:()=>jn(N,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(bs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),q==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(U=>ee.includes(U.id))&&a.jsxs("button",{onClick:()=>jn(N,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Ru,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ms(N.id,N.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Ru,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(q==="system-admin"||q==="session-admin"&&N.roles.stakeholderSessionCount>0&&((A=N.stakeholderInSessions)==null?void 0:A.some(U=>V.some(Y=>Y.id===U.id)))&&!Z.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),q==="system-admin"&&a.jsxs("button",{onClick:()=>{pt(N),Oe(N.name),Ar(N.email),_e(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(rd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(q==="system-admin"||q==="session-admin"&&N.roles.stakeholderSessionCount>0&&((F=N.stakeholderInSessions)==null?void 0:F.some(U=>V.some(Y=>Y.id===U.id))))&&!Z.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),ps(N.id,N.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||q==="system-admin"&&nr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||q==="system-admin"&&nr.has(N.id),children:[a.jsx(Qi,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:q==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:q==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":nr.has(N.id)?`Cannot delete protected account${bn(N)?` (${bn(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:ys(N)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[N.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(GS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[N.roles.sessionAdminCount," as Session Admin"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Y=pe(N.adminInSessions)||N.adminInSessions[0],ue=N.adminInSessions.length>1,$=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Y&&a.jsxs("button",{onClick:async ne=>{ne.stopPropagation(),await r(Y),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(Y)})]}),ue&&a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),z($?null:{userId:N.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:$?a.jsx(Yu,{className:"h-2.5 w-2.5"}):a.jsx(Bn,{className:"h-2.5 w-2.5"})}),$?"Hide":"Show"]}),$&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.adminInSessions.filter(ne=>ne.id!==(Y==null?void 0:Y.id)).map(ne=>a.jsxs("button",{onClick:async Ce=>{Ce.stopPropagation(),await r(ne),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(ne)})]},ne.id))})]})})()})]}),N.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(bs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[N.roles.stakeholderSessionCount," as Stakeholder"]})]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Y=pe(N.stakeholderInSessions)||N.stakeholderInSessions[0],ue=N.stakeholderInSessions.length>1,$=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Y&&a.jsxs("button",{onClick:async ne=>{ne.stopPropagation(),await r(Y),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(Y)})]}),ue&&a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),z($?null:{userId:N.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:$?a.jsx(Yu,{className:"h-2.5 w-2.5"}):a.jsx(Bn,{className:"h-2.5 w-2.5"})}),$?"Hide":"Show"]}),$&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.stakeholderInSessions.filter(ne=>ne.id!==(Y==null?void 0:Y.id)).map(ne=>a.jsxs("button",{onClick:async Ce=>{Ce.stopPropagation(),await r(ne),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(ne)})]},ne.id))})]})})()})]}),N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?ir(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const Y=pe(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const ue=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Y&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Y.assignedAt?ir(Y.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Y.assignedByName||"System"]})]}),ue&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.adminInSessions.filter($=>$.id!==(Y==null?void 0:Y.id)).map($=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:$.assignedAt?ir($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",$.assignedByName||"System"]})]},$.id))})]})})()}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const Y=pe(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const ue=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Y&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Y.assignedAt?ir(Y.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Y.assignedByName||"System"]})]}),ue&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.stakeholderInSessions.filter($=>$.id!==(Y==null?void 0:Y.id)).map($=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:$.assignedAt?ir($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",$.assignedByName||"System"]})]},$.id))})]})})()})})]})]})]})]},N.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."})}):d.map(N=>{var A,F,U,Y;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>I(N.id),onMouseLeave:()=>I(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.name,N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),bn(N)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",bn(N),")"]}),Et(N)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(N),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:ys(N)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Ke;const ue=((Ke=N.adminInSessions)==null?void 0:Ke.length)||0,$=ue>1,ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin",Ce=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(GS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",ue," session",ue!==1?"s":""]}),$&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[ne?a.jsx(Yu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx(Bn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:ne?"Hide":"Show"})]})]});return $?a.jsx("button",{onClick:Ie=>{Ie.stopPropagation(),z(ne?null:{userId:N.id,role:"admin"})},className:"text-left",children:a.jsx(Ce,{})}):a.jsx(Ce,{})})()}),(()=>{const $=pe(N.adminInSessions)||N.adminInSessions[0],ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[$&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${N.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Ce=>{Ce.stopPropagation(),await r($),s("/admin")},children:[J===`${N.id}-${$.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:$.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Gr($)})]})]}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(Ce=>Ce.id!==($==null?void 0:$.id)).map((Ce,Ke)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${N.id}-${Ce.id}`),onMouseLeave:()=>H(null),onClick:async Ie=>{Ie.stopPropagation(),await r(Ce),s("/admin")},children:[J===`${N.id}-${Ce.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Ce.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Gr(Ce)})]})]},Ce.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Ke;const ue=((Ke=N.stakeholderInSessions)==null?void 0:Ke.length)||0,$=ue>1,ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder",Ce=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(bs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",ue," session",ue!==1?"s":""]}),$&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[ne?a.jsx(Yu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx(Bn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:ne?"Hide":"Show"})]})]});return $?a.jsx("button",{onClick:Ie=>{Ie.stopPropagation(),z(ne?null:{userId:N.id,role:"stakeholder"})},className:"text-left",children:a.jsx(Ce,{})}):a.jsx(Ce,{})})()}),(()=>{const $=pe(N.stakeholderInSessions)||N.stakeholderInSessions[0],ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[$&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${N.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Ce=>{Ce.stopPropagation(),await r($),s("/admin")},children:[J===`${N.id}-${$.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:$.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Gr($)})]})]}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(Ce=>Ce.id!==($==null?void 0:$.id)).map((Ce,Ke)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${N.id}-${Ce.id}`),onMouseLeave:()=>H(null),onClick:async Ie=>{Ie.stopPropagation(),await r(Ce),s("/admin")},children:[J===`${N.id}-${Ce.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Ce.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Gr(Ce)})]})]},Ce.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?ir(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?ir(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),(()=>{const $=pe(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[$&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Ce=>{Ce.stopPropagation(),await r($),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:$.assignedAt?ir($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",$.assignedByName||"System"]})]})}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(Ce=>Ce.id!==($==null?void 0:$.id)).map((Ce,Ke)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${Ce.id}`),onMouseLeave:()=>H(null),onClick:async Ie=>{Ie.stopPropagation(),await r(Ce),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Ce.assignedAt?ir(Ce.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",Ce.assignedByName||"System"]})]})},Ce.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!N.adminInSessions||N.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?ir(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(bs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const $=pe(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const ne=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[$&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Ce=>{Ce.stopPropagation(),await r($),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:$.assignedAt?ir($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",$.assignedByName||"System"]})]})}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(Ce=>Ce.id!==($==null?void 0:$.id)).map((Ce,Ke)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${Ce.id}`),onMouseLeave:()=>H(null),onClick:async Ie=>{Ie.stopPropagation(),await r(Ce),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Ce.assignedAt?ir(Ce.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",Ce.assignedByName||"System"]})]})},Ce.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${T===N.id?N.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:ue=>{ce.current[N.id]=ue},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(HS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((A=ce.current[N.id])==null?void 0:A.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((F=ce.current[N.id])==null?void 0:F.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),q==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>Sn(N.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(Ss,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>Sn(N.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(Ss,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ca(N,"session-admin")&&a.jsxs("button",{onClick:()=>jn(N,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Wn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ca(N,"stakeholder")&&a.jsxs("button",{onClick:()=>jn(N,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(bs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),q==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(ue=>ee.includes(ue.id))&&a.jsxs("button",{onClick:()=>jn(N,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Ru,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ms(N.id,N.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Ru,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(q==="system-admin"||q==="session-admin"&&N.roles.stakeholderSessionCount>0&&((U=N.stakeholderInSessions)==null?void 0:U.some(ue=>V.some($=>$.id===ue.id)))&&!Z.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),q==="system-admin"&&a.jsxs("button",{onClick:()=>{pt(N),Oe(N.name),Ar(N.email),_e(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(rd,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(q==="system-admin"||q==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Y=N.stakeholderInSessions)==null?void 0:Y.some(ue=>V.some($=>$.id===ue.id))))&&!Z.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),ps(N.id,N.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||q==="system-admin"&&nr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||q==="system-admin"&&nr.has(N.id),children:[a.jsx(Qi,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:q==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:q==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":nr.has(N.id)?`Cannot delete protected account${bn(N)?` (${bn(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},N.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(is,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ss,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(bs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(is,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ss,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wn,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(bs,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})}),(W||oe)&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(oe||W)&&Te("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${q==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Wn,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{W&&Te("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${q==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!W,title:W?"System Admin View":"Only available for System Admins",children:[a.jsx(Ss,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),le&&ye&&Q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:fi,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:Q==="session-admin"?"Add Session Admin":Q==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:Q==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:ye.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:ye.name})," as ",Q==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:fi,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx(GZ,{products:Jt,sessions:_a(Q),selectedProductId:ft,onProductChange:N=>{$t(N),ie([]),Qt(!0)},useAllSessions:_t,onToggleAllSessions:N=>{Qt(N),N&&ie([])},selectedSessionIds:M,onSessionToggle:N=>{M.includes(N)?ie(M.filter(A=>A!==N)):ie([...M,N])},getSessionStatus:kn,formatSessionDateRange:Gr,filterSessions:Hs})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:Di,disabled:!ft||!_t&&M.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${ft&&(_t||M.length>0)?Q==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const A=(_t?Hs(_a(Q),ft||"").length:M.length)>1;return Q==="remove-stakeholder"?`Remove from Session${A?"s":""}`:Q==="session-admin"?`Add to Session${A?"s":""} as Session Admin`:`Add to Session${A?"s":""} as a Stakeholder`})()})})]})})}),ge&&ve&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Ru,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(bs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ve.name}),a.jsx("div",{className:"text-sm text-gray-500",children:ve.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),ve.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Ss,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),ve.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Wn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",ve.roles.sessionAdminCount," session",ve.roles.sessionAdminCount!==1?"s":""]})]}),ve.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(bs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",ve.roles.stakeholderSessionCount," session",ve.roles.stakeholderSessionCount!==1?"s":""]})]}),!ve.roles.isSystemAdmin&&ve.roles.sessionAdminCount===0&&ve.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),ve.adminInSessions&&ve.adminInSessions.length>0||ve.stakeholderInSessions&&ve.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[ve.adminInSessions&&ve.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Wn,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",ve.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ve.adminInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]}),ve.stakeholderInSessions&&ve.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(bs,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",ve.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ve.stakeholderInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Ks,disabled:Be,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ri,disabled:Be,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Be?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),Ft&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:ia,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(is,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:q==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:q==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:ia,disabled:qt,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[Br?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),Es===!1?a.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),a.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),a.jsxs("button",{type:"button",onClick:$i,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[a.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:B,children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(KS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:Zt.searchTerm,onChange:N=>{const A=N.target.value;Yt(F=>({...F,searchTerm:A})),re(A)},onFocus:()=>{Zt.results.length>0&&Yt(N=>({...N,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),Zt.isSearching&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Zt.showResults&&Zt.results.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Zt.results.map(N=>a.jsxs("button",{type:"button",onClick:()=>Ue(N),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.displayName}),a.jsx("div",{className:"text-sm text-gray-500",children:N.mail||N.userPrincipalName}),N.jobTitle&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:N.jobTitle})]},N.id))}),Zt.error&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[a.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),a.jsx("div",{className:"mb-2",children:Zt.error}),Zt.error.includes("User.ReadBasic.All")&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[a.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),a.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),a.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),a.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),a.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Zt.searchTerm.length>=2&&!Zt.isSearching&&Zt.results.length===0&&!Zt.error&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):a.jsx("div",{children:a.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{vr(!0),Yt(Vu())},children:"Search Company Users again"})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ze.name,onChange:N=>It({...Ze,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Ze.email,onChange:N=>It({...Ze,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),q==="system-admin"&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:a.jsx(Ss,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Ze.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:Ze.isSystemAdmin,onChange:N=>It({...Ze,isSystemAdmin:N.target.checked}),className:"sr-only"}),a.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Ze.isSystemAdmin?"#C89212":"#ffffff"},children:Ze.isSystemAdmin&&a.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),q==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>xr(N=>({sessionAdmin:!N.sessionAdmin,stakeholder:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:on?"scale(1.2)":"scale(1)"},children:a.jsx(Wn,{className:"h-4 w-4 text-[#576C71]"})}),a.jsx("span",{children:"Session Admin"}),on&&ae&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:ae})]}),on&&a.jsx("button",{type:"button",onClick:Or,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),a.jsx(ns,{className:`h-4 w-4 text-gray-500 transition-transform ${Wr.sessionAdmin?"rotate-180":""}`})]}),Wr.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(wh,{products:Jt,value:Er,onChange:N=>{os(N),It(A=>({...A,sessionAdminIds:[]})),Hr(!0)},label:"Product *"})}),Er&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>Hr(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${fr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Hr(!0),It(N=>({...N,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${fr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),fr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!fr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Jn.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Jn.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.sessionAdminIds.includes(N.id),onChange:()=>Pt(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${kn(N).color}`,children:kn(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(N)})]})]},N.id))})]})]})]})]}),q==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(bs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ze.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ze.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(wh,{products:Jt,value:zt,onChange:N=>{$r(N),It(A=>({...A,stakeholderSessionIds:[]})),an(!0)},label:"Product *"})}),zt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{an(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{an(!0),It(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Dt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Dt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),lr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:lr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(N.id),onChange:()=>Lr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(N)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${kn(N).color}`,children:kn(N).text})})]})]},N.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>xr(N=>({stakeholder:!N.stakeholder,sessionAdmin:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:wn?"scale(1.2)":"scale(1)"},children:a.jsx(bs,{className:"h-4 w-4 text-[#8B5A4A]"})}),a.jsx("span",{children:"Stakeholder"}),wn&&Ne&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Ne})]}),wn&&a.jsx("button",{type:"button",onClick:na,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),a.jsx(ns,{className:`h-4 w-4 text-gray-500 transition-transform ${Wr.stakeholder?"rotate-180":""}`})]}),Wr.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(wh,{products:Jt,value:zt,onChange:N=>{$r(N),It(A=>({...A,stakeholderSessionIds:[]})),an(!0)},label:"Product *"})}),zt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{an(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{an(!0),It(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Dt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Dt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),lr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:lr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(N.id),onChange:()=>Lr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${kn(N).color}`,children:kn(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Gr(N)})]})]},N.id))})]})]})]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:rt,disabled:!!(qt||!Ze.name.trim()||!Ze.email.trim()||q==="session-admin"&&(!zt||!Dt&&Ze.stakeholderSessionIds.length===0)||q==="system-admin"&&Wr.sessionAdmin&&Er&&!fr&&Ze.sessionAdminIds.length===0||q==="system-admin"&&Wr.stakeholder&&zt&&!Dt&&Ze.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:qt?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$e(!0)]}):$e(!1)})})]})})}),qe&&ht&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(rd,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{_e(!1),pt(null),Oe(""),Ar("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:gt,onChange:N=>Oe(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Pr})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:cr,onChange:N=>Ar(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Pr})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{_e(!1),pt(null),Oe(""),Ar("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:Pr,children:"Cancel"}),a.jsx("button",{onClick:gs,disabled:Pr||!gt.trim()||!cr.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Pr?"Updating...":"Update User"})]})]})})}),As&&qs&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(or,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[qs.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{Mr(!1),sn(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ls,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:qs.email})]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Gu,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),a.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{Mr(!1),sn(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const JZ="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",XZ=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:JZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function QZ(){return a.jsx(TM,{children:a.jsxs(MR,{children:[a.jsx(XZ,{}),a.jsx(T5,{basename:"/feature-voting-app",children:a.jsxs(l5,{children:[a.jsx(Xs,{path:"/",element:a.jsx(a5,{to:"/login",replace:!0})}),a.jsx(Xs,{path:"/login",element:a.jsx(FZ,{})}),a.jsx(Xs,{path:"/sessions",element:a.jsx(zZ,{})}),a.jsx(Xs,{path:"/create-session",element:a.jsx(UZ,{})}),a.jsx(Xs,{path:"/manage-stakeholders",element:a.jsx(WZ,{})}),a.jsx(Xs,{path:"/manage-admins",element:a.jsx(qZ,{})}),a.jsx(Xs,{path:"/vote",element:a.jsx(Mv,{adminMode:!1})}),a.jsx(Xs,{path:"/admin",element:a.jsx(Mv,{adminMode:!0})}),a.jsx(Xs,{path:"/results",element:a.jsx(Mv,{resultsMode:!0})}),a.jsx(Xs,{path:"/unauthorized",element:a.jsx(VZ,{})}),a.jsx(Xs,{path:"/system-admins",element:a.jsx(HZ,{})}),a.jsx(Xs,{path:"/users",element:a.jsx(YZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}yD.createRoot(document.getElementById("root")).render(a.jsx(it.StrictMode,{children:a.jsx(QZ,{})}));
