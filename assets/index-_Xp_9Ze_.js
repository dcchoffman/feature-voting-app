var WI=Object.defineProperty;var VI=(e,t,r)=>t in e?WI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var lg=(e,t,r)=>VI(e,typeof t!="symbol"?t+"":t,r);function qI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ri(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HI(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var cg={exports:{}},Vc={},ug={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function KI(){if(G1)return jt;G1=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(I,H,Pe){this.props=I,this.context=H,this.refs=j,this.updater=Pe||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function k(){}k.prototype=S.prototype;function E(I,H,Pe){this.props=I,this.context=H,this.refs=j,this.updater=Pe||x}var N=E.prototype=new k;N.constructor=E,b(N,S.prototype),N.isPureReactComponent=!0;var O=Array.isArray,P=Object.prototype.hasOwnProperty,T={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function K(I,H,Pe){var Q,ne={},ue=null,ye=null;if(H!=null)for(Q in H.ref!==void 0&&(ye=H.ref),H.key!==void 0&&(ue=""+H.key),H)P.call(H,Q)&&!R.hasOwnProperty(Q)&&(ne[Q]=H[Q]);var we=arguments.length-2;if(we===1)ne.children=Pe;else if(1<we){for(var B=Array(we),Re=0;Re<we;Re++)B[Re]=arguments[Re+2];ne.children=B}if(I&&I.defaultProps)for(Q in we=I.defaultProps,we)ne[Q]===void 0&&(ne[Q]=we[Q]);return{$$typeof:e,type:I,key:ue,ref:ye,props:ne,_owner:T.current}}function z(I,H){return{$$typeof:e,type:I.type,key:H,ref:I.ref,props:I.props,_owner:I._owner}}function G(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function W(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Pe){return H[Pe]})}var q=/\/+/g;function de(I,H){return typeof I=="object"&&I!==null&&I.key!=null?W(""+I.key):H.toString(36)}function oe(I,H,Pe,Q,ne){var ue=typeof I;(ue==="undefined"||ue==="boolean")&&(I=null);var ye=!1;if(I===null)ye=!0;else switch(ue){case"string":case"number":ye=!0;break;case"object":switch(I.$$typeof){case e:case t:ye=!0}}if(ye)return ye=I,ne=ne(ye),I=Q===""?"."+de(ye,0):Q,O(ne)?(Pe="",I!=null&&(Pe=I.replace(q,"$&/")+"/"),oe(ne,H,Pe,"",function(Re){return Re})):ne!=null&&(G(ne)&&(ne=z(ne,Pe+(!ne.key||ye&&ye.key===ne.key?"":(""+ne.key).replace(q,"$&/")+"/")+I)),H.push(ne)),1;if(ye=0,Q=Q===""?".":Q+":",O(I))for(var we=0;we<I.length;we++){ue=I[we];var B=Q+de(ue,we);ye+=oe(ue,H,Pe,B,ne)}else if(B=y(I),typeof B=="function")for(I=B.call(I),we=0;!(ue=I.next()).done;)ue=ue.value,B=Q+de(ue,we++),ye+=oe(ue,H,Pe,B,ne);else if(ue==="object")throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ye}function J(I,H,Pe){if(I==null)return I;var Q=[],ne=0;return oe(I,Q,"","",function(ue){return H.call(Pe,ue,ne++)}),Q}function Z(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(Pe){(I._status===0||I._status===-1)&&(I._status=1,I._result=Pe)},function(Pe){(I._status===0||I._status===-1)&&(I._status=2,I._result=Pe)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var ae={current:null},re={transition:null},me={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:re,ReactCurrentOwner:T};function pe(){throw Error("act(...) is not supported in production builds of React.")}return jt.Children={map:J,forEach:function(I,H,Pe){J(I,function(){H.apply(this,arguments)},Pe)},count:function(I){var H=0;return J(I,function(){H++}),H},toArray:function(I){return J(I,function(H){return H})||[]},only:function(I){if(!G(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},jt.Component=S,jt.Fragment=r,jt.Profiler=s,jt.PureComponent=E,jt.StrictMode=n,jt.Suspense=d,jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,jt.act=pe,jt.cloneElement=function(I,H,Pe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Q=b({},I.props),ne=I.key,ue=I.ref,ye=I._owner;if(H!=null){if(H.ref!==void 0&&(ue=H.ref,ye=T.current),H.key!==void 0&&(ne=""+H.key),I.type&&I.type.defaultProps)var we=I.type.defaultProps;for(B in H)P.call(H,B)&&!R.hasOwnProperty(B)&&(Q[B]=H[B]===void 0&&we!==void 0?we[B]:H[B])}var B=arguments.length-2;if(B===1)Q.children=Pe;else if(1<B){we=Array(B);for(var Re=0;Re<B;Re++)we[Re]=arguments[Re+2];Q.children=we}return{$$typeof:e,type:I.type,key:ne,ref:ue,props:Q,_owner:ye}},jt.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},jt.createElement=K,jt.createFactory=function(I){var H=K.bind(null,I);return H.type=I,H},jt.createRef=function(){return{current:null}},jt.forwardRef=function(I){return{$$typeof:u,render:I}},jt.isValidElement=G,jt.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:Z}},jt.memo=function(I,H){return{$$typeof:m,type:I,compare:H===void 0?null:H}},jt.startTransition=function(I){var H=re.transition;re.transition={};try{I()}finally{re.transition=H}},jt.unstable_act=pe,jt.useCallback=function(I,H){return ae.current.useCallback(I,H)},jt.useContext=function(I){return ae.current.useContext(I)},jt.useDebugValue=function(){},jt.useDeferredValue=function(I){return ae.current.useDeferredValue(I)},jt.useEffect=function(I,H){return ae.current.useEffect(I,H)},jt.useId=function(){return ae.current.useId()},jt.useImperativeHandle=function(I,H,Pe){return ae.current.useImperativeHandle(I,H,Pe)},jt.useInsertionEffect=function(I,H){return ae.current.useInsertionEffect(I,H)},jt.useLayoutEffect=function(I,H){return ae.current.useLayoutEffect(I,H)},jt.useMemo=function(I,H){return ae.current.useMemo(I,H)},jt.useReducer=function(I,H,Pe){return ae.current.useReducer(I,H,Pe)},jt.useRef=function(I){return ae.current.useRef(I)},jt.useState=function(I){return ae.current.useState(I)},jt.useSyncExternalStore=function(I,H,Pe){return ae.current.useSyncExternalStore(I,H,Pe)},jt.useTransition=function(){return ae.current.useTransition()},jt.version="18.3.1",jt}var Y1;function Hl(){return Y1||(Y1=1,ug.exports=KI()),ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function GI(){if(J1)return Vc;J1=1;var e=Hl(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return Vc.Fragment=r,Vc.jsx=l,Vc.jsxs=l,Vc}var Q1;function YI(){return Q1||(Q1=1,cg.exports=GI()),cg.exports}var o=YI(),v=Hl();const dt=ri(v),JI=qI({__proto__:null,default:dt},[v]);var ef={},dg={exports:{}},qn={},fg={exports:{}},hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function QI(){return X1||(X1=1,(function(e){function t(re,me){var pe=re.length;re.push(me);e:for(;0<pe;){var I=pe-1>>>1,H=re[I];if(0<s(H,me))re[I]=me,re[pe]=H,pe=I;else break e}}function r(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var me=re[0],pe=re.pop();if(pe!==me){re[0]=pe;e:for(var I=0,H=re.length,Pe=H>>>1;I<Pe;){var Q=2*(I+1)-1,ne=re[Q],ue=Q+1,ye=re[ue];if(0>s(ne,pe))ue<H&&0>s(ye,ne)?(re[I]=ye,re[ue]=pe,I=ue):(re[I]=ne,re[Q]=pe,I=Q);else if(ue<H&&0>s(ye,pe))re[I]=ye,re[ue]=pe,I=ue;else break e}}return me}function s(re,me){var pe=re.sortIndex-me.sortIndex;return pe!==0?pe:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,b=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(re){for(var me=r(m);me!==null;){if(me.callback===null)n(m);else if(me.startTime<=re)n(m),me.sortIndex=me.expirationTime,t(d,me);else break;me=r(m)}}function O(re){if(j=!1,N(re),!b)if(r(d)!==null)b=!0,Z(P);else{var me=r(m);me!==null&&ae(O,me.startTime-re)}}function P(re,me){b=!1,j&&(j=!1,k(K),K=-1),x=!0;var pe=y;try{for(N(me),p=r(d);p!==null&&(!(p.expirationTime>me)||re&&!W());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var H=I(p.expirationTime<=me);me=e.unstable_now(),typeof H=="function"?p.callback=H:p===r(d)&&n(d),N(me)}else n(d);p=r(d)}if(p!==null)var Pe=!0;else{var Q=r(m);Q!==null&&ae(O,Q.startTime-me),Pe=!1}return Pe}finally{p=null,y=pe,x=!1}}var T=!1,R=null,K=-1,z=5,G=-1;function W(){return!(e.unstable_now()-G<z)}function q(){if(R!==null){var re=e.unstable_now();G=re;var me=!0;try{me=R(!0,re)}finally{me?de():(T=!1,R=null)}}else T=!1}var de;if(typeof E=="function")de=function(){E(q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,J=oe.port2;oe.port1.onmessage=q,de=function(){J.postMessage(null)}}else de=function(){S(q,0)};function Z(re){R=re,T||(T=!0,de())}function ae(re,me){K=S(function(){re(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,Z(P))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(re){switch(y){case 1:case 2:case 3:var me=3;break;default:me=y}var pe=y;y=me;try{return re()}finally{y=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=y;y=re;try{return me()}finally{y=pe}},e.unstable_scheduleCallback=function(re,me,pe){var I=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?I+pe:I):pe=I,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=pe+H,re={id:f++,callback:me,priorityLevel:re,startTime:pe,expirationTime:H,sortIndex:-1},pe>I?(re.sortIndex=pe,t(m,re),r(d)===null&&re===r(m)&&(j?(k(K),K=-1):j=!0,ae(O,pe-I))):(re.sortIndex=H,t(d,re),b||x||(b=!0,Z(P))),re},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(re){var me=y;return function(){var pe=y;y=me;try{return re.apply(this,arguments)}finally{y=pe}}}})(hg)),hg}var Z1;function XI(){return Z1||(Z1=1,fg.exports=QI()),fg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ej;function ZI(){if(ej)return qn;ej=1;var e=Hl(),t=XI();function r(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(s[a]=c,a=0;a<c.length;a++)n.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(a){return d.call(p,a)?!0:d.call(f,a)?!1:m.test(a)?p[a]=!0:(f[a]=!0,!1)}function x(a,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,c,h,g){if(c===null||typeof c>"u"||x(a,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function j(a,c,h,g,w,_,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=a,this.type=c,this.sanitizeURL=_,this.removeEmptyString=A}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new j(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];S[c]=new j(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new j(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new j(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new j(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new j(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new j(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new j(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new j(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function E(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(k,E);S[c]=new j(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(k,E);S[c]=new j(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(k,E);S[c]=new j(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new j(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new j(a,1,!1,a.toLowerCase(),null,!0,!0)});function N(a,c,h,g){var w=S.hasOwnProperty(c)?S[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?a.removeAttribute(c):a.setAttribute(c,""+h)):w.mustUseProperty?a[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?a.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?a.setAttributeNS(g,c,h):a.setAttribute(c,h))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),W=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(a){return a===null||typeof a!="object"?null:(a=re&&a[re]||a["@@iterator"],typeof a=="function"?a:null)}var pe=Object.assign,I;function H(a){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+a}var Pe=!1;function Q(a,c){if(!a||Pe)return"";Pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ce){var g=ce}Reflect.construct(a,[],c)}else{try{c.call()}catch(ce){g=ce}a.call(c.prototype)}else{try{throw Error()}catch(ce){g=ce}a()}}catch(ce){if(ce&&g&&typeof ce.stack=="string"){for(var w=ce.stack.split(`
`),_=g.stack.split(`
`),A=w.length-1,$=_.length-1;1<=A&&0<=$&&w[A]!==_[$];)$--;for(;1<=A&&0<=$;A--,$--)if(w[A]!==_[$]){if(A!==1||$!==1)do if(A--,$--,0>$||w[A]!==_[$]){var U=`
`+w[A].replace(" at new "," at ");return a.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",a.displayName)),U}while(1<=A&&0<=$);break}}}finally{Pe=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?H(a):""}function ne(a){switch(a.tag){case 5:return H(a.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return a=Q(a.type,!1),a;case 11:return a=Q(a.type.render,!1),a;case 1:return a=Q(a.type,!0),a;default:return""}}function ue(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case T:return"Portal";case z:return"Profiler";case K:return"StrictMode";case de:return"Suspense";case oe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case W:return(a.displayName||"Context")+".Consumer";case G:return(a._context.displayName||"Context")+".Provider";case q:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case J:return c=a.displayName||null,c!==null?c:ue(a.type)||"Memo";case Z:c=a._payload,a=a._init;try{return ue(a(c))}catch{}}return null}function ye(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(c);case 8:return c===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function we(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function B(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Re(a){var c=B(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,_=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(A){g=""+A,_.call(this,A)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function tt(a){a._valueTracker||(a._valueTracker=Re(a))}function te(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return a&&(g=B(a)?a.checked?"true":"false":a.value),a=g,a!==h?(c.setValue(a),!0):!1}function Ee(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ue(a,c){var h=c.checked;return pe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function st(a,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=we(c.value!=null?c.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function pt(a,c){c=c.checked,c!=null&&N(a,"checked",c,!1)}function St(a,c){pt(a,c);var h=we(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?bt(a,c.type,h):c.hasOwnProperty("defaultValue")&&bt(a,c.type,we(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function _t(a,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,h||c===a.value||(a.value=c),a.defaultValue=c}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function bt(a,c,h){(c!=="number"||Ee(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var M=Array.isArray;function Y(a,c,h,g){if(a=a.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<a.length;h++)w=c.hasOwnProperty("$"+a[h].value),a[h].selected!==w&&(a[h].selected=w),w&&g&&(a[h].defaultSelected=!0)}else{for(h=""+we(h),c=null,w=0;w<a.length;w++){if(a[w].value===h){a[w].selected=!0,g&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function se(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return pe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function be(a,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(M(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}a._wrapperState={initialValue:we(h)}}function je(a,c){var h=we(c.value),g=we(c.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),c.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function ve(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Fe(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Fe(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Xe,vt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return a(c,h,g,w)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Xe.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Qt(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(a){xt.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Et[c]=Et[a]})});function kt(a,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Et.hasOwnProperty(a)&&Et[a]?(""+c).trim():c+"px"}function At(a,c){a=a.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=kt(h,c[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,w):a[h]=w}}var tr=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gr(a,c){if(c){if(tr[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function sr(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ft=null;function an(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ir=null,Er=null,Dt=null;function Br(a){if(a=Ac(a)){if(typeof ir!="function")throw Error(r(280));var c=a.stateNode;c&&(c=pd(c),ir(a.stateNode,a.type,c))}}function cr(a){Er?Dt?Dt.push(a):Dt=[a]:Er=a}function yr(){if(Er){var a=Er,c=Dt;if(Dt=Er=null,Br(a),c)for(a=0;a<c.length;a++)Br(c[a])}}function Rt(a,c){return a(c)}function Wr(){}var Ar=!1;function Mn(a,c,h){if(Ar)return a(c,h);Ar=!0;try{return Rt(a,c,h)}finally{Ar=!1,(Er!==null||Dt!==null)&&(Wr(),yr())}}function Vr(a,c){var h=a.stateNode;if(h===null)return null;var g=pd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var vr=!1;if(u)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){vr=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{vr=!1}function Fn(a,c,h,g,w,_,A,$,U){var ce=Array.prototype.slice.call(arguments,3);try{c.apply(h,ce)}catch(Ce){this.onError(Ce)}}var Ut=!1,ur=null,qr=!1,Cn=null,on={onError:function(a){Ut=!0,ur=a}};function Pr(a,c,h,g,w,_,A,$,U){Ut=!1,ur=null,Fn.apply(on,arguments)}function Hr(a,c,h,g,w,_,A,$,U){if(Pr.apply(this,arguments),Ut){if(Ut){var ce=ur;Ut=!1,ur=null}else throw Error(r(198));qr||(qr=!0,Cn=ce)}}function Kr(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function wn(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Gr(a){if(Kr(a)!==a)throw Error(r(188))}function ln(a){var c=a.alternate;if(!c){if(c=Kr(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,g=c;;){var w=h.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===h)return Gr(w),a;if(_===g)return Gr(w),c;_=_.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=_;else{for(var A=!1,$=w.child;$;){if($===h){A=!0,h=w,g=_;break}if($===g){A=!0,g=w,h=_;break}$=$.sibling}if(!A){for($=_.child;$;){if($===h){A=!0,h=_,g=w;break}if($===g){A=!0,g=_,h=w;break}$=$.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function fe(a){return a=ln(a),a!==null?_e(a):null}function _e(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=_e(a);if(c!==null)return c;a=a.sibling}return null}var Me=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,nt=t.unstable_shouldYield,D=t.unstable_requestPaint,F=t.unstable_now,ge=t.unstable_getCurrentPriorityLevel,xe=t.unstable_ImmediatePriority,Te=t.unstable_UserBlockingPriority,Oe=t.unstable_NormalPriority,Ze=t.unstable_LowPriority,$e=t.unstable_IdlePriority,Le=null,C=null;function X(a){if(C&&typeof C.onCommitFiberRoot=="function")try{C.onCommitFiberRoot(Le,a,void 0,(a.current.flags&128)===128)}catch{}}var le=Math.clz32?Math.clz32:Qe,De=Math.log,Se=Math.LN2;function Qe(a){return a>>>=0,a===0?32:31-(De(a)/Se|0)|0}var Ke=64,gt=4194304;function En(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ln(a,c){var h=a.pendingLanes;if(h===0)return 0;var g=0,w=a.suspendedLanes,_=a.pingedLanes,A=h&268435455;if(A!==0){var $=A&~w;$!==0?g=En($):(_&=A,_!==0&&(g=En(_)))}else A=h&~w,A!==0?g=En(A):_!==0&&(g=En(_));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,_=c&-c,w>=_||w===16&&(_&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=g;0<c;)h=31-le(c),w=1<<h,g|=a[h],c&=~w;return g}function es(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(a,c){for(var h=a.suspendedLanes,g=a.pingedLanes,w=a.expirationTimes,_=a.pendingLanes;0<_;){var A=31-le(_),$=1<<A,U=w[A];U===-1?(($&h)===0||($&g)!==0)&&(w[A]=es($,c)):U<=c&&(a.expiredLanes|=$),_&=~$}}function aa(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function ts(){var a=Ke;return Ke<<=1,(Ke&4194240)===0&&(Ke=64),a}function qa(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function ji(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-le(c),a[c]=h}function Tm(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var w=31-le(h),_=1<<w;c[w]=0,g[w]=-1,a[w]=-1,h&=~_}}function uc(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var g=31-le(h),w=1<<g;w&c|a[g]&c&&(a[g]|=c),h&=~w}}var L=0;function We(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var ht,ar,Yr,dc,fc,Im=!1,ed=[],oa=null,la=null,ca=null,hc=new Map,mc=new Map,ua=[],d4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ow(a,c){switch(a){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":hc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(c.pointerId)}}function pc(a,c,h,g,w,_){return a===null||a.nativeEvent!==_?(a={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},c!==null&&(c=Ac(c),c!==null&&ar(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function f4(a,c,h,g,w){switch(c){case"focusin":return oa=pc(oa,a,c,h,g,w),!0;case"dragenter":return la=pc(la,a,c,h,g,w),!0;case"mouseover":return ca=pc(ca,a,c,h,g,w),!0;case"pointerover":var _=w.pointerId;return hc.set(_,pc(hc.get(_)||null,a,c,h,g,w)),!0;case"gotpointercapture":return _=w.pointerId,mc.set(_,pc(mc.get(_)||null,a,c,h,g,w)),!0}return!1}function Tw(a){var c=Ha(a.target);if(c!==null){var h=Kr(c);if(h!==null){if(c=h.tag,c===13){if(c=wn(h),c!==null){a.blockedOn=c,fc(a.priority,function(){Yr(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function td(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Rm(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);Ft=g,h.target.dispatchEvent(g),Ft=null}else return c=Ac(h),c!==null&&ar(c),a.blockedOn=h,!1;c.shift()}return!0}function Iw(a,c,h){td(a)&&h.delete(c)}function h4(){Im=!1,oa!==null&&td(oa)&&(oa=null),la!==null&&td(la)&&(la=null),ca!==null&&td(ca)&&(ca=null),hc.forEach(Iw),mc.forEach(Iw)}function gc(a,c){a.blockedOn===c&&(a.blockedOn=null,Im||(Im=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,h4)))}function yc(a){function c(w){return gc(w,a)}if(0<ed.length){gc(ed[0],a);for(var h=1;h<ed.length;h++){var g=ed[h];g.blockedOn===a&&(g.blockedOn=null)}}for(oa!==null&&gc(oa,a),la!==null&&gc(la,a),ca!==null&&gc(ca,a),hc.forEach(c),mc.forEach(c),h=0;h<ua.length;h++)g=ua[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<ua.length&&(h=ua[0],h.blockedOn===null);)Tw(h),h.blockedOn===null&&ua.shift()}var Mo=O.ReactCurrentBatchConfig,rd=!0;function m4(a,c,h,g){var w=L,_=Mo.transition;Mo.transition=null;try{L=1,Dm(a,c,h,g)}finally{L=w,Mo.transition=_}}function p4(a,c,h,g){var w=L,_=Mo.transition;Mo.transition=null;try{L=4,Dm(a,c,h,g)}finally{L=w,Mo.transition=_}}function Dm(a,c,h,g){if(rd){var w=Rm(a,c,h,g);if(w===null)Xm(a,c,g,nd,h),Ow(a,g);else if(f4(w,a,c,h,g))g.stopPropagation();else if(Ow(a,g),c&4&&-1<d4.indexOf(a)){for(;w!==null;){var _=Ac(w);if(_!==null&&ht(_),_=Rm(a,c,h,g),_===null&&Xm(a,c,g,nd,h),_===w)break;w=_}w!==null&&g.stopPropagation()}else Xm(a,c,g,null,h)}}var nd=null;function Rm(a,c,h,g){if(nd=null,a=an(g),a=Ha(a),a!==null)if(c=Kr(a),c===null)a=null;else if(h=c.tag,h===13){if(a=wn(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return nd=a,null}function Dw(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ge()){case xe:return 1;case Te:return 4;case Oe:case Ze:return 16;case $e:return 536870912;default:return 16}default:return 16}}var da=null,$m=null,sd=null;function Rw(){if(sd)return sd;var a,c=$m,h=c.length,g,w="value"in da?da.value:da.textContent,_=w.length;for(a=0;a<h&&c[a]===w[a];a++);var A=h-a;for(g=1;g<=A&&c[h-g]===w[_-g];g++);return sd=w.slice(a,1<g?1-g:void 0)}function id(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ad(){return!0}function $w(){return!1}function rs(a){function c(h,g,w,_,A){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var $ in a)a.hasOwnProperty($)&&(h=a[$],this[$]=h?h(_):_[$]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ad:$w,this.isPropagationStopped=$w,this}return pe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),c}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=rs(Fo),vc=pe({},Fo,{view:0,detail:0}),g4=rs(vc),Fm,Lm,xc,od=pe({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==xc&&(xc&&a.type==="mousemove"?(Fm=a.screenX-xc.screenX,Lm=a.screenY-xc.screenY):Lm=Fm=0,xc=a),Fm)},movementY:function(a){return"movementY"in a?a.movementY:Lm}}),Mw=rs(od),y4=pe({},od,{dataTransfer:0}),v4=rs(y4),x4=pe({},vc,{relatedTarget:0}),zm=rs(x4),w4=pe({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),b4=rs(w4),j4=pe({},Fo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),S4=rs(j4),_4=pe({},Fo,{data:0}),Fw=rs(_4),k4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=C4[a])?!!c[a]:!1}function Um(){return E4}var A4=pe({},vc,{key:function(a){if(a.key){var c=k4[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=id(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?N4[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(a){return a.type==="keypress"?id(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?id(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),P4=rs(A4),O4=pe({},od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lw=rs(O4),T4=pe({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),I4=rs(T4),D4=pe({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),R4=rs(D4),$4=pe({},od,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),M4=rs($4),F4=[9,13,27,32],Bm=u&&"CompositionEvent"in window,wc=null;u&&"documentMode"in document&&(wc=document.documentMode);var L4=u&&"TextEvent"in window&&!wc,zw=u&&(!Bm||wc&&8<wc&&11>=wc),Uw=" ",Bw=!1;function Ww(a,c){switch(a){case"keyup":return F4.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vw(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Lo=!1;function z4(a,c){switch(a){case"compositionend":return Vw(c);case"keypress":return c.which!==32?null:(Bw=!0,Uw);case"textInput":return a=c.data,a===Uw&&Bw?null:a;default:return null}}function U4(a,c){if(Lo)return a==="compositionend"||!Bm&&Ww(a,c)?(a=Rw(),sd=$m=da=null,Lo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return zw&&c.locale!=="ko"?null:c.data;default:return null}}var B4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qw(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!B4[a.type]:c==="textarea"}function Hw(a,c,h,g){cr(g),c=fd(c,"onChange"),0<c.length&&(h=new Mm("onChange","change",null,h,g),a.push({event:h,listeners:c}))}var bc=null,jc=null;function W4(a){ub(a,0)}function ld(a){var c=Vo(a);if(te(c))return a}function V4(a,c){if(a==="change")return c}var Kw=!1;if(u){var Wm;if(u){var Vm="oninput"in document;if(!Vm){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),Vm=typeof Gw.oninput=="function"}Wm=Vm}else Wm=!1;Kw=Wm&&(!document.documentMode||9<document.documentMode)}function Yw(){bc&&(bc.detachEvent("onpropertychange",Jw),jc=bc=null)}function Jw(a){if(a.propertyName==="value"&&ld(jc)){var c=[];Hw(c,jc,a,an(a)),Mn(W4,c)}}function q4(a,c,h){a==="focusin"?(Yw(),bc=c,jc=h,bc.attachEvent("onpropertychange",Jw)):a==="focusout"&&Yw()}function H4(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ld(jc)}function K4(a,c){if(a==="click")return ld(c)}function G4(a,c){if(a==="input"||a==="change")return ld(c)}function Y4(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Ls=typeof Object.is=="function"?Object.is:Y4;function Sc(a,c){if(Ls(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!Ls(a[w],c[w]))return!1}return!0}function Qw(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Xw(a,c){var h=Qw(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=c&&g>=c)return{node:h,offset:c-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Qw(h)}}function Zw(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Zw(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function eb(){for(var a=window,c=Ee();c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=Ee(a.document)}return c}function qm(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function J4(a){var c=eb(),h=a.focusedElem,g=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&Zw(h.ownerDocument.documentElement,h)){if(g!==null&&qm(h)){if(c=g.start,a=g.end,a===void 0&&(a=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(a,h.value.length);else if(a=(c=h.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var w=h.textContent.length,_=Math.min(g.start,w);g=g.end===void 0?_:Math.min(g.end,w),!a.extend&&_>g&&(w=g,g=_,_=w),w=Xw(h,_);var A=Xw(h,g);w&&A&&(a.rangeCount!==1||a.anchorNode!==w.node||a.anchorOffset!==w.offset||a.focusNode!==A.node||a.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),a.removeAllRanges(),_>g?(a.addRange(c),a.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),a.addRange(c)))}}for(c=[],a=h;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)a=c[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Q4=u&&"documentMode"in document&&11>=document.documentMode,zo=null,Hm=null,_c=null,Km=!1;function tb(a,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Km||zo==null||zo!==Ee(g)||(g=zo,"selectionStart"in g&&qm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),_c&&Sc(_c,g)||(_c=g,g=fd(Hm,"onSelect"),0<g.length&&(c=new Mm("onSelect","select",null,c,h),a.push({event:c,listeners:g}),c.target=zo)))}function cd(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var Uo={animationend:cd("Animation","AnimationEnd"),animationiteration:cd("Animation","AnimationIteration"),animationstart:cd("Animation","AnimationStart"),transitionend:cd("Transition","TransitionEnd")},Gm={},rb={};u&&(rb=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function ud(a){if(Gm[a])return Gm[a];if(!Uo[a])return a;var c=Uo[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in rb)return Gm[a]=c[h];return a}var nb=ud("animationend"),sb=ud("animationiteration"),ib=ud("animationstart"),ab=ud("transitionend"),ob=new Map,lb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(a,c){ob.set(a,c),i(c,[a])}for(var Ym=0;Ym<lb.length;Ym++){var Jm=lb[Ym],X4=Jm.toLowerCase(),Z4=Jm[0].toUpperCase()+Jm.slice(1);fa(X4,"on"+Z4)}fa(nb,"onAnimationEnd"),fa(sb,"onAnimationIteration"),fa(ib,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(ab,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function cb(a,c,h){var g=a.type||"unknown-event";a.currentTarget=h,Hr(g,c,void 0,a),a.currentTarget=null}function ub(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],w=g.event;g=g.listeners;e:{var _=void 0;if(c)for(var A=g.length-1;0<=A;A--){var $=g[A],U=$.instance,ce=$.currentTarget;if($=$.listener,U!==_&&w.isPropagationStopped())break e;cb(w,$,ce),_=U}else for(A=0;A<g.length;A++){if($=g[A],U=$.instance,ce=$.currentTarget,$=$.listener,U!==_&&w.isPropagationStopped())break e;cb(w,$,ce),_=U}}}if(qr)throw a=Cn,qr=!1,Cn=null,a}function Ht(a,c){var h=c[sp];h===void 0&&(h=c[sp]=new Set);var g=a+"__bubble";h.has(g)||(db(c,a,2,!1),h.add(g))}function Qm(a,c,h){var g=0;c&&(g|=4),db(h,a,g,c)}var dd="_reactListening"+Math.random().toString(36).slice(2);function Nc(a){if(!a[dd]){a[dd]=!0,n.forEach(function(h){h!=="selectionchange"&&(eI.has(h)||Qm(h,!1,a),Qm(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[dd]||(c[dd]=!0,Qm("selectionchange",!1,c))}}function db(a,c,h,g){switch(Dw(c)){case 1:var w=m4;break;case 4:w=p4;break;default:w=Dm}h=w.bind(null,c,h,a),w=void 0,!vr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?a.addEventListener(c,h,{capture:!0,passive:w}):a.addEventListener(c,h,!0):w!==void 0?a.addEventListener(c,h,{passive:w}):a.addEventListener(c,h,!1)}function Xm(a,c,h,g,w){var _=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var $=g.stateNode.containerInfo;if($===w||$.nodeType===8&&$.parentNode===w)break;if(A===4)for(A=g.return;A!==null;){var U=A.tag;if((U===3||U===4)&&(U=A.stateNode.containerInfo,U===w||U.nodeType===8&&U.parentNode===w))return;A=A.return}for(;$!==null;){if(A=Ha($),A===null)return;if(U=A.tag,U===5||U===6){g=_=A;continue e}$=$.parentNode}}g=g.return}Mn(function(){var ce=_,Ce=an(h),Ae=[];e:{var ke=ob.get(a);if(ke!==void 0){var Ve=Mm,Ge=a;switch(a){case"keypress":if(id(h)===0)break e;case"keydown":case"keyup":Ve=P4;break;case"focusin":Ge="focus",Ve=zm;break;case"focusout":Ge="blur",Ve=zm;break;case"beforeblur":case"afterblur":Ve=zm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=v4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=I4;break;case nb:case sb:case ib:Ve=b4;break;case ab:Ve=R4;break;case"scroll":Ve=g4;break;case"wheel":Ve=M4;break;case"copy":case"cut":case"paste":Ve=S4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Lw}var Je=(c&4)!==0,dr=!Je&&a==="scroll",ee=Je?ke!==null?ke+"Capture":null:ke;Je=[];for(var V=ce,ie;V!==null;){ie=V;var Ie=ie.stateNode;if(ie.tag===5&&Ie!==null&&(ie=Ie,ee!==null&&(Ie=Vr(V,ee),Ie!=null&&Je.push(Cc(V,Ie,ie)))),dr)break;V=V.return}0<Je.length&&(ke=new Ve(ke,Ge,null,h,Ce),Ae.push({event:ke,listeners:Je}))}}if((c&7)===0){e:{if(ke=a==="mouseover"||a==="pointerover",Ve=a==="mouseout"||a==="pointerout",ke&&h!==Ft&&(Ge=h.relatedTarget||h.fromElement)&&(Ha(Ge)||Ge[Si]))break e;if((Ve||ke)&&(ke=Ce.window===Ce?Ce:(ke=Ce.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ve?(Ge=h.relatedTarget||h.toElement,Ve=ce,Ge=Ge?Ha(Ge):null,Ge!==null&&(dr=Kr(Ge),Ge!==dr||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Ve=null,Ge=ce),Ve!==Ge)){if(Je=Mw,Ie="onMouseLeave",ee="onMouseEnter",V="mouse",(a==="pointerout"||a==="pointerover")&&(Je=Lw,Ie="onPointerLeave",ee="onPointerEnter",V="pointer"),dr=Ve==null?ke:Vo(Ve),ie=Ge==null?ke:Vo(Ge),ke=new Je(Ie,V+"leave",Ve,h,Ce),ke.target=dr,ke.relatedTarget=ie,Ie=null,Ha(Ce)===ce&&(Je=new Je(ee,V+"enter",Ge,h,Ce),Je.target=ie,Je.relatedTarget=dr,Ie=Je),dr=Ie,Ve&&Ge)t:{for(Je=Ve,ee=Ge,V=0,ie=Je;ie;ie=Bo(ie))V++;for(ie=0,Ie=ee;Ie;Ie=Bo(Ie))ie++;for(;0<V-ie;)Je=Bo(Je),V--;for(;0<ie-V;)ee=Bo(ee),ie--;for(;V--;){if(Je===ee||ee!==null&&Je===ee.alternate)break t;Je=Bo(Je),ee=Bo(ee)}Je=null}else Je=null;Ve!==null&&fb(Ae,ke,Ve,Je,!1),Ge!==null&&dr!==null&&fb(Ae,dr,Ge,Je,!0)}}e:{if(ke=ce?Vo(ce):window,Ve=ke.nodeName&&ke.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&ke.type==="file")var et=V4;else if(qw(ke))if(Kw)et=G4;else{et=H4;var at=q4}else(Ve=ke.nodeName)&&Ve.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(et=K4);if(et&&(et=et(a,ce))){Hw(Ae,et,h,Ce);break e}at&&at(a,ke,ce),a==="focusout"&&(at=ke._wrapperState)&&at.controlled&&ke.type==="number"&&bt(ke,"number",ke.value)}switch(at=ce?Vo(ce):window,a){case"focusin":(qw(at)||at.contentEditable==="true")&&(zo=at,Hm=ce,_c=null);break;case"focusout":_c=Hm=zo=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,tb(Ae,h,Ce);break;case"selectionchange":if(Q4)break;case"keydown":case"keyup":tb(Ae,h,Ce)}var ot;if(Bm)e:{switch(a){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Lo?Ww(a,h)&&(ft="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(ft="onCompositionStart");ft&&(zw&&h.locale!=="ko"&&(Lo||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Lo&&(ot=Rw()):(da=Ce,$m="value"in da?da.value:da.textContent,Lo=!0)),at=fd(ce,ft),0<at.length&&(ft=new Fw(ft,a,null,h,Ce),Ae.push({event:ft,listeners:at}),ot?ft.data=ot:(ot=Vw(h),ot!==null&&(ft.data=ot)))),(ot=L4?z4(a,h):U4(a,h))&&(ce=fd(ce,"onBeforeInput"),0<ce.length&&(Ce=new Fw("onBeforeInput","beforeinput",null,h,Ce),Ae.push({event:Ce,listeners:ce}),Ce.data=ot))}ub(Ae,c)})}function Cc(a,c,h){return{instance:a,listener:c,currentTarget:h}}function fd(a,c){for(var h=c+"Capture",g=[];a!==null;){var w=a,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=Vr(a,h),_!=null&&g.unshift(Cc(a,_,w)),_=Vr(a,c),_!=null&&g.push(Cc(a,_,w))),a=a.return}return g}function Bo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function fb(a,c,h,g,w){for(var _=c._reactName,A=[];h!==null&&h!==g;){var $=h,U=$.alternate,ce=$.stateNode;if(U!==null&&U===g)break;$.tag===5&&ce!==null&&($=ce,w?(U=Vr(h,_),U!=null&&A.unshift(Cc(h,U,$))):w||(U=Vr(h,_),U!=null&&A.push(Cc(h,U,$)))),h=h.return}A.length!==0&&a.push({event:c,listeners:A})}var tI=/\r\n?/g,rI=/\u0000|\uFFFD/g;function hb(a){return(typeof a=="string"?a:""+a).replace(tI,`
`).replace(rI,"")}function hd(a,c,h){if(c=hb(c),hb(a)!==c&&h)throw Error(r(425))}function md(){}var Zm=null,ep=null;function tp(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,nI=typeof clearTimeout=="function"?clearTimeout:void 0,mb=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof mb<"u"?function(a){return mb.resolve(null).then(a).catch(iI)}:rp;function iI(a){setTimeout(function(){throw a})}function np(a,c){var h=c,g=0;do{var w=h.nextSibling;if(a.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){a.removeChild(w),yc(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);yc(c)}function ha(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function pb(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),ii="__reactFiber$"+Wo,Ec="__reactProps$"+Wo,Si="__reactContainer$"+Wo,sp="__reactEvents$"+Wo,aI="__reactListeners$"+Wo,oI="__reactHandles$"+Wo;function Ha(a){var c=a[ii];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Si]||h[ii]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=pb(a);a!==null;){if(h=a[ii])return h;a=pb(a)}return c}a=h,h=a.parentNode}return null}function Ac(a){return a=a[ii]||a[Si],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Vo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function pd(a){return a[Ec]||null}var ip=[],qo=-1;function ma(a){return{current:a}}function Kt(a){0>qo||(a.current=ip[qo],ip[qo]=null,qo--)}function Bt(a,c){qo++,ip[qo]=a.current,a.current=c}var pa={},bn=ma(pa),zn=ma(!1),Ka=pa;function Ho(a,c){var h=a.type.contextTypes;if(!h)return pa;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in h)w[_]=c[_];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=w),w}function Un(a){return a=a.childContextTypes,a!=null}function gd(){Kt(zn),Kt(bn)}function gb(a,c,h){if(bn.current!==pa)throw Error(r(168));Bt(bn,c),Bt(zn,h)}function yb(a,c,h){var g=a.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,ye(a)||"Unknown",w));return pe({},h,g)}function yd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||pa,Ka=bn.current,Bt(bn,a),Bt(zn,zn.current),!0}function vb(a,c,h){var g=a.stateNode;if(!g)throw Error(r(169));h?(a=yb(a,c,Ka),g.__reactInternalMemoizedMergedChildContext=a,Kt(zn),Kt(bn),Bt(bn,a)):Kt(zn),Bt(zn,h)}var _i=null,vd=!1,ap=!1;function xb(a){_i===null?_i=[a]:_i.push(a)}function lI(a){vd=!0,xb(a)}function ga(){if(!ap&&_i!==null){ap=!0;var a=0,c=L;try{var h=_i;for(L=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}_i=null,vd=!1}catch(w){throw _i!==null&&(_i=_i.slice(a+1)),Me(xe,ga),w}finally{L=c,ap=!1}}return null}var Ko=[],Go=0,xd=null,wd=0,Ss=[],_s=0,Ga=null,ki=1,Ni="";function Ya(a,c){Ko[Go++]=wd,Ko[Go++]=xd,xd=a,wd=c}function wb(a,c,h){Ss[_s++]=ki,Ss[_s++]=Ni,Ss[_s++]=Ga,Ga=a;var g=ki;a=Ni;var w=32-le(g)-1;g&=~(1<<w),h+=1;var _=32-le(c)+w;if(30<_){var A=w-w%5;_=(g&(1<<A)-1).toString(32),g>>=A,w-=A,ki=1<<32-le(c)+w|h<<w|g,Ni=_+a}else ki=1<<_|h<<w|g,Ni=a}function op(a){a.return!==null&&(Ya(a,1),wb(a,1,0))}function lp(a){for(;a===xd;)xd=Ko[--Go],Ko[Go]=null,wd=Ko[--Go],Ko[Go]=null;for(;a===Ga;)Ga=Ss[--_s],Ss[_s]=null,Ni=Ss[--_s],Ss[_s]=null,ki=Ss[--_s],Ss[_s]=null}var ns=null,ss=null,Xt=!1,zs=null;function bb(a,c){var h=Es(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function jb(a,c){switch(a.tag){case 5:var h=a.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,ns=a,ss=ha(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,ns=a,ss=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Ga!==null?{id:ki,overflow:Ni}:null,a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Es(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,ns=a,ss=null,!0):!1;default:return!1}}function cp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function up(a){if(Xt){var c=ss;if(c){var h=c;if(!jb(a,c)){if(cp(a))throw Error(r(418));c=ha(h.nextSibling);var g=ns;c&&jb(a,c)?bb(g,h):(a.flags=a.flags&-4097|2,Xt=!1,ns=a)}}else{if(cp(a))throw Error(r(418));a.flags=a.flags&-4097|2,Xt=!1,ns=a}}}function Sb(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ns=a}function bd(a){if(a!==ns)return!1;if(!Xt)return Sb(a),Xt=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!tp(a.type,a.memoizedProps)),c&&(c=ss)){if(cp(a))throw _b(),Error(r(418));for(;c;)bb(a,c),c=ha(c.nextSibling)}if(Sb(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(c===0){ss=ha(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}a=a.nextSibling}ss=null}}else ss=ns?ha(a.stateNode.nextSibling):null;return!0}function _b(){for(var a=ss;a;)a=ha(a.nextSibling)}function Yo(){ss=ns=null,Xt=!1}function dp(a){zs===null?zs=[a]:zs.push(a)}var cI=O.ReactCurrentBatchConfig;function Pc(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,a));var w=g,_=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(A){var $=w.refs;A===null?delete $[_]:$[_]=A},c._stringRef=_,c)}if(typeof a!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,a))}return a}function jd(a,c){throw a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function kb(a){var c=a._init;return c(a._payload)}function Nb(a){function c(ee,V){if(a){var ie=ee.deletions;ie===null?(ee.deletions=[V],ee.flags|=16):ie.push(V)}}function h(ee,V){if(!a)return null;for(;V!==null;)c(ee,V),V=V.sibling;return null}function g(ee,V){for(ee=new Map;V!==null;)V.key!==null?ee.set(V.key,V):ee.set(V.index,V),V=V.sibling;return ee}function w(ee,V){return ee=_a(ee,V),ee.index=0,ee.sibling=null,ee}function _(ee,V,ie){return ee.index=ie,a?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<V?(ee.flags|=2,V):ie):(ee.flags|=2,V)):(ee.flags|=1048576,V)}function A(ee){return a&&ee.alternate===null&&(ee.flags|=2),ee}function $(ee,V,ie,Ie){return V===null||V.tag!==6?(V=rg(ie,ee.mode,Ie),V.return=ee,V):(V=w(V,ie),V.return=ee,V)}function U(ee,V,ie,Ie){var et=ie.type;return et===R?Ce(ee,V,ie.props.children,Ie,ie.key):V!==null&&(V.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Z&&kb(et)===V.type)?(Ie=w(V,ie.props),Ie.ref=Pc(ee,V,ie),Ie.return=ee,Ie):(Ie=Hd(ie.type,ie.key,ie.props,null,ee.mode,Ie),Ie.ref=Pc(ee,V,ie),Ie.return=ee,Ie)}function ce(ee,V,ie,Ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==ie.containerInfo||V.stateNode.implementation!==ie.implementation?(V=ng(ie,ee.mode,Ie),V.return=ee,V):(V=w(V,ie.children||[]),V.return=ee,V)}function Ce(ee,V,ie,Ie,et){return V===null||V.tag!==7?(V=no(ie,ee.mode,Ie,et),V.return=ee,V):(V=w(V,ie),V.return=ee,V)}function Ae(ee,V,ie){if(typeof V=="string"&&V!==""||typeof V=="number")return V=rg(""+V,ee.mode,ie),V.return=ee,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case P:return ie=Hd(V.type,V.key,V.props,null,ee.mode,ie),ie.ref=Pc(ee,null,V),ie.return=ee,ie;case T:return V=ng(V,ee.mode,ie),V.return=ee,V;case Z:var Ie=V._init;return Ae(ee,Ie(V._payload),ie)}if(M(V)||me(V))return V=no(V,ee.mode,ie,null),V.return=ee,V;jd(ee,V)}return null}function ke(ee,V,ie,Ie){var et=V!==null?V.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return et!==null?null:$(ee,V,""+ie,Ie);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return ie.key===et?U(ee,V,ie,Ie):null;case T:return ie.key===et?ce(ee,V,ie,Ie):null;case Z:return et=ie._init,ke(ee,V,et(ie._payload),Ie)}if(M(ie)||me(ie))return et!==null?null:Ce(ee,V,ie,Ie,null);jd(ee,ie)}return null}function Ve(ee,V,ie,Ie,et){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return ee=ee.get(ie)||null,$(V,ee,""+Ie,et);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case P:return ee=ee.get(Ie.key===null?ie:Ie.key)||null,U(V,ee,Ie,et);case T:return ee=ee.get(Ie.key===null?ie:Ie.key)||null,ce(V,ee,Ie,et);case Z:var at=Ie._init;return Ve(ee,V,ie,at(Ie._payload),et)}if(M(Ie)||me(Ie))return ee=ee.get(ie)||null,Ce(V,ee,Ie,et,null);jd(V,Ie)}return null}function Ge(ee,V,ie,Ie){for(var et=null,at=null,ot=V,ft=V=0,Xr=null;ot!==null&&ft<ie.length;ft++){ot.index>ft?(Xr=ot,ot=null):Xr=ot.sibling;var Pt=ke(ee,ot,ie[ft],Ie);if(Pt===null){ot===null&&(ot=Xr);break}a&&ot&&Pt.alternate===null&&c(ee,ot),V=_(Pt,V,ft),at===null?et=Pt:at.sibling=Pt,at=Pt,ot=Xr}if(ft===ie.length)return h(ee,ot),Xt&&Ya(ee,ft),et;if(ot===null){for(;ft<ie.length;ft++)ot=Ae(ee,ie[ft],Ie),ot!==null&&(V=_(ot,V,ft),at===null?et=ot:at.sibling=ot,at=ot);return Xt&&Ya(ee,ft),et}for(ot=g(ee,ot);ft<ie.length;ft++)Xr=Ve(ot,ee,ft,ie[ft],Ie),Xr!==null&&(a&&Xr.alternate!==null&&ot.delete(Xr.key===null?ft:Xr.key),V=_(Xr,V,ft),at===null?et=Xr:at.sibling=Xr,at=Xr);return a&&ot.forEach(function(ka){return c(ee,ka)}),Xt&&Ya(ee,ft),et}function Je(ee,V,ie,Ie){var et=me(ie);if(typeof et!="function")throw Error(r(150));if(ie=et.call(ie),ie==null)throw Error(r(151));for(var at=et=null,ot=V,ft=V=0,Xr=null,Pt=ie.next();ot!==null&&!Pt.done;ft++,Pt=ie.next()){ot.index>ft?(Xr=ot,ot=null):Xr=ot.sibling;var ka=ke(ee,ot,Pt.value,Ie);if(ka===null){ot===null&&(ot=Xr);break}a&&ot&&ka.alternate===null&&c(ee,ot),V=_(ka,V,ft),at===null?et=ka:at.sibling=ka,at=ka,ot=Xr}if(Pt.done)return h(ee,ot),Xt&&Ya(ee,ft),et;if(ot===null){for(;!Pt.done;ft++,Pt=ie.next())Pt=Ae(ee,Pt.value,Ie),Pt!==null&&(V=_(Pt,V,ft),at===null?et=Pt:at.sibling=Pt,at=Pt);return Xt&&Ya(ee,ft),et}for(ot=g(ee,ot);!Pt.done;ft++,Pt=ie.next())Pt=Ve(ot,ee,ft,Pt.value,Ie),Pt!==null&&(a&&Pt.alternate!==null&&ot.delete(Pt.key===null?ft:Pt.key),V=_(Pt,V,ft),at===null?et=Pt:at.sibling=Pt,at=Pt);return a&&ot.forEach(function(BI){return c(ee,BI)}),Xt&&Ya(ee,ft),et}function dr(ee,V,ie,Ie){if(typeof ie=="object"&&ie!==null&&ie.type===R&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:e:{for(var et=ie.key,at=V;at!==null;){if(at.key===et){if(et=ie.type,et===R){if(at.tag===7){h(ee,at.sibling),V=w(at,ie.props.children),V.return=ee,ee=V;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Z&&kb(et)===at.type){h(ee,at.sibling),V=w(at,ie.props),V.ref=Pc(ee,at,ie),V.return=ee,ee=V;break e}h(ee,at);break}else c(ee,at);at=at.sibling}ie.type===R?(V=no(ie.props.children,ee.mode,Ie,ie.key),V.return=ee,ee=V):(Ie=Hd(ie.type,ie.key,ie.props,null,ee.mode,Ie),Ie.ref=Pc(ee,V,ie),Ie.return=ee,ee=Ie)}return A(ee);case T:e:{for(at=ie.key;V!==null;){if(V.key===at)if(V.tag===4&&V.stateNode.containerInfo===ie.containerInfo&&V.stateNode.implementation===ie.implementation){h(ee,V.sibling),V=w(V,ie.children||[]),V.return=ee,ee=V;break e}else{h(ee,V);break}else c(ee,V);V=V.sibling}V=ng(ie,ee.mode,Ie),V.return=ee,ee=V}return A(ee);case Z:return at=ie._init,dr(ee,V,at(ie._payload),Ie)}if(M(ie))return Ge(ee,V,ie,Ie);if(me(ie))return Je(ee,V,ie,Ie);jd(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,V!==null&&V.tag===6?(h(ee,V.sibling),V=w(V,ie),V.return=ee,ee=V):(h(ee,V),V=rg(ie,ee.mode,Ie),V.return=ee,ee=V),A(ee)):h(ee,V)}return dr}var Jo=Nb(!0),Cb=Nb(!1),Sd=ma(null),_d=null,Qo=null,fp=null;function hp(){fp=Qo=_d=null}function mp(a){var c=Sd.current;Kt(Sd),a._currentValue=c}function pp(a,c,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===h)break;a=a.return}}function Xo(a,c){_d=a,fp=Qo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Bn=!0),a.firstContext=null)}function ks(a){var c=a._currentValue;if(fp!==a)if(a={context:a,memoizedValue:c,next:null},Qo===null){if(_d===null)throw Error(r(308));Qo=a,_d.dependencies={lanes:0,firstContext:a}}else Qo=Qo.next=a;return c}var Ja=null;function gp(a){Ja===null?Ja=[a]:Ja.push(a)}function Eb(a,c,h,g){var w=c.interleaved;return w===null?(h.next=h,gp(c)):(h.next=w.next,w.next=h),c.interleaved=h,Ci(a,g)}function Ci(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}var ya=!1;function yp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ab(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ei(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function va(a,c,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Nt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Ci(a,h)}return w=g.interleaved,w===null?(c.next=c,gp(g)):(c.next=w.next,w.next=c),g.interleaved=c,Ci(a,h)}function kd(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,uc(a,h)}}function Pb(a,c){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var A={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?w=_=A:_=_.next=A,h=h.next}while(h!==null);_===null?w=_=c:_=_.next=c}else w=_=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function Nd(a,c,h,g){var w=a.updateQueue;ya=!1;var _=w.firstBaseUpdate,A=w.lastBaseUpdate,$=w.shared.pending;if($!==null){w.shared.pending=null;var U=$,ce=U.next;U.next=null,A===null?_=ce:A.next=ce,A=U;var Ce=a.alternate;Ce!==null&&(Ce=Ce.updateQueue,$=Ce.lastBaseUpdate,$!==A&&($===null?Ce.firstBaseUpdate=ce:$.next=ce,Ce.lastBaseUpdate=U))}if(_!==null){var Ae=w.baseState;A=0,Ce=ce=U=null,$=_;do{var ke=$.lane,Ve=$.eventTime;if((g&ke)===ke){Ce!==null&&(Ce=Ce.next={eventTime:Ve,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Ge=a,Je=$;switch(ke=c,Ve=h,Je.tag){case 1:if(Ge=Je.payload,typeof Ge=="function"){Ae=Ge.call(Ve,Ae,ke);break e}Ae=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Je.payload,ke=typeof Ge=="function"?Ge.call(Ve,Ae,ke):Ge,ke==null)break e;Ae=pe({},Ae,ke);break e;case 2:ya=!0}}$.callback!==null&&$.lane!==0&&(a.flags|=64,ke=w.effects,ke===null?w.effects=[$]:ke.push($))}else Ve={eventTime:Ve,lane:ke,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ce===null?(ce=Ce=Ve,U=Ae):Ce=Ce.next=Ve,A|=ke;if($=$.next,$===null){if($=w.shared.pending,$===null)break;ke=$,$=ke.next,ke.next=null,w.lastBaseUpdate=ke,w.shared.pending=null}}while(!0);if(Ce===null&&(U=Ae),w.baseState=U,w.firstBaseUpdate=ce,w.lastBaseUpdate=Ce,c=w.shared.interleaved,c!==null){w=c;do A|=w.lane,w=w.next;while(w!==c)}else _===null&&(w.shared.lanes=0);Za|=A,a.lanes=A,a.memoizedState=Ae}}function Ob(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var g=a[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var Oc={},ai=ma(Oc),Tc=ma(Oc),Ic=ma(Oc);function Qa(a){if(a===Oc)throw Error(r(174));return a}function vp(a,c){switch(Bt(Ic,c),Bt(Tc,a),Bt(ai,Oc),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ne(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Ne(c,a)}Kt(ai),Bt(ai,c)}function Zo(){Kt(ai),Kt(Tc),Kt(Ic)}function Tb(a){Qa(Ic.current);var c=Qa(ai.current),h=Ne(c,a.type);c!==h&&(Bt(Tc,a),Bt(ai,h))}function xp(a){Tc.current===a&&(Kt(ai),Kt(Tc))}var rr=ma(0);function Cd(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var wp=[];function bp(){for(var a=0;a<wp.length;a++)wp[a]._workInProgressVersionPrimary=null;wp.length=0}var Ed=O.ReactCurrentDispatcher,jp=O.ReactCurrentBatchConfig,Xa=0,nr=null,Or=null,Jr=null,Ad=!1,Dc=!1,Rc=0,uI=0;function jn(){throw Error(r(321))}function Sp(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Ls(a[h],c[h]))return!1;return!0}function _p(a,c,h,g,w,_){if(Xa=_,nr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ed.current=a===null||a.memoizedState===null?mI:pI,a=h(g,w),Dc){_=0;do{if(Dc=!1,Rc=0,25<=_)throw Error(r(301));_+=1,Jr=Or=null,c.updateQueue=null,Ed.current=gI,a=h(g,w)}while(Dc)}if(Ed.current=Td,c=Or!==null&&Or.next!==null,Xa=0,Jr=Or=nr=null,Ad=!1,c)throw Error(r(300));return a}function kp(){var a=Rc!==0;return Rc=0,a}function oi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?nr.memoizedState=Jr=a:Jr=Jr.next=a,Jr}function Ns(){if(Or===null){var a=nr.alternate;a=a!==null?a.memoizedState:null}else a=Or.next;var c=Jr===null?nr.memoizedState:Jr.next;if(c!==null)Jr=c,Or=a;else{if(a===null)throw Error(r(310));Or=a,a={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Jr===null?nr.memoizedState=Jr=a:Jr=Jr.next=a}return Jr}function $c(a,c){return typeof c=="function"?c(a):c}function Np(a){var c=Ns(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var g=Or,w=g.baseQueue,_=h.pending;if(_!==null){if(w!==null){var A=w.next;w.next=_.next,_.next=A}g.baseQueue=w=_,h.pending=null}if(w!==null){_=w.next,g=g.baseState;var $=A=null,U=null,ce=_;do{var Ce=ce.lane;if((Xa&Ce)===Ce)U!==null&&(U=U.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),g=ce.hasEagerState?ce.eagerState:a(g,ce.action);else{var Ae={lane:Ce,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};U===null?($=U=Ae,A=g):U=U.next=Ae,nr.lanes|=Ce,Za|=Ce}ce=ce.next}while(ce!==null&&ce!==_);U===null?A=g:U.next=$,Ls(g,c.memoizedState)||(Bn=!0),c.memoizedState=g,c.baseState=A,c.baseQueue=U,h.lastRenderedState=g}if(a=h.interleaved,a!==null){w=a;do _=w.lane,nr.lanes|=_,Za|=_,w=w.next;while(w!==a)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Cp(a){var c=Ns(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var g=h.dispatch,w=h.pending,_=c.memoizedState;if(w!==null){h.pending=null;var A=w=w.next;do _=a(_,A.action),A=A.next;while(A!==w);Ls(_,c.memoizedState)||(Bn=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,g]}function Ib(){}function Db(a,c){var h=nr,g=Ns(),w=c(),_=!Ls(g.memoizedState,w);if(_&&(g.memoizedState=w,Bn=!0),g=g.queue,Ep(Mb.bind(null,h,g,a),[a]),g.getSnapshot!==c||_||Jr!==null&&Jr.memoizedState.tag&1){if(h.flags|=2048,Mc(9,$b.bind(null,h,g,w,c),void 0,null),Qr===null)throw Error(r(349));(Xa&30)!==0||Rb(h,c,w)}return w}function Rb(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=nr.updateQueue,c===null?(c={lastEffect:null,stores:null},nr.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function $b(a,c,h,g){c.value=h,c.getSnapshot=g,Fb(c)&&Lb(a)}function Mb(a,c,h){return h(function(){Fb(c)&&Lb(a)})}function Fb(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Ls(a,h)}catch{return!0}}function Lb(a){var c=Ci(a,1);c!==null&&Vs(c,a,1,-1)}function zb(a){var c=oi();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:a},c.queue=a,a=a.dispatch=hI.bind(null,nr,a),[c.memoizedState,a]}function Mc(a,c,h,g){return a={tag:a,create:c,destroy:h,deps:g,next:null},c=nr.updateQueue,c===null?(c={lastEffect:null,stores:null},nr.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,c.lastEffect=a)),a}function Ub(){return Ns().memoizedState}function Pd(a,c,h,g){var w=oi();nr.flags|=a,w.memoizedState=Mc(1|c,h,void 0,g===void 0?null:g)}function Od(a,c,h,g){var w=Ns();g=g===void 0?null:g;var _=void 0;if(Or!==null){var A=Or.memoizedState;if(_=A.destroy,g!==null&&Sp(g,A.deps)){w.memoizedState=Mc(c,h,_,g);return}}nr.flags|=a,w.memoizedState=Mc(1|c,h,_,g)}function Bb(a,c){return Pd(8390656,8,a,c)}function Ep(a,c){return Od(2048,8,a,c)}function Wb(a,c){return Od(4,2,a,c)}function Vb(a,c){return Od(4,4,a,c)}function qb(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Hb(a,c,h){return h=h!=null?h.concat([a]):null,Od(4,4,qb.bind(null,c,a),h)}function Ap(){}function Kb(a,c){var h=Ns();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Sp(c,g[1])?g[0]:(h.memoizedState=[a,c],a)}function Gb(a,c){var h=Ns();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Sp(c,g[1])?g[0]:(a=a(),h.memoizedState=[a,c],a)}function Yb(a,c,h){return(Xa&21)===0?(a.baseState&&(a.baseState=!1,Bn=!0),a.memoizedState=h):(Ls(h,c)||(h=ts(),nr.lanes|=h,Za|=h,a.baseState=!0),c)}function dI(a,c){var h=L;L=h!==0&&4>h?h:4,a(!0);var g=jp.transition;jp.transition={};try{a(!1),c()}finally{L=h,jp.transition=g}}function Jb(){return Ns().memoizedState}function fI(a,c,h){var g=ja(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Qb(a))Xb(c,h);else if(h=Eb(a,c,h,g),h!==null){var w=Pn();Vs(h,a,g,w),Zb(h,c,g)}}function hI(a,c,h){var g=ja(a),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Qb(a))Xb(c,w);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var A=c.lastRenderedState,$=_(A,h);if(w.hasEagerState=!0,w.eagerState=$,Ls($,A)){var U=c.interleaved;U===null?(w.next=w,gp(c)):(w.next=U.next,U.next=w),c.interleaved=w;return}}catch{}finally{}h=Eb(a,c,w,g),h!==null&&(w=Pn(),Vs(h,a,g,w),Zb(h,c,g))}}function Qb(a){var c=a.alternate;return a===nr||c!==null&&c===nr}function Xb(a,c){Dc=Ad=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function Zb(a,c,h){if((h&4194240)!==0){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,uc(a,h)}}var Td={readContext:ks,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},mI={readContext:ks,useCallback:function(a,c){return oi().memoizedState=[a,c===void 0?null:c],a},useContext:ks,useEffect:Bb,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,Pd(4194308,4,qb.bind(null,c,a),h)},useLayoutEffect:function(a,c){return Pd(4194308,4,a,c)},useInsertionEffect:function(a,c){return Pd(4,2,a,c)},useMemo:function(a,c){var h=oi();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var g=oi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},g.queue=a,a=a.dispatch=fI.bind(null,nr,a),[g.memoizedState,a]},useRef:function(a){var c=oi();return a={current:a},c.memoizedState=a},useState:zb,useDebugValue:Ap,useDeferredValue:function(a){return oi().memoizedState=a},useTransition:function(){var a=zb(!1),c=a[0];return a=dI.bind(null,a[1]),oi().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var g=nr,w=oi();if(Xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Qr===null)throw Error(r(349));(Xa&30)!==0||Rb(g,c,h)}w.memoizedState=h;var _={value:h,getSnapshot:c};return w.queue=_,Bb(Mb.bind(null,g,_,a),[a]),g.flags|=2048,Mc(9,$b.bind(null,g,_,h,c),void 0,null),h},useId:function(){var a=oi(),c=Qr.identifierPrefix;if(Xt){var h=Ni,g=ki;h=(g&~(1<<32-le(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Rc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=uI++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},pI={readContext:ks,useCallback:Kb,useContext:ks,useEffect:Ep,useImperativeHandle:Hb,useInsertionEffect:Wb,useLayoutEffect:Vb,useMemo:Gb,useReducer:Np,useRef:Ub,useState:function(){return Np($c)},useDebugValue:Ap,useDeferredValue:function(a){var c=Ns();return Yb(c,Or.memoizedState,a)},useTransition:function(){var a=Np($c)[0],c=Ns().memoizedState;return[a,c]},useMutableSource:Ib,useSyncExternalStore:Db,useId:Jb,unstable_isNewReconciler:!1},gI={readContext:ks,useCallback:Kb,useContext:ks,useEffect:Ep,useImperativeHandle:Hb,useInsertionEffect:Wb,useLayoutEffect:Vb,useMemo:Gb,useReducer:Cp,useRef:Ub,useState:function(){return Cp($c)},useDebugValue:Ap,useDeferredValue:function(a){var c=Ns();return Or===null?c.memoizedState=a:Yb(c,Or.memoizedState,a)},useTransition:function(){var a=Cp($c)[0],c=Ns().memoizedState;return[a,c]},useMutableSource:Ib,useSyncExternalStore:Db,useId:Jb,unstable_isNewReconciler:!1};function Us(a,c){if(a&&a.defaultProps){c=pe({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}function Pp(a,c,h,g){c=a.memoizedState,h=h(g,c),h=h==null?c:pe({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Id={isMounted:function(a){return(a=a._reactInternals)?Kr(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var g=Pn(),w=ja(a),_=Ei(g,w);_.payload=c,h!=null&&(_.callback=h),c=va(a,_,w),c!==null&&(Vs(c,a,w,g),kd(c,a,w))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var g=Pn(),w=ja(a),_=Ei(g,w);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=va(a,_,w),c!==null&&(Vs(c,a,w,g),kd(c,a,w))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=Pn(),g=ja(a),w=Ei(h,g);w.tag=2,c!=null&&(w.callback=c),c=va(a,w,g),c!==null&&(Vs(c,a,g,h),kd(c,a,g))}};function e1(a,c,h,g,w,_,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,_,A):c.prototype&&c.prototype.isPureReactComponent?!Sc(h,g)||!Sc(w,_):!0}function t1(a,c,h){var g=!1,w=pa,_=c.contextType;return typeof _=="object"&&_!==null?_=ks(_):(w=Un(c)?Ka:bn.current,g=c.contextTypes,_=(g=g!=null)?Ho(a,w):pa),c=new c(h,_),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Id,a.stateNode=c,c._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=_),c}function r1(a,c,h,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==a&&Id.enqueueReplaceState(c,c.state,null)}function Op(a,c,h,g){var w=a.stateNode;w.props=h,w.state=a.memoizedState,w.refs={},yp(a);var _=c.contextType;typeof _=="object"&&_!==null?w.context=ks(_):(_=Un(c)?Ka:bn.current,w.context=Ho(a,_)),w.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Pp(a,c,_,h),w.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&Id.enqueueReplaceState(w,w.state,null),Nd(a,h,w,g),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}function el(a,c){try{var h="",g=c;do h+=ne(g),g=g.return;while(g);var w=h}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:a,source:c,stack:w,digest:null}}function Tp(a,c,h){return{value:a,source:null,stack:h??null,digest:c??null}}function Ip(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var yI=typeof WeakMap=="function"?WeakMap:Map;function n1(a,c,h){h=Ei(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){zd||(zd=!0,Gp=g),Ip(a,c)},h}function s1(a,c,h){h=Ei(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){Ip(a,c)}}var _=a.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Ip(a,c),typeof g!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),h}function i1(a,c,h){var g=a.pingCache;if(g===null){g=a.pingCache=new yI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),a=OI.bind(null,a,c,h),c.then(a,a))}function a1(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function o1(a,c,h,g,w){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Ei(-1,1),c.tag=2,va(h,c,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=w,a)}var vI=O.ReactCurrentOwner,Bn=!1;function An(a,c,h,g){c.child=a===null?Cb(c,null,h,g):Jo(c,a.child,h,g)}function l1(a,c,h,g,w){h=h.render;var _=c.ref;return Xo(c,w),g=_p(a,c,h,g,_,w),h=kp(),a!==null&&!Bn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,Ai(a,c,w)):(Xt&&h&&op(c),c.flags|=1,An(a,c,g,w),c.child)}function c1(a,c,h,g,w){if(a===null){var _=h.type;return typeof _=="function"&&!tg(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,u1(a,c,_,g,w)):(a=Hd(h.type,null,g,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(_=a.child,(a.lanes&w)===0){var A=_.memoizedProps;if(h=h.compare,h=h!==null?h:Sc,h(A,g)&&a.ref===c.ref)return Ai(a,c,w)}return c.flags|=1,a=_a(_,g),a.ref=c.ref,a.return=c,c.child=a}function u1(a,c,h,g,w){if(a!==null){var _=a.memoizedProps;if(Sc(_,g)&&a.ref===c.ref)if(Bn=!1,c.pendingProps=g=_,(a.lanes&w)!==0)(a.flags&131072)!==0&&(Bn=!0);else return c.lanes=a.lanes,Ai(a,c,w)}return Dp(a,c,h,g,w)}function d1(a,c,h){var g=c.pendingProps,w=g.children,_=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(rl,is),is|=h;else{if((h&1073741824)===0)return a=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Bt(rl,is),is|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:h,Bt(rl,is),is|=g}else _!==null?(g=_.baseLanes|h,c.memoizedState=null):g=h,Bt(rl,is),is|=g;return An(a,c,w,h),c.child}function f1(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Dp(a,c,h,g,w){var _=Un(h)?Ka:bn.current;return _=Ho(c,_),Xo(c,w),h=_p(a,c,h,g,_,w),g=kp(),a!==null&&!Bn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,Ai(a,c,w)):(Xt&&g&&op(c),c.flags|=1,An(a,c,h,w),c.child)}function h1(a,c,h,g,w){if(Un(h)){var _=!0;yd(c)}else _=!1;if(Xo(c,w),c.stateNode===null)Rd(a,c),t1(c,h,g),Op(c,h,g,w),g=!0;else if(a===null){var A=c.stateNode,$=c.memoizedProps;A.props=$;var U=A.context,ce=h.contextType;typeof ce=="object"&&ce!==null?ce=ks(ce):(ce=Un(h)?Ka:bn.current,ce=Ho(c,ce));var Ce=h.getDerivedStateFromProps,Ae=typeof Ce=="function"||typeof A.getSnapshotBeforeUpdate=="function";Ae||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||($!==g||U!==ce)&&r1(c,A,g,ce),ya=!1;var ke=c.memoizedState;A.state=ke,Nd(c,g,A,w),U=c.memoizedState,$!==g||ke!==U||zn.current||ya?(typeof Ce=="function"&&(Pp(c,h,Ce,g),U=c.memoizedState),($=ya||e1(c,h,$,g,ke,U,ce))?(Ae||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=U),A.props=g,A.state=U,A.context=ce,g=$):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{A=c.stateNode,Ab(a,c),$=c.memoizedProps,ce=c.type===c.elementType?$:Us(c.type,$),A.props=ce,Ae=c.pendingProps,ke=A.context,U=h.contextType,typeof U=="object"&&U!==null?U=ks(U):(U=Un(h)?Ka:bn.current,U=Ho(c,U));var Ve=h.getDerivedStateFromProps;(Ce=typeof Ve=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||($!==Ae||ke!==U)&&r1(c,A,g,U),ya=!1,ke=c.memoizedState,A.state=ke,Nd(c,g,A,w);var Ge=c.memoizedState;$!==Ae||ke!==Ge||zn.current||ya?(typeof Ve=="function"&&(Pp(c,h,Ve,g),Ge=c.memoizedState),(ce=ya||e1(c,h,ce,g,ke,Ge,U)||!1)?(Ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,Ge,U),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,Ge,U)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ge),A.props=g,A.state=Ge,A.context=U,g=ce):(typeof A.componentDidUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(c.flags|=1024),g=!1)}return Rp(a,c,h,g,_,w)}function Rp(a,c,h,g,w,_){f1(a,c);var A=(c.flags&128)!==0;if(!g&&!A)return w&&vb(c,h,!1),Ai(a,c,_);g=c.stateNode,vI.current=c;var $=A&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,a!==null&&A?(c.child=Jo(c,a.child,null,_),c.child=Jo(c,null,$,_)):An(a,c,$,_),c.memoizedState=g.state,w&&vb(c,h,!0),c.child}function m1(a){var c=a.stateNode;c.pendingContext?gb(a,c.pendingContext,c.pendingContext!==c.context):c.context&&gb(a,c.context,!1),vp(a,c.containerInfo)}function p1(a,c,h,g,w){return Yo(),dp(w),c.flags|=256,An(a,c,h,g),c.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Mp(a){return{baseLanes:a,cachePool:null,transitions:null}}function g1(a,c,h){var g=c.pendingProps,w=rr.current,_=!1,A=(c.flags&128)!==0,$;if(($=A)||($=a!==null&&a.memoizedState===null?!1:(w&2)!==0),$?(_=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),Bt(rr,w&1),a===null)return up(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=g.children,a=g.fallback,_?(g=c.mode,_=c.child,A={mode:"hidden",children:A},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=A):_=Kd(A,g,0,null),a=no(a,g,h,null),_.return=c,a.return=c,_.sibling=a,c.child=_,c.child.memoizedState=Mp(h),c.memoizedState=$p,a):Fp(c,A));if(w=a.memoizedState,w!==null&&($=w.dehydrated,$!==null))return xI(a,c,A,g,$,w,h);if(_){_=g.fallback,A=c.mode,w=a.child,$=w.sibling;var U={mode:"hidden",children:g.children};return(A&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=U,c.deletions=null):(g=_a(w,U),g.subtreeFlags=w.subtreeFlags&14680064),$!==null?_=_a($,_):(_=no(_,A,h,null),_.flags|=2),_.return=c,g.return=c,g.sibling=_,c.child=g,g=_,_=c.child,A=a.child.memoizedState,A=A===null?Mp(h):{baseLanes:A.baseLanes|h,cachePool:null,transitions:A.transitions},_.memoizedState=A,_.childLanes=a.childLanes&~h,c.memoizedState=$p,g}return _=a.child,a=_.sibling,g=_a(_,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,a!==null&&(h=c.deletions,h===null?(c.deletions=[a],c.flags|=16):h.push(a)),c.child=g,c.memoizedState=null,g}function Fp(a,c){return c=Kd({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Dd(a,c,h,g){return g!==null&&dp(g),Jo(c,a.child,null,h),a=Fp(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function xI(a,c,h,g,w,_,A){if(h)return c.flags&256?(c.flags&=-257,g=Tp(Error(r(422))),Dd(a,c,A,g)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(_=g.fallback,w=c.mode,g=Kd({mode:"visible",children:g.children},w,0,null),_=no(_,w,A,null),_.flags|=2,g.return=c,_.return=c,g.sibling=_,c.child=g,(c.mode&1)!==0&&Jo(c,a.child,null,A),c.child.memoizedState=Mp(A),c.memoizedState=$p,_);if((c.mode&1)===0)return Dd(a,c,A,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var $=g.dgst;return g=$,_=Error(r(419)),g=Tp(_,g,void 0),Dd(a,c,A,g)}if($=(A&a.childLanes)!==0,Bn||$){if(g=Qr,g!==null){switch(A&-A){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|A))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,Ci(a,w),Vs(g,a,w,-1))}return eg(),g=Tp(Error(r(421))),Dd(a,c,A,g)}return w.data==="$?"?(c.flags|=128,c.child=a.child,c=TI.bind(null,a),w._reactRetry=c,null):(a=_.treeContext,ss=ha(w.nextSibling),ns=c,Xt=!0,zs=null,a!==null&&(Ss[_s++]=ki,Ss[_s++]=Ni,Ss[_s++]=Ga,ki=a.id,Ni=a.overflow,Ga=c),c=Fp(c,g.children),c.flags|=4096,c)}function y1(a,c,h){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),pp(a.return,c,h)}function Lp(a,c,h,g,w){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=h,_.tailMode=w)}function v1(a,c,h){var g=c.pendingProps,w=g.revealOrder,_=g.tail;if(An(a,c,g.children,h),g=rr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&y1(a,h,c);else if(a.tag===19)y1(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Bt(rr,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)a=h.alternate,a!==null&&Cd(a)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Lp(c,!1,w,h,_);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&Cd(a)===null){c.child=w;break}a=w.sibling,w.sibling=h,h=w,w=a}Lp(c,!0,h,null,_);break;case"together":Lp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Rd(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Ai(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),Za|=c.lanes,(h&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=_a(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=_a(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function wI(a,c,h){switch(c.tag){case 3:m1(c),Yo();break;case 5:Tb(c);break;case 1:Un(c.type)&&yd(c);break;case 4:vp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;Bt(Sd,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Bt(rr,rr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?g1(a,c,h):(Bt(rr,rr.current&1),a=Ai(a,c,h),a!==null?a.sibling:null);Bt(rr,rr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(a.flags&128)!==0){if(g)return v1(a,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Bt(rr,rr.current),g)break;return null;case 22:case 23:return c.lanes=0,d1(a,c,h)}return Ai(a,c,h)}var x1,zp,w1,b1;x1=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},zp=function(){},w1=function(a,c,h,g){var w=a.memoizedProps;if(w!==g){a=c.stateNode,Qa(ai.current);var _=null;switch(h){case"input":w=Ue(a,w),g=Ue(a,g),_=[];break;case"select":w=pe({},w,{value:void 0}),g=pe({},g,{value:void 0}),_=[];break;case"textarea":w=se(a,w),g=se(a,g),_=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=md)}gr(h,g);var A;h=null;for(ce in w)if(!g.hasOwnProperty(ce)&&w.hasOwnProperty(ce)&&w[ce]!=null)if(ce==="style"){var $=w[ce];for(A in $)$.hasOwnProperty(A)&&(h||(h={}),h[A]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(s.hasOwnProperty(ce)?_||(_=[]):(_=_||[]).push(ce,null));for(ce in g){var U=g[ce];if($=w!=null?w[ce]:void 0,g.hasOwnProperty(ce)&&U!==$&&(U!=null||$!=null))if(ce==="style")if($){for(A in $)!$.hasOwnProperty(A)||U&&U.hasOwnProperty(A)||(h||(h={}),h[A]="");for(A in U)U.hasOwnProperty(A)&&$[A]!==U[A]&&(h||(h={}),h[A]=U[A])}else h||(_||(_=[]),_.push(ce,h)),h=U;else ce==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,$=$?$.__html:void 0,U!=null&&$!==U&&(_=_||[]).push(ce,U)):ce==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(ce,""+U):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(ce)?(U!=null&&ce==="onScroll"&&Ht("scroll",a),_||$===U||(_=[])):(_=_||[]).push(ce,U))}h&&(_=_||[]).push("style",h);var ce=_;(c.updateQueue=ce)&&(c.flags|=4)}},b1=function(a,c,h,g){h!==g&&(c.flags|=4)};function Fc(a,c){if(!Xt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Sn(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(c)for(var w=a.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=g,a.childLanes=h,c}function bI(a,c,h){var g=c.pendingProps;switch(lp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(c),null;case 1:return Un(c.type)&&gd(),Sn(c),null;case 3:return g=c.stateNode,Zo(),Kt(zn),Kt(bn),bp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(bd(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,zs!==null&&(Qp(zs),zs=null))),zp(a,c),Sn(c),null;case 5:xp(c);var w=Qa(Ic.current);if(h=c.type,a!==null&&c.stateNode!=null)w1(a,c,h,g,w),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Sn(c),null}if(a=Qa(ai.current),bd(c)){g=c.stateNode,h=c.type;var _=c.memoizedProps;switch(g[ii]=c,g[Ec]=_,a=(c.mode&1)!==0,h){case"dialog":Ht("cancel",g),Ht("close",g);break;case"iframe":case"object":case"embed":Ht("load",g);break;case"video":case"audio":for(w=0;w<kc.length;w++)Ht(kc[w],g);break;case"source":Ht("error",g);break;case"img":case"image":case"link":Ht("error",g),Ht("load",g);break;case"details":Ht("toggle",g);break;case"input":st(g,_),Ht("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},Ht("invalid",g);break;case"textarea":be(g,_),Ht("invalid",g)}gr(h,_),w=null;for(var A in _)if(_.hasOwnProperty(A)){var $=_[A];A==="children"?typeof $=="string"?g.textContent!==$&&(_.suppressHydrationWarning!==!0&&hd(g.textContent,$,a),w=["children",$]):typeof $=="number"&&g.textContent!==""+$&&(_.suppressHydrationWarning!==!0&&hd(g.textContent,$,a),w=["children",""+$]):s.hasOwnProperty(A)&&$!=null&&A==="onScroll"&&Ht("scroll",g)}switch(h){case"input":tt(g),_t(g,_,!0);break;case"textarea":tt(g),ve(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=md)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{A=w.nodeType===9?w:w.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Fe(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=A.createElement(h,{is:g.is}):(a=A.createElement(h),h==="select"&&(A=a,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):a=A.createElementNS(a,h),a[ii]=c,a[Ec]=g,x1(a,c,!1,!1),c.stateNode=a;e:{switch(A=sr(h,g),h){case"dialog":Ht("cancel",a),Ht("close",a),w=g;break;case"iframe":case"object":case"embed":Ht("load",a),w=g;break;case"video":case"audio":for(w=0;w<kc.length;w++)Ht(kc[w],a);w=g;break;case"source":Ht("error",a),w=g;break;case"img":case"image":case"link":Ht("error",a),Ht("load",a),w=g;break;case"details":Ht("toggle",a),w=g;break;case"input":st(a,g),w=Ue(a,g),Ht("invalid",a);break;case"option":w=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},w=pe({},g,{value:void 0}),Ht("invalid",a);break;case"textarea":be(a,g),w=se(a,g),Ht("invalid",a);break;default:w=g}gr(h,w),$=w;for(_ in $)if($.hasOwnProperty(_)){var U=$[_];_==="style"?At(a,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&vt(a,U)):_==="children"?typeof U=="string"?(h!=="textarea"||U!=="")&&Qt(a,U):typeof U=="number"&&Qt(a,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&Ht("scroll",a):U!=null&&N(a,_,U,A))}switch(h){case"input":tt(a),_t(a,g,!1);break;case"textarea":tt(a),ve(a);break;case"option":g.value!=null&&a.setAttribute("value",""+we(g.value));break;case"select":a.multiple=!!g.multiple,_=g.value,_!=null?Y(a,!!g.multiple,_,!1):g.defaultValue!=null&&Y(a,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(a.onclick=md)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Sn(c),null;case 6:if(a&&c.stateNode!=null)b1(a,c,a.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=Qa(Ic.current),Qa(ai.current),bd(c)){if(g=c.stateNode,h=c.memoizedProps,g[ii]=c,(_=g.nodeValue!==h)&&(a=ns,a!==null))switch(a.tag){case 3:hd(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&hd(g.nodeValue,h,(a.mode&1)!==0)}_&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[ii]=c,c.stateNode=g}return Sn(c),null;case 13:if(Kt(rr),g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Xt&&ss!==null&&(c.mode&1)!==0&&(c.flags&128)===0)_b(),Yo(),c.flags|=98560,_=!1;else if(_=bd(c),g!==null&&g.dehydrated!==null){if(a===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[ii]=c}else Yo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Sn(c),_=!1}else zs!==null&&(Qp(zs),zs=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(rr.current&1)!==0?Tr===0&&(Tr=3):eg())),c.updateQueue!==null&&(c.flags|=4),Sn(c),null);case 4:return Zo(),zp(a,c),a===null&&Nc(c.stateNode.containerInfo),Sn(c),null;case 10:return mp(c.type._context),Sn(c),null;case 17:return Un(c.type)&&gd(),Sn(c),null;case 19:if(Kt(rr),_=c.memoizedState,_===null)return Sn(c),null;if(g=(c.flags&128)!==0,A=_.rendering,A===null)if(g)Fc(_,!1);else{if(Tr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(A=Cd(a),A!==null){for(c.flags|=128,Fc(_,!1),g=A.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)_=h,a=g,_.flags&=14680066,A=_.alternate,A===null?(_.childLanes=0,_.lanes=a,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,_.type=A.type,a=A.dependencies,_.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return Bt(rr,rr.current&1|2),c.child}a=a.sibling}_.tail!==null&&F()>nl&&(c.flags|=128,g=!0,Fc(_,!1),c.lanes=4194304)}else{if(!g)if(a=Cd(A),a!==null){if(c.flags|=128,g=!0,h=a.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Fc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!A.alternate&&!Xt)return Sn(c),null}else 2*F()-_.renderingStartTime>nl&&h!==1073741824&&(c.flags|=128,g=!0,Fc(_,!1),c.lanes=4194304);_.isBackwards?(A.sibling=c.child,c.child=A):(h=_.last,h!==null?h.sibling=A:c.child=A,_.last=A)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=F(),c.sibling=null,h=rr.current,Bt(rr,g?h&1|2:h&1),c):(Sn(c),null);case 22:case 23:return Zp(),g=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(is&1073741824)!==0&&(Sn(c),c.subtreeFlags&6&&(c.flags|=8192)):Sn(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function jI(a,c){switch(lp(c),c.tag){case 1:return Un(c.type)&&gd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Zo(),Kt(zn),Kt(bn),bp(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return xp(c),null;case 13:if(Kt(rr),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Yo()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Kt(rr),null;case 4:return Zo(),null;case 10:return mp(c.type._context),null;case 22:case 23:return Zp(),null;case 24:return null;default:return null}}var $d=!1,_n=!1,SI=typeof WeakSet=="function"?WeakSet:Set,qe=null;function tl(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){or(a,c,g)}else h.current=null}function Up(a,c,h){try{h()}catch(g){or(a,c,g)}}var j1=!1;function _I(a,c){if(Zm=rd,a=eb(),qm(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var A=0,$=-1,U=-1,ce=0,Ce=0,Ae=a,ke=null;t:for(;;){for(var Ve;Ae!==h||w!==0&&Ae.nodeType!==3||($=A+w),Ae!==_||g!==0&&Ae.nodeType!==3||(U=A+g),Ae.nodeType===3&&(A+=Ae.nodeValue.length),(Ve=Ae.firstChild)!==null;)ke=Ae,Ae=Ve;for(;;){if(Ae===a)break t;if(ke===h&&++ce===w&&($=A),ke===_&&++Ce===g&&(U=A),(Ve=Ae.nextSibling)!==null)break;Ae=ke,ke=Ae.parentNode}Ae=Ve}h=$===-1||U===-1?null:{start:$,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(ep={focusedElem:a,selectionRange:h},rd=!1,qe=c;qe!==null;)if(c=qe,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,qe=a;else for(;qe!==null;){c=qe;try{var Ge=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var Je=Ge.memoizedProps,dr=Ge.memoizedState,ee=c.stateNode,V=ee.getSnapshotBeforeUpdate(c.elementType===c.type?Je:Us(c.type,Je),dr);ee.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var ie=c.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ie){or(c,c.return,Ie)}if(a=c.sibling,a!==null){a.return=c.return,qe=a;break}qe=c.return}return Ge=j1,j1=!1,Ge}function Lc(a,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&a)===a){var _=w.destroy;w.destroy=void 0,_!==void 0&&Up(c,h,_)}w=w.next}while(w!==g)}}function Md(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Bp(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof c=="function"?c(a):c.current=a}}function S1(a){var c=a.alternate;c!==null&&(a.alternate=null,S1(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[ii],delete c[Ec],delete c[sp],delete c[aI],delete c[oI])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function _1(a){return a.tag===5||a.tag===3||a.tag===4}function k1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wp(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(a,c):h.insertBefore(a,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(a,h)):(c=h,c.appendChild(a)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=md));else if(g!==4&&(a=a.child,a!==null))for(Wp(a,c,h),a=a.sibling;a!==null;)Wp(a,c,h),a=a.sibling}function Vp(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Vp(a,c,h),a=a.sibling;a!==null;)Vp(a,c,h),a=a.sibling}var cn=null,Bs=!1;function xa(a,c,h){for(h=h.child;h!==null;)N1(a,c,h),h=h.sibling}function N1(a,c,h){if(C&&typeof C.onCommitFiberUnmount=="function")try{C.onCommitFiberUnmount(Le,h)}catch{}switch(h.tag){case 5:_n||tl(h,c);case 6:var g=cn,w=Bs;cn=null,xa(a,c,h),cn=g,Bs=w,cn!==null&&(Bs?(a=cn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):cn.removeChild(h.stateNode));break;case 18:cn!==null&&(Bs?(a=cn,h=h.stateNode,a.nodeType===8?np(a.parentNode,h):a.nodeType===1&&np(a,h),yc(a)):np(cn,h.stateNode));break;case 4:g=cn,w=Bs,cn=h.stateNode.containerInfo,Bs=!0,xa(a,c,h),cn=g,Bs=w;break;case 0:case 11:case 14:case 15:if(!_n&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var _=w,A=_.destroy;_=_.tag,A!==void 0&&((_&2)!==0||(_&4)!==0)&&Up(h,c,A),w=w.next}while(w!==g)}xa(a,c,h);break;case 1:if(!_n&&(tl(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch($){or(h,c,$)}xa(a,c,h);break;case 21:xa(a,c,h);break;case 22:h.mode&1?(_n=(g=_n)||h.memoizedState!==null,xa(a,c,h),_n=g):xa(a,c,h);break;default:xa(a,c,h)}}function C1(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new SI),c.forEach(function(g){var w=II.bind(null,a,g);h.has(g)||(h.add(g),g.then(w,w))})}}function Ws(a,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var _=a,A=c,$=A;e:for(;$!==null;){switch($.tag){case 5:cn=$.stateNode,Bs=!1;break e;case 3:cn=$.stateNode.containerInfo,Bs=!0;break e;case 4:cn=$.stateNode.containerInfo,Bs=!0;break e}$=$.return}if(cn===null)throw Error(r(160));N1(_,A,w),cn=null,Bs=!1;var U=w.alternate;U!==null&&(U.return=null),w.return=null}catch(ce){or(w,c,ce)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)E1(c,a),c=c.sibling}function E1(a,c){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ws(c,a),li(a),g&4){try{Lc(3,a,a.return),Md(3,a)}catch(Je){or(a,a.return,Je)}try{Lc(5,a,a.return)}catch(Je){or(a,a.return,Je)}}break;case 1:Ws(c,a),li(a),g&512&&h!==null&&tl(h,h.return);break;case 5:if(Ws(c,a),li(a),g&512&&h!==null&&tl(h,h.return),a.flags&32){var w=a.stateNode;try{Qt(w,"")}catch(Je){or(a,a.return,Je)}}if(g&4&&(w=a.stateNode,w!=null)){var _=a.memoizedProps,A=h!==null?h.memoizedProps:_,$=a.type,U=a.updateQueue;if(a.updateQueue=null,U!==null)try{$==="input"&&_.type==="radio"&&_.name!=null&&pt(w,_),sr($,A);var ce=sr($,_);for(A=0;A<U.length;A+=2){var Ce=U[A],Ae=U[A+1];Ce==="style"?At(w,Ae):Ce==="dangerouslySetInnerHTML"?vt(w,Ae):Ce==="children"?Qt(w,Ae):N(w,Ce,Ae,ce)}switch($){case"input":St(w,_);break;case"textarea":je(w,_);break;case"select":var ke=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var Ve=_.value;Ve!=null?Y(w,!!_.multiple,Ve,!1):ke!==!!_.multiple&&(_.defaultValue!=null?Y(w,!!_.multiple,_.defaultValue,!0):Y(w,!!_.multiple,_.multiple?[]:"",!1))}w[Ec]=_}catch(Je){or(a,a.return,Je)}}break;case 6:if(Ws(c,a),li(a),g&4){if(a.stateNode===null)throw Error(r(162));w=a.stateNode,_=a.memoizedProps;try{w.nodeValue=_}catch(Je){or(a,a.return,Je)}}break;case 3:if(Ws(c,a),li(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{yc(c.containerInfo)}catch(Je){or(a,a.return,Je)}break;case 4:Ws(c,a),li(a);break;case 13:Ws(c,a),li(a),w=a.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(Kp=F())),g&4&&C1(a);break;case 22:if(Ce=h!==null&&h.memoizedState!==null,a.mode&1?(_n=(ce=_n)||Ce,Ws(c,a),_n=ce):Ws(c,a),li(a),g&8192){if(ce=a.memoizedState!==null,(a.stateNode.isHidden=ce)&&!Ce&&(a.mode&1)!==0)for(qe=a,Ce=a.child;Ce!==null;){for(Ae=qe=Ce;qe!==null;){switch(ke=qe,Ve=ke.child,ke.tag){case 0:case 11:case 14:case 15:Lc(4,ke,ke.return);break;case 1:tl(ke,ke.return);var Ge=ke.stateNode;if(typeof Ge.componentWillUnmount=="function"){g=ke,h=ke.return;try{c=g,Ge.props=c.memoizedProps,Ge.state=c.memoizedState,Ge.componentWillUnmount()}catch(Je){or(g,h,Je)}}break;case 5:tl(ke,ke.return);break;case 22:if(ke.memoizedState!==null){O1(Ae);continue}}Ve!==null?(Ve.return=ke,qe=Ve):O1(Ae)}Ce=Ce.sibling}e:for(Ce=null,Ae=a;;){if(Ae.tag===5){if(Ce===null){Ce=Ae;try{w=Ae.stateNode,ce?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):($=Ae.stateNode,U=Ae.memoizedProps.style,A=U!=null&&U.hasOwnProperty("display")?U.display:null,$.style.display=kt("display",A))}catch(Je){or(a,a.return,Je)}}}else if(Ae.tag===6){if(Ce===null)try{Ae.stateNode.nodeValue=ce?"":Ae.memoizedProps}catch(Je){or(a,a.return,Je)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===a)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===a)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===a)break e;Ce===Ae&&(Ce=null),Ae=Ae.return}Ce===Ae&&(Ce=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:Ws(c,a),li(a),g&4&&C1(a);break;case 21:break;default:Ws(c,a),li(a)}}function li(a){var c=a.flags;if(c&2){try{e:{for(var h=a.return;h!==null;){if(_1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(Qt(w,""),g.flags&=-33);var _=k1(a);Vp(a,_,w);break;case 3:case 4:var A=g.stateNode.containerInfo,$=k1(a);Wp(a,$,A);break;default:throw Error(r(161))}}catch(U){or(a,a.return,U)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function kI(a,c,h){qe=a,A1(a)}function A1(a,c,h){for(var g=(a.mode&1)!==0;qe!==null;){var w=qe,_=w.child;if(w.tag===22&&g){var A=w.memoizedState!==null||$d;if(!A){var $=w.alternate,U=$!==null&&$.memoizedState!==null||_n;$=$d;var ce=_n;if($d=A,(_n=U)&&!ce)for(qe=w;qe!==null;)A=qe,U=A.child,A.tag===22&&A.memoizedState!==null?T1(w):U!==null?(U.return=A,qe=U):T1(w);for(;_!==null;)qe=_,A1(_),_=_.sibling;qe=w,$d=$,_n=ce}P1(a)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,qe=_):P1(a)}}function P1(a){for(;qe!==null;){var c=qe;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:_n||Md(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!_n)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:Us(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&Ob(c,_,g);break;case 3:var A=c.updateQueue;if(A!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Ob(c,A,h)}break;case 5:var $=c.stateNode;if(h===null&&c.flags&4){h=$;var U=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&h.focus();break;case"img":U.src&&(h.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ce=c.alternate;if(ce!==null){var Ce=ce.memoizedState;if(Ce!==null){var Ae=Ce.dehydrated;Ae!==null&&yc(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_n||c.flags&512&&Bp(c)}catch(ke){or(c,c.return,ke)}}if(c===a){qe=null;break}if(h=c.sibling,h!==null){h.return=c.return,qe=h;break}qe=c.return}}function O1(a){for(;qe!==null;){var c=qe;if(c===a){qe=null;break}var h=c.sibling;if(h!==null){h.return=c.return,qe=h;break}qe=c.return}}function T1(a){for(;qe!==null;){var c=qe;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Md(4,c)}catch(U){or(c,h,U)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(U){or(c,w,U)}}var _=c.return;try{Bp(c)}catch(U){or(c,_,U)}break;case 5:var A=c.return;try{Bp(c)}catch(U){or(c,A,U)}}}catch(U){or(c,c.return,U)}if(c===a){qe=null;break}var $=c.sibling;if($!==null){$.return=c.return,qe=$;break}qe=c.return}}var NI=Math.ceil,Fd=O.ReactCurrentDispatcher,qp=O.ReactCurrentOwner,Cs=O.ReactCurrentBatchConfig,Nt=0,Qr=null,xr=null,un=0,is=0,rl=ma(0),Tr=0,zc=null,Za=0,Ld=0,Hp=0,Uc=null,Wn=null,Kp=0,nl=1/0,Pi=null,zd=!1,Gp=null,wa=null,Ud=!1,ba=null,Bd=0,Bc=0,Yp=null,Wd=-1,Vd=0;function Pn(){return(Nt&6)!==0?F():Wd!==-1?Wd:Wd=F()}function ja(a){return(a.mode&1)===0?1:(Nt&2)!==0&&un!==0?un&-un:cI.transition!==null?(Vd===0&&(Vd=ts()),Vd):(a=L,a!==0||(a=window.event,a=a===void 0?16:Dw(a.type)),a)}function Vs(a,c,h,g){if(50<Bc)throw Bc=0,Yp=null,Error(r(185));ji(a,h,g),((Nt&2)===0||a!==Qr)&&(a===Qr&&((Nt&2)===0&&(Ld|=h),Tr===4&&Sa(a,un)),Vn(a,g),h===1&&Nt===0&&(c.mode&1)===0&&(nl=F()+500,vd&&ga()))}function Vn(a,c){var h=a.callbackNode;bi(a,c);var g=Ln(a,a===Qr?un:0);if(g===0)h!==null&&Ye(h),a.callbackNode=null,a.callbackPriority=0;else if(c=g&-g,a.callbackPriority!==c){if(h!=null&&Ye(h),c===1)a.tag===0?lI(D1.bind(null,a)):xb(D1.bind(null,a)),sI(function(){(Nt&6)===0&&ga()}),h=null;else{switch(We(g)){case 1:h=xe;break;case 4:h=Te;break;case 16:h=Oe;break;case 536870912:h=$e;break;default:h=Oe}h=B1(h,I1.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function I1(a,c){if(Wd=-1,Vd=0,(Nt&6)!==0)throw Error(r(327));var h=a.callbackNode;if(sl()&&a.callbackNode!==h)return null;var g=Ln(a,a===Qr?un:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||c)c=qd(a,g);else{c=g;var w=Nt;Nt|=2;var _=$1();(Qr!==a||un!==c)&&(Pi=null,nl=F()+500,to(a,c));do try{AI();break}catch($){R1(a,$)}while(!0);hp(),Fd.current=_,Nt=w,xr!==null?c=0:(Qr=null,un=0,c=Tr)}if(c!==0){if(c===2&&(w=aa(a),w!==0&&(g=w,c=Jp(a,w))),c===1)throw h=zc,to(a,0),Sa(a,g),Vn(a,F()),h;if(c===6)Sa(a,g);else{if(w=a.current.alternate,(g&30)===0&&!CI(w)&&(c=qd(a,g),c===2&&(_=aa(a),_!==0&&(g=_,c=Jp(a,_))),c===1))throw h=zc,to(a,0),Sa(a,g),Vn(a,F()),h;switch(a.finishedWork=w,a.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:ro(a,Wn,Pi);break;case 3:if(Sa(a,g),(g&130023424)===g&&(c=Kp+500-F(),10<c)){if(Ln(a,0)!==0)break;if(w=a.suspendedLanes,(w&g)!==g){Pn(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=rp(ro.bind(null,a,Wn,Pi),c);break}ro(a,Wn,Pi);break;case 4:if(Sa(a,g),(g&4194240)===g)break;for(c=a.eventTimes,w=-1;0<g;){var A=31-le(g);_=1<<A,A=c[A],A>w&&(w=A),g&=~_}if(g=w,g=F()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*NI(g/1960))-g,10<g){a.timeoutHandle=rp(ro.bind(null,a,Wn,Pi),g);break}ro(a,Wn,Pi);break;case 5:ro(a,Wn,Pi);break;default:throw Error(r(329))}}}return Vn(a,F()),a.callbackNode===h?I1.bind(null,a):null}function Jp(a,c){var h=Uc;return a.current.memoizedState.isDehydrated&&(to(a,c).flags|=256),a=qd(a,c),a!==2&&(c=Wn,Wn=h,c!==null&&Qp(c)),a}function Qp(a){Wn===null?Wn=a:Wn.push.apply(Wn,a)}function CI(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],_=w.getSnapshot;w=w.value;try{if(!Ls(_(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Sa(a,c){for(c&=~Hp,c&=~Ld,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-le(c),g=1<<h;a[h]=-1,c&=~g}}function D1(a){if((Nt&6)!==0)throw Error(r(327));sl();var c=Ln(a,0);if((c&1)===0)return Vn(a,F()),null;var h=qd(a,c);if(a.tag!==0&&h===2){var g=aa(a);g!==0&&(c=g,h=Jp(a,g))}if(h===1)throw h=zc,to(a,0),Sa(a,c),Vn(a,F()),h;if(h===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,ro(a,Wn,Pi),Vn(a,F()),null}function Xp(a,c){var h=Nt;Nt|=1;try{return a(c)}finally{Nt=h,Nt===0&&(nl=F()+500,vd&&ga())}}function eo(a){ba!==null&&ba.tag===0&&(Nt&6)===0&&sl();var c=Nt;Nt|=1;var h=Cs.transition,g=L;try{if(Cs.transition=null,L=1,a)return a()}finally{L=g,Cs.transition=h,Nt=c,(Nt&6)===0&&ga()}}function Zp(){is=rl.current,Kt(rl)}function to(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,nI(h)),xr!==null)for(h=xr.return;h!==null;){var g=h;switch(lp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gd();break;case 3:Zo(),Kt(zn),Kt(bn),bp();break;case 5:xp(g);break;case 4:Zo();break;case 13:Kt(rr);break;case 19:Kt(rr);break;case 10:mp(g.type._context);break;case 22:case 23:Zp()}h=h.return}if(Qr=a,xr=a=_a(a.current,null),un=is=c,Tr=0,zc=null,Hp=Ld=Za=0,Wn=Uc=null,Ja!==null){for(c=0;c<Ja.length;c++)if(h=Ja[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,_=h.pending;if(_!==null){var A=_.next;_.next=w,g.next=A}h.pending=g}Ja=null}return a}function R1(a,c){do{var h=xr;try{if(hp(),Ed.current=Td,Ad){for(var g=nr.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}Ad=!1}if(Xa=0,Jr=Or=nr=null,Dc=!1,Rc=0,qp.current=null,h===null||h.return===null){Tr=1,zc=c,xr=null;break}e:{var _=a,A=h.return,$=h,U=c;if(c=un,$.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var ce=U,Ce=$,Ae=Ce.tag;if((Ce.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var ke=Ce.alternate;ke?(Ce.updateQueue=ke.updateQueue,Ce.memoizedState=ke.memoizedState,Ce.lanes=ke.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Ve=a1(A);if(Ve!==null){Ve.flags&=-257,o1(Ve,A,$,_,c),Ve.mode&1&&i1(_,ce,c),c=Ve,U=ce;var Ge=c.updateQueue;if(Ge===null){var Je=new Set;Je.add(U),c.updateQueue=Je}else Ge.add(U);break e}else{if((c&1)===0){i1(_,ce,c),eg();break e}U=Error(r(426))}}else if(Xt&&$.mode&1){var dr=a1(A);if(dr!==null){(dr.flags&65536)===0&&(dr.flags|=256),o1(dr,A,$,_,c),dp(el(U,$));break e}}_=U=el(U,$),Tr!==4&&(Tr=2),Uc===null?Uc=[_]:Uc.push(_),_=A;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var ee=n1(_,U,c);Pb(_,ee);break e;case 1:$=U;var V=_.type,ie=_.stateNode;if((_.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(wa===null||!wa.has(ie)))){_.flags|=65536,c&=-c,_.lanes|=c;var Ie=s1(_,$,c);Pb(_,Ie);break e}}_=_.return}while(_!==null)}F1(h)}catch(et){c=et,xr===h&&h!==null&&(xr=h=h.return);continue}break}while(!0)}function $1(){var a=Fd.current;return Fd.current=Td,a===null?Td:a}function eg(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Qr===null||(Za&268435455)===0&&(Ld&268435455)===0||Sa(Qr,un)}function qd(a,c){var h=Nt;Nt|=2;var g=$1();(Qr!==a||un!==c)&&(Pi=null,to(a,c));do try{EI();break}catch(w){R1(a,w)}while(!0);if(hp(),Nt=h,Fd.current=g,xr!==null)throw Error(r(261));return Qr=null,un=0,Tr}function EI(){for(;xr!==null;)M1(xr)}function AI(){for(;xr!==null&&!nt();)M1(xr)}function M1(a){var c=U1(a.alternate,a,is);a.memoizedProps=a.pendingProps,c===null?F1(a):xr=c,qp.current=null}function F1(a){var c=a;do{var h=c.alternate;if(a=c.return,(c.flags&32768)===0){if(h=bI(h,c,is),h!==null){xr=h;return}}else{if(h=jI(h,c),h!==null){h.flags&=32767,xr=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Tr=6,xr=null;return}}if(c=c.sibling,c!==null){xr=c;return}xr=c=a}while(c!==null);Tr===0&&(Tr=5)}function ro(a,c,h){var g=L,w=Cs.transition;try{Cs.transition=null,L=1,PI(a,c,h,g)}finally{Cs.transition=w,L=g}return null}function PI(a,c,h,g){do sl();while(ba!==null);if((Nt&6)!==0)throw Error(r(327));h=a.finishedWork;var w=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var _=h.lanes|h.childLanes;if(Tm(a,_),a===Qr&&(xr=Qr=null,un=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Ud||(Ud=!0,B1(Oe,function(){return sl(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=Cs.transition,Cs.transition=null;var A=L;L=1;var $=Nt;Nt|=4,qp.current=null,_I(a,h),E1(h,a),J4(ep),rd=!!Zm,ep=Zm=null,a.current=h,kI(h),D(),Nt=$,L=A,Cs.transition=_}else a.current=h;if(Ud&&(Ud=!1,ba=a,Bd=w),_=a.pendingLanes,_===0&&(wa=null),X(h.stateNode),Vn(a,F()),c!==null)for(g=a.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(zd)throw zd=!1,a=Gp,Gp=null,a;return(Bd&1)!==0&&a.tag!==0&&sl(),_=a.pendingLanes,(_&1)!==0?a===Yp?Bc++:(Bc=0,Yp=a):Bc=0,ga(),null}function sl(){if(ba!==null){var a=We(Bd),c=Cs.transition,h=L;try{if(Cs.transition=null,L=16>a?16:a,ba===null)var g=!1;else{if(a=ba,ba=null,Bd=0,(Nt&6)!==0)throw Error(r(331));var w=Nt;for(Nt|=4,qe=a.current;qe!==null;){var _=qe,A=_.child;if((qe.flags&16)!==0){var $=_.deletions;if($!==null){for(var U=0;U<$.length;U++){var ce=$[U];for(qe=ce;qe!==null;){var Ce=qe;switch(Ce.tag){case 0:case 11:case 15:Lc(8,Ce,_)}var Ae=Ce.child;if(Ae!==null)Ae.return=Ce,qe=Ae;else for(;qe!==null;){Ce=qe;var ke=Ce.sibling,Ve=Ce.return;if(S1(Ce),Ce===ce){qe=null;break}if(ke!==null){ke.return=Ve,qe=ke;break}qe=Ve}}}var Ge=_.alternate;if(Ge!==null){var Je=Ge.child;if(Je!==null){Ge.child=null;do{var dr=Je.sibling;Je.sibling=null,Je=dr}while(Je!==null)}}qe=_}}if((_.subtreeFlags&2064)!==0&&A!==null)A.return=_,qe=A;else e:for(;qe!==null;){if(_=qe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Lc(9,_,_.return)}var ee=_.sibling;if(ee!==null){ee.return=_.return,qe=ee;break e}qe=_.return}}var V=a.current;for(qe=V;qe!==null;){A=qe;var ie=A.child;if((A.subtreeFlags&2064)!==0&&ie!==null)ie.return=A,qe=ie;else e:for(A=V;qe!==null;){if($=qe,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Md(9,$)}}catch(et){or($,$.return,et)}if($===A){qe=null;break e}var Ie=$.sibling;if(Ie!==null){Ie.return=$.return,qe=Ie;break e}qe=$.return}}if(Nt=w,ga(),C&&typeof C.onPostCommitFiberRoot=="function")try{C.onPostCommitFiberRoot(Le,a)}catch{}g=!0}return g}finally{L=h,Cs.transition=c}}return!1}function L1(a,c,h){c=el(h,c),c=n1(a,c,1),a=va(a,c,1),c=Pn(),a!==null&&(ji(a,1,c),Vn(a,c))}function or(a,c,h){if(a.tag===3)L1(a,a,h);else for(;c!==null;){if(c.tag===3){L1(c,a,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wa===null||!wa.has(g))){a=el(h,a),a=s1(c,a,1),c=va(c,a,1),a=Pn(),c!==null&&(ji(c,1,a),Vn(c,a));break}}c=c.return}}function OI(a,c,h){var g=a.pingCache;g!==null&&g.delete(c),c=Pn(),a.pingedLanes|=a.suspendedLanes&h,Qr===a&&(un&h)===h&&(Tr===4||Tr===3&&(un&130023424)===un&&500>F()-Kp?to(a,0):Hp|=h),Vn(a,c)}function z1(a,c){c===0&&((a.mode&1)===0?c=1:(c=gt,gt<<=1,(gt&130023424)===0&&(gt=4194304)));var h=Pn();a=Ci(a,c),a!==null&&(ji(a,c,h),Vn(a,h))}function TI(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),z1(a,h)}function II(a,c){var h=0;switch(a.tag){case 13:var g=a.stateNode,w=a.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),z1(a,h)}var U1;U1=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||zn.current)Bn=!0;else{if((a.lanes&h)===0&&(c.flags&128)===0)return Bn=!1,wI(a,c,h);Bn=(a.flags&131072)!==0}else Bn=!1,Xt&&(c.flags&1048576)!==0&&wb(c,wd,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Rd(a,c),a=c.pendingProps;var w=Ho(c,bn.current);Xo(c,h),w=_p(null,c,g,a,w,h);var _=kp();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Un(g)?(_=!0,yd(c)):_=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,yp(c),w.updater=Id,c.stateNode=w,w._reactInternals=c,Op(c,g,a,h),c=Rp(null,c,g,!0,_,h)):(c.tag=0,Xt&&_&&op(c),An(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Rd(a,c),a=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=RI(g),a=Us(g,a),w){case 0:c=Dp(null,c,g,a,h);break e;case 1:c=h1(null,c,g,a,h);break e;case 11:c=l1(null,c,g,a,h);break e;case 14:c=c1(null,c,g,Us(g.type,a),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Us(g,w),Dp(a,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Us(g,w),h1(a,c,g,w,h);case 3:e:{if(m1(c),a===null)throw Error(r(387));g=c.pendingProps,_=c.memoizedState,w=_.element,Ab(a,c),Nd(c,g,null,h);var A=c.memoizedState;if(g=A.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){w=el(Error(r(423)),c),c=p1(a,c,g,h,w);break e}else if(g!==w){w=el(Error(r(424)),c),c=p1(a,c,g,h,w);break e}else for(ss=ha(c.stateNode.containerInfo.firstChild),ns=c,Xt=!0,zs=null,h=Cb(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Yo(),g===w){c=Ai(a,c,h);break e}An(a,c,g,h)}c=c.child}return c;case 5:return Tb(c),a===null&&up(c),g=c.type,w=c.pendingProps,_=a!==null?a.memoizedProps:null,A=w.children,tp(g,w)?A=null:_!==null&&tp(g,_)&&(c.flags|=32),f1(a,c),An(a,c,A,h),c.child;case 6:return a===null&&up(c),null;case 13:return g1(a,c,h);case 4:return vp(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=Jo(c,null,g,h):An(a,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Us(g,w),l1(a,c,g,w,h);case 7:return An(a,c,c.pendingProps,h),c.child;case 8:return An(a,c,c.pendingProps.children,h),c.child;case 12:return An(a,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,_=c.memoizedProps,A=w.value,Bt(Sd,g._currentValue),g._currentValue=A,_!==null)if(Ls(_.value,A)){if(_.children===w.children&&!zn.current){c=Ai(a,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var $=_.dependencies;if($!==null){A=_.child;for(var U=$.firstContext;U!==null;){if(U.context===g){if(_.tag===1){U=Ei(-1,h&-h),U.tag=2;var ce=_.updateQueue;if(ce!==null){ce=ce.shared;var Ce=ce.pending;Ce===null?U.next=U:(U.next=Ce.next,Ce.next=U),ce.pending=U}}_.lanes|=h,U=_.alternate,U!==null&&(U.lanes|=h),pp(_.return,h,c),$.lanes|=h;break}U=U.next}}else if(_.tag===10)A=_.type===c.type?null:_.child;else if(_.tag===18){if(A=_.return,A===null)throw Error(r(341));A.lanes|=h,$=A.alternate,$!==null&&($.lanes|=h),pp(A,h,c),A=_.sibling}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===c){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}An(a,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,Xo(c,h),w=ks(w),g=g(w),c.flags|=1,An(a,c,g,h),c.child;case 14:return g=c.type,w=Us(g,c.pendingProps),w=Us(g.type,w),c1(a,c,g,w,h);case 15:return u1(a,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Us(g,w),Rd(a,c),c.tag=1,Un(g)?(a=!0,yd(c)):a=!1,Xo(c,h),t1(c,g,w),Op(c,g,w,h),Rp(null,c,g,!0,a,h);case 19:return v1(a,c,h);case 22:return d1(a,c,h)}throw Error(r(156,c.tag))};function B1(a,c){return Me(a,c)}function DI(a,c,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(a,c,h,g){return new DI(a,c,h,g)}function tg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function RI(a){if(typeof a=="function")return tg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===q)return 11;if(a===J)return 14}return 2}function _a(a,c){var h=a.alternate;return h===null?(h=Es(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Hd(a,c,h,g,w,_){var A=2;if(g=a,typeof a=="function")tg(a)&&(A=1);else if(typeof a=="string")A=5;else e:switch(a){case R:return no(h.children,w,_,c);case K:A=8,w|=8;break;case z:return a=Es(12,h,c,w|2),a.elementType=z,a.lanes=_,a;case de:return a=Es(13,h,c,w),a.elementType=de,a.lanes=_,a;case oe:return a=Es(19,h,c,w),a.elementType=oe,a.lanes=_,a;case ae:return Kd(h,w,_,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case G:A=10;break e;case W:A=9;break e;case q:A=11;break e;case J:A=14;break e;case Z:A=16,g=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return c=Es(A,h,c,w),c.elementType=a,c.type=g,c.lanes=_,c}function no(a,c,h,g){return a=Es(7,a,g,c),a.lanes=h,a}function Kd(a,c,h,g){return a=Es(22,a,g,c),a.elementType=ae,a.lanes=h,a.stateNode={isHidden:!1},a}function rg(a,c,h){return a=Es(6,a,null,c),a.lanes=h,a}function ng(a,c,h){return c=Es(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function $I(a,c,h,g,w){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function sg(a,c,h,g,w,_,A,$,U){return a=new $I(a,c,h,$,U),c===1?(c=1,_===!0&&(c|=8)):c=0,_=Es(3,null,null,c),a.current=_,_.stateNode=a,_.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},yp(_),a}function MI(a,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:g==null?null:""+g,children:a,containerInfo:c,implementation:h}}function W1(a){if(!a)return pa;a=a._reactInternals;e:{if(Kr(a)!==a||a.tag!==1)throw Error(r(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Un(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(a.tag===1){var h=a.type;if(Un(h))return yb(a,h,c)}return c}function V1(a,c,h,g,w,_,A,$,U){return a=sg(h,g,!0,a,w,_,A,$,U),a.context=W1(null),h=a.current,g=Pn(),w=ja(h),_=Ei(g,w),_.callback=c??null,va(h,_,w),a.current.lanes=w,ji(a,w,g),Vn(a,g),a}function Gd(a,c,h,g){var w=c.current,_=Pn(),A=ja(w);return h=W1(h),c.context===null?c.context=h:c.pendingContext=h,c=Ei(_,A),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=va(w,c,A),a!==null&&(Vs(a,w,A,_),kd(a,w,A)),A}function Yd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function q1(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function ig(a,c){q1(a,c),(a=a.alternate)&&q1(a,c)}function FI(){return null}var H1=typeof reportError=="function"?reportError:function(a){console.error(a)};function ag(a){this._internalRoot=a}Jd.prototype.render=ag.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));Gd(a,c,null,null)},Jd.prototype.unmount=ag.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;eo(function(){Gd(null,a,null,null)}),c[Si]=null}};function Jd(a){this._internalRoot=a}Jd.prototype.unstable_scheduleHydration=function(a){if(a){var c=dc();a={blockedOn:null,target:a,priority:c};for(var h=0;h<ua.length&&c!==0&&c<ua[h].priority;h++);ua.splice(h,0,a),h===0&&Tw(a)}};function og(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Qd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function K1(){}function LI(a,c,h,g,w){if(w){if(typeof g=="function"){var _=g;g=function(){var ce=Yd(A);_.call(ce)}}var A=V1(c,g,a,0,null,!1,!1,"",K1);return a._reactRootContainer=A,a[Si]=A.current,Nc(a.nodeType===8?a.parentNode:a),eo(),A}for(;w=a.lastChild;)a.removeChild(w);if(typeof g=="function"){var $=g;g=function(){var ce=Yd(U);$.call(ce)}}var U=sg(a,0,!1,null,null,!1,!1,"",K1);return a._reactRootContainer=U,a[Si]=U.current,Nc(a.nodeType===8?a.parentNode:a),eo(function(){Gd(c,U,h,g)}),U}function Xd(a,c,h,g,w){var _=h._reactRootContainer;if(_){var A=_;if(typeof w=="function"){var $=w;w=function(){var U=Yd(A);$.call(U)}}Gd(c,A,a,w)}else A=LI(h,c,a,w,g);return Yd(A)}ht=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=En(c.pendingLanes);h!==0&&(uc(c,h|1),Vn(c,F()),(Nt&6)===0&&(nl=F()+500,ga()))}break;case 13:eo(function(){var g=Ci(a,1);if(g!==null){var w=Pn();Vs(g,a,1,w)}}),ig(a,1)}},ar=function(a){if(a.tag===13){var c=Ci(a,134217728);if(c!==null){var h=Pn();Vs(c,a,134217728,h)}ig(a,134217728)}},Yr=function(a){if(a.tag===13){var c=ja(a),h=Ci(a,c);if(h!==null){var g=Pn();Vs(h,a,c,g)}ig(a,c)}},dc=function(){return L},fc=function(a,c){var h=L;try{return L=a,c()}finally{L=h}},ir=function(a,c,h){switch(c){case"input":if(St(a,h),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==a&&g.form===a.form){var w=pd(g);if(!w)throw Error(r(90));te(g),St(g,w)}}}break;case"textarea":je(a,h);break;case"select":c=h.value,c!=null&&Y(a,!!h.multiple,c,!1)}},Rt=Xp,Wr=eo;var zI={usingClientEntryPoint:!1,Events:[Ac,Vo,pd,cr,yr,Xp]},Wc={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UI={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=fe(a),a===null?null:a.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||FI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{Le=Zd.inject(UI),C=Zd}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zI,qn.createPortal=function(a,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(c))throw Error(r(200));return MI(a,c,null,h)},qn.createRoot=function(a,c){if(!og(a))throw Error(r(299));var h=!1,g="",w=H1;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=sg(a,1,!1,null,null,h,!1,g,w),a[Si]=c.current,Nc(a.nodeType===8?a.parentNode:a),new ag(c)},qn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=fe(c),a=a===null?null:a.stateNode,a},qn.flushSync=function(a){return eo(a)},qn.hydrate=function(a,c,h){if(!Qd(c))throw Error(r(200));return Xd(null,a,c,!0,h)},qn.hydrateRoot=function(a,c,h){if(!og(a))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,_="",A=H1;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),c=V1(c,null,a,1,h??null,w,!1,_,A),a[Si]=c.current,Nc(a),g)for(a=0;a<g.length;a++)h=g[a],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new Jd(c)},qn.render=function(a,c,h){if(!Qd(c))throw Error(r(200));return Xd(null,a,c,!1,h)},qn.unmountComponentAtNode=function(a){if(!Qd(a))throw Error(r(40));return a._reactRootContainer?(eo(function(){Xd(null,null,a,!1,function(){a._reactRootContainer=null,a[Si]=null})}),!0):!1},qn.unstable_batchedUpdates=Xp,qn.unstable_renderSubtreeIntoContainer=function(a,c,h,g){if(!Qd(h))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return Xd(a,c,h,!1,g)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var tj;function V2(){if(tj)return dg.exports;tj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dg.exports=ZI(),dg.exports}var rj;function eD(){if(rj)return ef;rj=1;var e=V2();return ef.createRoot=e.createRoot,ef.hydrateRoot=e.hydrateRoot,ef}var tD=eD();const rD=ri(tD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var nj="popstate";function nD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return mv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:hu(s)}return iD(t,r,null,e)}function er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Is(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sD(){return Math.random().toString(36).substring(2,10)}function sj(e,t){return{usr:e.state,key:e.key,idx:t}}function mv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Kl(t):t,state:r,key:t&&t.key||n||sD()}}function hu({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function iD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),k=S==null?null:S-m;m=S,d&&d({action:u,location:j.location,delta:k})}function y(S,k){u="PUSH";let E=mv(j.location,S,k);m=f()+1;let N=sj(E,m),O=j.createHref(E);try{l.pushState(N,"",O)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(O)}i&&d&&d({action:u,location:j.location,delta:1})}function x(S,k){u="REPLACE";let E=mv(j.location,S,k);m=f();let N=sj(E,m),O=j.createHref(E);l.replaceState(N,"",O),i&&d&&d({action:u,location:j.location,delta:0})}function b(S){return aD(S)}let j={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(nj,p),d=S,()=>{s.removeEventListener(nj,p),d=null}},createHref(S){return t(s,S)},createURL:b,encodeLocation(S){let k=b(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:x,go(S){return l.go(S)}};return j}function aD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),er(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:hu(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function q2(e,t,r="/"){return oD(e,t,r,!1)}function oD(e,t,r,n){let s=typeof t=="string"?Kl(t):t,i=Bi(s.pathname||"/",r);if(i==null)return null;let l=H2(e);lD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=xD(i);u=yD(l[d],m,n)}return u}function H2(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;er(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Fi([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(er(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),H2(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:pD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of K2(l.path))i(l,u,!0,m)}),t}function K2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=K2(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function lD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:gD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var cD=/^:[\w-]+$/,uD=3,dD=2,fD=1,hD=10,mD=-2,ij=e=>e==="*";function pD(e,t){let r=e.split("/"),n=r.length;return r.some(ij)&&(n+=mD),t&&(n+=dD),r.filter(s=>!ij(s)).reduce((s,i)=>s+(cD.test(i)?uD:i===""?fD:hD),n)}function gD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function yD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Fi([i,p.pathname]),pathnameBase:SD(Fi([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=Fi([i,p.pathnameBase]))}return l}function zf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=vD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let b=u[y]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function vD(e,t=!1,r=!0){Is(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function xD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Is(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Bi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function wD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Kl(e):e;return{pathname:r?r.startsWith("/")?r:bD(r,t):t,search:_D(n),hash:kD(s)}}function bD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function mg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function T0(e){let t=jD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function I0(e,t,r,n=!1){let s;typeof e=="string"?s=Kl(e):(s={...e},er(!s.pathname||!s.pathname.includes("?"),mg("?","pathname","search",s)),er(!s.pathname||!s.pathname.includes("#"),mg("#","pathname","hash",s)),er(!s.search||!s.search.includes("#"),mg("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=wD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Fi=e=>e.join("/").replace(/\/\/+/g,"/"),SD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_D=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ND(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var G2=["POST","PUT","PATCH","DELETE"];new Set(G2);var CD=["GET",...G2];new Set(CD);var Gl=v.createContext(null);Gl.displayName="DataRouter";var zh=v.createContext(null);zh.displayName="DataRouterState";v.createContext(!1);var Y2=v.createContext({isTransitioning:!1});Y2.displayName="ViewTransition";var ED=v.createContext(new Map);ED.displayName="Fetchers";var AD=v.createContext(null);AD.displayName="Await";var ni=v.createContext(null);ni.displayName="Navigation";var Ou=v.createContext(null);Ou.displayName="Location";var vi=v.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var D0=v.createContext(null);D0.displayName="RouteError";function PD(e,{relative:t}={}){er(Yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ni),{hash:s,pathname:i,search:l}=Tu(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:Fi([r,i])),n.createHref({pathname:u,search:l,hash:s})}function Yl(){return v.useContext(Ou)!=null}function Zi(){return er(Yl(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Ou).location}var J2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q2(e){v.useContext(ni).static||v.useLayoutEffect(e)}function bs(){let{isDataRoute:e}=v.useContext(vi);return e?WD():OD()}function OD(){er(Yl(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Gl),{basename:t,navigator:r}=v.useContext(ni),{matches:n}=v.useContext(vi),{pathname:s}=Zi(),i=JSON.stringify(T0(n)),l=v.useRef(!1);return Q2(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(Is(l.current,J2),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=I0(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Fi([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function Tu(e,{relative:t}={}){let{matches:r}=v.useContext(vi),{pathname:n}=Zi(),s=JSON.stringify(T0(r));return v.useMemo(()=>I0(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function TD(e,t){return X2(e,t)}function X2(e,t,r,n,s){var E;er(Yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(ni),{matches:l}=v.useContext(vi),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let N=p&&p.path||"";Z2(m,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=Zi(),x;if(t){let N=typeof t=="string"?Kl(t):t;er(f==="/"||((E=N.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=y;let b=x.pathname||"/",j=b;if(f!=="/"){let N=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=q2(e,{pathname:j});Is(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Is(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=MD(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:Fi([f,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Fi([f,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,r,n,s);return t&&k?v.createElement(Ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},k):k}function ID(){let e=BD(),t=ND(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var DD=v.createElement(ID,null),RD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(vi.Provider,{value:this.props.routeContext},v.createElement(D0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $D({routeContext:e,match:t,children:r}){let n=v.useContext(Gl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(vi.Provider,{value:e},r)}function MD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);er(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,b=null,j=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||DD,u&&(d<0&&p===0?(Z2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===p&&(x=!0,j=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),k=()=>{let E;return y?E=b:x?E=j:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement($D,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(RD,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):k()},null)}function R0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FD(e){let t=v.useContext(Gl);return er(t,R0(e)),t}function LD(e){let t=v.useContext(zh);return er(t,R0(e)),t}function zD(e){let t=v.useContext(vi);return er(t,R0(e)),t}function $0(e){let t=zD(e),r=t.matches[t.matches.length-1];return er(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function UD(){return $0("useRouteId")}function BD(){var n;let e=v.useContext(D0),t=LD("useRouteError"),r=$0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function WD(){let{router:e}=FD("useNavigate"),t=$0("useNavigate"),r=v.useRef(!1);return Q2(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{Is(r.current,J2),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var aj={};function Z2(e,t,r){!t&&!aj[e]&&(aj[e]=!0,Is(!1,r))}v.memo(VD);function VD({routes:e,future:t,state:r,unstable_onError:n}){return X2(e,void 0,r,n,t)}function qD({to:e,replace:t,state:r,relative:n}){er(Yl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ni);Is(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(vi),{pathname:l}=Zi(),u=bs(),d=I0(e,T0(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function as(e){er(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HD({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){er(!Yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=Kl(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let b=Bi(d,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return Is(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(ni.Provider,{value:u},v.createElement(Ou.Provider,{children:t,value:x}))}function KD({children:e,location:t}){return TD(pv(e),t)}function pv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,pv(n.props.children,i));return}er(n.type===as,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),er(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=pv(n.props.children,i)),r.push(l)}),r}var Cf="get",Ef="application/x-www-form-urlencoded";function Uh(e){return e!=null&&typeof e.tagName=="string"}function GD(e){return Uh(e)&&e.tagName.toLowerCase()==="button"}function YD(e){return Uh(e)&&e.tagName.toLowerCase()==="form"}function JD(e){return Uh(e)&&e.tagName.toLowerCase()==="input"}function QD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XD(e,t){return e.button===0&&(!t||t==="_self")&&!QD(e)}function gv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function ZD(e,t){let r=gv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var tf=null;function eR(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var tR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pg(e){return e!=null&&!tR.has(e)?(Is(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ef}"`),null):e}function rR(e,t){let r,n,s,i,l;if(YD(e)){let u=e.getAttribute("action");n=u?Bi(u,t):null,r=e.getAttribute("method")||Cf,s=pg(e.getAttribute("enctype"))||Ef,i=new FormData(e)}else if(GD(e)||JD(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Bi(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Cf,s=pg(e.getAttribute("formenctype"))||pg(u.getAttribute("enctype"))||Ef,i=new FormData(u,e),!eR()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(Uh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Cf,n=null,s=Ef,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function M0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nR(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Bi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function sR(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function aR(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await sR(i,r);return l.links?l.links():[]}return[]}));return uR(n.flat(1).filter(iR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function oj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function oR(e,t,{includeHydrateFallback:r}={}){return lR(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function lR(e){return[...new Set(e)]}function cR(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function uR(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(cR(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function eC(){let e=v.useContext(Gl);return M0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function dR(){let e=v.useContext(zh);return M0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var F0=v.createContext(void 0);F0.displayName="FrameworkContext";function tC(){let e=v.useContext(F0);return M0(e,"You must render this element inside a <HydratedRouter> element"),e}function fR(e,t){let r=v.useContext(F0),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let j=k=>{k.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:qc(u,x),onBlur:qc(d,b),onMouseEnter:qc(m,x),onMouseLeave:qc(f,b),onTouchStart:qc(p,x)}]:[!1,y,{}]}function qc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function hR({page:e,...t}){let{router:r}=eC(),n=v.useMemo(()=>q2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(pR,{page:e,matches:n,...t}):null}function mR(e){let{manifest:t,routeModules:r}=tC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return aR(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function pR({page:e,matches:t,...r}){let n=Zi(),{manifest:s,routeModules:i}=tC(),{basename:l}=eC(),{loaderData:u,matches:d}=dR(),m=v.useMemo(()=>oj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>oj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,j=!1;if(t.forEach(k=>{var N;let E=s.routes[k.route.id];!E||!E.hasLoader||(!m.some(O=>O.route.id===k.route.id)&&k.route.id in u&&((N=i[k.route.id])!=null&&N.shouldRevalidate)||E.hasClientLoader?j=!0:b.add(k.route.id))}),b.size===0)return[];let S=nR(e,l,"data");return j&&b.size>0&&S.searchParams.set("_routes",t.filter(k=>b.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>oR(f,s),[f,s]),x=mR(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),y.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,nonce:r.nonce,...j})))}function gR(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rC&&(window.__reactRouterVersion="7.9.4")}catch{}function yR({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=nD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(HD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var nC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:b}=v.useContext(ni),j=typeof m=="string"&&nC.test(m),S,k=!1;if(typeof m=="string"&&j&&(S=m,rC))try{let z=new URL(window.location.href),G=m.startsWith("//")?new URL(z.protocol+m):new URL(m),W=Bi(G.pathname,b);G.origin===z.origin&&W!=null?m=W+G.search+G.hash:k=!0}catch{Is(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=PD(m,{relative:s}),[N,O,P]=fR(n,y),T=bR(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function R(z){t&&t(z),z.defaultPrevented||T(z)}let K=v.createElement("a",{...y,...P,href:S||E,onClick:k||i?t:R,ref:gR(x,O),target:d,"data-discover":!j&&r==="render"?"true":void 0});return N&&!j?v.createElement(v.Fragment,null,K,v.createElement(hR,{page:E})):K});sC.displayName="Link";var vR=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=Tu(l,{relative:m.relative}),y=Zi(),x=v.useContext(zh),{navigator:b,basename:j}=v.useContext(ni),S=x!=null&&NR(p)&&u===!0,k=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,E=y.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),N=N?N.toLowerCase():null,k=k.toLowerCase()),N&&j&&(N=Bi(N,j)||N);const O=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let P=E===k||!s&&E.startsWith(k)&&E.charAt(O)==="/",T=N!=null&&(N===k||!s&&N.startsWith(k)&&N.charAt(k.length)==="/"),R={isActive:P,isPending:T,isTransitioning:S},K=P?t:void 0,z;typeof n=="function"?z=n(R):z=[n,P?"active":null,T?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let G=typeof i=="function"?i(R):i;return v.createElement(sC,{...m,"aria-current":K,className:z,ref:f,style:G,to:l,viewTransition:u},typeof d=="function"?d(R):d)});vR.displayName="NavLink";var xR=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=Cf,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let b=_R(),j=kR(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&nC.test(u),E=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let O=N.nativeEvent.submitter,P=(O==null?void 0:O.getAttribute("formmethod"))||l;b(O||N.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:n?d:E,...y,"data-discover":!k&&e==="render"?"true":void 0})});xR.displayName="Form";function wR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iC(e){let t=v.useContext(Gl);return er(t,wR(e)),t}function bR(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=bs(),d=Zi(),m=Tu(e,{relative:i});return v.useCallback(f=>{if(XD(f,t)){f.preventDefault();let p=r!==void 0?r:hu(d)===hu(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function aC(e){Is(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(gv(e)),r=v.useRef(!1),n=Zi(),s=v.useMemo(()=>ZD(n.search,r.current?null:t.current),[n.search]),i=bs(),l=v.useCallback((u,d)=>{const m=gv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var jR=0,SR=()=>`__${String(++jR)}__`;function _R(){let{router:e}=iC("useSubmit"),{basename:t}=v.useContext(ni),r=UD();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=rR(n,t);if(s.navigate===!1){let f=s.fetcherKey||SR();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function kR(e,{relative:t}={}){let{basename:r}=v.useContext(ni),n=v.useContext(vi);er(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Tu(e||".",{relative:t})},l=Zi();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Fi([r,i.pathname])),hu(i)}function NR(e,{relative:t}={}){let r=v.useContext(Y2);er(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=iC("useViewTransitionState"),s=Tu(e,{relative:t});if(!r.isTransitioning)return!1;let i=Bi(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Bi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return zf(s.pathname,l)!=null||zf(s.pathname,i)!=null}var oC=V2();const CR="modulepreload",ER=function(e,t){return new URL(e,t).href},lj={},Iu=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=l(r.map(f=>{if(f=ER(f,n),f in lj)return;lj[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(!!n)for(let j=u.length-1;j>=0;j--){const S=u[j];if(S.href===f&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":CR,p||(b.as="script"),b.crossOrigin="",b.href=f,m&&b.setAttribute("nonce",m),document.head.appendChild(b),p)return new Promise((j,S)=>{b.addEventListener("load",j),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},AR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Iu(async()=>{const{default:n}=await Promise.resolve().then(()=>Jl);return{default:n}},[],import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class L0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class cj extends L0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class uj extends L0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dj extends L0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yv||(yv={}));var PR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class OR{constructor(t,{headers:r={},customFetch:n,region:s=yv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=AR(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return PR(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(k=>{throw k.name==="AbortError"?k:new cj(k)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new uj(x);if(!x.ok)throw new dj(x);let j=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return j==="application/json"?S=yield x.json():j==="application/octet-stream"?S=yield x.blob():j==="text/event-stream"?S=x:j==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new cj(i)}:{data:null,error:i,response:i instanceof dj||i instanceof uj?i.context:void 0}}})}}var Zr={},il={},al={},ol={},ll={},cl={},TR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$l=TR();const IR=$l.fetch,lC=$l.fetch.bind($l),cC=$l.Headers,DR=$l.Request,RR=$l.Response,Jl=Object.freeze(Object.defineProperty({__proto__:null,Headers:cC,Request:DR,Response:RR,default:lC,fetch:IR},Symbol.toStringTag,{value:"Module"})),$R=HI(Jl);var rf={},fj;function uC(){if(fj)return rf;fj=1,Object.defineProperty(rf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return rf.default=e,rf}var hj;function dC(){if(hj)return cl;hj=1;var e=cl&&cl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(cl,"__esModule",{value:!0});const t=e($R),r=e(uC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let b=null,j=null,S=null,k=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const T=await m.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?j=T:j=JSON.parse(T))}const O=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&P&&P.length>1&&(S=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(b={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,S=null,k=406,E="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const O=await m.text();try{b=JSON.parse(O),Array.isArray(b)&&m.status===404&&(j=[],b=null,k=200,E="OK")}catch{m.status===404&&O===""?(k=204,E="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,k=200,E="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:j,count:S,status:k,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return cl.default=n,cl}var mj;function fC(){if(mj)return ll;mj=1;var e=ll&&ll.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ll,"__esModule",{value:!0});const t=e(dC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return ll.default=r,ll}var pj;function z0(){if(pj)return ol;pj=1;var e=ol&&ol.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ol,"__esModule",{value:!0});const t=e(fC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return ol.default=r,ol}var gj;function hC(){if(gj)return al;gj=1;var e=al&&al.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(al,"__esModule",{value:!0});const t=e(z0());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return al.default=r,al}var yj;function MR(){if(yj)return il;yj=1;var e=il&&il.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(il,"__esModule",{value:!0});const t=e(hC()),r=e(z0());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([j,S])=>S!==void 0).map(([j,S])=>[j,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([j,S])=>{y.searchParams.append(j,S)})):(p="POST",x=l);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:b,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return il.default=n,il}var vj;function FR(){if(vj)return Zr;vj=1;var e=Zr&&Zr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.PostgrestError=Zr.PostgrestBuilder=Zr.PostgrestTransformBuilder=Zr.PostgrestFilterBuilder=Zr.PostgrestQueryBuilder=Zr.PostgrestClient=void 0;const t=e(MR());Zr.PostgrestClient=t.default;const r=e(hC());Zr.PostgrestQueryBuilder=r.default;const n=e(z0());Zr.PostgrestFilterBuilder=n.default;const s=e(fC());Zr.PostgrestTransformBuilder=s.default;const i=e(dC());Zr.PostgrestBuilder=i.default;const l=e(uC());return Zr.PostgrestError=l.default,Zr.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},Zr}var LR=FR();const zR=ri(LR),{PostgrestClient:UR,PostgrestQueryBuilder:DZ,PostgrestFilterBuilder:RZ,PostgrestTransformBuilder:$Z,PostgrestBuilder:MZ,PostgrestError:FZ}=zR;class BR{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const WR="2.74.0",VR=`realtime-js/${WR}`,qR="1.0.0",vv=1e4,HR=1e3,KR=100;var ou;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ou||(ou={}));var Ir;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ir||(Ir={}));var Hs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Hs||(Hs={}));var xv;(function(e){e.websocket="websocket"})(xv||(xv={}));var uo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uo||(uo={}));class GR{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class mC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Wt||(Wt={}));const xj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=YR(l,e,t,s),i),{}):{}},YR=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?pC(i,l):wv(l)},pC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ZR(t,r)}switch(e){case Wt.bool:return JR(t);case Wt.float4:case Wt.float8:case Wt.int2:case Wt.int4:case Wt.int8:case Wt.numeric:case Wt.oid:return QR(t);case Wt.json:case Wt.jsonb:return XR(t);case Wt.timestamp:return e3(t);case Wt.abstime:case Wt.date:case Wt.daterange:case Wt.int4range:case Wt.int8range:case Wt.money:case Wt.reltime:case Wt.text:case Wt.time:case Wt.timestamptz:case Wt.timetz:case Wt.tsrange:case Wt.tstzrange:return wv(t);default:return wv(t)}},wv=e=>e,JR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},QR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},XR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ZR=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>pC(t,u))}return e},e3=e=>typeof e=="string"?e.replace(" ","T"):e,gC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class gg{constructor(t,r,n={},s=vv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wj||(wj={}));class lu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=lu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=lu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),b=f.filter(S=>x.indexOf(S.presence_ref)<0),j=p.filter(S=>y.indexOf(S.presence_ref)<0);b.length>0&&(u[m]=b),j.length>0&&(d[m]=j)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(bj||(bj={}));var cu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(cu||(cu={}));var Ti;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ti||(Ti={}));class U0{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gg(this,Hs.join,this.params,this.timeout),this.rejoinTimer=new mC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ir.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new lu(this),this.broadcastEndpointURL=gC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ir.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[cu.PRESENCE]&&this.bindings[cu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Ti.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Ti.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket.setAuth(),x===void 0){t==null||t(Ti.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(b=j==null?void 0:j.length)!==null&&b!==void 0?b:0,k=[];for(let E=0;E<S;E++){const N=j[E],{filter:{event:O,schema:P,table:T,filter:R}}=N,K=x&&x[E];if(K&&K.event===O&&K.schema===P&&K.table===T&&K.filter===R)k.push(Object.assign(Object.assign({},N),{id:K.id}));else{this.unsubscribe(),this.state=Ir.errored,t==null||t(Ti.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Ti.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ir.errored,t==null||t(Ti.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ti.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ir.joined&&t===cu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ir.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new gg(this,Hs.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ir.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>KR){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Hs;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,j,S;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(j=x.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var b,j,S,k,E,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,P=(b=x.filter)===null||b===void 0?void 0:b.event;return O&&((j=r.ids)===null||j===void 0?void 0:j.includes(O))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(E=(k=x==null?void 0:x.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:j,table:S,commit_timestamp:k,type:E,errors:N}=b;y=Object.assign(Object.assign({},{schema:j,table:S,commit_timestamp:k,eventType:E,new:{},old:{},errors:N}),this._getPayloadRecords(b))}x.callback(y,n)})}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&U0.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Hs.close,{},t)}_onError(t){this._on(Hs.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=xj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=xj(t.columns,t.old_record)),r}}const yg=()=>{},nf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},t3=[1e3,2e3,5e3,1e4],r3=1e4,n3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class s3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vv,this.transport=null,this.heartbeatIntervalMs=nf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yg,this.ref=0,this.reconnectTimer=null,this.logger=yg,this.conn=null,this.sendBuffer=[],this.serializer=new GR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Iu(async()=>{const{default:u}=await Promise.resolve().then(()=>Jl);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${xv.websocket}`,this.httpEndpoint=gC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=BR.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qR}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ou.connecting:return uo.Connecting;case ou.open:return uo.Open;case ou.closing:return uo.Closing;default:return uo.Closed}}isConnected(){return this.connectionState()===uo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new U0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(HR,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},nf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Hs.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([n3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:VR};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Hs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new mC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:vv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:nf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:yg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>t3[p-1]||r3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class B0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Sr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class i3 extends B0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bv extends B0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var a3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const yC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Iu(async()=>{const{default:n}=await Promise.resolve().then(()=>Jl);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},o3=()=>a3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Iu(()=>Promise.resolve().then(()=>Jl),void 0,import.meta.url)).Response:Response}),jv=e=>{if(Array.isArray(e))return e.map(r=>jv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=jv(n)}),t},l3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Oo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const vg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),c3=(e,t,r)=>Oo(void 0,void 0,void 0,function*(){const n=yield o3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new i3(vg(s),i,l))}).catch(s=>{t(new bv(vg(s),s))}):t(new bv(vg(e),e))}),u3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(l3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Du(e,t,r,n,s,i){return Oo(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,u3(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>c3(d,u,n))})})}function Uf(e,t,r,n){return Oo(this,void 0,void 0,function*(){return Du(e,"GET",t,r,n)})}function ui(e,t,r,n,s){return Oo(this,void 0,void 0,function*(){return Du(e,"POST",t,n,s,r)})}function Sv(e,t,r,n,s){return Oo(this,void 0,void 0,function*(){return Du(e,"PUT",t,n,s,r)})}function d3(e,t,r,n){return Oo(this,void 0,void 0,function*(){return Du(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function vC(e,t,r,n,s){return Oo(this,void 0,void 0,function*(){return Du(e,"DELETE",t,n,s,r)})}var f3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class h3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return f3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Sr(t))return{data:null,error:t};throw t}})}}var m3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class p3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new h3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return m3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Sr(t))return{data:null,error:t};throw t}})}}var Hn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const g3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class y3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=yC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Hn(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},jj),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Sv:ui)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Hn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:jj.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Sv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Sr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Hn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ui(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new B0("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Hn(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Hn(this,void 0,void 0,function*(){try{return{data:{path:(yield ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Hn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield ui(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Hn(this,void 0,void 0,function*(){try{const s=yield ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>Uf(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new p3(d,this.shouldThrowOnError)}info(t){return Hn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Uf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:jv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}})}exists(t){return Hn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield d3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sr(n)&&n instanceof bv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Hn(this,void 0,void 0,function*(){try{return{data:yield vC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Hn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},g3),r),{prefix:t||""});return{data:yield ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}listV2(t,r){return Hn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ui(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const v3="2.74.0",x3={"X-Client-Info":`storage-js/${v3}`};var ul=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class w3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},x3),r),this.fetch=yC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ul(this,void 0,void 0,function*(){try{return{data:yield Uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Sr(t))return{data:null,error:t};throw t}})}getBucket(t){return ul(this,void 0,void 0,function*(){try{return{data:yield Uf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}})}createBucket(t){return ul(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ui(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Sr(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return ul(this,void 0,void 0,function*(){try{return{data:yield Sv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ul(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ul(this,void 0,void 0,function*(){try{return{data:yield vC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sr(r))return{data:null,error:r};throw r}})}}class b3 extends w3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new y3(this.url,this.headers,t,this.fetch)}}const j3="2.74.0";let nu="";typeof Deno<"u"?nu="deno":typeof document<"u"?nu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nu="react-native":nu="node";const S3={"X-Client-Info":`supabase-js-${nu}/${j3}`},_3={headers:S3},k3={schema:"public"},N3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C3={};var E3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const A3=e=>{let t;return e?t=e:typeof fetch>"u"?t=lC:t=fetch,(...r)=>t(...r)},P3=()=>typeof Headers>"u"?cC:Headers,O3=(e,t,r)=>{const n=A3(r),s=P3();return(i,l)=>E3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var T3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function I3(e){return e.endsWith("/")?e:e+"/"}function D3(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>T3(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function R3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(I3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xC="2.74.0",bl=30*1e3,_v=3,xg=_v*bl,$3="http://localhost:9999",M3="supabase.auth.token",F3={"X-Client-Info":`gotrue-js/${xC}`},kv="X-Supabase-Api-Version",wC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},L3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,z3=600*1e3;class mu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class U3 extends mu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function B3(e){return lt(e)&&e.name==="AuthApiError"}class fo extends mu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class La extends mu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ca extends La{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W3(e){return lt(e)&&e.name==="AuthSessionMissingError"}class dl extends La{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sf extends La{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class af extends La{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V3(e){return lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Sj extends La{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nv extends La{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wg(e){return lt(e)&&e.name==="AuthRetryableFetchError"}class _j extends La{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Cv extends La{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kj=` 	
\r=`.split(""),q3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kj.length;t+=1)e[kj[t].charCodeAt(0)]=-2;for(let t=0;t<Bf.length;t+=1)e[Bf[t].charCodeAt(0)]=t;return e})();function Nj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bf[n]),t.queuedBits-=6}}function bC(e,t,r){const n=q3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Cj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{G3(l,n,r)};for(let l=0;l<e.length;l+=1)bC(e.charCodeAt(l),s,i);return t.join("")}function H3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function K3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}H3(n,t)}}function G3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Pl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)bC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Y3(e){const t=[];return K3(e,r=>t.push(r)),new Uint8Array(t)}function ho(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Nj(s,r,n)),Nj(null,r,n),t.join("")}function J3(e){return Math.round(Date.now()/1e3)+e}function Q3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const os=()=>typeof window<"u"&&typeof document<"u",so={tested:!1,writable:!1},jC=()=>{if(!os())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(so.tested)return so.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),so.tested=!0,so.writable=!0}catch{so.tested=!0,so.writable=!1}return so.writable};function X3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const SC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Iu(async()=>{const{default:n}=await Promise.resolve().then(()=>Jl);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Z3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},io=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Na=async(e,t)=>{await e.removeItem(t)};class Bh{constructor(){this.promise=new Bh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bh.promiseConstructor=Promise;function bg(e){const t=e.split(".");if(t.length!==3)throw new Cv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!L3.test(t[n]))throw new Cv("JWT not in base64url format");return{header:JSON.parse(Cj(t[0])),payload:JSON.parse(Cj(t[1])),signature:Pl(t[2]),raw:{header:t[0],payload:t[1]}}}async function e$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function t$(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function r$(e){return("0"+e.toString(16)).substr(-2)}function n$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,r$).join("")}async function s$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function i$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await s$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fl(e,t,r=!1){const n=n$();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await jl(e,`${t}-code-verifier`,s);const i=await i$(n);return[i,n===i?"plain":"s256"]}const a$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function o$(e){const t=e.headers.get(kv);if(!t||!t.match(a$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function l$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function c$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const u$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hl(e){if(!u$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ej(e){return JSON.parse(JSON.stringify(e))}var d$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ao=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),f$=[502,503,504];async function Aj(e){var t;if(!Z3(e))throw new Nv(ao(e),0);if(f$.includes(e.status))throw new Nv(ao(e),e.status);let r;try{r=await e.json()}catch(i){throw new fo(ao(i),i)}let n;const s=o$(e);if(s&&s.getTime()>=wC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new _j(ao(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ca}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new _j(ao(r),e.status,r.weak_password.reasons);throw new U3(ao(r),e.status||500,n)}const h$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function mt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[kv]||(i[kv]=wC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await m$(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function m$(e,t,r,n,s,i){const l=h$(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Nv(ao(d),0)}if(u.ok||await Aj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Aj(d)}}function qs(e){var t;let r=null;y$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=J3(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Pj(e){const t=qs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ta(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function p$(e){return{data:e,error:null}}function g$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=d$(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Oj(e){return e}function y$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Sg=["global","local","others"];var v$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class x${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=SC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Sg[0]){if(Sg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sg.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ta})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=v$(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:g$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(lt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ta})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Oj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(lt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){hl(t);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ta})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){hl(t);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ta})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){hl(t);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ta})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){hl(t.userId);try{const{data:r,error:n}=await mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){hl(t.userId),hl(t.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Oj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(lt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await mt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}}function Tj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ml={debug:!!(globalThis&&jC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _C extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class w$ extends _C{}async function b$(e,t,r){ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ml.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ml.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new w$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ml.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function j$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function S$(e){return parseInt(e,16)}function _$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function k$(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=kC(e.address),b=f?`${f}://${n}`:n,j=e.statement?`${e.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${x}

${j}`;let k=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),d&&(k+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);E+=`
- ${N}`}k+=E}return`${S}
${k}`}class br extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Wf extends br{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function N$({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new br({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new br({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new br({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new br({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new br({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new br({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new br({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new br({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(CC(l)){if(i.rp.id!==l)return new br({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new br({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function C$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new br({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new br({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(CC(n)){if(r.rpId!==n)return new br({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var NC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class E${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const A$=new E$;function P$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=NC(e,["challenge","user","excludeCredentials"]),i=Pl(t).buffer,l=Object.assign(Object.assign({},r),{id:Pl(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Pl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function O$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=NC(e,["challenge","allowCredentials"]),s=Pl(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Pl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function T$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ho(new Uint8Array(e.response.attestationObject)),clientDataJSON:ho(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function I$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ho(new Uint8Array(s.authenticatorData)),clientDataJSON:ho(new Uint8Array(s.clientDataJSON)),signature:ho(new Uint8Array(s.signature)),userHandle:s.userHandle?ho(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function CC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ij(){var e,t;return!!(os()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function D$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",t)}:{data:null,error:new Wf("Empty credential response",t)}}catch(t){return{data:null,error:N$({error:t,options:e})}}}async function R$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",t)}:{data:null,error:new Wf("Empty credential response",t)}}catch(t){return{data:null,error:C$({error:t,options:e})}}}const $$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},M$={userVerification:"preferred",hints:["security-key"]};function Vf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=Vf(u,l):n[i]=Vf(l)}else n[i]=l}return n}function F$(e,t){return Vf($$,e,t||{})}function L$(e,t){return Vf(M$,e,t||{})}class z${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??A$.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=F$(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await D$({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=L$(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await R$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return lt(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new mu("rpId is required for WebAuthn authentication")};try{if(!Ij())return{data:null,error:new fo("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return lt(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new mu("rpId is required for WebAuthn registration")};try{if(!Ij())return{data:null,error:new fo("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return lt(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in register",l)}}}}j$();const U$={url:$3,storageKey:M3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dj(e,t,r){return await r()}const pl={};class pu{get jwks(){var t,r;return(r=(t=pl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=pl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pu.nextInstanceID,pu.nextInstanceID+=1,this.instanceID>0&&os()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},U$),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new x$({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=SC(s.fetch),this.lock=s.lock||Dj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:os()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=b$:this.lock=Dj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new z$(this)},this.persistSession?(s.storage?this.storage=s.storage:jC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tj(this.memoryStorage)),os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=X3(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),os()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),V3(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return lt(r)?{error:r}:{error:new fo("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qs}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(lt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await fl(this.storage,this.storageKey)),i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:b},xform:qs})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:qs})}else throw new sf("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(lt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Pj})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Pj})}else throw new sf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new dl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(lt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:j,wallet:S,statement:k,options:E}=t;let N;if(os())if(typeof S=="object")N=S;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")N=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=S}const O=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),P=await N.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=kC(P[0]);let R=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const z=await N.request({method:"eth_chainId"});R=S$(z)}const K={domain:O.host,address:T,statement:k,uri:O.href,version:"1",chainId:R,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=k$(K),b=await N.request({method:"personal_sign",params:[_$(x),T]})}try{const{data:j,error:S}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:qs});if(S)throw S;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new dl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:S})}catch(j){if(lt(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:S,wallet:k,statement:E,options:N}=t;let O;if(os())if(typeof k=="object")O=k;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))O=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=k}const P=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const T=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),E?{statement:E}:null));let R;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")R=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)R=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)b=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),j=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((p=(f=N==null?void 0:N.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...N.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const T=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=T}}try{const{data:S,error:k}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ho(j)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:qs});if(k)throw k;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new dl}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:k})}catch(S){if(lt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await io(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qs});if(await Na(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(lt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qs}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new dl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(lt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await fl(this.storage,this.storageKey));const{error:p}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new sf("You must provide either an email or phone number.")}catch(u){if(lt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:qs});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await fl(this.storage,this.storageKey)),await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:p$})}catch(i){if(lt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ca;const{error:s}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await mt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await mt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new sf("You must provide either an email or phone number and a type")}catch(r){if(lt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await io(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=jg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ta}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ca}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ta})})}catch(r){if(lt(r))return W3(r)&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ca;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await fl(this.storage,this.storageKey));const{data:m,error:f}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Ta});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ca;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=bg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(lt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ca;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(lt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!os())throw new af("No browser detected.");if(t.error||t.error_description||t.error_code)throw new af(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Sj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new af("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sj("No code detected.");const{data:E,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new af("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=bl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=y-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,f);const{data:j,error:S}=await this._getUser(i);if(S)throw S;const k={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(n){if(lt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await io(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(B3(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Q3(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await fl(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(lt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return os()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(lt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qs}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new dl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await t$(async s=>(s>0&&await e$(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qs})),(s,i)=>{const l=200*Math.pow(2,s);return i&&wg(i)&&Date.now()+l-n<bl})}catch(n){if(this._debug(r,"error",n),lt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),os()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await io(this.storage,this.storageKey);if(s&&this.userStorage){let l=await io(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await jl(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:jg()}else if(s&&!s.user&&!s.user){const l=await io(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Na(this.storage,this.storageKey+"-user"),await jl(this.storage,this.storageKey,s)):s.user=jg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${xg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),wg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Bh;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Ca;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),lt(i)){const l={data:null,error:i};return wg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await jl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Ej(s);await jl(this.storage,this.storageKey,i)}else{const s=Ej(r);await jl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Na(this.storage,this.storageKey),await Na(this.storage,this.storageKey+"-code-verifier"),await Na(this.storage,this.storageKey+"-user"),this.userStorage&&await Na(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&os()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/bl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bl}ms, refresh threshold is ${_v} ticks`),s<=_v&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _C)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!os()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await fl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?T$(t.webauthn.credential_response):I$(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(lt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:P$(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:O$(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(lt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=bg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+z3>s)return n;const{data:i,error:l}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=bg(n);r!=null&&r.allowExpired||l$(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=c$(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,Y3(`${u}.${d}`)))throw new Cv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}}pu.nextInstanceID=0;const B$=pu;class W$ extends B${constructor(t){super(t)}}var V$=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class q${constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=R3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:k3,realtime:C3,auth:Object.assign(Object.assign({},N3),{storageKey:d}),global:_3},f=D3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=O3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new UR(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new b3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new OR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return V$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W$({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new s3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const H$=(e,t,r)=>new q$(e,t,r);function K$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}K$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const G$="https://okdzllfpsvltjqryslnn.supabase.co",Y$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",ze=H$(G$,Y$),Wi="__FEATURE_SUGGESTION__",W0="__feature_suggestion__",J$="__feature_future_session__";function Wh(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(J$)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function Q$(e){const{data:t,error:r}=await ze.from("users").select("*").eq("email",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t}async function X$(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await ze.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw n;return r}async function V0(e,t){let r=await Q$(e);return r||(r=await X$({email:e,name:t})),r}async function Rj(){const{data:e,error:t}=await ze.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function Z$(e){var l,u;const[t,r,n]=await Promise.all([To(e),ze.from("session_admins").select("session_id").eq("user_id",e),ze.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await ze.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const Ql="PRODUCTS_TABLE_MISSING";function Li(e){return typeof e=="object"&&e!==null&&e.code===Ql}async function EC(){const{data:e,error:t}=await ze.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Ql,r}throw t}return e||[]}async function Ol(e){const{data:t,error:r}=await ze.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Ql,n}throw r}return t||[]}async function e6(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await ze.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=Ql,i}throw s}return n}async function AC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await ze.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Ql,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await ze.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function PC(e){const{error:t}=await ze.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Ql,r}throw t}}const Ru="*, product:products(name)";function Vh(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function OC(e){return!e||e.length===0?[]:e.map(t=>Vh(t))}async function Vi(){const{data:e,error:t}=await ze.from("voting_sessions").select(Ru).order("created_at",{ascending:!1});if(t)throw t;return OC(e)}async function t6(e){const{data:t,error:r}=await ze.from("voting_sessions").select(Ru).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vh(t):null}async function r6(e){const{data:t,error:r}=await ze.from("voting_sessions").select(Ru).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vh(t):null}async function TC(e){if(await To(e))return Vi();const{data:r,error:n}=await ze.from("session_admins").select("session_id").eq("user_id",e);if(n)throw n;const s=(r==null?void 0:r.map(y=>y.session_id))||[],i=await ze.from("users").select("email").eq("id",e).single();if(i.error)throw i.error;const{data:l,error:u}=await ze.from("session_stakeholders").select("session_id").eq("user_email",i.data.email);if(u)throw u;const d=(l==null?void 0:l.map(y=>y.session_id))||[],m=[...new Set([...s,...d])];if(m.length===0)return[];const{data:f,error:p}=await ze.from("voting_sessions").select(Ru).in("id",m).order("created_at",{ascending:!1});if(p)throw p;return OC(f)}async function IC(e){if(!e)return null;const{data:t,error:r}=await ze.from("voting_sessions").select(Ru).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vh(t):null}async function DC(e){const{data:t,error:r}=await ze.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function RC(e,t){const{data:r,error:n}=await ze.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function n6(e){const{error:t}=await ze.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function s6(e,t){const{error:r}=await ze.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function $C(e){const{data:t,error:r}=await ze.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function gu(e,t){const{data:r,error:n}=await ze.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function i6(e,t,r){const n=await V0(t,r);return gu(e,n.id)}async function Af(e,t){const{error:r}=await ze.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function yu(e,t){try{if(await To(t))return!0;const{data:n,error:s}=await ze.from("session_admins").select("id").eq("session_id",e).eq("user_id",t).maybeSingle();return s?(console.error("Error checking admin status:",s),!1):!!n}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function MC(e){const{data:t,error:r}=await ze.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function FC(e){const{data:t,error:r}=await ze.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function $j(e,t,r){return FC({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function LC(e,t,r){const n=`${window.location.origin}/login?session=${e.session_code??""}`,s=encodeURIComponent(`You're invited to vote: ${e.title}`),i=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${n}

Voting Period: ${e.start_date?Mj(e.start_date):""} - ${e.end_date?Mj(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${s}&body=${i}`}function Mj(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Ev(e,t){const{error:r}=await ze.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function q0(e,t){try{const{data:r,error:n}=await ze.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function a6(e,t){const{data:r,error:n}=await ze.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function _g(e,t){const{error:r}=await ze.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function Ea(e){const{data:t,error:r}=await ze.from("features").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).filter(n=>{const s=n.state===Wi,i=Array.isArray(n.tags)&&n.tags.includes(W0);return!s&&!i})}async function kg(e){const{data:t,error:r}=await ze.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Ng(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await ze.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function Fj(e){const{error:t}=await ze.from("features").delete().eq("id",e);if(t)throw t}function zC(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function o6(e){try{const{data:t,error:r}=await ze.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(zC)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function l6(e){try{const{data:t,error:r}=await ze.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return zC(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Nl(e){const{data:t,error:r}=await ze.from("votes").select("*").eq("session_id",e);if(r)throw r;return t||[]}async function c6(e){const{data:t}=await ze.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await ze.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await ze.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function u6(e,t){const{error:r}=await ze.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function d6(e){const{error:t}=await ze.from("votes").delete().eq("session_id",e);if(t)throw t}async function f6(e){try{const{data:t,error:r}=await ze.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function gl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await ze.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await ze.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await ze.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function h6(){return(await Vi())[0]||null}async function m6(e){const t=await h6();if(!t)throw new Error("No session found");return RC(t.id,e)}async function Lj(e,t){return RC(e,t)}async function p6(e){const{data:t,error:r}=await ze.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function g6(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await ze.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Wi,area_path:null,tags:[W0],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Wh(r)}async function y6(e,t){const{data:r,error:n}=await ze.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Wi).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await ze.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",Wi).select("id, session_id, title, description, created_at").single();if(u)throw u;return Wh(l)}async function v6(e){const{error:t}=await ze.from("features").delete().eq("id",e).eq("state",Wi);if(t)throw t}async function x6(e,t){const{data:r,error:n}=await ze.from("features").update({session_id:t}).eq("id",e).eq("state",Wi).select("id, session_id, title, description, created_at").single();if(n)throw n;return Wh(r)}async function w6(e){const{data:t,error:r}=await ze.from("features").select("*").eq("id",e).eq("state",Wi).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==W0):[],{data:l,error:u}=await ze.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",Wi).select("*").single();if(u)throw u;return l}async function b6(e){const{data:t,error:r}=await ze.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Wi).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Wh)}async function Av(){const{data:e,error:t}=await ze.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function qf(e){const{data:t,error:r}=await ze.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function Pf(e){const{error:t}=await ze.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function To(e){try{const{data:t,error:r}=await ze.from("system_admins").select("id").eq("user_id",e).maybeSingle();return r?(console.error("Error checking system admin status:",r),!1):!!t}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const j6=["dave.hoffman@newmill.com"],S6="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),_6=Array.from(new Set([...j6,...S6]));function Pv(e){return e?_6.includes(e.toLowerCase()):!1}const UC=v.createContext(void 0);function k6({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,b]=v.useState(!0),[j,S]=v.useState(!1);v.useEffect(()=>{(async()=>{const T=localStorage.getItem("voting_system_user");if(T)try{const R=JSON.parse(T);l(R),await k(R)}catch(R){console.error("Error loading stored user:",R),localStorage.removeItem("voting_system_user")}b(!1)})()},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!j)try{const[T,R]=await Promise.all([yu(t.id,i.id),q0(t.id,i.email)]);d(T),f(R),S(!1)}catch(T){console.error("Error checking user roles:",T),d(!1),f(!1),S(!0)}})()},[t,i,j]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(Pv(i.email)){y(!0);return}try{const R=await To(i.id);y(R)}catch(R){console.error("Error checking system admin status:",R),y(!1)}})()},[i]);const k=v.useCallback(async P=>{const T=P||i;if(!T){s([]),r(R=>{if(R)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}try{const K=Pv(T.email)?await Vi():await TC(T.id);s(K),r(z=>{if(!z)return z;const G=K.find(W=>W.id===z.id);if(!G){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(G.id!==z.id)return z;if(G!==z){try{localStorage.setItem("voting_system_current_session",G.id)}catch{}return G}return z})}catch(R){console.error("Error loading sessions:",R),s([])}},[i]),E=v.useCallback(async P=>{l(P),S(!1),P?(localStorage.setItem("voting_system_user",JSON.stringify(P)),await k(P)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[k]),N=v.useCallback(P=>{r(P),S(!1),P?localStorage.setItem("voting_system_current_session",P.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const T=localStorage.getItem("voting_system_current_session");if(T){const R=n.find(K=>K.id===T);R&&r(R)}})()},[i,n]);const O={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,setCurrentSession:N,refreshSessions:k,setCurrentUser:E};return x?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):o.jsx(UC.Provider,{value:O,children:e})}function xi(){const e=v.useContext(UC);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function H0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function za(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var zj,Uj,Bj,Hf,Wj,Vj,qj,Ov,Hj,Kj;function N6(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(zj||(zj={})),(function(e){e.M365Content="m365content"})(Uj||(Uj={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(Bj||(Bj={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Hf||(Hf={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(Wj||(Wj={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(Vj||(Vj={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(qj||(qj={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Ov||(Ov={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(Hj||(Hj={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(Kj||(Kj={}));var Ct,Tv,Iv,Gj,Yj,Jj,Qj,Xj;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Ct||(Ct={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Tv||(Tv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Iv||(Iv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(Gj||(Gj={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(Yj||(Yj={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(Jj||(Jj={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(Qj||(Qj={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(Xj||(Xj={}));const C6={errorCode:Hf.NOT_SUPPORTED_ON_PLATFORM},E6={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var Zj={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let of;const A6=new Uint8Array(16);function P6(){if(!of&&(of=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!of))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return of(A6)}const dn=[];for(let e=0;e<256;++e)dn.push((e+256).toString(16).slice(1));function O6(e,t=0){return dn[e[t+0]]+dn[e[t+1]]+dn[e[t+2]]+dn[e[t+3]]+"-"+dn[e[t+4]]+dn[e[t+5]]+"-"+dn[e[t+6]]+dn[e[t+7]]+"-"+dn[e[t+8]]+dn[e[t+9]]+"-"+dn[e[t+10]]+dn[e[t+11]]+dn[e[t+12]]+dn[e[t+13]]+dn[e[t+14]]+dn[e[t+15]]}function T6(e,t,r){if(Zj.randomUUID&&!e)return Zj.randomUUID();const n=(e=e||{}).random||(e.rng||P6)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,O6(n)}var I6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function D6(e){return typeof e=="string"&&I6.test(e)}function BC(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function R6(){return T6()}function WC(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&WC(e[t])})),Object.freeze(e)}function $6(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function M6(e){return e.protocol==="https:"}function F6(){if(qh())throw new Error("window object undefined at SSR check");return window}function qh(){return typeof window>"u"}function L6(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function z6(e){if(!e)throw new Error("id must not be empty");if(D6(e)===!1)throw new Error("id must be a valid UUID")}const U6=!!performance&&"now"in performance;function K0(){return U6?performance.now()+performance.timeOrigin:void 0}function eS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Ov.NotAdult})})})}let $u=class{constructor(t=R6()){this.uuid=t,z6(t)}toString(){return this.uuid}serialize(){return this.toString()}};const VC=e=>{const{uuid:t}=e,r=H0(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},B6=e=>{const{uuidAsString:t}=e,r=H0(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new $u(t):void 0})};var Dv={exports:{}},tS,rS;function W6(){if(rS)return tS;rS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return tS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var V6=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let b=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((j,S)=>{if(j==="%%")return"%";b++;const k=t.formatters[S];if(typeof k=="function"){const E=f[b];j=k.call(p,E),f.splice(b,1),b--}return j})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=W6(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},q6={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=q6.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=V6(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Dv,Dv.exports);var G0=Dv.exports;const H6=new $u,K6=G0.debug.formatArgs;G0.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${H6.toString()}]`,K6.call(this,e)};const G6=G0.debug("teamsJs");function wi(e){return G6.extend(e)}function hr(e,t){return`${e}_${t}`}function qC(e){return/^v\d+_[\w.]+$/.test(e)}function Ra(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const Y6=wi("flushMessageQueue");function HC(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=VC(s);Y6("Flushing message %s from %s message queue via postMessage.",Ra(i),n),e.postMessage(i,t)}}}var J6=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const nS="2.0.1",Of=J6,sS=1500,Q6=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),X6=/^https:\/\//,vu="The library has not yet been initialized",Z6="The runtime has not yet been initialized",e5="The runtime version is not supported";let wt=class{};wt.initializeCalled=!1,wt.initializeCompleted=!1,wt.additionalValidOrigins=[],wt.initializePromise=void 0,wt.isFramelessWindow=!1,wt.frameContext=void 0,wt.hostClientType=void 0,wt.printCapabilityEnabled=!1,wt.teamsJsInstanceId=new $u().toString();const KC=wi("runtime"),Hh=4;function GC(e){return e.apiVersion===Hh}function t5(e){if(GC(e))return!0;throw e.apiVersion===-1?new Error(Z6):new Error(e5)}let hi={apiVersion:-1,supports:{}};const r5={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},YC=[Ct.desktop,Ct.web,Ct.rigel,Ct.surfaceHub,Ct.teamsRoomsWindows,Ct.teamsRoomsAndroid,Ct.teamsPhones,Ct.teamsDisplays],n5=[Ct.android,Ct.ios,Ct.ipados,Ct.visionOS],iS=[...YC,...n5];function s5(e){let t=e;if(t.apiVersion<Hh&&i5.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),GC(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const i5=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=H0(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],a5={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:YC}],"1.9.0":[{capability:{location:{}},hostClientTypes:iS}],"2.0.0":[{capability:{people:{}},hostClientTypes:iS},{capability:{sharing:{}},hostClientTypes:[Ct.desktop,Ct.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Ct.android,Ct.desktop,Ct.ios,Ct.teamsRoomsAndroid,Ct.teamsPhones,Ct.teamsDisplays,Ct.web]},{capability:{webStorage:{}},hostClientTypes:[Ct.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Ct.android,Ct.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Ct.android,Ct.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Ct.android,Ct.ios,Ct.ipados,Ct.visionOS]}],"2.1.2":[]},Cg=KC.extend("generateBackCompatRuntimeConfig");function JC(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=JC(e[n]||{},t[n]));return r}function o5(e,t,r){Cg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Cg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{BC(e,i)>=0&&r[i].forEach((l=>{wt.hostClientType!==void 0&&l.hostClientTypes.includes(wt.hostClientType)&&(n=JC(n,l.capability))}))}));const s={apiVersion:Hh,hostVersionsInfo:E6,isLegacyTeams:!0,supports:n};return Cg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const Eg=KC.extend("applyRuntimeConfig");function Ag(e){typeof e.apiVersion=="string"&&(Eg("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),Eg("Fast-forwarding runtime %o",e);const t=s5(e);Eg("Applying runtime %o",t),hi=WC(t)}function l5(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Kf="2.46.0";let Gf=class Sl{static storeCallbackInformation(t,r){Sl.callbackInformation.set(t,r)}static clearMessages(){Sl.callbackInformation.clear()}static deleteMessageInformation(t){Sl.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?vS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Sl.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(vS({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Sl.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Gf.callbackInformation=new Map;const QC=wi("nestedAppAuthUtils"),c5=QC.extend("tryPolyfillWithNestedAppAuthBridge"),u5="v2";function d5(e,t,r){var n;const s=c5;if(wt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=f5;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=b=>j=>p(j,b);return{addEventListener:(b,j)=>{b==="message"?d.addEventListener(b,x(j)):f(`Event ${b} is not supported by nestedAppAuthBridge`)},postMessage:b=>{const j=(()=>{try{return JSON.parse(b)}catch{return null}})();if(!j||typeof j!="object"||j.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",b);const S=hr(u5,"nestedAppAuth.execute");y(b,S)},removeEventListener:(b,j)=>{d.removeEventListener(b,x(j))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const f5=QC.extend("createNestedAppAuthBridge");let Aa=[];const Ia=wi("validateOrigin");let su;function h5(){return za(this,void 0,void 0,(function*(){su||(yield ZC())}))}function XC(){return Aa.length===0}function ZC(e=!1){return za(this,void 0,void 0,(function*(){if(!XC()&&!e)return Aa;if(su)return su;if(qh())return Aa=Of,Of;{Ia("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),sS);return su=fetch(Q6,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Ia("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Ia("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Aa=s.validOrigins,Aa;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Ia(`validOrigins fetch call to CDN failed due to Timeout of ${sS} ms. Defaulting to fallback list`):Ia("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Aa=Of,Aa))),su}}))}function aS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function m5(e,t){const r=XC()?Of:Aa;return oS(e,r)?Promise.resolve(!0):(Ia("Origin %s is not in the local valid origins list, fetching from CDN",e),ZC(t).then((n=>oS(e,n))))}function oS(e,t){if(!M6(e))return Ia("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>aS(n,r))))return!0;for(const n of wt.additionalValidOrigins)if(aS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Ia(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,wt.additionalValidOrigins),!1}h5();const Io=wi("communication");let rt=class{},Ot=class{};function p5(e,t){if(Ot.messageListener=r=>(function(n){return za(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void lS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return rE(s,i).then((l=>{l?((function(u,d){wt.isFramelessWindow||rt.parentWindow&&!rt.parentWindow.closed&&u!==rt.parentWindow||(rt.parentWindow=u,rt.parentOrigin=d),rt.parentWindow&&rt.parentWindow.closed&&(rt.parentWindow=null,rt.parentOrigin=null),HC(rt.parentWindow,rt.parentOrigin,Ot.parentMessageQueue,"parent")})(s,i),s!==rt.parentWindow?vM():uS(n)):lS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),rt.currentWindow=rt.currentWindow||F6(),rt.parentWindow=rt.currentWindow.parent!==rt.currentWindow.self?rt.currentWindow.parent:rt.currentWindow.opener,rt.topWindow=rt.currentWindow.top,(rt.parentWindow||e)&&rt.currentWindow.addEventListener("message",Ot.messageListener,!1),!rt.parentWindow){const r=rt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));wt.isFramelessWindow=!0,r.onNativeMessage=uS}try{return rt.parentOrigin="*",Kh(t,"initialize",[Kf,Hh,e]).then((([r,n,s,i])=>(d5(i,rt.currentWindow,{onMessage:k5,sendPostMessage:b5}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{rt.parentOrigin=null}}function g5(e,t,...r){return Kh(e,t,r).then((([n])=>n))}function y5(e,t,r,...n){return Kh(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function Kh(e,t,r=void 0){if(!qC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=tE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{Ot.promiseCallbacks.set(i,l)}))))}))}function v5(e){return e.map((t=>l5(t)?t.serialize():t))}function x5(e,t,r,n,s){var i;return za(this,void 0,void 0,(function*(){const l=v5(t),[u]=yield Kh(n,e,l);if(N6(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Hf.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function Zs(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!qC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=tE(e,t,s);n&&Ot.callbacks.set(i.uuid,n)}Ot.parentMessageQueue=[],Ot.topMessageQueue=[],Ot.nextMessageId=0,Ot.callbacks=new Map,Ot.promiseCallbacks=new Map,Ot.portCallbacks=new Map,Ot.legacyMessageIdsToUuidMap={};const w5=Io.extend("sendNestedAuthRequestToTopWindow");function b5(e,t){const r=w5,n=rt.topWindow,s=(function(i,l){const u=Ot.nextMessageId++,d=new $u;return Ot.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:K0(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",Ra(s),{actionName:s.func}),eE(n,s)}const j5=Io.extend("sendRequestToTargetWindowHelper");function eE(e,t){const r=j5,n=(function(i){return i===rt.topWindow&&Rv()?"top":i===rt.parentWindow?"parent":null})(e),s=VC(t);if(wt.isFramelessWindow)rt.currentWindow&&rt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Ra(s),n),rt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===rt.topWindow&&Rv()?rt.topOrigin:l===rt.parentWindow?rt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",Ra(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",Ra(s),n),N5(e).push(t))}return t}const S5=Io.extend("sendMessageToParentHelper");function tE(e,t,r,n,s){const i=S5,l=rt.parentWindow,u=(function(d,m,f,p,y){const x=Ot.nextMessageId++,b=new $u;Ot.legacyMessageIdsToUuidMap[x]=b;const j=wt.teamsJsInstanceId;return{id:x,uuid:b,func:m,timestamp:Date.now(),monotonicTimestamp:K0(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:j}})(e,t,r,n);return Gf.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",Ra(u),{actionName:t,args:r}),eE(l,u)}const lS=Io.extend("processIncomingMessage"),_5=Io.extend("processAuthBridgeMessage");function k5(e,t){var r,n;const s=_5;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?rE(d,m)?(rt.topWindow&&!rt.topWindow.closed&&d!==rt.topWindow||(rt.topWindow=d,rt.topOrigin=m),rt.topWindow&&rt.topWindow.closed&&(rt.topWindow=null,rt.topOrigin=null),HC(rt.topWindow,rt.topOrigin,Ot.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const Pg=Io.extend("shouldProcessIncomingMessage");function rE(e,t){return za(this,void 0,void 0,(function*(){if(rt.currentWindow&&e===rt.currentWindow)return Pg("Should not process message because it is coming from the current window"),!1;if(rt.currentWindow&&rt.currentWindow.location&&t&&t===rt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return Pg("Message has an invalid origin of %s",t),!1}const n=yield m5(r);return n||Pg("Message has an invalid origin of %s",t),n}}))}const cS=Io.extend("handleIncomingMessageFromParent");function Tf(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Og(e,t){const r=Tf(t,e.uuid);r&&t.delete(r),e.uuid?Ot.legacyMessageIdsToUuidMap={}:delete Ot.legacyMessageIdsToUuidMap[e.id]}function uS(e){const t=cS,r=K0();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=B6(n),i=(function(l){const u=cS;if(!l.uuid)return Ot.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Tf(Ot.callbacks,d);if(m)return m;const f=Tf(Ot.promiseCallbacks,d);if(f)return f;const p=Tf(Ot.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Ra(l))})(s);if(i){const l=Ot.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),Gf.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Og(s,Ot.callbacks)));const u=Ot.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Og(s,Ot.promiseCallbacks));const d=Ot.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Og(s,Ot.portCallbacks)}s.uuid&&(Ot.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Gf.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Ra(n),n.func),dM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Rv(){return rt.topWindow!==rt.parentWindow}function N5(e){return e===rt.topWindow&&Rv()?Ot.topMessageQueue:e===rt.parentWindow?Ot.parentMessageQueue:[]}const nE=wi("internal"),C5=nE.extend("ensureInitializeCalled"),E5=nE.extend("ensureInitialized");function sE(){if(!wt.initializeCalled)throw C5(vu),new Error(vu)}function Xl(e,...t){if(!wt.initializeCompleted)throw E5("%s. initializeCalled: %s",vu,wt.initializeCalled.toString()),new Error(vu);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===wt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${wt.frameContext}".`)}return t5(e)}function A5(e){let t=wt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&X6.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),wt.additionalValidOrigins=t}function P5(e){if(!T5(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${iE}-${aE}).`)}function O5(e){if(L6(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(I5(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const iE=4,aE=256;function T5(e){return e.length<aE&&e.length>iE}function I5(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let D5=class{constructor(t){this.idAsString=t,O5(t)}serialize(){return this.toString()}toString(){return this.idAsString}},R5=class extends D5{constructor(t){super(t),P5(t)}toJSON(){return{appIdAsString:this.toString()}}};function oE(e){return e==null}const Gh="v2",Tg=wi("app"),dS={Success:"appInitialization.success"};var fS,hS;function $5(e){return tM(hr(Gh,"app.initialize"),e)}function M5(){return new Promise((e=>{sE(),e(g5(hr(Gh,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Tv.teams,clientType:t.hostClientType?t.hostClientType:Ct.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new R5(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:wt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function F5(){return rM(hr(Gh,"app.notifySuccess"))}function L5(e){nM(hr(Gh,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(fS||(fS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(hS||(hS={})),Tg("teamsjs instance is version %s, starting at %s UTC (%s local)",Kf,new Date().toISOString(),new Date().toLocaleString()),(function(){if(qh())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?Tg("teamsjs is being used from %s. %s",t,r):Tg("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const z5="v2",U5=[];function B5(e){wt.frameContext&&(wt.frameContext===Iv.task?U5.push(e):fM("messageForChild"))}function W5(){yo(hr(z5,"dialog.registerMessageForChildHandler"),"messageForChild",B5,!1)}const Tl="v2";var mS,pS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(mS||(mS={}));function V5(){yo(hr(Tl,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",H5,!1),yo(hr(Tl,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",K5,!1),yo(hr(Tl,"menus.registerSetModuleViewHandler"),"setModuleView",q5,!1)}function q5(e){Xl(hi),Zs(hr(Tl,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function H5(e){Xl(hi),Zs(hr(Tl,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function K5(e){Xl(hi),Zs(hr(Tl,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(pS||(pS={}));class G5{}let Y5=class extends G5{validate(t){return!0}deserialize(t){return t}};function J5(){yo(hr(_o,"pages.config.registerSettingsSaveHandler"),"settings.save",Q5,!1),yo(hr(_o,"pages.config.registerSettingsRemoveHandler"),"settings.remove",Z5,!1)}function Q5(e){new X5(e).notifySuccess()}let X5=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),Zs(hr(_o,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Zs(hr(_o,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function Z5(){new eM().notifySuccess()}let eM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),Zs(hr(_o,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Zs(hr(_o,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const lE=wi("app");function tM(e,t){return qh()?(lE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):$6((()=>(function(r,n){return new Promise((s=>{wt.initializeCalled||(wt.initializeCalled=!0,uM(),wt.initializePromise=p5(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=nS})=>{wt.frameContext=i,wt.hostClientType=l,wt.clientSupportedSDKVersion=d;try{Hc("Parsing %s",u);let m=JSON.parse(u);if(Hc("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=eS(m),u&&Ag(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Hc("Attempting to parse %s as an SDK version",u),isNaN(BC(u,nS))||(wt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Hc("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=eS(f),Ag(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Ag(o5(wt.clientSupportedSDKVersion,r5,a5))}}wt.initializeCompleted=!0})),V5(),J5(),W5()),Array.isArray(n)&&A5(n),wt.initializePromise!==void 0?s(wt.initializePromise):Hc("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function rM(e){return za(this,void 0,void 0,(function*(){if(wt.initializeCompleted)return gS(e);if(!wt.initializePromise)throw new Error(vu);return wt.initializePromise.then((()=>gS(e)))}))}function gS(e){return za(this,void 0,void 0,(function*(){return Xl(hi)&&(!((t=hi.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?x5(dS.Success,[Kf],new Y5,e).then((()=>({hasFinishedSuccessfully:!0}))):(Zs(e,dS.Success,[Kf]),{hasFinishedSuccessfully:"unknown"});var t}))}const Hc=lE.extend("initializeHelper");function nM(e,t){!oE(t)&&sE(),hM(e,t)}function sM(){return aM(hr(_o,"pages.backStack.navigateBack"))}function iM(){return!(!Xl(hi)||!hi.supports.pages)&&!!hi.supports.pages.backStack}const _o="v2";function aM(e){return new Promise((t=>{if(Xl(hi),!iM())throw C6;t(y5(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function oM(){yo(hr("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",lM,!1)}function lM(){sM()}const cM=wi("handlers");let Yt=class ci{static initializeHandlers(){ci.handlers.themeChange=mM,ci.handlers.load=pM,ci.handlers.beforeUnload=gM,oM()}static uninitializeHandlers(){ci.handlers={},ci.themeChangeHandler=null,ci.loadHandler=null,ci.beforeUnloadHandler=null,ci.beforeSuspendOrTerminateHandler=null,ci.resumeHandler=null}};function uM(){Yt.initializeHandlers()}Yt.handlers={},Yt.themeChangeHandler=null,Yt.loadHandler=null,Yt.beforeUnloadHandler=null,Yt.beforeSuspendOrTerminateHandler=null,Yt.resumeHandler=null,Yt.hostToAppPerformanceMetricsHandler=null;const yS=cM.extend("callHandler");function dM(e,t){const r=Yt.handlers[e];return r?(yS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(yS("Handler for action message %s not found.",e),[!1,void 0])}function yo(e,t,r,n=!0,s=[]){r?(Yt.handlers[t]=r,n&&Zs(e,"registerHandler",[t,...s])):delete Yt.handlers[t]}function fM(e){delete Yt.handlers[e]}function hM(e,t){Yt.themeChangeHandler=t,!oE(t)&&Zs(e,"registerHandler",["themeChange"])}function mM(e){Yt.themeChangeHandler&&Yt.themeChangeHandler(e)}function vS(e){Yt.hostToAppPerformanceMetricsHandler&&Yt.hostToAppPerformanceMetricsHandler(e)}function pM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Yt.resumeHandler?(Yt.resumeHandler(t),xS()):Yt.loadHandler&&(Yt.loadHandler(e),xS())}function gM(){return za(this,void 0,void 0,(function*(){const e=()=>{Zs(hr("v2","handleBeforeUnload"),"readyToUnload",[])};Yt.beforeSuspendOrTerminateHandler?(yield Yt.beforeSuspendOrTerminateHandler(),e()):Yt.beforeUnloadHandler&&Yt.beforeUnloadHandler(e)||e()}))}const yM=wi("childProxyingCommunication");function xS(){return!1}function vM(e,t){return!1}yM.extend("handleIncomingMessageFromChild");const xM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),wM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await $5();const y=await M5();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),L5(x=>{d(x)}),F5()}else console.log(" Running in browser (not Teams)")}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),o.jsx(xM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),wS=e=>{const t=jM(e);return t.charAt(0).toUpperCase()+t.slice(1)},cE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),SM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,..._M,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:cE("lucide",s),...!i&&!SM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(kM,{ref:i,iconNode:t,className:cE(`lucide-${bM(wS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=wS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bS=yt("arrow-left",NM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],EM=yt("arrow-right",CM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_l=yt("badge-check",AM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gs=yt("calendar",PM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],If=yt("chart-no-axes-column",OM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pn=yt("chevron-down",TM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Zl=yt("chevron-left",IM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RM=yt("chevron-up",DM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tt=yt("circle-alert",$M);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kr=yt("circle-check-big",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yh=yt("clock",FM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Gn=yt("crown",LM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],UM=yt("database",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],jS=yt("ellipsis-vertical",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],VM=yt("funnel",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lf=yt("info",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Y0=yt("lightbulb",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],hs=yt("list",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],YM=yt("lock",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],QM=yt("log-in",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tn=yt("log-out",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mu=yt("mail",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M5 12h14",key:"1ays0h"}]],tF=yt("minus",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],us=yt("plus",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vo=yt("refresh-cw",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],iF=yt("search",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mr=yt("settings",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jr=yt("shield",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],cF=yt("shuffle",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cf=yt("sparkles",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SS=yt("square-pen",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],uf=yt("star",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mF=yt("tag",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ei=yt("trash-2",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uE=yt("triangle-alert",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],vF=yt("trophy",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xo=yt("user-plus",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Kc=yt("user-x",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kn=yt("user",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yn=yt("users",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],hn=yt("vote",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],kF=yt("workflow",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Xs=yt("x",NF);function CF(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),{setCurrentUser:d,setCurrentSession:m}=xi(),f=bs(),[p]=aC(),y=async x=>{x.preventDefault(),u(""),i(!0);try{const b=await V0(e.trim().toLowerCase(),r.trim());d(b);const j=p.get("session");if(j){const S=await r6(j);if(S){m(S);const[k,E,N]=await Promise.all([To(b.id),yu(S.id,b.id),q0(S.id,b.email)]);if(k||E)f("/admin");else if(N)f("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else f("/sessions")}catch(b){console.error("Login error:",b),u("Failed to log in. Please try again."),i(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),o.jsx("div",{className:"relative z-10 mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:x=>n(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>t(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsx("div",{className:"flex",children:o.jsx("div",{className:"ml-3",children:o.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):o.jsxs(o.Fragment,{children:[o.jsx(QM,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),o.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[o.jsx("p",{children:"Simply enter your name and email to access"}),o.jsx("p",{children:"voting sessions you've been invited to"})]})]})]})})]})}var Fu=e=>e.type==="checkbox",mo=e=>e instanceof Date,Jn=e=>e==null;const dE=e=>typeof e=="object";var Nr=e=>!Jn(e)&&!Array.isArray(e)&&dE(e)&&!mo(e),fE=e=>Nr(e)&&e.target?Fu(e.target)?e.target.checked:e.target.value:e,EF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,hE=(e,t)=>e.has(EF(t)),AF=e=>{const t=e.constructor&&e.constructor.prototype;return Nr(t)&&t.hasOwnProperty("isPrototypeOf")},J0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(J0&&(e instanceof Blob||n))&&(r||Nr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!AF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Dr(e[s]));else return e;return t}var Jh=e=>/^\w*$/.test(e),lr=e=>e===void 0,Q0=e=>Array.isArray(e)?e.filter(Boolean):[],X0=e=>Q0(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(e,t,r)=>{if(!t||!Nr(e))return r;const n=(Jh(t)?[t]:X0(t)).reduce((s,i)=>Jn(s)?s:s[i],e);return lr(n)||n===e?lr(e[t])?r:e[t]:n},ds=e=>typeof e=="boolean",Vt=(e,t,r)=>{let n=-1;const s=Jh(t)?[t]:X0(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Nr(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Yf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ks={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Oi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mE=dt.createContext(null);mE.displayName="HookFormContext";const Z0=()=>dt.useContext(mE);var pE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Ks.all&&(t._proxyFormState[l]=!n||Ks.all),r&&(r[l]=!0),e[l]}});return s};const ex=typeof window<"u"?dt.useLayoutEffect:dt.useEffect;function PF(e){const t=Z0(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=dt.useState(r._formState),d=dt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ex(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),dt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),dt.useMemo(()=>pE(l,r,d.current,!1),[l,r])}var ms=e=>typeof e=="string",$v=(e,t,r,n,s)=>ms(e)?(n&&t.watch.add(e),Be(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Be(r,i))):(n&&(t.watchAll=!0),r),Mv=e=>Jn(e)||!dE(e);function Gs(e,t,r=new WeakSet){if(Mv(e)||Mv(t))return e===t;if(mo(e)&&mo(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(mo(l)&&mo(u)||Nr(l)&&Nr(u)||Array.isArray(l)&&Array.isArray(u)?!Gs(l,u,r):l!==u)return!1}}return!0}function OF(e){const t=Z0(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=dt.useRef(s),m=dt.useRef(u),f=dt.useRef(void 0),p=dt.useRef(r),y=dt.useRef(n);m.current=u;const[x,b]=dt.useState(()=>{const O=r._getWatch(n,d.current);return m.current?m.current(O):O}),j=dt.useCallback(O=>{const P=$v(n,r._names,O||r._formValues,!1,d.current);return m.current?m.current(P):P},[r._formValues,r._names,n]),S=dt.useCallback(O=>{if(!i){const P=$v(n,r._names,O||r._formValues,!1,d.current);if(m.current){const T=m.current(P);Gs(T,f.current)||(b(T),f.current=T)}else b(P)}},[r._formValues,r._names,i,n]);ex(()=>((p.current!==r||!Gs(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:O=>{S(O.values)}})),[r,l,n,S]),dt.useEffect(()=>r._removeUnmounted());const k=p.current!==r,E=y.current,N=dt.useMemo(()=>{if(i)return null;const O=!k&&!Gs(E,n);return k||O?j():null},[i,k,n,E,j]);return N!==null?N:x}function TF(e){const t=Z0(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=hE(s._names.array,r),d=dt.useMemo(()=>Be(s._formValues,r,Be(s._defaultValues,r,l)),[s,r,l]),m=OF({control:s,name:r,defaultValue:d,exact:!0}),f=PF({control:s,name:r,exact:!0}),p=dt.useRef(e),y=dt.useRef(void 0),x=dt.useRef(s.register(r,{...e.rules,value:m,...ds(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=dt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Be(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Be(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Be(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Be(f.validatingFields,r)},error:{enumerable:!0,get:()=>Be(f.errors,r)}}),[f,r]),j=dt.useCallback(N=>x.current.onChange({target:{value:fE(N),name:r},type:Yf.CHANGE}),[r]),S=dt.useCallback(()=>x.current.onBlur({target:{value:Be(s._formValues,r),name:r},type:Yf.BLUR}),[r,s._formValues]),k=dt.useCallback(N=>{const O=Be(s._fields,r);O&&N&&(O._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:P=>N.setCustomValidity(P),reportValidity:()=>N.reportValidity()})},[s._fields,r]),E=dt.useMemo(()=>({name:r,value:m,...ds(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:j,onBlur:S,ref:k}),[r,n,f.disabled,j,S,k,m]);return dt.useEffect(()=>{const N=s._options.shouldUnregister||i,O=y.current;O&&O!==r&&!u&&s.unregister(O),s.register(r,{...p.current.rules,...ds(p.current.disabled)?{disabled:p.current.disabled}:{}});const P=(T,R)=>{const K=Be(s._fields,T);K&&K._f&&(K._f.mount=R)};if(P(r,!0),N){const T=Dr(Be(s._options.defaultValues,r,p.current.defaultValue));Vt(s._defaultValues,r,T),lr(Be(s._formValues,r))&&Vt(s._formValues,r,T)}return!u&&s.register(r),y.current=r,()=>{(u?N&&!s._state.action:N)?s.unregister(r):P(r,!1)}},[r,s,u,i]),dt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),dt.useMemo(()=>({field:E,formState:f,fieldState:b}),[E,f,b])}const Cl=e=>e.render(TF(e));var IF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},uu=e=>Array.isArray(e)?e:[e],_S=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function gE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&Nr(s)&&i){const l=gE(s,i);Nr(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var On=e=>Nr(e)&&!Object.keys(e).length,tx=e=>e.type==="file",Ys=e=>typeof e=="function",Jf=e=>{if(!J0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yE=e=>e.type==="select-multiple",rx=e=>e.type==="radio",DF=e=>rx(e)||Fu(e),Ig=e=>Jf(e)&&e.isConnected;function RF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=lr(e)?n++:e[t[n++]];return e}function $F(e){for(const t in e)if(e.hasOwnProperty(t)&&!lr(e[t]))return!1;return!0}function wr(e,t){const r=Array.isArray(t)?t:Jh(t)?[t]:X0(t),n=r.length===1?e:RF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Nr(n)&&On(n)||Array.isArray(n)&&$F(n))&&wr(e,r.slice(0,-1)),e}var MF=e=>{for(const t in e)if(Ys(e[t]))return!0;return!1};function vE(e){return Array.isArray(e)||Nr(e)&&!MF(e)}function Fv(e,t={}){for(const r in e)vE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Fv(e[r],t[r])):lr(e[r])||(t[r]=!0);return t}function kl(e,t,r){r||(r=Fv(t));for(const n in e)vE(e[n])?lr(t)||Mv(r[n])?r[n]=Fv(e[n],Array.isArray(e[n])?[]:{}):kl(e[n],Jn(t)?{}:t[n],r[n]):r[n]=!Gs(e[n],t[n]);return r}const kS={value:!1,isValid:!1},NS={value:!0,isValid:!0};var xE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!lr(e[0].attributes.value)?lr(e[0].value)||e[0].value===""?NS:{value:e[0].value,isValid:!0}:NS:kS}return kS},wE=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>lr(e)?e:t?e===""?NaN:e&&+e:r&&ms(e)?new Date(e):n?n(e):e;const CS={isValid:!1,value:null};var bE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,CS):CS;function ES(e){const t=e.ref;return tx(t)?t.files:rx(t)?bE(e.refs).value:yE(t)?[...t.selectedOptions].map(({value:r})=>r):Fu(t)?xE(e.refs).value:wE(lr(t.value)?e.ref.value:t.value,e)}var FF=(e,t,r,n)=>{const s={};for(const i of e){const l=Be(t,i);l&&Vt(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Qf=e=>e instanceof RegExp,Gc=e=>lr(e)?e:Qf(e)?e.source:Nr(e)?Qf(e.value)?e.value.source:e.value:e,AS=e=>({isOnSubmit:!e||e===Ks.onSubmit,isOnBlur:e===Ks.onBlur,isOnChange:e===Ks.onChange,isOnAll:e===Ks.all,isOnTouch:e===Ks.onTouched});const PS="AsyncFunction";var LF=e=>!!e&&!!e.validate&&!!(Ys(e.validate)&&e.validate.constructor.name===PS||Nr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===PS)),zF=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),OS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const du=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Be(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(du(u,t))break}else if(Nr(u)&&du(u,t))break}}};function TS(e,t,r){const n=Be(e,r);if(n||Jh(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=Be(t,i),u=Be(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var UF=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return On(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Ks.all))},BF=(e,t,r)=>!e||!t||e===t||uu(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),WF=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,VF=(e,t)=>!Q0(Be(e,t)).length&&wr(e,t),qF=(e,t,r)=>{const n=uu(Be(e,r));return Vt(n,"root",t[r]),Vt(e,r,n),e};function IS(e,t,r="validate"){if(ms(e)||Array.isArray(e)&&e.every(ms)||ds(e)&&!e)return{type:r,message:ms(e)?e:"",ref:t}}var yl=e=>Nr(e)&&!Qf(e)?e:{value:e,message:""},DS=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:b,name:j,valueAsNumber:S,mount:k}=e._f,E=Be(r,j);if(!k||t.has(j))return{};const N=u?u[0]:l,O=q=>{s&&N.reportValidity&&(N.setCustomValidity(ds(q)?"":q||""),N.reportValidity())},P={},T=rx(l),R=Fu(l),K=T||R,z=(S||tx(l))&&lr(l.value)&&lr(E)||Jf(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,G=IF.bind(null,j,n,P),W=(q,de,oe,J=Oi.maxLength,Z=Oi.minLength)=>{const ae=q?de:oe;P[j]={type:q?J:Z,message:ae,ref:l,...G(q?J:Z,ae)}};if(i?!Array.isArray(E)||!E.length:d&&(!K&&(z||Jn(E))||ds(E)&&!E||R&&!xE(u).isValid||T&&!bE(u).isValid)){const{value:q,message:de}=ms(d)?{value:!!d,message:d}:yl(d);if(q&&(P[j]={type:Oi.required,message:de,ref:N,...G(Oi.required,de)},!n))return O(de),P}if(!z&&(!Jn(p)||!Jn(y))){let q,de;const oe=yl(y),J=yl(p);if(!Jn(E)&&!isNaN(E)){const Z=l.valueAsNumber||E&&+E;Jn(oe.value)||(q=Z>oe.value),Jn(J.value)||(de=Z<J.value)}else{const Z=l.valueAsDate||new Date(E),ae=pe=>new Date(new Date().toDateString()+" "+pe),re=l.type=="time",me=l.type=="week";ms(oe.value)&&E&&(q=re?ae(E)>ae(oe.value):me?E>oe.value:Z>new Date(oe.value)),ms(J.value)&&E&&(de=re?ae(E)<ae(J.value):me?E<J.value:Z<new Date(J.value))}if((q||de)&&(W(!!q,oe.message,J.message,Oi.max,Oi.min),!n))return O(P[j].message),P}if((m||f)&&!z&&(ms(E)||i&&Array.isArray(E))){const q=yl(m),de=yl(f),oe=!Jn(q.value)&&E.length>+q.value,J=!Jn(de.value)&&E.length<+de.value;if((oe||J)&&(W(oe,q.message,de.message),!n))return O(P[j].message),P}if(x&&!z&&ms(E)){const{value:q,message:de}=yl(x);if(Qf(q)&&!E.match(q)&&(P[j]={type:Oi.pattern,message:de,ref:l,...G(Oi.pattern,de)},!n))return O(de),P}if(b){if(Ys(b)){const q=await b(E,r),de=IS(q,N);if(de&&(P[j]={...de,...G(Oi.validate,de.message)},!n))return O(de.message),P}else if(Nr(b)){let q={};for(const de in b){if(!On(q)&&!n)break;const oe=IS(await b[de](E,r),N,de);oe&&(q={...oe,...G(de,oe.message)},O(oe.message),n&&(P[j]=q))}if(!On(q)&&(P[j]={ref:N,...q},!n))return P}}return O(!0),P};const HF={mode:Ks.onSubmit,reValidateMode:Ks.onChange,shouldFocusError:!0};function KF(e={}){let t={...HF,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ys(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Nr(t.defaultValues)||Nr(t.values)?Dr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Dr(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:_S(),state:_S()},x=t.criteriaMode===Ks.all,b=M=>Y=>{clearTimeout(m),m=setTimeout(M,Y)},j=async M=>{if(!t.disabled&&(f.isValid||p.isValid||M)){const Y=t.resolver?On((await R()).errors):await z(n,!0);Y!==r.isValid&&y.state.next({isValid:Y})}},S=(M,Y)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((M||Array.from(u.mount)).forEach(se=>{se&&(Y?Vt(r.validatingFields,se,Y):wr(r.validatingFields,se))}),y.state.next({validatingFields:r.validatingFields,isValidating:!On(r.validatingFields)}))},k=(M,Y=[],se,be,je=!0,ve=!0)=>{if(be&&se&&!t.disabled){if(l.action=!0,ve&&Array.isArray(Be(n,M))){const Fe=se(Be(n,M),be.argA,be.argB);je&&Vt(n,M,Fe)}if(ve&&Array.isArray(Be(r.errors,M))){const Fe=se(Be(r.errors,M),be.argA,be.argB);je&&Vt(r.errors,M,Fe),VF(r.errors,M)}if((f.touchedFields||p.touchedFields)&&ve&&Array.isArray(Be(r.touchedFields,M))){const Fe=se(Be(r.touchedFields,M),be.argA,be.argB);je&&Vt(r.touchedFields,M,Fe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=kl(s,i)),y.state.next({name:M,isDirty:W(M,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Vt(i,M,Y)},E=(M,Y)=>{Vt(r.errors,M,Y),y.state.next({errors:r.errors})},N=M=>{r.errors=M,y.state.next({errors:r.errors,isValid:!1})},O=(M,Y,se,be)=>{const je=Be(n,M);if(je){const ve=Be(i,M,lr(se)?Be(s,M):se);lr(ve)||be&&be.defaultChecked||Y?Vt(i,M,Y?ve:ES(je._f)):oe(M,ve),l.mount&&j()}},P=(M,Y,se,be,je)=>{let ve=!1,Fe=!1;const Ne={name:M};if(!t.disabled){if(!se||be){(f.isDirty||p.isDirty)&&(Fe=r.isDirty,r.isDirty=Ne.isDirty=W(),ve=Fe!==Ne.isDirty);const Xe=Gs(Be(s,M),Y);Fe=!!Be(r.dirtyFields,M),Xe?wr(r.dirtyFields,M):Vt(r.dirtyFields,M,!0),Ne.dirtyFields=r.dirtyFields,ve=ve||(f.dirtyFields||p.dirtyFields)&&Fe!==!Xe}if(se){const Xe=Be(r.touchedFields,M);Xe||(Vt(r.touchedFields,M,se),Ne.touchedFields=r.touchedFields,ve=ve||(f.touchedFields||p.touchedFields)&&Xe!==se)}ve&&je&&y.state.next(Ne)}return ve?Ne:{}},T=(M,Y,se,be)=>{const je=Be(r.errors,M),ve=(f.isValid||p.isValid)&&ds(Y)&&r.isValid!==Y;if(t.delayError&&se?(d=b(()=>E(M,se)),d(t.delayError)):(clearTimeout(m),d=null,se?Vt(r.errors,M,se):wr(r.errors,M)),(se?!Gs(je,se):je)||!On(be)||ve){const Fe={...be,...ve&&ds(Y)?{isValid:Y}:{},errors:r.errors,name:M};r={...r,...Fe},y.state.next(Fe)}},R=async M=>{S(M,!0);const Y=await t.resolver(i,t.context,FF(M||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(M),Y},K=async M=>{const{errors:Y}=await R(M);if(M)for(const se of M){const be=Be(Y,se);be?Vt(r.errors,se,be):wr(r.errors,se)}else r.errors=Y;return Y},z=async(M,Y,se={valid:!0})=>{for(const be in M){const je=M[be];if(je){const{_f:ve,...Fe}=je;if(ve){const Ne=u.array.has(ve.name),Xe=je._f&&LF(je._f);Xe&&f.validatingFields&&S([ve.name],!0);const vt=await DS(je,u.disabled,i,x,t.shouldUseNativeValidation&&!Y,Ne);if(Xe&&f.validatingFields&&S([ve.name]),vt[ve.name]&&(se.valid=!1,Y))break;!Y&&(Be(vt,ve.name)?Ne?qF(r.errors,vt,ve.name):Vt(r.errors,ve.name,vt[ve.name]):wr(r.errors,ve.name))}!On(Fe)&&await z(Fe,Y,se)}}return se.valid},G=()=>{for(const M of u.unMount){const Y=Be(n,M);Y&&(Y._f.refs?Y._f.refs.every(se=>!Ig(se)):!Ig(Y._f.ref))&&ye(M)}u.unMount=new Set},W=(M,Y)=>!t.disabled&&(M&&Y&&Vt(i,M,Y),!Gs(pe(),s)),q=(M,Y,se)=>$v(M,u,{...l.mount?i:lr(Y)?s:ms(M)?{[M]:Y}:Y},se,Y),de=M=>Q0(Be(l.mount?i:s,M,t.shouldUnregister?Be(s,M,[]):[])),oe=(M,Y,se={})=>{const be=Be(n,M);let je=Y;if(be){const ve=be._f;ve&&(!ve.disabled&&Vt(i,M,wE(Y,ve)),je=Jf(ve.ref)&&Jn(Y)?"":Y,yE(ve.ref)?[...ve.ref.options].forEach(Fe=>Fe.selected=je.includes(Fe.value)):ve.refs?Fu(ve.ref)?ve.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(je)?Fe.checked=!!je.find(Ne=>Ne===Fe.value):Fe.checked=je===Fe.value||!!je)}):ve.refs.forEach(Fe=>Fe.checked=Fe.value===je):tx(ve.ref)?ve.ref.value="":(ve.ref.value=je,ve.ref.type||y.state.next({name:M,values:Dr(i)})))}(se.shouldDirty||se.shouldTouch)&&P(M,je,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&me(M)},J=(M,Y,se)=>{for(const be in Y){if(!Y.hasOwnProperty(be))return;const je=Y[be],ve=M+"."+be,Fe=Be(n,ve);(u.array.has(M)||Nr(je)||Fe&&!Fe._f)&&!mo(je)?J(ve,je,se):oe(ve,je,se)}},Z=(M,Y,se={})=>{const be=Be(n,M),je=u.array.has(M),ve=Dr(Y);Vt(i,M,ve),je?(y.array.next({name:M,values:Dr(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&se.shouldDirty&&y.state.next({name:M,dirtyFields:kl(s,i),isDirty:W(M,ve)})):be&&!be._f&&!Jn(ve)?J(M,ve,se):oe(M,ve,se),OS(M,u)&&y.state.next({...r,name:M}),y.state.next({name:l.mount?M:void 0,values:Dr(i)})},ae=async M=>{l.mount=!0;const Y=M.target;let se=Y.name,be=!0;const je=Be(n,se),ve=Xe=>{be=Number.isNaN(Xe)||mo(Xe)&&isNaN(Xe.getTime())||Gs(Xe,Be(i,se,Xe))},Fe=AS(t.mode),Ne=AS(t.reValidateMode);if(je){let Xe,vt;const Qt=Y.type?ES(je._f):fE(M),Et=M.type===Yf.BLUR||M.type===Yf.FOCUS_OUT,xt=!zF(je._f)&&!t.resolver&&!Be(r.errors,se)&&!je._f.deps||WF(Et,Be(r.touchedFields,se),r.isSubmitted,Ne,Fe),kt=OS(se,u,Et);Vt(i,se,Qt),Et?(!Y||!Y.readOnly)&&(je._f.onBlur&&je._f.onBlur(M),d&&d(0)):je._f.onChange&&je._f.onChange(M);const At=P(se,Qt,Et),tr=!On(At)||kt;if(!Et&&y.state.next({name:se,type:M.type,values:Dr(i)}),xt)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Et&&j():Et||j()),tr&&y.state.next({name:se,...kt?{}:At});if(!Et&&kt&&y.state.next({...r}),t.resolver){const{errors:gr}=await R([se]);if(ve(Qt),be){const sr=TS(r.errors,n,se),Ft=TS(gr,n,sr.name||se);Xe=Ft.error,se=Ft.name,vt=On(gr)}}else S([se],!0),Xe=(await DS(je,u.disabled,i,x,t.shouldUseNativeValidation))[se],S([se]),ve(Qt),be&&(Xe?vt=!1:(f.isValid||p.isValid)&&(vt=await z(n,!0)));be&&(je._f.deps&&(!Array.isArray(je._f.deps)||je._f.deps.length>0)&&me(je._f.deps),T(se,vt,Xe,At))}},re=(M,Y)=>{if(Be(r.errors,Y)&&M.focus)return M.focus(),1},me=async(M,Y={})=>{let se,be;const je=uu(M);if(t.resolver){const ve=await K(lr(M)?M:je);se=On(ve),be=M?!je.some(Fe=>Be(ve,Fe)):se}else M?(be=(await Promise.all(je.map(async ve=>{const Fe=Be(n,ve);return await z(Fe&&Fe._f?{[ve]:Fe}:Fe)}))).every(Boolean),!(!be&&!r.isValid)&&j()):be=se=await z(n);return y.state.next({...!ms(M)||(f.isValid||p.isValid)&&se!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:se}:{},errors:r.errors}),Y.shouldFocus&&!be&&du(n,re,M?je:u.mount),be},pe=(M,Y)=>{let se={...l.mount?i:s};return Y&&(se=gE(Y.dirtyFields?r.dirtyFields:r.touchedFields,se)),lr(M)?se:ms(M)?Be(se,M):M.map(be=>Be(se,be))},I=(M,Y)=>({invalid:!!Be((Y||r).errors,M),isDirty:!!Be((Y||r).dirtyFields,M),error:Be((Y||r).errors,M),isValidating:!!Be(r.validatingFields,M),isTouched:!!Be((Y||r).touchedFields,M)}),H=M=>{M&&uu(M).forEach(Y=>wr(r.errors,Y)),y.state.next({errors:M?r.errors:{}})},Pe=(M,Y,se)=>{const be=(Be(n,M,{_f:{}})._f||{}).ref,je=Be(r.errors,M)||{},{ref:ve,message:Fe,type:Ne,...Xe}=je;Vt(r.errors,M,{...Xe,...Y,ref:be}),y.state.next({name:M,errors:r.errors,isValid:!1}),se&&se.shouldFocus&&be&&be.focus&&be.focus()},Q=(M,Y)=>Ys(M)?y.state.subscribe({next:se=>"values"in se&&M(q(void 0,Y),se)}):q(M,Y,!0),ne=M=>y.state.subscribe({next:Y=>{BF(M.name,Y.name,M.exact)&&UF(Y,M.formState||f,St,M.reRenderRoot)&&M.callback({values:{...i},...r,...Y,defaultValues:s})}}).unsubscribe,ue=M=>(l.mount=!0,p={...p,...M.formState},ne({...M,formState:p})),ye=(M,Y={})=>{for(const se of M?uu(M):u.mount)u.mount.delete(se),u.array.delete(se),Y.keepValue||(wr(n,se),wr(i,se)),!Y.keepError&&wr(r.errors,se),!Y.keepDirty&&wr(r.dirtyFields,se),!Y.keepTouched&&wr(r.touchedFields,se),!Y.keepIsValidating&&wr(r.validatingFields,se),!t.shouldUnregister&&!Y.keepDefaultValue&&wr(s,se);y.state.next({values:Dr(i)}),y.state.next({...r,...Y.keepDirty?{isDirty:W()}:{}}),!Y.keepIsValid&&j()},we=({disabled:M,name:Y})=>{(ds(M)&&l.mount||M||u.disabled.has(Y))&&(M?u.disabled.add(Y):u.disabled.delete(Y))},B=(M,Y={})=>{let se=Be(n,M);const be=ds(Y.disabled)||ds(t.disabled);return Vt(n,M,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:M}},name:M,mount:!0,...Y}}),u.mount.add(M),se?we({disabled:ds(Y.disabled)?Y.disabled:t.disabled,name:M}):O(M,!0,Y.value),{...be?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:Gc(Y.min),max:Gc(Y.max),minLength:Gc(Y.minLength),maxLength:Gc(Y.maxLength),pattern:Gc(Y.pattern)}:{},name:M,onChange:ae,onBlur:ae,ref:je=>{if(je){B(M,Y),se=Be(n,M);const ve=lr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Fe=DF(ve),Ne=se._f.refs||[];if(Fe?Ne.find(Xe=>Xe===ve):ve===se._f.ref)return;Vt(n,M,{_f:{...se._f,...Fe?{refs:[...Ne.filter(Ig),ve,...Array.isArray(Be(s,M))?[{}]:[]],ref:{type:ve.type,name:M}}:{ref:ve}}}),O(M,!1,void 0,ve)}else se=Be(n,M,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(hE(u.array,M)&&l.action)&&u.unMount.add(M)}}},Re=()=>t.shouldFocusError&&du(n,re,u.mount),tt=M=>{ds(M)&&(y.state.next({disabled:M}),du(n,(Y,se)=>{const be=Be(n,se);be&&(Y.disabled=be._f.disabled||M,Array.isArray(be._f.refs)&&be._f.refs.forEach(je=>{je.disabled=be._f.disabled||M}))},0,!1))},te=(M,Y)=>async se=>{let be;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let je=Dr(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:ve,values:Fe}=await R();r.errors=ve,je=Dr(Fe)}else await z(n);if(u.disabled.size)for(const ve of u.disabled)wr(je,ve);if(wr(r.errors,"root"),On(r.errors)){y.state.next({errors:{}});try{await M(je,se)}catch(ve){be=ve}}else Y&&await Y({...r.errors},se),Re(),setTimeout(Re);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:On(r.errors)&&!be,submitCount:r.submitCount+1,errors:r.errors}),be)throw be},Ee=(M,Y={})=>{Be(n,M)&&(lr(Y.defaultValue)?Z(M,Dr(Be(s,M))):(Z(M,Y.defaultValue),Vt(s,M,Dr(Y.defaultValue))),Y.keepTouched||wr(r.touchedFields,M),Y.keepDirty||(wr(r.dirtyFields,M),r.isDirty=Y.defaultValue?W(M,Dr(Be(s,M))):W()),Y.keepError||(wr(r.errors,M),f.isValid&&j()),y.state.next({...r}))},Ue=(M,Y={})=>{const se=M?Dr(M):s,be=Dr(se),je=On(M),ve=je?s:be;if(Y.keepDefaultValues||(s=se),!Y.keepValues){if(Y.keepDirtyValues){const Fe=new Set([...u.mount,...Object.keys(kl(s,i))]);for(const Ne of Array.from(Fe))Be(r.dirtyFields,Ne)?Vt(ve,Ne,Be(i,Ne)):Z(Ne,Be(ve,Ne))}else{if(J0&&lr(M))for(const Fe of u.mount){const Ne=Be(n,Fe);if(Ne&&Ne._f){const Xe=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(Jf(Xe)){const vt=Xe.closest("form");if(vt){vt.reset();break}}}}if(Y.keepFieldsRef)for(const Fe of u.mount)Z(Fe,Be(ve,Fe));else n={}}i=t.shouldUnregister?Y.keepDefaultValues?Dr(s):{}:Dr(ve),y.array.next({values:{...ve}}),y.state.next({values:{...ve}})}u={mount:Y.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues||!t.shouldUnregister&&!On(ve),l.watch=!!t.shouldUnregister,y.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:je?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!Gs(M,s)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:je?{}:Y.keepDirtyValues?Y.keepDefaultValues&&i?kl(s,i):r.dirtyFields:Y.keepDefaultValues&&M?kl(s,M):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},st=(M,Y)=>Ue(Ys(M)?M(i):M,Y),pt=(M,Y={})=>{const se=Be(n,M),be=se&&se._f;if(be){const je=be.refs?be.refs[0]:be.ref;je.focus&&(je.focus(),Y.shouldSelect&&Ys(je.select)&&je.select())}},St=M=>{r={...r,...M}},bt={control:{register:B,unregister:ye,getFieldState:I,handleSubmit:te,setError:Pe,_subscribe:ne,_runSchema:R,_focusError:Re,_getWatch:q,_getDirty:W,_setValid:j,_setFieldArray:k,_setDisabledField:we,_setErrors:N,_getFieldArray:de,_reset:Ue,_resetDefaultValues:()=>Ys(t.defaultValues)&&t.defaultValues().then(M=>{st(M,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:G,_disableForm:tt,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(M){l=M},get _defaultValues(){return s},get _names(){return u},set _names(M){u=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:ue,trigger:me,register:B,handleSubmit:te,watch:Q,setValue:Z,getValues:pe,reset:st,resetField:Ee,clearErrors:H,unregister:ye,setError:Pe,setFocus:pt,getFieldState:I};return{...bt,formControl:bt}}function xu(e={}){const t=dt.useRef(void 0),r=dt.useRef(void 0),[n,s]=dt.useState({isDirty:!1,isValidating:!1,isLoading:Ys(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ys(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Ys(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=KF(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,ex(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),dt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),dt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),dt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),dt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),dt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),dt.useEffect(()=>{e.values&&!Gs(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),dt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=pE(n,i),t.current}function jE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=jE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Jt(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=jE(e))&&(n&&(n+=" "),n+=t);return n}var GF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function nx(e){if(typeof e!="string")return!1;var t=GF;return t.includes(e)}var YF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function SE(e){if(typeof e!="string")return!1;var t=YF;return t.includes(e)}function _E(e){return typeof e=="string"&&e.startsWith("data-")}function Ma(e){var t=Object.entries(e).filter(r=>{var[n]=r;return SE(n)||_E(n)});return Object.fromEntries(t)}function sx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ma(t)}return typeof e=="object"&&!Array.isArray(e)?Ma(e):null}function Ds(e){var t=Object.entries(e).filter(r=>{var[n]=r;return SE(n)||_E(n)||nx(n)});return Object.fromEntries(t)}var JF=["children","width","height","viewBox","className","style","title","desc"];function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lv.apply(null,arguments)}function QF(e,t){if(e==null)return{};var r,n,s=XF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=QF(e,JF),p=i||{width:n,height:s,x:0,y:0},y=Jt("recharts-surface",l);return v.createElement("svg",Lv({},Ds(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),ZF=["children","className"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}function eL(e,t){if(e==null)return{};var r,n,s=tL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qi=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=eL(e,ZF),i=Jt("recharts-layer",n);return v.createElement("g",zv({className:i},Ds(s),{ref:t}),r)}),rL=v.createContext(null);function qt(e){return function(){return e}}const NE=Math.cos,Xf=Math.sin,si=Math.sqrt,Zf=Math.PI,Qh=2*Zf,Uv=Math.PI,Bv=2*Uv,oo=1e-6,nL=Bv-oo;function CE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function sL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CE;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class iL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CE:sL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>oo)if(!(Math.abs(p*d-m*f)>oo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,b=s-u,j=d*d+m*m,S=x*x+b*b,k=Math.sqrt(j),E=Math.sqrt(y),N=i*Math.tan((Uv-Math.acos((j+y-S)/(2*k*E)))/2),O=N/E,P=N/k;Math.abs(O-1)>oo&&this._append`L${t+O*f},${r+O*p}`,this._append`A${i},${i},0,0,${+(p*x>f*b)},${this._x1=t+P*d},${this._y1=r+P*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>oo||Math.abs(this._y1-f)>oo)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%Bv+Bv),y>nL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>oo&&this._append`A${n},${n},0,${+(y>=Uv)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ix(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new iL(t)}function ax(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EE(e){this._context=e}EE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xh(e){return new EE(e)}function AE(e){return e[0]}function PE(e){return e[1]}function OE(e,t){var r=qt(!0),n=null,s=Xh,i=null,l=ix(u);e=typeof e=="function"?e:e===void 0?AE:qt(e),t=typeof t=="function"?t:t===void 0?PE:qt(t);function u(d){var m,f=(d=ax(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:qt(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:qt(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:qt(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function df(e,t,r){var n=null,s=qt(!0),i=null,l=Xh,u=null,d=ix(m);e=typeof e=="function"?e:e===void 0?AE:qt(+e),t=typeof t=="function"?t:qt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?PE:qt(+r);function m(p){var y,x,b,j=(p=ax(p)).length,S,k=!1,E,N=new Array(j),O=new Array(j);for(i==null&&(u=l(E=d())),y=0;y<=j;++y){if(!(y<j&&s(S=p[y],y,p))===k)if(k=!k)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=y-1;b>=x;--b)u.point(N[b],O[b]);u.lineEnd(),u.areaEnd()}k&&(N[y]=+e(S,y,p),O[y]=+t(S,y,p),u.point(n?+n(S,y,p):N[y],r?+r(S,y,p):O[y]))}if(E)return u=null,E+""||null}function f(){return OE().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:qt(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:qt(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:qt(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:qt(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:qt(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:qt(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:qt(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class TE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function aL(e){return new TE(e,!0)}function oL(e){return new TE(e,!1)}const ox={draw(e,t){const r=si(t/Zf);e.moveTo(r,0),e.arc(0,0,r,0,Qh)}},lL={draw(e,t){const r=si(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},IE=si(1/3),cL=IE*2,uL={draw(e,t){const r=si(t/cL),n=r*IE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},dL={draw(e,t){const r=si(t),n=-r/2;e.rect(n,n,r,r)}},fL=.8908130915292852,DE=Xf(Zf/10)/Xf(7*Zf/10),hL=Xf(Qh/10)*DE,mL=-NE(Qh/10)*DE,pL={draw(e,t){const r=si(t*fL),n=hL*r,s=mL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=Qh*i/5,u=NE(l),d=Xf(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Dg=si(3),gL={draw(e,t){const r=-si(t/(Dg*3));e.moveTo(0,r*2),e.lineTo(-Dg*r,-r),e.lineTo(Dg*r,-r),e.closePath()}},As=-.5,Ps=si(3)/2,Wv=1/si(12),yL=(Wv/2+1)*3,vL={draw(e,t){const r=si(t/yL),n=r/2,s=r*Wv,i=n,l=r*Wv+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(As*n-Ps*s,Ps*n+As*s),e.lineTo(As*i-Ps*l,Ps*i+As*l),e.lineTo(As*u-Ps*d,Ps*u+As*d),e.lineTo(As*n+Ps*s,As*s-Ps*n),e.lineTo(As*i+Ps*l,As*l-Ps*i),e.lineTo(As*u+Ps*d,As*d-Ps*u),e.closePath()}};function xL(e,t){let r=null,n=ix(s);e=typeof e=="function"?e:qt(e||ox),t=typeof t=="function"?t:qt(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:qt(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:qt(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function eh(){}function th(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function RE(e){this._context=e}RE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:th(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wL(e){return new RE(e)}function $E(e){this._context=e}$E.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bL(e){return new $E(e)}function ME(e){this._context=e}ME.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jL(e){return new ME(e)}function FE(e){this._context=e}FE.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SL(e){return new FE(e)}function RS(e){return e<0?-1:1}function $S(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(RS(i)+RS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function MS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Rg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function rh(e){this._context=e}rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rg(this,this._t0,MS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rg(this,MS(this,r=$S(this,e,t)),r);break;default:Rg(this,this._t0,r=$S(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function LE(e){this._context=new zE(e)}(LE.prototype=Object.create(rh.prototype)).point=function(e,t){rh.prototype.point.call(this,t,e)};function zE(e){this._context=e}zE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function _L(e){return new rh(e)}function kL(e){return new LE(e)}function UE(e){this._context=e}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=FS(e),s=FS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function FS(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function NL(e){return new UE(e)}function Zh(e,t){this._context=e,this._t=t}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function CL(e){return new Zh(e,.5)}function EL(e){return new Zh(e,0)}function AL(e){return new Zh(e,1)}function Ml(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Vv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function PL(e,t){return e[t]}function OL(e){const t=[];return t.key=e,t}function TL(){var e=qt([]),t=Vv,r=Ml,n=PL;function s(i){var l=Array.from(e.apply(this,arguments),OL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=ax(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:qt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:qt(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Vv:typeof i=="function"?i:qt(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Ml,s):r},s}function IL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Ml(e,t)}}function DL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Ml(e,t)}}function RL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,b=0;b<u;++b){var j=e[t[b]],S=j[n][1]||0,k=j[n-1][1]||0;x+=S-k}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Ml(e,t)}}var $g={},Mg={},LS;function $L(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Mg)),Mg}var Fg={},zS;function BE(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Fg)),Fg}var Lg={},US;function lx(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Lg)),Lg}var zg={},Ug={},BS;function ML(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Ug)),Ug}var WS;function cx(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ML(),r=lx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(zg)),zg}var VS;function ux(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$L(),r=BE(),n=lx(),s=cx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})($g)),$g}var Bg,qS;function FL(){return qS||(qS=1,Bg=ux().get),Bg}var LL=FL();const Fl=ri(LL);var ys=e=>e===0?0:e>0?1:-1,pi=e=>typeof e=="number"&&e!=+e,Hi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ct=e=>(typeof e=="number"||e instanceof Number)&&!pi(e),gi=e=>ct(e)||typeof e=="string",zL=0,wu=e=>{var t=++zL;return"".concat(e||"").concat(t)},ti=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ct(t)&&typeof t!="string")return n;var i;if(Hi(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return pi(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},WE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function gn(e,t,r){return ct(e)&&ct(t)?e+r*(t-e):t}function UL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Fl(n,t))===r)}var rn=e=>e===null||typeof e>"u",Lu=e=>rn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function BL(e){return e!=null}function ec(){}var WL=["type","size","sizeType"];function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(null,arguments)}function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(r),!0).forEach(function(n){VL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VL(e,t,r){return(t=qL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qL(e){var t=HL(e,"string");return typeof t=="symbol"?t:t+""}function HL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KL(e,t){if(e==null)return{};var r,n,s=GL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VE={symbolCircle:ox,symbolCross:lL,symbolDiamond:uL,symbolSquare:dL,symbolStar:pL,symbolTriangle:gL,symbolWye:vL},YL=Math.PI/180,JL=e=>{var t="symbol".concat(Lu(e));return VE[t]||ox},QL=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*YL;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},XL=(e,t)=>{VE["symbol".concat(Lu(e))]=t},qE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=KL(e,WL),i=KS(KS({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=JL(l),x=xL().type(y).size(QL(r,n,l)),b=x();if(b!==null)return b},{className:d,cx:m,cy:f}=i,p=Ds(i);return ct(m)&&ct(f)&&ct(r)?v.createElement("path",qv({},p,{className:Jt("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};qE.registerSymbol=XL;var HE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ZL=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{nx(s)&&(n[s]=(i=>r[s](r,i)))}),n},ez=(e,t,r)=>n=>(e(t,r,n),null),dx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];nx(s)&&typeof i=="function"&&(n||(n={}),n[s]=ez(i,t,r))}),n};function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){rz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rz(e,t,r){return(t=nz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nz(e){var t=sz(e,"string");return typeof t=="symbol"?t:t+""}function sz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ms(e,t){var r=tz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var Wg={},Vg={},YS;function iz(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Vg)),Vg}var qg={},JS;function KE(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(qg)),qg}var Hg={},Kg={},Gg={},QS;function az(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Gg)),Gg}var XS;function fx(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=az();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Kg)),Kg}var Yg={},ZS;function oz(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Yg)),Yg}var e_;function lz(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=oz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(Hg)),Hg}var Jg={},Qg={},t_;function cz(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ux();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Qg)),Qg}var Xg={},Zg={},ey={},ty={},r_;function GE(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ty)),ty}var ry={},n_;function YE(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(ry)),ry}var ny={},s_;function JE(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(ny)),ny}var i_;function uz(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE(),r=YE(),n=JE();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(b,j,S,k,E,N){const O=y(b,j,S,k,E,N);return O!==void 0?!!O:i(b,j,x,N)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const b=Object.keys(p);if(f==null)return b.length===0;if(b.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let j=0;j<b.length;j++){const S=b[j];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,j]of p.entries()){const S=f.get(b);if(y(S,j,b,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let j=0;j<p.length;j++){const S=p[j];let k=!1;for(let E=0;E<f.length;E++){if(b.has(E))continue;const N=f[E];let O=!1;if(y(N,S,j,f,p,x)&&(O=!0),O){b.add(E),k=!0;break}}if(!k)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(ey)),ey}var a_;function QE(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Zg)),Zg}var sy={},iy={},ay={},o_;function dz(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ay)),ay}var oy={},l_;function XE(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(oy)),oy}var ly={},c_;function ZE(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",b="[object Error]",j="[object DataView]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",E="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",P="[object Int8Array]",T="[object Int16Array]",R="[object Int32Array]",K="[object BigInt64Array]",z="[object Float32Array]",G="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=K,e.bigUint64ArrayTag=O,e.booleanTag=s,e.dataViewTag=j,e.dateTag=u,e.errorTag=b,e.float32ArrayTag=z,e.float64ArrayTag=G,e.functionTag=p,e.int16ArrayTag=T,e.int32ArrayTag=R,e.int8ArrayTag=P,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=N,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=k})(ly)),ly}var cy={},u_;function fz(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(cy)),cy}var d_;function eA(){return d_||(d_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dz(),r=XE(),n=ZE(),s=YE(),i=fz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,b=void 0){const j=b==null?void 0:b(f,p,y,x);if(j!==void 0)return j;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let k=0;k<f.length;k++)S[k]=u(f[k],k,y,x,b);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[k,E]of f)S.set(k,u(E,k,y,x,b));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const k of f)S.add(u(k,void 0,y,x,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let k=0;k<f.length;k++)S[k]=u(f[k],k,y,x,b);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,b),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,b),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,b),S}return f}function d(f,p,y=f,x,b){const j=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<j.length;S++){const k=j[S],E=Object.getOwnPropertyDescriptor(f,k);(E==null||E.writable)&&(f[k]=u(p[k],k,y,x,b))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(iy)),iy}var f_;function hz(){return f_||(f_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(sy)),sy}var h_;function mz(){return h_||(h_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QE(),r=hz();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(Xg)),Xg}var uy={},dy={},fy={},m_;function pz(){return m_||(m_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eA(),r=ZE();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(fy)),fy}var p_;function gz(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(dy)),dy}var hy={},my={},g_;function tA(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(my)),my}var py={},y_;function yz(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(py)),py}var v_;function vz(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE(),r=tA(),n=yz(),s=cx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(hy)),hy}var x_;function xz(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QE(),r=lx(),n=gz(),s=ux(),i=vz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(uy)),uy}var w_;function wz(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KE(),r=cz(),n=mz(),s=xz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(Jg)),Jg}var b_;function bz(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iz(),r=KE(),n=lz(),s=wz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(Wg)),Wg}var gy,j_;function jz(){return j_||(j_=1,gy=bz().uniqBy),gy}var Sz=jz();const S_=ri(Sz);function _z(e,t,r){return t===!0?S_(e,r):typeof t=="function"?S_(e,t):e}var yy={exports:{}},vy={},xy={exports:{}},wy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function kz(){if(__)return wy;__=1;var e=Hl();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),b=n({inst:{value:x,getSnapshot:y}}),j=b[0].inst,S=b[1];return i(function(){j.value=x,j.getSnapshot=y,d(j)&&S({inst:j})},[p,x,y]),s(function(){return d(j)&&S({inst:j}),p(function(){d(j)&&S({inst:j})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return wy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,wy}var k_;function Nz(){return k_||(k_=1,xy.exports=kz()),xy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function Cz(){if(N_)return vy;N_=1;var e=Hl(),t=Nz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return vy.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var b=i(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=u(function(){function k(T){if(!E){if(E=!0,N=T,T=y(T),x!==void 0&&j.hasValue){var R=j.value;if(x(R,T))return O=R}return O=T}if(R=O,n(N,T))return R;var K=y(T);return x!==void 0&&x(R,K)?(N=T,R):(N=T,O=K)}var E=!1,N,O,P=p===void 0?null:p;return[function(){return k(f())},P===null?void 0:function(){return k(P())}]},[f,p,y,x]);var S=s(m,b[0],b[1]);return l(function(){j.hasValue=!0,j.value=S},[S]),d(S),S},vy}var C_;function Ez(){return C_||(C_=1,yy.exports=Cz()),yy.exports}var Az=Ez(),hx=v.createContext(null),Pz=e=>e,pr=()=>{var e=v.useContext(hx);return e?e.store.dispatch:Pz},Df=()=>{},Oz=()=>Df,Tz=(e,t)=>e===t;function it(e){var t=v.useContext(hx);return Az.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Oz,t?t.store.getState:Df,t?t.store.getState:Df,t?e:Df,Tz)}function Iz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Dz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Rz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var E_=e=>Array.isArray(e)?e:[e];function $z(e){const t=Array.isArray(e[0])?e[0]:e;return Rz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Mz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Fz=class{constructor(e){this.value=e}deref(){return this.value}},Lz=typeof WeakRef<"u"?WeakRef:Fz,zz=0,A_=1;function ff(){return{s:zz,v:void 0,o:null,p:null}}function rA(e,t={}){let r=ff();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const b=arguments[y];if(typeof b=="function"||typeof b=="object"&&b!==null){let j=u.o;j===null&&(u.o=j=new WeakMap);const S=j.get(b);S===void 0?(u=ff(),j.set(b,u)):u=S}else{let j=u.p;j===null&&(u.p=j=new Map);const S=j.get(b);S===void 0?(u=ff(),j.set(b,u)):u=S}}const m=u;let f;if(u.s===A_)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Lz(f):f}return m.s=A_,m.v=f,f}return l.clearCache=()=>{r=ff(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function Uz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Iz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=rA,argsMemoizeOptions:b=[]}=f,j=E_(y),S=E_(b),k=$z(s),E=p(function(){return i++,m.apply(null,arguments)},...j),N=x(function(){l++;const P=Mz(k,arguments);return u=E.apply(null,P),u},...S);return Object.assign(N,{resultFunc:m,memoizedResultFunc:E,dependencies:k,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var he=Uz(rA),Bz=Object.assign((e,t=he)=>{Dz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>Bz}),by={},jy={},Sy={},P_;function Wz(){return P_||(P_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(Sy)),Sy}var _y={},ky={},O_;function nA(){return O_||(O_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ky)),ky}var T_;function Vz(){return T_||(T_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(_y)),_y}var I_;function qz(){return I_||(I_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wz(),r=Vz(),n=cx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,b)=>{let j=x;for(let S=0;S<b.length&&j!=null;++S)j=j[b[S]];return j},f=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:m(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?m(b,x):typeof b=="object"?b[x]:b,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(b=>f(b,x))})).slice().sort((x,b)=>{for(let j=0;j<p.length;j++){const S=t.compareValues(x.criteria[j],b.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(jy)),jy}var Ny={},D_;function Hz(){return D_||(D_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Ny)),Ny}var Cy={},R_;function sA(){return R_||(R_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tA(),r=fx(),n=GE(),s=JE();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Cy)),Cy}var $_;function Kz(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qz(),r=Hz(),n=sA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(by)),by}var Ey,M_;function Gz(){return M_||(M_=1,Ey=Kz().sortBy),Ey}var Yz=Gz();const em=ri(Yz);var iA=e=>e.legend.settings,Jz=e=>e.legend.size,Qz=e=>e.legend.payload;he([Qz,iA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?em(n,r):n});var hf=1;function Xz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>hf||Math.abs(l.left-t.left)>hf||Math.abs(l.top-t.top)>hf||Math.abs(l.width-t.width)>hf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function mn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Zz=typeof Symbol=="function"&&Symbol.observable||"@@observable",F_=Zz,Ay=()=>Math.random().toString(36).substring(7).split("").join("."),eU={INIT:`@@redux/INIT${Ay()}`,REPLACE:`@@redux/REPLACE${Ay()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ay()}`},nh=eU;function mx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aA(e,t,r){if(typeof e!="function")throw new Error(mn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(mn(1));return r(aA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,k)=>{l.set(k,S)}))}function f(){if(d)throw new Error(mn(3));return s}function p(S){if(typeof S!="function")throw new Error(mn(4));if(d)throw new Error(mn(5));let k=!0;m();const E=u++;return l.set(E,S),function(){if(k){if(d)throw new Error(mn(6));k=!1,m(),l.delete(E),i=null}}}function y(S){if(!mx(S))throw new Error(mn(7));if(typeof S.type>"u")throw new Error(mn(8));if(typeof S.type!="string")throw new Error(mn(17));if(d)throw new Error(mn(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(mn(10));n=S,y({type:nh.REPLACE})}function b(){const S=p;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(mn(11));function E(){const O=k;O.next&&O.next(f())}return E(),{unsubscribe:S(E)}},[F_](){return this}}}return y({type:nh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[F_]:b}}function tU(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:nh.INIT})>"u")throw new Error(mn(12));if(typeof r(void 0,{type:nh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mn(13))})}function oA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{tU(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],b=y(x,u);if(typeof b>"u")throw u&&u.type,new Error(mn(14));m[p]=b,d=d||b!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function sh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function rU(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(mn(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=sh(...u)(s.dispatch),{...s,dispatch:i}}}function lA(e){return mx(e)&&"type"in e&&typeof e.type=="string"}var cA=Symbol.for("immer-nothing"),L_=Symbol.for("immer-draftable"),ws=Symbol.for("immer-state");function Js(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var bu=Object.getPrototypeOf;function ko(e){return!!e&&!!e[ws]}function Ki(e){var t;return e?uA(e)||Array.isArray(e)||!!e[L_]||!!((t=e.constructor)!=null&&t[L_])||zu(e)||rm(e):!1}var nU=Object.prototype.constructor.toString(),z_=new WeakMap;function uA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=z_.get(r);return n===void 0&&(n=Function.toString.call(r),z_.set(r,n)),n===nU}function ih(e,t,r=!0){tm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function tm(e){const t=e[ws];return t?t.type_:Array.isArray(e)?1:zu(e)?2:rm(e)?3:0}function Hv(e,t){return tm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dA(e,t,r){const n=tm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function sU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function zu(e){return e instanceof Map}function rm(e){return e instanceof Set}function lo(e){return e.copy_||e.base_}function Kv(e,t){if(zu(e))return new Map(e);if(rm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=uA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ws];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(bu(e),n)}else{const n=bu(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function px(e,t=!1){return nm(e)||ko(e)||!Ki(e)||(tm(e)>1&&Object.defineProperties(e,{set:mf,add:mf,clear:mf,delete:mf}),Object.freeze(e),t&&Object.values(e).forEach(r=>px(r,!0))),e}function iU(){Js(2)}var mf={value:iU};function nm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var aU={};function No(e){const t=aU[e];return t||Js(0,e),t}var ju;function fA(){return ju}function oU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function U_(e,t){t&&(No("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Gv(e){Yv(e),e.drafts_.forEach(lU),e.drafts_=null}function Yv(e){e===ju&&(ju=e.parent_)}function B_(e){return ju=oU(ju,e)}function lU(e){const t=e[ws];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function W_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ws].modified_&&(Gv(t),Js(4)),Ki(e)&&(e=ah(t,e),t.parent_||oh(t,e)),t.patches_&&No("Patches").generateReplacementPatches_(r[ws].base_,e,t.patches_,t.inversePatches_)):e=ah(t,r,[]),Gv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cA?e:void 0}function ah(e,t,r){if(nm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ws];if(!s)return ih(t,(i,l)=>V_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return oh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),ih(l,(d,m)=>V_(e,s,i,d,m,r,u),n),oh(e,i,!1),r&&e.patches_&&No("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function V_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=nm(s);if(!(u&&!l)){if(ko(s)){const d=i&&t&&t.type_!==3&&!Hv(t.assigned_,n)?i.concat(n):void 0,m=ah(e,s,d);if(dA(r,n,m),ko(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Ki(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;ah(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(zu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&oh(e,s)}}}function oh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&px(t,r)}function cU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=gx;r&&(s=[n],i=Su);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var gx={get(e,t){if(t===ws)return e;const r=lo(e);if(!Hv(r,t))return uU(e,r,t);const n=r[t];return e.finalized_||!Ki(n)?n:n===Py(e.base_,t)?(Oy(e),e.copy_[t]=Qv(n,e)):n},has(e,t){return t in lo(e)},ownKeys(e){return Reflect.ownKeys(lo(e))},set(e,t,r){const n=hA(lo(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Py(lo(e),t),i=s==null?void 0:s[ws];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(sU(r,s)&&(r!==void 0||Hv(e.base_,t)))return!0;Oy(e),Jv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Py(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Oy(e),Jv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=lo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Js(11)},getPrototypeOf(e){return bu(e.base_)},setPrototypeOf(){Js(12)}},Su={};ih(gx,(e,t)=>{Su[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Su.deleteProperty=function(e,t){return Su.set.call(this,e,t,void 0)};Su.set=function(e,t,r){return gx.set.call(this,e[0],t,r,e[0])};function Py(e,t){const r=e[ws];return(r?lo(r):e)[t]}function uU(e,t,r){var s;const n=hA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function hA(e,t){if(!(t in e))return;let r=bu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=bu(r)}}function Jv(e){e.modified_||(e.modified_=!0,e.parent_&&Jv(e.parent_))}function Oy(e){e.copy_||(e.copy_=Kv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&Js(6),n!==void 0&&typeof n!="function"&&Js(7);let s;if(Ki(t)){const i=B_(this),l=Qv(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Gv(i):Yv(i)}return U_(i,n),W_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===cA&&(s=void 0),this.autoFreeze_&&px(s,!0),n){const i=[],l=[];No("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else Js(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ki(e)||Js(8),ko(e)&&(e=zi(e));const t=B_(this),r=Qv(e,void 0);return r[ws].isManual_=!0,Yv(t),r}finishDraft(e,t){const r=e&&e[ws];(!r||!r.isManual_)&&Js(9);const{scope_:n}=r;return U_(n,t),W_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=No("Patches").applyPatches_;return ko(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Qv(e,t){const r=zu(e)?No("MapSet").proxyMap_(e,t):rm(e)?No("MapSet").proxySet_(e,t):cU(e,t);return(t?t.scope_:fA()).drafts_.push(r),r}function zi(e){return ko(e)||Js(10,e),mA(e)}function mA(e){if(!Ki(e)||nm(e))return e;const t=e[ws];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Kv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Kv(e,!0);return ih(r,(s,i)=>{dA(r,s,mA(i))},n),t&&(t.finalized_=!1),r}var Xv=new dU,pA=Xv.produce,fU=Xv.setUseStrictIteration.bind(Xv);function gA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var hU=gA(),mU=gA,pU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sh:sh.apply(null,arguments)};function Rs(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(xs(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>lA(n)&&n.type===e,r}var yA=class iu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,iu.prototype)}static get[Symbol.species](){return iu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new iu(...t[0].concat(this)):new iu(...t.concat(this))}};function q_(e){return Ki(e)?pA(e,()=>{}):e}function pf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function gU(e){return typeof e=="boolean"}var yU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new yA;return r&&(gU(r)?l.push(hU):l.push(mU(r.extraArgument))),l},vA="RTK_autoBatch",$r=()=>e=>({payload:e,meta:{[vA]:!0}}),H_=e=>t=>{setTimeout(t,e)},xA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:H_(10):e.type==="callback"?e.queueNotification:H_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[vA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},vU=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new yA(e);return n&&s.push(xA(typeof n=="object"?n:void 0)),s};function xU(e){const t=yU(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(mx(r))u=oA(r);else throw new Error(xs(1));let d;typeof n=="function"?d=n(t):d=t();let m=sh;s&&(m=pU({trace:!1,...typeof s=="object"&&s}));const f=rU(...d),p=vU(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return aA(u,i,x)}function wA(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(xs(28));if(u in t)throw new Error(xs(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}fU(!1);function wU(e){return typeof e=="function"}function bU(e,t){let[r,n,s]=wA(t),i;if(wU(e))i=()=>q_(e());else{const u=q_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(ko(f)){const x=p(f,d);return x===void 0?f:x}else{if(Ki(f))return pA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var jU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SU=(e=21)=>{let t="",r=e;for(;r--;)t+=jU[Math.random()*64|0];return t},_U=Symbol.for("rtk-slice-createasyncthunk");function kU(e,t){return`${e}/${t}`}function NU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[_U];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(xs(11));const u=(typeof s.reducers=="function"?s.reducers(EU()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,P){const T=typeof O=="string"?O:O.type;if(!T)throw new Error(xs(12));if(T in m.sliceCaseReducersByType)throw new Error(xs(13));return m.sliceCaseReducersByType[T]=P,f},addMatcher(O,P){return m.sliceMatchers.push({matcher:O,reducer:P}),f},exposeAction(O,P){return m.actionCreators[O]=P,f},exposeCaseReducer(O,P){return m.sliceCaseReducersByName[O]=P,f}};d.forEach(O=>{const P=u[O],T={reducerName:O,type:kU(i,O),createNotation:typeof s.reducers=="function"};PU(P)?TU(T,P,f,t):AU(T,P,f)});function p(){const[O={},P=[],T=void 0]=typeof s.extraReducers=="function"?wA(s.extraReducers):[s.extraReducers],R={...O,...m.sliceCaseReducersByType};return bU(s.initialState,K=>{for(let z in R)K.addCase(z,R[z]);for(let z of m.sliceMatchers)K.addMatcher(z.matcher,z.reducer);for(let z of P)K.addMatcher(z.matcher,z.reducer);T&&K.addDefaultCase(T)})}const y=O=>O,x=new Map,b=new WeakMap;let j;function S(O,P){return j||(j=p()),j(O,P)}function k(){return j||(j=p()),j.getInitialState()}function E(O,P=!1){function T(K){let z=K[O];return typeof z>"u"&&P&&(z=pf(b,T,k)),z}function R(K=y){const z=pf(x,P,()=>new WeakMap);return pf(z,K,()=>{const G={};for(const[W,q]of Object.entries(s.selectors??{}))G[W]=CU(q,K,()=>pf(b,K,k),P);return G})}return{reducerPath:O,getSelectors:R,get selectors(){return R(T)},selectSlice:T}}const N={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:k,...E(l),injectInto(O,{reducerPath:P,...T}={}){const R=P??l;return O.inject({reducerPath:R,reducer:S},T),{...N,...E(R,!0)}}};return N}}function CU(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Zn=NU();function EU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function AU({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!OU(n))throw new Error(xs(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Rs(e,l):Rs(e))}function PU(e){return e._reducerDefinitionType==="asyncThunk"}function OU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function TU({type:e,reducerName:t},r,n,s){if(!s)throw new Error(xs(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||gf,pending:u||gf,rejected:d||gf,settled:m||gf})}function gf(){}var IU="task",bA="listener",jA="completed",yx="cancelled",DU=`task-${yx}`,RU=`task-${jA}`,Zv=`${bA}-${yx}`,$U=`${bA}-${jA}`,sm=class{constructor(e){lg(this,"name","TaskAbortError");lg(this,"message");this.code=e,this.message=`${IU} ${yx} (reason: ${e})`}},vx=(e,t)=>{if(typeof e!="function")throw new TypeError(xs(32))},lh=()=>{},SA=(e,t=lh)=>(e.catch(t),e),_A=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),wo=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},bo=e=>{if(e.aborted){const{reason:t}=e;throw new sm(t)}};function kA(e,t){let r=lh;return new Promise((n,s)=>{const i=()=>s(new sm(e.reason));if(e.aborted){i();return}r=_A(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=lh})}var MU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof sm?"cancelled":"rejected",error:r}}finally{t==null||t()}},ch=e=>t=>SA(kA(e,t).then(r=>(bo(e),r))),NA=e=>{const t=ch(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Il}=Object,K_={},im="listenerMiddleware",FU=(e,t)=>{const r=n=>_A(e,()=>wo(n,e.reason));return(n,s)=>{vx(n);const i=new AbortController;r(i);const l=MU(async()=>{bo(e),bo(i.signal);const u=await n({pause:ch(i.signal),delay:NA(i.signal),signal:i.signal});return bo(i.signal),u},()=>wo(i,RU));return s!=null&&s.autoJoin&&t.push(l.catch(lh)),{result:ch(e)(l),cancel(){wo(i,DU)}}}},LU=(e,t)=>{const r=async(n,s)=>{bo(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await kA(t,Promise.race(u));return bo(t),d}finally{i()}};return(n,s)=>SA(r(n,s))},CA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Rs(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(xs(21));return vx(i),{predicate:s,type:t,effect:i}},EA=Il(e=>{const{type:t,predicate:r,effect:n}=CA(e);return{id:SU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(xs(22))}}},{withTypes:()=>EA}),G_=(e,t)=>{const{type:r,effect:n,predicate:s}=CA(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},e0=e=>{e.pending.forEach(t=>{wo(t,Zv)})},zU=(e,t)=>()=>{for(const r of t.keys())e0(r);e.clear()},Y_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},AA=Il(Rs(`${im}/add`),{withTypes:()=>AA}),UU=Rs(`${im}/removeAll`),PA=Il(Rs(`${im}/remove`),{withTypes:()=>PA}),BU=(...e)=>{console.error(`${im}/error`,...e)},Uu=(e={})=>{const t=new Map,r=new Map,n=x=>{const b=r.get(x)??0;r.set(x,b+1)},s=x=>{const b=r.get(x)??1;b===1?r.delete(x):r.set(x,b-1)},{extra:i,onError:l=BU}=e;vx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b!=null&&b.cancelActive&&e0(x)}),d=x=>{const b=G_(t,x)??EA(x);return u(b)};Il(d,{withTypes:()=>d});const m=x=>{const b=G_(t,x);return b&&(b.unsubscribe(),x.cancelActive&&e0(b)),!!b};Il(m,{withTypes:()=>m});const f=async(x,b,j,S)=>{const k=new AbortController,E=LU(d,k.signal),N=[];try{x.pending.add(k),n(x),await Promise.resolve(x.effect(b,Il({},j,{getOriginalState:S,condition:(O,P)=>E(O,P).then(Boolean),take:E,delay:NA(k.signal),pause:ch(k.signal),extra:i,signal:k.signal,fork:FU(k.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((O,P,T)=>{O!==k&&(wo(O,Zv),T.delete(O))})},cancel:()=>{wo(k,Zv),x.pending.delete(k)},throwIfCancelled:()=>{bo(k.signal)}})))}catch(O){O instanceof sm||Y_(l,O,{raisedBy:"effect"})}finally{await Promise.all(N),wo(k,$U),s(x),x.pending.delete(k)}},p=zU(t,r);return{middleware:x=>b=>j=>{if(!lA(j))return b(j);if(AA.match(j))return d(j.payload);if(UU.match(j)){p();return}if(PA.match(j))return m(j.payload);let S=x.getState();const k=()=>{if(S===K_)throw new Error(xs(23));return S};let E;try{if(E=b(j),t.size>0){const N=x.getState(),O=Array.from(t.values());for(const P of O){let T=!1;try{T=P.predicate(j,N,S)}catch(R){T=!1,Y_(l,R,{raisedBy:"predicate"})}T&&f(P,j,x,k)}}}finally{S=K_}return E},startListening:d,stopListening:m,clearListeners:p}};function xs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var WU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},OA=Zn({name:"chartLayout",initialState:WU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:VU,setLayout:qU,setChartSize:HU,setScale:KU}=OA.actions,GU=OA.reducer;function TA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(r),!0).forEach(function(n){YU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YU(e,t,r){return(t=JU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JU(e){var t=QU(e,"string");return typeof t=="symbol"?t:t+""}function QU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rn(e,t,r){return rn(e)||rn(t)?r:gi(t)?Fl(e,t,r):typeof t=="function"?t(e):r}var XU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&ct(e[i]))return El(El({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&ct(e[l]))return El(El({},e),{},{[l]:e[l]+(s||0)})}return e},Do=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Q_=1e-4,ZU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-Q_,i=Math.max(n[0],n[1])+Q_,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},eB=(e,t)=>{if(!t||t.length!==2||!ct(t[0])||!ct(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ct(e[0])||e[0]<r)&&(s[0]=r),(!ct(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},tB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=pi(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},rB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=pi(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},nB={sign:tB,expand:IL,none:Ml,silhouette:DL,wiggle:RL,positive:rB},sB=(e,t,r)=>{var n=nB[r],s=TL().keys(t).value((i,l)=>Number(Rn(i,l,0))).order(Vv).offset(n);return s(e)};function iB(e){return e==null?void 0:String(e)}var X_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Rn(i,t.dataKey,t.scale.domain()[l]);return rn(u)?null:t.scale(u)-s/2+n},aB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},oB=e=>{var t=e.flat(2).filter(ct);return[Math.min(...t),Math.max(...t)]},lB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],cB=(e,t,r)=>{if(e!=null)return lB(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=TA(m,t,r),p=oB(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},Z_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ek=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=em(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function tk(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return El(El({},t),{},{dataKey:r,payload:n,value:s,name:i})}function IA(e,t){if(e)return String(e);if(typeof t=="string")return t}var uB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},dB=(e,t)=>t==="centric"?e.angle:e.radius,ea=e=>e.layout.width,ta=e=>e.layout.height,fB=e=>e.layout.scale,DA=e=>e.layout.margin,am=he(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),om=he(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hB="data-recharts-item-index",mB="data-recharts-item-data-key",Bu=60;function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(n){pB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pB(e,t,r){return(t=gB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gB(e){var t=yB(e,"string");return typeof t=="symbol"?t:t+""}function yB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vB=e=>e.brush.height;function xB(e){var t=om(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Bu;return r+s}return r},0)}function wB(e){var t=om(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Bu;return r+s}return r},0)}function bB(e){var t=am(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function jB(e){var t=am(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var nn=he([ea,ta,DA,vB,xB,wB,bB,jB,iA,Jz],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=yf(yf({},p),f),x=y.bottom;y.bottom+=n,y=XU(y,d,m);var b=e-y.left-y.right,j=t-y.top-y.bottom;return yf(yf({brushBottom:x},y),{},{width:Math.max(b,0),height:Math.max(j,0)})}),SB=he(nn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),xx=he(ea,ta,(e,t)=>({x:0,y:0,width:e,height:t})),_B=v.createContext(null),js=()=>v.useContext(_B)!=null,lm=e=>e.brush,cm=he([lm,nn,DA],(e,t,r)=>({height:e.height,x:ct(e.x)?e.x:t.left,y:ct(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ct(e.width)?e.width:t.width})),Ty={},Iy={},Dy={},nk;function kB(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},b=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{b(),l=void 0,u=null},S=()=>{f()},k=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const N=y==null;x(),d&&N&&f()};return k.schedule=x,k.cancel=j,k.flush=S,s==null||s.addEventListener("abort",j,{once:!0}),k}e.debounce=t})(Dy)),Dy}var sk;function NB(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kB();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...j){f=n.apply(this,j),p=null},s,{edges:m}),x=function(...j){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,j),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,j),f)},b=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=b,x}e.debounce=r})(Iy)),Iy}var ik;function CB(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NB();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(Ty)),Ty}var Ry,ak;function EB(){return ak||(ak=1,Ry=CB().throttle),Ry}var AB=EB();const PB=ri(AB);var ok=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},RA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=Hi(n)?e:Number(n),d=Hi(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},OB={width:0,height:0,overflow:"visible"},TB={width:0,overflowX:"visible"},IB={height:0,overflowY:"visible"},DB={},RB=e=>{var{width:t,height:r}=e,n=Hi(t),s=Hi(r);return n&&s?OB:n?TB:s?IB:DB};function $B(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function mr(e){return Number.isFinite(e)}function Fa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t0.apply(null,arguments)}function lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(r),!0).forEach(function(n){MB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MB(e,t,r){return(t=FB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FB(e){var t=LB(e,"string");return typeof t=="symbol"?t:t+""}function LB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $A=v.createContext({width:-1,height:-1});function zB(e){return Fa(e.width)&&Fa(e.height)}function MA(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return zB(s)?v.createElement($A.Provider,{value:s},t):null}var wx=()=>v.useContext($A),UB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:b={}}=e,j=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>j.current);var[k,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),N=v.useCallback((K,z)=>{E(G=>{var W=Math.round(K),q=Math.round(z);return G.containerWidth===W&&G.containerHeight===q?G:{containerWidth:W,containerHeight:q}})},[]);v.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return ec;var K=q=>{var de,{width:oe,height:J}=q[0].contentRect;N(oe,J),(de=S.current)===null||de===void 0||de.call(S,oe,J)};f>0&&(K=PB(K,f,{trailing:!0,leading:!1}));var z=new ResizeObserver(K),{width:G,height:W}=j.current.getBoundingClientRect();return N(G,W),z.observe(j.current),()=>{z.disconnect()}},[N,f]);var{containerWidth:O,containerHeight:P}=k;ok(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:R}=RA(O,P,{width:s,height:i,aspect:r,maxHeight:d});return ok(T!=null&&T>0||R!=null&&R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,R,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Jt("recharts-responsive-container",y),style:ck(ck({},b),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:j},v.createElement("div",{style:RB({width:s,height:i})},v.createElement(MA,{width:T,height:R},m)))}),BB=v.forwardRef((e,t)=>{var r=wx();if(Fa(r.width)&&Fa(r.height))return e.children;var{width:n,height:s}=$B({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=RA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return ct(i)&&ct(l)?v.createElement(MA,{width:i,height:l},e.children):v.createElement(UB,t0({},e,{width:n,height:s,ref:t}))});function FA(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var um=()=>{var e,t=js(),r=it(SB),n=it(cm),s=(e=it(lm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},WB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},VB=()=>{var e;return(e=it(nn))!==null&&e!==void 0?e:WB},qB=()=>it(ea),HB=()=>it(ta),Mt=e=>e.layout.layoutType,dm=()=>it(Mt),KB=()=>{var e=dm();return e!==void 0},fm=e=>{var t=pr(),r=js(),{width:n,height:s}=e,i=wx(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&Fa(l)&&Fa(u)&&t(HU({width:l,height:u}))},[t,r,l,u]),null},GB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},LA=Zn({name:"legend",initialState:GB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:$r()},removeLegendPayload:{reducer(e,t){var r=zi(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:$r()}}}),{setLegendSize:GZ,setLegendSettings:YZ,addLegendPayload:YB,removeLegendPayload:JB}=LA.actions,QB=LA.reducer;function r0(){return r0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r0.apply(null,arguments)}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(n){XB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XB(e,t,r){return(t=ZB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=e8(e,"string");return typeof t=="symbol"?t:t+""}function e8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t8(e){return Array.isArray(e)&&gi(e[0])&&gi(e[1])?e.join(" ~ "):e}var r8=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var P={padding:0,margin:0},T=(u?em(i,u):i).map((R,K)=>{if(R.type==="none")return null;var z=R.formatter||l||t8,{value:G,name:W}=R,q=G,de=W;if(z){var oe=z(G,W,R,K,i);if(Array.isArray(oe))[q,de]=oe;else if(oe!=null)q=oe;else return null}var J=$y({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:J},gi(de)?v.createElement("span",{className:"recharts-tooltip-item-name"},de):null,gi(de)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},q),v.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:P},T)}return null},b=$y({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=$y({margin:0},s),S=!rn(f),k=S?f:"",E=Jt("recharts-default-tooltip",d),N=Jt("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(k=p(f,i));var O=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",r0({className:E,style:b},O),v.createElement("p",{className:N,style:j},v.isValidElement(k)?k:"".concat(k)),x())},Yc="recharts-tooltip-wrapper",n8={visibility:"hidden"};function s8(e){var{coordinate:t,translateX:r,translateY:n}=e;return Jt(Yc,{["".concat(Yc,"-right")]:ct(r)&&t&&ct(t.x)&&r>=t.x,["".concat(Yc,"-left")]:ct(r)&&t&&ct(t.x)&&r<t.x,["".concat(Yc,"-bottom")]:ct(n)&&t&&ct(t.y)&&n>=t.y,["".concat(Yc,"-top")]:ct(n)&&t&&ct(t.y)&&n<t.y})}function dk(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&ct(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,b=y;return x<b?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var j=p+u,S=y+m;return j>S?Math.max(f,y):Math.max(p,y)}function i8(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function a8(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=dk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=dk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=i8({translateX:f,translateY:p,useTranslate3d:u})):m=n8,{cssProperties:m,cssClasses:s8({translateX:f,translateY:p,coordinate:r})}}function fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(r),!0).forEach(function(n){n0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n0(e,t,r){return(t=o8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8(e){var t=l8(e,"string");return typeof t=="symbol"?t:t+""}function l8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class c8 extends v.PureComponent{constructor(){super(...arguments),n0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),n0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:b,lastBoundingBox:j,innerRef:S,hasPortalFromProps:k}=this.props,{cssClasses:E,cssProperties:N}=a8({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),O=k?{}:vf(vf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),P=vf(vf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},b);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:P,ref:S},i)}}var u8=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tc={devToolsEnabled:!1,isSsr:u8()},zA=()=>{var e;return(e=it(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s0.apply(null,arguments)}function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(r),!0).forEach(function(n){d8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d8(e,t,r){return(t=f8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pk={curveBasisClosed:bL,curveBasisOpen:jL,curveBasis:wL,curveBumpX:aL,curveBumpY:oL,curveLinearClosed:SL,curveLinear:Xh,curveMonotoneX:_L,curveMonotoneY:kL,curveNatural:NL,curveStep:CL,curveStepAfter:AL,curveStepBefore:EL},dh=e=>mr(e.x)&&mr(e.y),gk=e=>e.base!=null&&dh(e.base)&&dh(e),Jc=e=>e.x,Qc=e=>e.y,m8=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Lu(e));return(r==="curveMonotone"||r==="curveBump")&&t?pk["".concat(r).concat(t==="vertical"?"Y":"X")]:pk[r]||Xh},p8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=m8(t,s),u=i?r.filter(dh):r,d;if(Array.isArray(n)){var m=r.map((x,b)=>mk(mk({},x),{},{base:n[b]}));s==="vertical"?d=df().y(Qc).x1(Jc).x0(x=>x.base.x):d=df().x(Jc).y1(Qc).y0(x=>x.base.y);var f=d.defined(gk).curve(l),p=i?m.filter(gk):m;return f(p)}s==="vertical"&&ct(n)?d=df().y(Qc).x1(Jc).x0(n):ct(n)?d=df().x(Jc).y1(Qc).y0(n):d=OE().x(Jc).y(Qc);var y=d.defined(dh).curve(l);return y(u)},UA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?p8(e):n;return v.createElement("path",s0({},Ma(e),ZL(e),{className:Jt("recharts-curve",t),d:i===null?void 0:i,ref:s}))},g8=["x","y","top","left","width","height","className"];function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i0.apply(null,arguments)}function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function y8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){v8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v8(e,t,r){return(t=x8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x8(e){var t=w8(e,"string");return typeof t=="symbol"?t:t+""}function w8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b8(e,t){if(e==null)return{};var r,n,s=j8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S8=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),_8=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=b8(e,g8),m=y8({x:t,y:r,top:n,left:s,width:i,height:l},d);return!ct(t)||!ct(r)||!ct(i)||!ct(l)||!ct(n)||!ct(s)?null:v.createElement("path",i0({},Ds(m),{className:Jt("recharts-cross",u),d:S8(t,r,i,l,n,s)}))};function k8(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){N8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N8(e,t,r){return(t=C8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C8(e){var t=E8(e,"string");return typeof t=="symbol"?t:t+""}function E8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),BA=(e,t,r)=>e.map(n=>"".concat(A8(n)," ").concat(t,"ms ").concat(r)).join(","),P8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),_u=(e,t)=>Object.keys(t).reduce((r,n)=>xk(xk({},r),{},{[n]:e(n,t[n])}),{});function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){O8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O8(e,t,r){return(t=T8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T8(e){var t=I8(e,"string");return typeof t=="symbol"?t:t+""}function I8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fh=(e,t,r)=>e+(t-e)*r,a0=e=>{var{from:t,to:r}=e;return t!==r},WA=(e,t,r)=>{var n=_u((s,i)=>{if(a0(i)){var[l,u]=e(i.from,i.to,i.velocity);return Rr(Rr({},i),{},{from:l,velocity:u})}return i},t);return r<1?_u((s,i)=>a0(i)?Rr(Rr({},i),{},{velocity:fh(i.velocity,n[s].velocity,r),from:fh(i.from,n[s].from,r)}):i,t):WA(e,n,r-1)};function D8(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>Rr(Rr({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>_u((y,x)=>x.from,u),m=()=>!Object.values(u).filter(a0).length,f=null,p=y=>{l||(l=y);var x=y-l,b=x/r.dt;u=WA(r,u,b),s(Rr(Rr(Rr({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function R8(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>Rr(Rr({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=_u((j,S)=>fh(...S,r(y)),d);if(i(Rr(Rr(Rr({},e),t),x)),y<1)u=l.setTimeout(f);else{var b=_u((j,S)=>fh(...S,r(1)),d);i(Rr(Rr(Rr({},e),t),b))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const $8=(e,t,r,n,s,i)=>{var l=P8(e,t);return r==null?()=>(s(Rr(Rr({},e),t)),()=>{}):r.isStepper===!0?D8(e,t,r,l,s,i):R8(e,t,r,n,l,s,i)};var hh=1e-4,VA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],qA=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),bk=(e,t)=>r=>{var n=VA(e,t);return qA(n,r)},M8=(e,t)=>r=>{var n=VA(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return qA(s,r)},F8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},L8=(e,t,r,n)=>{var s=bk(e,r),i=bk(t,n),l=M8(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,b=l(p);if(Math.abs(x-f)<hh||b<hh)return i(p);p=u(p-x/b)}return i(p)};return d.isStepper=!1,d},jk=function(){return L8(...F8(...arguments))},z8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<hh&&Math.abs(p)<hh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},U8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jk(e);case"spring":return z8();default:if(e.split("(")[0]==="cubic-bezier")return jk(e)}return typeof e=="function"?e:null};function B8(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class W8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function V8(){return B8(new W8)}var q8=v.createContext(V8);function H8(e,t){var r=v.useContext(q8);return v.useMemo(()=>t??r(e),[e,t,r])}var K8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Sk={t:0},My={t:1};function bx(e){var t=Ms(e,K8),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=H8(t.animationId,t.animationManager),[p,y]=v.useState(r?Sk:My),x=v.useRef(null);return v.useEffect(()=>{r||y(My)},[r]),v.useEffect(()=>{if(!r||!n)return ec;var b=$8(Sk,My,U8(i),s,y,f.getTimeoutController()),j=()=>{x.current=b()};return f.start([d,l,j,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function jx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(wu(t)),n=v.useRef(e);return n.current!==e&&(r.current=wu(t),n.current=e),r.current}var G8=["radius"],Y8=["radius"];function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(r),!0).forEach(function(n){J8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J8(e,t,r){return(t=Q8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q8(e){var t=X8(e,"string");return typeof t=="symbol"?t:t+""}function X8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mh.apply(null,arguments)}function Nk(e,t){if(e==null)return{};var r,n,s=Z8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Z8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ck=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},Ek={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HA=e=>{var t=Ms(e,Ek),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&s(ae)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:j}=t,S=v.useRef(u),k=v.useRef(d),E=v.useRef(i),N=v.useRef(l),O=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),P=jx(O,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var T=Jt("recharts-rectangle",f);if(!j){var R=Ds(t),{radius:K}=R,z=Nk(R,G8);return v.createElement("path",mh({},z,{radius:typeof m=="number"?m:void 0,className:T,d:Ck(i,l,u,d,m)}))}var G=S.current,W=k.current,q=E.current,de=N.current,oe="0px ".concat(n===-1?1:n,"px"),J="".concat(n,"px 0px"),Z=BA(["strokeDasharray"],y,typeof p=="string"?p:Ek.animationEasing);return v.createElement(bx,{animationId:P,key:P,canBegin:n>0,duration:y,easing:p,isActive:j,begin:x},ae=>{var re=gn(G,u,ae),me=gn(W,d,ae),pe=gn(q,i,ae),I=gn(de,l,ae);r.current&&(S.current=re,k.current=me,E.current=pe,N.current=I);var H;b?ae>0?H={transition:Z,strokeDasharray:J}:H={strokeDasharray:oe}:H={strokeDasharray:J};var Pe=Ds(t),{radius:Q}=Pe,ne=Nk(Pe,Y8);return v.createElement("path",mh({},ne,{radius:typeof m=="number"?m:void 0,className:T,d:Ck(pe,I,re,me,m),ref:r,style:kk(kk({},H),t.style)}))})};function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){eW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eW(e,t,r){return(t=tW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tW(e){var t=rW(e,"string");return typeof t=="symbol"?t:t+""}function rW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ph=Math.PI/180,nW=e=>e*180/Math.PI,vn=(e,t,r,n)=>({x:e+Math.cos(-ph*n)*r,y:t+Math.sin(-ph*n)*r}),sW=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},iW=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},aW=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=iW({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:nW(d),angleInRadian:d}},oW=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},lW=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},cW=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=aW({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=oW(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?Pk(Pk({},t),{},{radius:s,angle:lW(f,t)}):null};function KA(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=vn(t,r,n,s),u=vn(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(null,arguments)}var uW=(e,t)=>{var r=ys(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},xf=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/ph,p=d?s:s+i*f,y=vn(t,r,m,p),x=vn(t,r,n,p),b=d?s-i*f:s,j=vn(t,r,m*Math.cos(f*ph),b);return{center:y,circleTangency:x,lineTangency:j,theta:f}},GA=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=uW(i,l),d=i+u,m=vn(t,r,s,i),f=vn(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=vn(t,r,n,i),x=vn(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},dW=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=ys(m-d),{circleTangency:p,lineTangency:y,theta:x}=xf({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:b,lineTangency:j,theta:S}=xf({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),k=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(k<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):GA({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:O,theta:P}=xf({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:T,lineTangency:R,theta:K}=xf({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),z=u?Math.abs(d-m):Math.abs(d-m)-P-K;if(z<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},fW={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},YA=e=>{var t=Ms(e,fW),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=Jt("recharts-sector",p),x=i-s,b=ti(l,x,0,!0),j;return b>0&&Math.abs(m-f)<360?j=dW({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):j=GA({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",o0({},Ds(t),{className:y,d:j}))};function hW(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(HE(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=vn(n,s,i,u),m=vn(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return KA(t)}}var Fy={},Ly={},zy={},Ok;function mW(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(zy)),zy}var Tk;function pW(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mW();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Ly)),Ly}var Ik;function gW(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA(),r=pW();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(Fy)),Fy}var Uy,Dk;function yW(){return Dk||(Dk=1,Uy=gW().range),Uy}var vW=yW();const JA=ri(vW);function $a(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sx(e){let t,r,n;e.length!==2?(t=$a,r=(u,d)=>$a(e(u),d),n=(u,d)=>e(u)-d):(t=e===$a||e===xW?e:wW,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function wW(){return 0}function QA(e){return e===null?NaN:+e}function*bW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const jW=Sx($a),Wu=jW.right;Sx(QA).center;class Rk extends Map{constructor(t,r=kW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get($k(this,t))}has(t){return super.has($k(this,t))}set(t,r){return super.set(SW(this,t),r)}delete(t){return super.delete(_W(this,t))}}function $k({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function SW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function _W({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function kW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function NW(e=$a){if(e===$a)return XA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function XA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const CW=Math.sqrt(50),EW=Math.sqrt(10),AW=Math.sqrt(2);function gh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=CW?10:i>=EW?5:i>=AW?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?gh(e,t,r*2):[u,d,m]}function l0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?gh(t,e,r):gh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function c0(e,t,r){return t=+t,e=+e,r=+r,gh(e,t,r)[2]}function u0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?c0(t,e,r):c0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Mk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Fk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ZA(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?XA:NW(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),b=Math.min(n,Math.floor(t+(d-m)*p/d+y));ZA(e,t,x,b,s)}const i=e[t];let l=r,u=n;for(Xc(e,r,t),s(e[n],i)>0&&Xc(e,r,n);l<u;){for(Xc(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?Xc(e,r,u):(++u,Xc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function Xc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function PW(e,t,r){if(e=Float64Array.from(bW(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Fk(e);if(t>=1)return Mk(e);var n,s=(n-1)*t,i=Math.floor(s),l=Mk(ZA(e,i).subarray(0,i+1)),u=Fk(e.subarray(i+1));return l+(u-l)*(s-i)}}function OW(e,t,r=QA){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function TW(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Fs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ra(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const d0=Symbol("implicit");function _x(){var e=new Rk,t=[],r=[],n=d0;function s(i){let l=e.get(i);if(l===void 0){if(n!==d0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Rk;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return _x(t,r).unknown(n)},Fs.apply(s,arguments),s}function kx(){var e=_x().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,b=x?s:n,j=x?n:s;i=(j-b)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),b+=(j-b-i*(y-d))*f,l=i*(1-d),u&&(b=Math.round(b),l=Math.round(l));var S=TW(y).map(function(k){return b+i*k});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return kx(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Fs.apply(p(),arguments)}function eP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eP(t())},e}function IW(){return eP(kx.apply(null,arguments).paddingInner(1))}function Nx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Vu(){}var ku=.7,yh=1/ku,Dl="\\s*([+-]?\\d+)\\s*",Nu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DW=/^#([0-9a-f]{3,8})$/,RW=new RegExp(`^rgb\\(${Dl},${Dl},${Dl}\\)$`),$W=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),MW=new RegExp(`^rgba\\(${Dl},${Dl},${Dl},${Nu}\\)$`),FW=new RegExp(`^rgba\\(${mi},${mi},${mi},${Nu}\\)$`),LW=new RegExp(`^hsl\\(${Nu},${mi},${mi}\\)$`),zW=new RegExp(`^hsla\\(${Nu},${mi},${mi},${Nu}\\)$`),Lk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nx(Vu,Cu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zk,formatHex:zk,formatHex8:UW,formatHsl:BW,formatRgb:Uk,toString:Uk});function zk(){return this.rgb().formatHex()}function UW(){return this.rgb().formatHex8()}function BW(){return rP(this).formatHsl()}function Uk(){return this.rgb().formatRgb()}function Cu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=DW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Bk(t):r===3?new Qn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=RW.exec(e))?new Qn(t[1],t[2],t[3],1):(t=$W.exec(e))?new Qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MW.exec(e))?wf(t[1],t[2],t[3],t[4]):(t=FW.exec(e))?wf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=LW.exec(e))?qk(t[1],t[2]/100,t[3]/100,1):(t=zW.exec(e))?qk(t[1],t[2]/100,t[3]/100,t[4]):Lk.hasOwnProperty(e)?Bk(Lk[e]):e==="transparent"?new Qn(NaN,NaN,NaN,0):null}function Bk(e){return new Qn(e>>16&255,e>>8&255,e&255,1)}function wf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qn(e,t,r,n)}function WW(e){return e instanceof Vu||(e=Cu(e)),e?(e=e.rgb(),new Qn(e.r,e.g,e.b,e.opacity)):new Qn}function f0(e,t,r,n){return arguments.length===1?WW(e):new Qn(e,t,r,n??1)}function Qn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Nx(Qn,f0,tP(Vu,{brighter(e){return e=e==null?yh:Math.pow(yh,e),new Qn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ku:Math.pow(ku,e),new Qn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qn(jo(this.r),jo(this.g),jo(this.b),vh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wk,formatHex:Wk,formatHex8:VW,formatRgb:Vk,toString:Vk}));function Wk(){return`#${po(this.r)}${po(this.g)}${po(this.b)}`}function VW(){return`#${po(this.r)}${po(this.g)}${po(this.b)}${po((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vk(){const e=vh(this.opacity);return`${e===1?"rgb(":"rgba("}${jo(this.r)}, ${jo(this.g)}, ${jo(this.b)}${e===1?")":`, ${e})`}`}function vh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function po(e){return e=jo(e),(e<16?"0":"")+e.toString(16)}function qk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qs(e,t,r,n)}function rP(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof Vu||(e=Cu(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new Qs(l,u,d,e.opacity)}function qW(e,t,r,n){return arguments.length===1?rP(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Nx(Qs,qW,tP(Vu,{brighter(e){return e=e==null?yh:Math.pow(yh,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ku:Math.pow(ku,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Qn(By(e>=240?e-240:e+120,s,n),By(e,s,n),By(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Qs(Hk(this.h),bf(this.s),bf(this.l),vh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vh(this.opacity);return`${e===1?"hsl(":"hsla("}${Hk(this.h)}, ${bf(this.s)*100}%, ${bf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hk(e){return e=(e||0)%360,e<0?e+360:e}function bf(e){return Math.max(0,Math.min(1,e||0))}function By(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Cx=e=>()=>e;function HW(e,t){return function(r){return e+r*t}}function KW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function GW(e){return(e=+e)==1?nP:function(t,r){return r-t?KW(t,r,e):Cx(isNaN(t)?r:t)}}function nP(e,t){var r=t-e;return r?HW(e,r):Cx(isNaN(e)?t:e)}const Kk=(function e(t){var r=GW(t);function n(s,i){var l=r((s=f0(s)).r,(i=f0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=nP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function YW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function JW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=rc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function XW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function xh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ZW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=rc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var h0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wy=new RegExp(h0.source,"g");function e7(e){return function(){return e}}function t7(e){return function(t){return e(t)+""}}function r7(e,t){var r=h0.lastIndex=Wy.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=h0.exec(e))&&(s=Wy.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:xh(n,s)})),r=Wy.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?t7(d[0].x):e7(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function rc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Cx(t):(r==="number"?xh:r==="string"?(n=Cu(t))?(t=n,Kk):r7:t instanceof Cu?Kk:t instanceof Date?XW:JW(t)?YW:Array.isArray(t)?QW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ZW:xh)(e,t)}function Ex(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function n7(e,t){t===void 0&&(t=e,e=rc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function s7(e){return function(){return e}}function wh(e){return+e}var Gk=[0,1];function Dn(e){return e}function m0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:s7(isNaN(t)?NaN:.5)}function i7(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function a7(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=m0(s,n),i=r(l,i)):(n=m0(n,s),i=r(i,l)),function(u){return i(n(u))}}function o7(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=m0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Wu(e,u,1,n)-1;return i[d](s[d](u))}}function qu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hm(){var e=Gk,t=Gk,r=rc,n,s,i,l=Dn,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==Dn&&(l=i7(e[0],e[y-1])),u=y>2?o7:a7,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),xh)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,wh),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=Ex,f()},p.clamp=function(y){return arguments.length?(l=y?!0:Dn,f()):l!==Dn},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function Ax(){return hm()(Dn,Dn)}function l7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ll(e){return e=bh(Math.abs(e)),e?e[1]:NaN}function c7(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function u7(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var d7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eu(e){if(!(t=d7.exec(e)))throw new Error("invalid format: "+e);var t;return new Px({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Eu.prototype=Px.prototype;function Px(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Px.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f7(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var sP;function h7(e,t){var r=bh(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(sP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+bh(e,Math.max(0,t+i-1))[0]}function Yk(e,t){var r=bh(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Jk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:l7,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yk(e*100,t),r:Yk,s:h7,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Qk(e){return e}var Xk=Array.prototype.map,Zk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function m7(e){var t=e.grouping===void 0||e.thousands===void 0?Qk:c7(Xk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Qk:u7(Xk.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Eu(p);var y=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,k=p.width,E=p.comma,N=p.precision,O=p.trim,P=p.type;P==="n"?(E=!0,P="g"):Jk[P]||(N===void 0&&(N=12),O=!0,P="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var T=j==="$"?r:j==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",R=j==="$"?n:/[%p]/.test(P)?l:"",K=Jk[P],z=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function G(W){var q=T,de=R,oe,J,Z;if(P==="c")de=K(W)+de,W="";else{W=+W;var ae=W<0||1/W<0;if(W=isNaN(W)?d:K(Math.abs(W),N),O&&(W=f7(W)),ae&&+W==0&&b!=="+"&&(ae=!1),q=(ae?b==="("?b:u:b==="-"||b==="("?"":b)+q,de=(P==="s"?Zk[8+sP/3]:"")+de+(ae&&b==="("?")":""),z){for(oe=-1,J=W.length;++oe<J;)if(Z=W.charCodeAt(oe),48>Z||Z>57){de=(Z===46?s+W.slice(oe+1):W.slice(oe))+de,W=W.slice(0,oe);break}}}E&&!S&&(W=t(W,1/0));var re=q.length+W.length+de.length,me=re<k?new Array(k-re+1).join(y):"";switch(E&&S&&(W=t(me+W,me.length?k-de.length:1/0),me=""),x){case"<":W=q+W+de+me;break;case"=":W=q+me+W+de;break;case"^":W=me.slice(0,re=me.length>>1)+q+W+de+me.slice(re);break;default:W=me+q+W+de;break}return i(W)}return G.toString=function(){return p+""},G}function f(p,y){var x=m((p=Eu(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Ll(y)/3)))*3,j=Math.pow(10,-b),S=Zk[8+b/3];return function(k){return x(j*k)+S}}return{format:m,formatPrefix:f}}var jf,Ox,iP;p7({thousands:",",grouping:[3],currency:["$",""]});function p7(e){return jf=m7(e),Ox=jf.format,iP=jf.formatPrefix,jf}function g7(e){return Math.max(0,-Ll(Math.abs(e)))}function y7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ll(t)/3)))*3-Ll(Math.abs(e)))}function v7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ll(t)-Ll(e))+1}function aP(e,t,r,n){var s=u0(e,t,r),i;switch(n=Eu(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=y7(s,l))&&(n.precision=i),iP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=v7(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=g7(s))&&(n.precision=i-(n.type==="%")*2);break}}return Ox(n)}function Ua(e){var t=e.domain;return e.ticks=function(r){var n=t();return l0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return aP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=c0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function oP(){var e=Ax();return e.copy=function(){return qu(e,oP())},Fs.apply(e,arguments),Ua(e)}function lP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,wh),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return lP(e).unknown(t)},e=arguments.length?Array.from(e,wh):[0,1],Ua(r)}function cP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function eN(e){return Math.log(e)}function tN(e){return Math.exp(e)}function x7(e){return-Math.log(-e)}function w7(e){return-Math.exp(-e)}function b7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function j7(e){return e===10?b7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function S7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rN(e){return(t,r)=>-e(-t,r)}function Tx(e){const t=e(eN,tN),r=t.domain;let n=10,s,i;function l(){return s=S7(n),i=j7(n),r()[0]<0?(s=rN(s),i=rN(i),e(x7,w7)):e(eN,tN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),b,j;const S=u==null?10:+u;let k=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(b=1;b<n;++b)if(j=y<0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;k.push(j)}}else for(;y<=x;++y)for(b=n-1;b>=1;--b)if(j=y>0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;k.push(j)}k.length*2<S&&(k=l0(m,f,S))}else k=l0(y,x,Math.min(x-y,S)).map(i);return p?k.reverse():k},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Eu(d)).precision==null&&(d.trim=!0),d=Ox(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(cP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function uP(){const e=Tx(hm()).domain([1,10]);return e.copy=()=>qu(e,uP()).base(e.base()),Fs.apply(e,arguments),e}function nN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ix(e){var t=1,r=e(nN(t),sN(t));return r.constant=function(n){return arguments.length?e(nN(t=+n),sN(t)):t},Ua(r)}function dP(){var e=Ix(hm());return e.copy=function(){return qu(e,dP()).constant(e.constant())},Fs.apply(e,arguments)}function iN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function k7(e){return e<0?-e*e:e*e}function Dx(e){var t=e(Dn,Dn),r=1;function n(){return r===1?e(Dn,Dn):r===.5?e(_7,k7):e(iN(r),iN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Ua(t)}function Rx(){var e=Dx(hm());return e.copy=function(){return qu(e,Rx()).exponent(e.exponent())},Fs.apply(e,arguments),e}function N7(){return Rx.apply(null,arguments).exponent(.5)}function aN(e){return Math.sign(e)*e*e}function C7(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fP(){var e=Ax(),t=[0,1],r=!1,n;function s(i){var l=C7(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(aN(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,wh)).map(aN)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return fP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fs.apply(s,arguments),Ua(s)}function hP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=OW(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Wu(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort($a),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return hP().domain(e).range(t).unknown(n)},Fs.apply(i,arguments)}function mP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Wu(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return mP().domain([e,t]).range(s).unknown(i)},Fs.apply(Ua(l),arguments)}function pP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Wu(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return pP().domain(e).range(t).unknown(r)},Fs.apply(s,arguments)}const Vy=new Date,qy=new Date;function Fr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Fr(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(Vy.setTime(+i),qy.setTime(+l),e(Vy),e(qy),Math.floor(r(Vy,qy))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const jh=Fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);jh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):jh);jh.range;const $i=1e3,Ts=$i*60,Mi=Ts*60,Gi=Mi*24,$x=Gi*7,oN=Gi*30,Hy=Gi*365,go=Fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$i)},(e,t)=>(t-e)/$i,e=>e.getUTCSeconds());go.range;const Mx=Fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$i)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getMinutes());Mx.range;const Fx=Fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCMinutes());Fx.range;const Lx=Fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$i-e.getMinutes()*Ts)},(e,t)=>{e.setTime(+e+t*Mi)},(e,t)=>(t-e)/Mi,e=>e.getHours());Lx.range;const zx=Fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Mi)},(e,t)=>(t-e)/Mi,e=>e.getUTCHours());zx.range;const Hu=Fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ts)/Gi,e=>e.getDate()-1);Hu.range;const mm=Fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gi,e=>e.getUTCDate()-1);mm.range;const gP=Fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gi,e=>Math.floor(e/Gi));gP.range;function Ro(e){return Fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ts)/$x)}const pm=Ro(0),Sh=Ro(1),E7=Ro(2),A7=Ro(3),zl=Ro(4),P7=Ro(5),O7=Ro(6);pm.range;Sh.range;E7.range;A7.range;zl.range;P7.range;O7.range;function $o(e){return Fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/$x)}const gm=$o(0),_h=$o(1),T7=$o(2),I7=$o(3),Ul=$o(4),D7=$o(5),R7=$o(6);gm.range;_h.range;T7.range;I7.range;Ul.range;D7.range;R7.range;const Ux=Fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ux.range;const Bx=Fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Bx.range;const Yi=Fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Yi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Yi.range;const Ji=Fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ji.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ji.range;function yP(e,t,r,n,s,i){const l=[[go,1,$i],[go,5,5*$i],[go,15,15*$i],[go,30,30*$i],[i,1,Ts],[i,5,5*Ts],[i,15,15*Ts],[i,30,30*Ts],[s,1,Mi],[s,3,3*Mi],[s,6,6*Mi],[s,12,12*Mi],[n,1,Gi],[n,2,2*Gi],[r,1,$x],[t,1,oN],[t,3,3*oN],[e,1,Hy]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),b=x?x.range(m,+f+1):[];return y?b.reverse():b}function d(m,f,p){const y=Math.abs(f-m)/p,x=Sx(([,,S])=>S).right(l,y);if(x===l.length)return e.every(u0(m/Hy,f/Hy,p));if(x===0)return jh.every(Math.max(u0(m,f,p),1));const[b,j]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return b.every(j)}return[u,d]}const[$7,M7]=yP(Ji,Bx,gm,gP,zx,Fx),[F7,L7]=yP(Yi,Ux,pm,Hu,Lx,Mx);function Ky(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function z7(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=eu(s),f=tu(s),p=eu(i),y=tu(i),x=eu(l),b=tu(l),j=eu(u),S=tu(u),k=eu(d),E=tu(d),N={a:ae,A:re,b:me,B:pe,c:null,d:hN,e:hN,f:c9,g:x9,G:b9,H:a9,I:o9,j:l9,L:vP,m:u9,M:d9,p:I,q:H,Q:gN,s:yN,S:f9,u:h9,U:m9,V:p9,w:g9,W:y9,x:null,X:null,y:v9,Y:w9,Z:j9,"%":pN},O={a:Pe,A:Q,b:ne,B:ue,c:null,d:mN,e:mN,f:N9,g:$9,G:F9,H:S9,I:_9,j:k9,L:wP,m:C9,M:E9,p:ye,q:we,Q:gN,s:yN,S:A9,u:P9,U:O9,V:T9,w:I9,W:D9,x:null,X:null,y:R9,Y:M9,Z:L9,"%":pN},P={a:G,A:W,b:q,B:de,c:oe,d:dN,e:dN,f:r9,g:uN,G:cN,H:fN,I:fN,j:X7,L:t9,m:Q7,M:Z7,p:z,q:J7,Q:s9,s:i9,S:e9,u:q7,U:H7,V:K7,w:V7,W:G7,x:J,X:Z,y:uN,Y:cN,Z:Y7,"%":n9};N.x=T(r,N),N.X=T(n,N),N.c=T(t,N),O.x=T(r,O),O.X=T(n,O),O.c=T(t,O);function T(B,Re){return function(tt){var te=[],Ee=-1,Ue=0,st=B.length,pt,St,_t;for(tt instanceof Date||(tt=new Date(+tt));++Ee<st;)B.charCodeAt(Ee)===37&&(te.push(B.slice(Ue,Ee)),(St=lN[pt=B.charAt(++Ee)])!=null?pt=B.charAt(++Ee):St=pt==="e"?" ":"0",(_t=Re[pt])&&(pt=_t(tt,St)),te.push(pt),Ue=Ee+1);return te.push(B.slice(Ue,Ee)),te.join("")}}function R(B,Re){return function(tt){var te=Zc(1900,void 0,1),Ee=K(te,B,tt+="",0),Ue,st;if(Ee!=tt.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Re&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Ue=Gy(Zc(te.y,0,1)),st=Ue.getUTCDay(),Ue=st>4||st===0?_h.ceil(Ue):_h(Ue),Ue=mm.offset(Ue,(te.V-1)*7),te.y=Ue.getUTCFullYear(),te.m=Ue.getUTCMonth(),te.d=Ue.getUTCDate()+(te.w+6)%7):(Ue=Ky(Zc(te.y,0,1)),st=Ue.getDay(),Ue=st>4||st===0?Sh.ceil(Ue):Sh(Ue),Ue=Hu.offset(Ue,(te.V-1)*7),te.y=Ue.getFullYear(),te.m=Ue.getMonth(),te.d=Ue.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),st="Z"in te?Gy(Zc(te.y,0,1)).getUTCDay():Ky(Zc(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(st+5)%7:te.w+te.U*7-(st+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Gy(te)):Ky(te)}}function K(B,Re,tt,te){for(var Ee=0,Ue=Re.length,st=tt.length,pt,St;Ee<Ue;){if(te>=st)return-1;if(pt=Re.charCodeAt(Ee++),pt===37){if(pt=Re.charAt(Ee++),St=P[pt in lN?Re.charAt(Ee++):pt],!St||(te=St(B,tt,te))<0)return-1}else if(pt!=tt.charCodeAt(te++))return-1}return te}function z(B,Re,tt){var te=m.exec(Re.slice(tt));return te?(B.p=f.get(te[0].toLowerCase()),tt+te[0].length):-1}function G(B,Re,tt){var te=x.exec(Re.slice(tt));return te?(B.w=b.get(te[0].toLowerCase()),tt+te[0].length):-1}function W(B,Re,tt){var te=p.exec(Re.slice(tt));return te?(B.w=y.get(te[0].toLowerCase()),tt+te[0].length):-1}function q(B,Re,tt){var te=k.exec(Re.slice(tt));return te?(B.m=E.get(te[0].toLowerCase()),tt+te[0].length):-1}function de(B,Re,tt){var te=j.exec(Re.slice(tt));return te?(B.m=S.get(te[0].toLowerCase()),tt+te[0].length):-1}function oe(B,Re,tt){return K(B,t,Re,tt)}function J(B,Re,tt){return K(B,r,Re,tt)}function Z(B,Re,tt){return K(B,n,Re,tt)}function ae(B){return l[B.getDay()]}function re(B){return i[B.getDay()]}function me(B){return d[B.getMonth()]}function pe(B){return u[B.getMonth()]}function I(B){return s[+(B.getHours()>=12)]}function H(B){return 1+~~(B.getMonth()/3)}function Pe(B){return l[B.getUTCDay()]}function Q(B){return i[B.getUTCDay()]}function ne(B){return d[B.getUTCMonth()]}function ue(B){return u[B.getUTCMonth()]}function ye(B){return s[+(B.getUTCHours()>=12)]}function we(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var Re=T(B+="",N);return Re.toString=function(){return B},Re},parse:function(B){var Re=R(B+="",!1);return Re.toString=function(){return B},Re},utcFormat:function(B){var Re=T(B+="",O);return Re.toString=function(){return B},Re},utcParse:function(B){var Re=R(B+="",!0);return Re.toString=function(){return B},Re}}}var lN={"-":"",_:" ",0:"0"},sn=/^\s*\d+/,U7=/^%/,B7=/[\\^$*+?|[\]().{}]/g;function It(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function W7(e){return e.replace(B7,"\\$&")}function eu(e){return new RegExp("^(?:"+e.map(W7).join("|")+")","i")}function tu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function V7(e,t,r){var n=sn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function q7(e,t,r){var n=sn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function H7(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function K7(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function G7(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function cN(e,t,r){var n=sn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function uN(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Y7(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function J7(e,t,r){var n=sn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Q7(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function dN(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function X7(e,t,r){var n=sn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function fN(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Z7(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function e9(e,t,r){var n=sn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function t9(e,t,r){var n=sn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function r9(e,t,r){var n=sn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function n9(e,t,r){var n=U7.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function s9(e,t,r){var n=sn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function i9(e,t,r){var n=sn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function hN(e,t){return It(e.getDate(),t,2)}function a9(e,t){return It(e.getHours(),t,2)}function o9(e,t){return It(e.getHours()%12||12,t,2)}function l9(e,t){return It(1+Hu.count(Yi(e),e),t,3)}function vP(e,t){return It(e.getMilliseconds(),t,3)}function c9(e,t){return vP(e,t)+"000"}function u9(e,t){return It(e.getMonth()+1,t,2)}function d9(e,t){return It(e.getMinutes(),t,2)}function f9(e,t){return It(e.getSeconds(),t,2)}function h9(e){var t=e.getDay();return t===0?7:t}function m9(e,t){return It(pm.count(Yi(e)-1,e),t,2)}function xP(e){var t=e.getDay();return t>=4||t===0?zl(e):zl.ceil(e)}function p9(e,t){return e=xP(e),It(zl.count(Yi(e),e)+(Yi(e).getDay()===4),t,2)}function g9(e){return e.getDay()}function y9(e,t){return It(Sh.count(Yi(e)-1,e),t,2)}function v9(e,t){return It(e.getFullYear()%100,t,2)}function x9(e,t){return e=xP(e),It(e.getFullYear()%100,t,2)}function w9(e,t){return It(e.getFullYear()%1e4,t,4)}function b9(e,t){var r=e.getDay();return e=r>=4||r===0?zl(e):zl.ceil(e),It(e.getFullYear()%1e4,t,4)}function j9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function mN(e,t){return It(e.getUTCDate(),t,2)}function S9(e,t){return It(e.getUTCHours(),t,2)}function _9(e,t){return It(e.getUTCHours()%12||12,t,2)}function k9(e,t){return It(1+mm.count(Ji(e),e),t,3)}function wP(e,t){return It(e.getUTCMilliseconds(),t,3)}function N9(e,t){return wP(e,t)+"000"}function C9(e,t){return It(e.getUTCMonth()+1,t,2)}function E9(e,t){return It(e.getUTCMinutes(),t,2)}function A9(e,t){return It(e.getUTCSeconds(),t,2)}function P9(e){var t=e.getUTCDay();return t===0?7:t}function O9(e,t){return It(gm.count(Ji(e)-1,e),t,2)}function bP(e){var t=e.getUTCDay();return t>=4||t===0?Ul(e):Ul.ceil(e)}function T9(e,t){return e=bP(e),It(Ul.count(Ji(e),e)+(Ji(e).getUTCDay()===4),t,2)}function I9(e){return e.getUTCDay()}function D9(e,t){return It(_h.count(Ji(e)-1,e),t,2)}function R9(e,t){return It(e.getUTCFullYear()%100,t,2)}function $9(e,t){return e=bP(e),It(e.getUTCFullYear()%100,t,2)}function M9(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function F9(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ul(e):Ul.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function L9(){return"+0000"}function pN(){return"%"}function gN(e){return+e}function yN(e){return Math.floor(+e/1e3)}var vl,jP,SP;z9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function z9(e){return vl=z7(e),jP=vl.format,vl.parse,SP=vl.utcFormat,vl.utcParse,vl}function U9(e){return new Date(e)}function B9(e){return e instanceof Date?+e:+new Date(+e)}function Wx(e,t,r,n,s,i,l,u,d,m){var f=Ax(),p=f.invert,y=f.domain,x=m(".%L"),b=m(":%S"),j=m("%I:%M"),S=m("%I %p"),k=m("%a %d"),E=m("%b %d"),N=m("%B"),O=m("%Y");function P(T){return(d(T)<T?x:u(T)<T?b:l(T)<T?j:i(T)<T?S:n(T)<T?s(T)<T?k:E:r(T)<T?N:O)(T)}return f.invert=function(T){return new Date(p(T))},f.domain=function(T){return arguments.length?y(Array.from(T,B9)):y().map(U9)},f.ticks=function(T){var R=y();return e(R[0],R[R.length-1],T??10)},f.tickFormat=function(T,R){return R==null?P:m(R)},f.nice=function(T){var R=y();return(!T||typeof T.range!="function")&&(T=t(R[0],R[R.length-1],T??10)),T?y(cP(R,T)):f},f.copy=function(){return qu(f,Wx(e,t,r,n,s,i,l,u,d,m))},f}function W9(){return Fs.apply(Wx(F7,L7,Yi,Ux,pm,Hu,Lx,Mx,go,jP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function V9(){return Fs.apply(Wx($7,M7,Ji,Bx,gm,mm,zx,Fx,go,SP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ym(){var e=0,t=1,r,n,s,i,l=Dn,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,b;return arguments.length?([x,b]=y,l=p(x,b),m):[l(0),l(1)]}}return m.range=f(rc),m.rangeRound=f(Ex),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function Ba(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _P(){var e=Ua(ym()(Dn));return e.copy=function(){return Ba(e,_P())},ra.apply(e,arguments)}function kP(){var e=Tx(ym()).domain([1,10]);return e.copy=function(){return Ba(e,kP()).base(e.base())},ra.apply(e,arguments)}function NP(){var e=Ix(ym());return e.copy=function(){return Ba(e,NP()).constant(e.constant())},ra.apply(e,arguments)}function Vx(){var e=Dx(ym());return e.copy=function(){return Ba(e,Vx()).exponent(e.exponent())},ra.apply(e,arguments)}function q9(){return Vx.apply(null,arguments).exponent(.5)}function CP(){var e=[],t=Dn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Wu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($a),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>PW(e,i/n))},r.copy=function(){return CP(t).domain(e)},ra.apply(r,arguments)}function vm(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=Dn,f,p=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+f(j))-i)*(n*j<n*i?u:d),m(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(m=j,x):m};function b(j){return function(S){var k,E,N;return arguments.length?([k,E,N]=S,m=n7(j,[k,E,N]),x):[m(0),m(.5),m(1)]}}return x.range=b(rc),x.rangeRound=b(Ex),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return f=j,s=j(e),i=j(t),l=j(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function EP(){var e=Ua(vm()(Dn));return e.copy=function(){return Ba(e,EP())},ra.apply(e,arguments)}function AP(){var e=Tx(vm()).domain([.1,1,10]);return e.copy=function(){return Ba(e,AP()).base(e.base())},ra.apply(e,arguments)}function PP(){var e=Ix(vm());return e.copy=function(){return Ba(e,PP()).constant(e.constant())},ra.apply(e,arguments)}function qx(){var e=Dx(vm());return e.copy=function(){return Ba(e,qx()).exponent(e.exponent())},ra.apply(e,arguments)}function H9(){return qx.apply(null,arguments).exponent(.5)}const au=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kx,scaleDiverging:EP,scaleDivergingLog:AP,scaleDivergingPow:qx,scaleDivergingSqrt:H9,scaleDivergingSymlog:PP,scaleIdentity:lP,scaleImplicit:d0,scaleLinear:oP,scaleLog:uP,scaleOrdinal:_x,scalePoint:IW,scalePow:Rx,scaleQuantile:hP,scaleQuantize:mP,scaleRadial:fP,scaleSequential:_P,scaleSequentialLog:kP,scaleSequentialPow:Vx,scaleSequentialQuantile:CP,scaleSequentialSqrt:q9,scaleSequentialSymlog:NP,scaleSqrt:N7,scaleSymlog:dP,scaleThreshold:pP,scaleTime:W9,scaleUtc:V9,tickFormat:aP},Symbol.toStringTag,{value:"Module"}));var Wa=e=>e.chartData,K9=he([Wa],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Hx=(e,t,r,n)=>n?K9(e):Wa(e);function Co(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(mr(t)&&mr(r))return!0}return!1}function vN(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function OP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(mr(r))s=r;else if(typeof r=="function")return;if(mr(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(Co(l))return l}}function G9(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Co(n))return vN(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(ct(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&Z_.test(s)){var d=Z_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(ct(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&ek.test(i)){var f=ek.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(Co(y))return t==null?y:vN(y,t,r)}}}var nc=1e9,Y9={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Gx,Zt=!0,$s="[DecimalError] ",So=$s+"Invalid argument: ",Kx=$s+"Exponent out of range: ",sc=Math.floor,co=Math.pow,J9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ps,en=1e7,Gt=7,TP=9007199254740991,kh=sc(TP/Gt),He={};He.absoluteValue=He.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};He.comparedTo=He.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};He.decimalPlaces=He.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Gt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};He.dividedBy=He.div=function(e){return Ui(this,new this.constructor(e))};He.dividedToIntegerBy=He.idiv=function(e){var t=this,r=t.constructor;return zt(Ui(t,new r(e),0,1),r.precision)};He.equals=He.eq=function(e){return!this.cmp(e)};He.exponent=function(){return Cr(this)};He.greaterThan=He.gt=function(e){return this.cmp(e)>0};He.greaterThanOrEqualTo=He.gte=function(e){return this.cmp(e)>=0};He.isInteger=He.isint=function(){return this.e>this.d.length-2};He.isNegative=He.isneg=function(){return this.s<0};He.isPositive=He.ispos=function(){return this.s>0};He.isZero=function(){return this.s===0};He.lessThan=He.lt=function(e){return this.cmp(e)<0};He.lessThanOrEqualTo=He.lte=function(e){return this.cmp(e)<1};He.logarithm=He.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ps))throw Error($s+"NaN");if(r.s<1)throw Error($s+(r.s?"NaN":"-Infinity"));return r.eq(ps)?new n(0):(Zt=!1,t=Ui(Au(r,i),Au(e,i),i),Zt=!0,zt(t,s))};He.minus=He.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RP(t,e):IP(t,(e.s=-e.s,e))};He.modulo=He.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error($s+"NaN");return r.s?(Zt=!1,t=Ui(r,e,0,1).times(e),Zt=!0,r.minus(t)):zt(new n(r),s)};He.naturalExponential=He.exp=function(){return DP(this)};He.naturalLogarithm=He.ln=function(){return Au(this)};He.negated=He.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};He.plus=He.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IP(t,e):RP(t,(e.s=-e.s,e))};He.precision=He.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(So+e);if(t=Cr(s)+1,n=s.d.length-1,r=n*Gt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};He.squareRoot=He.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error($s+"NaN")}for(e=Cr(u),Zt=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=fi(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=sc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(Ui(u,i,l+2)).times(.5),fi(i.d).slice(0,l)===(t=fi(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(zt(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Zt=!0,zt(n,r)};He.times=He.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%en|0,t=u/en|0;i[s]=(i[s]+t)%en|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Zt?zt(e,p.precision):e};He.toDecimalPlaces=He.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(yi(e,0,nc),t===void 0?t=n.rounding:yi(t,0,8),zt(r,e+Cr(r)+1,t))};He.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Eo(n,!0):(yi(e,0,nc),t===void 0?t=s.rounding:yi(t,0,8),n=zt(new s(n),e+1,t),r=Eo(n,!0,e+1)),r};He.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Eo(s):(yi(e,0,nc),t===void 0?t=i.rounding:yi(t,0,8),n=zt(new i(s),e+Cr(s)+1,t),r=Eo(n.abs(),!1,e+Cr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};He.toInteger=He.toint=function(){var e=this,t=e.constructor;return zt(new t(e),Cr(e)+1,t.rounding)};He.toNumber=function(){return+this};He.toPower=He.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(ps);if(u=new d(u),!u.s){if(e.s<1)throw Error($s+"Infinity");return u}if(u.eq(ps))return u;if(n=d.precision,e.eq(ps))return zt(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=TP){for(s=new d(ps),t=Math.ceil(n/Gt+4),Zt=!1;r%2&&(s=s.times(u),wN(s.d,t)),r=sc(r/2),r!==0;)u=u.times(u),wN(u.d,t);return Zt=!0,e.s<0?new d(ps).div(s):zt(s,n)}}else if(i<0)throw Error($s+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Zt=!1,s=e.times(Au(u,n+m)),Zt=!0,s=DP(s),s.s=i,s};He.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Cr(s),n=Eo(s,r<=i.toExpNeg||r>=i.toExpPos)):(yi(e,1,nc),t===void 0?t=i.rounding:yi(t,0,8),s=zt(new i(s),e,t),r=Cr(s),n=Eo(s,e<=r||r<=i.toExpNeg,e)),n};He.toSignificantDigits=He.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(yi(e,1,nc),t===void 0?t=n.rounding:yi(t,0,8)),zt(new n(r),e,t)};He.toString=He.valueOf=He.val=He.toJSON=He[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Cr(e),r=e.constructor;return Eo(e,t<=r.toExpNeg||t>=r.toExpPos)};function IP(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Zt?zt(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Gt),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/en|0,d[i]%=en;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Zt?zt(t,p):t}function yi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(So+e)}function fi(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Gt-n.length,r&&(i+=Pa(r)),i+=n;l=e[t],n=l+"",r=Gt-n.length,r&&(i+=Pa(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ui=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%en|0,l=i/en|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*en+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,b,j,S,k,E,N,O,P,T,R,K,z=n.constructor,G=n.s==s.s?1:-1,W=n.d,q=s.d;if(!n.s)return new z(n);if(!s.s)throw Error($s+"Division by zero");for(d=n.e-s.e,R=q.length,P=W.length,x=new z(G),b=x.d=[],m=0;q[m]==(W[m]||0);)++m;if(q[m]>(W[m]||0)&&--d,i==null?E=i=z.precision:l?E=i+(Cr(n)-Cr(s))+1:E=i,E<0)return new z(0);if(E=E/Gt+2|0,m=0,R==1)for(f=0,q=q[0],E++;(m<P||f)&&E--;m++)N=f*en+(W[m]||0),b[m]=N/q|0,f=N%q|0;else{for(f=en/(q[0]+1)|0,f>1&&(q=e(q,f),W=e(W,f),R=q.length,P=W.length),O=R,j=W.slice(0,R),S=j.length;S<R;)j[S++]=0;K=q.slice(),K.unshift(0),T=q[0],q[1]>=en/2&&++T;do f=0,u=t(q,j,R,S),u<0?(k=j[0],R!=S&&(k=k*en+(j[1]||0)),f=k/T|0,f>1?(f>=en&&(f=en-1),p=e(q,f),y=p.length,S=j.length,u=t(p,j,y,S),u==1&&(f--,r(p,R<y?K:q,y))):(f==0&&(u=f=1),p=q.slice()),y=p.length,y<S&&p.unshift(0),r(j,p,S),u==-1&&(S=j.length,u=t(q,j,R,S),u<1&&(f++,r(j,R<S?K:q,S))),S=j.length):u===0&&(f++,j=[0]),b[m++]=f,u&&j[0]?j[S++]=W[O]||0:(j=[W[O]],S=1);while((O++<P||j[0]!==void 0)&&E--)}return b[0]||b.shift(),x.e=d,zt(x,l?i+Cr(x)+1:i)}})();function DP(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(Cr(e)>16)throw Error(Kx+Cr(e));if(!e.s)return new f(ps);for(Zt=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(co(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(ps),f.precision=u;;){if(s=zt(s.times(e),u),r=r.times(++d),l=i.plus(Ui(s,r,u)),fi(l.d).slice(0,u)===fi(i.d).slice(0,u)){for(;m--;)i=zt(i.times(i),u);return f.precision=p,t==null?(Zt=!0,zt(i,p)):i}i=l}}function Cr(e){for(var t=e.e*Gt,r=e.d[0];r>=10;r/=10)t++;return t}function Yy(e,t,r){if(t>e.LN10.sd())throw Zt=!0,r&&(e.precision=r),Error($s+"LN10 precision limit exceeded");return zt(new e(e.LN10),t)}function Pa(e){for(var t="";e--;)t+="0";return t}function Au(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error($s+(x.s?"NaN":"-Infinity"));if(x.eq(ps))return new j(0);if(t==null?(Zt=!1,m=S):m=t,x.eq(10))return t==null&&(Zt=!0),Yy(j,m);if(m+=y,j.precision=m,r=fi(b),n=r.charAt(0),i=Cr(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=fi(x.d),n=r.charAt(0),p++;i=Cr(x),n>1?(x=new j("0."+r),i++):x=new j(n+"."+r.slice(1))}else return d=Yy(j,m+2,S).times(i+""),x=Au(new j(n+"."+r.slice(1)),m-y).plus(d),j.precision=S,t==null?(Zt=!0,zt(x,S)):x;for(u=l=x=Ui(x.minus(ps),x.plus(ps),m),f=zt(x.times(x),m),s=3;;){if(l=zt(l.times(f),m),d=u.plus(Ui(l,new j(s),m)),fi(d.d).slice(0,m)===fi(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(Yy(j,m+2,S).times(i+""))),u=Ui(u,new j(p),m),j.precision=S,t==null?(Zt=!0,zt(u,S)):u;u=d,s+=2}}function xN(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=sc(r/Gt),e.d=[],n=(r+1)%Gt,r<0&&(n+=Gt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Gt;n<s;)e.d.push(+t.slice(n,n+=Gt));t=t.slice(n),n=Gt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Zt&&(e.e>kh||e.e<-kh))throw Error(Kx+r)}else e.s=0,e.e=0,e.d=[0];return e}function zt(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Gt,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Gt),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Gt,s=n-Gt+l}if(r!==void 0&&(i=co(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/co(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=Cr(e),p.length=1,t=t-i-1,p[0]=co(10,(Gt-t%Gt)%Gt),e.e=sc(-t/Gt)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=co(10,Gt-n),p[f]=s>0?(m/co(10,l-s)%co(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==en&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=en)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Zt&&(e.e>kh||e.e<-kh))throw Error(Kx+Cr(e));return e}function RP(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Zt?zt(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Gt),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=en-1;--d[i],d[s]+=en}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Zt?zt(t,x):t):new y(0)}function Eo(e,t,r){var n,s=Cr(e),i=fi(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Pa(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Pa(-s-1)+i,r&&(n=r-l)>0&&(i+=Pa(n))):s>=l?(i+=Pa(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Pa(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Pa(n))),e.s<0?"-"+i:i}function wN(e,t){if(e.length>t)return e.length=t,!0}function $P(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(So+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return xN(l,i.toString())}else if(typeof i!="string")throw Error(So+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,J9.test(i))xN(l,i);else throw Error(So+i)}if(s.prototype=He,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$P,s.config=s.set=Q9,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Q9(e){if(!e||typeof e!="object")throw Error($s+"Object expected");var t,r,n,s=["precision",1,nc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(sc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(So+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(So+r+": "+n);return this}var Gx=$P(Y9);ps=new Gx(1);const $t=Gx;var X9=e=>e,MP={},FP=e=>e===MP,bN=e=>function t(){return arguments.length===0||arguments.length===1&&FP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},LP=(e,t)=>e===1?t:bN(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==MP).length;return i>=e?t(...n):LP(e-i,bN(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>FP(f)?u.shift():f);return t(...m,...u)}))}),xm=e=>LP(e.length,e),p0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Z9=xm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),eV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return X9;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},g0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),zP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function UP(e){var t;return e===0?t=1:t=Math.floor(new $t(e).abs().log(10).toNumber())+1,t}function BP(e,t,r){for(var n=new $t(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}xm((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});xm((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});xm((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var WP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},VP=(e,t,r)=>{if(e.lte(0))return new $t(0);var n=UP(e.toNumber()),s=new $t(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new $t(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new $t(d.toNumber()):new $t(Math.ceil(d.toNumber()))},tV=(e,t,r)=>{var n=new $t(1),s=new $t(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new $t(10).pow(UP(e)-1),s=new $t(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new $t(Math.floor(e)))}else e===0?s=new $t(Math.floor((t-1)/2)):r||(s=new $t(Math.floor(e)));var l=Math.floor((t-1)/2),u=eV(Z9(d=>s.add(new $t(d-l).mul(n)).toNumber()),p0);return u(0,t)},qP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new $t(0),tickMin:new $t(0),tickMax:new $t(0)};var l=VP(new $t(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new $t(0):(u=new $t(t).add(r).div(2),u=u.sub(new $t(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new $t(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?qP(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new $t(d).mul(l)),tickMax:u.add(new $t(m).mul(l))})};function rV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=WP([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...p0(0,n-1).map(()=>1/0)]:[...p0(0,n-1).map(()=>-1/0),u];return t>r?g0(d):d}if(l===u)return tV(l,n,s);var{step:m,tickMin:f,tickMax:p}=qP(l,u,i,s,0),y=BP(f,p.add(new $t(.1).mul(m)),m);return t>r?g0(y):y}function nV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=WP([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=VP(new $t(l).sub(i).div(u-1),s,0),m=[...BP(new $t(i),new $t(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?g0(m):m}var sV=zP(rV),iV=zP(nV),HP=e=>e.rootProps.maxBarSize,aV=e=>e.rootProps.barGap,KP=e=>e.rootProps.barCategoryGap,oV=e=>e.rootProps.barSize,wm=e=>e.rootProps.stackOffset,Yx=e=>e.options.chartName,Jx=e=>e.rootProps.syncId,GP=e=>e.rootProps.syncMethod,Qx=e=>e.options.eventEmitter,Xn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ii={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},lV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ii.angleAxisId,includeHidden:!1,name:void 0,reversed:Ii.reversed,scale:Ii.scale,tick:Ii.tick,tickCount:void 0,ticks:void 0,type:Ii.type,unit:void 0},cV={allowDataOverflow:fs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fs.scale,tick:fs.tick,tickCount:fs.tickCount,ticks:void 0,type:fs.type,unit:void 0},uV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ii.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ii.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ii.scale,tick:Ii.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},dV={allowDataOverflow:fs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fs.scale,tick:fs.tick,tickCount:fs.tickCount,ticks:void 0,type:"category",unit:void 0},Xx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?uV:lV,Zx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?dV:cV,jm=e=>e.polarOptions,ew=he([ea,ta,nn],sW),YP=he([jm,ew],(e,t)=>{if(e!=null)return ti(e.innerRadius,t,0)}),JP=he([jm,ew],(e,t)=>{if(e!=null)return ti(e.outerRadius,t,t*.8)}),fV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},QP=he([jm],fV);he([Xx,QP],bm);var XP=he([ew,YP,JP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});he([Zx,XP],bm);var ZP=he([Mt,jm,YP,JP,ea,ta],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:ti(l,s,s/2),cy:ti(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Lr=(e,t)=>t,Sm=(e,t,r)=>r;function tw(e){return e==null?void 0:e.id}function eO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=tw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(Rn(p,i,null)),b=Rn(p,u.dataKey,0),j;l.has(x)?j=l.get(x):j={},Object.assign(j,{[f]:b}),l.set(x,j)})}}),Array.from(l.values())}function _m(e){return e.stackId!=null&&e.dataKey!=null}var km=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Nm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function hV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var zr=e=>{var t=Mt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ic=e=>e.tooltip.settings.axisId;function jN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jN(Object(r),!0).forEach(function(n){mV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mV(e,t,r){return(t=pV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pV(e){var t=gV(e,"string");return typeof t=="symbol"?t:t+""}function gV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y0=[0,"auto"],ls={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},tO=(e,t)=>e.cartesianAxis.xAxis[t],na=(e,t)=>{var r=tO(e,t);return r??ls},cs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:y0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Bu},rO=(e,t)=>e.cartesianAxis.yAxis[t],sa=(e,t)=>{var r=rO(e,t);return r??cs},yV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},rw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??yV},$n=(e,t,r)=>{switch(t){case"xAxis":return na(e,r);case"yAxis":return sa(e,r);case"zAxis":return rw(e,r);case"angleAxis":return Xx(e,r);case"radiusAxis":return Zx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vV=(e,t,r)=>{switch(t){case"xAxis":return na(e,r);case"yAxis":return sa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ku=(e,t,r)=>{switch(t){case"xAxis":return na(e,r);case"yAxis":return sa(e,r);case"angleAxis":return Xx(e,r);case"radiusAxis":return Zx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},nO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function sO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var nw=e=>e.graphicalItems.cartesianItems,xV=he([Lr,Sm],sO),iO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Gu=he([nw,$n,xV],iO,{memoizeOptions:{resultEqualityCheck:Nm}}),aO=he([Gu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_m)),oO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),wV=he([Gu],oO),lO=e=>e.map(t=>t.data).filter(Boolean).flat(1),bV=he([Gu],lO,{memoizeOptions:{resultEqualityCheck:Nm}}),cO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},sw=he([bV,Hx],cO),uO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Rn(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Rn(s,n)}))):e.map(n=>({value:n})),Cm=he([sw,$n,Gu],uO);function dO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Rf(e){if(gi(e)||e instanceof Date){var t=Number(e);if(mr(t))return t}}function SN(e){if(Array.isArray(e)){var t=[Rf(e[0]),Rf(e[1])];return Co(t)?t:void 0}var r=Rf(e);if(r!=null)return[r,r]}function Qi(e){return e.map(Rf).filter(BL)}function jV(e,t,r){return!r||typeof t!="number"||pi(t)?[]:r.length?Qi(r.flatMap(n=>{var s=Rn(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!mr(i)||!mr(l)))return[t-i,t+l]})):[]}var Ur=e=>{var t=zr(e),r=ic(e);return Ku(e,t,r)},fO=he([Ur],e=>e==null?void 0:e.dataKey),SV=he([aO,Hx,Ur],eO),hO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(tw);return[l,{stackedData:sB(e,d,r),graphicalItems:u}]}))},v0=he([SV,aO,wm],hO),mO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=cB(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},_V=he([$n],e=>e.allowDataOverflow),iw=e=>{var t;if(e==null||!("domain"in e))return y0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Qi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:y0},pO=he([$n],iw),gO=he([pO,_V],OP),kV=he([v0,Wa,Lr,gO],mO,{memoizeOptions:{resultEqualityCheck:km}}),aw=e=>e.errorBars,NV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>dO(r,n)),Ch=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},yO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(k=>dO(s,k)),y=Rn(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=jV(u,y,p);if(x.length>=2){var b=Math.min(...x),j=Math.max(...x);(i==null||b<i)&&(i=b),(l==null||j>l)&&(l=j)}var S=SN(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=SN(Rn(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),mr(i)&&mr(l))return[i,l]},CV=he([sw,$n,wV,aw,Lr],yO,{memoizeOptions:{resultEqualityCheck:km}});function EV(e){var{value:t}=e;if(gi(t)||t instanceof Date)return t}var AV=(e,t,r)=>{var n=e.map(EV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&WE(n))?JA(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},vO=e=>e.referenceElements.dots,ac=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),PV=he([vO,Lr,Sm],ac),xO=e=>e.referenceElements.areas,OV=he([xO,Lr,Sm],ac),wO=e=>e.referenceElements.lines,TV=he([wO,Lr,Sm],ac),bO=(e,t)=>{var r=Qi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},IV=he(PV,Lr,bO),jO=(e,t)=>{var r=Qi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},DV=he([OV,Lr],jO);function RV(e){var t;if(e.x!=null)return Qi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Qi(r)}function $V(e){var t;if(e.y!=null)return Qi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Qi(r)}var SO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?RV(n):$V(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MV=he([TV,Lr],SO),FV=he(IV,MV,DV,(e,t,r)=>Ch(e,r,t)),_O=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Ch(n,i,s):Ch(i,s);return G9(t,m,e.allowDataOverflow)},LV=he([$n,pO,gO,kV,CV,FV,Mt,Lr],_O,{memoizeOptions:{resultEqualityCheck:km}}),zV=[0,1],kO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Do(t,i);if(m&&u==null){var f;return JA(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?AV(n,e,m):s==="expand"?zV:l}},ow=he([$n,Mt,sw,Cm,wm,Lr,LV],kO),NO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Lu(i));return u in au?u:"point"}}},Yu=he([$n,Mt,nO,Yx,Lr],NO);function UV(e){if(e!=null){if(e in au)return au[e]();var t="scale".concat(Lu(e));if(t in au)return au[t]()}}function lw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=UV(t);if(s!=null){var i=s.domain(r).range(n);return ZU(i),i}}}var CO=(e,t,r)=>{var n=iw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Co(e))return sV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Co(e))return iV(e,t.tickCount,t.allowDecimals)}},cw=he([ow,Ku,Yu],CO),EO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Co(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},BV=he([$n,ow,cw,Lr],EO),WV=he(Cm,$n,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Qi(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),AO=he(WV,Mt,KP,nn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!mr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=ti(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),VV=(e,t)=>{var r=na(e,t);return r==null||typeof r.padding!="string"?0:AO(e,"xAxis",t,r.padding)},qV=(e,t)=>{var r=sa(e,t);return r==null||typeof r.padding!="string"?0:AO(e,"yAxis",t,r.padding)},HV=he(na,VV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),KV=he(sa,qV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),GV=he([nn,HV,cm,lm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),YV=he([nn,Mt,KV,cm,lm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ju=(e,t,r,n)=>{var s;switch(t){case"xAxis":return GV(e,r,n);case"yAxis":return YV(e,r,n);case"zAxis":return(s=rw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return QP(e);case"radiusAxis":return XP(e,r);default:return}},PO=he([$n,Ju],bm),oc=he([$n,Yu,BV,PO],lw);he([Gu,aw,Lr],NV);function OO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Em=(e,t)=>t,Am=(e,t,r)=>r,JV=he(am,Em,Am,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(OO)),QV=he(om,Em,Am,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(OO)),TO=(e,t)=>({width:e.width,height:t.height}),XV=(e,t)=>{var r=typeof t.width=="number"?t.width:Bu;return{width:r,height:e.height}},IO=he(nn,na,TO),ZV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},eq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},tq=he(ta,nn,JV,Em,Am,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=TO(t,u);l==null&&(l=ZV(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),rq=he(ea,nn,QV,Em,Am,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=XV(t,u);l==null&&(l=eq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),nq=(e,t)=>{var r=na(e,t);if(r!=null)return tq(e,r.orientation,r.mirror)},sq=he([nn,na,nq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),iq=(e,t)=>{var r=sa(e,t);if(r!=null)return rq(e,r.orientation,r.mirror)},aq=he([nn,sa,iq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),DO=he(nn,sa,(e,t)=>{var r=typeof t.width=="number"?t.width:Bu;return{width:r,height:e.height}}),_N=(e,t,r)=>{switch(t){case"xAxis":return IO(e,r).width;case"yAxis":return DO(e,r).height;default:return}},RO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Do(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&WE(d))return d}},uw=he([Mt,Cm,$n,Lr],RO),$O=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Do(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},dw=he([Mt,Cm,Ku,Lr],$O);he([Mt,vV,Yu,oc,uw,dw,Ju,cw,Lr],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Do(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var oq=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Do(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/x:0;b=d==="angleAxis"&&i!=null&&i.length>=2?ys(i[0]-i[1])*2*b:b;var j=p||s;if(j){var S=j.map((k,E)=>{var N=l?l.indexOf(k):k;return{index:E,coordinate:n(N)+b,value:k,offset:b}});return S.filter(k=>mr(k.coordinate))}return m&&u?u.map((k,E)=>({coordinate:n(k)+b,value:k,index:E,offset:b})).filter(k=>mr(k.coordinate)):n.ticks?n.ticks(y).map(k=>({coordinate:n(k)+b,value:k,offset:b})):n.domain().map((k,E)=>({coordinate:n(k)+b,value:l?l[k]:k,index:E,offset:b}))}},MO=he([Mt,Ku,Yu,oc,cw,Ju,uw,dw,Lr],oq),lq=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Do(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?ys(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Bl=he([Mt,Ku,oc,Ju,uw,dw,Lr],lq),Wl=he($n,oc,(e,t)=>{if(!(e==null||t==null))return Nh(Nh({},e),{},{scale:t})}),cq=he([$n,Yu,ow,PO],lw);he((e,t,r)=>rw(e,r),cq,(e,t)=>{if(!(e==null||t==null))return Nh(Nh({},e),{},{scale:t})});var uq=he([Mt,am,om],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),FO=e=>e.options.defaultTooltipEventType,LO=e=>e.options.validateTooltipEventTypes;function zO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function fw(e,t){var r=FO(e),n=LO(e);return zO(t,r,n)}function dq(e){return it(t=>fw(t,e))}var UO=(e,t)=>{var r,n=Number(t);if(!(pi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},fq=e=>e.tooltip.settings,Da={active:!1,index:null,dataKey:void 0,coordinate:void 0},hq={itemInteraction:{click:Da,hover:Da},axisInteraction:{click:Da,hover:Da},keyboardInteraction:Da,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},BO=Zn({name:"tooltip",initialState:hq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:$r()},removeTooltipEntrySettings:{reducer(e,t){var r=zi(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:$r()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:mq,removeTooltipEntrySettings:pq,setTooltipSettingsState:gq,setActiveMouseOverItemIndex:WO,mouseLeaveItem:yq,mouseLeaveChart:VO,setActiveClickItemIndex:vq,setMouseOverAxisIndex:qO,setMouseClickAxisIndex:xq,setSyncInteraction:x0,setKeyboardInteraction:w0}=BO.actions,wq=BO.reducer;function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){bq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bq(e,t,r){return(t=jq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jq(e){var t=Sq(e,"string");return typeof t=="symbol"?t:t+""}function Sq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _q(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function kq(e){return e.index!=null}var HO=(e,t,r,n)=>{if(t==null)return Da;var s=_q(e,t,r);if(s==null)return Da;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(kq(s)){if(i)return Sf(Sf({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Sf(Sf({},Da),{},{coordinate:s.coordinate})},hw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!mr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},KO=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},GO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},Qu=e=>e.options.tooltipPayloadSearcher,lc=e=>e.tooltip;function NN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(r),!0).forEach(function(n){Nq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nq(e,t,r){return(t=Cq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cq(e){var t=Eq(e,"string");return typeof t=="symbol"?t:t+""}function Eq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aq(e,t){return e??t}var YO=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var b,{dataDefinedOnItem:j,settings:S}=x,k=Aq(j,u),E=Array.isArray(k)?TA(k,m,f):k,N=(b=S==null?void 0:S.dataKey)!==null&&b!==void 0?b:n,O=S==null?void 0:S.nameKey,P;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?P=UL(E,n,s):P=i(E,t,d,O),Array.isArray(P))P.forEach(R=>{var K=CN(CN({},S),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(tk({tooltipEntrySettings:K,dataKey:R.dataKey,payload:R.payload,value:Rn(R.payload,R.dataKey),name:R.name}))});else{var T;y.push(tk({tooltipEntrySettings:S,dataKey:N,payload:P,value:Rn(P,N),name:(T=Rn(P,O))!==null&&T!==void 0?T:S==null?void 0:S.name}))}return y},p)}},mw=he([Ur,Mt,nO,Yx,zr],NO),Pq=he([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Oq=he([zr,ic],sO),Xu=he([Pq,Ur,Oq],iO,{memoizeOptions:{resultEqualityCheck:Nm}}),Tq=he([Xu],e=>e.filter(_m)),Iq=he([Xu],lO,{memoizeOptions:{resultEqualityCheck:Nm}}),cc=he([Iq,Wa],cO),Dq=he([Tq,Wa,Ur],eO),pw=he([cc,Ur,Xu],uO),JO=he([Ur],iw),Rq=he([Ur],e=>e.allowDataOverflow),QO=he([JO,Rq],OP),$q=he([Xu],e=>e.filter(_m)),Mq=he([Dq,$q,wm],hO),Fq=he([Mq,Wa,zr,QO],mO),Lq=he([Xu],oO),zq=he([cc,Ur,Lq,aw,zr],yO,{memoizeOptions:{resultEqualityCheck:km}}),Uq=he([vO,zr,ic],ac),Bq=he([Uq,zr],bO),Wq=he([xO,zr,ic],ac),Vq=he([Wq,zr],jO),qq=he([wO,zr,ic],ac),Hq=he([qq,zr],SO),Kq=he([Bq,Hq,Vq],Ch),Gq=he([Ur,JO,QO,Fq,zq,Kq,Mt,zr],_O),XO=he([Ur,Mt,cc,pw,wm,zr,Gq],kO),Yq=he([XO,Ur,mw],CO),Jq=he([Ur,XO,Yq,zr],EO),ZO=e=>{var t=zr(e),r=ic(e),n=!1;return Ju(e,t,r,n)},eT=he([Ur,ZO],bm),tT=he([Ur,mw,Jq,eT],lw),Qq=he([Mt,pw,Ur,zr],RO),Xq=he([Mt,pw,Ur,zr],$O),Zq=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Do(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?ys(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},ia=he([Mt,Ur,mw,tT,ZO,Qq,Xq,zr],Zq),gw=he([FO,LO,fq],(e,t,r)=>zO(r.shared,e,t)),rT=e=>e.tooltip.settings.trigger,yw=e=>e.tooltip.settings.defaultIndex,Pm=he([lc,gw,rT,yw],HO),Vl=he([Pm,cc],hw),nT=he([ia,Vl],UO),sT=he([Pm],e=>{if(e)return e.dataKey}),iT=he([lc,gw,rT,yw],GO),eH=he([ea,ta,Mt,nn,ia,yw,iT,Qu],KO),tH=he([Pm,eH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),rH=he([Pm],e=>e.active),nH=he([iT,Vl,Wa,fO,nT,Qu,gw],YO);he([nH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(r),!0).forEach(function(n){sH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sH(e,t,r){return(t=iH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oH=()=>it(Ur),lH=()=>{var e=oH(),t=it(ia),r=it(tT);return uh(!e||!r?void 0:AN(AN({},e),{},{scale:r}),t)};function PN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(r),!0).forEach(function(n){cH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cH(e,t,r){return(t=uH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},hH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return xl(xl(xl({},n),vn(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return xl(xl(xl({},n),vn(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var aT=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(ys(f-m)!==ys(p-f)){var x=[];if(ys(p-f)===ys(s[1]-s[0])){y=p;var b=f+s[1]-s[0];x[0]=Math.min(b,(b+m)/2),x[1]=Math.max(b,(b+m)/2)}else{y=m;var j=p+s[1]-s[0];x[0]=Math.min(f,(j+f)/2),x[1]=Math.max(f,(j+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var k=Math.min(m,p),E=Math.max(m,p);if(e>(k+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var N=0;N<u;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},pH=()=>it(Yx),vw=(e,t)=>t,oT=(e,t,r)=>r,xw=(e,t,r,n)=>n,gH=he(ia,e=>em(e,t=>t.coordinate)),ww=he([lc,vw,oT,xw],HO),lT=he([ww,cc],hw),yH=(e,t,r)=>{if(t!=null){var n=lc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},cT=he([lc,vw,oT,xw],GO),Eh=he([ea,ta,Mt,nn,ia,xw,cT,Qu],KO),vH=he([ww,Eh],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),uT=he([ia,lT],UO),xH=he([cT,lT,Wa,fO,uT,Qu,vw],YO),wH=he([ww],e=>({isActive:e.active,activeIndex:e.index})),bH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&mH(e,l)){var u=uB(e,t),d=aT(u,i,s,r,n),m=fH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},jH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=cW(e,r);if(u){var d=dB(u,t),m=aT(d,l,i,n,s),f=hH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},SH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?bH(e,t,n,s,i,l,u):jH(e,t,r,n,s,i,l)},_H=he(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),kH=he(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Xn)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:hV}});function ON(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ON(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AH={},PH={zIndexMap:Object.values(Xn).reduce((e,t)=>TN(TN({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),AH)},OH=new Set(Object.values(Xn));function TH(e){return OH.has(e)}var dT=Zn({name:"zIndex",initialState:PH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:$r()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!TH(r)&&delete e.zIndexMap[r])},prepare:$r()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:$r()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:$r()}}}),{registerZIndexPortal:IH,unregisterZIndexPortal:DH,registerZIndexPortalId:RH,unregisterZIndexPortalId:$H}=dT.actions,MH=dT.reducer;function Va(e){var{zIndex:t,children:r}=e,n=KB(),s=n&&t!==void 0&&t!==0,i=js(),l=pr();v.useLayoutEffect(()=>s?(l(IH({zIndex:t})),()=>{l(DH({zIndex:t}))}):ec,[l,t,s]);var u=it(m=>_H(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?oC.createPortal(r,d):null}function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b0.apply(null,arguments)}function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(n){FH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FH(e,t,r){return(t=LH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=zH(e,"string");return typeof t=="symbol"?t:t+""}function zH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function BH(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var b,j,S;if(f==="ScatterChart")b=p,j=_8,S=Xn.cursorLine;else if(f==="BarChart")b=k8(u,p,i,l),j=HA,S=Xn.cursorRectangle;else if(u==="radial"&&HE(p)){var{cx:k,cy:E,radius:N,startAngle:O,endAngle:P}=KA(p);b={cx:k,cy:E,startAngle:O,endAngle:P,innerRadius:N,outerRadius:N},j=YA,S=Xn.cursorLine}else b={points:hW(u,p,i)},j=UA,S=Xn.cursorLine;var T=typeof d=="object"&&"className"in d?d.className:void 0,R=_f(_f(_f(_f({stroke:"#ccc",pointerEvents:"none"},i),b),sx(d)),{},{payload:y,payloadIndex:x,className:Jt("recharts-tooltip-cursor",T)});return v.createElement(Va,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(UH,{cursor:d,cursorComp:j,cursorProps:R}))}function WH(e){var t=lH(),r=VB(),n=dm(),s=pH();return t==null||r==null||n==null||s==null?null:v.createElement(BH,b0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var fT=v.createContext(null),VH=()=>v.useContext(fT),Jy={exports:{}},DN;function qH(){return DN||(DN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),b=r?r+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],x]:d._events[b].push(x):(d._events[b]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,b=new Array(x);y<x;y++)b[y]=p[y].fn;return b},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,b){var j=r?r+m:m;if(!this._events[j])return!1;var S=this._events[j],k=arguments.length,E,N;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),k){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,b),!0}for(N=1,E=new Array(k-1);N<k;N++)E[N-1]=arguments[N];S.fn.apply(S.context,E)}else{var O=S.length,P;for(N=0;N<O;N++)switch(S[N].once&&this.removeListener(m,S[N].fn,void 0,!0),k){case 1:S[N].fn.call(S[N].context);break;case 2:S[N].fn.call(S[N].context,f);break;case 3:S[N].fn.call(S[N].context,f,p);break;case 4:S[N].fn.call(S[N].context,f,p,y);break;default:if(!E)for(P=1,E=new Array(k-1);P<k;P++)E[P-1]=arguments[P];S[N].fn.apply(S[N].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!y||b.once)&&(!p||b.context===p)&&l(this,x);else{for(var j=0,S=[],k=b.length;j<k;j++)(b[j].fn!==f||y&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Jy)),Jy.exports}var HH=qH();const KH=ri(HH);var Pu=new KH,j0="recharts.syncEvent.tooltip",RN="recharts.syncEvent.brush";function GH(e,t){if(t){var r=Number.parseInt(t,10);if(!pi(r))return e==null?void 0:e[r]}}var YH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},hT=Zn({name:"options",initialState:YH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),JH=hT.reducer,{createEventEmitter:QH}=hT.actions;function XH(e){return e.tooltip.syncInteraction}var ZH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},mT=Zn({name:"chartData",initialState:ZH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:$N,setDataStartEndIndexes:eK,setComputedData:JZ}=mT.actions,tK=mT.reducer,rK=["x","y"];function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return(t=sK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sK(e){var t=iK(e,"string");return typeof t=="symbol"?t:t+""}function iK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aK(e,t){if(e==null)return{};var r,n,s=oK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lK(){var e=it(Jx),t=it(Qx),r=pr(),n=it(GP),s=it(ia),i=dm(),l=um(),u=it(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return ec;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:b,y:j}=x,S=aK(x,rK),{x:k,y:E,width:N,height:O}=f.payload.sourceViewBox,P=wl(wl({},S),{},{x:l.x+(N?(b-k)/N:0)*l.width,y:l.y+(O?(j-E)/O:0)*l.height});r(wl(wl({},f),{},{payload:wl(wl({},f.payload),{},{coordinate:P})}))}else r(f);return}if(s!=null){var T;if(typeof n=="function"){var R={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},K=n(s,R);T=s[K]}else n==="value"&&(T=s.find(Z=>String(Z.value)===f.payload.label));var{coordinate:z}=f.payload;if(T==null||f.payload.active===!1||z==null||l==null){r(x0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:G,y:W}=z,q=Math.min(G,l.x+l.width),de=Math.min(W,l.y+l.height),oe={x:i==="horizontal"?T.coordinate:q,y:i==="horizontal"?de:T.coordinate},J=x0({active:f.payload.active,coordinate:oe,dataKey:f.payload.dataKey,index:String(T.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(J)}}};return Pu.on(j0,d),()=>{Pu.off(j0,d)}},[u,r,t,e,n,s,i,l])}function cK(){var e=it(Jx),t=it(Qx),r=pr();v.useEffect(()=>{if(e==null)return ec;var n=(s,i,l)=>{t!==l&&e===s&&r(eK(i))};return Pu.on(RN,n),()=>{Pu.off(RN,n)}},[r,t,e])}function uK(){var e=pr();v.useEffect(()=>{e(QH())},[e]),lK(),cK()}function dK(e,t,r,n,s,i){var l=it(x=>yH(x,e,t)),u=it(Qx),d=it(Jx),m=it(GP),f=it(XH),p=f==null?void 0:f.active,y=um();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=x0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});Pu.emit(j0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function FN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(r),!0).forEach(function(n){fK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fK(e,t,r){return(t=hK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hK(e){var t=mK(e,"string");return typeof t=="symbol"?t:t+""}function mK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pK(e){return e.dataKey}function gK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(r8,t)}var zN=[],yK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!tc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vK(e){var t,r,n=Ms(e,yK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:b,useTranslate3d:j,wrapperStyle:S,cursor:k,shared:E,trigger:N,defaultIndex:O,portal:P,axisId:T}=n,R=pr(),K=typeof O=="number"?String(O):O;v.useEffect(()=>{R(gq({shared:E,trigger:N,axisId:T,active:s,defaultIndex:K}))},[R,E,N,T,s,K]);var z=um(),G=zA(),W=dq(E),{activeIndex:q,isActive:de}=(t=it(ye=>wH(ye,W,N,K)))!==null&&t!==void 0?t:{},oe=it(ye=>xH(ye,W,N,K)),J=it(ye=>uT(ye,W,N,K)),Z=it(ye=>vH(ye,W,N,K)),ae=oe,re=VH(),me=(r=s??de)!==null&&r!==void 0?r:!1,[pe,I]=Xz([ae,me]),H=W==="axis"?J:void 0;dK(W,N,Z,H,q,me);var Pe=P??re;if(Pe==null||z==null||W==null)return null;var Q=ae??zN;me||(Q=zN),m&&Q.length&&(Q=_z(Q.filter(ye=>ye.value!=null&&(ye.hide!==!0||n.includeHidden)),y,pK));var ne=Q.length>0,ue=v.createElement(c8,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:me,coordinate:Z,hasPayload:ne,offset:p,position:x,reverseDirection:b,useTranslate3d:j,viewBox:z,wrapperStyle:S,lastBoundingBox:pe,innerRef:I,hasPortalFromProps:!!P},gK(d,LN(LN({},n),{},{payload:Q,label:H,active:me,activeIndex:q,coordinate:Z,accessibilityLayer:G})));return v.createElement(v.Fragment,null,oC.createPortal(ue,Pe),me&&v.createElement(WH,{cursor:k,tooltipEventType:W,coordinate:Z,payload:Q,index:q}))}var bw=e=>null;bw.displayName="Cell";function xK(e,t,r){return(t=wK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jK{constructor(t){xK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function UN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return(t=kK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kK(e){var t=NK(e,"string");return typeof t=="symbol"?t:t+""}function NK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CK={cacheSize:2e3,enableCache:!0},pT=SK({},CK),BN=new jK(pT.cacheSize),EK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WN="recharts_measurement_span";function AK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var VN=(e,t)=>{try{var r=document.getElementById(WN);r||(r=document.createElement("span"),r.setAttribute("id",WN),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,EK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},fu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||tc.isSsr)return{width:0,height:0};if(!pT.enableCache)return VN(t,r);var n=AK(t,r),s=BN.get(n);if(s)return s;var i=VN(t,r);return BN.set(n,i),i},qN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},TK=Object.keys(gT),Al="NaN";function IK(e,t){return e*gT[t]}class Yn{static parse(t){var r,[,n,s]=(r=OK.exec(t))!==null&&r!==void 0?r:[];return new Yn(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,pi(t)&&(this.unit=""),r!==""&&!PK.test(r)&&(this.num=NaN,this.unit=""),TK.includes(r)&&(this.num=IK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return pi(this.num)}}function yT(e){if(e.includes(Al))return Al;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=qN.exec(t))!==null&&r!==void 0?r:[],l=Yn.parse(n??""),u=Yn.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Al;t=t.replace(qN,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=HN.exec(t))!==null&&m!==void 0?m:[],x=Yn.parse(f??""),b=Yn.parse(y??""),j=p==="+"?x.add(b):x.subtract(b);if(j.isNaN())return Al;t=t.replace(HN,j.toString())}return t}var KN=/\(([^()]*)\)/;function DK(e){for(var t=e,r;(r=KN.exec(t))!=null;){var[,n]=r;t=t.replace(KN,yT(n))}return t}function RK(e){var t=e.replace(/\s+/g,"");return t=DK(t),t=yT(t),t}function $K(e){try{return RK(e)}catch{return Al}}function Qy(e){var t=$K(e.slice(5,-1));return t===Al?"":t}var MK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],FK=["dx","dy","angle","className","breakAll"];function S0(){return S0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S0.apply(null,arguments)}function GN(e,t){if(e==null)return{};var r,n,s=LK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vT=/[ \f\n\r\t\v\u2028\u2029]+/,xT=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];rn(t)||(r?s=t.toString().split(""):s=t.toString().split(vT));var i=s.map(u=>({word:u,width:fu(u,n).width})),l=r?0:fu("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function zK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var wT=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),bT=e=>e.reduce((t,r)=>t.width>r.width?t:r),UK="",YN=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=xT({breakAll:r,style:n,children:d+UK});if(!m)return[!1,[]];var f=wT(m.wordsWithComputedWidth,i,l,u),p=f.length>s||bT(f).width>Number(i);return[p,f]},BK=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=ct(i),f=String(l),p=wT(t,n,r,s);if(!m||s)return p;var y=p.length>i||bT(p).width>Number(n);if(!y)return p;for(var x=0,b=f.length-1,j=0,S;x<=b&&j<=f.length-1;){var k=Math.floor((x+b)/2),E=k-1,[N,O]=YN(f,E,d,u,i,n,r,s),[P]=YN(f,k,d,u,i,n,r,s);if(!N&&!P&&(x=k+1),N&&P&&(b=k-1),!N&&P){S=O;break}j++}return S||p},JN=e=>{var t=rn(e)?[]:e.toString().split(vT);return[{words:t,width:void 0}]},WK=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!tc.isSsr){var u,d,m=xT({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return JN(n);return BK({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return JN(n)},jT="#808080",VK={breakAll:!1,capHeight:"0.71em",fill:jT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},jw=v.forwardRef((e,t)=>{var r=Ms(e,VK),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=GN(r,MK),y=v.useMemo(()=>WK({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:b,angle:j,className:S,breakAll:k}=p,E=GN(p,FK);if(!gi(n)||!gi(s)||y.length===0)return null;var N=Number(n)+(ct(x)?x:0),O=Number(s)+(ct(b)?b:0);if(!mr(N)||!mr(O))return null;var P;switch(f){case"start":P=Qy("calc(".concat(l,")"));break;case"middle":P=Qy("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:P=Qy("calc(".concat(y.length-1," * -").concat(i,")"));break}var T=[];if(d){var R=y[0].width,{width:K}=p;T.push("scale(".concat(ct(K)&&ct(R)?K/R:1,")"))}return j&&T.push("rotate(".concat(j,", ").concat(N,", ").concat(O,")")),T.length&&(E.transform=T.join(" ")),v.createElement("text",S0({},Ds(E),{ref:t,x:N,y:O,className:Jt("recharts-text",S),textAnchor:m,fill:u.includes("url")?jT:u}),y.map((z,G)=>{var W=z.words.join(k?"":" ");return v.createElement("tspan",{x:N,dy:G===0?P:i,key:"".concat(W,"-").concat(G)},W)}))});jw.displayName="Text";var qK=["labelRef"];function HK(e,t){if(e==null)return{};var r,n,s=KK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QN(Object(r),!0).forEach(function(n){GK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GK(e,t,r){return(t=YK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YK(e){var t=JK(e,"string");return typeof t=="symbol"?t:t+""}function JK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(null,arguments)}var ST=v.createContext(null),QK=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(ST.Provider,{value:d},u)},_T=()=>{var e=v.useContext(ST),t=um();return e||FA(t)},XK=v.createContext(null),ZK=()=>{var e=v.useContext(XK),t=it(ZP);return e||t},eG=e=>{var{value:t,formatter:r}=e,n=rn(e.children)?t:e.children;return typeof r=="function"?r(n):n},Sw=e=>e!=null&&typeof e=="function",tG=(e,t)=>{var r=ys(t-e),n=Math.min(Math.abs(t-e),360);return r*n},rG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,b=(m+f)/2,j=tG(p,y),S=j>=0?1:-1,k,E;switch(t){case"insideStart":k=p+S*i,E=x;break;case"insideEnd":k=y-S*i,E=!x;break;case"end":k=y+S*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=j<=0?E:!E;var N=vn(u,d,b,k),O=vn(u,d,b,k+(E?1:-1)*359),P="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),T=rn(e.id)?wu("recharts-radial-line-"):e.id;return v.createElement("text",Di({},n,{dominantBaseline:"central",className:Jt("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:T,d:P})),v.createElement("textPath",{xlinkHref:"#".concat(T)},r))},nG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=vn(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:b}=vn(n,s,y,m);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},_0=e=>"cx"in e&&ct(e.cx),sG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!_0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,b=(d+m)/2,j=p+d/2,S=f>=0?1:-1,k=S*n,E=S>0?"end":"start",N=S>0?"start":"end",O=d>=0?1:-1,P=O*n,T=O>0?"end":"start",R=O>0?"start":"end";if(s==="top"){var K={x:p+d/2,y:u-k,textAnchor:"middle",verticalAnchor:E};return fr(fr({},K),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var z={x:y+m/2,y:u+f+k,textAnchor:"middle",verticalAnchor:N};return fr(fr({},z),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var G={x:x-P,y:u+f/2,textAnchor:T,verticalAnchor:"middle"};return fr(fr({},G),i?{width:Math.max(G.x-i.x,0),height:f}:{})}if(s==="right"){var W={x:x+b+P,y:u+f/2,textAnchor:R,verticalAnchor:"middle"};return fr(fr({},W),i?{width:Math.max(i.x+i.width-W.x,0),height:f}:{})}var q=i?{width:b,height:f}:{};return s==="insideLeft"?fr({x:x+P,y:u+f/2,textAnchor:R,verticalAnchor:"middle"},q):s==="insideRight"?fr({x:x+b-P,y:u+f/2,textAnchor:T,verticalAnchor:"middle"},q):s==="insideTop"?fr({x:p+d/2,y:u+k,textAnchor:"middle",verticalAnchor:N},q):s==="insideBottom"?fr({x:y+m/2,y:u+f-k,textAnchor:"middle",verticalAnchor:E},q):s==="insideTopLeft"?fr({x:p+P,y:u+k,textAnchor:R,verticalAnchor:N},q):s==="insideTopRight"?fr({x:p+d-P,y:u+k,textAnchor:T,verticalAnchor:N},q):s==="insideBottomLeft"?fr({x:y+P,y:u+f-k,textAnchor:R,verticalAnchor:E},q):s==="insideBottomRight"?fr({x:y+m-P,y:u+f-k,textAnchor:T,verticalAnchor:E},q):s&&typeof s=="object"&&(ct(s.x)||Hi(s.x))&&(ct(s.y)||Hi(s.y))?fr({x:l+ti(s.x,b),y:u+ti(s.y,f),textAnchor:"end",verticalAnchor:"end"},q):fr({x:j,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},q)},iG={offset:5,zIndex:Xn.label};function Oa(e){var t=Ms(e,iG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=ZK(),p=_T(),y=n==="center"?p:f??p,x,b,j;if(r==null?x=y:_0(r)?x=r:x=FA(r),!x||rn(s)&&rn(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=fr(fr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:k}=S,E=HK(S,qK);return v.cloneElement(l,E)}if(typeof l=="function"){if(b=v.createElement(l,S),v.isValidElement(b))return b}else b=eG(t);var N=Ds(t);if(_0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return rG(t,n,b,N,x);j=nG(x,t.offset,t.position)}else j=sG(t,x);return v.createElement(Va,{zIndex:t.zIndex},v.createElement(jw,Di({ref:m,className:Jt("recharts-label",u)},N,j,{textAnchor:zK(N.textAnchor)?N.textAnchor:j.textAnchor,breakAll:d}),b))}Oa.displayName="Label";var aG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Oa,Di({key:"label-implicit"},n)):gi(e)?v.createElement(Oa,Di({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Oa?v.cloneElement(e,fr({key:"label-implicit"},n)):v.createElement(Oa,Di({key:"label-implicit",content:e},n)):Sw(e)?v.createElement(Oa,Di({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Oa,Di({},e,{key:"label-implicit"},n)):null};function oG(e){var{label:t,labelRef:r}=e,n=_T();return aG(t,n,r)||null}var Xy={},Zy={},XN;function lG(){return XN||(XN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Zy)),Zy}var ev={},ZN;function cG(){return ZN||(ZN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ev)),ev}var e2;function uG(){return e2||(e2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lG(),r=cG(),n=fx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(Xy)),Xy}var tv,t2;function dG(){return t2||(t2=1,tv=uG().last),tv}var fG=dG();const hG=ri(fG);var mG=["valueAccessor"],pG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ah.apply(null,arguments)}function r2(e,t){if(e==null)return{};var r,n,s=gG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yG=e=>Array.isArray(e.value)?hG(e.value):e.value,kT=v.createContext(void 0),vG=kT.Provider,NT=v.createContext(void 0);NT.Provider;function xG(){return v.useContext(kT)}function wG(){return v.useContext(NT)}function $f(e){var{valueAccessor:t=yG}=e,r=r2(e,mG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=r2(r,pG),m=xG(),f=wG(),p=m||f;return!p||!p.length?null:v.createElement(Va,{zIndex:u??Xn.label},v.createElement(qi,{className:"recharts-label-list"},p.map((y,x)=>{var b,j=rn(n)?t(y,x):Rn(y&&y.payload,n),S=rn(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(Oa,Ah({key:"label-".concat(x)},Ds(y),d,S,{fill:(b=r.fill)!==null&&b!==void 0?b:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}$f.displayName="LabelList";function bG(e){var{label:t}=e;return t?t===!0?v.createElement($f,{key:"labelList-implicit"}):v.isValidElement(t)||Sw(t)?v.createElement($f,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement($f,Ah({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var jG={radiusAxis:{},angleAxis:{}},CT=Zn({name:"polarAxis",initialState:jG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:QZ,removeRadiusAxis:XZ,addAngleAxis:ZZ,removeAngleAxis:eee}=CT.actions,SG=CT.reducer,rv={exports:{}},Lt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function _G(){if(n2)return Lt;n2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case s:case n:case d:case m:case y:return j;default:switch(j=j&&j.$$typeof,j){case l:case u:case p:case f:return j;case i:return j;default:return S}}case t:return S}}}return Lt.ContextConsumer=i,Lt.ContextProvider=l,Lt.Element=e,Lt.ForwardRef=u,Lt.Fragment=r,Lt.Lazy=p,Lt.Memo=f,Lt.Portal=t,Lt.Profiler=s,Lt.StrictMode=n,Lt.Suspense=d,Lt.SuspenseList=m,Lt.isContextConsumer=function(j){return b(j)===i},Lt.isContextProvider=function(j){return b(j)===l},Lt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Lt.isForwardRef=function(j){return b(j)===u},Lt.isFragment=function(j){return b(j)===r},Lt.isLazy=function(j){return b(j)===p},Lt.isMemo=function(j){return b(j)===f},Lt.isPortal=function(j){return b(j)===t},Lt.isProfiler=function(j){return b(j)===s},Lt.isStrictMode=function(j){return b(j)===n},Lt.isSuspense=function(j){return b(j)===d},Lt.isSuspenseList=function(j){return b(j)===m},Lt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===s||j===n||j===d||j===m||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===f||j.$$typeof===l||j.$$typeof===i||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},Lt.typeOf=b,Lt}var s2;function kG(){return s2||(s2=1,rv.exports=_G()),rv.exports}var NG=kG(),i2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",a2=null,nv=null,ET=e=>{if(e===a2&&Array.isArray(nv))return nv;var t=[];return v.Children.forEach(e,r=>{rn(r)||(NG.isFragment(r)?t=t.concat(ET(r.props.children)):t.push(r))}),nv=t,a2=e,t};function CG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>i2(s)):n=[i2(t)],ET(e).forEach(s=>{var i=Fl(s,"type.displayName")||Fl(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var sv={},o2;function EG(){return o2||(o2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(sv)),sv}var iv,l2;function AG(){return l2||(l2=1,iv=EG().isPlainObject),iv}var PG=AG();const OG=ri(PG);function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function u2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){TG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TG(e,t,r){return(t=IG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IG(e){var t=DG(e,"string");return typeof t=="symbol"?t:t+""}function DG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ph.apply(null,arguments)}var d2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},RG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$G=e=>{var t=Ms(e,RG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,b]=v.useState(-1),j=v.useRef(s),S=v.useRef(i),k=v.useRef(l),E=v.useRef(r),N=v.useRef(n),O=jx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var oe=y.current.getTotalLength();oe&&b(oe)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var P=Jt("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",Ph({},Ds(t),{className:P,d:d2(r,n,s,i,l)})));var T=j.current,R=S.current,K=k.current,z=E.current,G=N.current,W="0px ".concat(x===-1?1:x,"px"),q="".concat(x,"px 0px"),de=BA(["strokeDasharray"],m,d);return v.createElement(bx,{animationId:O,key:O,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},oe=>{var J=gn(T,s,oe),Z=gn(R,i,oe),ae=gn(K,l,oe),re=gn(z,r,oe),me=gn(G,n,oe);y.current&&(j.current=J,S.current=Z,k.current=ae,E.current=re,N.current=me);var pe=oe>0?{transition:de,strokeDasharray:q}:{strokeDasharray:W};return v.createElement("path",Ph({},Ds(t),{className:P,d:d2(re,me,J,Z,ae),ref:y,style:u2(u2({},pe),t.style)}))})},MG=["option","shapeType","propTransformer","activeClassName","isActive"];function FG(e,t){if(e==null)return{};var r,n,s=LG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){zG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zG(e,t,r){return(t=UG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UG(e){var t=BG(e,"string");return typeof t=="symbol"?t:t+""}function BG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WG(e,t){return Oh(Oh({},t),e)}function VG(e,t){return e==="symbols"}function h2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(HA,r);case"trapezoid":return v.createElement($G,r);case"sector":return v.createElement(YA,r);case"symbols":if(VG(t))return v.createElement(qE,r);break;case"curve":return v.createElement(UA,r);default:return null}}function qG(e){return v.isValidElement(e)?e.props:e}function HG(e){var{option:t,shapeType:r,propTransformer:n=WG,activeClassName:s="recharts-active-shape",isActive:i}=e,l=FG(e,MG),u;if(v.isValidElement(t))u=v.cloneElement(t,Oh(Oh({},l),qG(t)));else if(typeof t=="function")u=t(l);else if(OG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(h2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(h2,{shapeType:r,elementProps:m})}return i?v.createElement(qi,{className:s},u):u}var AT=(e,t)=>{var r=pr();return(n,s)=>i=>{e==null||e(n,s,i),r(WO({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},PT=e=>{var t=pr();return(r,n)=>s=>{e==null||e(r,n,s),t(yq())}},OT=(e,t)=>{var r=pr();return(n,s)=>i=>{e==null||e(n,s,i),r(vq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function KG(e){var{fn:t,args:r}=e,n=pr(),s=js();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(mq(i)),()=>{n(pq(i))}}},[t,r,n,s]),null}function GG(e){var{legendPayload:t}=e,r=pr(),n=js();return v.useLayoutEffect(()=>n?ec:(r(YB(t)),()=>{r(JB(t))}),[r,n,t]),null}var av,YG=()=>{var[e]=v.useState(()=>wu("uid-"));return e},JG=(av=JI.useId)!==null&&av!==void 0?av:YG;function TT(e,t){var r=JG();return t||(e?"".concat(e,"-").concat(r):r)}var QG=v.createContext(void 0),XG=e=>{var{id:t,type:r,children:n}=e,s=TT("recharts-".concat(r),t);return v.createElement(QG.Provider,{value:s},n(s))},ZG={cartesianItems:[],polarItems:[]},IT=Zn({name:"graphicalItems",initialState:ZG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:$r()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=zi(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:$r()},removeCartesianGraphicalItem:{reducer(e,t){var r=zi(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:$r()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:$r()},removePolarGraphicalItem:{reducer(e,t){var r=zi(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:$r()}}}),{addCartesianGraphicalItem:eY,replaceCartesianGraphicalItem:tY,removeCartesianGraphicalItem:rY,addPolarGraphicalItem:tee,removePolarGraphicalItem:ree}=IT.actions,nY=IT.reducer;function sY(e){var t=pr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(eY(e)):r.current!==e&&t(tY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(rY(r.current)),r.current=null)},[t]),null}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return(t=aY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e){var t=oY(e,"string");return typeof t=="symbol"?t:t+""}function oY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lY={xAxis:{},yAxis:{},zAxis:{}},DT=Zn({name:"cartesianAxis",initialState:lY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:$r()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:$r()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:$r()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:$r()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:$r()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:$r()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=p2(p2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:cY,removeXAxis:uY,addYAxis:dY,removeYAxis:fY,addZAxis:nee,removeZAxis:see,updateYAxisWidth:hY}=DT.actions,mY=DT.reducer,pY=he([nn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),gY=he([pY,ea,ta],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),RT=()=>it(gY),yY="Invariant failed";function vY(e,t){throw new Error(yY)}var xY=["x","y"];function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(null,arguments)}function g2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ru(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g2(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=bY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SY(e,t){if(e==null)return{};var r,n,s=_Y(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _Y(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kY(e,t){var{x:r,y:n}=e,s=SY(e,xY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return ru(ru(ru(ru(ru({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function Th(e){return v.createElement(HG,k0({shapeType:"rectangle",propTransformer:kY,activeClassName:"recharts-active-bar"},e))}var NY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ct(t))return t;var i=ct(n)||rn(n);return i?t(n,s):(i||vY(),r)}},CY={},$T=Zn({name:"errorBars",initialState:CY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:iee,replaceErrorBar:aee,removeErrorBar:oee}=$T.actions,EY=$T.reducer,AY=["children"];function PY(e,t){if(e==null)return{};var r,n,s=OY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},IY=v.createContext(TY);function DY(e){var{children:t}=e,r=PY(e,AY);return v.createElement(IY.Provider,{value:r},t)}function MT(e,t){var r,n,s=it(m=>na(m,e)),i=it(m=>sa(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ls.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:cs.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function RY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=RT(),{needClipX:i,needClipY:l,needClip:u}=MT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function $Y(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&mr(e.zIndex)?e.zIndex:t}var MY=["onMouseEnter","onMouseLeave","onClick"],FY=["value","background","tooltipPosition"],LY=["id"],zY=["onMouseEnter","onClick","onMouseLeave"];function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){UY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=WY(e,"string");return typeof t=="symbol"?t:t+""}function WY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ih(e,t){if(e==null)return{};var r,n,s=VY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qY=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:IA(r,t),payload:e}]};function HY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:IA(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function KY(e){var t=it(Vl),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=Ih(i,MY),f=AT(l,n),p=PT(u),y=OT(d,n);if(!s||r==null)return null;var x=sx(s);return v.createElement(Va,{zIndex:$Y(s,Xn.barBackground)},r.map((b,j)=>{var{value:S,background:k,tooltipPosition:E}=b,N=Ih(b,FY);if(!k)return null;var O=f(b,j),P=p(b,j),T=y(b,j),R=In(In(In(In(In({option:s,isActive:String(j)===t},N),{},{fill:"#eee"},k),x),dx(m,b,j)),{},{onMouseEnter:O,onMouseLeave:P,onClick:T,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return v.createElement(Th,Xi({key:"background-bar-".concat(j)},R))}))}function GY(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return In(In({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(vG,{value:t?s:void 0},r)}function YY(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=it(Vl),d=it(sT),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(Va,{zIndex:Xn.activeBar},v.createElement(Th,Xi({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(Th,Xi({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function JY(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(Th,Xi({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function QY(e){var t,{data:r,props:n}=e,s=(t=Ma(n))!==null&&t!==void 0?t:{},{id:i}=s,l=Ih(s,LY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=Ih(n,zY),b=AT(f,d),j=PT(y),S=OT(p,d);return r?v.createElement(v.Fragment,null,r.map((k,E)=>v.createElement(qi,Xi({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(E),className:"recharts-bar-rectangle"},dx(x,k,E),{onMouseEnter:b(k,E),onMouseLeave:j(k,E),onClick:S(k,E)}),m?v.createElement(YY,{shape:u,activeBar:m,baseProps:l,entry:k,index:E,dataKey:d}):v.createElement(JY,{shape:u,baseProps:l,entry:k,index:E,dataKey:d})))):null}function XY(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=jx(t,"recharts-bar-"),[x,b]=v.useState(!1),j=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=v.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return v.createElement(GY,{showLabels:j,rects:n},v.createElement(bx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:k,key:y},E=>{var N=E===1?n:n==null?void 0:n.map((O,P)=>{var T=p&&p[P];if(T)return In(In({},O),{},{x:gn(T.x,O.x,E),y:gn(T.y,O.y,E),width:gn(T.width,O.width,E),height:gn(T.height,O.height,E)});if(s==="horizontal"){var R=gn(0,O.height,E),K=gn(O.stackedBarStart,O.y,E);return In(In({},O),{},{y:K,height:R})}var z=gn(0,O.width,E),G=gn(O.stackedBarStart,O.x,E);return In(In({},O),{},{width:z,x:G})});return E>0&&(r.current=N??null),N==null?null:v.createElement(qi,null,v.createElement(QY,{props:t,data:N}))}),v.createElement(bG,{label:t.label}),t.children)}function ZY(e){var t=v.useRef(null);return v.createElement(XY,{previousRectanglesRef:t,props:e})}var FT=0,eJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Rn(e,t)}};class tJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Jt("recharts-bar",s),p=m;return v.createElement(qi,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(RY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(qi,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(KY,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(ZY,this.props)))}}var rJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!tc.isSsr,legendType:"rect",minPointSize:FT,xAxisId:0,yAxisId:0,zIndex:Xn.bar};function nJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=MT(t,r),y=dm(),x=js(),b=CG(e.children,bw),j=it(E=>OJ(E,t,r,x,e.id,b));if(y!=="vertical"&&y!=="horizontal")return null;var S,k=j==null?void 0:j[0];return k==null||k.height==null||k.width==null?S=0:S=y==="vertical"?k.height/2:k.width/2,v.createElement(DY,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:eJ,errorBarOffset:S},v.createElement(tJ,Xi({},e,{layout:y,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function sJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:b,dataStartIndex:j}=e,S=t==="horizontal"?u:l,k=f?S.scale.domain():null,E=aB({numericAxis:S}),N=S.scale(E);return p.map((O,P)=>{var T,R,K,z,G,W;f?T=eB(f[P+j],k):(T=Rn(O,r),Array.isArray(T)||(T=[E,T]));var q=NY(n,FT)(T[1],P);if(t==="horizontal"){var de,[oe,J]=[u.scale(T[0]),u.scale(T[1])];R=X_({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:O,index:P}),K=(de=J??oe)!==null&&de!==void 0?de:void 0,z=s.size;var Z=oe-J;if(G=pi(Z)?0:Z,W={x:R,y:y.top,width:z,height:y.height},Math.abs(q)>0&&Math.abs(G)<Math.abs(q)){var ae=ys(G||q)*(Math.abs(q)-Math.abs(G));K-=ae,G+=ae}}else{var[re,me]=[l.scale(T[0]),l.scale(T[1])];if(R=re,K=X_({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:O,index:P}),z=me-re,G=s.size,W={x:y.left,y:K,width:y.width,height:G},Math.abs(q)>0&&Math.abs(z)<Math.abs(q)){var pe=ys(z||q)*(Math.abs(q)-Math.abs(z));z+=pe}}if(R==null||K==null||z==null||G==null)return null;var I=In(In({},O),{},{stackedBarStart:N,x:R,y:K,width:z,height:G,value:f?T:T[1],payload:O,background:W,tooltipPosition:{x:R+z/2,y:K+G/2},parentViewBox:b},x&&x[P]&&x[P].props);return I}).filter(Boolean)}function iJ(e){var t=Ms(e,rJ),r=js();return v.createElement(XG,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(GG,{legendPayload:qY(t)}),v.createElement(KG,{fn:HY,args:t}),v.createElement(sY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:iB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(Va,{zIndex:t.zIndex},v.createElement(nJ,Xi({},t,{id:n})))))}var LT=v.memo(iJ);LT.displayName="Bar";function v2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(r),!0).forEach(function(n){aJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aJ(e,t,r){return(t=oJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=lJ(e,"string");return typeof t=="symbol"?t:t+""}function lJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cJ=(e,t)=>t,uJ=(e,t,r)=>r,dJ=(e,t,r,n)=>n,fJ=(e,t,r,n,s)=>s,Zu=he([nw,fJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),hJ=he([Zu],e=>e==null?void 0:e.maxBarSize),mJ=(e,t,r,n,s,i)=>i,x2=(e,t,r)=>{var n=r??e;if(!rn(n))return ti(n,t,0)},pJ=he([Mt,nw,cJ,uJ,dJ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),gJ=(e,t,r,n)=>{var s=Mt(e);return s==="horizontal"?v0(e,"yAxis",r,n):v0(e,"xAxis",t,n)},yJ=(e,t,r)=>{var n=Mt(e);return n==="horizontal"?_N(e,"xAxis",t):_N(e,"yAxis",r)},vJ=(e,t,r)=>{var n={},s=e.filter(_m),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(b=>b.dataKey),x=x2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=x2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},xJ=he([pJ,oV,yJ],vJ),wJ=(e,t,r,n,s)=>{var i,l,u=Zu(e,t,r,n,s);if(u!=null){var d=Mt(e),m=HP(e),{maxBarSize:f}=u,p=rn(f)?m:f,y,x;return d==="horizontal"?(y=Wl(e,"xAxis",t,n),x=Bl(e,"xAxis",t,n)):(y=Wl(e,"yAxis",r,n),x=Bl(e,"yAxis",r,n)),(i=(l=uh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},zT=(e,t,r,n)=>{var s=Mt(e),i,l;return s==="horizontal"?(i=Wl(e,"xAxis",t,n),l=Bl(e,"xAxis",t,n)):(i=Wl(e,"yAxis",r,n),l=Bl(e,"yAxis",r,n)),uh(i,l)};function bJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=ti(e,r,0,!0),u,d=[];if(mr(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((k,E)=>k+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((k,E)=>{var N,O={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(N=E.barSize)!==null&&N!==void 0?N:0}},P=[...k,O];return x=P[P.length-1].position,P},d)}else{var b=ti(t,r,0,!0);r-2*b-(i-1)*l<=0&&(l=0);var j=(r-2*b-(i-1)*l)/i;j>1&&(j>>=0);var S=mr(s)?Math.min(j,s):j;u=n.reduce((k,E,N)=>[...k,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:b+(j+l)*N+(j-S)/2,size:S}}],d)}return u}}var jJ=(e,t,r,n,s,i,l)=>{var u=rn(l)?t:l,d=bJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>kf(kf({},m),{},{position:kf(kf({},m.position),{},{offset:m.position.offset-s/2})}))),d},SJ=he([xJ,HP,aV,KP,wJ,zT,hJ],jJ),_J=(e,t,r,n)=>Wl(e,"xAxis",t,n),kJ=(e,t,r,n)=>Wl(e,"yAxis",r,n),NJ=(e,t,r,n)=>Bl(e,"xAxis",t,n),CJ=(e,t,r,n)=>Bl(e,"yAxis",r,n),EJ=he([SJ,Zu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),AJ=(e,t)=>{var r=tw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},PJ=he([gJ,Zu],AJ),OJ=he([nn,xx,_J,kJ,NJ,CJ,EJ,Mt,Hx,zT,PJ,Zu,mJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:j}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,k;if(S!=null&&S.length>0?k=S:k=x==null?void 0:x.slice(b,j+1),k!=null)return sJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:k,offset:e,cells:y,dataStartIndex:b})}}),TJ=e=>{var{chartData:t}=e,r=pr(),n=js();return v.useEffect(()=>n?()=>{}:(r($N(t)),()=>{r($N(void 0))}),[t,r,n]),null},w2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},UT=Zn({name:"brush",initialState:w2,reducers:{setBrushSettings(e,t){return t.payload==null?w2:t.payload}}}),{setBrushSettings:lee}=UT.actions,IJ=UT.reducer;function DJ(e,t,r){return(t=RJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RJ(e){var t=$J(e,"string");return typeof t=="symbol"?t:t+""}function $J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _w{static create(t){return new _w(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}DJ(_w,"EPS",1e-4);function MJ(e){return(e%180+180)%180}var FJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=MJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},LJ={dots:[],areas:[],lines:[]},BT=Zn({name:"referenceElements",initialState:LJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=zi(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=zi(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=zi(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:cee,removeDot:uee,addArea:dee,removeArea:fee,addLine:hee,removeLine:mee}=BT.actions,zJ=BT.reducer,UJ=v.createContext(void 0),BJ=e=>{var{children:t}=e,[r]=v.useState("".concat(wu("recharts"),"-clip")),n=RT();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(UJ.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function ql(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function WT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function WJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return FJ(n,r)}function VJ(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function Dh(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function qJ(e,t){return WT(e,t+1)}function HJ(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var b=n==null?void 0:n[d];if(b===void 0)return{v:WT(n,m)};var j=d,S,k=()=>(S===void 0&&(S=r(b,j)),S),E=b.coordinate,N=d===0||Dh(e,E,k,f,u);N||(d=0,f=l,m+=1),N&&(f=E+e*(k()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){KJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KJ(e,t,r){return(t=GJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JJ(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],b,j=()=>(b===void 0&&(b=r(x,y)),b);if(y===l-1){var S=e*(x.coordinate+e*j()/2-d);i[y]=x=Nn(Nn({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=Nn(Nn({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var k=Dh(e,x.tickCoord,j,u,d);k&&(d=x.tickCoord-e*(j()/2+s),i[y]=Nn(Nn({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function QJ(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=Nn(Nn({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=Dh(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=Nn(Nn({},f),{},{isShow:!0}))}}for(var b=i?u-1:u,j=function(E){var N=l[E],O,P=()=>(O===void 0&&(O=r(N,E)),O);if(E===0){var T=e*(N.coordinate-e*P()/2-d);l[E]=N=Nn(Nn({},N),{},{tickCoord:T<0?N.coordinate-T*e:N.coordinate})}else l[E]=N=Nn(Nn({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var R=Dh(e,N.tickCoord,P,d,m);R&&(d=N.tickCoord+e*(P()/2+s),l[E]=Nn(Nn({},N),{},{isShow:!0}))}},S=0;S<b;S++)j(S);return l}function XJ(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(ct(d)||tc.isSsr){var y;return(y=qJ(s,ct(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],b=u==="top"||u==="bottom"?"width":"height",j=f&&b==="width"?fu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(N,O)=>{var P=typeof m=="function"?m(N.value,O):N.value;return b==="width"?WJ(fu(P,{fontSize:t,letterSpacing:r}),j,p):fu(P,{fontSize:t,letterSpacing:r})[b]},k=s.length>=2?ys(s[1].coordinate-s[0].coordinate):1,E=VJ(i,k,b);return d==="equidistantPreserveStart"?HJ(k,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=QJ(k,E,S,s,l,d==="preserveStartEnd"):x=JJ(k,E,S,s,l),x.filter(N=>N.isShow))}var ZJ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},eQ=["axisLine","width","height","className","hide","ticks","axisType"],tQ=["viewBox"],rQ=["viewBox"];function N0(e,t){if(e==null)return{};var r,n,s=nQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(null,arguments)}function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){sQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sQ(e,t,r){return(t=iQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iQ(e){var t=aQ(e,"string");return typeof t=="symbol"?t:t+""}function aQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oQ={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Xn.axis};function lQ(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=_r(_r(_r({},d),Ma(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=_r(_r({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=_r(_r({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Ao({},m,{className:Jt("recharts-cartesian-axis-line",Fl(u,"className"))}))}function cQ(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,b,j=u?-1:1,S=e.tickSize||l,k=ct(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-j*S,b=p-j*d,x=k;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-j*S,x=m-j*d,b=k;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+j*S,x=m+j*d,b=k;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+j*S,b=p+j*d,x=k;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:b}}}function uQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function dQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function fQ(e){var{option:t,tickProps:r,value:n}=e,s,i=Jt(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,_r(_r({},r),{},{className:i}));else if(typeof t=="function")s=t(_r(_r({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Jt(l,t==null?void 0:t.className)),s=v.createElement(jw,Ao({},r,{className:l}),n)}return s}var hQ=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:b,height:j,tickSize:S,tickMargin:k,fontSize:E,letterSpacing:N,getTicksConfig:O,events:P,axisType:T}=e,R=XJ(_r(_r({},O),{},{ticks:r}),E,N),K=uQ(f,p),z=dQ(f,p),G=Ma(O),W=sx(n),q={};typeof s=="object"&&(q=s);var de=_r(_r({},G),{},{fill:"none"},q),oe=R.map(ae=>_r({entry:ae},cQ(ae,y,x,b,j,f,S,p,k))),J=oe.map(ae=>{var{entry:re,line:me}=ae;return v.createElement(qi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},s&&v.createElement("line",Ao({},de,me,{className:Jt("recharts-cartesian-axis-tick-line",Fl(s,"className"))})))}),Z=oe.map((ae,re)=>{var{entry:me,tick:pe}=ae,I=_r(_r(_r(_r({textAnchor:K,verticalAnchor:z},G),{},{stroke:"none",fill:i},W),pe),{},{index:re,payload:me,visibleTicksCount:R.length,tickFormatter:l,padding:d},m);return v.createElement(qi,Ao({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},dx(P,me,re)),n&&v.createElement(fQ,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(me.value,re):me.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},Z.length>0&&v.createElement(Va,{zIndex:Xn.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},Z)),J.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},J))}),mQ=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=N0(e,eQ),[f,p]=v.useState(""),[y,x]=v.useState(""),b=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return ZJ({ticks:b.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=v.useCallback(S=>{if(S){var k=S.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=k;var E=k[0];if(E){var N=window.getComputedStyle(E),O=N.fontSize,P=N.letterSpacing;(O!==f||P!==y)&&(p(O),x(P))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(Va,{zIndex:e.zIndex},v.createElement(qi,{className:Jt("recharts-cartesian-axis",i)},v.createElement(lQ,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ma(e)}),v.createElement(hQ,{ref:j,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(QK,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(oG,{label:e.label,labelRef:e.labelRef}),e.children)))}),pQ=v.memo(mQ,(e,t)=>{var{viewBox:r}=e,n=N0(e,tQ),{viewBox:s}=t,i=N0(t,rQ);return ql(r,s)&&ql(n,i)}),kw=v.forwardRef((e,t)=>{var r=Ms(e,oQ);return v.createElement(pQ,Ao({},r,{ref:t}))});kw.displayName="CartesianAxis";var gQ=["dangerouslySetInnerHTML","ticks"],yQ=["id"],vQ=["domain"],xQ=["domain"];function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C0.apply(null,arguments)}function Rh(e,t){if(e==null)return{};var r,n,s=wQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bQ(e){var t=pr();return v.useLayoutEffect(()=>(t(cY(e)),()=>{t(uY(e))}),[e,t]),null}var jQ=e=>{var{xAxisId:t,className:r}=e,n=it(xx),s=js(),i="xAxis",l=it(S=>oc(S,i,t,s)),u=it(S=>MO(S,i,t,s)),d=it(S=>IO(S,t)),m=it(S=>sq(S,t)),f=it(S=>tO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=Rh(e,gQ),{id:b}=f,j=Rh(f,yQ);return v.createElement(kw,C0({},x,j,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Jt("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},SQ={allowDataOverflow:ls.allowDataOverflow,allowDecimals:ls.allowDecimals,allowDuplicatedCategory:ls.allowDuplicatedCategory,height:ls.height,hide:!1,mirror:ls.mirror,orientation:ls.orientation,padding:ls.padding,reversed:ls.reversed,scale:ls.scale,tickCount:ls.tickCount,type:ls.type,xAxisId:0},_Q=e=>{var t,r,n,s,i,l=Ms(e,SQ);return v.createElement(v.Fragment,null,v.createElement(bQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(jQ,l))},kQ=(e,t)=>{var{domain:r}=e,n=Rh(e,vQ),{domain:s}=t,i=Rh(t,xQ);return ql(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ql({domain:r},{domain:s}):!1},VT=v.memo(_Q,kQ);VT.displayName="XAxis";var NQ=["dangerouslySetInnerHTML","ticks"],CQ=["id"],EQ=["domain"],AQ=["domain"];function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(null,arguments)}function $h(e,t){if(e==null)return{};var r,n,s=PQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OQ(e){var t=pr();return v.useLayoutEffect(()=>(t(dY(e)),()=>{t(fY(e))}),[e,t]),null}var TQ=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=it(xx),d=js(),m=pr(),f="yAxis",p=it(P=>oc(P,f,t,d)),y=it(P=>DO(P,t)),x=it(P=>aq(P,t)),b=it(P=>MO(P,f,t,d)),j=it(P=>rO(P,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Sw(s)||v.isValidElement(s)||j==null)){var P=i.current;if(P){var T=P.getCalculatedWidth();Math.round(y.width)!==Math.round(T)&&m(hY({id:t,width:T}))}}},[b,y,m,s,t,n,j]),y==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:k}=e,E=$h(e,NQ),{id:N}=j,O=$h(j,CQ);return v.createElement(kw,E0({},E,O,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Jt("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:b,axisType:f}))},IQ={allowDataOverflow:cs.allowDataOverflow,allowDecimals:cs.allowDecimals,allowDuplicatedCategory:cs.allowDuplicatedCategory,hide:!1,mirror:cs.mirror,orientation:cs.orientation,padding:cs.padding,reversed:cs.reversed,scale:cs.scale,tickCount:cs.tickCount,type:cs.type,width:cs.width,yAxisId:0},DQ=e=>{var t,r,n,s,i,l=Ms(e,IQ);return v.createElement(v.Fragment,null,v.createElement(OQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(TQ,l))},RQ=(e,t)=>{var{domain:r}=e,n=$h(e,EQ),{domain:s}=t,i=$h(t,AQ);return ql(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ql({domain:r},{domain:s}):!1},qT=v.memo(DQ,RQ);qT.displayName="YAxis";var ov={exports:{}},lv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function $Q(){if(S2)return lv;S2=1;var e=Hl();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return lv.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function S(P){if(!k){if(k=!0,E=P,P=p(P),y!==void 0&&b.hasValue){var T=b.value;if(y(T,P))return N=T}return N=P}if(T=N,r(E,P))return T;var R=p(P);return y!==void 0&&y(T,R)?(E=P,T):(E=P,N=R)}var k=!1,E,N,O=f===void 0?null:f;return[function(){return S(m())},O===null?void 0:function(){return S(O())}]},[m,f,p,y]);var j=n(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=j},[j]),u(j),j},lv}var _2;function MQ(){return _2||(_2=1,ov.exports=$Q()),ov.exports}MQ();function FQ(e){e()}function LQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){FQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var k2={notify(){},get:()=>[]};function zQ(e,t){let r,n=k2,s=0,i=!1;function l(j){f();const S=n.subscribe(j);let k=!1;return()=>{k||(k=!0,S(),p())}}function u(){n.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=LQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=k2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return b}var UQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BQ=UQ(),WQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",VQ=WQ(),qQ=()=>BQ||VQ?v.useLayoutEffect:v.useEffect,HQ=qQ(),cv=Symbol.for("react-redux-context"),uv=typeof globalThis<"u"?globalThis:{};function KQ(){if(!v.createContext)return{};const e=uv[cv]??(uv[cv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var GQ=KQ();function YQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=zQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);HQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||GQ;return v.createElement(u.Provider,{value:i},t)}var JQ=YQ,QQ=(e,t)=>t,Nw=he([QQ,Mt,ZP,zr,eT,ia,gH,nn],SH),Cw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},HT=Rs("mouseClick"),KT=Uu();KT.startListening({actionCreator:HT,effect:(e,t)=>{var r=e.payload,n=Nw(t.getState(),Cw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(xq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var A0=Rs("mouseMove"),GT=Uu();GT.startListening({actionCreator:A0,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=fw(n,n.tooltip.settings.shared),i=Nw(n,Cw(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(qO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(VO()))}});var N2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},YT=Zn({name:"rootProps",initialState:N2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:N2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),XQ=YT.reducer,{updateOptions:ZQ}=YT.actions,JT=Zn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:pee}=JT.actions,eX=JT.reducer,QT=Rs("keyDown"),XT=Rs("focus"),Ew=Uu();Ew.startListening({actionCreator:QT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(hw(s,cc(r))),u=ia(r);if(i==="Enter"){var d=Eh(r,"axis","hover",String(s.index));t.dispatch(w0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=uq(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=Eh(r,"axis","hover",String(y));t.dispatch(w0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Ew.startListening({actionCreator:XT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Eh(r,"axis","hover",String(i));t.dispatch(w0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Os=Rs("externalEvent"),ZT=Uu();ZT.startListening({actionCreator:Os,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:tH(r),activeDataKey:sT(r),activeIndex:Vl(r),activeLabel:nT(r),activeTooltipIndex:Vl(r),isTooltipActive:rH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var tX=he([lc],e=>e.tooltipItemPayloads),rX=he([tX,Qu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),e4=Rs("touchMove"),t4=Uu();t4.startListening({actionCreator:e4,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=fw(n,n.tooltip.settings.shared);if(s==="axis"){var i=Nw(n,Cw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(qO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(hB),f=(l=d.getAttribute(mB))!==null&&l!==void 0?l:void 0,p=rX(t.getState(),m,f);t.dispatch(WO({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var nX=oA({brush:IJ,cartesianAxis:mY,chartData:tK,errorBars:EY,graphicalItems:nY,layout:GU,legend:QB,options:JH,polarAxis:SG,polarOptions:eX,referenceElements:zJ,rootProps:XQ,tooltip:wq,zIndex:MH}),sX=function(t){return xU({reducer:nX,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([KT.middleware,GT.middleware,Ew.middleware,ZT.middleware,t4.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(xA({type:"raf"}))},devTools:tc.devToolsEnabled})};function iX(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=js(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=sX(t));var l=hx;return v.createElement(JQ,{context:l,store:i.current},r)}function aX(e){var{layout:t,margin:r}=e,n=pr(),s=js();return v.useEffect(()=>{s||(n(qU(t)),n(VU(r)))},[n,s,t,r]),null}function oX(e){var t=pr();return v.useEffect(()=>{t(ZQ(e))},[t,e]),null}function C2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=TT("".concat(n).concat(t)),i=pr();return v.useLayoutEffect(()=>(i(RH({zIndex:t,elementId:s,isPanorama:r})),()=>{i($H({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function E2(e){var{children:t,isPanorama:r}=e,n=it(kH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(C2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(C2,{key:l,zIndex:l,isPanorama:r})))}var lX=["children"];function cX(e,t){if(e==null)return{};var r,n,s=uX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mh.apply(null,arguments)}var dX={width:"100%",height:"100%",display:"block"},fX=v.forwardRef((e,t)=>{var r=qB(),n=HB(),s=zA();if(!Fa(r)||!Fa(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(kE,Mh({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:dX,ref:t}),i)}),hX=e=>{var{children:t}=e,r=it(cm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(kE,{width:n,height:s,x:l,y:i},t)},A2=v.forwardRef((e,t)=>{var{children:r}=e,n=cX(e,lX),s=js();return s?v.createElement(hX,null,v.createElement(E2,{isPanorama:!0},r)):v.createElement(fX,Mh({ref:t},n),v.createElement(E2,{isPanorama:!1},r))});function mX(){var e=pr(),[t,r]=v.useState(null),n=it(fB);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;mr(i)&&i!==n&&e(KU(i))}},[t,e,n]),r}function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){gX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=vX(e,"string");return typeof t=="symbol"?t:t+""}function vX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Po(){return Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Po.apply(null,arguments)}var xX=()=>(uK(),null);function Fh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var wX=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:Fh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Fh((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=b=>{var{width:j,height:S}=b[0].contentRect;u(j,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(fm,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",Po({ref:d},e)))}),bX=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:Fh(r),containerHeight:Fh(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(fm,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Po({ref:u},e)))}),jX=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(fm,{width:r,height:n}),v.createElement("div",Po({ref:t},e)))}),SX=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return Hi(r)||Hi(n)?v.createElement(bX,Po({},e,{ref:t})):v.createElement(jX,Po({},e,{ref:t}))});function _X(e){return e===!0?wX:SX}var kX=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:b,onTouchStart:j,style:S,width:k,responsive:E,dispatchTouchEvents:N=!0}=e,O=v.useRef(null),P=pr(),[T,R]=v.useState(null),[K,z]=v.useState(null),G=mX(),W=wx(),q=(W==null?void 0:W.width)>0?W.width:k,de=(W==null?void 0:W.height)>0?W.height:s,oe=v.useCallback(B=>{G(B),typeof t=="function"&&t(B),R(B),z(B),B!=null&&(O.current=B)},[G,t,R,z]),J=v.useCallback(B=>{P(HT(B)),P(Os({handler:i,reactEvent:B}))},[P,i]),Z=v.useCallback(B=>{P(A0(B)),P(Os({handler:m,reactEvent:B}))},[P,m]),ae=v.useCallback(B=>{P(VO()),P(Os({handler:f,reactEvent:B}))},[P,f]),re=v.useCallback(B=>{P(A0(B)),P(Os({handler:p,reactEvent:B}))},[P,p]),me=v.useCallback(()=>{P(XT())},[P]),pe=v.useCallback(B=>{P(QT(B.key))},[P]),I=v.useCallback(B=>{P(Os({handler:l,reactEvent:B}))},[P,l]),H=v.useCallback(B=>{P(Os({handler:u,reactEvent:B}))},[P,u]),Pe=v.useCallback(B=>{P(Os({handler:d,reactEvent:B}))},[P,d]),Q=v.useCallback(B=>{P(Os({handler:y,reactEvent:B}))},[P,y]),ne=v.useCallback(B=>{P(Os({handler:j,reactEvent:B}))},[P,j]),ue=v.useCallback(B=>{N&&P(e4(B)),P(Os({handler:b,reactEvent:B}))},[P,N,b]),ye=v.useCallback(B=>{P(Os({handler:x,reactEvent:B}))},[P,x]),we=_X(E);return v.createElement(fT.Provider,{value:T},v.createElement(rL.Provider,{value:K},v.createElement(we,{width:q??(S==null?void 0:S.width),height:de??(S==null?void 0:S.height),className:Jt("recharts-wrapper",n),style:pX({position:"relative",cursor:"default",width:q,height:de},S),onClick:J,onContextMenu:I,onDoubleClick:H,onFocus:me,onKeyDown:pe,onMouseDown:Pe,onMouseEnter:Z,onMouseLeave:ae,onMouseMove:re,onMouseUp:Q,onTouchEnd:ye,onTouchMove:ue,onTouchStart:ne,ref:oe},v.createElement(xX,null),r)))}),NX=["width","height","responsive","children","className","style","compact","title","desc"];function CX(e,t){if(e==null)return{};var r,n,s=EX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AX=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=CX(e,NX),y=Ma(p);return d?v.createElement(v.Fragment,null,v.createElement(fm,{width:r,height:n}),v.createElement(A2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(kX,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(A2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(BJ,null,i)))});function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P0.apply(null,arguments)}var PX={top:5,right:5,bottom:5,left:5},OX={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:PX,reverseStackOrder:!1,syncMethod:"index",responsive:!1},TX=v.forwardRef(function(t,r){var n,s=Ms(t.categoricalChartProps,OX),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(iX,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(TJ,{chartData:m.data}),v.createElement(aX,{layout:s.layout,margin:s.margin}),v.createElement(oX,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(AX,P0({},s,{ref:r})))}),IX=["axis","item"],DX=v.forwardRef((e,t)=>v.createElement(TX,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:IX,tooltipPayloadSearcher:GH,categoricalChartProps:e,ref:t}));const r4=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function RX(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const vs={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return RX()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function $X(){const e=new Uint8Array(32);return crypto.getRandomValues(e),n4(e)}async function MX(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return n4(new Uint8Array(n))}function n4(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function FX(e){const t=$X(),r=await MX(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:vs.clientId,response_type:"code",redirect_uri:vs.redirectUri,response_mode:"query",scope:vs.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${vs.tenantId}/oauth2/v2.0/authorize?${n}`}async function LX(e){const t=`https://login.microsoftonline.com/${vs.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:vs.clientId,scope:vs.scopes.join(" "),code:e,redirect_uri:vs.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function zX(e){const t=`https://login.microsoftonline.com/${vs.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:vs.clientId,scope:vs.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function s4(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function O2(e){const t=new Set;for(const r of r4)try{(await s4({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function O0(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function UX(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return O0(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(b=>`'${b}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var j;const b=(j=x.fields)==null?void 0:j["System.AreaPath"];b&&y.add(b)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function BX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(b=>`'${b}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(b=>b.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{var E,N,O;const j=(E=b.fields)==null?void 0:E["System.WorkItemType"],S=(N=b.fields)==null?void 0:N["System.AreaPath"],k=(O=b.fields)==null?void 0:O["System.Tags"];j&&p.add(j),S&&y.add(S),k&&k.split(";").map(P=>P.trim()).forEach(P=>{P&&x.add(P)})}),{types:Array.from(p).sort((b,j)=>b.localeCompare(j)),areaPaths:Array.from(y).sort((b,j)=>b.localeCompare(j)),tags:Array.from(x).sort((b,j)=>b.localeCompare(j))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function WX(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function VX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function qX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(b=>`[System.Tags] CONTAINS '${b}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(b=>b.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{b.fields&&(b.fields["System.WorkItemType"]&&p.add(b.fields["System.WorkItemType"]),b.fields["System.State"]&&y.add(b.fields["System.State"]),b.fields["System.AreaPath"]&&x.add(b.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function HX(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const b=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${b})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const b=n.map(j=>`[System.AreaPath] UNDER '${j}'`);s.push(`(${b.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(b=>b.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(b=>{b.fields&&b.fields["System.Tags"]&&b.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function T2(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await KX(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function KX(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function GX(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function YX(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await LX(t);return sessionStorage.removeItem("oauth_state"),s}async function JX(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await FX(e);window.location.href=r}async function I2(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(N=>N.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let N=0;N<f.length;N+=y){const P=f.slice(N,N+y).join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${P}&fields=${p}&api-version=7.0`,R=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(!R.ok)throw new Error(`Failed to fetch work items: ${R.status} ${R.statusText}`);const K=await R.json();K.value&&Array.isArray(K.value)&&x.push(...K.value)}if(x.length===0)return[];const b=new Map,j=new Map,S=new Map,k=10;for(let N=0;N<x.length;N+=k){const O=x.slice(N,N+k);await Promise.all(O.map(async P=>{try{const T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${P.id}?$expand=relations&api-version=7.0`,R=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(R.ok){const K=await R.json();if(K.relations){for(const z of K.relations)if(z.rel==="System.LinkTypes.Hierarchy-Forward"){const G=z.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(G){const W=parseInt(G[1],10);b.set(P.id,W),console.log(`Work item ${P.id} has parent ${W}`)}}}}}catch(T){console.error(`Error fetching relations for work item ${P.id}:`,T)}}))}const E=Array.from(new Set(b.values()));if(E.length>0){const N=E.slice(0,200).join(","),O=["System.Id","System.Title","System.WorkItemType"].join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${N}&fields=${O}&api-version=7.0`;try{const T=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(T.ok){const R=await T.json();for(const K of R.value)S.set(K.id,K.fields["System.Title"]||""),K.fields["System.WorkItemType"]==="Epic"&&(j.set(K.id,K.fields["System.Title"]||""),console.log(`Found Epic ${K.id}: ${K.fields["System.Title"]}`))}}catch(T){console.error("Error fetching parent work items:",T)}}return x.map(N=>{let O=null;const P=b.get(N.id);if(P)if(O=j.get(P)||null,O)console.log(`Work item ${N.id} has Epic from parent ${P}: ${O}`);else{const T=S.get(P);console.log(`Work item ${N.id} has parent ${P} (${T}) but it's not an Epic type`)}if(!O&&N.fields){const R=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(N.fields).filter(K=>K.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(K))];for(const K of R){const z=N.fields[K];if(z!=null){if(typeof z=="string"&&z.trim()!==""){const G=parseInt(z.trim());if(!isNaN(G)&&G>0){if(O=j.get(G)||null,O){console.log(`Work item ${N.id} has Epic ID ${G} from field ${K}: ${O}`);break}}else{O=z.trim(),console.log(`Work item ${N.id} has Epic name from field ${K}: ${O}`);break}}else if(typeof z=="number"&&(O=j.get(z)||null,O)){console.log(`Work item ${N.id} has Epic ID ${z} from field ${K}: ${O}`);break}}}}return O||console.log(`Work item ${N.id} (${N.fields["System.Title"]}) has no Epic found`),{id:N.id,fields:{"System.Title":N.fields["System.Title"],"System.Description":N.fields["System.Description"],"System.Tags":N.fields["System.Tags"],"System.WorkItemType":N.fields["System.WorkItemType"],"System.State":N.fields["System.State"],"Microsoft.VSTS.Common.Priority":N.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":N.fields["System.AreaPath"],"System.IterationPath":N.fields["System.IterationPath"],Epic:O||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${N.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function D2(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?(r=d,console.log(`Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}!r&&s!=="Epic"&&console.log(`Work item ${t.id} (${t.fields["System.Title"]}) has no Epic assigned`);const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function R2(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const di=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Ri=e=>new Date(e)<new Date,$2=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],QX=e=>e?e.trim().toLowerCase():"",XX=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Mf=(e,t,r)=>Math.min(Math.max(e,t),r),ZX=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Aw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},eZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},tZ=e=>eZ(Aw(e))>.6?"#111827":"#FFFFFF",M2=(e,t)=>{const{r,g:n,b:s}=Aw(e),i=1+t/100,l=Mf(Math.round(r*i),0,255),u=Mf(Math.round(n*i),0,255),d=Mf(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},rZ=(e,t)=>{const{r,g:n,b:s}=Aw(e);return`rgba(${r}, ${n}, ${s}, ${Mf(t,0,1)})`},Tn=(e,t)=>{const r=ZX(t);if(r){const l=tZ(r);return{background:r,text:l,border:M2(r,-20),badgeBackground:rZ(r,.15),badgeText:l,hoverBackground:M2(r,-5),hoverText:l}}const n=QX(e),s=n?XX(n)%$2.length:0,i=$2[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function i4({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:b,onNewProductColorChange:j,onCreateProduct:S,isCreatingProduct:k=!1,addHelperText:E,addButtonLabel:N="Add Product",addInputPlaceholder:O="e.g., Catalyst Cloud",allowDelete:P=!1,onRequestDeleteProduct:T}){const[R,K]=v.useState(!1),z=v.useRef(null),G=v.useRef(null),[W,q]=v.useState(!1),[de,oe]=v.useState(!1),J=v.useMemo(()=>t.find(ue=>ue.id===r)??null,[t,r]),Z=(J==null?void 0:J.name)??s??"",ae=Z?Tn(Z,(J==null?void 0:J.color_hex)??null):null,re=u||i||t.length===0;v.useEffect(()=>{if(!R)return;function ue(we){z.current&&!z.current.contains(we.target)&&K(!1)}function ye(we){we.key==="Escape"&&K(!1)}return document.addEventListener("mousedown",ue),document.addEventListener("keydown",ye),()=>{document.removeEventListener("mousedown",ue),document.removeEventListener("keydown",ye)}},[R]);const me=ue=>{n(ue),K(!1)},pe=!!(p&&x&&S),I=pe&&W,H=!!j,Pe=b??"#2D4660",Q=!!(e&&e.trim().length>0),ne=Q||pe;return o.jsxs("div",{className:`space-y-3 ${f}`,children:[o.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),o.jsxs("div",{className:"relative",ref:z,children:[ne&&o.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[Q&&o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),pe&&o.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?o.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[o.jsx("input",{type:"text",value:y,onChange:ue=>{oe(!1),x==null||x(ue.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:b&&y.trim().length>0?b:"#D1D5DB"}}),H&&y.trim().length>0&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:()=>{var ue;return(ue=G.current)==null?void 0:ue.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${b?"":"border-gray-300 bg-white"}`,style:b?{backgroundColor:b,borderColor:b}:void 0,"aria-label":"Choose product color",children:!b&&o.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),o.jsx("input",{ref:G,type:"color",value:Pe,onChange:ue=>{oe(!1),j==null||j(ue.target.value)},className:"sr-only"}),y.trim().length>0&&o.jsx("button",{type:"button",onClick:()=>oe(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${de?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&b&&de&&o.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:k?"Creating":"Create New Product"})]}):o.jsx("button",{type:"button",onClick:()=>q(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),o.jsxs("button",{type:"button",onClick:()=>!re&&K(ue=>!ue),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${re?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!re&&ae?{borderColor:ae.border}:void 0,"aria-expanded":R,"aria-haspopup":"listbox",children:[o.jsxs("div",{className:"flex items-center gap-2 truncate",children:[ae&&o.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:ae.background,borderColor:ae.border},"aria-hidden":"true"}),o.jsx("span",{className:`truncate ${Z?"":"text-gray-400"}`,style:ae?{color:ae.background}:void 0,children:Z||(t.length===0?"No products available":d)})]}),o.jsx(pn,{className:`ml-2 h-4 w-4 transition-transform ${R?"rotate-180":""} ${re?"text-gray-300":"text-gray-500"}`})]}),R&&!re&&o.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:o.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(ue=>{const ye=Tn(ue.name,ue.color_hex??null),we=r===ue.id;return o.jsxs("div",{className:"product-picker__item",style:{"--product-color":ye.background,"--product-light-bg":ye.badgeBackground,"--product-border-color":ye.border},children:[o.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>me(ue.id),"aria-selected":we,children:[o.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),o.jsx("span",{className:"flex-1 truncate font-medium",children:ue.name}),we&&o.jsx(kr,{className:"h-4 w-4 text-gray-400"})]}),P&&T&&o.jsx("button",{type:"button",onClick:B=>{B.stopPropagation(),K(!1),T(ue)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${ue.name}`,title:"Delete product",children:o.jsx(ei,{className:"h-4 w-4"})})]},ue.id)})})}),i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&o.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),pe&&E&&I&&o.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const F2=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],L2=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},nZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return F2[t%F2.length]};function fn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=L2(t[r]);if(i)return i}const n=L2(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return nZ(s)}const sZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],z2="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function U2({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(k){m.current&&!m.current.contains(k.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",b=l==="green"?"bg-green-50":"bg-blue-50",j=l==="green"?"text-green-600":"text-[#1E5461]";return o.jsxs("div",{ref:m,className:"relative",children:[s&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),o.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[o.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),o.jsx(pn,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>o.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?b:""}`,children:[o.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&o.jsx(kr,{className:`h-4 w-4 ${j}`})]},S))})]})}function Nf({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function k(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=k=>{t.includes(k)?r(t.filter(E=>E!==k)):r([...t,k])},b=(k,E)=>{E.stopPropagation(),r(t.filter(N=>N!==k))},j=k=>{k.stopPropagation(),r([])},S=i&&m?e.filter(k=>k.toLowerCase().includes(m.toLowerCase())):e;return o.jsxs("div",{ref:p,className:"relative",children:[s&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),o.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[o.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?o.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(k=>o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[k,!l&&o.jsx("button",{type:"button",onClick:E=>b(k,E),className:"ml-1 hover:text-[#173B65]",children:o.jsx(Xs,{className:"h-3 w-3"})})]},k))}),o.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&o.jsx("button",{type:"button",onClick:j,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Xs,{className:"h-4 w-4"})}),o.jsx(pn,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&o.jsx("div",{className:"p-2 border-b border-gray-200",children:o.jsx("input",{ref:y,type:"text",value:m,onChange:k=>f(k.target.value),onClick:k=>k.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),o.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(k=>o.jsxs("div",{onClick:()=>x(k),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(k)?"bg-[#2D4660]/5":""}`,children:[o.jsx("span",{className:"text-sm",children:k}),t.includes(k)&&o.jsx(kr,{className:"h-4 w-4 text-[#1E5461]"})]},k)):o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function iZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:b,resetSignal:j}){const S=r4,[k,E]=v.useState(!1),[N,O]=v.useState(null),[P,T]=v.useState(!1),[R,K]=v.useState(!1),[z,G]=v.useState(!1),W=v.useRef(null),q=v.useRef(!1),de=v.useRef(!1),oe=v.useRef(!1),J=v.useRef(!1),Z={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:ae,handleSubmit:re,watch:me,control:pe,setValue:I,reset:H}=xu({defaultValues:Z}),Pe=v.useCallback(()=>{H({...Z}),E(!1),de.current=!1,oe.current=!1,J.current=!1},[H]);v.useEffect(()=>{Pe()},[j,Pe]);const Q=me("workItemTypes"),ne=me("states"),ue=me("areaPaths"),ye=me("tags"),we=me("query"),B=v.useCallback((te,Ee,Ue,st,pt,St)=>{const _t=[];if(te&&te.length>0)if(te.length===1)_t.push(`[System.WorkItemType] = '${te[0]}'`);else{const bt=te.map(M=>`'${M}'`).join(", ");_t.push(`[System.WorkItemType] IN (${bt})`)}if(Ee&&Ee.length>0)if(Ee.length===1)_t.push(`[System.State] = '${Ee[0]}'`);else{const bt=Ee.map(M=>`'${M}'`).join(", ");_t.push(`[System.State] IN (${bt})`)}if(Ue&&Ue.length>0)if(Ue.length===1)_t.push(`[System.AreaPath] UNDER '${Ue[0]}'`);else{const bt=Ue.map(M=>`[System.AreaPath] UNDER '${M}'`);_t.push(`(${bt.join(" OR ")})`)}if(st&&st.length>0){const bt=st.map(M=>`[System.Tags] CONTAINS '${M}'`);_t.push(`(${bt.join(" OR ")})`)}return St&&pt&&_t.push(`(${pt})`),_t.length>0?_t.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(de.current||oe.current||J.current)&&m){if(!Q||Q.length===0){m(void 0);return}m(Q[0])}},[Q,m]),v.useEffect(()=>{if(de.current||oe.current||!f)return;(async()=>{K(!0);try{await f(Q&&Q.length>0?Q[0]:void 0,ne||[])}finally{K(!1)}})()},[Q,ne,f]),v.useEffect(()=>{if(oe.current||!p||!Q||Q.length===0)return;const te=async()=>{G(!0);try{await p(Q[0],ne||[],ue||[])}finally{G(!1)}},Ee=setTimeout(()=>{te()},100);return()=>{clearTimeout(Ee),G(!1)}},[Q,ne,ue,p]),v.useEffect(()=>{if(!y||oe.current||J.current||!ue||ue.length===0)return;const te=Q&&Q.length>0,Ee=ne&&ne.length>0;te&&Ee||(de.current=!0,y(ue).then(({types:Ue,states:st})=>{Ue.length>0&&!te&&I("workItemTypes",Ue,{shouldDirty:!1}),st.length>0&&!Ee&&I("states",st,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{de.current=!1},300)}))},[ue,Q,ne,y,I]),v.useEffect(()=>{x&&(de.current||J.current||!ye||ye.length===0||(oe.current=!0,x(ye).then(({types:te,states:Ee,areaPaths:Ue})=>{te.length>0&&I("workItemTypes",te,{shouldDirty:!1}),Ee.length>0&&I("states",Ee,{shouldDirty:!1}),Ue.length>0&&I("areaPaths",Ue,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{oe.current=!1},300)})))},[ye,x,I]),v.useEffect(()=>{!b||de.current||oe.current||!ne||ne.length===0||Q&&Q.length>0||(J.current=!0,b(ne).then(({types:Ee})=>{Ee.length>0&&I("workItemTypes",Ee,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{J.current=!1},300)}))},[ne,Q,b,I]),v.useEffect(()=>{if(ne&&ne.length>0&&s.length>0){const te=ne.filter(Ee=>s.includes(Ee));te.length!==ne.length&&I("states",te)}},[s,ne,I]),v.useEffect(()=>{if(ue&&ue.length>0&&i.length>0){const te=ue.filter(Ee=>i.includes(Ee));te.length!==ue.length&&(I("areaPaths",te),te.length===0&&I("tags",[]))}},[i,ue,I]),v.useEffect(()=>{if(ye&&ye.length>0&&l.length>0){const te=ye.filter(Ee=>l.includes(Ee));te.length!==ye.length&&I("tags",te)}},[l,ye,I]);const Re=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!Q||Q.length===0){O(null);return}try{T(!0);const te=Q[0],Ee=B(Q||[],ne||[],ue||[],ye||[],we||"",k);let Ue="";Ee?Ue=`SELECT [System.Id] FROM WorkItems WHERE ${Ee}`:Ue=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${te}' AND [System.State] = 'Active'`;const st=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,pt=await fetch(st,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Ue})});if(!pt.ok)throw new Error(`Azure DevOps query failed: ${pt.status} ${pt.statusText}`);const St=await pt.json(),_t=St.workItems?St.workItems.length:0;O(_t)}catch(te){console.error("[FilterForm] Error fetching feature count:",te),O(null)}finally{T(!1)}},[e,Q,ne,ue,ye,we,k,B]);v.useEffect(()=>(W.current!==null&&window.clearTimeout(W.current),O(null),Q&&Q.length>0&&e.enabled&&e.accessToken&&(W.current=window.setTimeout(()=>{Re()},300)),()=>{W.current!==null&&window.clearTimeout(W.current)}),[Q,ne,ue,ye,we,k,e.enabled,e.accessToken,Re]),v.useEffect(()=>{if(d&&!q.current&&u){const te=u.length;O(te)}q.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!P&&O(u.length)},[u,P]),v.useEffect(()=>{const te=B(Q||[],ne||[],ue||[],ye||[],we||"",k),Ee={...e,workItemType:Q&&Q.length>0?Q[0]:e.workItemType||"Feature",query:te,states:ne&&ne.length>0?ne:void 0,areaPath:ue&&ue.length>0?ue[0]:void 0,tags:ye&&ye.length>0?ye:void 0},Ue=window.setTimeout(()=>{t(Ee)},100);return()=>{window.clearTimeout(Ue)}},[Q,ne,ue,ye,we,k,B,t]);const tt=async te=>{await r()};return o.jsxs("form",{onSubmit:re(tt),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[o.jsx(VM,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:Pe,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),o.jsx("button",{type:"button",onClick:()=>E(!k),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:k?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),o.jsx(Cl,{name:"workItemTypes",control:pe,render:({field:te})=>o.jsx(Nf,{options:S,value:te.value,onChange:te.onChange,placeholder:"Select types..."})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),o.jsx(Cl,{name:"states",control:pe,render:({field:te})=>o.jsx(Nf,{options:s,value:te.value,onChange:te.onChange,placeholder:"Select states...",disabled:s.length===0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),o.jsx(Cl,{name:"areaPaths",control:pe,render:({field:te})=>o.jsx(Nf,{options:i,value:te.value,onChange:te.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:R?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),o.jsx(Cl,{name:"tags",control:pe,render:({field:te})=>o.jsx(Nf,{options:l,value:te.value,onChange:te.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!z})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!Q||Q.length===0?"Select work item type to see tags":z?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),k&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),o.jsx("input",{...ae("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",o.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(ut,{variant:"gold",type:"submit",disabled:(()=>{const te=((Q==null?void 0:Q.length)??0)>0,Ee=((ne==null?void 0:ne.length)??0)>0,Ue=((ue==null?void 0:ue.length)??0)>0,st=((ye==null?void 0:ye.length)??0)>0,pt=we&&we.trim().length>0;return n||P||!(te||Ee||Ue||st||pt)})(),className:"flex items-center",children:[n&&o.jsx(vo,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":N!==null&&!P?`Preview ${N} Feature${N!==1?"s":""}`:"Preview Features"]})})]})}function aZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[b,j]=v.useState(!1),[S,k]=v.useState("#2D4660"),[E,N]=v.useState(null),[O,P]=v.useState(!1);v.useRef(null);const T=v.useMemo(()=>{const I={};return u.forEach(H=>{H.id&&H.name&&(I[H.id]=H.name)}),I},[u]),{register:R,handleSubmit:K,watch:z,reset:G,control:W,setValue:q,formState:{errors:de}}=xu({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{G({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser})},[e,G]);const oe=e.productName??e.product_name??l??"",J=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(J){u.some(Pe=>Pe.id===J)&&q("productId",J,{shouldDirty:!1,shouldTouch:!1});return}if(!oe)return;const I=u.find(H=>H.name.toLowerCase()===oe.toLowerCase());I&&q("productId",I.id,{shouldDirty:!1,shouldTouch:!1})},[u,J,oe,q]);const Z=z("useAutoVotes"),ae=z("productId"),re=v.useMemo(()=>!E||!ae?u:u.map(I=>I.id===ae?{...I,color_hex:E}:I),[u,E,ae]);v.useEffect(()=>{if(!ae)return;u.some(H=>H.id===ae)||q("productId","",{shouldDirty:!0,shouldTouch:!0})},[ae,u,q]),v.useEffect(()=>{if(ae&&u.length>0){const I=u.find(H=>H.id===ae);if(I){const H=I.color_hex??null;x(H),k(H||"#2D4660"),N(null),j(!1)}}else ae||(x(null),k("#2D4660"),N(null),j(!1))},[ae,u]);const me=Z?Math.max(1,Math.floor(t/2)):z("votesPerUser"),pe=async I=>{try{if(console.log("=== FORM SUBMISSION STARTED ==="),console.log("handleFormSubmit called with form data:",I),console.log("data.productId:",I.productId),console.log("selectedProductId from watch:",ae),console.log("Form errors:",de),E&&ae){console.log("Updating product color:",E,"for product:",ae),P(!0);try{await e6(ae,{color_hex:E}),p&&p(),N(null),x(E),console.log("Product color updated successfully")}catch(H){console.error("Error updating product color:",H)}finally{P(!1)}}console.log("Calling onSubmit with data:",I),r(I),console.log("=== FORM SUBMISSION COMPLETED ===")}catch(H){throw console.error("ERROR in handleFormSubmit:",H),H}};return o.jsxs("form",{onSubmit:K(I=>(console.log("FORM onSubmit triggered via handleSubmit"),pe(I)),I=>{console.log("FORM VALIDATION ERRORS:",I)}),children:[o.jsx(Cl,{control:W,name:"productId",render:({field:I})=>{const H=re.find(B=>B.id===I.value)??null,Pe=I.value?T[I.value]??null:null,Q=H?null:Pe??(oe||null),ne=!!I.value,ue=(H==null?void 0:H.color_hex)||null,ye=H?Tn(H.name,ue??null):null,we=(ye==null?void 0:ye.background)||null;return o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx(i4,{products:re,value:I.value,onChange:B=>{console.log("ProductPicker onChange called with value:",B),I.onChange(B)},fallbackName:Q,isLoading:d,error:m,disabled:d||re.length===0,helperText:!d&&re.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),ne&&o.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),o.jsx("button",{type:"button",onClick:()=>{const B=we||"#2D4660";k(B),x(B),j(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:we||"#2D4660",borderColor:(ye==null?void 0:ye.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),o.jsx("input",{...R("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),de.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.title.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),o.jsx("textarea",{...R("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),de.goal&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.goal.message})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("input",{type:"date",...R("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),de.startDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.startDate.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("input",{type:"date",...R("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),de.endDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.endDate.message})]})]}),o.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("input",{type:"checkbox",...R("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",me," votes"]})]})]}),!Z&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),o.jsx("input",{type:"number",min:"1",...R("votesPerUser",{required:Z?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),de.votesPerUser&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.votesPerUser.message})]})]}),o.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs(ut,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[o.jsx(ei,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),o.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[o.jsx(ut,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),o.jsx(ut,{variant:"primary",type:"button",onClick:async I=>{I.preventDefault(),I.stopPropagation(),console.log("SAVE BUTTON CLICKED - Manual trigger");const H=z();console.log("Form data:",H),console.log("Form errors:",de);const Pe=await K(Q=>(console.log("Manual handleFormSubmit called with:",Q),pe(Q)),Q=>{console.log("Form validation failed:",Q),alert("Please fix form errors: "+JSON.stringify(Q))})();console.log("Form submission result:",Pe)},children:"Save Changes"})]})]}),b&&ae&&(()=>{const I=re.find(H=>H.id===ae);return I?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{j(!1),x(I.color_hex??null),k(I.color_hex??"#2D4660"),N(null)},children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:H=>H.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:H=>{k(H.target.value),x(H.target.value)},ref:H=>{H&&b&&setTimeout(()=>H.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsx("button",{type:"button",onClick:()=>{if(!ae||!S)return;const H=re.find(Q=>Q.id===ae);if(!H)return;if((H.color_hex||null)===S){j(!1);return}N(S),x(S),j(!1)},disabled:O,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:O?o.jsx(vo,{className:"h-8 w-8 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(kr,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function oZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:b,onUpdateAzureDevOpsConfig:j,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:k,isFetchingAzureDevOps:E,azureFetchError:N,onInitiateOAuth:O,availableStates:P,availableAreaPaths:T,availableTags:R,previewFeatures:K,showPreviewModal:z,setShowPreviewModal:G,onConfirmSync:W,onUpdateVotingSession:q,onFetchStatesForType:de,onFetchAreaPathsForTypeAndState:oe,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:Z,onFetchTypesAndStatesForTags:ae,onFetchTypesAndAreaPathsForStates:re,suggestedFeatures:me,otherSessions:pe,onPromoteSuggestion:I,onMoveSuggestion:H,onEditSuggestion:Pe,onDeleteSuggestion:Q,adminPerspective:ne="session",projectOptions:ue}){const ye=bs(),{currentUser:we,currentSession:B}=xi(),[Re,tt]=v.useState(()=>b.project?b.project:ue[0]??""),[te,Ee]=v.useState(0);v.useEffect(()=>{b.project?tt(b.project):ue.length>0?tt(ue[0]):tt("")},[b.project,ue]);const[Ue,st]=v.useState(!1),[pt,St]=v.useState(!1),[_t,bt]=v.useState(!1),[M,Y]=v.useState(!1),se=v.useRef(null),[be,je]=v.useState(!1),ve=v.useRef(null),[Fe,Ne]=v.useState(null),[Xe,vt]=v.useState(!1),[Qt,Et]=v.useState(null),[xt,kt]=v.useState(null),[At,tr]=v.useState(""),[gr,sr]=v.useState(null),[Ft,an]=v.useState(!1),[ir,Er]=v.useState(null),[Dt,Br]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[cr,yr]=v.useState(null),[Rt,Wr]=v.useState(!1),[Ar,Mn]=v.useState(null),[Vr,vr]=v.useState(!1),[xn,Fn]=v.useState(null),[Ut,ur]=v.useState([]),[qr,Cn]=v.useState(!1),[on,Pr]=v.useState([]),[Hr,Kr]=v.useState(!1),[wn,Gr]=v.useState(null),[ln,fe]=v.useState(null),[_e,Me]=v.useState(!1),Ye=v.useMemo(()=>{const L={};return on.forEach(We=>{We.id&&We.name&&(L[We.id]=We.name)}),L},[on]),nt=v.useMemo(()=>{const L={};return on.forEach(We=>{We.id&&We.color_hex&&(L[We.id]=We.color_hex)}),L},[on]),D=v.useMemo(()=>fn({...x,product_id:x.product_id??(B==null?void 0:B.product_id)??x.productId??null,product_name:null},Ye),[x,B,Ye]),F=v.useMemo(()=>{const L=x.product_id??x.productId??null;return L?nt[L]??null:null},[x,nt]),ge=v.useMemo(()=>Tn(D,F),[D,F]);v.useEffect(()=>{(async()=>{const We=(we==null?void 0:we.tenant_id)??(we==null?void 0:we.tenantId)??null;if(!We){Pr([]),Gr(null);return}Kr(!0),Gr(null);try{const ht=await Ol(We);Pr(ht)}catch(ht){console.error("Error loading products for admin dashboard:",ht),Li!=null&&Li(ht)?Gr("Products are not configured yet. Please create the `products` table in Supabase."):Gr("Unable to load products. Please try again."),Pr([])}finally{Kr(!1)}})()},[we==null?void 0:we.tenant_id,we==null?void 0:we.tenantId]);const xe=v.useCallback(async()=>{if(ln){Me(!0);try{await PC(ln.id),Pr(L=>L.filter(We=>We.id!==ln.id)),fe(null)}catch(L){console.error("Error deleting product from admin dashboard:",L),Gr("Failed to delete product. Please try again.")}finally{Me(!1)}}},[ln]),Te=v.useCallback(L=>{const We=L==null?void 0:L.trim();if(We){if(tt(We),We!==(b.project||"")){const ht={...b,project:We};j(ht)}Ee(ht=>ht+1)}},[b,j]),{register:Oe,handleSubmit:Ze,reset:$e}=xu({defaultValues:{reason:"",details:""}}),{control:Le,handleSubmit:C,reset:X,register:le,formState:{errors:De}}=xu({defaultValues:{reason:"",details:""}}),Se=x.isActive?o.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):Ri(x.endDate)?o.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):o.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),Qe=v.useMemo(()=>{const L=ht=>{const ar=ht.type==="reopen",Yr=ht.createdAt||null,dc=ht.actorName||"Admin",fc=Yr?` ${di(Yr)}`:"";return{id:ht.id,type:ht.type,reason:ht.reason,details:ht.details??null,title:ar?`Reopened${fc} by ${dc}`:`Ended early${fc} by ${dc}`,description:`${ht.reason}${ht.details?": "+ht.details:""}`,iconBgClass:ar?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:ar?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:ar?"text-[#1E5461]":"text-[#C89212]",textColorClass:ar?"text-[#1E5461]":"text-[#6A4234]"}};if(Ut.length>0)return Ut.map(ht=>L(ht));const We=[];return x.reopenReason&&We.push({id:"fallback-reopen",sessionId:(B==null?void 0:B.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&We.push({id:"fallback-ended-early",sessionId:(B==null?void 0:B.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),We.map(ht=>L(ht))},[Ut,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,B==null?void 0:B.id]);v.useEffect(()=>{Qe.length<=2&&Cn(!1)},[Qe.length]);const Ke=v.useCallback(async()=>{if(!(B!=null&&B.id)){ur([]);return}try{const L=await o6(B.id);ur(L)}catch(L){console.error("Error loading session status notes:",L)}},[B==null?void 0:B.id]);v.useEffect(()=>{Ke()},[Ke]);const gt=v.useCallback(async L=>{if(B!=null&&B.id)try{const We=await l6({session_id:B.id,type:L.type,reason:L.reason,details:L.details??null,actor_id:L.actorId??null,actor_name:L.actorName||"Admin"});ur(ht=>{const ar=ht.findIndex(Yr=>Yr.id===We.id);if(ar!==-1){const Yr=[...ht];return Yr[ar]=We,Yr}return[We,...ht]})}catch(We){console.error("Error logging session status note:",We)}},[B==null?void 0:B.id]);v.useEffect(()=>{ir&&(Br({title:ir.title,summary:ir.summary??"",whatWouldItDo:ir.whatWouldItDo??"",howWouldItWork:ir.howWouldItWork??""}),yr(null))},[ir]),v.useEffect(()=>{xt&&pe.length>0?tr(pe[0].id):tr(""),sr(null)},[xt,pe]);const En=L=>{console.log("handleSessionUpdate called with data:",L),console.log("Current products:",on),console.log("Current votingSession.product_id:",x.product_id);const We=L.productId&&L.productId.trim()!==""?L.productId:null;console.log("Extracted productId:",We);const ht=We&&on.find(Yr=>Yr.id===We)||null;console.log("Found selectedProduct:",ht);const ar={...x,title:L.title,goal:L.goal,votesPerUser:L.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(L.votesPerUser),useAutoVotes:L.useAutoVotes,startDate:new Date(L.startDate).toISOString(),endDate:new Date(L.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(ht==null?void 0:ht.id)??null,product_name:null};console.log("Updated session product_id:",ar.product_id),console.log("Full updatedSession:",ar),q(ar),st(!1)},Ln=L=>{var ar,Yr;const We=new Date().toISOString(),ht={...x,originalEndDate:x.endDate,endDate:We,isActive:!1,endedEarlyBy:(we==null?void 0:we.name)||"Admin",endedEarlyReason:L.reason,endedEarlyDetails:(ar=L.details)!=null&&ar.trim()?L.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};q(ht),gt({type:"ended-early",reason:L.reason,details:(Yr=L.details)!=null&&Yr.trim()?L.details.trim():null,actorName:(we==null?void 0:we.name)||"Admin",actorId:(we==null?void 0:we.id)??null}),St(!1),$e()},es=L=>{var ar,Yr;const We=new Date;We.setDate(We.getDate()+7);const ht={...x,endDate:We.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:L.reason,reopenDetails:(ar=L.details)!=null&&ar.trim()?L.details.trim():null,reopenedBy:(we==null?void 0:we.name)||"Admin",reopenedAt:new Date().toISOString()};q(ht),gt({type:"reopen",reason:L.reason,details:(Yr=L.details)!=null&&Yr.trim()?L.details.trim():null,actorName:(we==null?void 0:we.name)||"Admin",actorId:(we==null?void 0:we.id)??null}),bt(!1),X()},bi=async(L,We)=>{const ht={...b,organization:L,project:We};j(ht),O()},aa=L=>{Er(L)},ts=async()=>{if(!ir)return;const L=Dt.title.trim();if(!L){yr("Title is required.");return}Wr(!0),yr(null);try{await Pe(ir.id,{title:L,summary:Dt.summary.trim()?Dt.summary.trim():null,whatWouldItDo:Dt.whatWouldItDo.trim()?Dt.whatWouldItDo.trim():null,howWouldItWork:Dt.howWouldItWork.trim()?Dt.howWouldItWork.trim():null}),Er(null)}catch(We){console.error("Error updating suggestion:",We),yr("Failed to update the suggestion. Please try again.")}finally{Wr(!1)}},qa=async()=>{if(xt){if(!At){sr("Please select a session.");return}an(!0),sr(null);try{await H(xt.id,At),kt(null)}catch(L){console.error("Error moving suggestion:",L),sr("Failed to move the suggestion. Please try again.")}finally{an(!1)}}},ji=async()=>{if(Fe){vt(!0),Et(null);try{await I(Fe.id),Ne(null)}catch(L){console.error("Error promoting suggestion:",L),Et("Failed to move the suggestion into the current session.")}finally{vt(!1)}}},Tm=async()=>{if(Ar){vr(!0),Fn(null);try{await Q(Ar.id),Mn(null)}catch(L){console.error("Error deleting suggestion:",L),Fn("Failed to delete the suggestion. Please try again.")}finally{vr(!1)}}},uc=v.useCallback(()=>{st(!1),i()},[i]);return v.useEffect(()=>{if(!M)return;const L=We=>{se.current&&!se.current.contains(We.target)&&Y(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[M]),v.useEffect(()=>{if(!be)return;const L=We=>{ve.current&&!ve.current.contains(We.target)&&je(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[be]),o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2 cursor-pointer",onClick:()=>ye("/sessions"),children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Om,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"})]}),o.jsxs("div",{ref:se,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[o.jsx(hn,{className:"mr-2 h-4 w-4"}),"Vote!"]}),o.jsxs("button",{onClick:()=>ye(ne==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[ne==="system"?o.jsx(jr,{className:"mr-2 h-4 w-4"}):o.jsx(yn,{className:"mr-2 h-4 w-4"}),ne==="system"?"User Management":"Stakeholders"]}),o.jsxs("button",{onClick:()=>ye("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(yn,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),o.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[o.jsx(tn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>Y(!M),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),M&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{Y(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(hn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),o.jsxs("button",{onClick:()=>{Y(!1),ye(ne==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[ne==="system"?o.jsx(jr,{className:"h-4 w-4 mr-2 text-gray-700"}):o.jsx(yn,{className:"h-4 w-4 mr-2 text-gray-700"}),ne==="system"?"User Management":"Stakeholders"]}),o.jsxs("button",{onClick:()=>{Y(!1),ye("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(yn,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),o.jsxs("button",{onClick:()=>{Y(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(If,{className:"h-4 w-4 mr-2 text-gray-700"}),Ri(x.endDate)?"Final Results":"Current Results"]}),o.jsxs("button",{onClick:()=>{Y(!1),st(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),o.jsxs("button",{onClick:()=>{Y(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:D?"3.5rem":"0"},children:[D&&o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:ge.background,color:ge.text,borderColor:ge.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:D})]}),o.jsxs("div",{className:"pt-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",o.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),o.jsxs("div",{ref:ve,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs(ut,{variant:"gold",onClick:s,className:"flex items-center",children:[o.jsx(If,{className:"h-4 w-4 mr-2"}),Ri(x.endDate)?"Final Results":"Current Results"]}),o.jsxs(ut,{variant:"primary",onClick:()=>st(!0),className:"flex items-center",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>je(!be),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),be&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{je(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(If,{className:"h-4 w-4 mr-2 text-gray-700"}),Ri(x.endDate)?"Final Results":"Current Results"]}),o.jsxs("button",{onClick:()=>{je(!1),st(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),Hr&&o.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),wn&&o.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:wn}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),o.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[di(x.startDate)," - ",di(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&o.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[o.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(Tt,{className:"h-3 w-3 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[o.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&o.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),o.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Yh,{className:"h-4 w-4 mr-1 text-gray-600"}),Se]}),(x.isActive||Ri(x.endDate))&&o.jsx(ut,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?St(!0):(X(),bt(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[o.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),o.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),o.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),o.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),o.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:o.jsx(vF,{className:"h-8 w-8 md:h-10 md:w-10"})}),o.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),o.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),o.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),o.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),Qe.length>2&&o.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[o.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:qr?o.jsx(tF,{className:"h-2.5 w-2.5"}):o.jsx(us,{className:"h-2.5 w-2.5"})}),o.jsx("button",{type:"button",onClick:()=>Cn(L=>!L),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:qr?"Show Less":"Show More"})]})]}),Qe.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:Qe.slice(0,qr?Qe.length:2).map(L=>{const We=L.type==="reopen"?vo:Tt;return o.jsxs("div",{className:`flex items-start gap-3 text-sm ${L.textColorClass}`,children:[o.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${L.iconBgClass} ${L.iconBorderClass} border rounded-lg`,children:o.jsx(We,{className:`h-3.5 w-3.5 ${L.iconColorClass}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-800",children:L.title}),o.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:L.description})]})]},L.id)})}),Qe.length>2&&!qr&&o.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:z2,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),b.enabled?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[o.jsx(kr,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[o.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:"Organization:"})," ",b.organization]}),o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:"Project:"}),o.jsx("div",{className:"min-w-[150px]",children:o.jsx(U2,{options:ue,value:Re,onChange:Te,variant:"green"})})]}),b.lastSyncTime&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",di(b.lastSyncTime)]})]})]}),o.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),o.jsxs("button",{onClick:k,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[o.jsx(Xs,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),o.jsx(iZ,{config:b,onUpdateConfig:j,onPreview:S,isFetching:E,availableStates:P,availableAreaPaths:T,availableTags:R,previewFeatures:K,showPreviewModal:z,onFetchStatesForType:de,onFetchAreaPathsForTypeAndState:oe,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:Z,onFetchTypesAndStatesForTags:ae,onFetchTypesAndAreaPathsForStates:re,resetSignal:te})]}):o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[o.jsx("img",{src:z2,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),o.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),o.jsx(ut,{variant:"primary",onClick:()=>bi("newmill",Re||ue[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?o.jsxs(o.Fragment,{children:[o.jsx(vo,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),N&&o.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:N})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[me.length," ",me.length===1?"suggestion":"suggestions"]})]}),me.length===0?o.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):o.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:me.map(L=>{const We=L.requester_name||L.requester_email||"Anonymous";return o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{className:"md:flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:L.title}),o.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",o.jsx("span",{className:"font-medium text-[#1E5461]",children:We}),L.requester_email&&o.jsxs(o.Fragment,{children:[" ","(",o.jsx("a",{href:`mailto:${L.requester_email}`,className:"text-[#1E5461] hover:underline",children:L.requester_email}),")"]})," on ",di(L.created_at)]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[o.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[o.jsxs(ut,{variant:"primary",onClick:()=>{Et(null),Ne(L)},className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(EM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),o.jsxs(ut,{variant:"secondary",onClick:()=>{pe.length>0&&kt(L)},disabled:pe.length===0,className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(gs,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),o.jsxs(ut,{variant:"secondary",onClick:()=>aa(L),className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(SS,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),o.jsxs(ut,{variant:"danger",onClick:()=>{Fn(null),Mn(L)},className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(ei,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),pe.length===0&&o.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Tt,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.summary&&L.summary.length>0?L.summary:"No summary provided."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Y0,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.whatWouldItDo&&L.whatWouldItDo.length>0?L.whatWouldItDo:"No details provided."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(kF,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.howWouldItWork&&L.howWouldItWork.length>0?L.howWouldItWork:"No implementation details provided."})]})]})]})},L.id)})})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),o.jsxs(ut,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[o.jsx(us,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),o.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),o.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),o.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),o.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),o.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(L=>o.jsxs("tr",{className:"align-top group",children:[o.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:o.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[L.title,L.azureDevOpsId&&o.jsx("div",{className:"mt-1",children:o.jsx(Lh,{id:L.azureDevOpsId,url:L.azureDevOpsUrl||""})})]})}),o.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:o.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:L.description||o.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:L.epic&&o.jsx(Rl,{name:L.epic})}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:L.state&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:L.state})}),o.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:o.jsx("div",{className:"text-gray-600",children:L.areaPath&&typeof L.areaPath=="string"&&L.areaPath.trim()!==""?o.jsx("div",{className:"max-w-xs break-words",children:L.areaPath}):o.jsx("span",{className:"text-gray-400",children:"-"})})}),o.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:L.tags&&L.tags.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[L.tags.slice(0,3).map((We,ht)=>o.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:We},ht)),L.tags.length>3&&o.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",L.tags.length-3]})]}):o.jsx("span",{className:"text-gray-400",children:"-"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:L.votes}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>f(L),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:o.jsx(SS,{className:"h-5 w-5"})}),o.jsx("button",{onClick:()=>n(L.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:o.jsx(ei,{className:"h-5 w-5"})})]})]},L.id))})]})})]}),o.jsx(Kn,{isOpen:Fe!==null,onClose:()=>{Xe||(Ne(null),Et(null))},title:"Move Suggestion to Current Session",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",o.jsx("span",{className:"font-semibold text-[#2D4660]",children:Fe==null?void 0:Fe.title})," into the current session so it can be managed and voted on."]}),Qt&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Qt}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ut,{variant:"secondary",onClick:()=>{Xe||(Ne(null),Et(null))},disabled:Xe,children:"Cancel"}),o.jsx(ut,{variant:"primary",onClick:ji,disabled:Xe,children:Xe?"Moving...":"Move to Current Session"})]})]})}),o.jsx(Kn,{isOpen:xt!==null,onClose:()=>{Ft||(kt(null),sr(null))},title:"Move to Future Session",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",o.jsx("span",{className:"font-semibold text-[#2D4660]",children:xt==null?void 0:xt.title}),"."]}),pe.length>0?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),o.jsx("select",{value:At,onChange:L=>tr(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:Ft,children:pe.map(L=>o.jsxs("option",{value:L.id,children:[L.title," (Starts ",di(L.startDate),")"]},L.id))})]}):o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),gr&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:gr}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ut,{variant:"secondary",onClick:()=>{Ft||(kt(null),sr(null))},disabled:Ft,children:"Cancel"}),o.jsx(ut,{variant:"primary",onClick:qa,disabled:Ft||pe.length===0,children:Ft?"Moving...":"Move to Session"})]})]})}),o.jsx(Kn,{isOpen:ir!==null,onClose:()=>{Rt||(Er(null),yr(null))},title:"Edit Suggested Feature",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:Dt.title,onChange:L=>Br(We=>({...We,title:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Rt})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),o.jsx("textarea",{value:Dt.summary,onChange:L=>Br(We=>({...We,summary:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Rt})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),o.jsx("textarea",{value:Dt.whatWouldItDo,onChange:L=>Br(We=>({...We,whatWouldItDo:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Rt})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),o.jsx("textarea",{value:Dt.howWouldItWork,onChange:L=>Br(We=>({...We,howWouldItWork:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Rt})]}),cr&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:cr}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ut,{variant:"secondary",onClick:()=>{Rt||(Er(null),yr(null))},disabled:Rt,children:"Cancel"}),o.jsx(ut,{variant:"primary",onClick:ts,disabled:Rt,children:Rt?"Saving...":"Save Changes"})]})]})}),o.jsx(Kn,{isOpen:Ar!==null,onClose:()=>{Vr||(Mn(null),Fn(null))},title:"Delete Suggested Feature",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold text-[#591D0F]",children:Ar==null?void 0:Ar.title}),"? This action cannot be undone."]}),xn&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:xn}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ut,{variant:"secondary",onClick:()=>{Vr||(Mn(null),Fn(null))},disabled:Vr,children:"Cancel"}),o.jsx(ut,{variant:"danger",onClick:Tm,disabled:Vr,children:Vr?"Deleting...":"Delete"})]})]})}),o.jsx(Kn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:o.jsx(W2,{onSubmit:L=>{t(L),d(!1)},onCancel:()=>d(!1)})}),o.jsx(Kn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&o.jsx(W2,{feature:m,onSubmit:L=>{r({...m,...L}),f(null)},onCancel:()=>f(null)})}),o.jsx(Kn,{isOpen:Ue,onClose:()=>st(!1),title:"Edit Session Settings",children:o.jsx(aZ,{session:x,featureCount:e.length,onSubmit:En,onCancel:()=>st(!1),onRequestDeleteSession:uc,isDeletingSession:l,productName:D,products:on,isLoadingProducts:Hr,productError:wn,onRequestDeleteProduct:L=>fe(L),onProductColorUpdated:async()=>{const L=(we==null?void 0:we.tenant_id)??(we==null?void 0:we.tenantId)??null;if(L)try{const We=await Ol(L);Pr(We)}catch(We){console.error("Error refreshing products after color update:",We)}}})}),ln&&o.jsxs(Kn,{isOpen:!0,onClose:()=>fe(null),title:"Delete Product",children:[o.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold",children:ln.name}),"? This will remove it for everyone in your tenant."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(ut,{variant:"secondary",onClick:()=>fe(null),disabled:_e,children:"Cancel"}),o.jsx(ut,{variant:"danger",onClick:xe,disabled:_e,children:_e?"Deleting...":"Delete"})]})]}),o.jsx(Kn,{isOpen:z,onClose:()=>G(!1),title:"Preview Azure DevOps Features",maxWidth:"max-w-4xl",children:o.jsx("div",{className:"space-y-4",children:K&&K.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:o.jsx("p",{className:"text-[#1E5461] font-medium",children:"Review the work items below. If they look correct, add them to your voting session."})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:K.map(L=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h4",{className:"text-base font-semibold text-gray-900",children:L.title})}),L.workItemType!=="Feature"&&L.epic&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),o.jsx(Rl,{name:L.epic})]}),L.description&&L.description.trim()!==""?o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),o.jsx("p",{className:"text-xs text-gray-700 line-clamp-3",children:L.description})]}):null,L.state&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"State"}),o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:L.state})]}),L.workItemType==="Feature"&&L.epic&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),o.jsx(Rl,{name:L.epic})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Work Item Type"}),o.jsxs("div",{className:"flex items-center gap-2",children:[L.workItemType&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:L.workItemType}),L.azureDevOpsId&&o.jsx(Lh,{id:L.azureDevOpsId,url:L.azureDevOpsUrl||""})]})]}),L.areaPath&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Area Path"}),o.jsx("p",{className:"text-xs text-gray-700 break-words",children:L.areaPath})]}),L.tags&&L.tags.length>0&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:L.tags.map((We,ht)=>o.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:We},ht))})]})]},L.id))})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[o.jsx(ut,{variant:"secondary",onClick:()=>G(!1),children:"Cancel"}),o.jsxs(ut,{variant:"primary",onClick:async()=>{await W(!1),G(!1)},className:"flex items-center",children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Add ",K.length," Feature",K.length!==1?"s":""]}),o.jsxs(ut,{variant:"danger",onClick:async()=>{await W(!0),G(!1)},className:"flex items-center",children:[o.jsx(vo,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})}),o.jsx(Kn,{isOpen:_t,onClose:()=>{bt(!1),X()},title:"Reopen Session",children:o.jsxs("form",{onSubmit:C(es),className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),o.jsx(Cl,{control:Le,name:"reason",rules:{required:"Please select a reason"},render:({field:L})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),o.jsx(U2,{options:sZ,value:L.value,onChange:L.onChange,placeholder:"Select a reason..."}),De.reason&&o.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:De.reason.message})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),o.jsx("textarea",{...le("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx(ut,{variant:"secondary",type:"button",onClick:()=>{bt(!1),X()},children:"Cancel"}),o.jsx(ut,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),o.jsx(Kn,{isOpen:pt,onClose:()=>{St(!1),$e()},title:"End Session Early",children:o.jsxs("form",{onSubmit:Ze(Ln),className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),o.jsxs("select",{...Oe("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[o.jsx("option",{value:"",children:"Select a reason..."}),o.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),o.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),o.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),o.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),o.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),o.jsx("option",{value:"Low Participation",children:"Low participation rate"}),o.jsx("option",{value:"Other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),o.jsx("textarea",{...Oe("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),o.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[o.jsx("p",{className:"font-medium mb-1",children:"Note:"}),o.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx(ut,{variant:"secondary",type:"button",onClick:()=>{St(!1),$e()},children:"Cancel"}),o.jsx(ut,{variant:"danger",type:"submit",children:"End Session Now"})]})]})})]})}const B2=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],lZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},cZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},uZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],a4=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,o4=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},l4=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",c4=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",dZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},fZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Ff=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",dv=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},hZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Om({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?o.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:o.jsx("div",{className:"flex items-center justify-center w-full h-full",children:o.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):o.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const ut=dt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#A67810]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return o.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class Kn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl"}=this.props;return t?o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[o.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:r,"aria-hidden":"true"}),o.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-5",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[o.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:o.jsx(Y0,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),o.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),o.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"mt-2",children:s})]})]})}):null}}const Rl=dt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Ff(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return o.jsxs("div",{className:i,children:[o.jsx(mF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),o.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),Lh=dt.memo(function({id:t,url:r}){return t?o.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[o.jsx(UM,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),mZ=dt.memo(function({endDate:t}){const r=o4(t),n=l4(r),s=c4(r);return o.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:`h-5 w-5 mr-2 ${n}`}),o.jsxs("div",{children:[o.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",di(t)]}),o.jsx("div",{className:"text-sm mt-1",children:r<=0?o.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):o.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function pZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(hZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),o.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[o.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:o.jsx(cF,{className:"h-4 w-4"})}),o.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Lf=dt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[o.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[o.jsx("div",{className:f,children:d==="delete"?o.jsx(ei,{className:"h-5 w-5"}):o.jsx(Tt,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),o.jsx("div",{className:"p-4 bg-white space-y-4",children:o.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),o.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),gZ=dt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),b=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},j=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return o.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${j()}`,children:o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&o.jsx("div",{className:"flex justify-end mb-4",children:o.jsx(Lh,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?o.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):o.jsxs("div",{className:"mb-4 flex-grow",children:[o.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&o.jsx("div",{className:"transition-all duration-300",children:f?o.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[o.jsx(kr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),o.jsx("span",{children:"Thank you! Your request has been sent."})]}):o.jsxs("button",{onClick:b,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2 flex-shrink-0"}),o.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&o.jsx("div",{className:"mt-auto pt-3",children:o.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&o.jsx(Rl,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),o.jsx("div",{className:"flex items-center space-x-2",children:r===0?o.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:o.jsx(pn,{className:"h-6 w-6"})}),o.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),o.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:o.jsx(RM,{className:"h-6 w-6"})})]})})]})})]})})});function yZ({feature:e,onClose:t}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),o.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),e.voters.length===0?o.jsx("p",{className:"text-gray-500",children:"No votes yet"}):o.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>o.jsxs("li",{className:"py-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:r.name}),o.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),o.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function vZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const[m,f]=v.useState(!1),p=v.useRef(null);v.useEffect(()=>{if(!m)return;const S=k=>{p.current&&!p.current.contains(k.target)&&f(!1)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S,{passive:!0}),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[m]);const y=v.useMemo(()=>[...e].sort((S,k)=>k.votes-S.votes),[e]),x=v.useMemo(()=>y.slice(0,10).map(S=>({name:S.title,votes:S.votes,id:S.id})),[y]),b=o4(l.endDate),j=l4(b);return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Om,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Ri(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),o.jsxs("div",{ref:p,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs(ut,{variant:"primary",onClick:n,className:"flex items-center",children:[o.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),o.jsx(ut,{variant:"danger",onClick:r,children:"Reset All Votes"}),o.jsxs(ut,{variant:"gray",onClick:d,className:"flex items-center",children:[o.jsx(tn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>f(!m),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),m&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{f(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{f(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[o.jsx(ei,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),o.jsxs("button",{onClick:()=>{f(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?o.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):Ri(l.endDate)?o.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):o.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&o.jsx("div",{className:`${c4(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:`h-4 w-4 mr-2 ${j}`}),o.jsx("span",{className:`${j} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${di(l.endDate)}`})]})}),o.jsx("div",{className:"h-72",children:o.jsx(BB,{width:"100%",height:"100%",children:o.jsxs(DX,{data:x,margin:{top:20,right:30,left:20,bottom:60},children:[o.jsx(VT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),o.jsx(qT,{}),o.jsx(vK,{}),o.jsx(LT,{dataKey:"votes",fill:"#3B82F6",children:x.map((S,k)=>o.jsx(bw,{fill:k%2===0?"#2d4660":"#4f6d8e"},`cell-${k}`))})]})})})]}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),o.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),o.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),o.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),o.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((S,k)=>o.jsxs("tr",{className:"align-top group",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:k+1}),o.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[S.title,S.azureDevOpsId&&o.jsx("div",{className:"mt-1",children:o.jsx(Lh,{id:S.azureDevOpsId,url:S.azureDevOpsUrl||""})})]}),o.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:S.epic&&o.jsx(Rl,{name:S.epic})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:S.votes}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:o.jsxs("button",{onClick:()=>i(S.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:S.voters.length===0,children:[o.jsx(yn,{className:"h-4 w-4 mr-1"}),S.voters.length," ",S.voters.length===1?"user":"users"]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:()=>t(S.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:S.votes===0,children:"Reset Votes"})})]},S.id))})]})})]}),s&&o.jsx(yZ,{feature:e.find(S=>S.id===s),onClose:()=>i(null)})]})}function xZ({navigate:e,votingSession:t}){return o.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:o.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),o.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),o.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),o.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",o.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),o.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),o.jsx(ut,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function u4({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:o.jsx(yn,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:o.jsx(jr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:o.jsx(Gn,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return o.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,b=!y;return o.jsxs("button",{onClick:y,disabled:b,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${b&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,o.jsx("span",{children:f})]},m)})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",o.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-1 text-xs",children:[o.jsx("li",{children:o.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),o.jsx("li",{children:o.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),o.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:o.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function W2({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=xu({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:B2[0]}});return o.jsxs("form",{onSubmit:s(t),children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),o.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:B2.map(l=>o.jsx("option",{value:l,children:l},l))}),i.epic&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),o.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[o.jsx(ut,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),o.jsxs(ut,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function wZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,k)=>S+k,0),b=u.filter(S=>l[S.id]>0),j=a4(d,m,f);return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[o.jsxs("div",{className:"flex items-start md:items-center",children:[o.jsx(Om,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&o.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),j&&o.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${j.className}`,children:j.label})]})]})]}),o.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&o.jsxs(ut,{variant:"primary",onClick:n,className:"flex items-center",children:[o.jsx(Mr,{className:"mr-2 h-4 w-4"}),o.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),o.jsx("span",{className:"md:hidden",children:"Admin"})]}),o.jsxs(ut,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[o.jsx(tn,{className:"mr-2 h-4 w-4"}),o.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),o.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),o.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),o.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",o.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",o.jsx("span",{className:"font-semibold",children:t.title}),"."]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),o.jsxs("div",{className:"space-y-3",children:[b.map(S=>o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&o.jsx("div",{className:"mt-1",children:o.jsx(Rl,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),o.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),o.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:o.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[o.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),o.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),o.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start text-left",children:[o.jsx(uE,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",o.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),o.jsxs(ut,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[o.jsx(vo,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),o.jsx(Lf,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const bZ=dt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:b,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:k}){const[E,N]=v.useState([...t]),[O,P]=v.useState(!1),[T,R]=v.useState("idle"),[K,z]=v.useState(!1),[G,W]=v.useState({}),[q,de]=v.useState(!0),[oe,J]=v.useState(!1),[Z,ae]=v.useState(!1),[re,me]=v.useState(""),[pe,I]=v.useState(""),[H,Pe]=v.useState(""),[Q,ne]=v.useState(""),[ue,ye]=v.useState(!1),[we,B]=v.useState(null),[Re,tt]=v.useState(!1),te=v.useRef(null),Ee=a4(j,S,k);v.useEffect(()=>{if(!oe)return;const be=je=>{te.current&&!te.current.contains(je.target)&&J(!1)};return document.addEventListener("mousedown",be),document.addEventListener("touchstart",be,{passive:!0}),()=>{document.removeEventListener("mousedown",be),document.removeEventListener("touchstart",be)}},[oe]),v.useEffect(()=>{N([...t])},[t]),v.useEffect(()=>{async function be(){if(!r||!y){de(!1);return}try{const ve=(await Nl(y)).filter(Fe=>Fe.user_id===r.id);if(ve.length>0){const Fe={};ve.forEach(Ne=>{Fe[Ne.feature_id]=Ne.vote_count}),W(Fe),z(!0)}else z(!1),W({})}catch(je){console.error("Error checking existing votes:",je),z(!1)}finally{de(!1)}}be()},[r,y]);const Ue=v.useCallback(async()=>{if(!(!r||!y))try{await u6(y,r.id),z(!1),W({})}catch(be){console.error("Error changing votes:",be),alert("Failed to reset votes. Please try again.")}},[r,y]),st=v.useCallback(()=>{O||(P(!0),R("fadeOut"),setTimeout(()=>{R("rearranging"),setTimeout(()=>{N(fZ(t)),R("fadeIn"),setTimeout(()=>{R("idle"),P(!1)},400)},200)},400))},[t,O]),pt=v.useCallback(async be=>{const je=t.find(ve=>ve.id===be);if(!(!je||!r))try{await p6({session_id:y,feature_id:be,feature_title:je.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(ve){throw console.error("Error submitting info request:",ve),alert("Failed to submit request. Please try again."),ve}},[t,r,y]),St=v.useCallback(()=>{B(null),tt(!1),ae(!0)},[]),_t=v.useCallback(()=>{ue||(ae(!1),B(null),tt(!1),me(""),I(""),Pe(""),ne(""))},[ue]),bt=v.useCallback(async be=>{be.preventDefault();const je=re.trim(),ve=pe.trim(),Fe=H.trim(),Ne=Q.trim();if(!je){B("Please provide a brief title for your suggestion.");return}if(!y){B("Unable to link this suggestion to the current session.");return}try{ye(!0),B(null);const Xe=await g6({session_id:y,title:je,description:ve||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:Fe||null,howWouldItWork:Ne||null});b==null||b(Xe),tt(!0),me(""),I(""),Pe(""),ne("")}catch(Xe){console.error("Error submitting feature suggestion:",Xe),B("We were unable to submit your suggestion. Please try again in a moment.")}finally{ye(!1)}},[pe,re,H,Q,r,y,ue,b]);if(!r)return null;if(q)return o.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(K)return o.jsx(wZ,{currentUser:r,votingSession:m,onChangeVotes:Ue,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:G,features:t,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:k});const M=p-s,Y=M===0,se=m.isActive;return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-start md:items-center",children:[o.jsx(Om,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&o.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),Ee&&o.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Ee.className}`,children:Ee.label})]})]})]}),o.jsxs("div",{ref:te,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&o.jsxs(ut,{variant:"primary",onClick:u,className:"flex items-center",children:[o.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),o.jsx(ut,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),o.jsxs(ut,{variant:"gray",onClick:x,className:"flex items-center",children:[o.jsx(tn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>J(!oe),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),oe&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[d&&o.jsxs("button",{onClick:()=>{J(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsx("button",{onClick:()=>{J(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),o.jsxs("button",{onClick:()=>{J(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),o.jsx("p",{className:"text-gray-600",children:m.goal})]}),o.jsxs("div",{className:"flex flex-col justify-center",children:[o.jsx(mZ,{endDate:m.endDate}),o.jsxs("div",{className:"flex items-center mt-3",children:[o.jsx(hn,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),o.jsxs("p",{className:"text-gray-700",children:["You have ",o.jsxs("span",{className:"font-bold text-[#2d4660]",children:[M," / ",p]})," votes remaining"]})]})]})]})}),!se&&o.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:o.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[o.jsx(Yh,{className:"h-5 w-5 mr-2"}),o.jsxs("span",{className:"font-medium",children:["Voting is currently ",Ri(m.endDate)?"closed":"not yet open",".",Ri(m.endDate)?` Voting ended on ${di(m.endDate)}.`:` Voting will open on ${di(m.startDate)}.`]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),o.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[o.jsxs(ut,{variant:"gold",onClick:St,className:"flex items-center justify-center w-full md:w-auto",children:[o.jsx(Y0,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&o.jsx(pZ,{isShuffling:O,onShuffle:st})]})]}),o.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(be=>{const je=n[be.id]||0;return o.jsx(gZ,{feature:be,userVoteCount:je,remainingVotes:M,votingIsActive:se,onVote:i,isShuffling:O,shuffleStage:T,currentUser:r,onRequestInfo:pt},be.id)})}),s>0&&o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:o.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[o.jsxs("div",{children:[!Y&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(uE,{className:"h-5 w-5 text-[#C89212] mr-2"}),o.jsxs("span",{className:"text-gray-700",children:["You still have ",o.jsx("span",{className:"font-semibold text-[#C89212]",children:M})," votes remaining."]})]}),Y&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(kr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),o.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),o.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${Y?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!Y,children:"Submit Votes"})]})}),o.jsx(Kn,{isOpen:Z,onClose:_t,title:"Suggest a Feature",maxWidth:"max-w-lg",children:o.jsxs("form",{onSubmit:bt,className:"space-y-4",children:[o.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",o.jsx("strong",{children:"future sessions"}),".",o.jsx("br",{}),"Suggestions will not be added to the current session."]}),we&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:we}),Re&&o.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),o.jsx("input",{type:"text",value:re,onChange:be=>me(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:ue||Re})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),o.jsx("textarea",{value:pe,onChange:be=>I(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:ue||Re})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),o.jsx("textarea",{value:H,onChange:be=>Pe(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:ue||Re})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),o.jsx("textarea",{value:Q,onChange:be=>ne(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:ue||Re})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ut,{type:"button",variant:"secondary",onClick:_t,disabled:ue,children:"Close"}),!Re&&o.jsxs(ut,{type:"submit",variant:"primary",disabled:ue,className:"flex items-center",children:[ue&&o.jsx(vo,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function fv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=xi(),p=bs(),y=async()=>{try{await ze.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const D=new URLSearchParams(window.location.search),F=D.has("code")||D.has("error"),ge=localStorage.getItem("voting_system_current_session");!n&&!F&&!ge&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const D=new URLSearchParams(window.location.search);return D.has("code")||D.has("error")},[]),[b,j]=v.useState([]),[S,k]=v.useState(!0),[E,N]=v.useState(uZ),[O,P]=v.useState(r?"results":t||x?"admin":"voting"),[T,R]=v.useState(t||x||r),[K,z]=v.useState(null),[G,W]=v.useState(!1),[q,de]=v.useState(null),[oe,J]=v.useState({...lZ,votesPerUser:e}),[Z,ae]=v.useState(cZ),[re,me]=v.useState(R2()),[pe,I]=v.useState([]),[H,Pe]=v.useState([]),[Q,ne]=v.useState([]),[ue,ye]=v.useState(!1),[we,B]=v.useState(null),[Re,tt]=v.useState(null),[te,Ee]=v.useState(!1),[Ue,st]=v.useState([]),[pt,St]=v.useState([]),[_t,bt]=v.useState(d?"system":"session"),[M,Y]=v.useState({}),[se,be]=v.useState(0),[je,ve]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Fe,Ne]=v.useState(!1),Xe=v.useRef(!1),vt=v.useMemo(()=>oe.useAutoVotes?Math.max(1,Math.floor(b.length/2)):oe.votesPerUser,[oe.useAutoVotes,oe.votesPerUser,b.length]),Qt=v.useRef(!1);v.useEffect(()=>{if(Qt.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const F=new URLSearchParams(window.location.search),ge=F.has("code")||F.has("error");if(ge&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!ge||Xe.current)){if(!n){console.log("No session available yet, waiting...");return}Qt.current=!0,Xe.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Te=await YX();if(Te){const Oe=new Date(Date.now()+Te.expiresIn*1e3).toISOString(),Ze={...Z,accessToken:Te.accessToken,refreshToken:Te.refreshToken,tokenExpiresAt:Oe,enabled:!0,clientId:vs.clientId,tenantId:vs.tenantId};await gl(n.id,Ze),ae(Ze);const $e=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",$e),p($e,{replace:!0})}}catch(Te){console.error("OAuth callback error:",Te),B("Failed to authenticate with Azure DevOps");const Oe="/admin";sessionStorage.removeItem("oauth_return_path"),p(Oe,{replace:!0})}finally{Qt.current=!1}}})()},[n,p,Z]);const Et=v.useCallback(D=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),D&&sessionStorage.setItem("oauth_action",D),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),JX()},[]),xt=v.useCallback(async D=>{if(!D.accessToken||!D.refreshToken||!D.tokenExpiresAt)throw new Error("Not authenticated");if(GX(D.tokenExpiresAt)){const F=await zX(D.refreshToken),ge=new Date(Date.now()+F.expiresIn*1e3).toISOString(),xe={...D,accessToken:F.accessToken,tokenExpiresAt:ge};return n&&(await gl(n.id,xe),ae(xe)),F.accessToken}return D.accessToken},[n]),kt=v.useCallback(async()=>{if(!n)return[];const[D,F]=await Promise.all([Ea(n.id),Nl(n.id)]);return D.map(ge=>{const Te=F.filter(Ze=>Ze.feature_id===ge.id).map(Ze=>({userId:Ze.user_id,name:Ze.user_name,email:Ze.user_email,voteCount:Ze.vote_count})),Oe=Te.reduce((Ze,$e)=>Ze+$e.voteCount,0);return{id:ge.id,title:ge.title,description:ge.description,epic:ge.epic,state:ge.state,areaPath:ge.area_path,tags:ge.tags||[],azureDevOpsId:ge.azure_devops_id,azureDevOpsUrl:ge.azure_devops_url,votes:Oe,voters:Te}})},[n]),At=v.useCallback(async()=>{if(n)try{const D=await b6(n.id);st(D)}catch(D){console.error("Error loading feature suggestions:",D)}},[n]),tr=v.useCallback(async()=>{if(n)try{const D=await Vi(),F=new Date,ge=D.filter(xe=>xe.id!==n.id&&new Date(xe.start_date)>F).map(xe=>({id:xe.id,title:xe.title,startDate:xe.start_date}));St(ge)}catch(D){console.error("Error loading future sessions:",D)}},[n]),gr=v.useCallback(D=>{st(F=>[D,...F]),At(),tr()},[At,tr]),sr=v.useCallback(async(D,F)=>{await y6(D,F),await At()},[At]),Ft=v.useCallback(async D=>{await v6(D),await At()},[At]),an=v.useCallback(async(D,F)=>{await x6(D,F),await At()},[At]),ir=v.useCallback(async D=>{await w6(D);const F=await kt();j(F),await At()},[kt,At]);v.useEffect(()=>{async function D(){if(n)try{console.log("Loading data from Supabase for session:",n.id),k(!0);const F=await kt();console.log(`Loaded ${F.length} features from database`),j(F),console.log("Features with votes loaded:",F.map(xe=>xe.title)),J({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const ge=await f6(n.id);ae(ge?{organization:ge.organization||"newmill",project:ge.project||"Product",accessToken:ge.access_token,refreshToken:ge.refresh_token,tokenExpiresAt:ge.token_expires_at,tenantId:ge.tenant_id,clientId:ge.client_id,enabled:ge.enabled,workItemType:ge.work_item_type||"Feature",query:ge.query,lastSyncTime:ge.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"}),await At()}catch(F){console.error("Error loading data:",F),j([])}finally{k(!1)}}D()},[n==null?void 0:n.id,At,kt]),v.useEffect(()=>{async function D(){const F=R2();if(me(F),I([]),Pe([]),ne([]),Z.enabled&&Z.accessToken&&Z.project)try{const ge=await xt(Z),xe={...Z,accessToken:ge},[Te,Oe,Ze,$e]=await Promise.all([WX(xe).catch(Le=>(console.error("Error loading Azure DevOps projects:",Le),F)),O2(xe),O0(xe),T2(xe)]);me(Te.length>0?Te:F),I(Oe),Pe(Ze),ne($e)}catch(ge){console.error("Error loading filter options:",ge),me(F)}}D()},[Z.enabled,Z.accessToken,Z.project,xt]);const Er=v.useCallback(async(D,F)=>{if(!(!Z.enabled||!Z.accessToken))try{const ge=await xt(Z),xe={...Z,accessToken:ge},Te=D?await s4(xe,D):await O2(xe);I(Te)}catch(ge){console.error("Error loading states for work item type:",ge)}},[Z,xt]),Dt=v.useCallback(async D=>{if(!Z.enabled||!Z.accessToken)return{types:[],states:[]};try{const F=await xt(Z),ge={...Z,accessToken:F};return await VX(ge,D)}catch(F){return console.error("Error fetching types and states for area path:",F),{types:[],states:[]}}},[Z,xt]),Br=v.useCallback(async D=>{if(!Z.enabled||!Z.accessToken)return{types:[],areaPaths:[]};try{const F=await xt(Z),ge={...Z,accessToken:F},xe=await BX(ge,D);return xe.areaPaths.length>0&&Pe(xe.areaPaths),xe}catch(F){return console.error("Error fetching types and area paths for states:",F),{types:[],areaPaths:[]}}},[Z,xt]),cr=v.useCallback(async D=>{if(!Z.enabled||!Z.accessToken)return{types:[],states:[],areaPaths:[]};try{const F=await xt(Z),ge={...Z,accessToken:F},xe=await qX(ge,D);return xe.states.length>0&&I(xe.states),xe.areaPaths.length>0&&Pe(xe.areaPaths),xe}catch(F){return console.error("Error fetching types, states, and area paths for tags:",F),{types:[],states:[],areaPaths:[]}}},[Z,xt]),yr=v.useCallback(async(D,F=[],ge=[])=>{if(!(!Z.enabled||!Z.accessToken))try{const xe=await xt(Z),Te={...Z,accessToken:xe},Oe=D?await HX(Te,D,F,ge):await T2(Te);ne(Oe)}catch(xe){console.error("Error loading tags for type, state, and area path:",xe)}},[Z,xt]),Rt=v.useCallback(async(D,F=[])=>{if(!(!Z.enabled||!Z.accessToken))try{const ge=await xt(Z),xe={...Z,accessToken:ge},Te=D?await UX(xe,D,F):await O0(xe);Pe(Te)}catch(ge){console.error("Error loading area paths for type and state:",ge)}},[Z,xt]);v.useEffect(()=>{const D=async()=>{const ge=dZ(oe.startDate,oe.endDate);if(oe.isActive!==ge){const xe={...oe,isActive:ge};J(xe);try{n!=null&&n.id&&await Lj(n.id,{title:xe.title,goal:xe.goal,votes_per_user:xe.votesPerUser,start_date:xe.startDate,end_date:xe.endDate,is_active:xe.isActive})}catch(Te){console.error("Error updating voting session status:",Te)}}};D();const F=setInterval(D,6e5);return()=>clearInterval(F)},[oe,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",O==="admin"&&(At(),tr())},[O,At,tr]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Wr=v.useCallback(async(D=Z)=>{if(!D.organization||!D.project||!n){B("Organization and project name are required");return}try{ye(!0),B(null);const F=await xt(D),ge={...D,accessToken:F},xe=await I2(ge),Te=D2(xe);for(const C of Te){const le=(await Ea(n.id)).find(Qe=>Qe.azure_devops_id===C.azureDevOpsId),De=dv(C.description),Se=Ff(De,300);le?await Ng(le.id,{title:C.title,description:Se,epic:C.epic||null,state:C.state,areaPath:C.areaPath,tags:C.tags,azure_devops_id:C.azureDevOpsId,azure_devops_url:C.azureDevOpsUrl}):await kg({session_id:n.id,title:C.title,description:Se,epic:C.epic||null,state:C.state,areaPath:C.areaPath,tags:C.tags,azure_devops_id:C.azureDevOpsId,azure_devops_url:C.azureDevOpsUrl})}const Oe=await Ea(n.id),Ze=await Nl(n.id),$e=Oe.map(C=>{const le=Ze.filter(Se=>Se.feature_id===C.id).map(Se=>({userId:Se.user_id,name:Se.user_name,email:Se.user_email,voteCount:Se.vote_count})),De=le.reduce((Se,Qe)=>Se+Qe.voteCount,0);return{id:C.id,title:C.title,description:C.description,epic:C.epic,state:C.state,areaPath:C.area_path,tags:C.tags||[],azureDevOpsId:C.azure_devops_id,azureDevOpsUrl:C.azure_devops_url,votes:De,voters:le}});j($e);const Le={...ge,lastSyncTime:new Date().toISOString()};await gl(n.id,Le),ae(Le)}catch(F){console.error("Azure DevOps sync error:",F),F instanceof Error&&F.message==="Not authenticated"?(B("Please authenticate with Azure DevOps"),Et()):B("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ye(!1)}},[Z,n,xt,Et]),Ar=v.useCallback(async()=>{if(!Z.organization||!Z.project){B("Organization and project name are required");return}try{ye(!0),B(null);const D=await xt(Z),F={...Z,accessToken:D},ge=await I2(F),Te=D2(ge).map(Oe=>({...Oe,description:Ff(dv(Oe.description),300)}));tt(Te),Ee(!0)}catch(D){console.error("Azure DevOps preview error:",D),D instanceof Error&&D.message==="Not authenticated"?(B("Please authenticate with Azure DevOps"),Et()):B("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ye(!1)}},[Z,xt,Et]),Mn=v.useCallback(async(D=!1)=>{if(!(!Re||!n))try{if(ye(!0),D){const Oe=await Ea(n.id);for(const Ze of Oe)await Fj(Ze.id)}for(const Oe of Re){const $e=(await Ea(n.id)).find(X=>X.azure_devops_id===Oe.azureDevOpsId),Le=dv(Oe.description),C=Ff(Le,300);$e?await Ng($e.id,{title:Oe.title,description:C,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl}):await kg({session_id:n.id,title:Oe.title,description:C,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl})}const F=await Ea(n.id),ge=await Nl(n.id),xe=F.map(Oe=>{const $e=ge.filter(C=>C.feature_id===Oe.id).map(C=>({userId:C.user_id,name:C.user_name,email:C.user_email,voteCount:C.vote_count})),Le=$e.reduce((C,X)=>C+X.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:Le,voters:$e}});j(xe);const Te={...Z,lastSyncTime:new Date().toISOString()};await gl(n.id,Te),ae(Te)}catch(F){console.error("Azure DevOps sync error:",F),B("Failed to sync features from Azure DevOps.")}finally{ye(!1),tt(null)}},[Re,n,Z]),Vr=v.useCallback(async()=>{if(n)try{const D={organization:Z.organization||"newmill",project:Z.project||"Product",workItemType:Z.workItemType||"Feature",query:Z.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await gl(n.id,D),ae(D),B(null)}catch(D){console.error("Error disconnecting Azure DevOps:",D),B("Failed to disconnect from Azure DevOps")}},[Z,n]);v.useEffect(()=>{(async()=>{const F=sessionStorage.getItem("oauth_action");if(F&&!(!Z.enabled||!Z.accessToken))try{F==="preview"?await Ar():F==="sync"&&await Wr()}finally{sessionStorage.removeItem("oauth_action")}})()},[Z.enabled,Z.accessToken,Ar,Wr]);const vr=v.useCallback(()=>{R(!0),bt(d?"system":"session"),P("admin")},[d]),xn=v.useCallback(()=>{R(!1),bt(d?"system":"session"),P("voting")},[d]),Fn=v.useCallback(()=>{R(!0),bt("session"),t?O!=="admin"&&P("admin"):O!=="voting"&&P("voting")},[t,O]),Ut=v.useCallback(()=>{d&&(R(!0),bt("system"),t?O!=="admin"&&P("admin"):O!=="voting"&&P("voting"))},[O,d,t]),ur=v.useCallback(async D=>{if(n)try{const F=await kg({session_id:n.id,title:D.title,description:D.description,epic:D.epic});j(ge=>[...ge,{id:F.id,title:F.title,description:F.description,epic:F.epic,votes:0,voters:[]}]),W(!1)}catch(F){console.error("Error adding feature:",F),alert("Failed to add feature")}},[n]),qr=v.useCallback(async D=>{try{await Ng(D.id,{title:D.title,description:D.description,epic:D.epic}),j(F=>F.map(ge=>ge.id===D.id?D:ge)),z(null)}catch(F){console.error("Error updating feature:",F),alert("Failed to update feature")}},[]),Cn=v.useCallback(async D=>{try{await Fj(D),j(F=>F.filter(ge=>ge.id!==D))}catch(F){console.error("Error deleting feature:",F),alert("Failed to delete feature")}},[]),on=v.useCallback(D=>{ve(F=>({...F,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:D}))},[]),Pr=v.useCallback(async()=>{const D=je.targetId;if(!(!D||!n))try{await s6(n.id,D);const F=await kt();j(F)}catch(F){console.error("Error resetting votes:",F),alert("Failed to reset votes")}},[je.targetId,n,kt]),Hr=v.useCallback(()=>{ve(D=>({...D,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Kr=v.useCallback(()=>{ve(D=>({...D,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),wn=v.useCallback(async()=>{if(n){Ne(!0);try{await n6(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(D){console.error("Error deleting session:",D),alert("Failed to delete session. Please try again.")}finally{Ne(!1),ve(D=>({...D,showDeleteSession:!1}))}}},[n,p,l,u]),Gr=v.useCallback(async()=>{if(n)try{await d6(n.id);const D=await kt();j(D)}catch(D){console.error("Error resetting all votes:",D),alert("Failed to reset all votes")}},[n,kt]),ln=v.useCallback((D,F)=>{if(!s||!oe.isActive)return;const ge=M[D]||0;let xe=ge;if(F)if(se<vt)xe=ge+1;else return;else if(ge>0)xe=ge-1;else return;Y(Te=>{const Oe={...Te};return xe===0?delete Oe[D]:Oe[D]=xe,Oe}),be(Te=>F?Te+1:Te-1)},[s,M,se,oe.isActive,vt]),fe=v.useCallback(async()=>{if(!(!s||!oe.isActive||!n)&&!(se<vt))try{for(const[xe,Te]of Object.entries(M))Te>0&&await c6({session_id:n.id,feature_id:xe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Te});const D=await Ea(n.id),F=await Nl(n.id),ge=D.map(xe=>{const Oe=F.filter($e=>$e.feature_id===xe.id).map($e=>({userId:$e.user_id,name:$e.user_name,email:$e.user_email,voteCount:$e.vote_count})),Ze=Oe.reduce(($e,Le)=>$e+Le.voteCount,0);return{id:xe.id,title:xe.title,description:xe.description,epic:xe.epic,state:xe.state,areaPath:xe.area_path,tags:xe.tags||[],azureDevOpsId:xe.azure_devops_id,azureDevOpsUrl:xe.azure_devops_url,votes:Ze,voters:Oe}});j(ge),P("thankyou")}catch(D){console.error("Error submitting votes:",D),alert("Failed to submit votes. Please try again.")}},[s,n,se,M,oe.isActive,vt]),_e=v.useCallback(async D=>{var Ze,$e;console.log("handleUpdateVotingSession called with:",D),console.log("updatedSession.productId:",D.productId),console.log("updatedSession.product_id:",D.product_id);const F={title:D.title,goal:D.goal,votes_per_user:D.votesPerUser,start_date:D.startDate,end_date:D.endDate,is_active:D.isActive,use_auto_votes:D.useAutoVotes,product_id:D.product_id??null,product_name:null};console.log("baseUpdates.product_id:",F.product_id);const ge={},xe=(Le,C)=>{Le!==void 0&&(ge[C]=Le)};xe(D.originalEndDate,"original_end_date"),xe(D.endedEarlyBy,"ended_early_by"),xe(D.endedEarlyReason,"ended_early_reason"),xe(D.endedEarlyDetails,"ended_early_details"),xe(D.reopenReason,"reopen_reason"),xe(D.reopenDetails,"reopen_details"),xe(D.reopenedBy,"reopened_by"),xe(D.reopenedAt,"reopened_at");const Te={...F,...ge};console.log("Full updates being sent to database:",Te),console.log("product_id in fullUpdates:",Te.product_id);const Oe=async Le=>{console.log("runUpdate called with updates:",Le),console.log("product_id in updates:",Le.product_id),n!=null&&n.id?(console.log("Updating session by ID:",n.id),await Lj(n.id,Le)):(console.log("Updating session without ID"),await m6(Le))};try{await Oe(Te),console.log("Database update completed successfully"),J(D),n!=null&&n.id&&l({...n,title:F.title??n.title,goal:F.goal??n.goal,votes_per_user:F.votes_per_user??n.votes_per_user,use_auto_votes:F.use_auto_votes??n.use_auto_votes,start_date:F.start_date??n.start_date,end_date:F.end_date??n.end_date,is_active:F.is_active??n.is_active,product_id:F.product_id!==void 0?F.product_id??null:D.product_id??n.product_id??null,product_name:null,original_end_date:ge.original_end_date??n.original_end_date??null,ended_early_by:ge.ended_early_by??n.ended_early_by??null,ended_early_reason:ge.ended_early_reason??n.ended_early_reason??null,ended_early_details:ge.ended_early_details??n.ended_early_details??null,reopen_reason:ge.reopen_reason??n.reopen_reason??null,reopen_details:ge.reopen_details??n.reopen_details??null,reopened_by:ge.reopened_by??n.reopened_by??null,reopened_at:ge.reopened_at??n.reopened_at??null})}catch(Le){const C=(($e=(Ze=Le==null?void 0:Le.message)==null?void 0:Ze.toLowerCase)==null?void 0:$e.call(Ze))??"",X=C.includes("column")&&(C.includes("reopen_reason")||C.includes("reopen_details")||C.includes("reopened_by")||C.includes("reopened_at")||C.includes("original_end_date")||C.includes("ended_early_by")||C.includes("ended_early_reason")||C.includes("ended_early_details")),le=C.includes("product_name")||C.includes('"product_name"'),De=C.includes("product_id")||C.includes('"product_id"');if(X||le||De){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",Le);try{const Se={...F};le&&delete Se.product_name,De&&delete Se.product_id,await Oe(Se),J(D),n!=null&&n.id&&l({...n,title:Se.title??n.title,goal:Se.goal??n.goal,votes_per_user:Se.votes_per_user??n.votes_per_user,use_auto_votes:Se.use_auto_votes??n.use_auto_votes,start_date:Se.start_date??n.start_date,end_date:Se.end_date??n.end_date,is_active:Se.is_active??n.is_active,product_id:Se.product_id!==void 0?Se.product_id??null:D.productId??n.product_id??null,product_name:null,original_end_date:D.originalEndDate??n.original_end_date??null,ended_early_by:D.endedEarlyBy??n.ended_early_by??null,ended_early_reason:D.endedEarlyReason??n.ended_early_reason??null,ended_early_details:D.endedEarlyDetails??n.ended_early_details??null,reopen_reason:D.reopenReason??n.reopen_reason??null,reopen_details:D.reopenDetails??n.reopen_details??null,reopened_by:D.reopenedBy??n.reopened_by??null,reopened_at:D.reopenedAt??n.reopened_at??null})}catch(Se){console.error("Error updating voting session (fallback):",Se),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",Le),alert("Failed to update voting session settings")}},[n,l]),Me=v.useCallback(async D=>{if(n){ae(D);try{await gl(n.id,{organization:D.organization,project:D.project,accessToken:D.accessToken,refreshToken:D.refreshToken,tokenExpiresAt:D.tokenExpiresAt,tenantId:D.tenantId,clientId:D.clientId,enabled:D.enabled,workItemType:D.workItemType,query:D.query,lastSyncTime:D.lastSyncTime})}catch(F){console.error("Error saving config:",F)}}},[n]),Ye=v.useCallback(()=>{n?p("/results"):P("results")},[n,p]),nt=v.useMemo(()=>{switch(O){case"voting":return o.jsx(bZ,{features:b,currentUser:s,pendingVotes:M,pendingUsedVotes:se,onVote:ln,onSubmitVotes:fe,onToggleAdmin:vr,isAdmin:T,votingSession:oe,navigate:p,effectiveVotesPerUser:vt,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:gr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return o.jsx(vZ,{features:b,onResetVotes:on,onResetAllVotes:Hr,onBack:r?()=>p("../admin"):()=>P("admin"),showVotersList:q,setShowVotersList:de,votingSession:oe,effectiveVotesPerUser:vt,onLogout:y});case"thankyou":return o.jsx(xZ,{navigate:p,votingSession:oe});case"admin":default:return t?o.jsx(oZ,{features:b,onAddFeature:ur,onUpdateFeature:qr,onDeleteFeature:Cn,onShowResults:Ye,onRequestDeleteSession:Kr,isDeletingSession:Fe,showAddForm:G,setShowAddForm:W,editingFeature:K,setEditingFeature:z,onLogout:y,onShowVoterView:xn,votingSession:oe,azureDevOpsConfig:Z,onUpdateAzureDevOpsConfig:Me,onPreviewAzureDevOpsFeatures:Ar,onDisconnectAzureDevOps:Vr,isFetchingAzureDevOps:ue,azureFetchError:we,onInitiateOAuth:Et,availableStates:pe,availableAreaPaths:H,availableTags:Q,previewFeatures:Re,showPreviewModal:te,setShowPreviewModal:Ee,onConfirmSync:Mn,onUpdateVotingSession:_e,onFetchStatesForType:Er,onFetchAreaPathsForTypeAndState:Rt,onFetchTagsForTypeStateAndAreaPath:yr,onFetchTypesAndStatesForAreaPath:Dt,onFetchTypesAndStatesForTags:cr,onFetchTypesAndAreaPathsForStates:Br,suggestedFeatures:Ue,otherSessions:pt,onPromoteSuggestion:ir,onMoveSuggestion:an,onEditSuggestion:sr,onDeleteSuggestion:Ft,adminPerspective:_t,projectOptions:re}):o.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:o.jsx(jr,{className:"h-8 w-8"})}),o.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),o.jsx(ut,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[O,b,s,M,se,ln,fe,vr,T,oe,on,Hr,q,de,ur,qr,Cn,G,W,K,z,Z,Me,Wr,Ar,Vr,ue,we,Et,Re,te,Ee,Mn,p,vt,t,pe,H,Q,Er,n,xn,gr,Ue,pt,ir,an,sr,Ft,_t,re,Ye]);return n?S?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!T&&O!=="voting"&&O!=="thankyou"?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):o.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[o.jsx("div",{className:"flex-grow",children:nt}),o.jsx(u4,{currentRole:T?_t==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:T?void 0:xn,onSelectSessionAdmin:T||d?Fn:void 0,onSelectSystemAdmin:d?Ut:void 0,showRoleToggle:d||T&&_t==="system"}),o.jsx(Lf,{show:je.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Pr,onCancel:()=>ve(D=>({...D,showReset:!1})),confirmText:"Reset",type:"reset"}),o.jsx(Lf,{show:je.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Gr,onCancel:()=>ve(D=>({...D,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),o.jsx(Lf,{show:je.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:wn,onCancel:()=>ve(D=>({...D,showDeleteSession:!1})),confirmText:Fe?"Deleting":"Delete Session",type:"delete"})]}):o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}function jZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=xi(),s=bs(),[i,l]=v.useState(!0),[u,d]=v.useState([]),[m,f]=v.useState({}),[p,y]=v.useState({}),[x,b]=v.useState({}),[j,S]=v.useState(!1),[k,E]=v.useState("admin"),[N,O]=v.useState(!1),P=v.useRef(null),[T,R]=v.useState({}),[K,z]=v.useState({}),[G,W]=v.useState(!1),[q,de]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[oe,J]=v.useState({}),[Z,ae]=v.useState(!1),[re,me]=v.useState([]),[pe,I]=v.useState(""),[H,Pe]=v.useState(""),[Q,ne]=v.useState(null),[ue,ye]=v.useState(null),[we,B]=v.useState(!1),[Re,tt]=v.useState(!1),[te,Ee]=v.useState(!1),[Ue,st]=v.useState(null),[pt,St]=v.useState(!1),[_t,bt]=v.useState(!1),[M,Y]=v.useState(!1),[se,be]=v.useState(null),[je,ve]=v.useState(!1),[Fe,Ne]=v.useState("#2D4660"),Xe=v.useRef(null),[vt,Qt]=v.useState(new Set),[Et,xt]=v.useState(null),[kt,At]=v.useState(null);v.useEffect(()=>{(async()=>{if(!G||!e)return;const _e=e.tenant_id??e.tenantId??null;if(!_e){me([]),I(""),st("No tenant assigned. Products cannot be loaded.");return}tt(!0),st(null);try{const Me=await Ol(_e);console.log(`Loaded ${Me.length} products from products table for tenant ${_e}`),console.log("Products:",Me.map(nt=>nt.name));const Ye=Me;me(Ye),I(nt=>{var D;if(nt&&Ye.some(ge=>ge.id===nt))return nt;if(Et){const F=Ye.find(ge=>{var xe;return((xe=ge.name)==null?void 0:xe.toLowerCase().trim())===Et.toLowerCase().trim()});if(F!=null&&F.id)return xt(null),F.id}return((D=Ye[0])==null?void 0:D.id)??""}),R(nt=>{const D={...nt};return Ye.forEach(F=>{F.id&&F.name&&(D[F.id]=F.name)}),D}),z(nt=>{const D={...nt};return Ye.forEach(F=>{F.id&&F.color_hex&&(D[F.id]=F.color_hex)}),D})}catch(Me){console.error("Error loading products for modal:",Me),Li!=null&&Li(Me)?st("Products are not configured yet. Please create the `products` table in Supabase."):st("Unable to load products. You can still create a session without a product tag."),me([]),I("")}finally{tt(!1)}})()},[G,e]);const tr=()=>{const fe="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let _e="";for(let Me=0;Me<8;Me++)_e+=fe.charAt(Math.floor(Math.random()*fe.length));return _e},gr=()=>{de({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),J({}),Pe(""),ne(null),st(null),St(!1),bt(!1),Y(!1),be(null),ve(!1),Ne("#2D4660"),xt(null)},sr=()=>{const fe={};q.title.trim()||(fe.title="Session title is required"),q.goal.trim()||(fe.goal="Session goal is required"),q.useAutoVotes||(q.votesPerUser<1&&(fe.votesPerUser="Votes per user must be at least 1"),q.votesPerUser>100&&(fe.votesPerUser="Votes per user cannot exceed 100"));const _e=new Date(q.startDate);new Date(q.endDate)<=_e&&(fe.endDate="End date must be after start date");const Ye=H.trim().length>0;return!Ue&&re.length>0&&!pe&&!se&&!pt&&!Ye&&(fe.product="Please select a product or enter a new product name"),pt&&!Ye&&(fe.product="Please enter a product name or select an existing product"),J(fe),Object.keys(fe).length===0},Ft=fe=>{const{name:_e,value:Me}=fe.target;de(Ye=>({...Ye,[_e]:_e==="votesPerUser"?parseInt(Me)||0:Me})),oe[_e]&&J(Ye=>{const nt={...Ye};return delete nt[_e],nt})},an=async()=>{const fe=H.trim();if(!fe){st("Product name is required.");return}Ee(!0),setTimeout(()=>{Ee(!1),be({name:fe,color:Q}),St(!1),bt(!1),Y(!1),setTimeout(()=>{var _e;(_e=Xe.current)==null||_e.focus()},100)},500)},ir=async()=>{if(!(!ue||!e)){B(!0);try{await PC(ue.id),me(fe=>fe.filter(_e=>_e.id!==ue.id)),R(fe=>{const _e={...fe};return delete _e[ue.id],_e}),z(fe=>{const _e={...fe};return delete _e[ue.id],_e}),pe===ue.id&&I("")}catch(fe){console.error("Error deleting product:",fe),alert("Failed to delete product. Please try again.")}finally{B(!1),ye(null)}}},Er=async fe=>{if(fe.preventDefault(),!!e&&sr()){ae(!0);try{const _e=tr(),Me=e.tenant_id??e.tenantId??null;let Ye=pe&&pe.trim()!==""?pe:null;const nt=H.trim(),D=nt.length>0,F=pe&&pe.trim()!=="";console.log("Product creation check:",{pendingProduct:se,newProductName:nt,hasNewProductName:D,selectedProductId:pe,hasSelectedProduct:F});let ge=null,xe=null;if(se?(ge=se.name,xe=se.color,console.log("Using pendingProduct:",ge)):D&&(ge=nt,xe=Q,console.log("Using newProductName:",ge)),ge){console.log("Will create/find product:",ge);const $e=re.find(Le=>Le.name.toLowerCase().trim()===ge.toLowerCase().trim());if($e)console.log("Product already exists, using:",$e.id),Ye=$e.id;else if(Me){console.log("Creating new product:",ge);try{const Le=await AC(Me,ge,xe||void 0);console.log("Product created successfully:",Le.id),Ye=Le.id,me(C=>[...C,Le].sort((X,le)=>X.name.localeCompare(le.name))),R(C=>({...C,[Le.id]:Le.name})),z(C=>{const X={...C};return Le.color_hex&&(X[Le.id]=Le.color_hex),X})}catch(Le){console.error("Error creating product during session creation:",Le),J(C=>({...C,submit:"Failed to create product. Please try again."})),ae(!1);return}}else{console.error("No tenantId available to create product"),J(Le=>({...Le,submit:"Unable to create product: No tenant assigned."})),ae(!1);return}}if(Ye&&await IC(Ye)){const Le=T[Ye]||"this product";J(C=>({...C,submit:`There is already an active session for ${Le}. Each product can only have one active session at a time.`})),ae(!1);return}const Te=await DC({title:q.title,goal:q.goal,votes_per_user:q.votesPerUser,use_auto_votes:q.useAutoVotes,start_date:q.startDate,end_date:q.endDate,is_active:!0,session_code:_e,access_type:"invite-only",product_id:Ye??null,product_name:null});await gu(Te.id,e.id);const Ze=await t6(Te.id)||Te;if(Ze.product_id&&Me)try{const Le=(await Ol(Me)).find(C=>C.id===Ze.product_id);Le&&(R(C=>({...C,[Le.id]:Le.name})),Le.color_hex&&Le.color_hex.trim()!==""&&z(C=>({...C,[Le.id]:Le.color_hex})))}catch($e){console.error("Error loading product for lookup:",$e)}t(Ze),await r(),await Dt(),W(!1),gr(),setTimeout(()=>{s("/admin")},100)}catch(_e){console.error("Error creating session from modal:",_e),J(Me=>({...Me,submit:"Failed to create session. Please try again."}))}finally{ae(!1)}}};v.useEffect(()=>{if(!N)return;const fe=_e=>{P.current&&!P.current.contains(_e.target)&&O(!1)};return document.addEventListener("mousedown",fe),document.addEventListener("touchstart",fe,{passive:!0}),()=>{document.removeEventListener("mousedown",fe),document.removeEventListener("touchstart",fe)}},[N]),v.useEffect(()=>{if(!e){s("/login");return}Dt()},[e]);const Dt=async()=>{if(e){l(!0);try{const _e=Pv(e.email)||await To(e.id);S(_e);const Me=_e?await Vi():await TC(e.id),Ye=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let nt={},D={};if(Ye)try{const Te=await Ol(Ye);nt=Te.reduce((Oe,Ze)=>(Ze.id&&Ze.name&&(Oe[Ze.id]=Ze.name),Oe),{}),D=Te.reduce((Oe,Ze)=>(Ze.id&&Ze.color_hex&&(Oe[Ze.id]=Ze.color_hex),Oe),{})}catch(Te){console.error("Error loading products for session selection:",Te)}const F={},ge={},xe={};for(const Te of Me){const[Oe,Ze,$e,Le]=await Promise.all([_e?Promise.resolve(!0):yu(Te.id,e.id),q0(Te.id,e.email),Ea(Te.id),Nl(Te.id)]);F[Te.id]={isAdmin:Oe,isStakeholder:Ze},ge[Te.id]=$e.length;const C=Le.some(X=>X.user_id===e.id);xe[Te.id]=C}await r(),d(Me),f(F),y(ge),b(xe),R(nt),z(D)}catch(fe){console.error("Error loading sessions:",fe)}finally{l(!1)}}},Br=fe=>{const _e=p[fe.id]||0;if(fe.use_auto_votes){const Me=Math.max(1,Math.floor(_e/2));return{votes:Me,displayText:`${Me} votes/user`,isAuto:!0,formula:`Auto: ${_e} ${_e===1?"feature":"features"}  2 = ${Me}`}}else return{votes:fe.votes_per_user,displayText:`${fe.votes_per_user} votes/user`,isAuto:!1,formula:""}},cr=fe=>{t(fe);const _e=m[fe.id];k==="stakeholder"?s("/vote"):_e!=null&&_e.isAdmin?s("/admin"):s("/vote")},yr=async()=>{try{await ze.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}O(!1),s("/login",{replace:!0})},Rt=fe=>new Date(fe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ye=>`'${Ye.slice(-2)}`),Wr=fe=>{const _e=new Date,Me=new Date(fe.start_date),Ye=new Date(fe.end_date);return _e<Me?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Yh}:_e>Ye?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:Tt}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:kr}},Ar=fe=>[...fe].sort((_e,Me)=>{const Ye=_e!=null&&_e.end_date?Date.parse(_e.end_date):0;return(Me!=null&&Me.end_date?Date.parse(Me.end_date):0)-Ye}),Mn=(fe,_e)=>{fe.stopPropagation();const Me=`${window.location.origin}/login?session=${_e.session_code}`,Ye=encodeURIComponent(`You're invited to vote: ${_e.title}`),nt=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${_e.title}
Goal: ${_e.goal}

To get started, copy and paste this link into your browser:

${Me}

Voting Period: ${Rt(_e.start_date)} - ${Rt(_e.end_date)}

Best regards,
${e==null?void 0:e.name}`);window.location.href=`mailto:?subject=${Ye}&body=${nt}`},Vr=(fe,_e)=>{fe.stopPropagation(),t(_e),s("/results")},vr=(fe,_e)=>{fe.stopPropagation(),t(_e),s("/users?filter=session-admin")},xn=(fe,_e)=>{fe.stopPropagation(),t(_e),s("/users?filter=stakeholder")},Fn=()=>{W(!1),gr()};if(i)return o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Ut=Ar(u),ur=j?Ut:Ut.filter(fe=>{var _e;return(_e=m[fe.id])==null?void 0:_e.isAdmin}),qr=j?[]:Ut.filter(fe=>{var _e,Me;return((_e=m[fe.id])==null?void 0:_e.isStakeholder)&&!((Me=m[fe.id])!=null&&Me.isAdmin)}),Cn=j||ur.length>0,on=j&&k==="system-admin",Pr=k==="stakeholder"?Ut:[],Hr=k==="admin"||k==="system-admin"?ur:[],Kr=k==="admin"?qr:[],wn=(fe,_e)=>{const Me={};return fe.forEach(Ye=>{const nt=fn(Ye,_e);if(!nt||nt==="No Product"||nt.trim()==="")return;const D=nt.toLowerCase().trim();Me[D]||(Me[D]=[]),Me[D].push(Ye)}),console.log(" Product grouping:",Object.entries(Me).map(([Ye,nt])=>({product:Ye,count:nt.length,sessionTitles:nt.map(D=>D.title)}))),Me},Gr=fe=>{Qt(_e=>{const Me=new Set(_e);return Me.has(fe)?Me.delete(fe):Me.add(fe),Me})},ln=(fe,_e,Me,Ye,nt,D,F,ge=!0)=>o.jsxs(o.Fragment,{children:[ge&&o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Me.background,color:Me.text,borderColor:Me.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:_e})]}),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{children:o.jsxs("div",{className:`relative inline-block ${F?"group":""}`,children:[o.jsxs("button",{onClick:xe=>{xe.stopPropagation(),F||cr(fe)},disabled:F,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-colors ${F?"bg-gray-200 text-gray-500":"bg-[#576C71] text-white hover:bg-[#1E5461]"}`,style:F?{cursor:"not-allowed"}:{},children:[o.jsx(hn,{className:"h-3 w-3 mr-1"}),"Vote!"]}),F&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("div",{className:`relative inline-block ${F?"group":""}`,children:[o.jsxs("button",{onClick:xe=>vr(xe,fe),disabled:F,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${F?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:F?{cursor:"not-allowed"}:{},children:[o.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Admins"]}),F&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),o.jsxs("div",{className:`relative inline-block ${F?"group":""}`,children:[o.jsxs("button",{onClick:xe=>xn(xe,fe),disabled:F,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${F?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:F?{cursor:"not-allowed"}:{},children:[o.jsx(yn,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),F&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:fe.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:fe.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[Rt(fe.start_date)," - ",Rt(fe.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Ye.color}`,children:[o.jsx(nt,{className:"h-3 w-3 mr-1"}),Ye.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(hs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[fe.id]||0," ",p[fe.id]===1?"feature":"features"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:_e})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx(hn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"break-words",children:D.displayText}),D.isAuto&&o.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[o.jsx(lf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[D.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),o.jsxs("button",{onClick:xe=>Vr(xe,fe),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#6A4234] transition-colors cursor-pointer flex-shrink-0",children:[o.jsx(If,{className:"h-3 w-3 mr-1"}),Ye.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("div",{className:`relative inline-block w-full ${F?"group":""}`,children:[o.jsxs("button",{onClick:xe=>Mn(xe,fe),disabled:F,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${F?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:F?{cursor:"not-allowed"}:{},children:[o.jsx(Mu,{className:`h-4 w-4 mr-2 ${F?"text-gray-500":"text-blue-600"}`}),o.jsx("span",{className:`text-sm font-medium ${F?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),F&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,j&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"System Admin"}),!j&&ur.length>0&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Session Admin"}),!j&&ur.length===0&&qr.length>0&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Stakeholder"})]})]})]}),o.jsxs("div",{ref:P,className:"relative z-40 md:justify-end",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[j&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>s("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(yn,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(j||ur.length>0)&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>W(!0),className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),o.jsx("span",{className:"sm:hidden",children:"Create"})]})}),o.jsxs("button",{onClick:yr,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),o.jsx("div",{className:"flex md:hidden justify-end",children:o.jsx("button",{onClick:()=>O(!N),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),N&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[j&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>{O(!1),s("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(yn,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(j||ur.length>0)&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>{O(!1),W(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(us,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),o.jsxs("button",{onClick:()=>{O(!1),yr()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),u.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[o.jsx(hn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),o.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),j&&o.jsxs("button",{onClick:()=>W(!0),className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(us,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):o.jsxs("div",{className:"space-y-8",children:[k==="stakeholder"&&o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[o.jsx(hn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const fe=Pr.filter(D=>{const F=fn(D,T);return F&&F!=="No Product"&&F.trim()!==""}),_e=Pr.filter(D=>{const F=fn(D,T);return!F||F==="No Product"||F.trim()===""}),Me=wn(fe,T),Ye=[],nt=[];return Object.entries(Me).forEach(([D,F])=>{F.length>=2?Ye.push({key:D,sessions:F}):nt.push(...F)}),o.jsxs("div",{className:"space-y-8",children:[Ye.map(({key:D,sessions:F})=>{var X;const ge=vt.has(D),xe=ge?F:F.slice(0,3),Te=F.length>3?F.length-3:0,Oe=fn(F[0],T),Ze=(X=F[0])!=null&&X.product_id?K[F[0].product_id]:void 0,$e=Tn(Oe,Ze),Le=(le,De)=>{const Se=le.replace("#",""),Qe=parseInt(Se.substring(0,2),16),Ke=parseInt(Se.substring(2,4),16),gt=parseInt(Se.substring(4,6),16);return`rgba(${Qe}, ${Ke}, ${gt}, ${De})`},C=$e.background?Le($e.background,.1):"#F9FAFB";return o.jsx("div",{className:"relative",style:{marginTop:"50px"},children:o.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:C,borderColor:$e.border||"#E5E7EB"},children:[o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:$e.background,color:$e.text,borderColor:$e.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:Oe})]}),Te>0&&o.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:o.jsx("button",{onClick:()=>Gr(D),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ge?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(pn,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Te,")",o.jsx(pn,{className:"h-4 w-4"})]})})}),Cn&&k!=="stakeholder"&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:le=>{var Qe;le.stopPropagation();const De=(Qe=F[0])==null?void 0:Qe.product_id,Se=fn(F[0],T);De&&I(De),Se&&Se!=="No Product"&&xt(Se),W(!0)},onMouseEnter:()=>At(D),onMouseLeave:()=>At(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},title:`Create new session for ${Oe}`,children:o.jsx(us,{className:"h-5 w-5"})})}),o.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:xe.map(le=>{const De=Wr(le),Se=De.text==="Closed",Qe=De.icon,Ke=Br(le),gt=x[le.id],En=fn(le,T),Ln=le.product_id?K[le.product_id]:void 0,es=Tn(En,Ln);return o.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:es.border,borderWidth:"1px"},onClick:()=>cr(le),children:o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:gt?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):De.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:le.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:le.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[Rt(le.start_date)," - ",Rt(le.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${De.color}`,children:[o.jsx(Qe,{className:"h-3 w-3 mr-1"}),De.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(hs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[le.id]||0," ",p[le.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:En})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:Ke.displayText}),Ke.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(lf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ke.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:bi=>{bi.stopPropagation(),Se||cr(le)},disabled:Se,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Se?"bg-gray-100 text-gray-500 cursor-not-allowed":gt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Se?{cursor:"not-allowed"}:{},children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),gt?"View or Change Votes":"Cast Your Votes"]})})]})},le.id)})}),Te>0&&o.jsx("div",{className:"mt-4 md:hidden",children:o.jsx("button",{onClick:()=>Gr(D),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ge?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(pn,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Te,")",o.jsx(pn,{className:"h-4 w-4"})]})})})]})},D)}),(nt.length>0||_e.length>0)&&o.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...nt,..._e].map(D=>{const F=Wr(D),ge=F.text==="Closed",xe=F.icon,Te=Br(D),Oe=x[D.id],Ze=fn(D,T),$e=D.product_id?K[D.product_id]:void 0,Le=Tn(Ze,$e),C=nt.includes(D);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Le.border,borderWidth:"1px"},onClick:()=>cr(D),children:[o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Le.background,color:Le.text,borderColor:Le.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:Ze})]}),C&&Cn&&k!=="stakeholder"&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:X=>{X.stopPropagation();const le=D.product_id,De=fn(D,T);le&&I(le),De&&De!=="No Product"&&xt(De),W(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Le.background||"#C89212",color:Le.text||"#FFFFFF"},onMouseEnter:X=>{const le=Le.background||"#C89212";X.currentTarget.style.backgroundColor=le,X.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor=Le.background||"#C89212",X.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Ze}`,children:o.jsx(us,{className:"h-5 w-5"})})}),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:Oe?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):F.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:D.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[Rt(D.start_date)," - ",Rt(D.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${F.color}`,children:[o.jsx(xe,{className:"h-3 w-3 mr-1"}),F.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(hs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[D.id]||0," ",p[D.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Ze})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:Te.displayText}),Te.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(lf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Te.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:X=>{X.stopPropagation(),ge||cr(D)},disabled:ge,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ge?"bg-gray-100 text-gray-500 cursor-not-allowed":Oe?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ge?{cursor:"not-allowed"}:{},children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),Oe?"View or Change Votes":"Cast Your Votes"]})})]})]},D.id)})})]})})()]}),(k==="admin"||k==="system-admin")&&o.jsxs(o.Fragment,{children:[k==="admin"&&Kr.length>0&&o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[o.jsx(hn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),o.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Kr.map(fe=>{const _e=Wr(fe),Me=_e.text==="Closed",Ye=_e.icon,nt=Br(fe),D=x[fe.id],F=fn(fe,T),ge=fe.product_id?K[fe.product_id]:void 0,xe=Tn(F,ge);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:xe.border,borderWidth:"1px"},onClick:()=>cr(fe),children:[o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:xe.background,color:xe.text,borderColor:xe.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:F})]}),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:D?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):_e.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:fe.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:fe.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(gs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[Rt(fe.start_date)," - ",Rt(fe.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${_e.color}`,children:[o.jsx(Ye,{className:"h-3 w-3 mr-1"}),_e.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(hs,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[fe.id]||0," ",p[fe.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:F})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:nt.displayText}),nt.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(lf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[nt.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:Te=>{Te.stopPropagation(),Me||cr(fe)},disabled:Me,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Me?"bg-gray-100 text-gray-500 cursor-not-allowed":D?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Me?{cursor:"not-allowed"}:{},children:[o.jsx(hn,{className:"h-4 w-4 mr-2"}),D?"View or Change Votes":"Cast Your Votes"]})})]})]},fe.id)})})]}),Hr.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[o.jsx(Mr,{className:"h-5 w-5 mr-2"}),on?"All Sessions (System Admin)":"Sessions You Manage"]}),on&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Hr.length," total sessions across the organization."]})]}),(()=>{const fe=Hr.filter(D=>{const F=fn(D,T);return F&&F!=="No Product"&&F.trim()!==""}),_e=Hr.filter(D=>{const F=fn(D,T);return!F||F==="No Product"||F.trim()===""}),Me=wn(fe,T),Ye=[],nt=[];return Object.entries(Me).forEach(([D,F])=>{F.length>=2?Ye.push({key:D,sessions:F}):nt.push(...F)}),o.jsxs("div",{className:"space-y-8",children:[Ye.map(({key:D,sessions:F})=>{var X;const ge=vt.has(D),xe=ge?F:F.slice(0,3),Te=F.length>3?F.length-3:0,Oe=fn(F[0],T),Ze=(X=F[0])!=null&&X.product_id?K[F[0].product_id]:void 0,$e=Tn(Oe,Ze),Le=(le,De)=>{const Se=le.replace("#",""),Qe=parseInt(Se.substring(0,2),16),Ke=parseInt(Se.substring(2,4),16),gt=parseInt(Se.substring(4,6),16);return`rgba(${Qe}, ${Ke}, ${gt}, ${De})`},C=$e.background?Le($e.background,.1):"#F9FAFB";return o.jsx("div",{className:"relative",style:{marginTop:"50px"},children:o.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:C,borderColor:$e.border||"#E5E7EB"},children:[o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:$e.background,color:$e.text,borderColor:$e.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(_l,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:Oe})]}),Te>0&&o.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:o.jsx("button",{onClick:()=>Gr(D),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ge?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(pn,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Te,")",o.jsx(pn,{className:"h-4 w-4"})]})})}),(j||k==="admin"||k==="system-admin")&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:le=>{var Qe;le.stopPropagation();const De=(Qe=F[0])==null?void 0:Qe.product_id,Se=fn(F[0],T);De&&I(De),Se&&Se!=="No Product"&&xt(Se),W(!0)},onMouseEnter:()=>At(D),onMouseLeave:()=>At(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},title:`Create new session for ${Oe}`,children:o.jsx(us,{className:"h-5 w-5"})})}),o.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[xe.map(le=>{const De=Wr(le),Se=De.icon,Qe=Br(le),Ke=De.text==="Closed",gt=fn(le,T),En=le.product_id?K[le.product_id]:void 0,Ln=Tn(gt,En);return o.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Ln.border,borderWidth:"1px"},onClick:()=>cr(le),children:ln(le,gt,Ln,De,Se,Qe,Ke,!1)},le.id)}),F.length===2&&o.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border",style:{borderColor:$e.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},children:o.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg",style:{backgroundColor:"transparent"},children:[o.jsx(uf,{className:`absolute top-4 left-4 w-3 h-3 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"0ms",animationDuration:"1.5s"}}),o.jsx(cf,{className:`absolute top-6 right-6 w-5 h-5 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"200ms",animationDuration:"1.5s"}}),o.jsx(uf,{className:`absolute bottom-8 left-8 w-4 h-4 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"400ms",animationDuration:"1.5s"}}),o.jsx(cf,{className:`absolute bottom-4 right-4 w-3.5 h-3.5 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"600ms",animationDuration:"1.5s"}}),o.jsx(uf,{className:`absolute top-1/2 left-2 w-5 h-5 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"800ms",animationDuration:"1.5s"}}),o.jsx(cf,{className:`absolute top-1/2 right-2 w-3 h-3 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"1000ms",animationDuration:"1.5s"}}),o.jsx(uf,{className:`absolute top-4 left-1/2 w-4.5 h-4.5 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"300ms",animationDuration:"1.5s"}}),o.jsx(cf,{className:`absolute bottom-2 left-1/2 w-3.5 h-3.5 transition-opacity duration-[2000ms] ease-in ${kt===D?"opacity-100 animate-ping":"opacity-0 transition-opacity duration-0"}`,style:{color:$e.background||"#C89212",animationDelay:"700ms",animationDuration:"1.5s"}})]})})]}),Te>0&&o.jsx("div",{className:"mt-4 md:hidden",children:o.jsx("button",{onClick:()=>Gr(D),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ge?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(pn,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Te,")",o.jsx(pn,{className:"h-4 w-4"})]})})})]})},D)}),(nt.length>0||_e.length>0)&&o.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...nt,..._e].map(D=>{const F=Wr(D),ge=F.icon,xe=Br(D),Te=F.text==="Closed",Oe=fn(D,T),Ze=D.product_id?K[D.product_id]:void 0,$e=Tn(Oe,Ze),Le=nt.includes(D);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:$e.border,borderWidth:"1px"},onClick:()=>cr(D),children:[Le&&(j||k==="admin"||k==="system-admin")&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:C=>{C.stopPropagation();const X=D.product_id,le=fn(D,T);X&&I(X),le&&le!=="No Product"&&xt(le),W(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},onMouseEnter:C=>{const X=$e.background||"#C89212";C.currentTarget.style.backgroundColor=X,C.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor=$e.background||"#C89212",C.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Oe}`,children:o.jsx(us,{className:"h-5 w-5"})})}),ln(D,Oe,$e,F,ge,xe,Te)]},D.id)}),Hr.length===2&&nt.length+_e.length>0&&o.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:o.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:o.jsxs("button",{onClick:()=>W(!0),className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[o.jsx(us,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),o.jsx(Kn,{isOpen:G,onClose:Fn,title:"Create Voting Session",maxWidth:"max-w-3xl",children:o.jsxs("form",{onSubmit:Er,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!pt&&!se?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[o.jsx("div",{className:"flex-1 w-full",children:o.jsx(i4,{label:"",products:re,value:pe,onChange:fe=>{I(fe),fe&&Pe(""),oe.product&&J(_e=>{const Me={..._e};return delete Me.product,Me})},isLoading:Re,error:Ue,disabled:Re||re.length===0,placeholder:"Select a product",helperText:!Re&&re.length===0&&!Ue?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:!0,onRequestDeleteProduct:fe=>{ye(fe)},className:"w-full"})}),o.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[o.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),o.jsxs("button",{type:"button",onClick:()=>St(!0),disabled:Re,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(us,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-xs text-gray-500",children:"Or type a new product name:"})}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"text",value:H,onChange:fe=>{Pe(fe.target.value),fe.target.value.trim()&&I(""),Ue&&st(null),oe.product&&J(_e=>{const Me={..._e};return delete Me.product,Me})},placeholder:"Enter new product name (will be created automatically)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-0 focus:border-[#2D4660]"}),H.trim()&&o.jsx("button",{type:"button",onClick:()=>{Ne(Q||"#2D4660"),ve(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm flex-shrink-0",style:{backgroundColor:Q||"#2D4660",borderColor:Q||"#2D4660"},title:"Choose product color"})]}),H.trim()&&o.jsx("p",{className:"text-xs text-gray-500",children:"This product will be created automatically when you save the session."})]})]}):se?o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{be(null),Pe(se.name),ne(se.color),St(!0),bt(!0),Y(!1)},children:[o.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:se.color||"#2D4660",borderColor:se.color||"#2D4660"}}),o.jsx("span",{className:"font-medium text-gray-900 flex-1",children:se.name}),o.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex gap-3 items-center",children:[o.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[o.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),o.jsx("input",{type:"text",value:H,onChange:fe=>{Pe(fe.target.value),fe.target.value.trim()&&!_t&&setTimeout(()=>bt(!0),200),Ue&&st(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),_t&&o.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[o.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),o.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),o.jsx("button",{type:"button",onClick:()=>{Ne(Q||"#2D4660"),ve(!0),setTimeout(()=>{var fe;(fe=document.getElementById("native-color-input"))==null||fe.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Q?{backgroundColor:Q}:{backgroundColor:"#ffffff"},children:!Q&&o.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"Color Wheel",className:"w-8 h-8 object-contain"})})]}),M&&o.jsxs("button",{type:"button",onClick:an,disabled:!H.trim()||te,className:"relative px-6 py-2 bg-[#C89212] text-white rounded-md hover:bg-[#6A4234] transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group whitespace-nowrap",style:{animation:"slideInFromRight 0.8s ease-out forwards"},children:[o.jsx("span",{className:"relative z-10 flex items-center",children:te?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Preparing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Create New Product"]})}),!te&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]})]})]})}),oe.product&&o.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),oe.product]}),Ue&&(pt||!!se)&&o.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),Ue]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),o.jsx("input",{ref:Xe,type:"text",name:"title",value:q.title,onChange:Ft,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${oe.title?"border-red-500":"border-gray-300"}`}),oe.title&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),oe.title]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),o.jsx("textarea",{name:"goal",value:q.goal,onChange:Ft,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${oe.goal?"border-red-500":"border-gray-300"}`}),oe.goal&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),oe.goal]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:q.useAutoVotes,onChange:fe=>de(_e=>({..._e,useAutoVotes:fe.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),o.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!q.useAutoVotes&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"number",name:"votesPerUser",value:q.votesPerUser,onChange:Ft,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${oe.votesPerUser?"border-red-500":"border-gray-300"}`}),oe.votesPerUser&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),oe.votesPerUser]})]}),o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:q.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),o.jsx("input",{type:"date",name:"startDate",value:q.startDate,onChange:Ft,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),o.jsx("input",{type:"date",name:"endDate",value:q.endDate,onChange:Ft,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${oe.endDate?"border-red-500":"border-gray-300"}`}),oe.endDate&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),oe.endDate]})]})]})]}),oe.submit&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2"}),oe.submit]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx(ut,{type:"button",variant:"secondary",onClick:Fn,disabled:Z,children:"Cancel"}),o.jsx(ut,{type:"submit",disabled:Z,children:Z?"Creating...":"Create Session"})]})]})}),je&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>ve(!1),children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:fe=>fe.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"native-color-input",type:"color",value:Fe,onChange:fe=>Ne(fe.target.value),ref:fe=>{fe&&je&&setTimeout(()=>fe.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsxs("button",{type:"button",onClick:()=>{ne(Fe),ve(!1),!M&&H.trim()&&setTimeout(()=>Y(!0),300)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Fe,height:"260px",minWidth:"100px"},children:[o.jsx(kr,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})]})})}),k==="stakeholder"&&u.length>0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(hn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),o.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),k==="admin"&&Kr.length>0&&Hr.length===0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(hn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),o.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),k==="admin"&&Hr.length>0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(yn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),o.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),k==="system-admin"&&o.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(jr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-purple-900",children:[o.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),o.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),o.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),o.jsx(u4,{currentRole:j&&k==="system-admin"?"system-admin":k==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>E("stakeholder"),onSelectSessionAdmin:()=>E("admin"),onSelectSystemAdmin:j?()=>E("system-admin"):void 0,showRoleToggle:Cn||j}),ue&&o.jsxs(Kn,{isOpen:!0,onClose:()=>ye(null),title:"Delete Product",children:[o.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold",children:ue.name}),"? This will remove it for everyone in your tenant."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(ut,{variant:"secondary",onClick:()=>ye(null),disabled:we,children:"Cancel"}),o.jsx(ut,{variant:"danger",onClick:ir,disabled:we,children:we?"Deleting":"Delete"})]})]})]})}function SZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=xi(),s=bs(),i=async()=>{try{await ze.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[b,j]=v.useState([]),[S,k]=v.useState(""),[E,N]=v.useState(""),[O,P]=v.useState(!1),[T,R]=v.useState(!1),[K,z]=v.useState(null);v.useEffect(()=>{(async()=>{var ae;if(!e){j([]),k("");return}const Z=e.tenant_id??e.tenantId??null;if(!Z){j([]),k(""),z("No tenant assigned. Products cannot be loaded.");return}P(!0),z(null);try{const re=await Ol(Z);j(re),k(((ae=re[0])==null?void 0:ae.id)??"")}catch(re){console.error("Error loading products for create session:",re),Li!=null&&Li(re)?z("Products are not configured yet. Please create the `products` table in Supabase."):z("Unable to load products. You can still create a session without a product tag."),j([]),k("")}finally{P(!1)}})()},[e]);const G=()=>{const J="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let Z="";for(let ae=0;ae<8;ae++)Z+=J.charAt(Math.floor(Math.random()*J.length));return Z},W=()=>{const J={};l.title.trim()||(J.title="Session title is required"),l.goal.trim()||(J.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(J.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(J.votesPerUser="Votes per user cannot exceed 100"));const Z=new Date(l.startDate);return new Date(l.endDate)<=Z&&(J.endDate="End date must be after start date"),!K&&b.length>0&&!S&&(J.product="Please select a product for this session"),m(J),Object.keys(J).length===0},q=async J=>{if(J.preventDefault(),!(!W()||!e)){p(!0);try{const Z=G(),ae=b.find(me=>me.id===S)||null;if(ae!=null&&ae.id&&await IC(ae.id)){m({submit:`There is already an active session for ${ae.name}. Each product can only have one active session at a time.`}),p(!1);return}const re=await DC({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:Z,product_id:(ae==null?void 0:ae.id)??null,product_name:null});await gu(re.id,e.id),await r(),x(!0),setTimeout(()=>{t(re),s("/admin")},3e3)}catch(Z){console.error("Error creating session:",Z),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},de=async()=>{if(!e)return;const J=e.tenant_id??e.tenantId??null;if(!J){z("Cannot create products because no tenant is associated with your account.");return}const Z=E.trim();if(!Z){z("Product name is required.");return}R(!0),z(null);try{const ae=await AC(J,Z);j(re=>[...re,ae].sort((pe,I)=>pe.name.localeCompare(I.name))),k(ae.id),N("")}catch(ae){console.error("Error creating product:",ae),z(ae instanceof Error?ae.message:"Unable to create product. Please try again.")}finally{R(!1)}},oe=J=>{const{name:Z,value:ae}=J.target;u(re=>({...re,[Z]:Z==="votesPerUser"?parseInt(ae)||0:ae})),d[Z]&&m(re=>{const me={...re};return delete me[Z],me})};return y?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(kr,{className:"h-10 w-10 text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),o.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),o.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"})]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:o.jsxs("form",{onSubmit:q,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),o.jsx("input",{type:"text",name:"title",value:l.title,onChange:oe,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),d.title]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),o.jsx("textarea",{name:"goal",value:l.goal,onChange:oe,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),d.goal]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),O?o.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):b.length>0?o.jsxs("select",{value:S,onChange:J=>{k(J.target.value),d.product&&m(Z=>{const ae={...Z};return delete ae.product,ae})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select a product"}),b.map(J=>o.jsx("option",{value:J.id,children:J.name},J.id))]}):o.jsx("p",{className:"text-sm text-gray-500",children:K??"No products found. Add a product below to associate this session."}),d.product&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),d.product]}),K&&b.length>0&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:K}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsx("input",{type:"text",value:E,onChange:J=>{N(J.target.value),K&&z(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),o.jsx("button",{type:"button",onClick:de,disabled:T,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Adding...":"Add Product"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(hn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:J=>u(Z=>({...Z,useAutoVotes:J.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),o.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:oe,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(gs,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),o.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:oe,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(gs,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),o.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:oe,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(yn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),o.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),o.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2"}),d.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}async function Pw(e){const{error:t}=await ze.functions.invoke("send-invitation-email",{body:e});if(t)throw t}function _Z({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Tn(d.name,d.color_hex??null):null;return o.jsxs("div",{ref:u,className:"relative",children:[n&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),o.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),o.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),o.jsx(pn,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Tn(f.name,f.color_hex??null),y=t===f.id;return o.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),o.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&o.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function kZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=xi(),s=bs(),i=async()=>{try{await ze.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[b,j]=v.useState({}),[S,k]=v.useState(!1),[E,N]=v.useState(!1),O=v.useRef(null),[P,T]=v.useState([]),[R,K]=v.useState(""),[z,G]=v.useState([]),[W,q]=v.useState([]),[de,oe]=v.useState({});v.useEffect(()=>{if(!E)return;const Q=ne=>{O.current&&!O.current.contains(ne.target)&&N(!1)};return document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q,{passive:!0}),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}ae(),J()},[e,s]);const J=async()=>{try{const Q=await EC(),ne=await Vi(),ue=new Date,ye=Q.filter(B=>ne.some(Re=>Re.product_id!==B.id?!1:new Date(Re.end_date)>=ue));T(ye);const we={};ye.forEach(B=>{we[B.id]=B.name}),oe(we)}catch(Q){console.error("Error loading products:",Q)}},Z=async Q=>{try{const ne=await Vi(),ue=new Date,ye=ne.filter(we=>we.product_id!==Q?!1:new Date(we.end_date)>=ue);G(ye)}catch(ne){console.error("Error loading sessions:",ne),G([])}};v.useEffect(()=>{R?(Z(R),q([])):(G([]),q([]))},[R]);const ae=async()=>{if(e){m(!0);try{const Q=await MC(e.id);u(Q)}catch(Q){console.error("Error loading stakeholders:",Q)}finally{m(!1)}}},re=Q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),me=Q=>{const ne=new Date,ue=new Date(Q.start_date),ye=new Date(Q.end_date);return Q.is_active&&ne>=ue&&ne<=ye?{text:"Active",color:"text-green-600"}:ne<ue?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},pe=Q=>{const ne=new Date(Q.start_date),ue=new Date(Q.end_date),ye=ne.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),we=ue.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ye} - ${we}`},I=async Q=>{Q.preventDefault();const ne={};if(y.name.trim()||(ne.name="Name is required"),y.email.trim()?re(y.email)||(ne.email="Invalid email address"):ne.email="Email is required",R||(ne.product="Please select a product"),W.length===0&&(ne.sessions="Please select at least one session"),j(ne),!(Object.keys(ne).length>0)){k(!0);try{for(const ue of W)await FC({session_id:ue,user_name:y.name,user_email:y.email,has_voted:!1});for(const ue of W){const ye=z.find(we=>we.id===ue);if(ye)try{const we=`${window.location.origin}/login?session=${ye.session_code}`;await Pw({to:y.email,subject:`You're invited to vote: ${ye.title}`,text:`Hi,

You've been invited to vote in "${ye.title}".

Open: ${we}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${ye.title}</strong>.</p><p><a href="${we}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const we=LC(ye,y.email,(t==null?void 0:t.name)||"");window.location.href=we}catch{}}}await ae(),x({name:"",email:""}),K(""),q([]),p(!1),j({})}catch(ue){console.error("Error adding stakeholder:",ue),j({submit:"Failed to add stakeholder. Please try again."})}finally{k(!1)}}},H=async Q=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Ev(e.id,Q),await ae()}catch(ne){console.error("Error removing stakeholder:",ne),alert("Failed to remove stakeholder")}},Pe=Q=>new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"})]}),o.jsxs("div",{ref:O,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>N(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),E&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{N(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{N(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),o.jsxs("button",{onClick:()=>{N(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),o.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),o.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(kn,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),o.jsx("div",{className:"mt-6",children:o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[o.jsx(xo,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(kn,{className:"h-5 w-5 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:Q.user_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Mu,{className:"h-4 w-4 mr-2"}),Q.user_email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Q.has_voted?o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[o.jsx(Yh,{className:"h-3 w-3 mr-1"}),"Pending"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Pe(Q.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>H(Q.user_email),className:"text-red-600 hover:text-red-900",children:o.jsx(ei,{className:"h-5 w-5"})})})]},Q.id))})]})})]}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),o.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),K(""),q([]),j({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),o.jsx("input",{type:"text",value:y.name,onChange:Q=>x(ne=>({...ne,name:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),b.name&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),b.name]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),o.jsx("input",{type:"email",value:y.email,onChange:Q=>x(ne=>({...ne,email:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),b.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),b.email]})]}),o.jsxs("div",{children:[o.jsx(_Z,{products:P,value:R,onChange:K,label:"Product *",error:!!b.product}),b.product&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),b.product]})]}),R&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),z.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:z.map(Q=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:W.includes(Q.id),onChange:ne=>{ne.target.checked?q(ue=>[...ue,Q.id]):q(ue=>ue.filter(ye=>ye!==Q.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.title}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:pe(Q)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${me(Q).color}`,children:me(Q).text})})]})]},Q.id))}),b.sessions&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),b.sessions]})]}),b.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2"}),b.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),K(""),q([]),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function NZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=xi(),s=bs(),i=async()=>{try{await ze.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[b,j]=v.useState({}),[S,k]=v.useState(!1),[E,N]=v.useState(!1),O=v.useRef(null);v.useEffect(()=>{if(!E)return;const G=W=>{O.current&&!O.current.contains(W.target)&&N(!1)};return document.addEventListener("mousedown",G),document.addEventListener("touchstart",G,{passive:!0}),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("touchstart",G)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}P()},[e,s]);const P=async()=>{if(e){m(!0);try{const G=await $C(e.id);u(G)}catch(G){console.error("Error loading admins:",G)}finally{m(!1)}}},T=G=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G),R=async G=>{G.preventDefault();const W={};if(y.email.trim()?T(y.email)||(W.email="Invalid email address"):W.email="Email is required",l.some(q=>q.user.email.toLowerCase()===y.email.toLowerCase())&&(W.email="This user is already an admin"),j(W),!(Object.keys(W).length>0)&&e){k(!0);try{const q=y.email.split("@")[0].replace(/\./g," ");await i6(e.id,y.email,q);try{const de=`${window.location.origin}/login?session=${e.session_code}`;await Pw({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${de}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${de}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const de=LC(e,y.email,(t==null?void 0:t.name)||"");window.location.href=de}catch{}}await P(),x({email:""}),p(!1)}catch(q){console.error("Error adding admin:",q),j({submit:"Failed to add admin. Please try again."})}finally{k(!1)}}},K=async G=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(G===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Af(e.id,G),await P()}catch(W){console.error("Error removing admin:",W),alert("Failed to remove admin")}}},z=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"})]}),o.jsxs("div",{ref:O,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>N(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),E&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{N(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{N(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),o.jsxs("button",{onClick:()=>{N(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),o.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),o.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(G=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(jr,{className:"h-5 w-5 text-blue-500 mr-2"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[G.user.name,G.user.id===(t==null?void 0:t.id)&&o.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Mu,{className:"h-4 w-4 mr-2"}),G.user.email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z(G.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>K(G.user_id),className:`text-red-600 hover:text-red-900 ${G.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:G.user.id===(t==null?void 0:t.id)||l.length===1,title:G.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:o.jsx(ei,{className:"h-5 w-5"})})})]},G.id))})]})})]}),o.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(jr,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Manage features and voting settings for this session"}),o.jsx("li",{children:"Add and remove stakeholders for this session"}),o.jsx("li",{children:"View voting results and analytics for this session"}),o.jsx("li",{children:"Add and remove other session admins"})]}),o.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),o.jsx("button",{onClick:()=>{p(!1),x({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:R,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",value:y.email,onChange:G=>x(W=>({...W,email:G.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),b.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),b.email]})]}),b.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2"}),b.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function CZ(){const{currentUser:e,sessions:t}=xi(),r=bs(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await $C(x.id)).forEach(j=>{j.user&&j.user.email&&y.add(j.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),b=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=b,d(!0)},p=()=>{r("/login")};return i?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto",style:{height:"80px",width:"auto"}})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:o.jsx(YM,{className:"h-8 w-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),o.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),o.jsx("div",{className:"p-6",children:u?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:o.jsx(kr,{className:"h-8 w-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),o.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[o.jsx(bS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),o.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(yn,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),o.jsx("p",{className:"text-xs",children:n.join(", ")})]}):o.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[o.jsx(Mu,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),o.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[o.jsx(bS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function EZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=xi(),n=bs(),s=async()=>{try{await ze.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,b]=v.useState({}),[j,S]=v.useState(!1),[k,E]=v.useState(!1),N=v.useRef(null);v.useEffect(()=>{if(!k)return;const z=G=>{N.current&&!N.current.contains(G.target)&&E(!1)};return document.addEventListener("mousedown",z),document.addEventListener("touchstart",z,{passive:!0}),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("touchstart",z)}},[k]),v.useEffect(()=>{O()},[]);const O=async()=>{d(!0);try{let z=await Av();z.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await qf(e.id),z=await Av()),l(z)}catch(z){console.error("Error loading system admins:",z)}finally{d(!1)}},P=z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z),T=async z=>{z.preventDefault();const G={};if(p.email.trim()?P(p.email)||(G.email="Invalid email address"):G.email="Email is required",i.some(W=>W.user.email.toLowerCase()===p.email.toLowerCase())&&(G.email="This user is already a system admin"),b(G),!(Object.keys(G).length>0)){S(!0);try{const W=p.email.split("@")[0].replace(/\./g," "),q=await V0(p.email,W);await qf(q.id);try{const de=`${window.location.origin}/login`;await Pw({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${de}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${de}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const de=`${window.location.origin}/login`,oe=encodeURIComponent("You're a System Admin: Feature Voting System"),J=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${de}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${oe}&body=${J}`}catch{}}await O(),y({email:""}),f(!1)}catch(W){console.error("Error adding system admin:",W),b({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},R=async z=>{const G=i.reduce((W,q)=>new Date(q.created_at)<new Date(W.created_at)?q:W);if(z===G.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(z===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await Pf(z),await O()}catch(W){console.error("Error removing system admin:",W),alert("Failed to remove system admin")}},K=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"})]}),o.jsxs("div",{ref:N,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),o.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),o.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>E(!k),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),k&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),o.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),o.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gn,{className:"h-8 w-8 mr-3"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),o.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),o.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const z=i.reduce((G,W)=>new Date(W.created_at)<new Date(G.created_at)?W:G);return i.map(G=>{const W=G.user_id===z.user_id;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gn,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[G.user.name,G.user.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),W&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Mu,{className:"h-4 w-4 mr-2"}),G.user.email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(G.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>R(G.user_id),className:`text-red-600 hover:text-red-900 ${G.user.id===(e==null?void 0:e.id)||i.length===1||W?"opacity-50 cursor-not-allowed":""}`,disabled:G.user.id===(e==null?void 0:e.id)||i.length===1||W,title:W?"Cannot remove the original system admin":G.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:o.jsx(ei,{className:"h-5 w-5"})})})]},G.id)})})()})]})})]}),o.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Gn,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-yellow-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Full access to all voting sessions across the system"}),o.jsx("li",{children:"Create and manage any voting session"}),o.jsx("li",{children:"Add and remove other system administrators"}),o.jsx("li",{children:"Manage session admins and stakeholders for any session"}),o.jsx("li",{children:"View all results and analytics system-wide"})]}),o.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),o.jsx("button",{onClick:()=>{f(!1),y({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",value:p.email,onChange:z=>y(G=>({...G,email:z.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Tt,{className:"h-4 w-4 mr-2"}),x.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add System Admin"})]})]})]})})]})}function hv({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Tn(m.name,m.color_hex??null):null;return o.jsxs("div",{ref:d,className:"relative",children:[n&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),o.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),o.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),o.jsx(pn,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=Tn(p.name,p.color_hex??null),x=t===p.id;return o.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),o.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&o.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function AZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=xi(),s=bs(),[i]=aC(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[b,j]=v.useState("all"),[S,k]=v.useState(!1),[E,N]=v.useState(null),[O,P]=v.useState(null),T=v.useRef(null),R=v.useRef({}),K=v.useRef(!1),[z,G]=v.useState(!1),[W,q]=v.useState(!1),[de,oe]=v.useState([]),[J,Z]=v.useState("system-admin"),[ae,re]=v.useState(!0),[me,pe]=v.useState(!1),[I,H]=v.useState(null),[Pe,Q]=v.useState(null),[ne,ue]=v.useState([]),[ye,we]=v.useState(""),[B,Re]=v.useState({adminSessions:[],stakeholderSessions:[]}),[tt,te]=v.useState(!1),[Ee,Ue]=v.useState(null),[st,pt]=v.useState(!1),[St,_t]=v.useState(null),[bt,M]=v.useState(new Set),[Y,se]=v.useState(new Map),[be,je]=v.useState(!1),[ve,Fe]=v.useState(!1),[Ne,Xe]=v.useState({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[vt,Qt]=v.useState({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1}),[Et,xt]=v.useState("User Management"),[kt,At]=v.useState([]),[tr,gr]=v.useState(""),[sr,Ft]=v.useState([]),[an,ir]=v.useState(""),[Er,Dt]=v.useState([]),[Br,cr]=v.useState(!1),[yr,Rt]=v.useState(null),Wr=async()=>{try{await ze.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}k(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const C=X=>{T.current&&!T.current.contains(X.target)&&k(!1)};return document.addEventListener("mousedown",C),document.addEventListener("touchstart",C,{passive:!0}),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("touchstart",C)}},[S]),v.useEffect(()=>{if(!E)return;const C=X=>{const le=R.current[E];le&&!le.contains(X.target)&&N(null)};return document.addEventListener("mousedown",C),document.addEventListener("touchstart",C,{passive:!0}),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("touchstart",C)}},[E]);const Ar=async()=>{try{const C=await EC(),X=await Vi(),le=new Date,De=C.filter(Se=>X.some(Qe=>Qe.product_id!==Se.id?!1:new Date(Qe.end_date)>=le));At(De)}catch(C){console.error("Error loading products:",C)}},Mn=C=>{if(!C){Ft([]);return}const X=new Date,le=ne.filter(De=>De.product_id!==C?!1:new Date(De.end_date)>=X);Ft(le)};v.useEffect(()=>{tr?Mn(tr):Ft([])},[tr,ne]);const Vr=C=>{if(!C){Dt([]);return}const X=new Date,le=ne.filter(De=>De.product_id!==C?!1:new Date(De.end_date)>=X);Dt(le)};v.useEffect(()=>{an?Vr(an):Dt([])},[an,ne]),v.useEffect(()=>{const C=i.get("filter");C==="session-admin"?(xt("Session Admin Management"),j("session-admin")):C==="stakeholder"?(xt("Stakeholder Management"),j("stakeholder")):xt("User Management")},[i]);const vr=async C=>{p(!0),console.log("=== CHECKING USERS TABLE SCHEMA ===");try{const{data:X,error:le}=await ze.from("users").select("*").limit(1).single();X?(console.log(" Sample user record:",X),console.log(" Available fields:",Object.keys(X)),console.log(" Has created_by?","created_by"in X),console.log(" Has created_by_name?","created_by_name"in X),console.log(" Has created_by_user_id?","created_by_user_id"in X)):console.log(" No users found or error:",le)}catch(X){console.log(" Error checking schema:",X)}console.log(`=== END SCHEMA CHECK ===
`);try{const X=await Rj(),le=new Map;await Promise.all(C.map(async Ke=>{try{const gt=await MC(Ke.id);le.set(Ke.id,gt)}catch(gt){console.error(`Error loading stakeholders for session ${Ke.id}:`,gt),le.set(Ke.id,[])}}));const De=await Promise.all(X.map(async Ke=>{const gt=await Z$(Ke.id),En=[],Ln=[];if(gt.sessionAdminCount>0)try{const{data:es,error:bi}=await ze.from("session_admins").select("session_id").eq("user_id",Ke.id);if(bi)console.error("Error fetching admin sessions:",bi);else if(es){const aa=es.map(ts=>ts.session_id);En.push(...C.filter(ts=>aa.includes(ts.id)))}}catch(es){console.error("Error querying session_admins:",es)}for(const es of C)(le.get(es.id)||[]).some(ts=>{const qa=ts.user_email&&Ke.email&&ts.user_email.toLowerCase()===Ke.email.toLowerCase(),ji=ts.user_id===Ke.id||ts.id===Ke.id;return qa||ji})&&Ln.push(es);return{...Ke,roles:gt,adminInSessions:En,stakeholderInSessions:Ln}}));u(De);const Se=new Map;De.forEach(Ke=>{const gt=Ke.email.toLowerCase().trim();Se.has(gt)||Se.set(gt,[]),Se.get(gt).push(Ke.id)});const Qe=new Map;Se.forEach((Ke,gt)=>{Ke.length>1&&Qe.set(gt,Ke)}),se(Qe)}catch(X){console.error("Error loading users:",X)}finally{p(!1)}},xn=async()=>{if(e){re(!0);try{const C=await To(e.id);G(C);const X=await Vi();let le=[];if(C)ue(X),await Fn(),await vr(X);else{const De=await Promise.all(X.map(Ke=>yu(Ke.id,e.id)));X.forEach((Ke,gt)=>{De[gt]&&le.push(Ke.id)});const Se=le.length>0;if(q(Se),oe(le),!Se){s("/sessions");return}const Qe=X.filter(Ke=>le.includes(Ke.id));ue(Qe),Z("session-admin"),await vr(Qe)}}catch(C){console.error("Error checking access:",C),s("/sessions")}finally{re(!1)}}},Fn=async()=>{try{const C=["chris.rodes@newmill.com","spencer.faull@newmill.com"],X=new Set,le=await Av();if(le.length>0){const Se=le.reduce((Qe,Ke)=>new Date(Ke.created_at)<new Date(Qe.created_at)?Ke:Qe);_t(Se.user_id),X.add(Se.user_id)}(await Rj()).forEach(Se=>{C.includes(Se.email.toLowerCase())&&X.add(Se.id)}),M(X)}catch(C){console.error("Error loading protected accounts:",C)}},Ut=C=>{if(C.id===St)return"Original Admin";const X=C.email.toLowerCase();return X==="chris.rodes@newmill.com"?"Manager":X==="spencer.faull@newmill.com"?"Portfolio Owner":null},ur=C=>{const X=C.email.toLowerCase().trim(),le=Y.get(X);return le?le.length>1:!1},qr=C=>{const X=C.email.toLowerCase().trim(),le=Y.get(X);return le?le.length:1},Cn=()=>{let C=[...l];if(J==="session-admin"&&ne.length>0){const X=new Set(ne.map(le=>le.id));C=C.filter(le=>{var Qe,Ke;if(le.id===(e==null?void 0:e.id))return!0;const De=(Qe=le.adminInSessions)==null?void 0:Qe.some(gt=>gt&&X.has(gt.id)),Se=(Ke=le.stakeholderInSessions)==null?void 0:Ke.some(gt=>gt&&X.has(gt.id));return!!De||!!Se})}if(y.trim()){const X=y.toLowerCase();C=C.filter(le=>le.name.toLowerCase().includes(X)||le.email.toLowerCase().includes(X))}b!=="all"&&(C=C.filter(X=>{switch(b){case"system-admin":return X.roles.isSystemAdmin;case"session-admin":return X.roles.sessionAdminCount>0&&!X.roles.isSystemAdmin;case"stakeholder":return X.roles.stakeholderSessionCount>0&&X.roles.sessionAdminCount===0&&!X.roles.isSystemAdmin;case"none":return!X.roles.isSystemAdmin&&X.roles.sessionAdminCount===0&&X.roles.stakeholderSessionCount===0;default:return!0}})),m(C)};v.useEffect(()=>{if(!e){s("/login");return}if(!K.current)return K.current=!0,xn(),()=>{}},[e]),v.useEffect(()=>{const C=i.get("filter");C&&["system-admin","session-admin","stakeholder","none"].includes(C)&&j(C)},[i]),v.useEffect(()=>{J==="session-admin"&&(b==="system-admin"||b==="session-admin"||b==="all")&&j("stakeholder")},[J,b]),v.useEffect(()=>{Cn()},[l,y,b,J,ne,e]);const on=async C=>{try{const X=[],le=[];for(const De of ne)await yu(C,De.id)&&X.push(De.id),await a6(C,De.id)&&le.push(De.id);Re({adminSessions:X,stakeholderSessions:le})}catch(X){console.error("Error loading user session memberships:",X)}},Pr=async(C,X)=>{Q(C),H(X),we(""),pe(!0),N(null),await on(C.id)},Hr=()=>{pe(!1),H(null),Q(null),we(""),Re({adminSessions:[],stakeholderSessions:[]})},Kr=async()=>{if(!(!Pe||!ye||!I))try{I==="session-admin"?await gu(ye,Pe.id):I==="stakeholder"?await $j(ye,Pe.email,Pe.name):I==="remove-stakeholder"&&await Ev(ye,Pe.email),Hr(),await vr(ne)}catch(C){console.error("Error modifying user session role:",C);const X=(C==null?void 0:C.message)||(C==null?void 0:C.toString())||"Unknown error";console.error("Full error details:",C),alert(`Failed to ${I==="remove-stakeholder"?"remove stakeholder from":"add user to"} session.

Error: ${X}

Please check the console for more details.`)}},wn=async(C,X)=>{if(N(null),!!confirm(`Are you sure you want to ${X?"remove":"grant"} system admin access for this user?`))try{X?await Pf(C):await qf(C),await vr(ne)}catch(le){console.error("Error toggling system admin:",le),alert("Failed to update system admin status. Please try again.")}},Gr=async(C,X)=>{N(null);const le=J==="session-admin"?`Are you sure you want to remove ${X} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${X}? This will remove them from all sessions and revoke system admin access.`;if(confirm(le))try{if(J==="system-admin"&&await Pf(C),J==="session-admin"){for(const De of de)try{await Af(De,C)}catch(Se){console.error(`Error removing session admin from ${De}:`,Se)}for(const De of de)try{await _g(De,C)}catch(Se){console.error(`Error removing stakeholder from ${De}:`,Se)}}else for(const De of ne)try{await Af(De.id,C),await _g(De.id,C)}catch{}await vr(ne)}catch(De){console.error("Error removing roles:",De),alert("Failed to remove roles. Please try again.")}},ln=async(C,X)=>{const le=l.find(De=>De.id===C);if(le){if(J==="session-admin"){if(le.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const De=`Are you sure you want to remove ${X} as a stakeholder from all sessions you manage?`;if(!confirm(De))return;try{let Se=0;for(const Qe of ne)try{await Ev(Qe.id,le.email),Se++}catch(Ke){console.error(`Error removing stakeholder from session ${Qe.id}:`,Ke)}await vr(ne),Se>0?alert(`${X} has been removed as a stakeholder from ${Se} session(s) you manage.`):alert(`${X} was not a stakeholder in any of the sessions you manage.`)}catch(Se){console.error("Error removing stakeholder:",Se),alert("Failed to remove stakeholder. Please try again.")}return}Ue(le),te(!0)}},fe=async()=>{if(Ee){if(bt.has(Ee.id)){const C=Ut(Ee);alert(`Cannot delete this protected account${C?` (${C})`:""}. This protects against accidentally locking important users out of the system.`),te(!1),Ue(null);return}pt(!0);try{for(const X of ne)try{await Af(X.id,Ee.id),await _g(X.id,Ee.id)}catch{}if(Ee.roles.isSystemAdmin)try{await Pf(Ee.id)}catch(X){console.error("Error removing system admin role:",X)}const{error:C}=await ze.from("users").delete().eq("id",Ee.id);if(C)throw C;await vr(ne),te(!1),Ue(null)}catch(C){console.error("Error deleting user:",C),alert("Failed to delete user. Please try again.")}finally{pt(!1)}}},_e=()=>{te(!1),Ue(null)},Me=()=>{Xe({name:"",email:"",password:nt(),isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),gr(""),Ft([]),ir(""),Dt([]),Ar(),je(!0)},Ye=()=>{je(!1),Xe({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),gr(""),Ft([]),ir(""),Dt([]),Qt({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1})},nt=()=>{const X="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let le="";for(let De=0;De<12;De++)le+=X.charAt(Math.floor(Math.random()*X.length));return le},D=async()=>{if(!Ne.name.trim()||!Ne.email.trim()||!Ne.password.trim()){alert("Please fill in all required fields (Name, Email, Password)");return}Fe(!0);try{const{data:C,error:X}=await ze.auth.signUp({email:Ne.email,password:Ne.password,options:{data:{name:Ne.name}}});if(X)throw X;if(!C.user)throw new Error("User creation failed");const le=C.user.id,{error:De}=await ze.from("users").insert({id:le,name:Ne.name,email:Ne.email,created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name});if(De)throw De;if(J==="system-admin"&&Ne.isSystemAdmin&&await qf(le),J==="system-admin")for(const Qe of Ne.sessionAdminIds)try{await gu(Qe,le)}catch(Ke){console.error("Error adding session admin role:",Ke)}if(console.log("Adding stakeholder to sessions:",Ne.stakeholderSessionIds),console.log("View mode:",J),console.log("User admin sessions:",de),console.log("All sessions:",ne.map(Qe=>({id:Qe.id,title:Qe.title}))),Ne.stakeholderSessionIds.length===0)console.log("No stakeholder sessions selected");else{for(const Qe of Ne.stakeholderSessionIds){if(J==="session-admin"&&!ne.some(gt=>gt.id===Qe)){console.warn(`Skipping session ${Qe} - not in managed sessions`);continue}try{console.log(`Adding ${Ne.email} as stakeholder to session ${Qe}`);const Ke=await $j(Qe,Ne.email,Ne.name);console.log(`Successfully added stakeholder to session ${Qe}:`,Ke)}catch(Ke){console.error(`Error adding stakeholder role to session ${Qe}:`,Ke);const gt=(Ke==null?void 0:Ke.message)||(Ke==null?void 0:Ke.toString())||"Unknown error";alert(`Warning: Failed to add ${Ne.email} to session ${Qe}.

Error: ${gt}`)}}console.log("Finished adding stakeholder roles")}let Se="User";Ne.isSystemAdmin?Se="System Admin":Ne.sessionAdminIds.length>0?Se="Session Admin":Ne.stakeholderSessionIds.length>0&&(Se="Stakeholder"),Ye(),await vr(ne),Rt({email:Ne.email,password:Ne.password,userType:Se}),cr(!0)}catch(C){console.error("Error creating user:",C),alert(`Failed to create user: ${C.message||"Unknown error"}`)}finally{Fe(!1)}},F=C=>{Xe(X=>({...X,sessionAdminIds:X.sessionAdminIds.includes(C)?X.sessionAdminIds.filter(le=>le!==C):[...X.sessionAdminIds,C]}))},ge=C=>{Xe(X=>({...X,stakeholderSessionIds:X.stakeholderSessionIds.includes(C)?X.stakeholderSessionIds.filter(le=>le!==C):[...X.stakeholderSessionIds,C]}))},xe=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Te=C=>{const X=new Date,le=new Date(C.start_date),De=new Date(C.end_date);return C.is_active&&X>=le&&X<=De?{text:"Active",color:"text-green-600"}:X<le?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Oe=C=>{const X=new Date(C.start_date),le=new Date(C.end_date),De=X.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Se=le.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${De} - ${Se}`},Ze=C=>C.roles.isSystemAdmin?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[o.jsx(Gn,{className:"h-3 w-3 mr-1"}),"System Admin"]}):C.roles.sessionAdminCount>0?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-[#173B65] text-white",children:[o.jsx(jr,{className:"h-3 w-3 mr-1"}),"Session Admin (",C.roles.sessionAdminCount,")"]}):C.roles.stakeholderSessionCount>0?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(kn,{className:"h-3 w-3 mr-1"}),"Stakeholder (",C.roles.stakeholderSessionCount,")"]}):o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),$e=C=>C?C==="session-admin"?ne.filter(X=>!B.adminSessions.includes(X.id)):C==="remove-stakeholder"?ne.filter(X=>B.stakeholderSessions.includes(X.id)&&(J==="system-admin"||de.includes(X.id))):ne.filter(X=>!B.stakeholderSessions.includes(X.id)):[],Le=(C,X)=>X?X==="session-admin"?C.roles.sessionAdminCount<ne.length:C.roles.stakeholderSessionCount<ne.length:!1;return ae||f?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:ae?"Checking access...":"Loading users..."})]})}):z?o.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[o.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0",style:{width:"36px",height:"36px"}}),o.jsx("button",{onClick:()=>{n!=null&&n.id?s("/admin"):s("/sessions")},className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer flex-shrink-0",children:o.jsx(Zl,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:Et})]}),o.jsxs("div",{ref:T,className:"relative z-40 flex-shrink-0 ml-2",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[(z||W)&&o.jsxs("button",{onClick:Me,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(yn,{className:"h-4 w-4 mr-2"}),J==="session-admin"?"Add Stakeholder":"Add User"]}),(z||W)&&n&&o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[o.jsx(jr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),o.jsxs("button",{onClick:Wr,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(tn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>k(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(hs,{className:"h-5 w-5 text-gray-700"})})}),S&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[(z||W)&&o.jsxs("button",{onClick:()=>{k(!1),Me()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(yn,{className:"h-5 w-5 mr-3 text-green-600"}),o.jsx("span",{className:"text-base",children:J==="session-admin"?"Add Stakeholder":"Add User"})]}),(z||W)&&n&&o.jsxs("button",{onClick:()=>{k(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(jr,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),o.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),o.jsxs("button",{onClick:()=>{k(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mr,{className:"h-5 w-5 mr-3 text-gray-700"}),o.jsx("span",{className:"text-base",children:"My Sessions"})]}),o.jsxs("button",{onClick:()=>{k(!1),Wr()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(tn,{className:"h-5 w-5 mr-3 text-gray-700"}),o.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(iF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:C=>x(C.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&o.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsxs("select",{value:b==="system-admin"&&J==="session-admin"?"session-admin":b,onChange:C=>j(C.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[J!=="session-admin"&&o.jsx("option",{value:"all",children:"All Roles"}),J!=="session-admin"&&o.jsx("option",{value:"system-admin",children:"System Admin"}),J!=="session-admin"&&o.jsx("option",{value:"session-admin",children:"Session Admin"}),o.jsx("option",{value:"stakeholder",children:"Stakeholder"}),o.jsx("option",{value:"none",children:"No Role"})]})]})}),o.jsx("div",{className:"md:hidden space-y-3 relative z-10",children:d.length===0?o.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."}):d.map(C=>{var X;return o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[o.jsxs("h3",{className:"text-base font-semibold text-gray-900 truncate",children:[C.name,C.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),Ut(C)&&o.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",Ut(C),")"]}),ur(C)&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",qr(C),")"]})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:C.email})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(J==="system-admin"||J==="session-admin"&&C.roles.stakeholderSessionCount>0&&((X=C.stakeholderInSessions)==null?void 0:X.some(le=>ne.some(De=>De.id===le.id))))&&o.jsx("button",{onClick:()=>ln(C.id,C.name),className:`p-2 rounded-md hover:bg-red-50 transition-colors ${C.id===(e==null?void 0:e.id)||J==="system-admin"&&bt.has(C.id)?"opacity-50 cursor-not-allowed":""}`,disabled:C.id===(e==null?void 0:e.id)||J==="system-admin"&&bt.has(C.id),title:J==="session-admin"?"Remove stakeholder from all your sessions":bt.has(C.id)?`Cannot delete protected account${Ut(C)?` (${Ut(C)})`:""}`:C.id===(e==null?void 0:e.id)?"Cannot delete your own account":"Delete user",children:o.jsx(ei,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{className:"relative",ref:le=>{R.current[C.id]=le},children:[o.jsx("button",{onClick:()=>N(E===C.id?null:C.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${C.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:C.id===(e==null?void 0:e.id),title:C.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:o.jsx(jS,{className:"h-5 w-5 text-gray-600"})}),E===C.id&&C.id!==(e==null?void 0:e.id)&&o.jsx("div",{className:"absolute right-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),J==="system-admin"&&o.jsxs(o.Fragment,{children:[C.roles.isSystemAdmin?o.jsxs("button",{onClick:()=>wn(C.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[o.jsx(Gn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):o.jsxs("button",{onClick:()=>wn(C.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-purple-50 text-purple-700",children:[o.jsx(Gn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Le(C,"session-admin")&&o.jsxs("button",{onClick:()=>Pr(C,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#E8EDF2] text-[#2D4660] border-t border-gray-200",children:[o.jsx(jr,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Le(C,"stakeholder")&&o.jsxs("button",{onClick:()=>Pr(C,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200",children:[o.jsx(kn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),J==="session-admin"&&C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&C.stakeholderInSessions.some(le=>de.includes(le.id))&&o.jsxs("button",{onClick:()=>Pr(C,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[o.jsx(Kc,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(C.roles.isSystemAdmin||C.roles.sessionAdminCount>0||C.roles.stakeholderSessionCount>0)&&o.jsxs("button",{onClick:()=>Gr(C.id,C.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[o.jsx(Kc,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]})]})})]})]})]}),o.jsx("div",{className:"mt-2",children:Ze(C)})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),o.jsxs("div",{className:"space-y-1",children:[C.roles.sessionAdminCount>0&&o.jsxs("div",{className:"flex items-center text-sm cursor-help",title:C.adminInSessions&&C.adminInSessions.length>0?`Admin in: ${C.adminInSessions.map(le=>le.title||le.name||"Unnamed Session").join(", ")}`:"Loading session details...",children:[o.jsx(jr,{className:"h-4 w-4 mr-2 text-[#2D4660] flex-shrink-0"}),o.jsxs("span",{className:"text-gray-700",children:[C.roles.sessionAdminCount," as Admin"]})]}),C.roles.stakeholderSessionCount>0&&o.jsxs("div",{className:"flex items-center text-sm cursor-help",title:C.stakeholderInSessions&&C.stakeholderInSessions.length>0?`Stakeholder in: ${C.stakeholderInSessions.map(le=>le.title||le.name||"Unnamed Session").join(", ")}`:"Loading session details...",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-green-500 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-700",children:[C.roles.stakeholderSessionCount," as Stakeholder"]})]}),C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&o.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Created"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(gs,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),C.created_at?xe(C.created_at):"N/A"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Created By"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),C.created_by_name||"System"]})]})]})]},C.id)})}),o.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."})}):d.map(C=>{var X,le,De;return o.jsxs("tr",{className:"hover:bg-gray-50",onMouseEnter:()=>P(C.id),onMouseLeave:()=>P(null),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.name,C.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),Ut(C)&&o.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",Ut(C),")"]}),ur(C)&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",qr(C),")"]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:C.email})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ze(C)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"space-y-2",children:[C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&o.jsx("span",{className:"text-gray-400",children:"None"}),C.adminInSessions&&C.adminInSessions.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[o.jsx(jr,{className:"h-4 w-4 mr-1.5 text-[#173B65]"}),"Admin in ",C.adminInSessions.length," session",C.adminInSessions.length!==1?"s":"",":"]}),o.jsx("div",{className:"space-y-1.5 ml-5",children:C.adminInSessions.map(Se=>o.jsx("div",{className:"flex items-start",children:o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"font-medium text-gray-900",children:Se.title||Se.name||"Unnamed Session"}),Se.created_at&&o.jsxs("div",{className:"flex items-center text-gray-500 mt-0.5",children:[o.jsx(gs,{className:"h-3 w-3 mr-1"}),new Date(Se.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})},Se.id))})]}),C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&o.jsxs("div",{className:C.adminInSessions&&C.adminInSessions.length>0?"pt-2 border-t border-gray-100":"",children:[o.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[o.jsx(kn,{className:"h-4 w-4 mr-1.5 text-green-600"}),"Stakeholder in ",C.stakeholderInSessions.length," session",C.stakeholderInSessions.length!==1?"s":"",":"]}),o.jsx("div",{className:"space-y-1.5 ml-5",children:C.stakeholderInSessions.map(Se=>o.jsx("div",{className:"flex items-start",children:o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"font-medium text-gray-900",children:Se.title||Se.name||"Unnamed Session"}),Se.created_at&&o.jsxs("div",{className:"flex items-center text-gray-500 mt-0.5",children:[o.jsx(gs,{className:"h-3 w-3 mr-1"}),new Date(Se.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})},Se.id))})]})]})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-gray-700",children:[o.jsx(gs,{className:"h-4 w-4 mr-1.5 text-gray-400"}),C.created_at?xe(C.created_at):"N/A"]}),o.jsxs("div",{className:"flex items-center text-gray-500 text-xs mt-1",children:[o.jsx(kn,{className:"h-3.5 w-3.5 mr-1.5 text-gray-400"}),C.created_by_name||"System"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[(J==="system-admin"||J==="session-admin"&&C.roles.stakeholderSessionCount>0&&((X=C.stakeholderInSessions)==null?void 0:X.some(Se=>ne.some(Qe=>Qe.id===Se.id))))&&o.jsx("button",{onClick:()=>ln(C.id,C.name),className:`p-2 rounded-md hover:bg-red-50 transition-all md:transition-opacity ${C.id===(e==null?void 0:e.id)||J==="system-admin"&&bt.has(C.id)?"opacity-50 cursor-not-allowed":O===C.id?"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,disabled:C.id===(e==null?void 0:e.id)||J==="system-admin"&&bt.has(C.id),title:J==="session-admin"?"Remove stakeholder from all your sessions":bt.has(C.id)?`Cannot delete protected account${Ut(C)?` (${Ut(C)})`:""}`:C.id===(e==null?void 0:e.id)?"Cannot delete your own account":"Delete user",children:o.jsx(ei,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${C.id===(e==null?void 0:e.id)?"opacity-50":O===C.id?"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:Se=>{R.current[C.id]=Se},children:[o.jsx("button",{onClick:()=>N(E===C.id?null:C.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:C.id===(e==null?void 0:e.id),title:C.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:o.jsx(jS,{className:"h-5 w-5 text-gray-600"})}),E===C.id&&C.id!==(e==null?void 0:e.id)&&o.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((le=R.current[C.id])==null?void 0:le.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((De=R.current[C.id])==null?void 0:De.getBoundingClientRect().right)??0)},children:o.jsxs("div",{className:"py-1",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),J==="system-admin"&&o.jsxs(o.Fragment,{children:[C.roles.isSystemAdmin?o.jsxs("button",{onClick:()=>wn(C.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[o.jsx(Gn,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):o.jsxs("button",{onClick:()=>wn(C.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-purple-50 text-purple-700",children:[o.jsx(Gn,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Le(C,"session-admin")&&o.jsxs("button",{onClick:()=>Pr(C,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#E8EDF2] text-[#2D4660] border-t border-gray-200",children:[o.jsx(jr,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make Session Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Le(C,"stakeholder")&&o.jsxs("button",{onClick:()=>Pr(C,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200",children:[o.jsx(kn,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),J==="session-admin"&&C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&C.stakeholderInSessions.some(Se=>de.includes(Se.id))&&o.jsxs("button",{onClick:()=>Pr(C,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[o.jsx(Kc,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(C.roles.isSystemAdmin||C.roles.sessionAdminCount>0||C.roles.stakeholderSessionCount>0)&&o.jsxs("button",{onClick:()=>Gr(C.id,C.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[o.jsx(Kc,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove All Roles"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]})]})})]})]})})]},C.id)})})]}),o.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(yn,{className:"h-4 w-4 mr-2 text-gray-500"}),o.jsxs("span",{className:"text-gray-600",children:["Total Users: ",o.jsx("strong",{children:l.length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gn,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsxs("span",{className:"text-gray-600",children:["System Admins: ",o.jsx("strong",{children:l.filter(C=>C.roles.isSystemAdmin).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(jr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",o.jsx("strong",{children:l.filter(C=>C.roles.sessionAdminCount>0).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",o.jsx("strong",{children:l.filter(C=>C.roles.stakeholderSessionCount>0).length})]})]})]})})]}),o.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(yn,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gn,{className:"h-5 w-5 mr-2 text-purple-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.isSystemAdmin).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(jr,{className:"h-5 w-5 mr-2 text-[#2D4660] flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.sessionAdminCount>0).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(kn,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.stakeholderSessionCount>0).length})]})]})]})}),(z||W)&&o.jsx("div",{className:"mt-8 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>{(W||z)&&Z("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${J==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[o.jsx(jr,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),o.jsxs("button",{onClick:()=>{z&&Z("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${J==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!z,title:z?"System Admin View":"Only available for System Admins",children:[o.jsx(Gn,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),o.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",o.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-1 text-xs",children:[o.jsx("li",{children:o.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),o.jsx("li",{children:o.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),o.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:o.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),me&&Pe&&I&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:I==="session-admin"?"Add Session Admin":I==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:I==="remove-stakeholder"?o.jsxs(o.Fragment,{children:["Select a session to remove ",o.jsx("strong",{children:Pe.name})," as a stakeholder."]}):o.jsxs(o.Fragment,{children:["Select a session to add ",o.jsx("strong",{children:Pe.name})," as ",I==="session-admin"?"an admin":"a stakeholder","."]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Session"}),o.jsxs("select",{value:ye,onChange:C=>we(C.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent",children:[o.jsx("option",{value:"",children:"-- Select a session --"}),$e(I).map(C=>{const X=C.title||C.name||C.session_name||"Unnamed Session",le=C.created_at?new Date(C.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",De=le?`${X} (${le})`:X;return o.jsx("option",{value:C.id,children:De},C.id)})]}),ne.length===0&&o.jsx("p",{className:"mt-2 text-sm text-red-500",children:"No sessions found in the system. Create a session first."}),ne.length>0&&$e(I).length===0&&o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:I==="remove-stakeholder"?"This user is not a stakeholder in any sessions you manage.":`This user is already ${I==="session-admin"?"an admin":"a stakeholder"} in all ${ne.length} session(s).`}),ne.length>0&&$e(I).length>0&&o.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[$e(I).length," session(s) available"]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Hr,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:Kr,disabled:!ye,className:`flex-1 px-4 py-2.5 rounded-lg transition-colors ${ye?I==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:I==="remove-stakeholder"?"Remove from Session":"Add to Session"})]})]})})}),tt&&Ee&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:o.jsx(Kc,{className:"h-6 w-6 text-red-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),o.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(kn,{className:"h-5 w-5 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:Ee.name}),o.jsx("div",{className:"text-sm text-gray-500",children:Ee.email})]})]}),o.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),Ee.roles.isSystemAdmin&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(Gn,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),Ee.roles.sessionAdminCount>0&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(jr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",Ee.roles.sessionAdminCount," session",Ee.roles.sessionAdminCount!==1?"s":""]})]}),Ee.roles.stakeholderSessionCount>0&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",Ee.roles.stakeholderSessionCount," session",Ee.roles.stakeholderSessionCount!==1?"s":""]})]}),!Ee.roles.isSystemAdmin&&Ee.roles.sessionAdminCount===0&&Ee.roles.stakeholderSessionCount===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),Ee.adminInSessions&&Ee.adminInSessions.length>0||Ee.stakeholderInSessions&&Ee.stakeholderInSessions.length>0?o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[Ee.adminInSessions&&Ee.adminInSessions.length>0&&o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[o.jsx(jr,{className:"h-3.5 w-3.5 mr-1.5 text-[#173B65]"}),"Admin Sessions (",Ee.adminInSessions.length,")"]}),o.jsx("div",{className:"space-y-1 ml-5",children:Ee.adminInSessions.map(C=>o.jsxs("div",{className:"text-sm text-gray-700",children:[" ",C.title||C.name||"Unnamed Session"]},C.id))})]}),Ee.stakeholderInSessions&&Ee.stakeholderInSessions.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[o.jsx(kn,{className:"h-3.5 w-3.5 mr-1.5 text-green-600"}),"Stakeholder Sessions (",Ee.stakeholderInSessions.length,")"]}),o.jsx("div",{className:"space-y-1 ml-5",children:Ee.stakeholderInSessions.map(C=>o.jsxs("div",{className:"text-sm text-gray-700",children:[" ",C.title||C.name||"Unnamed Session"]},C.id))})]})]})]}):null,o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),o.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:o.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.jsx("li",{children:"User account will be permanently deleted"}),o.jsx("li",{children:"All authentication access will be revoked"}),o.jsx("li",{children:"User will be removed from all sessions"}),o.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:_e,disabled:st,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),o.jsx("button",{onClick:fe,disabled:st,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:st?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),be&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Ye,children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:C=>C.stopPropagation(),children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-6",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(yn,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:J==="session-admin"?"Add New Stakeholder":"Add New User"}),o.jsx("p",{className:"text-sm text-gray-600",children:J==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),o.jsx("button",{onClick:Ye,disabled:ve,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:Ne.name,onChange:C=>Xe({...Ne,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",value:Ne.email,onChange:C=>Xe({...Ne,email:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Temporary Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:Ne.password,onChange:C=>Xe({...Ne,password:C.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent font-mono text-sm",placeholder:"Auto-generated password"}),o.jsx("button",{onClick:()=>Xe({...Ne,password:nt()}),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Regenerate"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Save this password to share with the user securely"})]}),J==="system-admin"&&o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>Qt({...vt,systemAdmin:!vt.systemAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gn,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),o.jsx(pn,{className:`h-4 w-4 text-gray-500 transition-transform ${vt.systemAdmin?"rotate-180":""}`})]}),vt.systemAdmin&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsxs("label",{className:"flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Ne.isSystemAdmin,onChange:C=>Xe({...Ne,isSystemAdmin:C.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 accent-green-600"}),o.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Grant system administrator privileges"})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Full access to all sessions and user management"})]})]}),J==="system-admin"&&o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>Qt({...vt,sessionAdmin:!vt.sessionAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(jr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Session Admin"}),Ne.sessionAdminIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#E8EDF2] text-[#173B65] text-xs rounded-full",children:Ne.sessionAdminIds.length})]}),o.jsx(pn,{className:`h-4 w-4 text-gray-500 transition-transform ${vt.sessionAdmin?"rotate-180":""}`})]}),vt.sessionAdmin&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsx("div",{children:o.jsx(hv,{products:kt,value:an,onChange:C=>{ir(C),Xe(X=>({...X,sessionAdminIds:[]}))},label:"Product *"})}),an&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Er.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Er.map(C=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:Ne.sessionAdminIds.includes(C.id),onChange:()=>F(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||C.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Oe(C)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${Te(C).color}`,children:Te(C).text})})]})]},C.id))})]})]})]}),J==="session-admin"?o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ne.stakeholderSessionIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:Ne.stakeholderSessionIds.length})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{children:o.jsx(hv,{products:kt,value:tr,onChange:C=>{gr(C),Xe(X=>({...X,stakeholderSessionIds:[]}))},label:"Product *"})}),tr&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),sr.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:sr.map(C=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:Ne.stakeholderSessionIds.includes(C.id),onChange:()=>ge(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||C.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Oe(C)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${Te(C).color}`,children:Te(C).text})})]})]},C.id))})]})]})]}):o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>Qt({...vt,stakeholder:!vt.stakeholder}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(kn,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"}),Ne.stakeholderSessionIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:Ne.stakeholderSessionIds.length})]}),o.jsx(pn,{className:`h-4 w-4 text-gray-500 transition-transform ${vt.stakeholder?"rotate-180":""}`})]}),vt.stakeholder&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsx("div",{children:o.jsx(hv,{products:kt,value:tr,onChange:C=>{gr(C),Xe(X=>({...X,stakeholderSessionIds:[]}))},label:"Product *"})}),tr&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),sr.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:sr.map(C=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:Ne.stakeholderSessionIds.includes(C.id),onChange:()=>ge(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||C.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Oe(C)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${Te(C).color}`,children:Te(C).text})})]})]},C.id))})]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[o.jsx("button",{onClick:Ye,disabled:ve,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),o.jsx("button",{onClick:D,disabled:ve||!Ne.name.trim()||!Ne.email.trim()||!Ne.password.trim()||J==="session-admin"&&(!tr||Ne.stakeholderSessionIds.length===0),className:"flex-1 px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ve?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ne.isSystemAdmin?"Adding System Admin...":Ne.sessionAdminIds.length>0?"Adding Session Admin...":Ne.stakeholderSessionIds.length>0?"Adding Stakeholder...":"Creating User..."]}):Ne.isSystemAdmin?"Add System Admin":Ne.sessionAdminIds.length>0?"Add Session Admin":Ne.stakeholderSessionIds.length>0?"Add Stakeholder":"Create User"})]})]})})}),Br&&yr&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(kr,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[yr.userType," Created Successfully!"]}),o.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),o.jsx("button",{onClick:()=>{cr(!1),Rt(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:o.jsx(Xs,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),o.jsx("div",{className:"text-sm font-medium text-gray-900",children:yr.email})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Temporary Password"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("code",{className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-md font-mono text-sm text-gray-900",children:yr.password}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(yr.password)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors text-sm",title:"Copy password",children:"Copy"})]})]})]})}),o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important: Save This Password"}),o.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:"Please save this password and share it with the user securely. They will need it to log in for the first time."})]})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>{cr(!1),Rt(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const PZ=""+new URL("bottom-left-curve-T4fflHT3.png",import.meta.url).href,OZ=()=>o.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:o.jsx("img",{src:PZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function TZ(){return o.jsx(wM,{children:o.jsxs(k6,{children:[o.jsx(OZ,{}),o.jsx(yR,{basename:"/feature-voting-app",children:o.jsxs(KD,{children:[o.jsx(as,{path:"/",element:o.jsx(qD,{to:"/login",replace:!0})}),o.jsx(as,{path:"/login",element:o.jsx(CF,{})}),o.jsx(as,{path:"/sessions",element:o.jsx(jZ,{})}),o.jsx(as,{path:"/create-session",element:o.jsx(SZ,{})}),o.jsx(as,{path:"/manage-stakeholders",element:o.jsx(kZ,{})}),o.jsx(as,{path:"/manage-admins",element:o.jsx(NZ,{})}),o.jsx(as,{path:"/vote",element:o.jsx(fv,{adminMode:!1})}),o.jsx(as,{path:"/admin",element:o.jsx(fv,{adminMode:!0})}),o.jsx(as,{path:"/results",element:o.jsx(fv,{resultsMode:!0})}),o.jsx(as,{path:"/unauthorized",element:o.jsx(CZ,{})}),o.jsx(as,{path:"/system-admins",element:o.jsx(EZ,{})}),o.jsx(as,{path:"/users",element:o.jsx(AZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}rD.createRoot(document.getElementById("root")).render(o.jsx(dt.StrictMode,{children:o.jsx(TZ,{})}));
