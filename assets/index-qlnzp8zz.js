var aD=Object.defineProperty;var oD=(e,t,r)=>t in e?aD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var sy=(e,t,r)=>oD(e,typeof t!="symbol"?t+"":t,r);function lD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function pa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var iy={exports:{}},Hu={},ay={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bj;function uD(){if(Bj)return Jt;Bj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function S(M,X,me){this.props=M,this.context=X,this.refs=w,this.updater=me||v}S.prototype.isReactComponent={},S.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function _(){}_.prototype=S.prototype;function E(M,X,me){this.props=M,this.context=X,this.refs=w,this.updater=me||v}var C=E.prototype=new _;C.constructor=E,j(C,S.prototype),C.isPureReactComponent=!0;var T=Array.isArray,A=Object.prototype.hasOwnProperty,D={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function R(M,X,me){var xe,Fe={},Se=null,Re=null;if(X!=null)for(xe in X.ref!==void 0&&(Re=X.ref),X.key!==void 0&&(Se=""+X.key),X)A.call(X,xe)&&!L.hasOwnProperty(xe)&&(Fe[xe]=X[xe]);var ke=arguments.length-2;if(ke===1)Fe.children=me;else if(1<ke){for(var F=Array(ke),le=0;le<ke;le++)F[le]=arguments[le+2];Fe.children=F}if(M&&M.defaultProps)for(xe in ke=M.defaultProps,ke)Fe[xe]===void 0&&(Fe[xe]=ke[xe]);return{$$typeof:e,type:M,key:Se,ref:Re,props:Fe,_owner:D.current}}function J(M,X){return{$$typeof:e,type:M.type,key:X,ref:M.ref,props:M.props,_owner:M._owner}}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function ie(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(me){return X[me]})}var q=/\/+/g;function de(M,X){return typeof M=="object"&&M!==null&&M.key!=null?ie(""+M.key):X.toString(36)}function W(M,X,me,xe,Fe){var Se=typeof M;(Se==="undefined"||Se==="boolean")&&(M=null);var Re=!1;if(M===null)Re=!0;else switch(Se){case"string":case"number":Re=!0;break;case"object":switch(M.$$typeof){case e:case t:Re=!0}}if(Re)return Re=M,Fe=Fe(Re),M=xe===""?"."+de(Re,0):xe,T(Fe)?(me="",M!=null&&(me=M.replace(q,"$&/")+"/"),W(Fe,X,me,"",function(le){return le})):Fe!=null&&(ne(Fe)&&(Fe=J(Fe,me+(!Fe.key||Re&&Re.key===Fe.key?"":(""+Fe.key).replace(q,"$&/")+"/")+M)),X.push(Fe)),1;if(Re=0,xe=xe===""?".":xe+":",T(M))for(var ke=0;ke<M.length;ke++){Se=M[ke];var F=xe+de(Se,ke);Re+=W(Se,X,me,F,Fe)}else if(F=x(M),typeof F=="function")for(M=F.call(M),ke=0;!(Se=M.next()).done;)Se=Se.value,F=xe+de(Se,ke++),Re+=W(Se,X,me,F,Fe);else if(Se==="object")throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Re}function G(M,X,me){if(M==null)return M;var xe=[],Fe=0;return W(M,xe,"","",function(Se){return X.call(me,Se,Fe++)}),xe}function Q(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(me){(M._status===0||M._status===-1)&&(M._status=1,M._result=me)},function(me){(M._status===0||M._status===-1)&&(M._status=2,M._result=me)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var ae={current:null},ee={transition:null},oe={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:ee,ReactCurrentOwner:D};function te(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:G,forEach:function(M,X,me){G(M,function(){X.apply(this,arguments)},me)},count:function(M){var X=0;return G(M,function(){X++}),X},toArray:function(M){return G(M,function(X){return X})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Jt.Component=S,Jt.Fragment=r,Jt.Profiler=s,Jt.PureComponent=E,Jt.StrictMode=n,Jt.Suspense=d,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Jt.act=te,Jt.cloneElement=function(M,X,me){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var xe=j({},M.props),Fe=M.key,Se=M.ref,Re=M._owner;if(X!=null){if(X.ref!==void 0&&(Se=X.ref,Re=D.current),X.key!==void 0&&(Fe=""+X.key),M.type&&M.type.defaultProps)var ke=M.type.defaultProps;for(F in X)A.call(X,F)&&!L.hasOwnProperty(F)&&(xe[F]=X[F]===void 0&&ke!==void 0?ke[F]:X[F])}var F=arguments.length-2;if(F===1)xe.children=me;else if(1<F){ke=Array(F);for(var le=0;le<F;le++)ke[le]=arguments[le+2];xe.children=ke}return{$$typeof:e,type:M.type,key:Fe,ref:Se,props:xe,_owner:Re}},Jt.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Jt.createElement=R,Jt.createFactory=function(M){var X=R.bind(null,M);return X.type=M,X},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(M){return{$$typeof:u,render:M}},Jt.isValidElement=ne,Jt.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:Q}},Jt.memo=function(M,X){return{$$typeof:m,type:M,compare:X===void 0?null:X}},Jt.startTransition=function(M){var X=ee.transition;ee.transition={};try{M()}finally{ee.transition=X}},Jt.unstable_act=te,Jt.useCallback=function(M,X){return ae.current.useCallback(M,X)},Jt.useContext=function(M){return ae.current.useContext(M)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(M){return ae.current.useDeferredValue(M)},Jt.useEffect=function(M,X){return ae.current.useEffect(M,X)},Jt.useId=function(){return ae.current.useId()},Jt.useImperativeHandle=function(M,X,me){return ae.current.useImperativeHandle(M,X,me)},Jt.useInsertionEffect=function(M,X){return ae.current.useInsertionEffect(M,X)},Jt.useLayoutEffect=function(M,X){return ae.current.useLayoutEffect(M,X)},Jt.useMemo=function(M,X){return ae.current.useMemo(M,X)},Jt.useReducer=function(M,X,me){return ae.current.useReducer(M,X,me)},Jt.useRef=function(M){return ae.current.useRef(M)},Jt.useState=function(M){return ae.current.useState(M)},Jt.useSyncExternalStore=function(M,X,me){return ae.current.useSyncExternalStore(M,X,me)},Jt.useTransition=function(){return ae.current.useTransition()},Jt.version="18.3.1",Jt}var Wj;function nu(){return Wj||(Wj=1,ay.exports=uD()),ay.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vj;function dD(){if(Vj)return Hu;Vj=1;var e=nu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},x=null,v=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:x,ref:v,props:p,_owner:s.current}}return Hu.Fragment=r,Hu.jsx=l,Hu.jsxs=l,Hu}var qj;function fD(){return qj||(qj=1,iy.exports=dD()),iy.exports}var i=fD(),g=nu();const jt=pa(g),hD=lD({__proto__:null,default:jt},[g]);var th={},oy={exports:{}},Ys={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj;function mD(){return Hj||(Hj=1,(function(e){function t(ee,oe){var te=ee.length;ee.push(oe);e:for(;0<te;){var M=te-1>>>1,X=ee[M];if(0<s(X,oe))ee[M]=oe,ee[te]=X,te=M;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var oe=ee[0],te=ee.pop();if(te!==oe){ee[0]=te;e:for(var M=0,X=ee.length,me=X>>>1;M<me;){var xe=2*(M+1)-1,Fe=ee[xe],Se=xe+1,Re=ee[Se];if(0>s(Fe,te))Se<X&&0>s(Re,Fe)?(ee[M]=Re,ee[Se]=te,M=Se):(ee[M]=Fe,ee[xe]=te,M=xe);else if(Se<X&&0>s(Re,te))ee[M]=Re,ee[Se]=te,M=Se;else break e}}return oe}function s(ee,oe){var te=ee.sortIndex-oe.sortIndex;return te!==0?te:ee.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,x=3,v=!1,j=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ee){for(var oe=r(m);oe!==null;){if(oe.callback===null)n(m);else if(oe.startTime<=ee)n(m),oe.sortIndex=oe.expirationTime,t(d,oe);else break;oe=r(m)}}function T(ee){if(w=!1,C(ee),!j)if(r(d)!==null)j=!0,Q(A);else{var oe=r(m);oe!==null&&ae(T,oe.startTime-ee)}}function A(ee,oe){j=!1,w&&(w=!1,_(R),R=-1),v=!0;var te=x;try{for(C(oe),p=r(d);p!==null&&(!(p.expirationTime>oe)||ee&&!ie());){var M=p.callback;if(typeof M=="function"){p.callback=null,x=p.priorityLevel;var X=M(p.expirationTime<=oe);oe=e.unstable_now(),typeof X=="function"?p.callback=X:p===r(d)&&n(d),C(oe)}else n(d);p=r(d)}if(p!==null)var me=!0;else{var xe=r(m);xe!==null&&ae(T,xe.startTime-oe),me=!1}return me}finally{p=null,x=te,v=!1}}var D=!1,L=null,R=-1,J=5,ne=-1;function ie(){return!(e.unstable_now()-ne<J)}function q(){if(L!==null){var ee=e.unstable_now();ne=ee;var oe=!0;try{oe=L(!0,ee)}finally{oe?de():(D=!1,L=null)}}else D=!1}var de;if(typeof E=="function")de=function(){E(q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,G=W.port2;W.port1.onmessage=q,de=function(){G.postMessage(null)}}else de=function(){S(q,0)};function Q(ee){L=ee,D||(D=!0,de())}function ae(ee,oe){R=S(function(){ee(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,Q(A))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var te=x;x=oe;try{return ee()}finally{x=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var te=x;x=ee;try{return oe()}finally{x=te}},e.unstable_scheduleCallback=function(ee,oe,te){var M=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?M+te:M):te=M,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,ee={id:f++,callback:oe,priorityLevel:ee,startTime:te,expirationTime:X,sortIndex:-1},te>M?(ee.sortIndex=te,t(m,ee),r(d)===null&&ee===r(m)&&(w?(_(R),R=-1):w=!0,ae(T,te-M))):(ee.sortIndex=X,t(d,ee),j||v||(j=!0,Q(A))),ee},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(ee){var oe=x;return function(){var te=x;x=oe;try{return ee.apply(this,arguments)}finally{x=te}}}})(cy)),cy}var Kj;function pD(){return Kj||(Kj=1,ly.exports=mD()),ly.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gj;function gD(){if(Gj)return Ys;Gj=1;var e=nu(),t=pD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function x(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function v(o,c,h,y){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,c,h,y){if(c===null||typeof c>"u"||v(o,c,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(o,c,h,y,b,N,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=b,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=N,this.removeEmptyString=O}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new w(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,y){var b=S.hasOwnProperty(c)?S[c]:null;(b!==null?b.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,b,y)&&(h=null),y||b===null?x(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):b.mustUseProperty?o[b.propertyName]=h===null?b.type===3?!1:"":h:(c=b.attributeName,y=b.attributeNamespace,h===null?o.removeAttribute(c):(b=b.type,h=b===3||b===4&&h===!0?"":""+h,y?o.setAttributeNS(y,c,h):o.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),D=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),ie=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),ee=Symbol.iterator;function oe(o){return o===null||typeof o!="object"?null:(o=ee&&o[ee]||o["@@iterator"],typeof o=="function"?o:null)}var te=Object.assign,M;function X(o){if(M===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);M=c&&c[1]||""}return`
`+M+o}var me=!1;function xe(o,c){if(!o||me)return"";me=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(be){var y=be}Reflect.construct(o,[],c)}else{try{c.call()}catch(be){y=be}o.call(c.prototype)}else{try{throw Error()}catch(be){y=be}o()}}catch(be){if(be&&y&&typeof be.stack=="string"){for(var b=be.stack.split(`
`),N=y.stack.split(`
`),O=b.length-1,B=N.length-1;1<=O&&0<=B&&b[O]!==N[B];)B--;for(;1<=O&&0<=B;O--,B--)if(b[O]!==N[B]){if(O!==1||B!==1)do if(O--,B--,0>B||b[O]!==N[B]){var Y=`
`+b[O].replace(" at new "," at ");return o.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",o.displayName)),Y}while(1<=O&&0<=B);break}}}finally{me=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?X(o):""}function Fe(o){switch(o.tag){case 5:return X(o.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return o=xe(o.type,!1),o;case 11:return o=xe(o.type.render,!1),o;case 1:return o=xe(o.type,!0),o;default:return""}}function Se(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case L:return"Fragment";case D:return"Portal";case J:return"Profiler";case R:return"StrictMode";case de:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ie:return(o.displayName||"Context")+".Consumer";case ne:return(o._context.displayName||"Context")+".Provider";case q:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case G:return c=o.displayName||null,c!==null?c:Se(o.type)||"Memo";case Q:c=o._payload,o=o._init;try{return Se(o(c))}catch{}}return null}function Re(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(c);case 8:return c===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function F(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function le(o){var c=F(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,N=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return b.call(this)},set:function(O){y=""+O,N.call(this,O)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function ce(o){o._valueTracker||(o._valueTracker=le(o))}function K(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return o&&(y=F(o)?o.checked?"true":"false":o.value),o=y,o!==h?(c.setValue(o),!0):!1}function Ye(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ae(o,c){var h=c.checked;return te({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function tt(o,c){var h=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;h=ke(c.value!=null?c.value:h),o._wrapperState={initialChecked:y,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function St(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function pt(o,c){St(o,c);var h=ke(c.value),y=c.type;if(h!=null)y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?er(o,c.type,h):c.hasOwnProperty("defaultValue")&&er(o,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function it(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function er(o,c,h){(c!=="number"||Ye(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var z=Array.isArray;function V(o,c,h,y){if(o=o.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<o.length;h++)b=c.hasOwnProperty("$"+o[h].value),o[h].selected!==b&&(o[h].selected=b),b&&y&&(o[h].defaultSelected=!0)}else{for(h=""+ke(h),c=null,b=0;b<o.length;b++){if(o[b].value===h){o[b].selected=!0,y&&(o[b].defaultSelected=!0);return}c!==null||o[b].disabled||(c=o[b])}c!==null&&(c.selected=!0)}}function Z(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ne(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(z(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:ke(h)}}function Oe(o,c){var h=ke(c.value),y=ke(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),y!=null&&(o.defaultValue=""+y)}function _e(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Te(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Te(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Dt,Ve=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,y,b){MSApp.execUnsafeLocalFunction(function(){return o(c,h,y,b)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Dt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function gt(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Le=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(o){Le.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),xt[c]=xt[o]})});function He(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||xt.hasOwnProperty(o)&&xt[o]?(""+c).trim():c+"px"}function et(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var y=h.indexOf("--")===0,b=He(h,c[h],y);h==="float"&&(h="cssFloat"),y?o.setProperty(h,b):o[h]=b}}var vt=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ct(o,c){if(c){if(vt[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Ht(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function Er(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ze=null,Bt=null,Vt=null;function Wt(o){if(o=Ou(o)){if(typeof Ze!="function")throw Error(r(280));var c=o.stateNode;c&&(c=gf(c),Ze(o.stateNode,o.type,c))}}function Gt(o){Bt?Vt?Vt.push(o):Vt=[o]:Bt=o}function tr(){if(Bt){var o=Bt,c=Vt;if(Vt=Bt=null,Wt(o),c)for(o=0;o<c.length;o++)Wt(c[o])}}function Rr(o,c){return o(c)}function Yt(){}var sr=!1;function dr(o,c,h){if(sr)return o(c,h);sr=!0;try{return Rr(o,c,h)}finally{sr=!1,(Bt!==null||Vt!==null)&&(Yt(),tr())}}function rr(o,c){var h=o.stateNode;if(h===null)return null;var y=gf(h);if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Wn=!1;if(u)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{Wn=!1}function os(o,c,h,y,b,N,O,B,Y){var be=Array.prototype.slice.call(arguments,3);try{c.apply(h,be)}catch(ze){this.onError(ze)}}var Mr=!1,gr=null,fr=!1,rn=null,Fr={onError:function(o){Mr=!0,gr=o}};function An(o,c,h,y,b,N,O,B,Y){Mr=!1,gr=null,os.apply(Fr,arguments)}function jr(o,c,h,y,b,N,O,B,Y){if(An.apply(this,arguments),Mr){if(Mr){var be=gr;Mr=!1,gr=null}else throw Error(r(198));fr||(fr=!0,rn=be)}}function Or(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Vn(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function qn(o){if(Or(o)!==o)throw Error(r(188))}function Vi(o){var c=o.alternate;if(!c){if(c=Or(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,y=c;;){var b=h.return;if(b===null)break;var N=b.alternate;if(N===null){if(y=b.return,y!==null){h=y;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===h)return qn(b),o;if(N===y)return qn(b),c;N=N.sibling}throw Error(r(188))}if(h.return!==y.return)h=b,y=N;else{for(var O=!1,B=b.child;B;){if(B===h){O=!0,h=b,y=N;break}if(B===y){O=!0,y=b,h=N;break}B=B.sibling}if(!O){for(B=N.child;B;){if(B===h){O=!0,h=N,y=b;break}if(B===y){O=!0,y=N,h=b;break}B=B.sibling}if(!O)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function cn(o){return o=Vi(o),o!==null?xs(o):null}function xs(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=xs(o);if(c!==null)return c;o=o.sibling}return null}var vs=t.unstable_scheduleCallback,xr=t.unstable_cancelCallback,Pn=t.unstable_shouldYield,Ar=t.unstable_requestPaint,Qt=t.unstable_now,or=t.unstable_getCurrentPriorityLevel,re=t.unstable_ImmediatePriority,Pe=t.unstable_UserBlockingPriority,Ue=t.unstable_NormalPriority,We=t.unstable_LowPriority,Je=t.unstable_IdlePriority,Ie=null,Ot=null;function Rt(o){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Ie,o,void 0,(o.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:lr,Ke=Math.log,vr=Math.LN2;function lr(o){return o>>>=0,o===0?32:31-(Ke(o)/vr|0)|0}var Lr=64,Ut=4194304;function un(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function br(o,c){var h=o.pendingLanes;if(h===0)return 0;var y=0,b=o.suspendedLanes,N=o.pingedLanes,O=h&268435455;if(O!==0){var B=O&~b;B!==0?y=un(B):(N&=O,N!==0&&(y=un(N)))}else O=h&~b,O!==0?y=un(O):N!==0&&(y=un(N));if(y===0)return 0;if(c!==0&&c!==y&&(c&b)===0&&(b=y&-y,N=c&-c,b>=N||b===16&&(N&4194240)!==0))return c;if((y&4)!==0&&(y|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)h=31-Tt(c),b=1<<h,y|=o[h],c&=~b;return y}function Hn(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(o,c){for(var h=o.suspendedLanes,y=o.pingedLanes,b=o.expirationTimes,N=o.pendingLanes;0<N;){var O=31-Tt(N),B=1<<O,Y=b[O];Y===-1?((B&h)===0||(B&y)!==0)&&(b[O]=Hn(B,c)):Y<=c&&(o.expiredLanes|=B),N&=~B}}function ls(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Si(){var o=Lr;return Lr<<=1,(Lr&4194240)===0&&(Lr=64),o}function nr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Qr(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Tt(c),o[c]=h}function yr(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<h;){var b=31-Tt(h),N=1<<b;c[b]=0,y[b]=-1,o[b]=-1,h&=~N}}function qi(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var y=31-Tt(h),b=1<<y;b&c|o[y]&c&&(o[y]|=c),h&=~b}}var Mt=0;function Us(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ni,dn,Hi,Ki,bs,si=!1,Kn=[],Zr=null,cs=null,ws=null,zr=new Map,fn=new Map,nn=[],Gi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function As(o,c){switch(o){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":zr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(c.pointerId)}}function Ps(o,c,h,y,b,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:N,targetContainers:[b]},c!==null&&(c=Ou(c),c!==null&&dn(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),o)}function Yi(o,c,h,y,b){switch(c){case"focusin":return Zr=Ps(Zr,o,c,h,y,b),!0;case"dragenter":return cs=Ps(cs,o,c,h,y,b),!0;case"mouseover":return ws=Ps(ws,o,c,h,y,b),!0;case"pointerover":var N=b.pointerId;return zr.set(N,Ps(zr.get(N)||null,o,c,h,y,b)),!0;case"gotpointercapture":return N=b.pointerId,fn.set(N,Ps(fn.get(N)||null,o,c,h,y,b)),!0}return!1}function wo(o){var c=al(o.target);if(c!==null){var h=Or(c);if(h!==null){if(c=h.tag,c===13){if(c=Vn(h),c!==null){o.blockedOn=c,bs(o.priority,function(){Hi(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Os(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=hn(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);ar=y,h.target.dispatchEvent(y),ar=null}else return c=Ou(h),c!==null&&dn(c),o.blockedOn=h,!1;c.shift()}return!0}function Ra(o,c,h){Os(o)&&h.delete(c)}function sl(){si=!1,Zr!==null&&Os(Zr)&&(Zr=null),cs!==null&&Os(cs)&&(cs=null),ws!==null&&Os(ws)&&(ws=null),zr.forEach(Ra),fn.forEach(Ra)}function sn(o,c){o.blockedOn===c&&(o.blockedOn=null,si||(si=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sl)))}function Bs(o){function c(b){return sn(b,o)}if(0<Kn.length){sn(Kn[0],o);for(var h=1;h<Kn.length;h++){var y=Kn[h];y.blockedOn===o&&(y.blockedOn=null)}}for(Zr!==null&&sn(Zr,o),cs!==null&&sn(cs,o),ws!==null&&sn(ws,o),zr.forEach(c),fn.forEach(c),h=0;h<nn.length;h++)y=nn[h],y.blockedOn===o&&(y.blockedOn=null);for(;0<nn.length&&(h=nn[0],h.blockedOn===null);)wo(h),h.blockedOn===null&&nn.shift()}var Ts=T.ReactCurrentBatchConfig,ki=!0;function jo(o,c,h,y){var b=Mt,N=Ts.transition;Ts.transition=null;try{Mt=1,Ma(o,c,h,y)}finally{Mt=b,Ts.transition=N}}function il(o,c,h,y){var b=Mt,N=Ts.transition;Ts.transition=null;try{Mt=4,Ma(o,c,h,y)}finally{Mt=b,Ts.transition=N}}function Ma(o,c,h,y){if(ki){var b=hn(o,c,h,y);if(b===null)Gp(o,c,y,Ji,h),As(o,y);else if(Yi(b,o,c,h,y))y.stopPropagation();else if(As(o,y),c&4&&-1<Gi.indexOf(o)){for(;b!==null;){var N=Ou(b);if(N!==null&&ni(N),N=hn(o,c,h,y),N===null&&Gp(o,c,y,Ji,h),N===b)break;b=N}b!==null&&y.stopPropagation()}else Gp(o,c,y,null,h)}}var Ji=null;function hn(o,c,h,y){if(Ji=null,o=Er(y),o=al(o),o!==null)if(c=Or(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Vn(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Ji=o,null}function us(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(or()){case re:return 1;case Pe:return 4;case Ue:case We:return 16;case Je:return 536870912;default:return 16}default:return 16}}var wr=null,Xi=null,Gn=null;function Ni(){if(Gn)return Gn;var o,c=Xi,h=c.length,y,b="value"in wr?wr.value:wr.textContent,N=b.length;for(o=0;o<h&&c[o]===b[o];o++);var O=h-o;for(y=1;y<=O&&c[h-y]===b[N-y];y++);return Gn=b.slice(o,1<y?1-y:void 0)}function _i(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function U(){return!0}function k(){return!1}function $(o){function c(h,y,b,N,O){this._reactName=h,this._targetInst=b,this.type=y,this.nativeEvent=N,this.target=O,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(h=o[B],this[B]=h?h(N):N[B]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?U:k,this.isPropagationStopped=k,this}return te(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=U)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=U)},persist:function(){},isPersistent:U}),c}var ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fe=$(ge),we=te({},ge,{view:0,detail:0}),P=$(we),I,H,ue,$e=te({},we,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ue&&(ue&&o.type==="mousemove"?(I=o.screenX-ue.screenX,H=o.screenY-ue.screenY):H=I=0,ue=o),I)},movementY:function(o){return"movementY"in o?o.movementY:H}}),Ce=$($e),pe=te({},$e,{dataTransfer:0}),ve=$(pe),ft=te({},we,{relatedTarget:0}),At=$(ft),at=te({},ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Ft=$(at),Nt=te({},ge,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),De=$(Nt),bt=te({},ge,{data:0}),Ge=$(bt),ot={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=rt[o])?!!c[o]:!1}function yt(){return It}var Zt=te({},we,{key:function(o){if(o.key){var c=ot[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=_i(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Lt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yt,charCode:function(o){return o.type==="keypress"?_i(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_i(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Kr=$(Zt),mn=te({},$e,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=$(mn),js=te({},we,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yt}),$p=$(js),Rp=te({},ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mp=$(Rp),ZT=te({},$e,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),eI=$(ZT),tI=[9,13,27,32],Fp=u&&"CompositionEvent"in window,ju=null;u&&"documentMode"in document&&(ju=document.documentMode);var rI=u&&"TextEvent"in window&&!ju,Dw=u&&(!Fp||ju&&8<ju&&11>=ju),$w=" ",Rw=!1;function Mw(o,c){switch(o){case"keyup":return tI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zl=!1;function nI(o,c){switch(o){case"compositionend":return Fw(c);case"keypress":return c.which!==32?null:(Rw=!0,$w);case"textInput":return o=c.data,o===$w&&Rw?null:o;default:return null}}function sI(o,c){if(Zl)return o==="compositionend"||!Fp&&Mw(o,c)?(o=Ni(),Gn=Xi=wr=null,Zl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Dw&&c.locale!=="ko"?null:c.data;default:return null}}var iI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!iI[o.type]:c==="textarea"}function zw(o,c,h,y){Gt(y),c=hf(c,"onChange"),0<c.length&&(h=new fe("onChange","change",null,h,y),o.push({event:h,listeners:c}))}var Su=null,ku=null;function aI(o){s1(o,0)}function cf(o){var c=sc(o);if(K(c))return o}function oI(o,c){if(o==="change")return c}var Uw=!1;if(u){var Lp;if(u){var zp="oninput"in document;if(!zp){var Bw=document.createElement("div");Bw.setAttribute("oninput","return;"),zp=typeof Bw.oninput=="function"}Lp=zp}else Lp=!1;Uw=Lp&&(!document.documentMode||9<document.documentMode)}function Ww(){Su&&(Su.detachEvent("onpropertychange",Vw),ku=Su=null)}function Vw(o){if(o.propertyName==="value"&&cf(ku)){var c=[];zw(c,ku,o,Er(o)),dr(aI,c)}}function lI(o,c,h){o==="focusin"?(Ww(),Su=c,ku=h,Su.attachEvent("onpropertychange",Vw)):o==="focusout"&&Ww()}function cI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cf(ku)}function uI(o,c){if(o==="click")return cf(c)}function dI(o,c){if(o==="input"||o==="change")return cf(c)}function fI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Qi=typeof Object.is=="function"?Object.is:fI;function Nu(o,c){if(Qi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var b=h[y];if(!d.call(c,b)||!Qi(o[b],c[b]))return!1}return!0}function qw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Hw(o,c){var h=qw(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=c&&y>=c)return{node:h,offset:c-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=qw(h)}}function Kw(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Kw(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Gw(){for(var o=window,c=Ye();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ye(o.document)}return c}function Up(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function hI(o){var c=Gw(),h=o.focusedElem,y=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Kw(h.ownerDocument.documentElement,h)){if(y!==null&&Up(h)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var b=h.textContent.length,N=Math.min(y.start,b);y=y.end===void 0?N:Math.min(y.end,b),!o.extend&&N>y&&(b=y,y=N,N=b),b=Hw(h,N);var O=Hw(h,y);b&&O&&(o.rangeCount!==1||o.anchorNode!==b.node||o.anchorOffset!==b.offset||o.focusNode!==O.node||o.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),o.removeAllRanges(),N>y?(o.addRange(c),o.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var mI=u&&"documentMode"in document&&11>=document.documentMode,ec=null,Bp=null,_u=null,Wp=!1;function Yw(o,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Wp||ec==null||ec!==Ye(y)||(y=ec,"selectionStart"in y&&Up(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_u&&Nu(_u,y)||(_u=y,y=hf(Bp,"onSelect"),0<y.length&&(c=new fe("onSelect","select",null,c,h),o.push({event:c,listeners:y}),c.target=ec)))}function uf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var tc={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},Vp={},Jw={};u&&(Jw=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function df(o){if(Vp[o])return Vp[o];if(!tc[o])return o;var c=tc[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Jw)return Vp[o]=c[h];return o}var Xw=df("animationend"),Qw=df("animationiteration"),Zw=df("animationstart"),e1=df("transitionend"),t1=new Map,r1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(o,c){t1.set(o,c),a(c,[o])}for(var qp=0;qp<r1.length;qp++){var Hp=r1[qp],pI=Hp.toLowerCase(),gI=Hp[0].toUpperCase()+Hp.slice(1);So(pI,"on"+gI)}So(Xw,"onAnimationEnd"),So(Qw,"onAnimationIteration"),So(Zw,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(e1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function n1(o,c,h){var y=o.type||"unknown-event";o.currentTarget=h,jr(y,c,void 0,o),o.currentTarget=null}function s1(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],b=y.event;y=y.listeners;e:{var N=void 0;if(c)for(var O=y.length-1;0<=O;O--){var B=y[O],Y=B.instance,be=B.currentTarget;if(B=B.listener,Y!==N&&b.isPropagationStopped())break e;n1(b,B,be),N=Y}else for(O=0;O<y.length;O++){if(B=y[O],Y=B.instance,be=B.currentTarget,B=B.listener,Y!==N&&b.isPropagationStopped())break e;n1(b,B,be),N=Y}}}if(fr)throw o=rn,fr=!1,rn=null,o}function Ur(o,c){var h=c[eg];h===void 0&&(h=c[eg]=new Set);var y=o+"__bubble";h.has(y)||(i1(c,o,2,!1),h.add(y))}function Kp(o,c,h){var y=0;c&&(y|=4),i1(h,o,y,c)}var ff="_reactListening"+Math.random().toString(36).slice(2);function Eu(o){if(!o[ff]){o[ff]=!0,n.forEach(function(h){h!=="selectionchange"&&(yI.has(h)||Kp(h,!1,o),Kp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[ff]||(c[ff]=!0,Kp("selectionchange",!1,c))}}function i1(o,c,h,y){switch(us(c)){case 1:var b=jo;break;case 4:b=il;break;default:b=Ma}h=b.bind(null,c,h,o),b=void 0,!Wn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),y?b!==void 0?o.addEventListener(c,h,{capture:!0,passive:b}):o.addEventListener(c,h,!0):b!==void 0?o.addEventListener(c,h,{passive:b}):o.addEventListener(c,h,!1)}function Gp(o,c,h,y,b){var N=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var B=y.stateNode.containerInfo;if(B===b||B.nodeType===8&&B.parentNode===b)break;if(O===4)for(O=y.return;O!==null;){var Y=O.tag;if((Y===3||Y===4)&&(Y=O.stateNode.containerInfo,Y===b||Y.nodeType===8&&Y.parentNode===b))return;O=O.return}for(;B!==null;){if(O=al(B),O===null)return;if(Y=O.tag,Y===5||Y===6){y=N=O;continue e}B=B.parentNode}}y=y.return}dr(function(){var be=N,ze=Er(h),Be=[];e:{var Me=t1.get(o);if(Me!==void 0){var Qe=fe,lt=o;switch(o){case"keypress":if(_i(h)===0)break e;case"keydown":case"keyup":Qe=Kr;break;case"focusin":lt="focus",Qe=At;break;case"focusout":lt="blur",Qe=At;break;case"beforeblur":case"afterblur":Qe=At;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Ce;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=$p;break;case Xw:case Qw:case Zw:Qe=Ft;break;case e1:Qe=Mp;break;case"scroll":Qe=P;break;case"wheel":Qe=eI;break;case"copy":case"cut":case"paste":Qe=De;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Ws}var dt=(c&4)!==0,pn=!dt&&o==="scroll",he=dt?Me!==null?Me+"Capture":null:Me;dt=[];for(var se=be,ye;se!==null;){ye=se;var qe=ye.stateNode;if(ye.tag===5&&qe!==null&&(ye=qe,he!==null&&(qe=rr(se,he),qe!=null&&dt.push(Au(se,qe,ye)))),pn)break;se=se.return}0<dt.length&&(Me=new Qe(Me,lt,null,h,ze),Be.push({event:Me,listeners:dt}))}}if((c&7)===0){e:{if(Me=o==="mouseover"||o==="pointerover",Qe=o==="mouseout"||o==="pointerout",Me&&h!==ar&&(lt=h.relatedTarget||h.fromElement)&&(al(lt)||lt[Fa]))break e;if((Qe||Me)&&(Me=ze.window===ze?ze:(Me=ze.ownerDocument)?Me.defaultView||Me.parentWindow:window,Qe?(lt=h.relatedTarget||h.toElement,Qe=be,lt=lt?al(lt):null,lt!==null&&(pn=Or(lt),lt!==pn||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(Qe=null,lt=be),Qe!==lt)){if(dt=Ce,qe="onMouseLeave",he="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(dt=Ws,qe="onPointerLeave",he="onPointerEnter",se="pointer"),pn=Qe==null?Me:sc(Qe),ye=lt==null?Me:sc(lt),Me=new dt(qe,se+"leave",Qe,h,ze),Me.target=pn,Me.relatedTarget=ye,qe=null,al(ze)===be&&(dt=new dt(he,se+"enter",lt,h,ze),dt.target=ye,dt.relatedTarget=pn,qe=dt),pn=qe,Qe&&lt)t:{for(dt=Qe,he=lt,se=0,ye=dt;ye;ye=rc(ye))se++;for(ye=0,qe=he;qe;qe=rc(qe))ye++;for(;0<se-ye;)dt=rc(dt),se--;for(;0<ye-se;)he=rc(he),ye--;for(;se--;){if(dt===he||he!==null&&dt===he.alternate)break t;dt=rc(dt),he=rc(he)}dt=null}else dt=null;Qe!==null&&a1(Be,Me,Qe,dt,!1),lt!==null&&pn!==null&&a1(Be,pn,lt,dt,!0)}}e:{if(Me=be?sc(be):window,Qe=Me.nodeName&&Me.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&Me.type==="file")var ht=oI;else if(Lw(Me))if(Uw)ht=dI;else{ht=cI;var _t=lI}else(Qe=Me.nodeName)&&Qe.toLowerCase()==="input"&&(Me.type==="checkbox"||Me.type==="radio")&&(ht=uI);if(ht&&(ht=ht(o,be))){zw(Be,ht,h,ze);break e}_t&&_t(o,Me,be),o==="focusout"&&(_t=Me._wrapperState)&&_t.controlled&&Me.type==="number"&&er(Me,"number",Me.value)}switch(_t=be?sc(be):window,o){case"focusin":(Lw(_t)||_t.contentEditable==="true")&&(ec=_t,Bp=be,_u=null);break;case"focusout":_u=Bp=ec=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,Yw(Be,h,ze);break;case"selectionchange":if(mI)break;case"keydown":case"keyup":Yw(Be,h,ze)}var Ct;if(Fp)e:{switch(o){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else Zl?Mw(o,h)&&(zt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(zt="onCompositionStart");zt&&(Dw&&h.locale!=="ko"&&(Zl||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&Zl&&(Ct=Ni()):(wr=ze,Xi="value"in wr?wr.value:wr.textContent,Zl=!0)),_t=hf(be,zt),0<_t.length&&(zt=new Ge(zt,o,null,h,ze),Be.push({event:zt,listeners:_t}),Ct?zt.data=Ct:(Ct=Fw(h),Ct!==null&&(zt.data=Ct)))),(Ct=rI?nI(o,h):sI(o,h))&&(be=hf(be,"onBeforeInput"),0<be.length&&(ze=new Ge("onBeforeInput","beforeinput",null,h,ze),Be.push({event:ze,listeners:be}),ze.data=Ct))}s1(Be,c)})}function Au(o,c,h){return{instance:o,listener:c,currentTarget:h}}function hf(o,c){for(var h=c+"Capture",y=[];o!==null;){var b=o,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=rr(o,h),N!=null&&y.unshift(Au(o,N,b)),N=rr(o,c),N!=null&&y.push(Au(o,N,b))),o=o.return}return y}function rc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function a1(o,c,h,y,b){for(var N=c._reactName,O=[];h!==null&&h!==y;){var B=h,Y=B.alternate,be=B.stateNode;if(Y!==null&&Y===y)break;B.tag===5&&be!==null&&(B=be,b?(Y=rr(h,N),Y!=null&&O.unshift(Au(h,Y,B))):b||(Y=rr(h,N),Y!=null&&O.push(Au(h,Y,B)))),h=h.return}O.length!==0&&o.push({event:c,listeners:O})}var xI=/\r\n?/g,vI=/\u0000|\uFFFD/g;function o1(o){return(typeof o=="string"?o:""+o).replace(xI,`
`).replace(vI,"")}function mf(o,c,h){if(c=o1(c),o1(o)!==c&&h)throw Error(r(425))}function pf(){}var Yp=null,Jp=null;function Xp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Qp=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,l1=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof l1<"u"?function(o){return l1.resolve(null).then(o).catch(jI)}:Qp;function jI(o){setTimeout(function(){throw o})}function Zp(o,c){var h=c,y=0;do{var b=h.nextSibling;if(o.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(y===0){o.removeChild(b),Bs(c);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=b}while(h);Bs(c)}function ko(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function c1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var nc=Math.random().toString(36).slice(2),xa="__reactFiber$"+nc,Pu="__reactProps$"+nc,Fa="__reactContainer$"+nc,eg="__reactEvents$"+nc,SI="__reactListeners$"+nc,kI="__reactHandles$"+nc;function al(o){var c=o[xa];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Fa]||h[xa]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=c1(o);o!==null;){if(h=o[xa])return h;o=c1(o)}return c}o=h,h=o.parentNode}return null}function Ou(o){return o=o[xa]||o[Fa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function sc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function gf(o){return o[Pu]||null}var tg=[],ic=-1;function No(o){return{current:o}}function Br(o){0>ic||(o.current=tg[ic],tg[ic]=null,ic--)}function Tr(o,c){ic++,tg[ic]=o.current,o.current=c}var _o={},Ss=No(_o),Vs=No(!1),ol=_o;function ac(o,c){var h=o.type.contextTypes;if(!h)return _o;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in h)b[N]=c[N];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=b),b}function qs(o){return o=o.childContextTypes,o!=null}function yf(){Br(Vs),Br(Ss)}function u1(o,c,h){if(Ss.current!==_o)throw Error(r(168));Tr(Ss,c),Tr(Vs,h)}function d1(o,c,h){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var b in y)if(!(b in c))throw Error(r(108,Re(o)||"Unknown",b));return te({},h,y)}function xf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||_o,ol=Ss.current,Tr(Ss,o),Tr(Vs,Vs.current),!0}function f1(o,c,h){var y=o.stateNode;if(!y)throw Error(r(169));h?(o=d1(o,c,ol),y.__reactInternalMemoizedMergedChildContext=o,Br(Vs),Br(Ss),Tr(Ss,o)):Br(Vs),Tr(Vs,h)}var La=null,vf=!1,rg=!1;function h1(o){La===null?La=[o]:La.push(o)}function NI(o){vf=!0,h1(o)}function Co(){if(!rg&&La!==null){rg=!0;var o=0,c=Mt;try{var h=La;for(Mt=1;o<h.length;o++){var y=h[o];do y=y(!0);while(y!==null)}La=null,vf=!1}catch(b){throw La!==null&&(La=La.slice(o+1)),vs(re,Co),b}finally{Mt=c,rg=!1}}return null}var oc=[],lc=0,bf=null,wf=0,Ci=[],Ei=0,ll=null,za=1,Ua="";function cl(o,c){oc[lc++]=wf,oc[lc++]=bf,bf=o,wf=c}function m1(o,c,h){Ci[Ei++]=za,Ci[Ei++]=Ua,Ci[Ei++]=ll,ll=o;var y=za;o=Ua;var b=32-Tt(y)-1;y&=~(1<<b),h+=1;var N=32-Tt(c)+b;if(30<N){var O=b-b%5;N=(y&(1<<O)-1).toString(32),y>>=O,b-=O,za=1<<32-Tt(c)+b|h<<b|y,Ua=N+o}else za=1<<N|h<<b|y,Ua=o}function ng(o){o.return!==null&&(cl(o,1),m1(o,1,0))}function sg(o){for(;o===bf;)bf=oc[--lc],oc[lc]=null,wf=oc[--lc],oc[lc]=null;for(;o===ll;)ll=Ci[--Ei],Ci[Ei]=null,Ua=Ci[--Ei],Ci[Ei]=null,za=Ci[--Ei],Ci[Ei]=null}var ii=null,ai=null,Gr=!1,Zi=null;function p1(o,c){var h=Ti(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function g1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ii=o,ai=ko(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ii=o,ai=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ll!==null?{id:za,overflow:Ua}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ti(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ii=o,ai=null,!0):!1;default:return!1}}function ig(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ag(o){if(Gr){var c=ai;if(c){var h=c;if(!g1(o,c)){if(ig(o))throw Error(r(418));c=ko(h.nextSibling);var y=ii;c&&g1(o,c)?p1(y,h):(o.flags=o.flags&-4097|2,Gr=!1,ii=o)}}else{if(ig(o))throw Error(r(418));o.flags=o.flags&-4097|2,Gr=!1,ii=o}}}function y1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ii=o}function jf(o){if(o!==ii)return!1;if(!Gr)return y1(o),Gr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Xp(o.type,o.memoizedProps)),c&&(c=ai)){if(ig(o))throw x1(),Error(r(418));for(;c;)p1(o,c),c=ko(c.nextSibling)}if(y1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){ai=ko(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}ai=null}}else ai=ii?ko(o.stateNode.nextSibling):null;return!0}function x1(){for(var o=ai;o;)o=ko(o.nextSibling)}function cc(){ai=ii=null,Gr=!1}function og(o){Zi===null?Zi=[o]:Zi.push(o)}var _I=T.ReactCurrentBatchConfig;function Tu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var y=h.stateNode}if(!y)throw Error(r(147,o));var b=y,N=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(O){var B=b.refs;O===null?delete B[N]:B[N]=O},c._stringRef=N,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function Sf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function v1(o){var c=o._init;return c(o._payload)}function b1(o){function c(he,se){if(o){var ye=he.deletions;ye===null?(he.deletions=[se],he.flags|=16):ye.push(se)}}function h(he,se){if(!o)return null;for(;se!==null;)c(he,se),se=se.sibling;return null}function y(he,se){for(he=new Map;se!==null;)se.key!==null?he.set(se.key,se):he.set(se.index,se),se=se.sibling;return he}function b(he,se){return he=$o(he,se),he.index=0,he.sibling=null,he}function N(he,se,ye){return he.index=ye,o?(ye=he.alternate,ye!==null?(ye=ye.index,ye<se?(he.flags|=2,se):ye):(he.flags|=2,se)):(he.flags|=1048576,se)}function O(he){return o&&he.alternate===null&&(he.flags|=2),he}function B(he,se,ye,qe){return se===null||se.tag!==6?(se=Qg(ye,he.mode,qe),se.return=he,se):(se=b(se,ye),se.return=he,se)}function Y(he,se,ye,qe){var ht=ye.type;return ht===L?ze(he,se,ye.props.children,qe,ye.key):se!==null&&(se.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Q&&v1(ht)===se.type)?(qe=b(se,ye.props),qe.ref=Tu(he,se,ye),qe.return=he,qe):(qe=Kf(ye.type,ye.key,ye.props,null,he.mode,qe),qe.ref=Tu(he,se,ye),qe.return=he,qe)}function be(he,se,ye,qe){return se===null||se.tag!==4||se.stateNode.containerInfo!==ye.containerInfo||se.stateNode.implementation!==ye.implementation?(se=Zg(ye,he.mode,qe),se.return=he,se):(se=b(se,ye.children||[]),se.return=he,se)}function ze(he,se,ye,qe,ht){return se===null||se.tag!==7?(se=yl(ye,he.mode,qe,ht),se.return=he,se):(se=b(se,ye),se.return=he,se)}function Be(he,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Qg(""+se,he.mode,ye),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case A:return ye=Kf(se.type,se.key,se.props,null,he.mode,ye),ye.ref=Tu(he,null,se),ye.return=he,ye;case D:return se=Zg(se,he.mode,ye),se.return=he,se;case Q:var qe=se._init;return Be(he,qe(se._payload),ye)}if(z(se)||oe(se))return se=yl(se,he.mode,ye,null),se.return=he,se;Sf(he,se)}return null}function Me(he,se,ye,qe){var ht=se!==null?se.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ht!==null?null:B(he,se,""+ye,qe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case A:return ye.key===ht?Y(he,se,ye,qe):null;case D:return ye.key===ht?be(he,se,ye,qe):null;case Q:return ht=ye._init,Me(he,se,ht(ye._payload),qe)}if(z(ye)||oe(ye))return ht!==null?null:ze(he,se,ye,qe,null);Sf(he,ye)}return null}function Qe(he,se,ye,qe,ht){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return he=he.get(ye)||null,B(se,he,""+qe,ht);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case A:return he=he.get(qe.key===null?ye:qe.key)||null,Y(se,he,qe,ht);case D:return he=he.get(qe.key===null?ye:qe.key)||null,be(se,he,qe,ht);case Q:var _t=qe._init;return Qe(he,se,ye,_t(qe._payload),ht)}if(z(qe)||oe(qe))return he=he.get(ye)||null,ze(se,he,qe,ht,null);Sf(se,qe)}return null}function lt(he,se,ye,qe){for(var ht=null,_t=null,Ct=se,zt=se=0,Xn=null;Ct!==null&&zt<ye.length;zt++){Ct.index>zt?(Xn=Ct,Ct=null):Xn=Ct.sibling;var hr=Me(he,Ct,ye[zt],qe);if(hr===null){Ct===null&&(Ct=Xn);break}o&&Ct&&hr.alternate===null&&c(he,Ct),se=N(hr,se,zt),_t===null?ht=hr:_t.sibling=hr,_t=hr,Ct=Xn}if(zt===ye.length)return h(he,Ct),Gr&&cl(he,zt),ht;if(Ct===null){for(;zt<ye.length;zt++)Ct=Be(he,ye[zt],qe),Ct!==null&&(se=N(Ct,se,zt),_t===null?ht=Ct:_t.sibling=Ct,_t=Ct);return Gr&&cl(he,zt),ht}for(Ct=y(he,Ct);zt<ye.length;zt++)Xn=Qe(Ct,he,zt,ye[zt],qe),Xn!==null&&(o&&Xn.alternate!==null&&Ct.delete(Xn.key===null?zt:Xn.key),se=N(Xn,se,zt),_t===null?ht=Xn:_t.sibling=Xn,_t=Xn);return o&&Ct.forEach(function(Ro){return c(he,Ro)}),Gr&&cl(he,zt),ht}function dt(he,se,ye,qe){var ht=oe(ye);if(typeof ht!="function")throw Error(r(150));if(ye=ht.call(ye),ye==null)throw Error(r(151));for(var _t=ht=null,Ct=se,zt=se=0,Xn=null,hr=ye.next();Ct!==null&&!hr.done;zt++,hr=ye.next()){Ct.index>zt?(Xn=Ct,Ct=null):Xn=Ct.sibling;var Ro=Me(he,Ct,hr.value,qe);if(Ro===null){Ct===null&&(Ct=Xn);break}o&&Ct&&Ro.alternate===null&&c(he,Ct),se=N(Ro,se,zt),_t===null?ht=Ro:_t.sibling=Ro,_t=Ro,Ct=Xn}if(hr.done)return h(he,Ct),Gr&&cl(he,zt),ht;if(Ct===null){for(;!hr.done;zt++,hr=ye.next())hr=Be(he,hr.value,qe),hr!==null&&(se=N(hr,se,zt),_t===null?ht=hr:_t.sibling=hr,_t=hr);return Gr&&cl(he,zt),ht}for(Ct=y(he,Ct);!hr.done;zt++,hr=ye.next())hr=Qe(Ct,he,zt,hr.value,qe),hr!==null&&(o&&hr.alternate!==null&&Ct.delete(hr.key===null?zt:hr.key),se=N(hr,se,zt),_t===null?ht=hr:_t.sibling=hr,_t=hr);return o&&Ct.forEach(function(iD){return c(he,iD)}),Gr&&cl(he,zt),ht}function pn(he,se,ye,qe){if(typeof ye=="object"&&ye!==null&&ye.type===L&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case A:e:{for(var ht=ye.key,_t=se;_t!==null;){if(_t.key===ht){if(ht=ye.type,ht===L){if(_t.tag===7){h(he,_t.sibling),se=b(_t,ye.props.children),se.return=he,he=se;break e}}else if(_t.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Q&&v1(ht)===_t.type){h(he,_t.sibling),se=b(_t,ye.props),se.ref=Tu(he,_t,ye),se.return=he,he=se;break e}h(he,_t);break}else c(he,_t);_t=_t.sibling}ye.type===L?(se=yl(ye.props.children,he.mode,qe,ye.key),se.return=he,he=se):(qe=Kf(ye.type,ye.key,ye.props,null,he.mode,qe),qe.ref=Tu(he,se,ye),qe.return=he,he=qe)}return O(he);case D:e:{for(_t=ye.key;se!==null;){if(se.key===_t)if(se.tag===4&&se.stateNode.containerInfo===ye.containerInfo&&se.stateNode.implementation===ye.implementation){h(he,se.sibling),se=b(se,ye.children||[]),se.return=he,he=se;break e}else{h(he,se);break}else c(he,se);se=se.sibling}se=Zg(ye,he.mode,qe),se.return=he,he=se}return O(he);case Q:return _t=ye._init,pn(he,se,_t(ye._payload),qe)}if(z(ye))return lt(he,se,ye,qe);if(oe(ye))return dt(he,se,ye,qe);Sf(he,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,se!==null&&se.tag===6?(h(he,se.sibling),se=b(se,ye),se.return=he,he=se):(h(he,se),se=Qg(ye,he.mode,qe),se.return=he,he=se),O(he)):h(he,se)}return pn}var uc=b1(!0),w1=b1(!1),kf=No(null),Nf=null,dc=null,lg=null;function cg(){lg=dc=Nf=null}function ug(o){var c=kf.current;Br(kf),o._currentValue=c}function dg(o,c,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===h)break;o=o.return}}function fc(o,c){Nf=o,lg=dc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Hs=!0),o.firstContext=null)}function Ai(o){var c=o._currentValue;if(lg!==o)if(o={context:o,memoizedValue:c,next:null},dc===null){if(Nf===null)throw Error(r(308));dc=o,Nf.dependencies={lanes:0,firstContext:o}}else dc=dc.next=o;return c}var ul=null;function fg(o){ul===null?ul=[o]:ul.push(o)}function j1(o,c,h,y){var b=c.interleaved;return b===null?(h.next=h,fg(c)):(h.next=b.next,b.next=h),c.interleaved=h,Ba(o,y)}function Ba(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Eo=!1;function hg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Wa(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Ao(o,c,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(cr&2)!==0){var b=y.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),y.pending=c,Ba(o,h)}return b=y.interleaved,b===null?(c.next=c,fg(y)):(c.next=b.next,b.next=c),y.interleaved=c,Ba(o,h)}function _f(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,qi(o,h)}}function k1(o,c){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var b=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};N===null?b=N=O:N=N.next=O,h=h.next}while(h!==null);N===null?b=N=c:N=N.next=c}else b=N=c;h={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:y.shared,effects:y.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Cf(o,c,h,y){var b=o.updateQueue;Eo=!1;var N=b.firstBaseUpdate,O=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var Y=B,be=Y.next;Y.next=null,O===null?N=be:O.next=be,O=Y;var ze=o.alternate;ze!==null&&(ze=ze.updateQueue,B=ze.lastBaseUpdate,B!==O&&(B===null?ze.firstBaseUpdate=be:B.next=be,ze.lastBaseUpdate=Y))}if(N!==null){var Be=b.baseState;O=0,ze=be=Y=null,B=N;do{var Me=B.lane,Qe=B.eventTime;if((y&Me)===Me){ze!==null&&(ze=ze.next={eventTime:Qe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var lt=o,dt=B;switch(Me=c,Qe=h,dt.tag){case 1:if(lt=dt.payload,typeof lt=="function"){Be=lt.call(Qe,Be,Me);break e}Be=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=dt.payload,Me=typeof lt=="function"?lt.call(Qe,Be,Me):lt,Me==null)break e;Be=te({},Be,Me);break e;case 2:Eo=!0}}B.callback!==null&&B.lane!==0&&(o.flags|=64,Me=b.effects,Me===null?b.effects=[B]:Me.push(B))}else Qe={eventTime:Qe,lane:Me,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ze===null?(be=ze=Qe,Y=Be):ze=ze.next=Qe,O|=Me;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;Me=B,B=Me.next,Me.next=null,b.lastBaseUpdate=Me,b.shared.pending=null}}while(!0);if(ze===null&&(Y=Be),b.baseState=Y,b.firstBaseUpdate=be,b.lastBaseUpdate=ze,c=b.shared.interleaved,c!==null){b=c;do O|=b.lane,b=b.next;while(b!==c)}else N===null&&(b.shared.lanes=0);hl|=O,o.lanes=O,o.memoizedState=Be}}function N1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],b=y.callback;if(b!==null){if(y.callback=null,y=h,typeof b!="function")throw Error(r(191,b));b.call(y)}}}var Iu={},va=No(Iu),Du=No(Iu),$u=No(Iu);function dl(o){if(o===Iu)throw Error(r(174));return o}function mg(o,c){switch(Tr($u,c),Tr(Du,o),Tr(va,Iu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ut(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ut(c,o)}Br(va),Tr(va,c)}function hc(){Br(va),Br(Du),Br($u)}function _1(o){dl($u.current);var c=dl(va.current),h=ut(c,o.type);c!==h&&(Tr(Du,o),Tr(va,h))}function pg(o){Du.current===o&&(Br(va),Br(Du))}var en=No(0);function Ef(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var gg=[];function yg(){for(var o=0;o<gg.length;o++)gg[o]._workInProgressVersionPrimary=null;gg.length=0}var Af=T.ReactCurrentDispatcher,xg=T.ReactCurrentBatchConfig,fl=0,tn=null,On=null,Yn=null,Pf=!1,Ru=!1,Mu=0,CI=0;function ks(){throw Error(r(321))}function vg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Qi(o[h],c[h]))return!1;return!0}function bg(o,c,h,y,b,N){if(fl=N,tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Af.current=o===null||o.memoizedState===null?OI:TI,o=h(y,b),Ru){N=0;do{if(Ru=!1,Mu=0,25<=N)throw Error(r(301));N+=1,Yn=On=null,c.updateQueue=null,Af.current=II,o=h(y,b)}while(Ru)}if(Af.current=If,c=On!==null&&On.next!==null,fl=0,Yn=On=tn=null,Pf=!1,c)throw Error(r(300));return o}function wg(){var o=Mu!==0;return Mu=0,o}function ba(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?tn.memoizedState=Yn=o:Yn=Yn.next=o,Yn}function Pi(){if(On===null){var o=tn.alternate;o=o!==null?o.memoizedState:null}else o=On.next;var c=Yn===null?tn.memoizedState:Yn.next;if(c!==null)Yn=c,On=o;else{if(o===null)throw Error(r(310));On=o,o={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Yn===null?tn.memoizedState=Yn=o:Yn=Yn.next=o}return Yn}function Fu(o,c){return typeof c=="function"?c(o):c}function jg(o){var c=Pi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var y=On,b=y.baseQueue,N=h.pending;if(N!==null){if(b!==null){var O=b.next;b.next=N.next,N.next=O}y.baseQueue=b=N,h.pending=null}if(b!==null){N=b.next,y=y.baseState;var B=O=null,Y=null,be=N;do{var ze=be.lane;if((fl&ze)===ze)Y!==null&&(Y=Y.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),y=be.hasEagerState?be.eagerState:o(y,be.action);else{var Be={lane:ze,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};Y===null?(B=Y=Be,O=y):Y=Y.next=Be,tn.lanes|=ze,hl|=ze}be=be.next}while(be!==null&&be!==N);Y===null?O=y:Y.next=B,Qi(y,c.memoizedState)||(Hs=!0),c.memoizedState=y,c.baseState=O,c.baseQueue=Y,h.lastRenderedState=y}if(o=h.interleaved,o!==null){b=o;do N=b.lane,tn.lanes|=N,hl|=N,b=b.next;while(b!==o)}else b===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Sg(o){var c=Pi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var y=h.dispatch,b=h.pending,N=c.memoizedState;if(b!==null){h.pending=null;var O=b=b.next;do N=o(N,O.action),O=O.next;while(O!==b);Qi(N,c.memoizedState)||(Hs=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),h.lastRenderedState=N}return[N,y]}function C1(){}function E1(o,c){var h=tn,y=Pi(),b=c(),N=!Qi(y.memoizedState,b);if(N&&(y.memoizedState=b,Hs=!0),y=y.queue,kg(O1.bind(null,h,y,o),[o]),y.getSnapshot!==c||N||Yn!==null&&Yn.memoizedState.tag&1){if(h.flags|=2048,Lu(9,P1.bind(null,h,y,b,c),void 0,null),Jn===null)throw Error(r(349));(fl&30)!==0||A1(h,c,b)}return b}function A1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=tn.updateQueue,c===null?(c={lastEffect:null,stores:null},tn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function P1(o,c,h,y){c.value=h,c.getSnapshot=y,T1(c)&&I1(o)}function O1(o,c,h){return h(function(){T1(c)&&I1(o)})}function T1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Qi(o,h)}catch{return!0}}function I1(o){var c=Ba(o,1);c!==null&&na(c,o,1,-1)}function D1(o){var c=ba();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:o},c.queue=o,o=o.dispatch=PI.bind(null,tn,o),[c.memoizedState,o]}function Lu(o,c,h,y){return o={tag:o,create:c,destroy:h,deps:y,next:null},c=tn.updateQueue,c===null?(c={lastEffect:null,stores:null},tn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,c.lastEffect=o)),o}function $1(){return Pi().memoizedState}function Of(o,c,h,y){var b=ba();tn.flags|=o,b.memoizedState=Lu(1|c,h,void 0,y===void 0?null:y)}function Tf(o,c,h,y){var b=Pi();y=y===void 0?null:y;var N=void 0;if(On!==null){var O=On.memoizedState;if(N=O.destroy,y!==null&&vg(y,O.deps)){b.memoizedState=Lu(c,h,N,y);return}}tn.flags|=o,b.memoizedState=Lu(1|c,h,N,y)}function R1(o,c){return Of(8390656,8,o,c)}function kg(o,c){return Tf(2048,8,o,c)}function M1(o,c){return Tf(4,2,o,c)}function F1(o,c){return Tf(4,4,o,c)}function L1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function z1(o,c,h){return h=h!=null?h.concat([o]):null,Tf(4,4,L1.bind(null,c,o),h)}function Ng(){}function U1(o,c){var h=Pi();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&vg(c,y[1])?y[0]:(h.memoizedState=[o,c],o)}function B1(o,c){var h=Pi();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&vg(c,y[1])?y[0]:(o=o(),h.memoizedState=[o,c],o)}function W1(o,c,h){return(fl&21)===0?(o.baseState&&(o.baseState=!1,Hs=!0),o.memoizedState=h):(Qi(h,c)||(h=Si(),tn.lanes|=h,hl|=h,o.baseState=!0),c)}function EI(o,c){var h=Mt;Mt=h!==0&&4>h?h:4,o(!0);var y=xg.transition;xg.transition={};try{o(!1),c()}finally{Mt=h,xg.transition=y}}function V1(){return Pi().memoizedState}function AI(o,c,h){var y=Io(o);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},q1(o))H1(c,h);else if(h=j1(o,c,h,y),h!==null){var b=Ds();na(h,o,y,b),K1(h,c,y)}}function PI(o,c,h){var y=Io(o),b={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(q1(o))H1(c,b);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var O=c.lastRenderedState,B=N(O,h);if(b.hasEagerState=!0,b.eagerState=B,Qi(B,O)){var Y=c.interleaved;Y===null?(b.next=b,fg(c)):(b.next=Y.next,Y.next=b),c.interleaved=b;return}}catch{}finally{}h=j1(o,c,b,y),h!==null&&(b=Ds(),na(h,o,y,b),K1(h,c,y))}}function q1(o){var c=o.alternate;return o===tn||c!==null&&c===tn}function H1(o,c){Ru=Pf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function K1(o,c,h){if((h&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,qi(o,h)}}var If={readContext:Ai,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},OI={readContext:Ai,useCallback:function(o,c){return ba().memoizedState=[o,c===void 0?null:c],o},useContext:Ai,useEffect:R1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Of(4194308,4,L1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Of(4194308,4,o,c)},useInsertionEffect:function(o,c){return Of(4,2,o,c)},useMemo:function(o,c){var h=ba();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var y=ba();return c=h!==void 0?h(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=AI.bind(null,tn,o),[y.memoizedState,o]},useRef:function(o){var c=ba();return o={current:o},c.memoizedState=o},useState:D1,useDebugValue:Ng,useDeferredValue:function(o){return ba().memoizedState=o},useTransition:function(){var o=D1(!1),c=o[0];return o=EI.bind(null,o[1]),ba().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var y=tn,b=ba();if(Gr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Jn===null)throw Error(r(349));(fl&30)!==0||A1(y,c,h)}b.memoizedState=h;var N={value:h,getSnapshot:c};return b.queue=N,R1(O1.bind(null,y,N,o),[o]),y.flags|=2048,Lu(9,P1.bind(null,y,N,h,c),void 0,null),h},useId:function(){var o=ba(),c=Jn.identifierPrefix;if(Gr){var h=Ua,y=za;h=(y&~(1<<32-Tt(y)-1)).toString(32)+h,c=":"+c+"R"+h,h=Mu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=CI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},TI={readContext:Ai,useCallback:U1,useContext:Ai,useEffect:kg,useImperativeHandle:z1,useInsertionEffect:M1,useLayoutEffect:F1,useMemo:B1,useReducer:jg,useRef:$1,useState:function(){return jg(Fu)},useDebugValue:Ng,useDeferredValue:function(o){var c=Pi();return W1(c,On.memoizedState,o)},useTransition:function(){var o=jg(Fu)[0],c=Pi().memoizedState;return[o,c]},useMutableSource:C1,useSyncExternalStore:E1,useId:V1,unstable_isNewReconciler:!1},II={readContext:Ai,useCallback:U1,useContext:Ai,useEffect:kg,useImperativeHandle:z1,useInsertionEffect:M1,useLayoutEffect:F1,useMemo:B1,useReducer:Sg,useRef:$1,useState:function(){return Sg(Fu)},useDebugValue:Ng,useDeferredValue:function(o){var c=Pi();return On===null?c.memoizedState=o:W1(c,On.memoizedState,o)},useTransition:function(){var o=Sg(Fu)[0],c=Pi().memoizedState;return[o,c]},useMutableSource:C1,useSyncExternalStore:E1,useId:V1,unstable_isNewReconciler:!1};function ea(o,c){if(o&&o.defaultProps){c=te({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function _g(o,c,h,y){c=o.memoizedState,h=h(y,c),h=h==null?c:te({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Df={isMounted:function(o){return(o=o._reactInternals)?Or(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var y=Ds(),b=Io(o),N=Wa(y,b);N.payload=c,h!=null&&(N.callback=h),c=Ao(o,N,b),c!==null&&(na(c,o,b,y),_f(c,o,b))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var y=Ds(),b=Io(o),N=Wa(y,b);N.tag=1,N.payload=c,h!=null&&(N.callback=h),c=Ao(o,N,b),c!==null&&(na(c,o,b,y),_f(c,o,b))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ds(),y=Io(o),b=Wa(h,y);b.tag=2,c!=null&&(b.callback=c),c=Ao(o,b,y),c!==null&&(na(c,o,y,h),_f(c,o,y))}};function G1(o,c,h,y,b,N,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,N,O):c.prototype&&c.prototype.isPureReactComponent?!Nu(h,y)||!Nu(b,N):!0}function Y1(o,c,h){var y=!1,b=_o,N=c.contextType;return typeof N=="object"&&N!==null?N=Ai(N):(b=qs(c)?ol:Ss.current,y=c.contextTypes,N=(y=y!=null)?ac(o,b):_o),c=new c(h,N),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Df,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=N),c}function J1(o,c,h,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==o&&Df.enqueueReplaceState(c,c.state,null)}function Cg(o,c,h,y){var b=o.stateNode;b.props=h,b.state=o.memoizedState,b.refs={},hg(o);var N=c.contextType;typeof N=="object"&&N!==null?b.context=Ai(N):(N=qs(c)?ol:Ss.current,b.context=ac(o,N)),b.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(_g(o,c,N,h),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&Df.enqueueReplaceState(b,b.state,null),Cf(o,h,b,y),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function mc(o,c){try{var h="",y=c;do h+=Fe(y),y=y.return;while(y);var b=h}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:o,source:c,stack:b,digest:null}}function Eg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Ag(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var DI=typeof WeakMap=="function"?WeakMap:Map;function X1(o,c,h){h=Wa(-1,h),h.tag=3,h.payload={element:null};var y=c.value;return h.callback=function(){Uf||(Uf=!0,Vg=y),Ag(o,c)},h}function Q1(o,c,h){h=Wa(-1,h),h.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var b=c.value;h.payload=function(){return y(b)},h.callback=function(){Ag(o,c)}}var N=o.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(h.callback=function(){Ag(o,c),typeof y!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),h}function Z1(o,c,h){var y=o.pingCache;if(y===null){y=o.pingCache=new DI;var b=new Set;y.set(c,b)}else b=y.get(c),b===void 0&&(b=new Set,y.set(c,b));b.has(h)||(b.add(h),o=GI.bind(null,o,c,h),c.then(o,o))}function ej(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function tj(o,c,h,y,b){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Wa(-1,1),c.tag=2,Ao(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=b,o)}var $I=T.ReactCurrentOwner,Hs=!1;function Is(o,c,h,y){c.child=o===null?w1(c,null,h,y):uc(c,o.child,h,y)}function rj(o,c,h,y,b){h=h.render;var N=c.ref;return fc(c,b),y=bg(o,c,h,y,N,b),h=wg(),o!==null&&!Hs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Va(o,c,b)):(Gr&&h&&ng(c),c.flags|=1,Is(o,c,y,b),c.child)}function nj(o,c,h,y,b){if(o===null){var N=h.type;return typeof N=="function"&&!Xg(N)&&N.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=N,sj(o,c,N,y,b)):(o=Kf(h.type,null,y,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,(o.lanes&b)===0){var O=N.memoizedProps;if(h=h.compare,h=h!==null?h:Nu,h(O,y)&&o.ref===c.ref)return Va(o,c,b)}return c.flags|=1,o=$o(N,y),o.ref=c.ref,o.return=c,c.child=o}function sj(o,c,h,y,b){if(o!==null){var N=o.memoizedProps;if(Nu(N,y)&&o.ref===c.ref)if(Hs=!1,c.pendingProps=y=N,(o.lanes&b)!==0)(o.flags&131072)!==0&&(Hs=!0);else return c.lanes=o.lanes,Va(o,c,b)}return Pg(o,c,h,y,b)}function ij(o,c,h){var y=c.pendingProps,b=y.children,N=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(gc,oi),oi|=h;else{if((h&1073741824)===0)return o=N!==null?N.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Tr(gc,oi),oi|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=N!==null?N.baseLanes:h,Tr(gc,oi),oi|=y}else N!==null?(y=N.baseLanes|h,c.memoizedState=null):y=h,Tr(gc,oi),oi|=y;return Is(o,c,b,h),c.child}function aj(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Pg(o,c,h,y,b){var N=qs(h)?ol:Ss.current;return N=ac(c,N),fc(c,b),h=bg(o,c,h,y,N,b),y=wg(),o!==null&&!Hs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Va(o,c,b)):(Gr&&y&&ng(c),c.flags|=1,Is(o,c,h,b),c.child)}function oj(o,c,h,y,b){if(qs(h)){var N=!0;xf(c)}else N=!1;if(fc(c,b),c.stateNode===null)Rf(o,c),Y1(c,h,y),Cg(c,h,y,b),y=!0;else if(o===null){var O=c.stateNode,B=c.memoizedProps;O.props=B;var Y=O.context,be=h.contextType;typeof be=="object"&&be!==null?be=Ai(be):(be=qs(h)?ol:Ss.current,be=ac(c,be));var ze=h.getDerivedStateFromProps,Be=typeof ze=="function"||typeof O.getSnapshotBeforeUpdate=="function";Be||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==y||Y!==be)&&J1(c,O,y,be),Eo=!1;var Me=c.memoizedState;O.state=Me,Cf(c,y,O,b),Y=c.memoizedState,B!==y||Me!==Y||Vs.current||Eo?(typeof ze=="function"&&(_g(c,h,ze,y),Y=c.memoizedState),(B=Eo||G1(c,h,B,y,Me,Y,be))?(Be||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Y),O.props=y,O.state=Y,O.context=be,y=B):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{O=c.stateNode,S1(o,c),B=c.memoizedProps,be=c.type===c.elementType?B:ea(c.type,B),O.props=be,Be=c.pendingProps,Me=O.context,Y=h.contextType,typeof Y=="object"&&Y!==null?Y=Ai(Y):(Y=qs(h)?ol:Ss.current,Y=ac(c,Y));var Qe=h.getDerivedStateFromProps;(ze=typeof Qe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==Be||Me!==Y)&&J1(c,O,y,Y),Eo=!1,Me=c.memoizedState,O.state=Me,Cf(c,y,O,b);var lt=c.memoizedState;B!==Be||Me!==lt||Vs.current||Eo?(typeof Qe=="function"&&(_g(c,h,Qe,y),lt=c.memoizedState),(be=Eo||G1(c,h,be,y,Me,lt,Y)||!1)?(ze||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,lt,Y),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,lt,Y)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||B===o.memoizedProps&&Me===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&Me===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=lt),O.props=y,O.state=lt,O.context=Y,y=be):(typeof O.componentDidUpdate!="function"||B===o.memoizedProps&&Me===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&Me===o.memoizedState||(c.flags|=1024),y=!1)}return Og(o,c,h,y,N,b)}function Og(o,c,h,y,b,N){aj(o,c);var O=(c.flags&128)!==0;if(!y&&!O)return b&&f1(c,h,!1),Va(o,c,N);y=c.stateNode,$I.current=c;var B=O&&typeof h.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&O?(c.child=uc(c,o.child,null,N),c.child=uc(c,null,B,N)):Is(o,c,B,N),c.memoizedState=y.state,b&&f1(c,h,!0),c.child}function lj(o){var c=o.stateNode;c.pendingContext?u1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&u1(o,c.context,!1),mg(o,c.containerInfo)}function cj(o,c,h,y,b){return cc(),og(b),c.flags|=256,Is(o,c,h,y),c.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Ig(o){return{baseLanes:o,cachePool:null,transitions:null}}function uj(o,c,h){var y=c.pendingProps,b=en.current,N=!1,O=(c.flags&128)!==0,B;if((B=O)||(B=o!==null&&o.memoizedState===null?!1:(b&2)!==0),B?(N=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),Tr(en,b&1),o===null)return ag(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=y.children,o=y.fallback,N?(y=c.mode,N=c.child,O={mode:"hidden",children:O},(y&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=O):N=Gf(O,y,0,null),o=yl(o,y,h,null),N.return=c,o.return=c,N.sibling=o,c.child=N,c.child.memoizedState=Ig(h),c.memoizedState=Tg,o):Dg(c,O));if(b=o.memoizedState,b!==null&&(B=b.dehydrated,B!==null))return RI(o,c,O,y,B,b,h);if(N){N=y.fallback,O=c.mode,b=o.child,B=b.sibling;var Y={mode:"hidden",children:y.children};return(O&1)===0&&c.child!==b?(y=c.child,y.childLanes=0,y.pendingProps=Y,c.deletions=null):(y=$o(b,Y),y.subtreeFlags=b.subtreeFlags&14680064),B!==null?N=$o(B,N):(N=yl(N,O,h,null),N.flags|=2),N.return=c,y.return=c,y.sibling=N,c.child=y,y=N,N=c.child,O=o.child.memoizedState,O=O===null?Ig(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},N.memoizedState=O,N.childLanes=o.childLanes&~h,c.memoizedState=Tg,y}return N=o.child,o=N.sibling,y=$o(N,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=h),y.return=c,y.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=y,c.memoizedState=null,y}function Dg(o,c){return c=Gf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function $f(o,c,h,y){return y!==null&&og(y),uc(c,o.child,null,h),o=Dg(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function RI(o,c,h,y,b,N,O){if(h)return c.flags&256?(c.flags&=-257,y=Eg(Error(r(422))),$f(o,c,O,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(N=y.fallback,b=c.mode,y=Gf({mode:"visible",children:y.children},b,0,null),N=yl(N,b,O,null),N.flags|=2,y.return=c,N.return=c,y.sibling=N,c.child=y,(c.mode&1)!==0&&uc(c,o.child,null,O),c.child.memoizedState=Ig(O),c.memoizedState=Tg,N);if((c.mode&1)===0)return $f(o,c,O,null);if(b.data==="$!"){if(y=b.nextSibling&&b.nextSibling.dataset,y)var B=y.dgst;return y=B,N=Error(r(419)),y=Eg(N,y,void 0),$f(o,c,O,y)}if(B=(O&o.childLanes)!==0,Hs||B){if(y=Jn,y!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(y.suspendedLanes|O))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Ba(o,b),na(y,o,b,-1))}return Jg(),y=Eg(Error(r(421))),$f(o,c,O,y)}return b.data==="$?"?(c.flags|=128,c.child=o.child,c=YI.bind(null,o),b._reactRetry=c,null):(o=N.treeContext,ai=ko(b.nextSibling),ii=c,Gr=!0,Zi=null,o!==null&&(Ci[Ei++]=za,Ci[Ei++]=Ua,Ci[Ei++]=ll,za=o.id,Ua=o.overflow,ll=c),c=Dg(c,y.children),c.flags|=4096,c)}function dj(o,c,h){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),dg(o.return,c,h)}function $g(o,c,h,y,b){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:b}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=h,N.tailMode=b)}function fj(o,c,h){var y=c.pendingProps,b=y.revealOrder,N=y.tail;if(Is(o,c,y.children,h),y=en.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&dj(o,h,c);else if(o.tag===19)dj(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Tr(en,y),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(h=c.child,b=null;h!==null;)o=h.alternate,o!==null&&Ef(o)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),$g(c,!1,b,h,N);break;case"backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&Ef(o)===null){c.child=b;break}o=b.sibling,b.sibling=h,h=b,b=o}$g(c,!0,h,null,N);break;case"together":$g(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Rf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Va(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),hl|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=$o(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=$o(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function MI(o,c,h){switch(c.tag){case 3:lj(c),cc();break;case 5:_1(c);break;case 1:qs(c.type)&&xf(c);break;case 4:mg(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,b=c.memoizedProps.value;Tr(kf,y._currentValue),y._currentValue=b;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Tr(en,en.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?uj(o,c,h):(Tr(en,en.current&1),o=Va(o,c,h),o!==null?o.sibling:null);Tr(en,en.current&1);break;case 19:if(y=(h&c.childLanes)!==0,(o.flags&128)!==0){if(y)return fj(o,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Tr(en,en.current),y)break;return null;case 22:case 23:return c.lanes=0,ij(o,c,h)}return Va(o,c,h)}var hj,Rg,mj,pj;hj=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Rg=function(){},mj=function(o,c,h,y){var b=o.memoizedProps;if(b!==y){o=c.stateNode,dl(va.current);var N=null;switch(h){case"input":b=Ae(o,b),y=Ae(o,y),N=[];break;case"select":b=te({},b,{value:void 0}),y=te({},y,{value:void 0}),N=[];break;case"textarea":b=Z(o,b),y=Z(o,y),N=[];break;default:typeof b.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=pf)}ct(h,y);var O;h=null;for(be in b)if(!y.hasOwnProperty(be)&&b.hasOwnProperty(be)&&b[be]!=null)if(be==="style"){var B=b[be];for(O in B)B.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(s.hasOwnProperty(be)?N||(N=[]):(N=N||[]).push(be,null));for(be in y){var Y=y[be];if(B=b!=null?b[be]:void 0,y.hasOwnProperty(be)&&Y!==B&&(Y!=null||B!=null))if(be==="style")if(B){for(O in B)!B.hasOwnProperty(O)||Y&&Y.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in Y)Y.hasOwnProperty(O)&&B[O]!==Y[O]&&(h||(h={}),h[O]=Y[O])}else h||(N||(N=[]),N.push(be,h)),h=Y;else be==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,B=B?B.__html:void 0,Y!=null&&B!==Y&&(N=N||[]).push(be,Y)):be==="children"?typeof Y!="string"&&typeof Y!="number"||(N=N||[]).push(be,""+Y):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(s.hasOwnProperty(be)?(Y!=null&&be==="onScroll"&&Ur("scroll",o),N||B===Y||(N=[])):(N=N||[]).push(be,Y))}h&&(N=N||[]).push("style",h);var be=N;(c.updateQueue=be)&&(c.flags|=4)}},pj=function(o,c,h,y){h!==y&&(c.flags|=4)};function zu(o,c){if(!Gr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Ns(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(c)for(var b=o.child;b!==null;)h|=b.lanes|b.childLanes,y|=b.subtreeFlags&14680064,y|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)h|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=y,o.childLanes=h,c}function FI(o,c,h){var y=c.pendingProps;switch(sg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(c),null;case 1:return qs(c.type)&&yf(),Ns(c),null;case 3:return y=c.stateNode,hc(),Br(Vs),Br(Ss),yg(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(jf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Zi!==null&&(Kg(Zi),Zi=null))),Rg(o,c),Ns(c),null;case 5:pg(c);var b=dl($u.current);if(h=c.type,o!==null&&c.stateNode!=null)mj(o,c,h,y,b),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Ns(c),null}if(o=dl(va.current),jf(c)){y=c.stateNode,h=c.type;var N=c.memoizedProps;switch(y[xa]=c,y[Pu]=N,o=(c.mode&1)!==0,h){case"dialog":Ur("cancel",y),Ur("close",y);break;case"iframe":case"object":case"embed":Ur("load",y);break;case"video":case"audio":for(b=0;b<Cu.length;b++)Ur(Cu[b],y);break;case"source":Ur("error",y);break;case"img":case"image":case"link":Ur("error",y),Ur("load",y);break;case"details":Ur("toggle",y);break;case"input":tt(y,N),Ur("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!N.multiple},Ur("invalid",y);break;case"textarea":Ne(y,N),Ur("invalid",y)}ct(h,N),b=null;for(var O in N)if(N.hasOwnProperty(O)){var B=N[O];O==="children"?typeof B=="string"?y.textContent!==B&&(N.suppressHydrationWarning!==!0&&mf(y.textContent,B,o),b=["children",B]):typeof B=="number"&&y.textContent!==""+B&&(N.suppressHydrationWarning!==!0&&mf(y.textContent,B,o),b=["children",""+B]):s.hasOwnProperty(O)&&B!=null&&O==="onScroll"&&Ur("scroll",y)}switch(h){case"input":ce(y),it(y,N,!0);break;case"textarea":ce(y),_e(y);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(y.onclick=pf)}y=b,c.updateQueue=y,y!==null&&(c.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Te(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=O.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=O.createElement(h,{is:y.is}):(o=O.createElement(h),h==="select"&&(O=o,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):o=O.createElementNS(o,h),o[xa]=c,o[Pu]=y,hj(o,c,!1,!1),c.stateNode=o;e:{switch(O=Ht(h,y),h){case"dialog":Ur("cancel",o),Ur("close",o),b=y;break;case"iframe":case"object":case"embed":Ur("load",o),b=y;break;case"video":case"audio":for(b=0;b<Cu.length;b++)Ur(Cu[b],o);b=y;break;case"source":Ur("error",o),b=y;break;case"img":case"image":case"link":Ur("error",o),Ur("load",o),b=y;break;case"details":Ur("toggle",o),b=y;break;case"input":tt(o,y),b=Ae(o,y),Ur("invalid",o);break;case"option":b=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},b=te({},y,{value:void 0}),Ur("invalid",o);break;case"textarea":Ne(o,y),b=Z(o,y),Ur("invalid",o);break;default:b=y}ct(h,b),B=b;for(N in B)if(B.hasOwnProperty(N)){var Y=B[N];N==="style"?et(o,Y):N==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Ve(o,Y)):N==="children"?typeof Y=="string"?(h!=="textarea"||Y!=="")&&gt(o,Y):typeof Y=="number"&&gt(o,""+Y):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(s.hasOwnProperty(N)?Y!=null&&N==="onScroll"&&Ur("scroll",o):Y!=null&&C(o,N,Y,O))}switch(h){case"input":ce(o),it(o,y,!1);break;case"textarea":ce(o),_e(o);break;case"option":y.value!=null&&o.setAttribute("value",""+ke(y.value));break;case"select":o.multiple=!!y.multiple,N=y.value,N!=null?V(o,!!y.multiple,N,!1):y.defaultValue!=null&&V(o,!!y.multiple,y.defaultValue,!0);break;default:typeof b.onClick=="function"&&(o.onclick=pf)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ns(c),null;case 6:if(o&&c.stateNode!=null)pj(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(h=dl($u.current),dl(va.current),jf(c)){if(y=c.stateNode,h=c.memoizedProps,y[xa]=c,(N=y.nodeValue!==h)&&(o=ii,o!==null))switch(o.tag){case 3:mf(y.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&mf(y.nodeValue,h,(o.mode&1)!==0)}N&&(c.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[xa]=c,c.stateNode=y}return Ns(c),null;case 13:if(Br(en),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Gr&&ai!==null&&(c.mode&1)!==0&&(c.flags&128)===0)x1(),cc(),c.flags|=98560,N=!1;else if(N=jf(c),y!==null&&y.dehydrated!==null){if(o===null){if(!N)throw Error(r(318));if(N=c.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[xa]=c}else cc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ns(c),N=!1}else Zi!==null&&(Kg(Zi),Zi=null),N=!0;if(!N)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(en.current&1)!==0?Tn===0&&(Tn=3):Jg())),c.updateQueue!==null&&(c.flags|=4),Ns(c),null);case 4:return hc(),Rg(o,c),o===null&&Eu(c.stateNode.containerInfo),Ns(c),null;case 10:return ug(c.type._context),Ns(c),null;case 17:return qs(c.type)&&yf(),Ns(c),null;case 19:if(Br(en),N=c.memoizedState,N===null)return Ns(c),null;if(y=(c.flags&128)!==0,O=N.rendering,O===null)if(y)zu(N,!1);else{if(Tn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(O=Ef(o),O!==null){for(c.flags|=128,zu(N,!1),y=O.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=h,h=c.child;h!==null;)N=h,o=y,N.flags&=14680066,O=N.alternate,O===null?(N.childLanes=0,N.lanes=o,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=O.childLanes,N.lanes=O.lanes,N.child=O.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=O.memoizedProps,N.memoizedState=O.memoizedState,N.updateQueue=O.updateQueue,N.type=O.type,o=O.dependencies,N.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Tr(en,en.current&1|2),c.child}o=o.sibling}N.tail!==null&&Qt()>yc&&(c.flags|=128,y=!0,zu(N,!1),c.lanes=4194304)}else{if(!y)if(o=Ef(O),o!==null){if(c.flags|=128,y=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),zu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!O.alternate&&!Gr)return Ns(c),null}else 2*Qt()-N.renderingStartTime>yc&&h!==1073741824&&(c.flags|=128,y=!0,zu(N,!1),c.lanes=4194304);N.isBackwards?(O.sibling=c.child,c.child=O):(h=N.last,h!==null?h.sibling=O:c.child=O,N.last=O)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=Qt(),c.sibling=null,h=en.current,Tr(en,y?h&1|2:h&1),c):(Ns(c),null);case 22:case 23:return Yg(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(oi&1073741824)!==0&&(Ns(c),c.subtreeFlags&6&&(c.flags|=8192)):Ns(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function LI(o,c){switch(sg(c),c.tag){case 1:return qs(c.type)&&yf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return hc(),Br(Vs),Br(Ss),yg(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return pg(c),null;case 13:if(Br(en),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));cc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Br(en),null;case 4:return hc(),null;case 10:return ug(c.type._context),null;case 22:case 23:return Yg(),null;case 24:return null;default:return null}}var Mf=!1,_s=!1,zI=typeof WeakSet=="function"?WeakSet:Set,nt=null;function pc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){an(o,c,y)}else h.current=null}function Mg(o,c,h){try{h()}catch(y){an(o,c,y)}}var gj=!1;function UI(o,c){if(Yp=ki,o=Gw(),Up(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var b=y.anchorOffset,N=y.focusNode;y=y.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var O=0,B=-1,Y=-1,be=0,ze=0,Be=o,Me=null;t:for(;;){for(var Qe;Be!==h||b!==0&&Be.nodeType!==3||(B=O+b),Be!==N||y!==0&&Be.nodeType!==3||(Y=O+y),Be.nodeType===3&&(O+=Be.nodeValue.length),(Qe=Be.firstChild)!==null;)Me=Be,Be=Qe;for(;;){if(Be===o)break t;if(Me===h&&++be===b&&(B=O),Me===N&&++ze===y&&(Y=O),(Qe=Be.nextSibling)!==null)break;Be=Me,Me=Be.parentNode}Be=Qe}h=B===-1||Y===-1?null:{start:B,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(Jp={focusedElem:o,selectionRange:h},ki=!1,nt=c;nt!==null;)if(c=nt,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,nt=o;else for(;nt!==null;){c=nt;try{var lt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var dt=lt.memoizedProps,pn=lt.memoizedState,he=c.stateNode,se=he.getSnapshotBeforeUpdate(c.elementType===c.type?dt:ea(c.type,dt),pn);he.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var ye=c.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(qe){an(c,c.return,qe)}if(o=c.sibling,o!==null){o.return=c.return,nt=o;break}nt=c.return}return lt=gj,gj=!1,lt}function Uu(o,c,h){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var b=y=y.next;do{if((b.tag&o)===o){var N=b.destroy;b.destroy=void 0,N!==void 0&&Mg(c,h,N)}b=b.next}while(b!==y)}}function Ff(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var y=h.create;h.destroy=y()}h=h.next}while(h!==c)}}function Fg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function yj(o){var c=o.alternate;c!==null&&(o.alternate=null,yj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[xa],delete c[Pu],delete c[eg],delete c[SI],delete c[kI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function xj(o){return o.tag===5||o.tag===3||o.tag===4}function vj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||xj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Lg(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=pf));else if(y!==4&&(o=o.child,o!==null))for(Lg(o,c,h),o=o.sibling;o!==null;)Lg(o,c,h),o=o.sibling}function zg(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(zg(o,c,h),o=o.sibling;o!==null;)zg(o,c,h),o=o.sibling}var ds=null,ta=!1;function Po(o,c,h){for(h=h.child;h!==null;)bj(o,c,h),h=h.sibling}function bj(o,c,h){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Ie,h)}catch{}switch(h.tag){case 5:_s||pc(h,c);case 6:var y=ds,b=ta;ds=null,Po(o,c,h),ds=y,ta=b,ds!==null&&(ta?(o=ds,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):ds.removeChild(h.stateNode));break;case 18:ds!==null&&(ta?(o=ds,h=h.stateNode,o.nodeType===8?Zp(o.parentNode,h):o.nodeType===1&&Zp(o,h),Bs(o)):Zp(ds,h.stateNode));break;case 4:y=ds,b=ta,ds=h.stateNode.containerInfo,ta=!0,Po(o,c,h),ds=y,ta=b;break;case 0:case 11:case 14:case 15:if(!_s&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){b=y=y.next;do{var N=b,O=N.destroy;N=N.tag,O!==void 0&&((N&2)!==0||(N&4)!==0)&&Mg(h,c,O),b=b.next}while(b!==y)}Po(o,c,h);break;case 1:if(!_s&&(pc(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(B){an(h,c,B)}Po(o,c,h);break;case 21:Po(o,c,h);break;case 22:h.mode&1?(_s=(y=_s)||h.memoizedState!==null,Po(o,c,h),_s=y):Po(o,c,h);break;default:Po(o,c,h)}}function wj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new zI),c.forEach(function(y){var b=JI.bind(null,o,y);h.has(y)||(h.add(y),y.then(b,b))})}}function ra(o,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var b=h[y];try{var N=o,O=c,B=O;e:for(;B!==null;){switch(B.tag){case 5:ds=B.stateNode,ta=!1;break e;case 3:ds=B.stateNode.containerInfo,ta=!0;break e;case 4:ds=B.stateNode.containerInfo,ta=!0;break e}B=B.return}if(ds===null)throw Error(r(160));bj(N,O,b),ds=null,ta=!1;var Y=b.alternate;Y!==null&&(Y.return=null),b.return=null}catch(be){an(b,c,be)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)jj(c,o),c=c.sibling}function jj(o,c){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ra(c,o),wa(o),y&4){try{Uu(3,o,o.return),Ff(3,o)}catch(dt){an(o,o.return,dt)}try{Uu(5,o,o.return)}catch(dt){an(o,o.return,dt)}}break;case 1:ra(c,o),wa(o),y&512&&h!==null&&pc(h,h.return);break;case 5:if(ra(c,o),wa(o),y&512&&h!==null&&pc(h,h.return),o.flags&32){var b=o.stateNode;try{gt(b,"")}catch(dt){an(o,o.return,dt)}}if(y&4&&(b=o.stateNode,b!=null)){var N=o.memoizedProps,O=h!==null?h.memoizedProps:N,B=o.type,Y=o.updateQueue;if(o.updateQueue=null,Y!==null)try{B==="input"&&N.type==="radio"&&N.name!=null&&St(b,N),Ht(B,O);var be=Ht(B,N);for(O=0;O<Y.length;O+=2){var ze=Y[O],Be=Y[O+1];ze==="style"?et(b,Be):ze==="dangerouslySetInnerHTML"?Ve(b,Be):ze==="children"?gt(b,Be):C(b,ze,Be,be)}switch(B){case"input":pt(b,N);break;case"textarea":Oe(b,N);break;case"select":var Me=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var Qe=N.value;Qe!=null?V(b,!!N.multiple,Qe,!1):Me!==!!N.multiple&&(N.defaultValue!=null?V(b,!!N.multiple,N.defaultValue,!0):V(b,!!N.multiple,N.multiple?[]:"",!1))}b[Pu]=N}catch(dt){an(o,o.return,dt)}}break;case 6:if(ra(c,o),wa(o),y&4){if(o.stateNode===null)throw Error(r(162));b=o.stateNode,N=o.memoizedProps;try{b.nodeValue=N}catch(dt){an(o,o.return,dt)}}break;case 3:if(ra(c,o),wa(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Bs(c.containerInfo)}catch(dt){an(o,o.return,dt)}break;case 4:ra(c,o),wa(o);break;case 13:ra(c,o),wa(o),b=o.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(Wg=Qt())),y&4&&wj(o);break;case 22:if(ze=h!==null&&h.memoizedState!==null,o.mode&1?(_s=(be=_s)||ze,ra(c,o),_s=be):ra(c,o),wa(o),y&8192){if(be=o.memoizedState!==null,(o.stateNode.isHidden=be)&&!ze&&(o.mode&1)!==0)for(nt=o,ze=o.child;ze!==null;){for(Be=nt=ze;nt!==null;){switch(Me=nt,Qe=Me.child,Me.tag){case 0:case 11:case 14:case 15:Uu(4,Me,Me.return);break;case 1:pc(Me,Me.return);var lt=Me.stateNode;if(typeof lt.componentWillUnmount=="function"){y=Me,h=Me.return;try{c=y,lt.props=c.memoizedProps,lt.state=c.memoizedState,lt.componentWillUnmount()}catch(dt){an(y,h,dt)}}break;case 5:pc(Me,Me.return);break;case 22:if(Me.memoizedState!==null){Nj(Be);continue}}Qe!==null?(Qe.return=Me,nt=Qe):Nj(Be)}ze=ze.sibling}e:for(ze=null,Be=o;;){if(Be.tag===5){if(ze===null){ze=Be;try{b=Be.stateNode,be?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(B=Be.stateNode,Y=Be.memoizedProps.style,O=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,B.style.display=He("display",O))}catch(dt){an(o,o.return,dt)}}}else if(Be.tag===6){if(ze===null)try{Be.stateNode.nodeValue=be?"":Be.memoizedProps}catch(dt){an(o,o.return,dt)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===o)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===o)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===o)break e;ze===Be&&(ze=null),Be=Be.return}ze===Be&&(ze=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:ra(c,o),wa(o),y&4&&wj(o);break;case 21:break;default:ra(c,o),wa(o)}}function wa(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(xj(h)){var y=h;break e}h=h.return}throw Error(r(160))}switch(y.tag){case 5:var b=y.stateNode;y.flags&32&&(gt(b,""),y.flags&=-33);var N=vj(o);zg(o,N,b);break;case 3:case 4:var O=y.stateNode.containerInfo,B=vj(o);Lg(o,B,O);break;default:throw Error(r(161))}}catch(Y){an(o,o.return,Y)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function BI(o,c,h){nt=o,Sj(o)}function Sj(o,c,h){for(var y=(o.mode&1)!==0;nt!==null;){var b=nt,N=b.child;if(b.tag===22&&y){var O=b.memoizedState!==null||Mf;if(!O){var B=b.alternate,Y=B!==null&&B.memoizedState!==null||_s;B=Mf;var be=_s;if(Mf=O,(_s=Y)&&!be)for(nt=b;nt!==null;)O=nt,Y=O.child,O.tag===22&&O.memoizedState!==null?_j(b):Y!==null?(Y.return=O,nt=Y):_j(b);for(;N!==null;)nt=N,Sj(N),N=N.sibling;nt=b,Mf=B,_s=be}kj(o)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,nt=N):kj(o)}}function kj(o){for(;nt!==null;){var c=nt;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:_s||Ff(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!_s)if(h===null)y.componentDidMount();else{var b=c.elementType===c.type?h.memoizedProps:ea(c.type,h.memoizedProps);y.componentDidUpdate(b,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&N1(c,N,y);break;case 3:var O=c.updateQueue;if(O!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}N1(c,O,h)}break;case 5:var B=c.stateNode;if(h===null&&c.flags&4){h=B;var Y=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&h.focus();break;case"img":Y.src&&(h.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var be=c.alternate;if(be!==null){var ze=be.memoizedState;if(ze!==null){var Be=ze.dehydrated;Be!==null&&Bs(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_s||c.flags&512&&Fg(c)}catch(Me){an(c,c.return,Me)}}if(c===o){nt=null;break}if(h=c.sibling,h!==null){h.return=c.return,nt=h;break}nt=c.return}}function Nj(o){for(;nt!==null;){var c=nt;if(c===o){nt=null;break}var h=c.sibling;if(h!==null){h.return=c.return,nt=h;break}nt=c.return}}function _j(o){for(;nt!==null;){var c=nt;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Ff(4,c)}catch(Y){an(c,h,Y)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var b=c.return;try{y.componentDidMount()}catch(Y){an(c,b,Y)}}var N=c.return;try{Fg(c)}catch(Y){an(c,N,Y)}break;case 5:var O=c.return;try{Fg(c)}catch(Y){an(c,O,Y)}}}catch(Y){an(c,c.return,Y)}if(c===o){nt=null;break}var B=c.sibling;if(B!==null){B.return=c.return,nt=B;break}nt=c.return}}var WI=Math.ceil,Lf=T.ReactCurrentDispatcher,Ug=T.ReactCurrentOwner,Oi=T.ReactCurrentBatchConfig,cr=0,Jn=null,jn=null,fs=0,oi=0,gc=No(0),Tn=0,Bu=null,hl=0,zf=0,Bg=0,Wu=null,Ks=null,Wg=0,yc=1/0,qa=null,Uf=!1,Vg=null,Oo=null,Bf=!1,To=null,Wf=0,Vu=0,qg=null,Vf=-1,qf=0;function Ds(){return(cr&6)!==0?Qt():Vf!==-1?Vf:Vf=Qt()}function Io(o){return(o.mode&1)===0?1:(cr&2)!==0&&fs!==0?fs&-fs:_I.transition!==null?(qf===0&&(qf=Si()),qf):(o=Mt,o!==0||(o=window.event,o=o===void 0?16:us(o.type)),o)}function na(o,c,h,y){if(50<Vu)throw Vu=0,qg=null,Error(r(185));Qr(o,h,y),((cr&2)===0||o!==Jn)&&(o===Jn&&((cr&2)===0&&(zf|=h),Tn===4&&Do(o,fs)),Gs(o,y),h===1&&cr===0&&(c.mode&1)===0&&(yc=Qt()+500,vf&&Co()))}function Gs(o,c){var h=o.callbackNode;zs(o,c);var y=br(o,o===Jn?fs:0);if(y===0)h!==null&&xr(h),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(h!=null&&xr(h),c===1)o.tag===0?NI(Ej.bind(null,o)):h1(Ej.bind(null,o)),wI(function(){(cr&6)===0&&Co()}),h=null;else{switch(Us(y)){case 1:h=re;break;case 4:h=Pe;break;case 16:h=Ue;break;case 536870912:h=Je;break;default:h=Ue}h=Rj(h,Cj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function Cj(o,c){if(Vf=-1,qf=0,(cr&6)!==0)throw Error(r(327));var h=o.callbackNode;if(xc()&&o.callbackNode!==h)return null;var y=br(o,o===Jn?fs:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=Hf(o,y);else{c=y;var b=cr;cr|=2;var N=Pj();(Jn!==o||fs!==c)&&(qa=null,yc=Qt()+500,pl(o,c));do try{HI();break}catch(B){Aj(o,B)}while(!0);cg(),Lf.current=N,cr=b,jn!==null?c=0:(Jn=null,fs=0,c=Tn)}if(c!==0){if(c===2&&(b=ls(o),b!==0&&(y=b,c=Hg(o,b))),c===1)throw h=Bu,pl(o,0),Do(o,y),Gs(o,Qt()),h;if(c===6)Do(o,y);else{if(b=o.current.alternate,(y&30)===0&&!VI(b)&&(c=Hf(o,y),c===2&&(N=ls(o),N!==0&&(y=N,c=Hg(o,N))),c===1))throw h=Bu,pl(o,0),Do(o,y),Gs(o,Qt()),h;switch(o.finishedWork=b,o.finishedLanes=y,c){case 0:case 1:throw Error(r(345));case 2:gl(o,Ks,qa);break;case 3:if(Do(o,y),(y&130023424)===y&&(c=Wg+500-Qt(),10<c)){if(br(o,0)!==0)break;if(b=o.suspendedLanes,(b&y)!==y){Ds(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=Qp(gl.bind(null,o,Ks,qa),c);break}gl(o,Ks,qa);break;case 4:if(Do(o,y),(y&4194240)===y)break;for(c=o.eventTimes,b=-1;0<y;){var O=31-Tt(y);N=1<<O,O=c[O],O>b&&(b=O),y&=~N}if(y=b,y=Qt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*WI(y/1960))-y,10<y){o.timeoutHandle=Qp(gl.bind(null,o,Ks,qa),y);break}gl(o,Ks,qa);break;case 5:gl(o,Ks,qa);break;default:throw Error(r(329))}}}return Gs(o,Qt()),o.callbackNode===h?Cj.bind(null,o):null}function Hg(o,c){var h=Wu;return o.current.memoizedState.isDehydrated&&(pl(o,c).flags|=256),o=Hf(o,c),o!==2&&(c=Ks,Ks=h,c!==null&&Kg(c)),o}function Kg(o){Ks===null?Ks=o:Ks.push.apply(Ks,o)}function VI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var b=h[y],N=b.getSnapshot;b=b.value;try{if(!Qi(N(),b))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Do(o,c){for(c&=~Bg,c&=~zf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Tt(c),y=1<<h;o[h]=-1,c&=~y}}function Ej(o){if((cr&6)!==0)throw Error(r(327));xc();var c=br(o,0);if((c&1)===0)return Gs(o,Qt()),null;var h=Hf(o,c);if(o.tag!==0&&h===2){var y=ls(o);y!==0&&(c=y,h=Hg(o,y))}if(h===1)throw h=Bu,pl(o,0),Do(o,c),Gs(o,Qt()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,gl(o,Ks,qa),Gs(o,Qt()),null}function Gg(o,c){var h=cr;cr|=1;try{return o(c)}finally{cr=h,cr===0&&(yc=Qt()+500,vf&&Co())}}function ml(o){To!==null&&To.tag===0&&(cr&6)===0&&xc();var c=cr;cr|=1;var h=Oi.transition,y=Mt;try{if(Oi.transition=null,Mt=1,o)return o()}finally{Mt=y,Oi.transition=h,cr=c,(cr&6)===0&&Co()}}function Yg(){oi=gc.current,Br(gc)}function pl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,bI(h)),jn!==null)for(h=jn.return;h!==null;){var y=h;switch(sg(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&yf();break;case 3:hc(),Br(Vs),Br(Ss),yg();break;case 5:pg(y);break;case 4:hc();break;case 13:Br(en);break;case 19:Br(en);break;case 10:ug(y.type._context);break;case 22:case 23:Yg()}h=h.return}if(Jn=o,jn=o=$o(o.current,null),fs=oi=c,Tn=0,Bu=null,Bg=zf=hl=0,Ks=Wu=null,ul!==null){for(c=0;c<ul.length;c++)if(h=ul[c],y=h.interleaved,y!==null){h.interleaved=null;var b=y.next,N=h.pending;if(N!==null){var O=N.next;N.next=b,y.next=O}h.pending=y}ul=null}return o}function Aj(o,c){do{var h=jn;try{if(cg(),Af.current=If,Pf){for(var y=tn.memoizedState;y!==null;){var b=y.queue;b!==null&&(b.pending=null),y=y.next}Pf=!1}if(fl=0,Yn=On=tn=null,Ru=!1,Mu=0,Ug.current=null,h===null||h.return===null){Tn=1,Bu=c,jn=null;break}e:{var N=o,O=h.return,B=h,Y=c;if(c=fs,B.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var be=Y,ze=B,Be=ze.tag;if((ze.mode&1)===0&&(Be===0||Be===11||Be===15)){var Me=ze.alternate;Me?(ze.updateQueue=Me.updateQueue,ze.memoizedState=Me.memoizedState,ze.lanes=Me.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var Qe=ej(O);if(Qe!==null){Qe.flags&=-257,tj(Qe,O,B,N,c),Qe.mode&1&&Z1(N,be,c),c=Qe,Y=be;var lt=c.updateQueue;if(lt===null){var dt=new Set;dt.add(Y),c.updateQueue=dt}else lt.add(Y);break e}else{if((c&1)===0){Z1(N,be,c),Jg();break e}Y=Error(r(426))}}else if(Gr&&B.mode&1){var pn=ej(O);if(pn!==null){(pn.flags&65536)===0&&(pn.flags|=256),tj(pn,O,B,N,c),og(mc(Y,B));break e}}N=Y=mc(Y,B),Tn!==4&&(Tn=2),Wu===null?Wu=[N]:Wu.push(N),N=O;do{switch(N.tag){case 3:N.flags|=65536,c&=-c,N.lanes|=c;var he=X1(N,Y,c);k1(N,he);break e;case 1:B=Y;var se=N.type,ye=N.stateNode;if((N.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Oo===null||!Oo.has(ye)))){N.flags|=65536,c&=-c,N.lanes|=c;var qe=Q1(N,B,c);k1(N,qe);break e}}N=N.return}while(N!==null)}Tj(h)}catch(ht){c=ht,jn===h&&h!==null&&(jn=h=h.return);continue}break}while(!0)}function Pj(){var o=Lf.current;return Lf.current=If,o===null?If:o}function Jg(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Jn===null||(hl&268435455)===0&&(zf&268435455)===0||Do(Jn,fs)}function Hf(o,c){var h=cr;cr|=2;var y=Pj();(Jn!==o||fs!==c)&&(qa=null,pl(o,c));do try{qI();break}catch(b){Aj(o,b)}while(!0);if(cg(),cr=h,Lf.current=y,jn!==null)throw Error(r(261));return Jn=null,fs=0,Tn}function qI(){for(;jn!==null;)Oj(jn)}function HI(){for(;jn!==null&&!Pn();)Oj(jn)}function Oj(o){var c=$j(o.alternate,o,oi);o.memoizedProps=o.pendingProps,c===null?Tj(o):jn=c,Ug.current=null}function Tj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=FI(h,c,oi),h!==null){jn=h;return}}else{if(h=LI(h,c),h!==null){h.flags&=32767,jn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Tn=6,jn=null;return}}if(c=c.sibling,c!==null){jn=c;return}jn=c=o}while(c!==null);Tn===0&&(Tn=5)}function gl(o,c,h){var y=Mt,b=Oi.transition;try{Oi.transition=null,Mt=1,KI(o,c,h,y)}finally{Oi.transition=b,Mt=y}return null}function KI(o,c,h,y){do xc();while(To!==null);if((cr&6)!==0)throw Error(r(327));h=o.finishedWork;var b=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var N=h.lanes|h.childLanes;if(yr(o,N),o===Jn&&(jn=Jn=null,fs=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Bf||(Bf=!0,Rj(Ue,function(){return xc(),null})),N=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||N){N=Oi.transition,Oi.transition=null;var O=Mt;Mt=1;var B=cr;cr|=4,Ug.current=null,UI(o,h),jj(h,o),hI(Jp),ki=!!Yp,Jp=Yp=null,o.current=h,BI(h),Ar(),cr=B,Mt=O,Oi.transition=N}else o.current=h;if(Bf&&(Bf=!1,To=o,Wf=b),N=o.pendingLanes,N===0&&(Oo=null),Rt(h.stateNode),Gs(o,Qt()),c!==null)for(y=o.onRecoverableError,h=0;h<c.length;h++)b=c[h],y(b.value,{componentStack:b.stack,digest:b.digest});if(Uf)throw Uf=!1,o=Vg,Vg=null,o;return(Wf&1)!==0&&o.tag!==0&&xc(),N=o.pendingLanes,(N&1)!==0?o===qg?Vu++:(Vu=0,qg=o):Vu=0,Co(),null}function xc(){if(To!==null){var o=Us(Wf),c=Oi.transition,h=Mt;try{if(Oi.transition=null,Mt=16>o?16:o,To===null)var y=!1;else{if(o=To,To=null,Wf=0,(cr&6)!==0)throw Error(r(331));var b=cr;for(cr|=4,nt=o.current;nt!==null;){var N=nt,O=N.child;if((nt.flags&16)!==0){var B=N.deletions;if(B!==null){for(var Y=0;Y<B.length;Y++){var be=B[Y];for(nt=be;nt!==null;){var ze=nt;switch(ze.tag){case 0:case 11:case 15:Uu(8,ze,N)}var Be=ze.child;if(Be!==null)Be.return=ze,nt=Be;else for(;nt!==null;){ze=nt;var Me=ze.sibling,Qe=ze.return;if(yj(ze),ze===be){nt=null;break}if(Me!==null){Me.return=Qe,nt=Me;break}nt=Qe}}}var lt=N.alternate;if(lt!==null){var dt=lt.child;if(dt!==null){lt.child=null;do{var pn=dt.sibling;dt.sibling=null,dt=pn}while(dt!==null)}}nt=N}}if((N.subtreeFlags&2064)!==0&&O!==null)O.return=N,nt=O;else e:for(;nt!==null;){if(N=nt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Uu(9,N,N.return)}var he=N.sibling;if(he!==null){he.return=N.return,nt=he;break e}nt=N.return}}var se=o.current;for(nt=se;nt!==null;){O=nt;var ye=O.child;if((O.subtreeFlags&2064)!==0&&ye!==null)ye.return=O,nt=ye;else e:for(O=se;nt!==null;){if(B=nt,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Ff(9,B)}}catch(ht){an(B,B.return,ht)}if(B===O){nt=null;break e}var qe=B.sibling;if(qe!==null){qe.return=B.return,nt=qe;break e}nt=B.return}}if(cr=b,Co(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Ie,o)}catch{}y=!0}return y}finally{Mt=h,Oi.transition=c}}return!1}function Ij(o,c,h){c=mc(h,c),c=X1(o,c,1),o=Ao(o,c,1),c=Ds(),o!==null&&(Qr(o,1,c),Gs(o,c))}function an(o,c,h){if(o.tag===3)Ij(o,o,h);else for(;c!==null;){if(c.tag===3){Ij(c,o,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Oo===null||!Oo.has(y))){o=mc(h,o),o=Q1(c,o,1),c=Ao(c,o,1),o=Ds(),c!==null&&(Qr(c,1,o),Gs(c,o));break}}c=c.return}}function GI(o,c,h){var y=o.pingCache;y!==null&&y.delete(c),c=Ds(),o.pingedLanes|=o.suspendedLanes&h,Jn===o&&(fs&h)===h&&(Tn===4||Tn===3&&(fs&130023424)===fs&&500>Qt()-Wg?pl(o,0):Bg|=h),Gs(o,c)}function Dj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ut,Ut<<=1,(Ut&130023424)===0&&(Ut=4194304)));var h=Ds();o=Ba(o,c),o!==null&&(Qr(o,c,h),Gs(o,h))}function YI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),Dj(o,h)}function JI(o,c){var h=0;switch(o.tag){case 13:var y=o.stateNode,b=o.memoizedState;b!==null&&(h=b.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(c),Dj(o,h)}var $j;$j=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Vs.current)Hs=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Hs=!1,MI(o,c,h);Hs=(o.flags&131072)!==0}else Hs=!1,Gr&&(c.flags&1048576)!==0&&m1(c,wf,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Rf(o,c),o=c.pendingProps;var b=ac(c,Ss.current);fc(c,h),b=bg(null,c,y,o,b,h);var N=wg();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,qs(y)?(N=!0,xf(c)):N=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,hg(c),b.updater=Df,c.stateNode=b,b._reactInternals=c,Cg(c,y,o,h),c=Og(null,c,y,!0,N,h)):(c.tag=0,Gr&&N&&ng(c),Is(null,c,b,h),c=c.child),c;case 16:y=c.elementType;e:{switch(Rf(o,c),o=c.pendingProps,b=y._init,y=b(y._payload),c.type=y,b=c.tag=QI(y),o=ea(y,o),b){case 0:c=Pg(null,c,y,o,h);break e;case 1:c=oj(null,c,y,o,h);break e;case 11:c=rj(null,c,y,o,h);break e;case 14:c=nj(null,c,y,ea(y.type,o),h);break e}throw Error(r(306,y,""))}return c;case 0:return y=c.type,b=c.pendingProps,b=c.elementType===y?b:ea(y,b),Pg(o,c,y,b,h);case 1:return y=c.type,b=c.pendingProps,b=c.elementType===y?b:ea(y,b),oj(o,c,y,b,h);case 3:e:{if(lj(c),o===null)throw Error(r(387));y=c.pendingProps,N=c.memoizedState,b=N.element,S1(o,c),Cf(c,y,null,h);var O=c.memoizedState;if(y=O.element,N.isDehydrated)if(N={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){b=mc(Error(r(423)),c),c=cj(o,c,y,h,b);break e}else if(y!==b){b=mc(Error(r(424)),c),c=cj(o,c,y,h,b);break e}else for(ai=ko(c.stateNode.containerInfo.firstChild),ii=c,Gr=!0,Zi=null,h=w1(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(cc(),y===b){c=Va(o,c,h);break e}Is(o,c,y,h)}c=c.child}return c;case 5:return _1(c),o===null&&ag(c),y=c.type,b=c.pendingProps,N=o!==null?o.memoizedProps:null,O=b.children,Xp(y,b)?O=null:N!==null&&Xp(y,N)&&(c.flags|=32),aj(o,c),Is(o,c,O,h),c.child;case 6:return o===null&&ag(c),null;case 13:return uj(o,c,h);case 4:return mg(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=uc(c,null,y,h):Is(o,c,y,h),c.child;case 11:return y=c.type,b=c.pendingProps,b=c.elementType===y?b:ea(y,b),rj(o,c,y,b,h);case 7:return Is(o,c,c.pendingProps,h),c.child;case 8:return Is(o,c,c.pendingProps.children,h),c.child;case 12:return Is(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(y=c.type._context,b=c.pendingProps,N=c.memoizedProps,O=b.value,Tr(kf,y._currentValue),y._currentValue=O,N!==null)if(Qi(N.value,O)){if(N.children===b.children&&!Vs.current){c=Va(o,c,h);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var B=N.dependencies;if(B!==null){O=N.child;for(var Y=B.firstContext;Y!==null;){if(Y.context===y){if(N.tag===1){Y=Wa(-1,h&-h),Y.tag=2;var be=N.updateQueue;if(be!==null){be=be.shared;var ze=be.pending;ze===null?Y.next=Y:(Y.next=ze.next,ze.next=Y),be.pending=Y}}N.lanes|=h,Y=N.alternate,Y!==null&&(Y.lanes|=h),dg(N.return,h,c),B.lanes|=h;break}Y=Y.next}}else if(N.tag===10)O=N.type===c.type?null:N.child;else if(N.tag===18){if(O=N.return,O===null)throw Error(r(341));O.lanes|=h,B=O.alternate,B!==null&&(B.lanes|=h),dg(O,h,c),O=N.sibling}else O=N.child;if(O!==null)O.return=N;else for(O=N;O!==null;){if(O===c){O=null;break}if(N=O.sibling,N!==null){N.return=O.return,O=N;break}O=O.return}N=O}Is(o,c,b.children,h),c=c.child}return c;case 9:return b=c.type,y=c.pendingProps.children,fc(c,h),b=Ai(b),y=y(b),c.flags|=1,Is(o,c,y,h),c.child;case 14:return y=c.type,b=ea(y,c.pendingProps),b=ea(y.type,b),nj(o,c,y,b,h);case 15:return sj(o,c,c.type,c.pendingProps,h);case 17:return y=c.type,b=c.pendingProps,b=c.elementType===y?b:ea(y,b),Rf(o,c),c.tag=1,qs(y)?(o=!0,xf(c)):o=!1,fc(c,h),Y1(c,y,b),Cg(c,y,b,h),Og(null,c,y,!0,o,h);case 19:return fj(o,c,h);case 22:return ij(o,c,h)}throw Error(r(156,c.tag))};function Rj(o,c){return vs(o,c)}function XI(o,c,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(o,c,h,y){return new XI(o,c,h,y)}function Xg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function QI(o){if(typeof o=="function")return Xg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===q)return 11;if(o===G)return 14}return 2}function $o(o,c){var h=o.alternate;return h===null?(h=Ti(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Kf(o,c,h,y,b,N){var O=2;if(y=o,typeof o=="function")Xg(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case L:return yl(h.children,b,N,c);case R:O=8,b|=8;break;case J:return o=Ti(12,h,c,b|2),o.elementType=J,o.lanes=N,o;case de:return o=Ti(13,h,c,b),o.elementType=de,o.lanes=N,o;case W:return o=Ti(19,h,c,b),o.elementType=W,o.lanes=N,o;case ae:return Gf(h,b,N,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ne:O=10;break e;case ie:O=9;break e;case q:O=11;break e;case G:O=14;break e;case Q:O=16,y=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Ti(O,h,c,b),c.elementType=o,c.type=y,c.lanes=N,c}function yl(o,c,h,y){return o=Ti(7,o,y,c),o.lanes=h,o}function Gf(o,c,h,y){return o=Ti(22,o,y,c),o.elementType=ae,o.lanes=h,o.stateNode={isHidden:!1},o}function Qg(o,c,h){return o=Ti(6,o,null,c),o.lanes=h,o}function Zg(o,c,h){return c=Ti(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function ZI(o,c,h,y,b){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=y,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function ey(o,c,h,y,b,N,O,B,Y){return o=new ZI(o,c,h,B,Y),c===1?(c=1,N===!0&&(c|=8)):c=0,N=Ti(3,null,null,c),o.current=N,N.stateNode=o,N.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},hg(N),o}function eD(o,c,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:y==null?null:""+y,children:o,containerInfo:c,implementation:h}}function Mj(o){if(!o)return _o;o=o._reactInternals;e:{if(Or(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(qs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(qs(h))return d1(o,h,c)}return c}function Fj(o,c,h,y,b,N,O,B,Y){return o=ey(h,y,!0,o,b,N,O,B,Y),o.context=Mj(null),h=o.current,y=Ds(),b=Io(h),N=Wa(y,b),N.callback=c??null,Ao(h,N,b),o.current.lanes=b,Qr(o,b,y),Gs(o,y),o}function Yf(o,c,h,y){var b=c.current,N=Ds(),O=Io(b);return h=Mj(h),c.context===null?c.context=h:c.pendingContext=h,c=Wa(N,O),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Ao(b,c,O),o!==null&&(na(o,b,O,N),_f(o,b,O)),O}function Jf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Lj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function ty(o,c){Lj(o,c),(o=o.alternate)&&Lj(o,c)}function tD(){return null}var zj=typeof reportError=="function"?reportError:function(o){console.error(o)};function ry(o){this._internalRoot=o}Xf.prototype.render=ry.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Yf(o,c,null,null)},Xf.prototype.unmount=ry.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;ml(function(){Yf(null,o,null,null)}),c[Fa]=null}};function Xf(o){this._internalRoot=o}Xf.prototype.unstable_scheduleHydration=function(o){if(o){var c=Ki();o={blockedOn:null,target:o,priority:c};for(var h=0;h<nn.length&&c!==0&&c<nn[h].priority;h++);nn.splice(h,0,o),h===0&&wo(o)}};function ny(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Qf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Uj(){}function rD(o,c,h,y,b){if(b){if(typeof y=="function"){var N=y;y=function(){var be=Jf(O);N.call(be)}}var O=Fj(c,y,o,0,null,!1,!1,"",Uj);return o._reactRootContainer=O,o[Fa]=O.current,Eu(o.nodeType===8?o.parentNode:o),ml(),O}for(;b=o.lastChild;)o.removeChild(b);if(typeof y=="function"){var B=y;y=function(){var be=Jf(Y);B.call(be)}}var Y=ey(o,0,!1,null,null,!1,!1,"",Uj);return o._reactRootContainer=Y,o[Fa]=Y.current,Eu(o.nodeType===8?o.parentNode:o),ml(function(){Yf(c,Y,h,y)}),Y}function Zf(o,c,h,y,b){var N=h._reactRootContainer;if(N){var O=N;if(typeof b=="function"){var B=b;b=function(){var Y=Jf(O);B.call(Y)}}Yf(c,O,o,b)}else O=rD(h,c,o,b,y);return Jf(O)}ni=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=un(c.pendingLanes);h!==0&&(qi(c,h|1),Gs(c,Qt()),(cr&6)===0&&(yc=Qt()+500,Co()))}break;case 13:ml(function(){var y=Ba(o,1);if(y!==null){var b=Ds();na(y,o,1,b)}}),ty(o,1)}},dn=function(o){if(o.tag===13){var c=Ba(o,134217728);if(c!==null){var h=Ds();na(c,o,134217728,h)}ty(o,134217728)}},Hi=function(o){if(o.tag===13){var c=Io(o),h=Ba(o,c);if(h!==null){var y=Ds();na(h,o,c,y)}ty(o,c)}},Ki=function(){return Mt},bs=function(o,c){var h=Mt;try{return Mt=o,c()}finally{Mt=h}},Ze=function(o,c,h){switch(c){case"input":if(pt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==o&&y.form===o.form){var b=gf(y);if(!b)throw Error(r(90));K(y),pt(y,b)}}}break;case"textarea":Oe(o,h);break;case"select":c=h.value,c!=null&&V(o,!!h.multiple,c,!1)}},Rr=Gg,Yt=ml;var nD={usingClientEntryPoint:!1,Events:[Ou,sc,gf,Gt,tr,Gg]},qu={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sD={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=cn(o),o===null?null:o.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||tD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Ie=eh.inject(sD),Ot=eh}catch{}}return Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nD,Ys.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(c))throw Error(r(200));return eD(o,c,null,h)},Ys.createRoot=function(o,c){if(!ny(o))throw Error(r(299));var h=!1,y="",b=zj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=ey(o,1,!1,null,null,h,!1,y,b),o[Fa]=c.current,Eu(o.nodeType===8?o.parentNode:o),new ry(c)},Ys.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=cn(c),o=o===null?null:o.stateNode,o},Ys.flushSync=function(o){return ml(o)},Ys.hydrate=function(o,c,h){if(!Qf(c))throw Error(r(200));return Zf(null,o,c,!0,h)},Ys.hydrateRoot=function(o,c,h){if(!ny(o))throw Error(r(405));var y=h!=null&&h.hydratedSources||null,b=!1,N="",O=zj;if(h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),c=Fj(c,null,o,1,h??null,b,!1,N,O),o[Fa]=c.current,Eu(o),y)for(o=0;o<y.length;o++)h=y[o],b=h._getVersion,b=b(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,b]:c.mutableSourceEagerHydrationData.push(h,b);return new Xf(c)},Ys.render=function(o,c,h){if(!Qf(c))throw Error(r(200));return Zf(null,o,c,!1,h)},Ys.unmountComponentAtNode=function(o){if(!Qf(o))throw Error(r(40));return o._reactRootContainer?(ml(function(){Zf(null,null,o,!1,function(){o._reactRootContainer=null,o[Fa]=null})}),!0):!1},Ys.unstable_batchedUpdates=Gg,Ys.unstable_renderSubtreeIntoContainer=function(o,c,h,y){if(!Qf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Zf(o,c,h,!1,y)},Ys.version="18.3.1-next-f1338f8080-20240426",Ys}var Yj;function BC(){if(Yj)return oy.exports;Yj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oy.exports=gD(),oy.exports}var Jj;function yD(){if(Jj)return th;Jj=1;var e=BC();return th.createRoot=e.createRoot,th.hydrateRoot=e.hydrateRoot,th}var xD=yD();const vD=pa(xD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xj="popstate";function bD(e={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return ax("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:wd(s)}return jD(t,r,null,e)}function Xr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Mi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wD(){return Math.random().toString(36).substring(2,10)}function Qj(e,t){return{usr:e.state,key:e.key,idx:t}}function ax(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?su(t):t,state:r,key:t&&t.key||n||wD()}}function wd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function su(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function jD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-m;m=S,d&&d({action:u,location:w.location,delta:_})}function x(S,_){u="PUSH";let E=ax(w.location,S,_);m=f()+1;let C=Qj(E,m),T=w.createHref(E);try{l.pushState(C,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(T)}a&&d&&d({action:u,location:w.location,delta:1})}function v(S,_){u="REPLACE";let E=ax(w.location,S,_);m=f();let C=Qj(E,m),T=w.createHref(E);l.replaceState(C,"",T),a&&d&&d({action:u,location:w.location,delta:0})}function j(S){return SD(S)}let w={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Xj,p),d=S,()=>{s.removeEventListener(Xj,p),d=null}},createHref(S){return t(s,S)},createURL:j,encodeLocation(S){let _=j(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:v,go(S){return l.go(S)}};return w}function SD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:wd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function WC(e,t,r="/"){return kD(e,t,r,!1)}function kD(e,t,r,n){let s=typeof t=="string"?su(t):t,a=no(s.pathname||"/",r);if(a==null)return null;let l=VC(e);ND(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=RD(a);u=DD(l[d],m,n)}return u}function VC(e,t=[],r=[],n="",s=!1){let a=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Xr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Za([n,f.relativePath]),x=r.concat(f);l.children&&l.children.length>0&&(Xr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),VC(l.children,t,x,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:TD(p,l.index),routesMeta:x})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of qC(l.path))a(l,u,!0,m)}),t}function qC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=qC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function ND(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ID(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var _D=/^:[\w-]+$/,CD=3,ED=2,AD=1,PD=10,OD=-2,Zj=e=>e==="*";function TD(e,t){let r=e.split("/"),n=r.length;return r.some(Zj)&&(n+=OD),t&&(n+=ED),r.filter(s=>!Zj(s)).reduce((s,a)=>s+(_D.test(a)?CD:a===""?AD:PD),n)}function ID(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function DD(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=Rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),x=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Za([a,p.pathname]),pathnameBase:zD(Za([a,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(a=Za([a,p.pathnameBase]))}return l}function Rh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$D(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},x)=>{if(f==="*"){let j=u[x]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const v=u[x];return p&&!v?m[f]=void 0:m[f]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function $D(e,t=!1,r=!0){Mi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function RD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function no(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function MD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?su(e):e;return{pathname:r?r.startsWith("/")?r:FD(r,t):t,search:UD(n),hash:BD(s)}}function FD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function uy(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pv(e){let t=LD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Ov(e,t,r,n=!1){let s;typeof e=="string"?s=su(e):(s={...e},Xr(!s.pathname||!s.pathname.includes("?"),uy("?","pathname","search",s)),Xr(!s.pathname||!s.pathname.includes("#"),uy("#","pathname","hash",s)),Xr(!s.search||!s.search.includes("#"),uy("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}u=p>=0?t[p]:"/"}let d=MD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Za=e=>e.join("/").replace(/\/\/+/g,"/"),zD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var HC=["POST","PUT","PATCH","DELETE"];new Set(HC);var VD=["GET",...HC];new Set(VD);var iu=g.createContext(null);iu.displayName="DataRouter";var zm=g.createContext(null);zm.displayName="DataRouterState";g.createContext(!1);var KC=g.createContext({isTransitioning:!1});KC.displayName="ViewTransition";var qD=g.createContext(new Map);qD.displayName="Fetchers";var HD=g.createContext(null);HD.displayName="Await";var ga=g.createContext(null);ga.displayName="Navigation";var Ld=g.createContext(null);Ld.displayName="Location";var Ta=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ta.displayName="Route";var Tv=g.createContext(null);Tv.displayName="RouteError";function KD(e,{relative:t}={}){Xr(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(ga),{hash:s,pathname:a,search:l}=zd(e,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Za([r,a])),n.createHref({pathname:u,search:l,hash:s})}function au(){return g.useContext(Ld)!=null}function mo(){return Xr(au(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Ld).location}var GC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YC(e){g.useContext(ga).static||g.useLayoutEffect(e)}function ti(){let{isDataRoute:e}=g.useContext(Ta);return e?a5():GD()}function GD(){Xr(au(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(iu),{basename:t,navigator:r}=g.useContext(ga),{matches:n}=g.useContext(Ta),{pathname:s}=mo(),a=JSON.stringify(Pv(n)),l=g.useRef(!1);return YC(()=>{l.current=!0}),g.useCallback((d,m={})=>{if(Mi(l.current,GC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Ov(d,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Za([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}g.createContext(null);function zd(e,{relative:t}={}){let{matches:r}=g.useContext(Ta),{pathname:n}=mo(),s=JSON.stringify(Pv(r));return g.useMemo(()=>Ov(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function YD(e,t){return JC(e,t)}function JC(e,t,r,n,s){var E;Xr(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(ga),{matches:l}=g.useContext(Ta),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";XC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let x=mo(),v;if(t){let C=typeof t=="string"?su(t):t;Xr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=x;let j=v.pathname||"/",w=j;if(f!=="/"){let C=f.replace(/^\//,"").split("/");w="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=WC(e,{pathname:w});Mi(p||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Mi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=e5(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Za([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Za([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?g.createElement(Ld.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function JD(){let e=i5(),t=WD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,l)}var XD=g.createElement(JD,null),QD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ta.Provider,{value:this.props.routeContext},g.createElement(Tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZD({routeContext:e,match:t,children:r}){let n=g.useContext(iu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ta.Provider,{value:e},r)}function e5(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Xr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:x}=r,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let x,v=!1,j=null,w=null;r&&(x=l&&f.route.id?l[f.route.id]:void 0,j=f.route.errorElement||XD,u&&(d<0&&p===0?(XC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===p&&(v=!0,w=f.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,p+1)),_=()=>{let E;return x?E=j:v?E=w:f.route.Component?E=g.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,g.createElement(ZD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(QD,{location:r.location,revalidation:r.revalidation,component:j,error:x,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function Iv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t5(e){let t=g.useContext(iu);return Xr(t,Iv(e)),t}function r5(e){let t=g.useContext(zm);return Xr(t,Iv(e)),t}function n5(e){let t=g.useContext(Ta);return Xr(t,Iv(e)),t}function Dv(e){let t=n5(e),r=t.matches[t.matches.length-1];return Xr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function s5(){return Dv("useRouteId")}function i5(){var n;let e=g.useContext(Tv),t=r5("useRouteError"),r=Dv("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function a5(){let{router:e}=t5("useNavigate"),t=Dv("useNavigate"),r=g.useRef(!1);return YC(()=>{r.current=!0}),g.useCallback(async(s,a={})=>{Mi(r.current,GC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var eS={};function XC(e,t,r){!t&&!eS[e]&&(eS[e]=!0,Mi(!1,r))}g.memo(o5);function o5({routes:e,future:t,state:r,unstable_onError:n}){return JC(e,void 0,r,n,t)}function l5({to:e,replace:t,state:r,relative:n}){Xr(au(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(ga);Mi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(Ta),{pathname:l}=mo(),u=ti(),d=Ov(e,Pv(a),l,n==="path"),m=JSON.stringify(d);return g.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function li(e){Xr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){Xr(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof r=="string"&&(r=su(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:x="default"}=r,v=g.useMemo(()=>{let j=no(d,l);return j==null?null:{location:{pathname:j,search:m,hash:f,state:p,key:x},navigationType:n}},[l,d,m,f,p,x,n]);return Mi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:g.createElement(ga.Provider,{value:u},g.createElement(Ld.Provider,{children:t,value:v}))}function u5({children:e,location:t}){return YD(ox(e),t)}function ox(e,t=[]){let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let a=[...t,s];if(n.type===g.Fragment){r.push.apply(r,ox(n.props.children,a));return}Xr(n.type===li,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ox(n.props.children,a)),r.push(l)}),r}var Nh="get",_h="application/x-www-form-urlencoded";function Um(e){return e!=null&&typeof e.tagName=="string"}function d5(e){return Um(e)&&e.tagName.toLowerCase()==="button"}function f5(e){return Um(e)&&e.tagName.toLowerCase()==="form"}function h5(e){return Um(e)&&e.tagName.toLowerCase()==="input"}function m5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function p5(e,t){return e.button===0&&(!t||t==="_self")&&!m5(e)}function lx(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function g5(e,t){let r=lx(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}var rh=null;function y5(){if(rh===null)try{new FormData(document.createElement("form"),0),rh=!1}catch{rh=!0}return rh}var x5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dy(e){return e!=null&&!x5.has(e)?(Mi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):e}function v5(e,t){let r,n,s,a,l;if(f5(e)){let u=e.getAttribute("action");n=u?no(u,t):null,r=e.getAttribute("method")||Nh,s=dy(e.getAttribute("enctype"))||_h,a=new FormData(e)}else if(d5(e)||h5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?no(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Nh,s=dy(e.getAttribute("formenctype"))||dy(u.getAttribute("enctype"))||_h,a=new FormData(u,e),!y5()){let{name:m,type:f,value:p}=e;if(f==="image"){let x=m?`${m}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else m&&a.append(m,p)}}else{if(Um(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Nh,n=null,s=_h,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $v(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&no(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function w5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function S5(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await w5(a,r);return l.links?l.links():[]}return[]}));return C5(n.flat(1).filter(j5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function tS(e,t,r,n,s,a){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):a==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function k5(e,t,{includeHydrateFallback:r}={}){return N5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function N5(e){return[...new Set(e)]}function _5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function C5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(_5(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function QC(){let e=g.useContext(iu);return $v(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function E5(){let e=g.useContext(zm);return $v(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rv=g.createContext(void 0);Rv.displayName="FrameworkContext";function ZC(){let e=g.useContext(Rv);return $v(e,"You must render this element inside a <HydratedRouter> element"),e}function A5(e,t){let r=g.useContext(Rv),[n,s]=g.useState(!1),[a,l]=g.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,x=g.useRef(null);g.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),g.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let v=()=>{s(!0)},j=()=>{s(!1),l(!1)};return r?e!=="intent"?[a,x,{}]:[a,x,{onFocus:Ku(u,v),onBlur:Ku(d,j),onMouseEnter:Ku(m,v),onMouseLeave:Ku(f,j),onTouchStart:Ku(p,v)}]:[!1,x,{}]}function Ku(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function P5({page:e,...t}){let{router:r}=QC(),n=g.useMemo(()=>WC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(T5,{page:e,matches:n,...t}):null}function O5(e){let{manifest:t,routeModules:r}=ZC(),[n,s]=g.useState([]);return g.useEffect(()=>{let a=!1;return S5(e,t,r).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,r]),n}function T5({page:e,matches:t,...r}){let n=mo(),{manifest:s,routeModules:a}=ZC(),{basename:l}=QC(),{loaderData:u,matches:d}=E5(),m=g.useMemo(()=>tS(e,t,d,s,n,"data"),[e,t,d,s,n]),f=g.useMemo(()=>tS(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,w=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(T=>T.route.id===_.route.id)&&_.route.id in u&&((C=a[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?w=!0:j.add(_.route.id))}),j.size===0)return[];let S=b5(e,l,"data");return w&&j.size>0&&S.searchParams.set("_routes",t.filter(_=>j.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,a]),x=g.useMemo(()=>k5(f,s),[f,s]),v=O5(f);return g.createElement(g.Fragment,null,p.map(j=>g.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>g.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),v.map(({key:j,link:w})=>g.createElement("link",{key:j,nonce:r.nonce,...w})))}function I5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var eE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eE&&(window.__reactRouterVersion="7.9.4")}catch{}function D5({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=bD({window:r,v5Compat:!0}));let s=n.current,[a,l]=g.useState({action:s.action,location:s.location}),u=g.useCallback(d=>{g.startTransition(()=>l(d))},[l]);return g.useLayoutEffect(()=>s.listen(u),[s,u]),g.createElement(c5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var tE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rE=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...x},v){let{basename:j}=g.useContext(ga),w=typeof m=="string"&&tE.test(m),S,_=!1;if(typeof m=="string"&&w&&(S=m,eE))try{let J=new URL(window.location.href),ne=m.startsWith("//")?new URL(J.protocol+m):new URL(m),ie=no(ne.pathname,j);ne.origin===J.origin&&ie!=null?m=ie+ne.search+ne.hash:_=!0}catch{Mi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=KD(m,{relative:s}),[C,T,A]=A5(n,x),D=F5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function L(J){t&&t(J),J.defaultPrevented||D(J)}let R=g.createElement("a",{...x,...A,href:S||E,onClick:_||a?t:L,ref:I5(v,T),target:d,"data-discover":!w&&r==="render"?"true":void 0});return C&&!w?g.createElement(g.Fragment,null,R,g.createElement(P5,{page:E})):R});rE.displayName="Link";var $5=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...m},f){let p=zd(l,{relative:m.relative}),x=mo(),v=g.useContext(zm),{navigator:j,basename:w}=g.useContext(ga),S=v!=null&&W5(p)&&u===!0,_=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,E=x.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=no(C,w)||C);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=E===_||!s&&E.startsWith(_)&&E.charAt(T)==="/",D=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),L={isActive:A,isPending:D,isTransitioning:S},R=A?t:void 0,J;typeof n=="function"?J=n(L):J=[n,A?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ne=typeof a=="function"?a(L):a;return g.createElement(rE,{...m,"aria-current":R,className:J,ref:f,style:ne,to:l,viewTransition:u},typeof d=="function"?d(L):d)});$5.displayName="NavLink";var R5=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:l=Nh,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...x},v)=>{let j=U5(),w=B5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&tE.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let T=C.nativeEvent.submitter,A=(T==null?void 0:T.getAttribute("formmethod"))||l;j(T||C.currentTarget,{fetcherKey:t,method:A,navigate:r,replace:s,state:a,relative:m,preventScrollReset:f,viewTransition:p})};return g.createElement("form",{ref:v,method:S,action:w,onSubmit:n?d:E,...x,"data-discover":!_&&e==="render"?"true":void 0})});R5.displayName="Form";function M5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(e){let t=g.useContext(iu);return Xr(t,M5(e)),t}function F5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=ti(),d=mo(),m=zd(e,{relative:a});return g.useCallback(f=>{if(p5(f,t)){f.preventDefault();let p=r!==void 0?r:wd(d)===wd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,m,r,n,t,e,s,a,l])}function Mv(e){Mi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(lx(e)),r=g.useRef(!1),n=mo(),s=g.useMemo(()=>g5(n.search,r.current?null:t.current),[n.search]),a=ti(),l=g.useCallback((u,d)=>{const m=lx(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,a("?"+m,d)},[a,s]);return[s,l]}var L5=0,z5=()=>`__${String(++L5)}__`;function U5(){let{router:e}=nE("useSubmit"),{basename:t}=g.useContext(ga),r=s5();return g.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:m}=v5(n,t);if(s.navigate===!1){let f=s.fetcherKey||z5();await e.fetch(f,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function B5(e,{relative:t}={}){let{basename:r}=g.useContext(ga),n=g.useContext(Ta);Xr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...zd(e||".",{relative:t})},l=mo();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Za([r,a.pathname])),wd(a)}function W5(e,{relative:t}={}){let r=g.useContext(KC);Xr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=nE("useViewTransitionState"),s=zd(e,{relative:t});if(!r.isTransitioning)return!1;let a=no(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=no(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Rh(s.pathname,l)!=null||Rh(s.pathname,a)!=null}var Fv=BC();const V5="modulepreload",q5=function(e){return"/feature-voting-app/"+e},rS={},Ud=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=q5(m),m in rS)return;rS[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":V5,f||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((v,j)=>{x.addEventListener("load",v),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},H5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Lv extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class nS extends Lv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sS extends Lv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class iS extends Lv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var cx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(cx||(cx={}));var K5=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class G5{constructor(t,{headers:r={},customFetch:n,region:s=cx.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=H5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return K5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let x;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(m["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(m["Content-Type"]="application/json",x=JSON.stringify(u)));const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:x,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new nS(_)}),j=v.headers.get("x-relay-error");if(j&&j==="true")throw new sS(v);if(!v.ok)throw new iS(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield v.json():w==="application/octet-stream"?S=yield v.blob():w==="text/event-stream"?S=v:w==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new nS(a)}:{data:null,error:a,response:a instanceof iS||a instanceof sS?a.context:void 0}}})}}var Qn={},vc={},bc={},wc={},jc={},Sc={},Y5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kc=Y5();const J5=Kc.fetch,sE=Kc.fetch.bind(Kc),iE=Kc.Headers,X5=Kc.Request,Q5=Kc.Response,ou=Object.freeze(Object.defineProperty({__proto__:null,Headers:iE,Request:X5,Response:Q5,default:sE,fetch:J5},Symbol.toStringTag,{value:"Module"})),Z5=cD(ou);var nh={},aS;function aE(){if(aS)return nh;aS=1,Object.defineProperty(nh,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return nh.default=e,nh}var oS;function oE(){if(oS)return Sc;oS=1;var e=Sc&&Sc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sc,"__esModule",{value:!0});const t=e(Z5),r=e(aE());class n{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,x,v;let j=null,w=null,S=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const D=await m.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?w=D:w=JSON.parse(D))}const T=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),A=(x=m.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");T&&A&&A.length>1&&(S=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(j={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,_=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const T=await m.text();try{j=JSON.parse(T),Array.isArray(j)&&m.status===404&&(w=[],j=null,_=200,E="OK")}catch{m.status===404&&T===""?(_=204,E="No Content"):j={message:T}}if(j&&this.isMaybeSingle&&(!((v=j==null?void 0:j.details)===null||v===void 0)&&v.includes("0 rows"))&&(j=null,_=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:w,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,x;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(x=m==null?void 0:m.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Sc.default=n,Sc}var lS;function lE(){if(lS)return jc;lS=1;var e=jc&&jc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jc,"__esModule",{value:!0});const t=e(oE());class r extends t.default{select(s){let a=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),x=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${x}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return jc.default=r,jc}var cS;function zv(){if(cS)return wc;cS=1;var e=wc&&wc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wc,"__esModule",{value:!0});const t=e(lE());class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return wc.default=r,wc}var uS;function cE(){if(uS)return bc;uS=1;var e=bc&&bc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bc,"__esModule",{value:!0});const t=e(zv());class r{constructor(s,{headers:a={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(s,a){const{head:l=!1,count:u}=a??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(p.length>0){const x=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return bc.default=r,bc}var dS;function e3(){if(dS)return vc;dS=1;var e=vc&&vc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(vc,"__esModule",{value:!0});const t=e(cE()),r=e(zv());class n{constructor(a,{headers:l={},schema:u,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const x=new URL(`${this.url}/rpc/${a}`);let v;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{x.searchParams.append(w,S)})):(p="POST",v=l);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new r.default({method:p,url:x,headers:j,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return vc.default=n,vc}var fS;function t3(){if(fS)return Qn;fS=1;var e=Qn&&Qn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const t=e(e3());Qn.PostgrestClient=t.default;const r=e(cE());Qn.PostgrestQueryBuilder=r.default;const n=e(zv());Qn.PostgrestFilterBuilder=n.default;const s=e(lE());Qn.PostgrestTransformBuilder=s.default;const a=e(oE());Qn.PostgrestBuilder=a.default;const l=e(aE());return Qn.PostgrestError=l.default,Qn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:l.default},Qn}var r3=t3();const n3=pa(r3),{PostgrestClient:s3,PostgrestQueryBuilder:aee,PostgrestFilterBuilder:oee,PostgrestTransformBuilder:lee,PostgrestBuilder:cee,PostgrestError:uee}=n3;class i3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const a3="2.74.0",o3=`realtime-js/${a3}`,l3="1.0.0",ux=1e4,c3=1e3,u3=100;var md;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(md||(md={}));var In;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(In||(In={}));var ia;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ia||(ia={}));var dx;(function(e){e.websocket="websocket"})(dx||(dx={}));var Nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Nl||(Nl={}));class d3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+a));l=l+a;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class uE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ir;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ir||(Ir={}));const hS=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=f3(l,e,t,s),a),{}):{}},f3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?dE(a,l):fx(l)},dE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return g3(t,r)}switch(e){case Ir.bool:return h3(t);case Ir.float4:case Ir.float8:case Ir.int2:case Ir.int4:case Ir.int8:case Ir.numeric:case Ir.oid:return m3(t);case Ir.json:case Ir.jsonb:return p3(t);case Ir.timestamp:return y3(t);case Ir.abstime:case Ir.date:case Ir.daterange:case Ir.int4range:case Ir.int8range:case Ir.money:case Ir.reltime:case Ir.text:case Ir.time:case Ir.timestamptz:case Ir.timetz:case Ir.tsrange:case Ir.tstzrange:return fx(t);default:return fx(t)}},fx=e=>e,h3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},m3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},p3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},g3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>dE(t,u))}return e},y3=e=>typeof e=="string"?e.replace(" ","T"):e,fE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class fy{constructor(t,r,n={},s=ux){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var mS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(mS||(mS={}));class pd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pd.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=pd.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=pd.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(a,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=a[m];if(p){const x=f.map(S=>S.presence_ref),v=p.map(S=>S.presence_ref),j=f.filter(S=>v.indexOf(S.presence_ref)<0),w=p.filter(S=>x.indexOf(S.presence_ref)<0);j.length>0&&(u[m]=j),w.length>0&&(d[m]=w)}else u[m]=f}),this.syncDiff(a,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(v=>v.presence_ref),x=f.filter(v=>p.indexOf(v.presence_ref)<0);t[u].unshift(...x)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(pS||(pS={}));var gd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gd||(gd={}));var Ka;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ka||(Ka={}));class Uv{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=In.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fy(this,ia.join,this.params,this.timeout),this.rejoinTimer=new uE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=In.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=In.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ia.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new pd(this),this.broadcastEndpointURL=fE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==In.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[gd.PRESENCE]&&this.bindings[gd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},x={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Ka.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Ka.CLOSED)),this.updateJoinPayload(Object.assign({config:x},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var j;if(this.socket.setAuth(),v===void 0){t==null||t(Ka.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(j=w==null?void 0:w.length)!==null&&j!==void 0?j:0,_=[];for(let E=0;E<S;E++){const C=w[E],{filter:{event:T,schema:A,table:D,filter:L}}=C,R=v&&v[E];if(R&&R.event===T&&R.schema===A&&R.table===D&&R.filter===L)_.push(Object.assign(Object.assign({},C),{id:R.id}));else{this.unsubscribe(),this.state=In.errored,t==null||t(Ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Ka.SUBSCRIBED);return}}).receive("error",v=>{this.state=In.errored,t==null||t(Ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===In.joined&&t===gd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=In.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ia.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new fy(this,ia.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=In.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new fy(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>u3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=ia;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let x=this._onMessage(l,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var j,w,S;return((j=v.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(w=v.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(v=>v.callback(x,n)):(a=this.bindings[l])===null||a===void 0||a.filter(v=>{var j,w,S,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const T=v.id,A=(j=v.filter)===null||j===void 0?void 0:j.event;return T&&((w=r.ids)===null||w===void 0?void 0:w.includes(T))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const T=(E=(_=v==null?void 0:v.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return T==="*"||T===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:w,table:S,commit_timestamp:_,type:E,errors:C}=j;x=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}v.callback(x,n)})}_isClosed(){return this.state===In.closed}_isJoined(){return this.state===In.joined}_isJoining(){return this.state===In.joining}_isLeaving(){return this.state===In.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Uv.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ia.close,{},t)}_onError(t){this._on(ia.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=In.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=hS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=hS(t.columns,t.old_record)),r}}const hy=()=>{},sh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},x3=[1e3,2e3,5e3,1e4],v3=1e4,b3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ux,this.transport=null,this.heartbeatIntervalMs=sh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hy,this.ref=0,this.reconnectTimer=null,this.logger=hy,this.conn=null,this.sendBuffer=[],this.serializer=new d3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>Ud(async()=>{const{default:u}=await Promise.resolve().then(()=>ou);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dx.websocket}`,this.httpEndpoint=fE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case md.connecting:return Nl.Connecting;case md.open:return Nl.Open;case md.closing:return Nl.Closing;default:return Nl.Closed}}isConnected(){return this.connectionState()===Nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Uv(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(c3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},sh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ia.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([b3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:o3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ia.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new uE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:ux,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:sh.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:hy,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>x3[p-1]||v3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,x)=>x(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Bv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class j3 extends Bv{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hx extends Bv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var S3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const hE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},k3=()=>S3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ud(()=>Promise.resolve().then(()=>ou),void 0)).Response:Response}),mx=e=>{if(Array.isArray(e))return e.map(r=>mx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=mx(n)}),t},N3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const my=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_3=(e,t,r)=>Gl(void 0,void 0,void 0,function*(){const n=yield k3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new j3(my(s),a,l))}).catch(s=>{t(new hx(my(s),s))}):t(new hx(my(e),e))}),C3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(N3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Bd(e,t,r,n,s,a){return Gl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,C3(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>_3(d,u,n))})})}function Mh(e,t,r,n){return Gl(this,void 0,void 0,function*(){return Bd(e,"GET",t,r,n)})}function ka(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Bd(e,"POST",t,n,s,r)})}function px(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Bd(e,"PUT",t,n,s,r)})}function E3(e,t,r,n){return Gl(this,void 0,void 0,function*(){return Bd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function mE(e,t,r,n,s){return Gl(this,void 0,void 0,function*(){return Bd(e,"DELETE",t,n,s,r)})}var A3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class P3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return A3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var O3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class T3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new P3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return O3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var Js=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const I3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=hE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Js(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},gS),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?px:ka)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Js(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Js(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:gS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield px(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Nn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Js(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ka(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Bv("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}update(t,r,n){return Js(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Js(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Js(this,void 0,void 0,function*(){try{return{data:{path:(yield ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Js(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield ka(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Js(this,void 0,void 0,function*(){try{const s=yield ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>Mh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new T3(d,this.shouldThrowOnError)}info(t){return Js(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Mh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:mx(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}exists(t){return Js(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield E3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n)&&n instanceof hx){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Js(this,void 0,void 0,function*(){try{return{data:yield mE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}list(t,r,n){return Js(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},I3),r),{prefix:t||""});return{data:yield ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}listV2(t,r){return Js(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const $3="2.74.0",R3={"X-Client-Info":`storage-js/${$3}`};var kc=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class M3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R3),r),this.fetch=hE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return kc(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}getBucket(t){return kc(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}createBucket(t){return kc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return kc(this,void 0,void 0,function*(){try{return{data:yield px(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return kc(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return kc(this,void 0,void 0,function*(){try{return{data:yield mE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}}class F3 extends M3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new D3(this.url,this.headers,t,this.fetch)}}const L3="2.74.0";let ad="";typeof Deno<"u"?ad="deno":typeof document<"u"?ad="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ad="react-native":ad="node";const z3={"X-Client-Info":`supabase-js-${ad}/${L3}`},U3={headers:z3},B3={schema:"public"},W3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V3={};var q3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const H3=e=>{let t;return e?t=e:typeof fetch>"u"?t=sE:t=fetch,(...r)=>t(...r)},K3=()=>typeof Headers>"u"?iE:Headers,G3=(e,t,r)=>{const n=H3(r),s=K3();return(a,l)=>q3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},l),{headers:m}))})};var Y3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function J3(e){return e.endsWith("/")?e:e+"/"}function X3(e,t){var r,n;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,x={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Y3(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function Q3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const pE="2.74.0",Rc=30*1e3,gx=3,py=gx*Rc,Z3="http://localhost:9999",e6="supabase.auth.token",t6={"X-Client-Info":`gotrue-js/${pE}`},yx="X-Supabase-Api-Version",gE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,n6=600*1e3;class jd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class s6 extends jd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function i6(e){return Et(e)&&e.name==="AuthApiError"}class _l extends jd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Qo extends jd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Fo extends Qo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a6(e){return Et(e)&&e.name==="AuthSessionMissingError"}class Nc extends Qo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ih extends Qo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ah extends Qo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function o6(e){return Et(e)&&e.name==="AuthImplicitGrantRedirectError"}class yS extends Qo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xx extends Qo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gy(e){return Et(e)&&e.name==="AuthRetryableFetchError"}class xS extends Qo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class vx extends Qo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vS=` 	
\r=`.split(""),l6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vS.length;t+=1)e[vS[t].charCodeAt(0)]=-2;for(let t=0;t<Fh.length;t+=1)e[Fh[t].charCodeAt(0)]=t;return e})();function bS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Fh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Fh[n]),t.queuedBits-=6}}function yE(e,t,r){const n=l6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{d6(l,n,r)};for(let l=0;l<e.length;l+=1)yE(e.charCodeAt(l),s,a);return t.join("")}function c6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function u6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}c6(n,t)}}function d6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)yE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function f6(e){const t=[];return u6(e,r=>t.push(r)),new Uint8Array(t)}function El(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>bS(s,r,n)),bS(null,r,n),t.join("")}function h6(e){return Math.round(Date.now()/1e3)+e}function m6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ci=()=>typeof window<"u"&&typeof document<"u",xl={tested:!1,writable:!1},xE=()=>{if(!ci())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xl.tested)return xl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xl.tested=!0,xl.writable=!0}catch{xl.tested=!0,xl.writable=!1}return xl.writable};function p6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const vE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},g6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mo=async(e,t)=>{await e.removeItem(t)};class Bm{constructor(){this.promise=new Bm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bm.promiseConstructor=Promise;function yy(e){const t=e.split(".");if(t.length!==3)throw new vx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!r6.test(t[n]))throw new vx("JWT not in base64url format");return{header:JSON.parse(wS(t[0])),payload:JSON.parse(wS(t[1])),signature:Wc(t[2]),raw:{header:t[0],payload:t[1]}}}async function y6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function x6(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function v6(e){return("0"+e.toString(16)).substr(-2)}function b6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,v6).join("")}async function w6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function j6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await w6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _c(e,t,r=!1){const n=b6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Mc(e,`${t}-code-verifier`,s);const a=await j6(n);return[a,n===a?"plain":"s256"]}const S6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k6(e){const t=e.headers.get(yx);if(!t||!t.match(S6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function N6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function _6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const C6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cc(e){if(!C6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jS(e){return JSON.parse(JSON.stringify(e))}var E6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const wl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),A6=[502,503,504];async function SS(e){var t;if(!g6(e))throw new xx(wl(e),0);if(A6.includes(e.status))throw new xx(wl(e),e.status);let r;try{r=await e.json()}catch(a){throw new _l(wl(a),a)}let n;const s=k6(e);if(s&&s.getTime()>=gE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xS(wl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Fo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new xS(wl(r),e.status,r.weak_password.reasons);throw new s6(wl(r),e.status||500,n)}const P6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function qt(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[yx]||(a[yx]=gE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await O6(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function O6(e,t,r,n,s,a){const l=P6(t,n,s,a);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new xx(wl(d),0)}if(u.ok||await SS(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await SS(d)}}function sa(e){var t;let r=null;D6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=h6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function kS(e){const t=sa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T6(e){return{data:e,error:null}}function I6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=E6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function NS(e){return e}function D6(e){return e.access_token&&e.refresh_token&&e.expires_in}const vy=["global","local","others"];var $6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class R6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vy[0]){if(vy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vy.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wo})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=$6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:I6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Et(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wo})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:NS});if(f.error)throw f.error;const p=await f.json(),x=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=w}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Et(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Cc(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wo})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Cc(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wo})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Cc(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wo})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Cc(t.userId);try{const{data:r,error:n}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Cc(t.userId),Cc(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:NS});if(f.error)throw f.error;const p=await f.json(),x=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=w}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Et(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}}function _S(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ec={debug:!!(globalThis&&xE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class M6 extends bE{}async function F6(e,t,r){Ec.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ec.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ec.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ec.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ec.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new M6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ec.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function L6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function z6(e){return parseInt(e,16)}function U6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function B6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=wE(e.address),j=f?`${f}://${n}`:n,w=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${v}

${w}`;let _=`URI: ${p}
Version: ${x}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${S}
${_}`}class kn extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Lh extends kn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function W6({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new kn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new kn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new kn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new kn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new kn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new kn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new kn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new kn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(SE(l)){if(a.rp.id!==l)return new kn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new kn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new kn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function V6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new kn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new kn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(SE(n)){if(r.rpId!==n)return new kn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new kn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var jE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class q6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const H6=new q6;function K6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=jE(e,["challenge","user","excludeCredentials"]),a=Wc(t).buffer,l=Object.assign(Object.assign({},r),{id:Wc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Wc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function G6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=jE(e,["challenge","allowCredentials"]),s=Wc(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Wc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Y6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:El(new Uint8Array(e.response.attestationObject)),clientDataJSON:El(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function J6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:El(new Uint8Array(s.authenticatorData)),clientDataJSON:El(new Uint8Array(s.clientDataJSON)),signature:El(new Uint8Array(s.signature)),userHandle:s.userHandle?El(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function SE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function CS(){var e,t;return!!(ci()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function X6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lh("Browser returned unexpected credential type",t)}:{data:null,error:new Lh("Empty credential response",t)}}catch(t){return{data:null,error:W6({error:t,options:e})}}}async function Q6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lh("Browser returned unexpected credential type",t)}:{data:null,error:new Lh("Empty credential response",t)}}catch(t){return{data:null,error:V6({error:t,options:e})}}}const Z6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},e$={userVerification:"preferred",hints:["security-key"]};function zh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(t(l)){const u=n[a];t(u)?n[a]=zh(u,l):n[a]=zh(l)}else n[a]=l}return n}function t$(e,t){return zh(Z6,e,t||{})}function r$(e,t){return zh(e$,e,t||{})}class n${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??H6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=t$(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await X6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=r$(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await Q6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return Et(l)?{data:null,error:l}:{data:null,error:new _l("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new jd("rpId is required for WebAuthn authentication")};try{if(!CS())return{data:null,error:new _l("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Et(l)?{data:null,error:l}:{data:null,error:new _l("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new jd("rpId is required for WebAuthn registration")};try{if(!CS())return{data:null,error:new _l("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return Et(l)?{data:null,error:l}:{data:null,error:new _l("Unexpected error in register",l)}}}}L6();const s$={url:Z3,storageKey:e6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:t6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ES(e,t,r){return await r()}const Ac={};class Sd{get jwks(){var t,r;return(r=(t=Ac[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ac[this.storageKey]=Object.assign(Object.assign({},Ac[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ac[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ac[this.storageKey]=Object.assign(Object.assign({},Ac[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sd.nextInstanceID,Sd.nextInstanceID+=1,this.instanceID>0&&ci()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},s$),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new R6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vE(s.fetch),this.lock=s.lock||ES,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ci()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=F6:this.lock=ES,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n$(this)},this.persistSession?(s.storage?this.storage=s.storage:xE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_S(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=_S(this.memoryStorage)),ci()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=p6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ci()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),o6(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Et(r)?{error:r}:{error:new _l("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:sa}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:f,password:p,options:x}=t;let v=null,j=null;this.flowType==="pkce"&&([v,j]=await _c(this.storage,this.storageKey)),a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:f,password:p,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:v,code_challenge_method:j},xform:sa})}else if("phone"in t){const{phone:f,password:p,options:x}=t;a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:sa})}else throw new ih("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:u}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kS})}else if("phone"in t){const{phone:a,password:l,options:u}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kS})}else throw new ih("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Nc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Et(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,l,u,d,m,f,p,x;let v,j;if("message"in t)v=t.message,j=t.signature;else{const{chain:w,wallet:S,statement:_,options:E}=t;let C;if(ci())if(typeof S=="object")C=S;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")C=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const T=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),A=await C.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=wE(A[0]);let L=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!L){const J=await C.request({method:"eth_chainId"});L=z6(J)}const R={domain:T.host,address:D,statement:_,uri:T.href,version:"1",chainId:L,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};v=B6(R),j=await C.request({method:"personal_sign",params:[U6(v),D]})}try{const{data:w,error:S}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:sa});if(S)throw S;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Nc}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:S})}catch(w){if(Et(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,s,a,l,u,d,m,f,p,x,v;let j,w;if("message"in t)j=t.message,w=t.signature;else{const{chain:S,wallet:_,statement:E,options:C}=t;let T;if(ci())if(typeof _=="object")T=_;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))T=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const A=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const D=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),E?{statement:E}:null));let L;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")L=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)L=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)j=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),w=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${A.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const D=await T.signMessage(new TextEncoder().encode(j),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:S,error:_}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:El(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:sa});if(_)throw _;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Nc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:_})}catch(S){if(Et(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await vl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:sa});if(await Mo(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Nc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(Et(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,u=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:sa}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Nc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(Et(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await _c(this.storage,this.storageKey));const{error:p}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new ih("You must provide either an email or phone number.")}catch(u){if(Et(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:sa});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await _c(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:T6})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Fo;const{error:s}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:u}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ih("You must provide either an email or phone number and a type")}catch(r){if(Et(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<py:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await vl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=xy()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wo}):await this._useSession(async r=>{var n,s,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fo}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Wo})})}catch(r){if(Et(r))return a6(r)&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Fo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await _c(this.storage,this.storageKey));const{data:m,error:f}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Wo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fo;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=yy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Et(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Fo;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Et(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ci())throw new ah("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ah(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ah("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new yS("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!a||!u||!l||!m)throw new ah("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let x=f+p;d&&(x=parseInt(d));const v=x-f;v*1e3<=Rc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const j=x-p;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,f);const{data:w,error:S}=await this._getUser(a);if(S)throw S;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:x,refresh_token:l,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(Et(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(i6(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=m6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await _c(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,u,d,m,f;const{data:p,error:x}=a;if(x)throw x;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",v,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ci()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Et(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sa}),{data:x,error:v}=p;return v?{data:{user:null,session:null},error:v}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Nc}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:v})}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await x6(async s=>(s>0&&await y6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sa})),(s,a)=>{const l=200*Math.pow(2,s);return a&&gy(a)&&Date.now()+l-n<Rc})}catch(n){if(this._debug(r,"error",n),Et(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ci()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await vl(this.storage,this.storageKey);if(s&&this.userStorage){let l=await vl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Mc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:xy()}else if(s&&!s.user&&!s.user){const l=await vl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Mo(this.storage,this.storageKey+"-user"),await Mc(this.storage,this.storageKey,s)):s.user=xy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<py;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${py}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),gy(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Bm;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Fo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Et(a)){const l={data:null,error:a};return gy(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Mc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=jS(s);await Mc(this.storage,this.storageKey,a)}else{const s=jS(r);await Mc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Mo(this.storage,this.storageKey),await Mo(this.storage,this.storageKey+"-code-verifier"),await Mo(this.storage,this.storageKey+"-user"),this.userStorage&&await Mo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ci()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Rc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rc}ms, refresh threshold is ${gx} ticks`),s<=gx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ci()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await _c(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Et(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Y6(t.webauthn.credential_response):J6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(Et(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:K6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:G6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Et(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=yy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+n6>s)return n;const{data:a,error:l}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:j}=await this.getSession();if(j||!v.session)return{data:null,error:j};n=v.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=yy(n);r!=null&&r.allowExpired||N6(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:a,header:s,signature:l},error:null}}const f=_6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,f6(`${u}.${d}`)))throw new vx("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}}Sd.nextInstanceID=0;const i$=Sd;class a$ extends i${constructor(t){super(t)}}var o$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class l${constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const u=Q3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:B3,realtime:V3,auth:Object.assign(Object.assign({},W3),{storageKey:d}),global:U3},f=X3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=G3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new s3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new F3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new G5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return o$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:u,lock:d,debug:m},f,p){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a$({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new w3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c$=(e,t,r)=>new l$(e,t,r);function u$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}u$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const d$="https://okdzllfpsvltjqryslnn.supabase.co",f$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ee=c$(d$,f$,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),so="__FEATURE_SUGGESTION__",Wv="__feature_suggestion__",h$="__feature_future_session__";function Wm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(h$)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function kE(e){try{if(!Ee||typeof Ee.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Ee.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const x=await f.text();throw console.error("[databaseService] Direct fetch error:",x),new Error(`API error: ${f.status} - ${x}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const a=Ee.from("users").select("*").eq("email",e).single(),u=await Promise.race([a,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function m$(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ee.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Al(e,t){try{let r=await kE(e);return r||(r=await m$({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function bx(){const{data:e,error:t}=await Ee.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function p$(e){var l,u;const[t,r,n]=await Promise.all([Ui(e),Ee.from("session_admins").select("session_id").eq("user_id",e),Ee.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let a=0;if((u=n.data)!=null&&u.email){const{data:d}=await Ee.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);a=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:a}}const lu="PRODUCTS_TABLE_MISSING";function eo(e){return typeof e=="object"&&e!==null&&e.code===lu}async function Uh(){const{data:e,error:t}=await Ee.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=lu,r}throw t}return e||[]}async function Ga(e){const{data:t,error:r}=await Ee.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=lu,n}throw r}return t||[]}async function NE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const a=t.name.trim();if(!a)throw new Error("Product name cannot be empty");r.name=a}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ee.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const a=new Error("Products table is missing");throw a.code=lu,a}throw s}return n}async function wx(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:a}=await Ee.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(a){if((a==null?void 0:a.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=lu,l}if((a==null?void 0:a.code)==="23505"){const{data:l,error:u}=await Ee.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw a}return s}async function _E(e){const{error:t}=await Ee.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=lu,r}throw t}}const cu="*, product:products(name)";function Vm(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Vv(e){return!e||e.length===0?[]:e.map(t=>Vm(t))}async function Go(){try{const e=`${Ee.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(cu)}&order=created_at.desc`,t={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Vv(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function qv(e){const{data:t,error:r}=await Ee.from("voting_sessions").select(cu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vm(t):null}async function g$(e){const{data:t,error:r}=await Ee.from("voting_sessions").select(cu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vm(t):null}async function AS(e){try{const t=`${Ee.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(cu)}&order=created_at.desc`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,a),new Error(`API error: ${n.status} - ${a}`)}const s=await n.json();return Vv(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function CE(e){var t;try{if(await Ui(e))return Go();const n=`${Ee.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const a=await s.json(),l=(a==null?void 0:a.map(C=>C.session_id))||[],u=`${Ee.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Ee.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,x=await fetch(p,{method:"GET",headers:{apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"}});if(!x.ok){const C=await x.text();throw console.error("[databaseService] Error loading session stakeholders:",x.status,C),new Error(`API error: ${x.status} - ${C}`)}const v=await x.json(),j=(v==null?void 0:v.map(C=>C.session_id))||[],w=[...new Set([...l,...j])];if(w.length===0)return[];const S=`${Ee.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(cu)}&id=in.(${w.join(",")})&order=created_at.desc`,_=await fetch(S,{method:"GET",headers:{apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return Vv(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function EE(e){if(!e)return null;const{data:t,error:r}=await Ee.from("voting_sessions").select(cu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Vm(t):null}async function jx(e){const{data:t,error:r}=await Ee.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function AE(e,t){const{data:r,error:n}=await Ee.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function y$(e){const{error:t}=await Ee.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function x$(e,t){const{error:r}=await Ee.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function Wd(e){const{data:t,error:r}=await Ee.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function PE(e){const{data:t,error:r}=await Ee.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:a}=await Ee.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(a)throw a;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function Il(e,t){const{data:r,error:n}=await Ee.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function v$(e,t,r){const n=await Al(t,r);return Il(e,n.id)}async function Sx(e,t){const{error:r}=await Ee.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function qm(e,t){try{if(await Ui(t))return!0;const n=`${Ee.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},a=await fetch(n,{method:"GET",headers:s});if(!a.ok)return console.error("Error checking admin status:",a.status),!1;const l=await a.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function Bh(e){const{data:t,error:r}=await Ee.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function OE(e){const{data:t,error:r}=await Ee.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function PS(e,t,r){return OE({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function TE(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,a=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?OS(e.start_date):""} - ${e.end_date?OS(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${a}&body=${l}`}function OS(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function kx(e,t){const{error:r}=await Ee.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function Hv(e,t){try{const r=`${Ee.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const a=await s.json();return Array.isArray(a)&&a.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function b$(e,t){const{data:r,error:n}=await Ee.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function TS(e,t){const{error:r}=await Ee.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ja(e){const t=`${Ee.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return(await n.json()||[]).filter(a=>{const l=a.state===so,u=Array.isArray(a.tags)&&a.tags.includes(Wv);return!l&&!u})}async function oh(e){const{data:t,error:r}=await Ee.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function by(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await Ee.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function IS(e){const{error:t}=await Ee.from("features").delete().eq("id",e);if(t)throw t}function IE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function w$(e){try{const{data:t,error:r}=await Ee.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(IE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function j$(e){try{const{data:t,error:r}=await Ee.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return IE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Lo(e){const t=`${Ee.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return await n.json()||[]}async function S$(e){const{data:t}=await Ee.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ee.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ee.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function k$(e,t){const{error:r}=await Ee.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function N$(e){const{error:t}=await Ee.from("votes").delete().eq("session_id",e);if(t)throw t}async function _$(e){try{const{data:t,error:r}=await Ee.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function bl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ee.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:a,error:l}=await Ee.from("azure_devops_config").upsert([r]).select().single();if(!l)return a;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ee.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function C$(){return(await Go())[0]||null}async function E$(e){const t=await C$();if(!t)throw new Error("No session found");return AE(t.id,e)}async function DS(e,t){return AE(e,t)}async function A$(e){const{data:t,error:r}=await Ee.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function P$(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await Ee.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:so,area_path:null,tags:[Wv],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Wm(r)}async function O$(e,t){const{data:r,error:n}=await Ee.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",so).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const a={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await Ee.from("features").update({title:t.title??r.title,description:JSON.stringify(a)}).eq("id",e).eq("state",so).select("id, session_id, title, description, created_at").single();if(u)throw u;return Wm(l)}async function T$(e){const{error:t}=await Ee.from("features").delete().eq("id",e).eq("state",so);if(t)throw t}async function I$(e,t){const{data:r,error:n}=await Ee.from("features").update({session_id:t}).eq("id",e).eq("state",so).select("id, session_id, title, description, created_at").single();if(n)throw n;return Wm(r)}async function D$(e){const{data:t,error:r}=await Ee.from("features").select("*").eq("id",e).eq("state",so).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const a=Array.isArray(t.tags)?t.tags.filter(d=>d!==Wv):[],{data:l,error:u}=await Ee.from("features").update({description:s.join(`

`)||t.title,state:null,tags:a}).eq("id",e).eq("state",so).select("*").single();if(u)throw u;return l}async function $S(e){const{data:t,error:r}=await Ee.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",so).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Wm)}async function Nx(){const{data:e,error:t}=await Ee.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Wh(e){const{data:t,error:r}=await Ee.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function _x(e){const{error:t}=await Ee.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Ui(e){try{const t=`${Ee.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const $$=["dave.hoffman@newmill.com"],R$="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),M$=Array.from(new Set([...$$,...R$]));function Cx(e){return e?M$.includes(e.toLowerCase()):!1}const DE=g.createContext(void 0);function F$({children:e}){const[t,r]=g.useState(null),[n,s]=g.useState([]),[a,l]=g.useState(null),[u,d]=g.useState(!1),[m,f]=g.useState(!1),[p,x]=g.useState(!1),[v,j]=g.useState(!0),[w,S]=g.useState(!1),[_,E]=g.useState(!1),C=g.useRef(!1),T=g.useCallback(async R=>{if(_)return;const J=R||a;if(!J){s([]),r(ne=>{if(ne)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const ne=Cx(J.email);let ie;ne?ie=await Go():ie=await CE(J.id),s(ie),r(q=>{if(!q)return q;const de=ie.find(W=>W.id===q.id);if(!de){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(de.id!==q.id)return q;if(de!==q){try{localStorage.setItem("voting_system_current_session",de.id)}catch{}return de}return q})}catch(ne){console.error("Error loading sessions:",ne),s([])}finally{E(!1)}},[a,_]);g.useEffect(()=>{if(C.current)return;C.current=!0;const R=setTimeout(()=>{j(!1)},5e3);(async()=>{var ie,q;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var G,Q;try{const{data:{session:ae}}=await Ee.auth.getSession();if(ae!=null&&ae.user){const ee=ae.user.email;if(ee){const oe=((G=ae.user.user_metadata)==null?void 0:G.full_name)||((Q=ae.user.user_metadata)==null?void 0:Q.name)||ee.split("@")[0]||"User";try{const te=await Al(ee.toLowerCase(),oe);l(te),await T(te),setTimeout(()=>{if(window.location.hash){const M=window.location.pathname+window.location.search;window.history.replaceState(null,"",M)}},200)}catch(te){console.error("Error getting/creating user:",te)}}}}catch(ae){console.error("Error in OAuth callback handler:",ae)}finally{j(!1),clearTimeout(R)}},1e3);return}const{data:{session:W}}=await Ee.auth.getSession();if(W!=null&&W.user){const G=W.user.email;if(G){const Q=((ie=W.user.user_metadata)==null?void 0:ie.full_name)||((q=W.user.user_metadata)==null?void 0:q.name)||G.split("@")[0]||"User";try{const ae=await Al(G.toLowerCase(),Q);l(ae),await T(ae)}catch(ae){console.error("Error getting/creating user:",ae)}}}else{const G=localStorage.getItem("voting_system_user");if(G)try{const Q=JSON.parse(G);l(Q);try{await T(Q)}catch(ae){console.error("Error refreshing sessions:",ae)}}catch(Q){console.error("Error loading stored user:",Q),localStorage.removeItem("voting_system_user")}}}catch(de){console.error("Error checking Supabase auth:",de);const W=localStorage.getItem("voting_system_user");if(W)try{const G=JSON.parse(W);l(G)}catch(G){console.error("Error loading stored user:",G),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(j(!1),clearTimeout(R))}})();const{data:{subscription:ne}}=Ee.auth.onAuthStateChange(async(ie,q)=>{var de,W,G,Q;if(ie==="SIGNED_IN"&&(q!=null&&q.user)){const ae=q.user.email;if(ae){const ee=((de=q.user.user_metadata)==null?void 0:de.full_name)||((W=q.user.user_metadata)==null?void 0:W.name)||ae.split("@")[0]||"User",oe=await Al(ae.toLowerCase(),ee);l(oe),await T(oe),j(!1),setTimeout(()=>{if(window.location.hash){const te=window.location.pathname+window.location.search;window.history.replaceState(null,"",te)}},100)}}else if(ie==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),j(!1);else if(ie==="TOKEN_REFRESHED"&&(q!=null&&q.user)){if(!a&&q.user.email){const ae=q.user.email,ee=((G=q.user.user_metadata)==null?void 0:G.full_name)||((Q=q.user.user_metadata)==null?void 0:Q.name)||ae.split("@")[0]||"User",oe=await Al(ae.toLowerCase(),ee);l(oe),await T(oe)}j(!1)}});return()=>{ne.unsubscribe(),clearTimeout(R)}},[]),g.useEffect(()=>{(async()=>{if(!t||!a){d(!1),f(!1),S(!1);return}if(!w)try{const[J,ne]=await Promise.all([qm(t.id,a.id),Hv(t.id,a.email)]);d(J),f(ne),S(!1)}catch(J){console.error("Error checking user roles:",J),d(!1),f(!1),S(!0)}})()},[t,a,w]),g.useEffect(()=>{(async()=>{if(!a){x(!1);return}if(Cx(a.email)){x(!0);return}try{const ne=await Ui(a.id);x(ne)}catch(ne){console.error("Error checking system admin status:",ne),x(!1)}})()},[a]);const A=g.useCallback(async R=>{l(R),S(!1),R?(localStorage.setItem("voting_system_user",JSON.stringify(R)),await T(R)):(localStorage.removeItem("voting_system_user"),s([]),r(null),x(!1))},[T]),D=g.useCallback(R=>{r(R),S(!1),R?localStorage.setItem("voting_system_current_session",R.id):localStorage.removeItem("voting_system_current_session")},[]);g.useEffect(()=>{(async()=>{if(!a||n.length===0)return;const J=localStorage.getItem("voting_system_current_session");if(J){const ne=n.find(ie=>ie.id===J);ne&&r(ne)}})()},[a,n]),g.useEffect(()=>{const R=()=>{const ie=window.location.hash;if(ie==="#"||ie===""){const q=window.location.pathname+window.location.search;window.history.replaceState(null,"",q)}};R();const J=()=>{R()},ne=setInterval(R,500);return window.addEventListener("hashchange",J),()=>{clearInterval(ne),window.removeEventListener("hashchange",J)}},[]);const L={currentSession:t,sessions:n,currentUser:a,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:v,setCurrentSession:D,refreshSessions:T,setCurrentUser:A};return v?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx(DE.Provider,{value:L,children:e})}function Ia(){const e=g.useContext(DE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Kv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Zo(e,t,r,n){return new(r||(r=Promise))((function(s,a){function l(m){try{d(n.next(m))}catch(f){a(f)}}function u(m){try{d(n.throw(m))}catch(f){a(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var RS,MS,FS,Vh,LS,zS,US,Ex,BS,WS;function L$(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(RS||(RS={})),(function(e){e.M365Content="m365content"})(MS||(MS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(FS||(FS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Vh||(Vh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(LS||(LS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(zS||(zS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(US||(US={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Ex||(Ex={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(BS||(BS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(WS||(WS={}));var ur,Ax,Px,VS,qS,HS,KS,GS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(ur||(ur={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Ax||(Ax={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Px||(Px={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(VS||(VS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(qS||(qS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(HS||(HS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(KS||(KS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(GS||(GS={}));const z$={errorCode:Vh.NOT_SUPPORTED_ON_PLATFORM},U$={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var YS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let lh;const B$=new Uint8Array(16);function W$(){if(!lh&&(lh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lh(B$)}const hs=[];for(let e=0;e<256;++e)hs.push((e+256).toString(16).slice(1));function V$(e,t=0){return hs[e[t+0]]+hs[e[t+1]]+hs[e[t+2]]+hs[e[t+3]]+"-"+hs[e[t+4]]+hs[e[t+5]]+"-"+hs[e[t+6]]+hs[e[t+7]]+"-"+hs[e[t+8]]+hs[e[t+9]]+"-"+hs[e[t+10]]+hs[e[t+11]]+hs[e[t+12]]+hs[e[t+13]]+hs[e[t+14]]+hs[e[t+15]]}function q$(e,t,r){if(YS.randomUUID&&!e)return YS.randomUUID();const n=(e=e||{}).random||(e.rng||W$)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,V$(n)}var H$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function K$(e){return typeof e=="string"&&H$.test(e)}function $E(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(a){return/^\d+$/.test(a)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let a=0;a<r.length;++a)if(Number(r[a])!=Number(n[a]))return Number(r[a])>Number(n[a])?1:-1;return 0}function G$(){return q$()}function RE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&RE(e[t])})),Object.freeze(e)}function Y$(e,t,r){return new Promise(((n,s)=>{const a=setTimeout(s,t,r);e().then((l=>{clearTimeout(a),n(l)})).catch((l=>{clearTimeout(a),s(l)}))}))}function J$(e){return e.protocol==="https:"}function X$(){if(Hm())throw new Error("window object undefined at SSR check");return window}function Hm(){return typeof window>"u"}function Q$(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function Z$(e){if(!e)throw new Error("id must not be empty");if(K$(e)===!1)throw new Error("id must be a valid UUID")}const eR=!!performance&&"now"in performance;function Gv(){return eR?performance.now()+performance.timeOrigin:void 0}function JS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Ex.NotAdult})})})}let Vd=class{constructor(t=G$()){this.uuid=t,Z$(t)}toString(){return this.uuid}serialize(){return this.toString()}};const ME=e=>{const{uuid:t}=e,r=Kv(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},tR=e=>{const{uuidAsString:t}=e,r=Kv(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Vd(t):void 0})};var Ox={exports:{}},XS,QS;function rR(){if(QS)return XS;QS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,a=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return XS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var x=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return x*a;case"weeks":case"week":case"w":return x*s;case"days":case"day":case"d":return x*n;case"hours":case"hour":case"hrs":case"hr":case"h":return x*r;case"minutes":case"minute":case"mins":case"min":case"m":return x*t;case"seconds":case"second":case"secs":case"sec":case"s":return x*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var nR=function(e){function t(s){let a,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,x=Number(new Date),v=x-(a||x);p.diff=v,p.prev=a,p.curr=x,a=x,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let j=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((w,S)=>{if(w==="%%")return"%";j++;const _=t.formatters[S];if(typeof _=="function"){const E=f[j];w=_.call(p,E),f.splice(j,1),j--}return w})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,a){const l=t(this.namespace+(a===void 0?":":a)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((a=>"-"+a))].join(",");return t.enable(""),s},t.enable=function(s){let a;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((s=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(s))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(s))return!0;return!1},t.humanize=rR(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let a=0;for(let l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l),a|=0;return t.colors[Math.abs(a)%t.colors.length]},t.enable(t.load()),t},sR={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let a=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=sR.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=nR(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Ox,Ox.exports);var Yv=Ox.exports;const iR=new Vd,aR=Yv.debug.formatArgs;Yv.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${iR.toString()}]`,aR.call(this,e)};const oR=Yv.debug("teamsJs");function Da(e){return oR.extend(e)}function vn(e,t){return`${e}_${t}`}function FE(e){return/^v\d+_[\w.]+$/.test(e)}function Ho(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const lR=Da("flushMessageQueue");function LE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const a=ME(s);lR("Flushing message %s from %s message queue via postMessage.",Ho(a),n),e.postMessage(a,t)}}}var cR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const ZS="2.0.1",Ch=cR,ek=1500,uR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),dR=/^https:\/\//,kd="The library has not yet been initialized",fR="The runtime has not yet been initialized",hR="The runtime version is not supported";let Kt=class{};Kt.initializeCalled=!1,Kt.initializeCompleted=!1,Kt.additionalValidOrigins=[],Kt.initializePromise=void 0,Kt.isFramelessWindow=!1,Kt.frameContext=void 0,Kt.hostClientType=void 0,Kt.printCapabilityEnabled=!1,Kt.teamsJsInstanceId=new Vd().toString();const zE=Da("runtime"),Km=4;function UE(e){return e.apiVersion===Km}function mR(e){if(UE(e))return!0;throw e.apiVersion===-1?new Error(fR):new Error(hR)}let Ca={apiVersion:-1,supports:{}};const pR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},BE=[ur.desktop,ur.web,ur.rigel,ur.surfaceHub,ur.teamsRoomsWindows,ur.teamsRoomsAndroid,ur.teamsPhones,ur.teamsDisplays],gR=[ur.android,ur.ios,ur.ipados,ur.visionOS],tk=[...BE,...gR];function yR(e){let t=e;if(t.apiVersion<Km&&xR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),UE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const xR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Kv(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,a;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(a=e.supports.dialog)===null||a===void 0?void 0:a.update}:void 0})}}}],vR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:BE}],"1.9.0":[{capability:{location:{}},hostClientTypes:tk}],"2.0.0":[{capability:{people:{}},hostClientTypes:tk},{capability:{sharing:{}},hostClientTypes:[ur.desktop,ur.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[ur.android,ur.desktop,ur.ios,ur.teamsRoomsAndroid,ur.teamsPhones,ur.teamsDisplays,ur.web]},{capability:{webStorage:{}},hostClientTypes:[ur.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[ur.android,ur.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[ur.android,ur.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[ur.android,ur.ios,ur.ipados,ur.visionOS]}],"2.1.2":[]},wy=zE.extend("generateBackCompatRuntimeConfig");function WE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=WE(e[n]||{},t[n]));return r}function bR(e,t,r){wy("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);wy("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((a=>{$E(e,a)>=0&&r[a].forEach((l=>{Kt.hostClientType!==void 0&&l.hostClientTypes.includes(Kt.hostClientType)&&(n=WE(n,l.capability))}))}));const s={apiVersion:Km,hostVersionsInfo:U$,isLegacyTeams:!0,supports:n};return wy("Runtime config after updating based on highestSupportedVersion: %o",s),s}const jy=zE.extend("applyRuntimeConfig");function Sy(e){typeof e.apiVersion=="string"&&(jy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),jy("Fast-forwarding runtime %o",e);const t=yR(e);jy("Applying runtime %o",t),Ca=RE(t)}function wR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const qh="2.46.0";let Hh=class Fc{static storeCallbackInformation(t,r){Fc.callbackInformation.set(t,r)}static clearMessages(){Fc.callbackInformation.clear()}static deleteMessageInformation(t){Fc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?mk({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const a=Fc.callbackInformation.get(t);a&&r.monotonicTimestamp&&s?(mk({actionName:a.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:a.calledAt}),Fc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Hh.callbackInformation=new Map;const VE=Da("nestedAppAuthUtils"),jR=VE.extend("tryPolyfillWithNestedAppAuthBridge"),SR="v2";function kR(e,t,r){var n;const s=jR;if(Kt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const a=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!a||!(!((n=a.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=NR;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:x}=m,v=j=>w=>p(w,j);return{addEventListener:(j,w)=>{j==="message"?d.addEventListener(j,v(w)):f(`Event ${j} is not supported by nestedAppAuthBridge`)},postMessage:j=>{const w=(()=>{try{return JSON.parse(j)}catch{return null}})();if(!w||typeof w!="object"||w.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",j);const S=vn(SR,"nestedAppAuth.execute");x(j,S)},removeEventListener:(j,w)=>{d.removeEventListener(j,v(w))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const NR=VE.extend("createNestedAppAuthBridge");let zo=[];const Vo=Da("validateOrigin");let od;function _R(){return Zo(this,void 0,void 0,(function*(){od||(yield HE())}))}function qE(){return zo.length===0}function HE(e=!1){return Zo(this,void 0,void 0,(function*(){if(!qE()&&!e)return zo;if(od)return od;if(Hm())return zo=Ch,Ch;{Vo("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),ek);return od=fetch(uR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Vo("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(a){let l=JSON.parse(a);try{l=JSON.parse(a)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Vo("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return zo=s.validOrigins,zo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Vo(`validOrigins fetch call to CDN failed due to Timeout of ${ek} ms. Defaulting to fallback list`):Vo("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),zo=Ch,zo))),od}}))}function rk(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function CR(e,t){const r=qE()?Ch:zo;return nk(e,r)?Promise.resolve(!0):(Vo("Origin %s is not in the local valid origins list, fetching from CDN",e),HE(t).then((n=>nk(e,n))))}function nk(e,t){if(!J$(e))return Vo("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>rk(n,r))))return!0;for(const n of Kt.additionalValidOrigins)if(rk(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Vo(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Kt.additionalValidOrigins),!1}_R();const Yl=Da("communication");let mt=class{},mr=class{};function ER(e,t){if(mr.messageListener=r=>(function(n){return Zo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void sk("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,a=n.origin||n.originalEvent&&n.originalEvent.origin;return YE(s,a).then((l=>{l?((function(u,d){Kt.isFramelessWindow||mt.parentWindow&&!mt.parentWindow.closed&&u!==mt.parentWindow||(mt.parentWindow=u,mt.parentOrigin=d),mt.parentWindow&&mt.parentWindow.closed&&(mt.parentWindow=null,mt.parentOrigin=null),LE(mt.parentWindow,mt.parentOrigin,mr.parentMessageQueue,"parent")})(s,a),s!==mt.parentWindow?OM():ak(n)):sk("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,a)}))}))})(r),mt.currentWindow=mt.currentWindow||X$(),mt.parentWindow=mt.currentWindow.parent!==mt.currentWindow.self?mt.currentWindow.parent:mt.currentWindow.opener,mt.topWindow=mt.currentWindow.top,(mt.parentWindow||e)&&mt.currentWindow.addEventListener("message",mr.messageListener,!1),!mt.parentWindow){const r=mt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Kt.isFramelessWindow=!0,r.onNativeMessage=ak}try{return mt.parentOrigin="*",Gm(t,"initialize",[qh,Km,e]).then((([r,n,s,a])=>(kR(a,mt.currentWindow,{onMessage:FR,sendPostMessage:DR}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:a})))}finally{mt.parentOrigin=null}}function AR(e,t,...r){return Gm(e,t,r).then((([n])=>n))}function PR(e,t,r,...n){return Gm(e,t,n).then((([s,a])=>{if(!s)throw new Error(a||r)}))}function Gm(e,t,r=void 0){if(!FE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=GE(e,t,r);var a;n((a=s.uuid,new Promise((l=>{mr.promiseCallbacks.set(a,l)}))))}))}function OR(e){return e.map((t=>wR(t)?t.serialize():t))}function TR(e,t,r,n,s){var a;return Zo(this,void 0,void 0,(function*(){const l=OR(t),[u]=yield Gm(n,e,l);if(L$(u))throw new Error(`${u.errorCode}, message: ${(a=u.message)!==null&&a!==void 0?a:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Vh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function fa(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!FE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const a=GE(e,t,s);n&&mr.callbacks.set(a.uuid,n)}mr.parentMessageQueue=[],mr.topMessageQueue=[],mr.nextMessageId=0,mr.callbacks=new Map,mr.promiseCallbacks=new Map,mr.portCallbacks=new Map,mr.legacyMessageIdsToUuidMap={};const IR=Yl.extend("sendNestedAuthRequestToTopWindow");function DR(e,t){const r=IR,n=mt.topWindow,s=(function(a,l){const u=mr.nextMessageId++,d=new Vd;return mr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Gv(),apiVersionTag:l,args:[],data:a}})(e,t);return r("Message %s information: %o",Ho(s),{actionName:s.func}),KE(n,s)}const $R=Yl.extend("sendRequestToTargetWindowHelper");function KE(e,t){const r=$R,n=(function(a){return a===mt.topWindow&&Tx()?"top":a===mt.parentWindow?"parent":null})(e),s=ME(t);if(Kt.isFramelessWindow)mt.currentWindow&&mt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Ho(s),n),mt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const a=(function(l){return l===mt.topWindow&&Tx()?mt.topOrigin:l===mt.parentWindow?mt.parentOrigin:null})(e);e&&a?(r("Sending message %s to %s via postMessage",Ho(s),n),e.postMessage(s,a)):(r("Adding message %s to %s message queue",Ho(s),n),LR(e).push(t))}return t}const RR=Yl.extend("sendMessageToParentHelper");function GE(e,t,r,n,s){const a=RR,l=mt.parentWindow,u=(function(d,m,f,p,x){const v=mr.nextMessageId++,j=new Vd;mr.legacyMessageIdsToUuidMap[v]=j;const w=Kt.teamsJsInstanceId;return{id:v,uuid:j,func:m,timestamp:Date.now(),monotonicTimestamp:Gv(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:w}})(e,t,r,n);return Hh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),a("Message %s information: %o",Ho(u),{actionName:t,args:r}),KE(l,u)}const sk=Yl.extend("processIncomingMessage"),MR=Yl.extend("processAuthBridgeMessage");function FR(e,t){var r,n;const s=MR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:a}=e.data,[,l]=a??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?YE(d,m)?(mt.topWindow&&!mt.topWindow.closed&&d!==mt.topWindow||(mt.topWindow=d,mt.topOrigin=m),mt.topWindow&&mt.topWindow.closed&&(mt.topWindow=null,mt.topOrigin=null),LE(mt.topWindow,mt.topOrigin,mr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const ky=Yl.extend("shouldProcessIncomingMessage");function YE(e,t){return Zo(this,void 0,void 0,(function*(){if(mt.currentWindow&&e===mt.currentWindow)return ky("Should not process message because it is coming from the current window"),!1;if(mt.currentWindow&&mt.currentWindow.location&&t&&t===mt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return ky("Message has an invalid origin of %s",t),!1}const n=yield CR(r);return n||ky("Message has an invalid origin of %s",t),n}}))}const ik=Yl.extend("handleIncomingMessageFromParent");function Eh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Ny(e,t){const r=Eh(t,e.uuid);r&&t.delete(r),e.uuid?mr.legacyMessageIdsToUuidMap={}:delete mr.legacyMessageIdsToUuidMap[e.id]}function ak(e){const t=ik,r=Gv();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=tR(n),a=(function(l){const u=ik;if(!l.uuid)return mr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Eh(mr.callbacks,d);if(m)return m;const f=Eh(mr.promiseCallbacks,d);if(f)return f;const p=Eh(mr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Ho(l))})(s);if(a){const l=mr.callbacks.get(a);t("Received a response from parent for message %s",a.toString()),Hh.handlePerformanceMetrics(a,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",a.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",a.toString()),Ny(s,mr.callbacks)));const u=mr.promiseCallbacks.get(a);u&&(t("Invoking the registered promise callback for message %s with arguments %o",a.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",a.toString()),Ny(s,mr.promiseCallbacks));const d=mr.portCallbacks.get(a);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",a.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",a.toString()),Ny(s,mr.portCallbacks)}s.uuid&&(mr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Hh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Ho(n),n.func),kM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Tx(){return mt.topWindow!==mt.parentWindow}function LR(e){return e===mt.topWindow&&Tx()?mr.topMessageQueue:e===mt.parentWindow?mr.parentMessageQueue:[]}const JE=Da("internal"),zR=JE.extend("ensureInitializeCalled"),UR=JE.extend("ensureInitialized");function XE(){if(!Kt.initializeCalled)throw zR(kd),new Error(kd)}function uu(e,...t){if(!Kt.initializeCompleted)throw UR("%s. initializeCalled: %s",kd,Kt.initializeCalled.toString()),new Error(kd);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Kt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Kt.frameContext}".`)}return mR(e)}function BR(e){let t=Kt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&dR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Kt.additionalValidOrigins=t}function WR(e){if(!qR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${QE}-${ZE}).`)}function VR(e){if(Q$(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(HR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const QE=4,ZE=256;function qR(e){return e.length<ZE&&e.length>QE}function HR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let KR=class{constructor(t){this.idAsString=t,VR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},GR=class extends KR{constructor(t){super(t),WR(t)}toJSON(){return{appIdAsString:this.toString()}}};function eA(e){return e==null}const Ym="v2",_y=Da("app"),ok={Success:"appInitialization.success"};var lk,ck;function YR(e){return mM(vn(Ym,"app.initialize"),e)}function JR(){return new Promise((e=>{XE(),e(AR(vn(Ym,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Ax.teams,clientType:t.hostClientType?t.hostClientType:ur.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new GR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Kt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function XR(){return pM(vn(Ym,"app.notifySuccess"))}function QR(e){gM(vn(Ym,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(lk||(lk={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(ck||(ck={})),_y("teamsjs instance is version %s, starting at %s UTC (%s local)",qh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Hm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?_y("teamsjs is being used from %s. %s",t,r):_y("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const ZR="v2",eM=[];function tM(e){Kt.frameContext&&(Kt.frameContext===Px.task?eM.push(e):NM("messageForChild"))}function rM(){Dl(vn(ZR,"dialog.registerMessageForChildHandler"),"messageForChild",tM,!1)}const Vc="v2";var uk,dk;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(uk||(uk={}));function nM(){Dl(vn(Vc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",iM,!1),Dl(vn(Vc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",aM,!1),Dl(vn(Vc,"menus.registerSetModuleViewHandler"),"setModuleView",sM,!1)}function sM(e){uu(Ca),fa(vn(Vc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function iM(e){uu(Ca),fa(vn(Vc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function aM(e){uu(Ca),fa(vn(Vc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(dk||(dk={}));class oM{}let lM=class extends oM{validate(t){return!0}deserialize(t){return t}};function cM(){Dl(vn(zl,"pages.config.registerSettingsSaveHandler"),"settings.save",uM,!1),Dl(vn(zl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",fM,!1)}function uM(e){new dM(e).notifySuccess()}let dM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),fa(vn(zl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),fa(vn(zl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function fM(){new hM().notifySuccess()}let hM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),fa(vn(zl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),fa(vn(zl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const tA=Da("app");function mM(e,t){return Hm()?(tA.extend("initialize")("window object undefined at initialization"),Promise.resolve()):Y$((()=>(function(r,n){return new Promise((s=>{Kt.initializeCalled||(Kt.initializeCalled=!0,SM(),Kt.initializePromise=ER(n,r).then((({context:a,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=ZS})=>{Kt.frameContext=a,Kt.hostClientType=l,Kt.clientSupportedSDKVersion=d;try{Gu("Parsing %s",u);let m=JSON.parse(u);if(Gu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=JS(m),u&&Sy(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Gu("Attempting to parse %s as an SDK version",u),isNaN($E(u,ZS))||(Kt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Gu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=JS(f),Sy(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Sy(bR(Kt.clientSupportedSDKVersion,pR,vR))}}Kt.initializeCompleted=!0})),nM(),cM(),rM()),Array.isArray(n)&&BR(n),Kt.initializePromise!==void 0?s(Kt.initializePromise):Gu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function pM(e){return Zo(this,void 0,void 0,(function*(){if(Kt.initializeCompleted)return fk(e);if(!Kt.initializePromise)throw new Error(kd);return Kt.initializePromise.then((()=>fk(e)))}))}function fk(e){return Zo(this,void 0,void 0,(function*(){return uu(Ca)&&(!((t=Ca.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?TR(ok.Success,[qh],new lM,e).then((()=>({hasFinishedSuccessfully:!0}))):(fa(e,ok.Success,[qh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Gu=tA.extend("initializeHelper");function gM(e,t){!eA(t)&&XE(),_M(e,t)}function yM(){return vM(vn(zl,"pages.backStack.navigateBack"))}function xM(){return!(!uu(Ca)||!Ca.supports.pages)&&!!Ca.supports.pages.backStack}const zl="v2";function vM(e){return new Promise((t=>{if(uu(Ca),!xM())throw z$;t(PR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function bM(){Dl(vn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",wM,!1)}function wM(){yM()}const jM=Da("handlers");let qr=class Sa{static initializeHandlers(){Sa.handlers.themeChange=CM,Sa.handlers.load=EM,Sa.handlers.beforeUnload=AM,bM()}static uninitializeHandlers(){Sa.handlers={},Sa.themeChangeHandler=null,Sa.loadHandler=null,Sa.beforeUnloadHandler=null,Sa.beforeSuspendOrTerminateHandler=null,Sa.resumeHandler=null}};function SM(){qr.initializeHandlers()}qr.handlers={},qr.themeChangeHandler=null,qr.loadHandler=null,qr.beforeUnloadHandler=null,qr.beforeSuspendOrTerminateHandler=null,qr.resumeHandler=null,qr.hostToAppPerformanceMetricsHandler=null;const hk=jM.extend("callHandler");function kM(e,t){const r=qr.handlers[e];return r?(hk("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(hk("Handler for action message %s not found.",e),[!1,void 0])}function Dl(e,t,r,n=!0,s=[]){r?(qr.handlers[t]=r,n&&fa(e,"registerHandler",[t,...s])):delete qr.handlers[t]}function NM(e){delete qr.handlers[e]}function _M(e,t){qr.themeChangeHandler=t,!eA(t)&&fa(e,"registerHandler",["themeChange"])}function CM(e){qr.themeChangeHandler&&qr.themeChangeHandler(e)}function mk(e){qr.hostToAppPerformanceMetricsHandler&&qr.hostToAppPerformanceMetricsHandler(e)}function EM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;qr.resumeHandler?(qr.resumeHandler(t),pk()):qr.loadHandler&&(qr.loadHandler(e),pk())}function AM(){return Zo(this,void 0,void 0,(function*(){const e=()=>{fa(vn("v2","handleBeforeUnload"),"readyToUnload",[])};qr.beforeSuspendOrTerminateHandler?(yield qr.beforeSuspendOrTerminateHandler(),e()):qr.beforeUnloadHandler&&qr.beforeUnloadHandler(e)||e()}))}const PM=Da("childProxyingCommunication");function pk(){return!1}function OM(e,t){return!1}PM.extend("handleIncomingMessageFromChild");const TM=g.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),IM=({children:e})=>{const[t,r]=g.useState(!1),[n,s]=g.useState(null),[a,l]=g.useState(!1),[u,d]=g.useState(null);return g.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await YR();const x=await JR();console.log(" Teams context:",x),r(!0),s(x),d(x.app.theme),QR(v=>{d(v)}),XR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),i.jsx(TM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:a,teamsTheme:u},children:e})},DM="service_idsx5cg",$M="template_4owif48",RM="OXfL2jaTJuDR5IThS";async function Yo(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:DM,template_id:$M,user_id:RM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let a=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?a=l.text:l.message?a=l.message:l.error&&(a=l.error)}catch{a=s||a}throw new Error(a)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),gk=e=>{const t=FM(e);return t.charAt(0).toUpperCase()+t.slice(1)},rA=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),LM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},d)=>g.createElement("svg",{ref:d,...zM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:rA("lucide",s),...!a&&!LM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>g.createElement(m,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(e,t)=>{const r=g.forwardRef(({className:n,...s},a)=>g.createElement(UM,{ref:a,iconNode:t,className:rA(`lucide-${MM(gk(e))}`,`lucide-${e}`,n),...s}));return r.displayName=gk(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yk=$t("arrow-left",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],VM=$t("arrow-right",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ix=$t("badge-check",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],on=$t("calendar",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ah=$t("chart-no-axes-column",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ts=$t("chevron-down",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Jm=$t("chevron-left",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],XM=$t("chevron-up",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ir=$t("circle-alert",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kr=$t("circle-check-big",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xm=$t("clock",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],$n=$t("crown",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],nF=$t("database",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xk=$t("ellipsis-vertical",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],aF=$t("funnel-x",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lF=$t("funnel",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ld=$t("info",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Jv=$t("lightbulb",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],mi=$t("list",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hF=$t("lock",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ns=$t("log-out",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],du=$t("mail",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M5 12h14",key:"1ays0h"}]],zc=$t("minus",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Cl=$t("paperclip",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Kh=$t("pencil",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yn=$t("plus",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ul=$t("refresh-cw",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vk=$t("search",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rs=$t("settings",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bk=$t("shield-check",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Yr=$t("shield",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],_F=$t("shuffle",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Pc=$t("sparkles",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nd=$t("square-check-big",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yd=$t("square-pen",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],_d=$t("square",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Oc=$t("star",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],IF=$t("tag",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ha=$t("trash-2",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],RF=$t("triangle-alert",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Xv=$t("trophy",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$l=$t("user-plus",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Yu=$t("user-x",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ms=$t("user",zF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mn=$t("users",UF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Zn=$t("vote",BF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],VF=$t("workflow",WF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Es=$t("x",qF),wi="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",HF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var qd=e=>e.type==="checkbox",Pl=e=>e instanceof Date,Qs=e=>e==null;const nA=e=>typeof e=="object";var Cn=e=>!Qs(e)&&!Array.isArray(e)&&nA(e)&&!Pl(e),sA=e=>Cn(e)&&e.target?qd(e.target)?e.target.checked:e.target.value:e,KF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,iA=(e,t)=>e.has(KF(t)),GF=e=>{const t=e.constructor&&e.constructor.prototype;return Cn(t)&&t.hasOwnProperty("isPrototypeOf")},Qv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Qv&&(e instanceof Blob||n))&&(r||Cn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!GF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Dn(e[s]));else return e;return t}var Qm=e=>/^\w*$/.test(e),ln=e=>e===void 0,Zv=e=>Array.isArray(e)?e.filter(Boolean):[],eb=e=>Zv(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Xe=(e,t,r)=>{if(!t||!Cn(e))return r;const n=(Qm(t)?[t]:eb(t)).reduce((s,a)=>Qs(s)?s:s[a],e);return ln(n)||n===e?ln(e[t])?r:e[t]:n},fi=e=>typeof e=="boolean",Dr=(e,t,r)=>{let n=-1;const s=Qm(t)?[t]:eb(t),a=s.length,l=a-1;for(;++n<a;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Cn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Gh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},oa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ha={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},aA=jt.createContext(null);aA.displayName="HookFormContext";const tb=()=>jt.useContext(aA);var oA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const l=a;return t._proxyFormState[l]!==oa.all&&(t._proxyFormState[l]=!n||oa.all),r&&(r[l]=!0),e[l]}});return s};const rb=typeof window<"u"?jt.useLayoutEffect:jt.useEffect;function YF(e){const t=tb(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[l,u]=jt.useState(r._formState),d=jt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return rb(()=>r._subscribe({name:s,formState:d.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,a]),jt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),jt.useMemo(()=>oA(l,r,d.current,!1),[l,r])}var pi=e=>typeof e=="string",Dx=(e,t,r,n,s)=>pi(e)?(n&&t.watch.add(e),Xe(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Xe(r,a))):(n&&(t.watchAll=!0),r),$x=e=>Qs(e)||!nA(e);function la(e,t,r=new WeakSet){if($x(e)||$x(t))return e===t;if(Pl(e)&&Pl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const u=t[a];if(Pl(l)&&Pl(u)||Cn(l)&&Cn(u)||Array.isArray(l)&&Array.isArray(u)?!la(l,u,r):l!==u)return!1}}return!0}function JF(e){const t=tb(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:l,compute:u}=e||{},d=jt.useRef(s),m=jt.useRef(u),f=jt.useRef(void 0),p=jt.useRef(r),x=jt.useRef(n);m.current=u;const[v,j]=jt.useState(()=>{const T=r._getWatch(n,d.current);return m.current?m.current(T):T}),w=jt.useCallback(T=>{const A=Dx(n,r._names,T||r._formValues,!1,d.current);return m.current?m.current(A):A},[r._formValues,r._names,n]),S=jt.useCallback(T=>{if(!a){const A=Dx(n,r._names,T||r._formValues,!1,d.current);if(m.current){const D=m.current(A);la(D,f.current)||(j(D),f.current=D)}else j(A)}},[r._formValues,r._names,a,n]);rb(()=>((p.current!==r||!la(x.current,n))&&(p.current=r,x.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:T=>{S(T.values)}})),[r,l,n,S]),jt.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=x.current,C=jt.useMemo(()=>{if(a)return null;const T=!_&&!la(E,n);return _||T?w():null},[a,_,n,E,w]);return C!==null?C:v}function XF(e){const t=tb(),{name:r,disabled:n,control:s=t.control,shouldUnregister:a,defaultValue:l}=e,u=iA(s._names.array,r),d=jt.useMemo(()=>Xe(s._formValues,r,Xe(s._defaultValues,r,l)),[s,r,l]),m=JF({control:s,name:r,defaultValue:d,exact:!0}),f=YF({control:s,name:r,exact:!0}),p=jt.useRef(e),x=jt.useRef(void 0),v=jt.useRef(s.register(r,{...e.rules,value:m,...fi(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=jt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Xe(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Xe(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Xe(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Xe(f.validatingFields,r)},error:{enumerable:!0,get:()=>Xe(f.errors,r)}}),[f,r]),w=jt.useCallback(C=>v.current.onChange({target:{value:sA(C),name:r},type:Gh.CHANGE}),[r]),S=jt.useCallback(()=>v.current.onBlur({target:{value:Xe(s._formValues,r),name:r},type:Gh.BLUR}),[r,s._formValues]),_=jt.useCallback(C=>{const T=Xe(s._fields,r);T&&C&&(T._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:A=>C.setCustomValidity(A),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=jt.useMemo(()=>({name:r,value:m,...fi(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:w,onBlur:S,ref:_}),[r,n,f.disabled,w,S,_,m]);return jt.useEffect(()=>{const C=s._options.shouldUnregister||a,T=x.current;T&&T!==r&&!u&&s.unregister(T),s.register(r,{...p.current.rules,...fi(p.current.disabled)?{disabled:p.current.disabled}:{}});const A=(D,L)=>{const R=Xe(s._fields,D);R&&R._f&&(R._f.mount=L)};if(A(r,!0),C){const D=Dn(Xe(s._options.defaultValues,r,p.current.defaultValue));Dr(s._defaultValues,r,D),ln(Xe(s._formValues,r))&&Dr(s._formValues,r,D)}return!u&&s.register(r),x.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):A(r,!1)}},[r,s,u,a]),jt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),jt.useMemo(()=>({field:E,formState:f,fieldState:j}),[E,f,j])}const cd=e=>e.render(XF(e));var QF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},xd=e=>Array.isArray(e)?e:[e],wk=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function lA(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&Cn(s)&&a){const l=lA(s,a);Cn(l)&&(r[n]=l)}else e[n]&&(r[n]=a)}return r}var $s=e=>Cn(e)&&!Object.keys(e).length,nb=e=>e.type==="file",ca=e=>typeof e=="function",Yh=e=>{if(!Qv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cA=e=>e.type==="select-multiple",sb=e=>e.type==="radio",ZF=e=>sb(e)||qd(e),Cy=e=>Yh(e)&&e.isConnected;function eL(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ln(e)?n++:e[t[n++]];return e}function tL(e){for(const t in e)if(e.hasOwnProperty(t)&&!ln(e[t]))return!1;return!0}function Sn(e,t){const r=Array.isArray(t)?t:Qm(t)?[t]:eb(t),n=r.length===1?e:eL(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(Cn(n)&&$s(n)||Array.isArray(n)&&tL(n))&&Sn(e,r.slice(0,-1)),e}var rL=e=>{for(const t in e)if(ca(e[t]))return!0;return!1};function uA(e){return Array.isArray(e)||Cn(e)&&!rL(e)}function Rx(e,t={}){for(const r in e)uA(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Rx(e[r],t[r])):ln(e[r])||(t[r]=!0);return t}function Lc(e,t,r){r||(r=Rx(t));for(const n in e)uA(e[n])?ln(t)||$x(r[n])?r[n]=Rx(e[n],Array.isArray(e[n])?[]:{}):Lc(e[n],Qs(t)?{}:t[n],r[n]):r[n]=!la(e[n],t[n]);return r}const jk={value:!1,isValid:!1},Sk={value:!0,isValid:!0};var dA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ln(e[0].attributes.value)?ln(e[0].value)||e[0].value===""?Sk:{value:e[0].value,isValid:!0}:Sk:jk}return jk},fA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ln(e)?e:t?e===""?NaN:e&&+e:r&&pi(e)?new Date(e):n?n(e):e;const kk={isValid:!1,value:null};var hA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,kk):kk;function Nk(e){const t=e.ref;return nb(t)?t.files:sb(t)?hA(e.refs).value:cA(t)?[...t.selectedOptions].map(({value:r})=>r):qd(t)?dA(e.refs).value:fA(ln(t.value)?e.ref.value:t.value,e)}var nL=(e,t,r,n)=>{const s={};for(const a of e){const l=Xe(t,a);l&&Dr(s,a,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Jh=e=>e instanceof RegExp,Ju=e=>ln(e)?e:Jh(e)?e.source:Cn(e)?Jh(e.value)?e.value.source:e.value:e,_k=e=>({isOnSubmit:!e||e===oa.onSubmit,isOnBlur:e===oa.onBlur,isOnChange:e===oa.onChange,isOnAll:e===oa.all,isOnTouch:e===oa.onTouched});const Ck="AsyncFunction";var sL=e=>!!e&&!!e.validate&&!!(ca(e.validate)&&e.validate.constructor.name===Ck||Cn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ck)),iL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ek=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const vd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=Xe(e,s);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(vd(u,t))break}else if(Cn(u)&&vd(u,t))break}}};function Ak(e,t,r){const n=Xe(e,r);if(n||Qm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),l=Xe(t,a),u=Xe(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};s.pop()}return{name:r}}var aL=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return $s(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||oa.all))},oL=(e,t,r)=>!e||!t||e===t||xd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),lL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,cL=(e,t)=>!Zv(Xe(e,t)).length&&Sn(e,t),uL=(e,t,r)=>{const n=xd(Xe(e,r));return Dr(n,"root",t[r]),Dr(e,r,n),e};function Pk(e,t,r="validate"){if(pi(e)||Array.isArray(e)&&e.every(pi)||fi(e)&&!e)return{type:r,message:pi(e)?e:"",ref:t}}var Tc=e=>Cn(e)&&!Jh(e)?e:{value:e,message:""},Ok=async(e,t,r,n,s,a)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:x,pattern:v,validate:j,name:w,valueAsNumber:S,mount:_}=e._f,E=Xe(r,w);if(!_||t.has(w))return{};const C=u?u[0]:l,T=q=>{s&&C.reportValidity&&(C.setCustomValidity(fi(q)?"":q||""),C.reportValidity())},A={},D=sb(l),L=qd(l),R=D||L,J=(S||nb(l))&&ln(l.value)&&ln(E)||Yh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,ne=QF.bind(null,w,n,A),ie=(q,de,W,G=Ha.maxLength,Q=Ha.minLength)=>{const ae=q?de:W;A[w]={type:q?G:Q,message:ae,ref:l,...ne(q?G:Q,ae)}};if(a?!Array.isArray(E)||!E.length:d&&(!R&&(J||Qs(E))||fi(E)&&!E||L&&!dA(u).isValid||D&&!hA(u).isValid)){const{value:q,message:de}=pi(d)?{value:!!d,message:d}:Tc(d);if(q&&(A[w]={type:Ha.required,message:de,ref:C,...ne(Ha.required,de)},!n))return T(de),A}if(!J&&(!Qs(p)||!Qs(x))){let q,de;const W=Tc(x),G=Tc(p);if(!Qs(E)&&!isNaN(E)){const Q=l.valueAsNumber||E&&+E;Qs(W.value)||(q=Q>W.value),Qs(G.value)||(de=Q<G.value)}else{const Q=l.valueAsDate||new Date(E),ae=te=>new Date(new Date().toDateString()+" "+te),ee=l.type=="time",oe=l.type=="week";pi(W.value)&&E&&(q=ee?ae(E)>ae(W.value):oe?E>W.value:Q>new Date(W.value)),pi(G.value)&&E&&(de=ee?ae(E)<ae(G.value):oe?E<G.value:Q<new Date(G.value))}if((q||de)&&(ie(!!q,W.message,G.message,Ha.max,Ha.min),!n))return T(A[w].message),A}if((m||f)&&!J&&(pi(E)||a&&Array.isArray(E))){const q=Tc(m),de=Tc(f),W=!Qs(q.value)&&E.length>+q.value,G=!Qs(de.value)&&E.length<+de.value;if((W||G)&&(ie(W,q.message,de.message),!n))return T(A[w].message),A}if(v&&!J&&pi(E)){const{value:q,message:de}=Tc(v);if(Jh(q)&&!E.match(q)&&(A[w]={type:Ha.pattern,message:de,ref:l,...ne(Ha.pattern,de)},!n))return T(de),A}if(j){if(ca(j)){const q=await j(E,r),de=Pk(q,C);if(de&&(A[w]={...de,...ne(Ha.validate,de.message)},!n))return T(de.message),A}else if(Cn(j)){let q={};for(const de in j){if(!$s(q)&&!n)break;const W=Pk(await j[de](E,r),C,de);W&&(q={...W,...ne(de,W.message)},T(W.message),n&&(A[w]=q))}if(!$s(q)&&(A[w]={ref:C,...q},!n))return A}}return T(!0),A};const dL={mode:oa.onSubmit,reValidateMode:oa.onChange,shouldFocusError:!0};function fL(e={}){let t={...dL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ca(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Cn(t.defaultValues)||Cn(t.values)?Dn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Dn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const x={array:wk(),state:wk()},v=t.criteriaMode===oa.all,j=z=>V=>{clearTimeout(m),m=setTimeout(z,V)},w=async z=>{if(!t.disabled&&(f.isValid||p.isValid||z)){const V=t.resolver?$s((await L()).errors):await J(n,!0);V!==r.isValid&&x.state.next({isValid:V})}},S=(z,V)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((z||Array.from(u.mount)).forEach(Z=>{Z&&(V?Dr(r.validatingFields,Z,V):Sn(r.validatingFields,Z))}),x.state.next({validatingFields:r.validatingFields,isValidating:!$s(r.validatingFields)}))},_=(z,V=[],Z,Ne,Oe=!0,_e=!0)=>{if(Ne&&Z&&!t.disabled){if(l.action=!0,_e&&Array.isArray(Xe(n,z))){const Te=Z(Xe(n,z),Ne.argA,Ne.argB);Oe&&Dr(n,z,Te)}if(_e&&Array.isArray(Xe(r.errors,z))){const Te=Z(Xe(r.errors,z),Ne.argA,Ne.argB);Oe&&Dr(r.errors,z,Te),cL(r.errors,z)}if((f.touchedFields||p.touchedFields)&&_e&&Array.isArray(Xe(r.touchedFields,z))){const Te=Z(Xe(r.touchedFields,z),Ne.argA,Ne.argB);Oe&&Dr(r.touchedFields,z,Te)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Lc(s,a)),x.state.next({name:z,isDirty:ie(z,V),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Dr(a,z,V)},E=(z,V)=>{Dr(r.errors,z,V),x.state.next({errors:r.errors})},C=z=>{r.errors=z,x.state.next({errors:r.errors,isValid:!1})},T=(z,V,Z,Ne)=>{const Oe=Xe(n,z);if(Oe){const _e=Xe(a,z,ln(Z)?Xe(s,z):Z);ln(_e)||Ne&&Ne.defaultChecked||V?Dr(a,z,V?_e:Nk(Oe._f)):W(z,_e),l.mount&&w()}},A=(z,V,Z,Ne,Oe)=>{let _e=!1,Te=!1;const ut={name:z};if(!t.disabled){if(!Z||Ne){(f.isDirty||p.isDirty)&&(Te=r.isDirty,r.isDirty=ut.isDirty=ie(),_e=Te!==ut.isDirty);const Dt=la(Xe(s,z),V);Te=!!Xe(r.dirtyFields,z),Dt?Sn(r.dirtyFields,z):Dr(r.dirtyFields,z,!0),ut.dirtyFields=r.dirtyFields,_e=_e||(f.dirtyFields||p.dirtyFields)&&Te!==!Dt}if(Z){const Dt=Xe(r.touchedFields,z);Dt||(Dr(r.touchedFields,z,Z),ut.touchedFields=r.touchedFields,_e=_e||(f.touchedFields||p.touchedFields)&&Dt!==Z)}_e&&Oe&&x.state.next(ut)}return _e?ut:{}},D=(z,V,Z,Ne)=>{const Oe=Xe(r.errors,z),_e=(f.isValid||p.isValid)&&fi(V)&&r.isValid!==V;if(t.delayError&&Z?(d=j(()=>E(z,Z)),d(t.delayError)):(clearTimeout(m),d=null,Z?Dr(r.errors,z,Z):Sn(r.errors,z)),(Z?!la(Oe,Z):Oe)||!$s(Ne)||_e){const Te={...Ne,..._e&&fi(V)?{isValid:V}:{},errors:r.errors,name:z};r={...r,...Te},x.state.next(Te)}},L=async z=>{S(z,!0);const V=await t.resolver(a,t.context,nL(z||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(z),V},R=async z=>{const{errors:V}=await L(z);if(z)for(const Z of z){const Ne=Xe(V,Z);Ne?Dr(r.errors,Z,Ne):Sn(r.errors,Z)}else r.errors=V;return V},J=async(z,V,Z={valid:!0})=>{for(const Ne in z){const Oe=z[Ne];if(Oe){const{_f:_e,...Te}=Oe;if(_e){const ut=u.array.has(_e.name),Dt=Oe._f&&sL(Oe._f);Dt&&f.validatingFields&&S([_e.name],!0);const Ve=await Ok(Oe,u.disabled,a,v,t.shouldUseNativeValidation&&!V,ut);if(Dt&&f.validatingFields&&S([_e.name]),Ve[_e.name]&&(Z.valid=!1,V))break;!V&&(Xe(Ve,_e.name)?ut?uL(r.errors,Ve,_e.name):Dr(r.errors,_e.name,Ve[_e.name]):Sn(r.errors,_e.name))}!$s(Te)&&await J(Te,V,Z)}}return Z.valid},ne=()=>{for(const z of u.unMount){const V=Xe(n,z);V&&(V._f.refs?V._f.refs.every(Z=>!Cy(Z)):!Cy(V._f.ref))&&Re(z)}u.unMount=new Set},ie=(z,V)=>!t.disabled&&(z&&V&&Dr(a,z,V),!la(te(),s)),q=(z,V,Z)=>Dx(z,u,{...l.mount?a:ln(V)?s:pi(z)?{[z]:V}:V},Z,V),de=z=>Zv(Xe(l.mount?a:s,z,t.shouldUnregister?Xe(s,z,[]):[])),W=(z,V,Z={})=>{const Ne=Xe(n,z);let Oe=V;if(Ne){const _e=Ne._f;_e&&(!_e.disabled&&Dr(a,z,fA(V,_e)),Oe=Yh(_e.ref)&&Qs(V)?"":V,cA(_e.ref)?[..._e.ref.options].forEach(Te=>Te.selected=Oe.includes(Te.value)):_e.refs?qd(_e.ref)?_e.refs.forEach(Te=>{(!Te.defaultChecked||!Te.disabled)&&(Array.isArray(Oe)?Te.checked=!!Oe.find(ut=>ut===Te.value):Te.checked=Oe===Te.value||!!Oe)}):_e.refs.forEach(Te=>Te.checked=Te.value===Oe):nb(_e.ref)?_e.ref.value="":(_e.ref.value=Oe,_e.ref.type||x.state.next({name:z,values:Dn(a)})))}(Z.shouldDirty||Z.shouldTouch)&&A(z,Oe,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&oe(z)},G=(z,V,Z)=>{for(const Ne in V){if(!V.hasOwnProperty(Ne))return;const Oe=V[Ne],_e=z+"."+Ne,Te=Xe(n,_e);(u.array.has(z)||Cn(Oe)||Te&&!Te._f)&&!Pl(Oe)?G(_e,Oe,Z):W(_e,Oe,Z)}},Q=(z,V,Z={})=>{const Ne=Xe(n,z),Oe=u.array.has(z),_e=Dn(V);Dr(a,z,_e),Oe?(x.array.next({name:z,values:Dn(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&Z.shouldDirty&&x.state.next({name:z,dirtyFields:Lc(s,a),isDirty:ie(z,_e)})):Ne&&!Ne._f&&!Qs(_e)?G(z,_e,Z):W(z,_e,Z),Ek(z,u)&&x.state.next({...r,name:z}),x.state.next({name:l.mount?z:void 0,values:Dn(a)})},ae=async z=>{l.mount=!0;const V=z.target;let Z=V.name,Ne=!0;const Oe=Xe(n,Z),_e=Dt=>{Ne=Number.isNaN(Dt)||Pl(Dt)&&isNaN(Dt.getTime())||la(Dt,Xe(a,Z,Dt))},Te=_k(t.mode),ut=_k(t.reValidateMode);if(Oe){let Dt,Ve;const gt=V.type?Nk(Oe._f):sA(z),xt=z.type===Gh.BLUR||z.type===Gh.FOCUS_OUT,Le=!iL(Oe._f)&&!t.resolver&&!Xe(r.errors,Z)&&!Oe._f.deps||lL(xt,Xe(r.touchedFields,Z),r.isSubmitted,ut,Te),He=Ek(Z,u,xt);Dr(a,Z,gt),xt?(!V||!V.readOnly)&&(Oe._f.onBlur&&Oe._f.onBlur(z),d&&d(0)):Oe._f.onChange&&Oe._f.onChange(z);const et=A(Z,gt,xt),vt=!$s(et)||He;if(!xt&&x.state.next({name:Z,type:z.type,values:Dn(a)}),Le)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?xt&&w():xt||w()),vt&&x.state.next({name:Z,...He?{}:et});if(!xt&&He&&x.state.next({...r}),t.resolver){const{errors:ct}=await L([Z]);if(_e(gt),Ne){const Ht=Ak(r.errors,n,Z),ar=Ak(ct,n,Ht.name||Z);Dt=ar.error,Z=ar.name,Ve=$s(ct)}}else S([Z],!0),Dt=(await Ok(Oe,u.disabled,a,v,t.shouldUseNativeValidation))[Z],S([Z]),_e(gt),Ne&&(Dt?Ve=!1:(f.isValid||p.isValid)&&(Ve=await J(n,!0)));Ne&&(Oe._f.deps&&(!Array.isArray(Oe._f.deps)||Oe._f.deps.length>0)&&oe(Oe._f.deps),D(Z,Ve,Dt,et))}},ee=(z,V)=>{if(Xe(r.errors,V)&&z.focus)return z.focus(),1},oe=async(z,V={})=>{let Z,Ne;const Oe=xd(z);if(t.resolver){const _e=await R(ln(z)?z:Oe);Z=$s(_e),Ne=z?!Oe.some(Te=>Xe(_e,Te)):Z}else z?(Ne=(await Promise.all(Oe.map(async _e=>{const Te=Xe(n,_e);return await J(Te&&Te._f?{[_e]:Te}:Te)}))).every(Boolean),!(!Ne&&!r.isValid)&&w()):Ne=Z=await J(n);return x.state.next({...!pi(z)||(f.isValid||p.isValid)&&Z!==r.isValid?{}:{name:z},...t.resolver||!z?{isValid:Z}:{},errors:r.errors}),V.shouldFocus&&!Ne&&vd(n,ee,z?Oe:u.mount),Ne},te=(z,V)=>{let Z={...l.mount?a:s};return V&&(Z=lA(V.dirtyFields?r.dirtyFields:r.touchedFields,Z)),ln(z)?Z:pi(z)?Xe(Z,z):z.map(Ne=>Xe(Z,Ne))},M=(z,V)=>({invalid:!!Xe((V||r).errors,z),isDirty:!!Xe((V||r).dirtyFields,z),error:Xe((V||r).errors,z),isValidating:!!Xe(r.validatingFields,z),isTouched:!!Xe((V||r).touchedFields,z)}),X=z=>{z&&xd(z).forEach(V=>Sn(r.errors,V)),x.state.next({errors:z?r.errors:{}})},me=(z,V,Z)=>{const Ne=(Xe(n,z,{_f:{}})._f||{}).ref,Oe=Xe(r.errors,z)||{},{ref:_e,message:Te,type:ut,...Dt}=Oe;Dr(r.errors,z,{...Dt,...V,ref:Ne}),x.state.next({name:z,errors:r.errors,isValid:!1}),Z&&Z.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},xe=(z,V)=>ca(z)?x.state.subscribe({next:Z=>"values"in Z&&z(q(void 0,V),Z)}):q(z,V,!0),Fe=z=>x.state.subscribe({next:V=>{oL(z.name,V.name,z.exact)&&aL(V,z.formState||f,pt,z.reRenderRoot)&&z.callback({values:{...a},...r,...V,defaultValues:s})}}).unsubscribe,Se=z=>(l.mount=!0,p={...p,...z.formState},Fe({...z,formState:p})),Re=(z,V={})=>{for(const Z of z?xd(z):u.mount)u.mount.delete(Z),u.array.delete(Z),V.keepValue||(Sn(n,Z),Sn(a,Z)),!V.keepError&&Sn(r.errors,Z),!V.keepDirty&&Sn(r.dirtyFields,Z),!V.keepTouched&&Sn(r.touchedFields,Z),!V.keepIsValidating&&Sn(r.validatingFields,Z),!t.shouldUnregister&&!V.keepDefaultValue&&Sn(s,Z);x.state.next({values:Dn(a)}),x.state.next({...r,...V.keepDirty?{isDirty:ie()}:{}}),!V.keepIsValid&&w()},ke=({disabled:z,name:V})=>{(fi(z)&&l.mount||z||u.disabled.has(V))&&(z?u.disabled.add(V):u.disabled.delete(V))},F=(z,V={})=>{let Z=Xe(n,z);const Ne=fi(V.disabled)||fi(t.disabled);return Dr(n,z,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:z}},name:z,mount:!0,...V}}),u.mount.add(z),Z?ke({disabled:fi(V.disabled)?V.disabled:t.disabled,name:z}):T(z,!0,V.value),{...Ne?{disabled:V.disabled||t.disabled}:{},...t.progressive?{required:!!V.required,min:Ju(V.min),max:Ju(V.max),minLength:Ju(V.minLength),maxLength:Ju(V.maxLength),pattern:Ju(V.pattern)}:{},name:z,onChange:ae,onBlur:ae,ref:Oe=>{if(Oe){F(z,V),Z=Xe(n,z);const _e=ln(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,Te=ZF(_e),ut=Z._f.refs||[];if(Te?ut.find(Dt=>Dt===_e):_e===Z._f.ref)return;Dr(n,z,{_f:{...Z._f,...Te?{refs:[...ut.filter(Cy),_e,...Array.isArray(Xe(s,z))?[{}]:[]],ref:{type:_e.type,name:z}}:{ref:_e}}}),T(z,!1,void 0,_e)}else Z=Xe(n,z,{}),Z._f&&(Z._f.mount=!1),(t.shouldUnregister||V.shouldUnregister)&&!(iA(u.array,z)&&l.action)&&u.unMount.add(z)}}},le=()=>t.shouldFocusError&&vd(n,ee,u.mount),ce=z=>{fi(z)&&(x.state.next({disabled:z}),vd(n,(V,Z)=>{const Ne=Xe(n,Z);Ne&&(V.disabled=Ne._f.disabled||z,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(Oe=>{Oe.disabled=Ne._f.disabled||z}))},0,!1))},K=(z,V)=>async Z=>{let Ne;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let Oe=Dn(a);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:_e,values:Te}=await L();r.errors=_e,Oe=Dn(Te)}else await J(n);if(u.disabled.size)for(const _e of u.disabled)Sn(Oe,_e);if(Sn(r.errors,"root"),$s(r.errors)){x.state.next({errors:{}});try{await z(Oe,Z)}catch(_e){Ne=_e}}else V&&await V({...r.errors},Z),le(),setTimeout(le);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$s(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},Ye=(z,V={})=>{Xe(n,z)&&(ln(V.defaultValue)?Q(z,Dn(Xe(s,z))):(Q(z,V.defaultValue),Dr(s,z,Dn(V.defaultValue))),V.keepTouched||Sn(r.touchedFields,z),V.keepDirty||(Sn(r.dirtyFields,z),r.isDirty=V.defaultValue?ie(z,Dn(Xe(s,z))):ie()),V.keepError||(Sn(r.errors,z),f.isValid&&w()),x.state.next({...r}))},Ae=(z,V={})=>{const Z=z?Dn(z):s,Ne=Dn(Z),Oe=$s(z),_e=Oe?s:Ne;if(V.keepDefaultValues||(s=Z),!V.keepValues){if(V.keepDirtyValues){const Te=new Set([...u.mount,...Object.keys(Lc(s,a))]);for(const ut of Array.from(Te))Xe(r.dirtyFields,ut)?Dr(_e,ut,Xe(a,ut)):Q(ut,Xe(_e,ut))}else{if(Qv&&ln(z))for(const Te of u.mount){const ut=Xe(n,Te);if(ut&&ut._f){const Dt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(Yh(Dt)){const Ve=Dt.closest("form");if(Ve){Ve.reset();break}}}}if(V.keepFieldsRef)for(const Te of u.mount)Q(Te,Xe(_e,Te));else n={}}a=t.shouldUnregister?V.keepDefaultValues?Dn(s):{}:Dn(_e),x.array.next({values:{..._e}}),x.state.next({values:{..._e}})}u={mount:V.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!V.keepIsValid||!!V.keepDirtyValues||!t.shouldUnregister&&!$s(_e),l.watch=!!t.shouldUnregister,x.state.next({submitCount:V.keepSubmitCount?r.submitCount:0,isDirty:Oe?!1:V.keepDirty?r.isDirty:!!(V.keepDefaultValues&&!la(z,s)),isSubmitted:V.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Oe?{}:V.keepDirtyValues?V.keepDefaultValues&&a?Lc(s,a):r.dirtyFields:V.keepDefaultValues&&z?Lc(s,z):V.keepDirty?r.dirtyFields:{},touchedFields:V.keepTouched?r.touchedFields:{},errors:V.keepErrors?r.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},tt=(z,V)=>Ae(ca(z)?z(a):z,V),St=(z,V={})=>{const Z=Xe(n,z),Ne=Z&&Z._f;if(Ne){const Oe=Ne.refs?Ne.refs[0]:Ne.ref;Oe.focus&&(Oe.focus(),V.shouldSelect&&ca(Oe.select)&&Oe.select())}},pt=z=>{r={...r,...z}},er={control:{register:F,unregister:Re,getFieldState:M,handleSubmit:K,setError:me,_subscribe:Fe,_runSchema:L,_focusError:le,_getWatch:q,_getDirty:ie,_setValid:w,_setFieldArray:_,_setDisabledField:ke,_setErrors:C,_getFieldArray:de,_reset:Ae,_resetDefaultValues:()=>ca(t.defaultValues)&&t.defaultValues().then(z=>{tt(z,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:ne,_disableForm:ce,_subjects:x,_proxyFormState:f,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(z){l=z},get _defaultValues(){return s},get _names(){return u},set _names(z){u=z},get _formState(){return r},get _options(){return t},set _options(z){t={...t,...z}}},subscribe:Se,trigger:oe,register:F,handleSubmit:K,watch:xe,setValue:Q,getValues:te,reset:tt,resetField:Ye,clearErrors:X,unregister:Re,setError:me,setFocus:St,getFieldState:M};return{...er,formControl:er}}function Cd(e={}){const t=jt.useRef(void 0),r=jt.useRef(void 0),[n,s]=jt.useState({isDirty:!1,isValidating:!1,isLoading:ca(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ca(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!ca(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=fL(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,rb(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),jt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),jt.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),jt.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),jt.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),jt.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),jt.useEffect(()=>{e.values&&!la(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),jt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=oA(n,a),t.current}function mA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=mA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Hr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=mA(e))&&(n&&(n+=" "),n+=t);return n}var hL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ib(e){if(typeof e!="string")return!1;var t=hL;return t.includes(e)}var mL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function pA(e){if(typeof e!="string")return!1;var t=mL;return t.includes(e)}function gA(e){return typeof e=="string"&&e.startsWith("data-")}function Jo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return pA(n)||gA(n)});return Object.fromEntries(t)}function ab(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Jo(t)}return typeof e=="object"&&!Array.isArray(e)?Jo(e):null}function Fi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return pA(n)||gA(n)||ib(n)});return Object.fromEntries(t)}var pL=["children","width","height","viewBox","className","style","title","desc"];function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mx.apply(null,arguments)}function gL(e,t){if(e==null)return{};var r,n,s=yL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yA=g.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:l,style:u,title:d,desc:m}=e,f=gL(e,pL),p=a||{width:n,height:s,x:0,y:0},x=Hr("recharts-surface",l);return g.createElement("svg",Mx({},Fi(f),{className:x,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),g.createElement("title",null,d),g.createElement("desc",null,m),r)}),xL=["children","className"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fx.apply(null,arguments)}function vL(e,t){if(e==null)return{};var r,n,s=bL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var io=g.forwardRef((e,t)=>{var{children:r,className:n}=e,s=vL(e,xL),a=Hr("recharts-layer",n);return g.createElement("g",Fx({className:a},Fi(s),{ref:t}),r)}),wL=g.createContext(null);function $r(e){return function(){return e}}const xA=Math.cos,Xh=Math.sin,ya=Math.sqrt,Qh=Math.PI,Zm=2*Qh,Lx=Math.PI,zx=2*Lx,jl=1e-6,jL=zx-jl;function vA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function SL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vA;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class kL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vA:SL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+l}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,x=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>jl)if(!(Math.abs(p*d-m*f)>jl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-l,j=s-u,w=d*d+m*m,S=v*v+j*j,_=Math.sqrt(w),E=Math.sqrt(x),C=a*Math.tan((Lx-Math.acos((w+x-S)/(2*_*E)))/2),T=C/E,A=C/_;Math.abs(T-1)>jl&&this._append`L${t+T*f},${r+T*p}`,this._append`A${a},${a},0,0,${+(p*v>f*j)},${this._x1=t+A*d},${this._y1=r+A*m}`}}arc(t,r,n,s,a,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,x=l?s-a:a-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>jl||Math.abs(this._y1-f)>jl)&&this._append`L${m},${f}`,n&&(x<0&&(x=x%zx+zx),x>jL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:x>jl&&this._append`A${n},${n},0,${+(x>=Lx)},${p},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ob(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new kL(t)}function lb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bA(e){this._context=e}bA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ep(e){return new bA(e)}function wA(e){return e[0]}function jA(e){return e[1]}function SA(e,t){var r=$r(!0),n=null,s=ep,a=null,l=ob(u);e=typeof e=="function"?e:e===void 0?wA:$r(e),t=typeof t=="function"?t:t===void 0?jA:$r(t);function u(d){var m,f=(d=lb(d)).length,p,x=!1,v;for(n==null&&(a=s(v=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===x&&((x=!x)?a.lineStart():a.lineEnd()),x&&a.point(+e(p,m,d),+t(p,m,d));if(v)return a=null,v+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:$r(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:$r(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:$r(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(a=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=a=null:a=s(n=d),u):n},u}function ch(e,t,r){var n=null,s=$r(!0),a=null,l=ep,u=null,d=ob(m);e=typeof e=="function"?e:e===void 0?wA:$r(+e),t=typeof t=="function"?t:$r(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?jA:$r(+r);function m(p){var x,v,j,w=(p=lb(p)).length,S,_=!1,E,C=new Array(w),T=new Array(w);for(a==null&&(u=l(E=d())),x=0;x<=w;++x){if(!(x<w&&s(S=p[x],x,p))===_)if(_=!_)v=x,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=x-1;j>=v;--j)u.point(C[j],T[j]);u.lineEnd(),u.areaEnd()}_&&(C[x]=+e(S,x,p),T[x]=+t(S,x,p),u.point(n?+n(S,x,p):C[x],r?+r(S,x,p):T[x]))}if(E)return u=null,E+""||null}function f(){return SA().defined(s).curve(l).context(a)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:$r(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:$r(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:$r(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,a!=null&&(u=l(a)),m):l},m.context=function(p){return arguments.length?(p==null?a=u=null:u=l(a=p),m):a},m}class kA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function NL(e){return new kA(e,!0)}function _L(e){return new kA(e,!1)}const cb={draw(e,t){const r=ya(t/Qh);e.moveTo(r,0),e.arc(0,0,r,0,Zm)}},CL={draw(e,t){const r=ya(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},NA=ya(1/3),EL=NA*2,AL={draw(e,t){const r=ya(t/EL),n=r*NA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},PL={draw(e,t){const r=ya(t),n=-r/2;e.rect(n,n,r,r)}},OL=.8908130915292852,_A=Xh(Qh/10)/Xh(7*Qh/10),TL=Xh(Zm/10)*_A,IL=-xA(Zm/10)*_A,DL={draw(e,t){const r=ya(t*OL),n=TL*r,s=IL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const l=Zm*a/5,u=xA(l),d=Xh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Ey=ya(3),$L={draw(e,t){const r=-ya(t/(Ey*3));e.moveTo(0,r*2),e.lineTo(-Ey*r,-r),e.lineTo(Ey*r,-r),e.closePath()}},Ii=-.5,Di=ya(3)/2,Ux=1/ya(12),RL=(Ux/2+1)*3,ML={draw(e,t){const r=ya(t/RL),n=r/2,s=r*Ux,a=n,l=r*Ux+r,u=-a,d=l;e.moveTo(n,s),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(Ii*n-Di*s,Di*n+Ii*s),e.lineTo(Ii*a-Di*l,Di*a+Ii*l),e.lineTo(Ii*u-Di*d,Di*u+Ii*d),e.lineTo(Ii*n+Di*s,Ii*s-Di*n),e.lineTo(Ii*a+Di*l,Ii*l-Di*a),e.lineTo(Ii*u+Di*d,Ii*d-Di*u),e.closePath()}};function FL(e,t){let r=null,n=ob(s);e=typeof e=="function"?e:$r(e||cb),t=typeof t=="function"?t:$r(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:$r(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:$r(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Zh(){}function em(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function CA(e){this._context=e}CA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:em(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:em(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LL(e){return new CA(e)}function EA(e){this._context=e}EA.prototype={areaStart:Zh,areaEnd:Zh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:em(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zL(e){return new EA(e)}function AA(e){this._context=e}AA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:em(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UL(e){return new AA(e)}function PA(e){this._context=e}PA.prototype={areaStart:Zh,areaEnd:Zh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function BL(e){return new PA(e)}function Tk(e){return e<0?-1:1}function Ik(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(a*s+l*n)/(n+s);return(Tk(a)+Tk(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function Dk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ay(e,t,r){var n=e._x0,s=e._y0,a=e._x1,l=e._y1,u=(a-n)/3;e._context.bezierCurveTo(n+u,s+u*t,a-u,l-u*r,a,l)}function tm(e){this._context=e}tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ay(this,this._t0,Dk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ay(this,Dk(this,r=Ik(this,e,t)),r);break;default:Ay(this,this._t0,r=Ik(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function OA(e){this._context=new TA(e)}(OA.prototype=Object.create(tm.prototype)).point=function(e,t){tm.prototype.point.call(this,t,e)};function TA(e){this._context=e}TA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function WL(e){return new tm(e)}function VL(e){return new OA(e)}function IA(e){this._context=e}IA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=$k(e),s=$k(t),a=0,l=1;l<r;++a,++l)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $k(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),l=new Array(r);for(s[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function qL(e){return new IA(e)}function tp(e,t){this._context=e,this._t=t}tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function HL(e){return new tp(e,.5)}function KL(e){return new tp(e,0)}function GL(e){return new tp(e,1)}function Gc(e,t){if((l=e.length)>1)for(var r=1,n,s,a=e[t[0]],l,u=a.length;r<l;++r)for(s=a,a=e[t[r]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function YL(e,t){return e[t]}function JL(e){const t=[];return t.key=e,t}function XL(){var e=$r([]),t=Bx,r=Gc,n=YL;function s(a){var l=Array.from(e.apply(this,arguments),JL),u,d=l.length,m=-1,f;for(const p of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,a)]).data=p;for(u=0,f=lb(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:$r(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:$r(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?Bx:typeof a=="function"?a:$r(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Gc,s):r},s}function QL(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,l;s<a;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Gc(e,t)}}function ZL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Gc(e,t)}}function ez(e,t){if(!(!((l=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,l;n<a;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,x=f[n-1][1]||0,v=(p-x)/2,j=0;j<u;++j){var w=e[t[j]],S=w[n][1]||0,_=w[n-1][1]||0;v+=S-_}d+=p,m+=v*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Gc(e,t)}}var Py={},Oy={},Rk;function tz(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Oy)),Oy}var Ty={},Mk;function DA(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Ty)),Ty}var Iy={},Fk;function ub(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Iy)),Iy}var Dy={},$y={},Lk;function rz(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})($y)),$y}var zk;function db(){return zk||(zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rz(),r=ub();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],l=s.length;if(l===0)return a;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,a.push(d),d=""):d+=p:p==="["?(f=!0,d&&(a.push(d),d="")):p==="."?d&&(a.push(d),d=""):d+=p,u++}return d&&a.push(d),a}e.toPath=n})(Dy)),Dy}var Uk;function fb(){return Uk||(Uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tz(),r=DA(),n=ub(),s=db();function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?a(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=a})(Py)),Py}var Ry,Bk;function nz(){return Bk||(Bk=1,Ry=fb().get),Ry}var sz=nz();const Yc=pa(sz);var yi=e=>e===0?0:e>0?1:-1,Aa=e=>typeof e=="number"&&e!=+e,ao=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pt=e=>(typeof e=="number"||e instanceof Number)&&!Aa(e),Pa=e=>Pt(e)||typeof e=="string",iz=0,Ed=e=>{var t=++iz;return"".concat(e||"").concat(t)},ma=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pt(t)&&typeof t!="string")return n;var a;if(ao(t)){if(r==null)return n;var l=t.indexOf("%");a=r*parseFloat(t.slice(0,l))/100}else a=+t;return Aa(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},$A=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function gs(e,t,r){return Pt(e)&&Pt(t)?e+r*(t-e):t}function az(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Yc(n,t))===r)}var ss=e=>e===null||typeof e>"u",Hd=e=>ss(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function oz(e){return e!=null}function fu(){}var lz=["type","size","sizeType"];function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wx.apply(null,arguments)}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cz(e,t,r){return(t=uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fz(e,t){if(e==null)return{};var r,n,s=hz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RA={symbolCircle:cb,symbolCross:CL,symbolDiamond:AL,symbolSquare:PL,symbolStar:DL,symbolTriangle:$L,symbolWye:ML},mz=Math.PI/180,pz=e=>{var t="symbol".concat(Hd(e));return RA[t]||cb},gz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*mz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},yz=(e,t)=>{RA["symbol".concat(Hd(e))]=t},MA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=fz(e,lz),a=Vk(Vk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var x=pz(l),v=FL().type(x).size(gz(r,n,l)),j=v();if(j!==null)return j},{className:d,cx:m,cy:f}=a,p=Fi(a);return Pt(m)&&Pt(f)&&Pt(r)?g.createElement("path",Wx({},p,{className:Hr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};MA.registerSymbol=yz;var FA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{ib(s)&&(n[s]=(a=>r[s](r,a)))}),n},vz=(e,t,r)=>n=>(e(t,r,n),null),hb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];ib(s)&&typeof a=="function"&&(n||(n={}),n[s]=vz(a,t,r))}),n};function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){wz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wz(e,t,r){return(t=jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jz(e){var t=Sz(e,"string");return typeof t=="symbol"?t:t+""}function Sz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bi(e,t){var r=bz({},e),n=t,s=Object.keys(t),a=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return a}var My={},Fy={},Hk;function kz(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const l=r[a],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Fy)),Fy}var Ly={},Kk;function LA(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Ly)),Ly}var zy={},Uy={},By={},Gk;function Nz(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(By)),By}var Yk;function mb(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Uy)),Uy}var Wy={},Jk;function _z(){return Jk||(Jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Wy)),Wy}var Xk;function Cz(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mb(),r=_z();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(zy)),zy}var Vy={},qy={},Qk;function Ez(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fb();function r(n){return function(s){return t.get(s,n)}}e.property=r})(qy)),qy}var Hy={},Ky={},Gy={},Yy={},Zk;function zA(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Yy)),Yy}var Jy={},eN;function UA(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Jy)),Jy}var Xy={},tN;function BA(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Xy)),Xy}var rN;function Az(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zA(),r=UA(),n=BA();function s(f,p,x){return typeof x!="function"?s(f,p,()=>{}):a(f,p,function v(j,w,S,_,E,C){const T=x(j,w,S,_,E,C);return T!==void 0?!!T:a(j,w,v,C)},new Map)}function a(f,p,x,v){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,x,v);case"function":return Object.keys(p).length>0?a(f,{...p},x,v):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,x,v){if(p==null)return!0;if(Array.isArray(p))return d(f,p,x,v);if(p instanceof Map)return u(f,p,x,v);if(p instanceof Set)return m(f,p,x,v);const j=Object.keys(p);if(f==null)return j.length===0;if(j.length===0)return!0;if(v!=null&&v.has(p))return v.get(p)===f;v==null||v.set(p,f);try{for(let w=0;w<j.length;w++){const S=j[w];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!x(f[S],p[S],S,f,p,v))return!1}return!0}finally{v==null||v.delete(p)}}function u(f,p,x,v){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,w]of p.entries()){const S=f.get(j);if(x(S,w,j,f,p,v)===!1)return!1}return!0}function d(f,p,x,v){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let w=0;w<p.length;w++){const S=p[w];let _=!1;for(let E=0;E<f.length;E++){if(j.has(E))continue;const C=f[E];let T=!1;if(x(C,S,w,f,p,v)&&(T=!0),T){j.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,x,v){return p.size===0?!0:f instanceof Set?d([...f],[...p],x,v):!1}e.isMatchWith=s,e.isSetMatch=m})(Gy)),Gy}var nN;function WA(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Az();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Ky)),Ky}var Qy={},Zy={},e0={},sN;function Pz(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(e0)),e0}var t0={},iN;function VA(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(t0)),t0}var r0={},aN;function qA(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",x="[object ArrayBuffer]",v="[object Object]",j="[object Error]",w="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",T="[object BigUint64Array]",A="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",R="[object BigInt64Array]",J="[object Float32Array]",ne="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=x,e.arrayTag=f,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=w,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=J,e.float64ArrayTag=ne,e.functionTag=p,e.int16ArrayTag=D,e.int32ArrayTag=L,e.int8ArrayTag=A,e.mapTag=d,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(r0)),r0}var n0={},oN;function Oz(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(n0)),n0}var lN;function HA(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pz(),r=VA(),n=qA(),s=UA(),a=Oz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,x,v=new Map,j=void 0){const w=j==null?void 0:j(f,p,x,v);if(w!==void 0)return w;if(s.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const S=new Array(f.length);v.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,x,v,j);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;v.set(f,S);for(const[_,E]of f)S.set(_,u(E,_,x,v,j));return S}if(f instanceof Set){const S=new Set;v.set(f,S);for(const _ of f)S.add(u(_,void 0,x,v,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,x,v,j);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,S),d(S,f,x,v,j),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return v.set(f,S),d(S,f,x,v,j),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return v.set(f,S),d(S,f,x,v,j),S}if(f instanceof Error){const S=new f.constructor;return v.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,x,v,j),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return v.set(f,S),d(S,f,x,v,j),S}if(f instanceof Number){const S=new Number(f.valueOf());return v.set(f,S),d(S,f,x,v,j),S}if(f instanceof String){const S=new String(f.valueOf());return v.set(f,S),d(S,f,x,v,j),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return v.set(f,S),d(S,f,x,v,j),S}return f}function d(f,p,x=f,v,j){const w=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<w.length;S++){const _=w[S],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,x,v,j))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Zy)),Zy}var cN;function Tz(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Qy)),Qy}var uN;function Iz(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),r=Tz();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(Hy)),Hy}var s0={},i0={},a0={},dN;function Dz(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA(),r=qA();function n(s,a){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=a==null?void 0:a(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(a0)),a0}var fN;function $z(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(i0)),i0}var o0={},l0={},hN;function KA(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(l0)),l0}var c0={},mN;function Rz(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(c0)),c0}var pN;function Mz(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DA(),r=KA(),n=Rz(),s=db();function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=a})(o0)),o0}var gN;function Fz(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),r=ub(),n=$z(),s=fb(),a=Mz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?a.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(s0)),s0}var yN;function Lz(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA(),r=Ez(),n=Iz(),s=Fz();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=a})(Vy)),Vy}var xN;function zz(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz(),r=LA(),n=Cz(),s=Lz();function a(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=a})(My)),My}var u0,vN;function Uz(){return vN||(vN=1,u0=zz().uniqBy),u0}var Bz=Uz();const bN=pa(Bz);function Wz(e,t,r){return t===!0?bN(e,r):typeof t=="function"?bN(e,t):e}var d0={exports:{}},f0={},h0={exports:{}},m0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function Vz(){if(wN)return m0;wN=1;var e=nu();function t(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(p,x){var v=x(),j=n({inst:{value:v,getSnapshot:x}}),w=j[0].inst,S=j[1];return a(function(){w.value=v,w.getSnapshot=x,d(w)&&S({inst:w})},[p,v,x]),s(function(){return d(w)&&S({inst:w}),p(function(){d(w)&&S({inst:w})})},[p]),l(v),v}function d(p){var x=p.getSnapshot;p=p.value;try{var v=x();return!r(p,v)}catch{return!0}}function m(p,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return m0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,m0}var jN;function qz(){return jN||(jN=1,h0.exports=Vz()),h0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN;function Hz(){if(SN)return f0;SN=1;var e=nu(),t=qz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return f0.useSyncExternalStoreWithSelector=function(m,f,p,x,v){var j=a(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=u(function(){function _(D){if(!E){if(E=!0,C=D,D=x(D),v!==void 0&&w.hasValue){var L=w.value;if(v(L,D))return T=L}return T=D}if(L=T,n(C,D))return L;var R=x(D);return v!==void 0&&v(L,R)?(C=D,L):(C=D,T=R)}var E=!1,C,T,A=p===void 0?null:p;return[function(){return _(f())},A===null?void 0:function(){return _(A())}]},[f,p,x,v]);var S=s(m,j[0],j[1]);return l(function(){w.hasValue=!0,w.value=S},[S]),d(S),S},f0}var kN;function Kz(){return kN||(kN=1,d0.exports=Hz()),d0.exports}var Gz=Kz(),pb=g.createContext(null),Yz=e=>e,wn=()=>{var e=g.useContext(pb);return e?e.store.dispatch:Yz},Ph=()=>{},Jz=()=>Ph,Xz=(e,t)=>e===t;function kt(e){var t=g.useContext(pb);return Gz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Jz,t?t.store.getState:Ph,t?t.store.getState:Ph,t?e:Ph,Xz)}function Qz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Zz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function e8(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var NN=e=>Array.isArray(e)?e:[e];function t8(e){const t=Array.isArray(e[0])?e[0]:e;return e8(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function r8(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var n8=class{constructor(e){this.value=e}deref(){return this.value}},s8=typeof WeakRef<"u"?WeakRef:n8,i8=0,_N=1;function uh(){return{s:i8,v:void 0,o:null,p:null}}function GA(e,t={}){let r=uh();const{resultEqualityCheck:n}=t;let s,a=0;function l(){var p;let u=r;const{length:d}=arguments;for(let x=0,v=d;x<v;x++){const j=arguments[x];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const S=w.get(j);S===void 0?(u=uh(),w.set(j,u)):u=S}else{let w=u.p;w===null&&(u.p=w=new Map);const S=w.get(j);S===void 0?(u=uh(),w.set(j,u)):u=S}}const m=u;let f;if(u.s===_N)f=u.v;else if(f=e.apply(null,arguments),a++,n){const x=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;x!=null&&n(x,f)&&(f=x,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new s8(f):f}return m.s=_N,m.v=f,f}return l.clearCache=()=>{r=uh(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function a8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Qz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:x=[],argsMemoize:v=GA,argsMemoizeOptions:j=[]}=f,w=NN(x),S=NN(j),_=t8(s),E=p(function(){return a++,m.apply(null,arguments)},...w),C=v(function(){l++;const A=r8(_,arguments);return u=E.apply(null,A),u},...S);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var je=a8(GA),o8=Object.assign((e,t=je)=>{Zz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>o8}),p0={},g0={},y0={},CN;function l8(){return CN||(CN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=r})(y0)),y0}var x0={},v0={},EN;function YA(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(v0)),v0}var AN;function c8(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=s})(x0)),x0}var PN;function u8(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l8(),r=c8(),n=db();function s(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const m=(v,j)=>{let w=v;for(let S=0;S<j.length&&w!=null;++S)w=w[j[S]];return w},f=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:m(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?m(j,v):typeof j=="object"?j[v]:j,p=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return a.map(v=>({original:v,criteria:p.map(j=>f(j,v))})).slice().sort((v,j)=>{for(let w=0;w<p.length;w++){const S=t.compareValues(v.criteria[w],j.criteria[w],u[w]);if(S!==0)return S}return 0}).map(v=>v.original)}e.orderBy=s})(g0)),g0}var b0={},ON;function d8(){return ON||(ON=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<a?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(b0)),b0}var w0={},TN;function JA(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KA(),r=mb(),n=zA(),s=BA();function a(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=a})(w0)),w0}var IN;function f8(){return IN||(IN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u8(),r=d8(),n=JA();function s(a,...l){const u=l.length;return u>1&&n.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,r.flatten(l),["asc"])}e.sortBy=s})(p0)),p0}var j0,DN;function h8(){return DN||(DN=1,j0=f8().sortBy),j0}var m8=h8();const rp=pa(m8);var XA=e=>e.legend.settings,p8=e=>e.legend.size,g8=e=>e.legend.payload;je([g8,XA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?rp(n,r):n});var dh=1;function y8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>dh||Math.abs(l.left-t.left)>dh||Math.abs(l.top-t.top)>dh||Math.abs(l.width-t.width)>dh)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function ps(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x8=typeof Symbol=="function"&&Symbol.observable||"@@observable",$N=x8,S0=()=>Math.random().toString(36).substring(7).split("").join("."),v8={INIT:`@@redux/INIT${S0()}`,REPLACE:`@@redux/REPLACE${S0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${S0()}`},rm=v8;function gb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function QA(e,t,r){if(typeof e!="function")throw new Error(ps(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ps(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ps(1));return r(QA)(e,t)}let n=e,s=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((S,_)=>{l.set(_,S)}))}function f(){if(d)throw new Error(ps(3));return s}function p(S){if(typeof S!="function")throw new Error(ps(4));if(d)throw new Error(ps(5));let _=!0;m();const E=u++;return l.set(E,S),function(){if(_){if(d)throw new Error(ps(6));_=!1,m(),l.delete(E),a=null}}}function x(S){if(!gb(S))throw new Error(ps(7));if(typeof S.type>"u")throw new Error(ps(8));if(typeof S.type!="string")throw new Error(ps(17));if(d)throw new Error(ps(9));try{d=!0,s=n(s,S)}finally{d=!1}return(a=l).forEach(E=>{E()}),S}function v(S){if(typeof S!="function")throw new Error(ps(10));n=S,x({type:rm.REPLACE})}function j(){const S=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(ps(11));function E(){const T=_;T.next&&T.next(f())}return E(),{unsubscribe:S(E)}},[$N](){return this}}}return x({type:rm.INIT}),{dispatch:x,subscribe:p,getState:f,replaceReducer:v,[$N]:j}}function b8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:rm.INIT})>"u")throw new Error(ps(12));if(typeof r(void 0,{type:rm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ps(13))})}function ZA(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{b8(r)}catch(a){s=a}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],x=r[p],v=l[p],j=x(v,u);if(typeof j>"u")throw u&&u.type,new Error(ps(14));m[p]=j,d=d||j!==v}return d=d||n.length!==Object.keys(l).length,d?m:l}}function nm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function w8(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(ps(15))};const l={getState:s.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=nm(...u)(s.dispatch),{...s,dispatch:a}}}function eP(e){return gb(e)&&"type"in e&&typeof e.type=="string"}var tP=Symbol.for("immer-nothing"),RN=Symbol.for("immer-draftable"),bi=Symbol.for("immer-state");function ua(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function Bl(e){return!!e&&!!e[bi]}function oo(e){var t;return e?rP(e)||Array.isArray(e)||!!e[RN]||!!((t=e.constructor)!=null&&t[RN])||Kd(e)||sp(e):!1}var j8=Object.prototype.constructor.toString(),MN=new WeakMap;function rP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=MN.get(r);return n===void 0&&(n=Function.toString.call(r),MN.set(r,n)),n===j8}function sm(e,t,r=!0){np(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function np(e){const t=e[bi];return t?t.type_:Array.isArray(e)?1:Kd(e)?2:sp(e)?3:0}function Vx(e,t){return np(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nP(e,t,r){const n=np(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function S8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kd(e){return e instanceof Map}function sp(e){return e instanceof Set}function Sl(e){return e.copy_||e.base_}function qx(e,t){if(Kd(e))return new Map(e);if(sp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=rP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[bi];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const l=s[a],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ad(e),n)}else{const n=Ad(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function yb(e,t=!1){return ip(e)||Bl(e)||!oo(e)||(np(e)>1&&Object.defineProperties(e,{set:fh,add:fh,clear:fh,delete:fh}),Object.freeze(e),t&&Object.values(e).forEach(r=>yb(r,!0))),e}function k8(){ua(2)}var fh={value:k8};function ip(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var N8={};function Wl(e){const t=N8[e];return t||ua(0,e),t}var Pd;function sP(){return Pd}function _8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FN(e,t){t&&(Wl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hx(e){Kx(e),e.drafts_.forEach(C8),e.drafts_=null}function Kx(e){e===Pd&&(Pd=e.parent_)}function LN(e){return Pd=_8(Pd,e)}function C8(e){const t=e[bi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[bi].modified_&&(Hx(t),ua(4)),oo(e)&&(e=im(t,e),t.parent_||am(t,e)),t.patches_&&Wl("Patches").generateReplacementPatches_(r[bi].base_,e,t.patches_,t.inversePatches_)):e=im(t,r,[]),Hx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tP?e:void 0}function im(e,t,r){if(ip(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[bi];if(!s)return sm(t,(a,l)=>UN(e,s,t,a,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return am(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,u=!1;s.type_===3&&(l=new Set(a),a.clear(),u=!0),sm(l,(d,m)=>UN(e,s,a,d,m,r,u),n),am(e,a,!1),r&&e.patches_&&Wl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function UN(e,t,r,n,s,a,l){if(s==null||typeof s!="object"&&!l)return;const u=ip(s);if(!(u&&!l)){if(Bl(s)){const d=a&&t&&t.type_!==3&&!Vx(t.assigned_,n)?a.concat(n):void 0,m=im(e,s,d);if(nP(r,n,m),Bl(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(oo(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;im(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Kd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&am(e,s)}}}function am(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yb(t,r)}function E8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:sP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=xb;r&&(s=[n],a=Od);const{revoke:l,proxy:u}=Proxy.revocable(s,a);return n.draft_=u,n.revoke_=l,u}var xb={get(e,t){if(t===bi)return e;const r=Sl(e);if(!Vx(r,t))return A8(e,r,t);const n=r[t];return e.finalized_||!oo(n)?n:n===k0(e.base_,t)?(N0(e),e.copy_[t]=Yx(n,e)):n},has(e,t){return t in Sl(e)},ownKeys(e){return Reflect.ownKeys(Sl(e))},set(e,t,r){const n=iP(Sl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=k0(Sl(e),t),a=s==null?void 0:s[bi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(S8(r,s)&&(r!==void 0||Vx(e.base_,t)))return!0;N0(e),Gx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return k0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,N0(e),Gx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Sl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ua(11)},getPrototypeOf(e){return Ad(e.base_)},setPrototypeOf(){ua(12)}},Od={};sm(xb,(e,t)=>{Od[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Od.deleteProperty=function(e,t){return Od.set.call(this,e,t,void 0)};Od.set=function(e,t,r){return xb.set.call(this,e[0],t,r,e[0])};function k0(e,t){const r=e[bi];return(r?Sl(r):e)[t]}function A8(e,t,r){var s;const n=iP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function iP(e,t){if(!(t in e))return;let r=Ad(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ad(r)}}function Gx(e){e.modified_||(e.modified_=!0,e.parent_&&Gx(e.parent_))}function N0(e){e.copy_||(e.copy_=qx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var P8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(d=a,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ua(6),n!==void 0&&typeof n!="function"&&ua(7);let s;if(oo(t)){const a=LN(this),l=Yx(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Hx(a):Kx(a)}return FN(a,n),zN(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===tP&&(s=void 0),this.autoFreeze_&&yb(s,!0),n){const a=[],l=[];Wl("Patches").generateReplacementPatches_(t,s,a,l),n(a,l)}return s}else ua(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){oo(e)||ua(8),Bl(e)&&(e=to(e));const t=LN(this),r=Yx(e,void 0);return r[bi].isManual_=!0,Kx(t),r}finishDraft(e,t){const r=e&&e[bi];(!r||!r.isManual_)&&ua(9);const{scope_:n}=r;return FN(n,t),zN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Wl("Patches").applyPatches_;return Bl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Yx(e,t){const r=Kd(e)?Wl("MapSet").proxyMap_(e,t):sp(e)?Wl("MapSet").proxySet_(e,t):E8(e,t);return(t?t.scope_:sP()).drafts_.push(r),r}function to(e){return Bl(e)||ua(10,e),aP(e)}function aP(e){if(!oo(e)||ip(e))return e;const t=e[bi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=qx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=qx(e,!0);return sm(r,(s,a)=>{nP(r,s,aP(a))},n),t&&(t.finalized_=!1),r}var Jx=new P8,oP=Jx.produce,O8=Jx.setUseStrictIteration.bind(Jx);function lP(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var T8=lP(),I8=lP,D8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nm:nm.apply(null,arguments)};function Li(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(vi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>eP(n)&&n.type===e,r}var cP=class ud extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ud.prototype)}static get[Symbol.species](){return ud}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ud(...t[0].concat(this)):new ud(...t.concat(this))}};function BN(e){return oo(e)?oP(e,()=>{}):e}function hh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function $8(e){return typeof e=="boolean"}var R8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let l=new cP;return r&&($8(r)?l.push(T8):l.push(I8(r.extraArgument))),l},uP="RTK_autoBatch",Fn=()=>e=>({payload:e,meta:{[uP]:!0}}),WN=e=>t=>{setTimeout(t,e)},dP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WN(10):e.type==="callback"?e.queueNotification:WN(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),x=n.subscribe(p);return u.add(f),()=>{x(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[uP]),a=!s,a&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},M8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new cP(e);return n&&s.push(dP(typeof n=="object"?n:void 0)),s};function F8(e){const t=R8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(gb(r))u=ZA(r);else throw new Error(vi(1));let d;typeof n=="function"?d=n(t):d=t();let m=nm;s&&(m=D8({trace:!1,...typeof s=="object"&&s}));const f=w8(...d),p=M8(f);let x=typeof l=="function"?l(p):p();const v=m(...x);return QA(u,a,v)}function fP(e){const t={},r=[];let n;const s={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(vi(28));if(u in t)throw new Error(vi(29));return t[u]=l,s},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:a.settled,reducer:l.settled}),s},addMatcher(a,l){return r.push({matcher:a,reducer:l}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}O8(!1);function L8(e){return typeof e=="function"}function z8(e,t){let[r,n,s]=fP(t),a;if(L8(e))a=()=>BN(e());else{const u=BN(e);a=()=>u}function l(u=a(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Bl(f)){const v=p(f,d);return v===void 0?f:v}else{if(oo(f))return oP(f,x=>p(x,d));{const x=p(f,d);if(x===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return f},u)}return l.getInitialState=a,l}var U8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",B8=(e=21)=>{let t="",r=e;for(;r--;)t+=U8[Math.random()*64|0];return t},W8=Symbol.for("rtk-slice-createasyncthunk");function V8(e,t){return`${e}/${t}`}function q8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[W8];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(vi(11));const u=(typeof s.reducers=="function"?s.reducers(K8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,A){const D=typeof T=="string"?T:T.type;if(!D)throw new Error(vi(12));if(D in m.sliceCaseReducersByType)throw new Error(vi(13));return m.sliceCaseReducersByType[D]=A,f},addMatcher(T,A){return m.sliceMatchers.push({matcher:T,reducer:A}),f},exposeAction(T,A){return m.actionCreators[T]=A,f},exposeCaseReducer(T,A){return m.sliceCaseReducersByName[T]=A,f}};d.forEach(T=>{const A=u[T],D={reducerName:T,type:V8(a,T),createNotation:typeof s.reducers=="function"};Y8(A)?X8(D,A,f,t):G8(D,A,f)});function p(){const[T={},A=[],D=void 0]=typeof s.extraReducers=="function"?fP(s.extraReducers):[s.extraReducers],L={...T,...m.sliceCaseReducersByType};return z8(s.initialState,R=>{for(let J in L)R.addCase(J,L[J]);for(let J of m.sliceMatchers)R.addMatcher(J.matcher,J.reducer);for(let J of A)R.addMatcher(J.matcher,J.reducer);D&&R.addDefaultCase(D)})}const x=T=>T,v=new Map,j=new WeakMap;let w;function S(T,A){return w||(w=p()),w(T,A)}function _(){return w||(w=p()),w.getInitialState()}function E(T,A=!1){function D(R){let J=R[T];return typeof J>"u"&&A&&(J=hh(j,D,_)),J}function L(R=x){const J=hh(v,A,()=>new WeakMap);return hh(J,R,()=>{const ne={};for(const[ie,q]of Object.entries(s.selectors??{}))ne[ie]=H8(q,R,()=>hh(j,R,_),A);return ne})}return{reducerPath:T,getSelectors:L,get selectors(){return L(D)},selectSlice:D}}const C={name:a,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(T,{reducerPath:A,...D}={}){const L=A??l;return T.inject({reducerPath:L,reducer:S},D),{...C,...E(L,!0)}}};return C}}function H8(e,t,r,n){function s(a,...l){let u=t(a);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var ri=q8();function K8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function G8({type:e,reducerName:t,createNotation:r},n,s){let a,l;if("reducer"in n){if(r&&!J8(n))throw new Error(vi(17));a=n.reducer,l=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?Li(e,l):Li(e))}function Y8(e){return e._reducerDefinitionType==="asyncThunk"}function J8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function X8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(vi(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,a,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||mh,pending:u||mh,rejected:d||mh,settled:m||mh})}function mh(){}var Q8="task",hP="listener",mP="completed",vb="cancelled",Z8=`task-${vb}`,eU=`task-${mP}`,Xx=`${hP}-${vb}`,tU=`${hP}-${mP}`,ap=class{constructor(e){sy(this,"name","TaskAbortError");sy(this,"message");this.code=e,this.message=`${Q8} ${vb} (reason: ${e})`}},bb=(e,t)=>{if(typeof e!="function")throw new TypeError(vi(32))},om=()=>{},pP=(e,t=om)=>(e.catch(t),e),gP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Rl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ml=e=>{if(e.aborted){const{reason:t}=e;throw new ap(t)}};function yP(e,t){let r=om;return new Promise((n,s)=>{const a=()=>s(new ap(e.reason));if(e.aborted){a();return}r=gP(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=om})}var rU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ap?"cancelled":"rejected",error:r}}finally{t==null||t()}},lm=e=>t=>pP(yP(e,t).then(r=>(Ml(e),r))),xP=e=>{const t=lm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:qc}=Object,VN={},op="listenerMiddleware",nU=(e,t)=>{const r=n=>gP(e,()=>Rl(n,e.reason));return(n,s)=>{bb(n);const a=new AbortController;r(a);const l=rU(async()=>{Ml(e),Ml(a.signal);const u=await n({pause:lm(a.signal),delay:xP(a.signal),signal:a.signal});return Ml(a.signal),u},()=>Rl(a,eU));return s!=null&&s.autoJoin&&t.push(l.catch(om)),{result:lm(e)(l),cancel(){Rl(a,Z8)}}}},sU=(e,t)=>{const r=async(n,s)=>{Ml(t);let a=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,x)=>{x.unsubscribe(),d([p,x.getState(),x.getOriginalState()])}});a=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await yP(t,Promise.race(u));return Ml(t),d}finally{a()}};return(n,s)=>pP(r(n,s))},vP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Li(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(vi(21));return bb(a),{predicate:s,type:t,effect:a}},bP=qc(e=>{const{type:t,predicate:r,effect:n}=vP(e);return{id:B8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(vi(22))}}},{withTypes:()=>bP}),qN=(e,t)=>{const{type:r,effect:n,predicate:s}=vP(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},Qx=e=>{e.pending.forEach(t=>{Rl(t,Xx)})},iU=(e,t)=>()=>{for(const r of t.keys())Qx(r);e.clear()},HN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},wP=qc(Li(`${op}/add`),{withTypes:()=>wP}),aU=Li(`${op}/removeAll`),jP=qc(Li(`${op}/remove`),{withTypes:()=>jP}),oU=(...e)=>{console.error(`${op}/error`,...e)},Gd=(e={})=>{const t=new Map,r=new Map,n=v=>{const j=r.get(v)??0;r.set(v,j+1)},s=v=>{const j=r.get(v)??1;j===1?r.delete(v):r.set(v,j-1)},{extra:a,onError:l=oU}=e;bb(l);const u=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),j=>{v.unsubscribe(),j!=null&&j.cancelActive&&Qx(v)}),d=v=>{const j=qN(t,v)??bP(v);return u(j)};qc(d,{withTypes:()=>d});const m=v=>{const j=qN(t,v);return j&&(j.unsubscribe(),v.cancelActive&&Qx(j)),!!j};qc(m,{withTypes:()=>m});const f=async(v,j,w,S)=>{const _=new AbortController,E=sU(d,_.signal),C=[];try{v.pending.add(_),n(v),await Promise.resolve(v.effect(j,qc({},w,{getOriginalState:S,condition:(T,A)=>E(T,A).then(Boolean),take:E,delay:xP(_.signal),pause:lm(_.signal),extra:a,signal:_.signal,fork:nU(_.signal,C),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((T,A,D)=>{T!==_&&(Rl(T,Xx),D.delete(T))})},cancel:()=>{Rl(_,Xx),v.pending.delete(_)},throwIfCancelled:()=>{Ml(_.signal)}})))}catch(T){T instanceof ap||HN(l,T,{raisedBy:"effect"})}finally{await Promise.all(C),Rl(_,tU),s(v),v.pending.delete(_)}},p=iU(t,r);return{middleware:v=>j=>w=>{if(!eP(w))return j(w);if(wP.match(w))return d(w.payload);if(aU.match(w)){p();return}if(jP.match(w))return m(w.payload);let S=v.getState();const _=()=>{if(S===VN)throw new Error(vi(23));return S};let E;try{if(E=j(w),t.size>0){const C=v.getState(),T=Array.from(t.values());for(const A of T){let D=!1;try{D=A.predicate(w,C,S)}catch(L){D=!1,HN(l,L,{raisedBy:"predicate"})}D&&f(A,w,v,_)}}}finally{S=VN}return E},startListening:d,stopListening:m,clearListeners:p}};function vi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},SP=ri({name:"chartLayout",initialState:lU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:cU,setLayout:uU,setChartSize:dU,setScale:fU}=SP.actions,hU=SP.reducer;function kP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(r),!0).forEach(function(n){mU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mU(e,t,r){return(t=pU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pU(e){var t=gU(e,"string");return typeof t=="symbol"?t:t+""}function gU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t,r){return ss(e)||ss(t)?r:Pa(t)?Yc(e,t,r):typeof t=="function"?t(e):r}var yU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&Pt(e[a]))return Uc(Uc({},e),{},{[a]:e[a]+(n||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&Pt(e[l]))return Uc(Uc({},e),{},{[l]:e[l]+(s||0)})}return e},Jl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GN=1e-4,xU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-GN,a=Math.max(n[0],n[1])+GN,l=e(t[0]),u=e(t[r-1]);(l<s||l>a||u<s||u>a)&&e.domain([t[0],t[r-1]])}},vU=(e,t)=>{if(!t||t.length!==2||!Pt(t[0])||!Pt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Pt(e[0])||e[0]<r)&&(s[0]=r),(!Pt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},bU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,l=0;l<t;++l){var u=Aa(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1])}},wU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var l=Aa(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},jU={sign:bU,expand:QL,none:Gc,silhouette:ZL,wiggle:ez,positive:wU},SU=(e,t,r)=>{var n=jU[r],s=XL().keys(t).value((a,l)=>Number(Fs(a,l,0))).order(Bx).offset(n);return s(e)};function kU(e){return e==null?void 0:String(e)}var YN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Fs(a,t.dataKey,t.scale.domain()[l]);return ss(u)?null:t.scale(u)-s/2+n},NU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},_U=e=>{var t=e.flat(2).filter(Pt);return[Math.min(...t),Math.max(...t)]},CU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],EU=(e,t,r)=>{if(e!=null)return CU(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:l}=a,u=l.reduce((d,m)=>{var f=kP(m,t,r),p=_U(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},JN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cm=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=rp(t,f=>f.coordinate),a=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function QN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Uc(Uc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function NP(e,t){if(e)return String(e);if(typeof t=="string")return t}var AU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},PU=(e,t)=>t==="centric"?e.angle:e.radius,po=e=>e.layout.width,go=e=>e.layout.height,OU=e=>e.layout.scale,_P=e=>e.layout.margin,lp=je(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cp=je(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),TU="data-recharts-item-index",IU="data-recharts-item-data-key",Yd=60;function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(n){DU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DU(e,t,r){return(t=$U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $U(e){var t=RU(e,"string");return typeof t=="symbol"?t:t+""}function RU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MU=e=>e.brush.height;function FU(e){var t=cp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Yd;return r+s}return r},0)}function LU(e){var t=cp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Yd;return r+s}return r},0)}function zU(e){var t=lp(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function UU(e){var t=lp(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var is=je([po,go,_P,MU,FU,LU,zU,UU,XA,p8],(e,t,r,n,s,a,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+a},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},x=ph(ph({},p),f),v=x.bottom;x.bottom+=n,x=yU(x,d,m);var j=e-x.left-x.right,w=t-x.top-x.bottom;return ph(ph({brushBottom:v},x),{},{width:Math.max(j,0),height:Math.max(w,0)})}),BU=je(is,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),wb=je(po,go,(e,t)=>({x:0,y:0,width:e,height:t})),WU=g.createContext(null),ji=()=>g.useContext(WU)!=null,up=e=>e.brush,dp=je([up,is,_P],(e,t,r)=>({height:e.height,x:Pt(e.x)?e.x:t.left,y:Pt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Pt(e.width)?e.width:t.width})),_0={},C0={},E0={},e2;function VU(){return e2||(e2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),w()};let x=null;const v=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,p()},n)},j=()=>{x!==null&&(clearTimeout(x),x=null)},w=()=>{j(),l=void 0,u=null},S=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=x==null;v(),d&&C&&f()};return _.schedule=v,_.cancel=w,_.flush=S,s==null||s.addEventListener("abort",w,{once:!0}),_}e.debounce=t})(E0)),E0}var t2;function qU(){return t2||(t2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VU();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const x=t.debounce(function(...w){f=n.apply(this,w),p=null},s,{edges:m}),v=function(...w){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,w),p=Date.now(),x.cancel(),x.schedule(),f):(x.apply(this,w),f)},j=()=>(x.flush(),f);return v.cancel=x.cancel,v.flush=j,v}e.debounce=r})(C0)),C0}var r2;function HU(){return r2||(r2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qU();function r(n,s=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(_0)),_0}var A0,n2;function KU(){return n2||(n2=1,A0=HU().throttle),A0}var GU=KU();const YU=pa(GU);var s2=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},CP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:l}=r,u=ao(n)?e:Number(n),d=ao(s)?t:Number(s);return a&&a>0&&(u?d=u/a:d&&(u=d*a),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},JU={width:0,height:0,overflow:"visible"},XU={width:0,overflowX:"visible"},QU={height:0,overflowY:"visible"},ZU={},eB=e=>{var{width:t,height:r}=e,n=ao(t),s=ao(r);return n&&s?JU:n?XU:s?QU:ZU};function tB(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function bn(e){return Number.isFinite(e)}function Xo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zx.apply(null,arguments)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){rB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rB(e,t,r){return(t=nB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nB(e){var t=sB(e,"string");return typeof t=="symbol"?t:t+""}function sB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EP=g.createContext({width:-1,height:-1});function iB(e){return Xo(e.width)&&Xo(e.height)}function AP(e){var{children:t,width:r,height:n}=e,s=g.useMemo(()=>({width:r,height:n}),[r,n]);return iB(s)?g.createElement(EP.Provider,{value:s},t):null}var jb=()=>g.useContext(EP),aB=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:x,onResize:v,style:j={}}=e,w=g.useRef(null),S=g.useRef();S.current=v,g.useImperativeHandle(t,()=>w.current);var[_,E]=g.useState({containerWidth:n.width,containerHeight:n.height}),C=g.useCallback((R,J)=>{E(ne=>{var ie=Math.round(R),q=Math.round(J);return ne.containerWidth===ie&&ne.containerHeight===q?ne:{containerWidth:ie,containerHeight:q}})},[]);g.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return fu;var R=q=>{var de,{width:W,height:G}=q[0].contentRect;C(W,G),(de=S.current)===null||de===void 0||de.call(S,W,G)};f>0&&(R=YU(R,f,{trailing:!0,leading:!1}));var J=new ResizeObserver(R),{width:ne,height:ie}=w.current.getBoundingClientRect();return C(ne,ie),J.observe(w.current),()=>{J.disconnect()}},[C,f]);var{containerWidth:T,containerHeight:A}=_;s2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:D,calculatedHeight:L}=CP(T,A,{width:s,height:a,aspect:r,maxHeight:d});return s2(D!=null&&D>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,L,s,a,l,u,r),g.createElement("div",{id:p?"".concat(p):void 0,className:Hr("recharts-responsive-container",x),style:a2(a2({},j),{},{width:s,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:w},g.createElement("div",{style:eB({width:s,height:a})},g.createElement(AP,{width:D,height:L},m)))}),oB=g.forwardRef((e,t)=>{var r=jb();if(Xo(r.width)&&Xo(r.height))return e.children;var{width:n,height:s}=tB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=CP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Pt(a)&&Pt(l)?g.createElement(AP,{width:a,height:l},e.children):g.createElement(aB,Zx({},e,{width:n,height:s,ref:t}))});function PP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var fp=()=>{var e,t=ji(),r=kt(BU),n=kt(dp),s=(e=kt(up))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},lB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},cB=()=>{var e;return(e=kt(is))!==null&&e!==void 0?e:lB},uB=()=>kt(po),dB=()=>kt(go),Nr=e=>e.layout.layoutType,hp=()=>kt(Nr),fB=()=>{var e=hp();return e!==void 0},mp=e=>{var t=wn(),r=ji(),{width:n,height:s}=e,a=jb(),l=n,u=s;return a&&(l=a.width>0?a.width:n,u=a.height>0?a.height:s),g.useEffect(()=>{!r&&Xo(l)&&Xo(u)&&t(dU({width:l,height:u}))},[t,r,l,u]),null},hB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},OP=ri({name:"legend",initialState:hB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Fn()},removeLegendPayload:{reducer(e,t){var r=to(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Fn()}}}),{setLegendSize:bee,setLegendSettings:wee,addLegendPayload:mB,removeLegendPayload:pB}=OP.actions,gB=OP.reducer;function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ev.apply(null,arguments)}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){yB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yB(e,t,r){return(t=xB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xB(e){var t=vB(e,"string");return typeof t=="symbol"?t:t+""}function vB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bB(e){return Array.isArray(e)&&Pa(e[0])&&Pa(e[1])?e.join(" ~ "):e}var wB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:x=!1}=e,v=()=>{if(a&&a.length){var A={padding:0,margin:0},D=(u?rp(a,u):a).map((L,R)=>{if(L.type==="none")return null;var J=L.formatter||l||bB,{value:ne,name:ie}=L,q=ne,de=ie;if(J){var W=J(ne,ie,L,R,a);if(Array.isArray(W))[q,de]=W;else if(W!=null)q=W;else return null}var G=P0({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:G},Pa(de)?g.createElement("span",{className:"recharts-tooltip-item-name"},de):null,Pa(de)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},q),g.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:A},D)}return null},j=P0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=P0({margin:0},s),S=!ss(f),_=S?f:"",E=Hr("recharts-default-tooltip",d),C=Hr("recharts-tooltip-label",m);S&&p&&a!==void 0&&a!==null&&(_=p(f,a));var T=x?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",ev({className:E,style:j},T),g.createElement("p",{className:C,style:w},g.isValidElement(_)?_:"".concat(_)),v())},Xu="recharts-tooltip-wrapper",jB={visibility:"hidden"};function SB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Hr(Xu,{["".concat(Xu,"-right")]:Pt(r)&&t&&Pt(t.x)&&r>=t.x,["".concat(Xu,"-left")]:Pt(r)&&t&&Pt(t.x)&&r<t.x,["".concat(Xu,"-bottom")]:Pt(n)&&t&&Pt(t.y)&&n>=t.y,["".concat(Xu,"-top")]:Pt(n)&&t&&Pt(t.y)&&n<t.y})}function l2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&Pt(a[n]))return a[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var x=d[n];if(x==null)return 0;if(l[n]){var v=f,j=x;return v<j?Math.max(p,x):Math.max(f,x)}if(m==null)return 0;var w=p+u,S=x+m;return w>S?Math.max(f,x):Math.max(p,x)}function kB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function NB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=l2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=l2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=kB({translateX:f,translateY:p,useTranslate3d:u})):m=jB,{cssProperties:m,cssClasses:SB({translateX:f,translateY:p,coordinate:r})}}function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){tv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tv(e,t,r){return(t=_B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _B(e){var t=CB(e,"string");return typeof t=="symbol"?t:t+""}function CB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EB extends g.PureComponent{constructor(){super(...arguments),tv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),tv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:x,viewBox:v,wrapperStyle:j,lastBoundingBox:w,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=NB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:x,viewBox:v}),T=_?{}:gh(gh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),A=gh(gh({},T),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:A,ref:S},a)}}var AB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hu={devToolsEnabled:!1,isSsr:AB()},TP=()=>{var e;return(e=kt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){PB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PB(e,t,r){return(t=OB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OB(e){var t=TB(e,"string");return typeof t=="symbol"?t:t+""}function TB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f2={curveBasisClosed:zL,curveBasisOpen:UL,curveBasis:LL,curveBumpX:NL,curveBumpY:_L,curveLinearClosed:BL,curveLinear:ep,curveMonotoneX:WL,curveMonotoneY:VL,curveNatural:qL,curveStep:HL,curveStepAfter:GL,curveStepBefore:KL},um=e=>bn(e.x)&&bn(e.y),h2=e=>e.base!=null&&um(e.base)&&um(e),Qu=e=>e.x,Zu=e=>e.y,IB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Hd(e));return(r==="curveMonotone"||r==="curveBump")&&t?f2["".concat(r).concat(t==="vertical"?"Y":"X")]:f2[r]||ep},DB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,l=IB(t,s),u=a?r.filter(um):r,d;if(Array.isArray(n)){var m=r.map((v,j)=>d2(d2({},v),{},{base:n[j]}));s==="vertical"?d=ch().y(Zu).x1(Qu).x0(v=>v.base.x):d=ch().x(Qu).y1(Zu).y0(v=>v.base.y);var f=d.defined(h2).curve(l),p=a?m.filter(h2):m;return f(p)}s==="vertical"&&Pt(n)?d=ch().y(Zu).x1(Qu).x0(n):Pt(n)?d=ch().x(Qu).y1(Zu).y0(n):d=SA().x(Qu).y(Zu);var x=d.defined(um).curve(l);return x(u)},IP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?DB(e):n;return g.createElement("path",rv({},Jo(e),xz(e),{className:Hr("recharts-curve",t),d:a===null?void 0:a,ref:s}))},$B=["x","y","top","left","width","height","className"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(null,arguments)}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){MB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MB(e,t,r){return(t=FB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FB(e){var t=LB(e,"string");return typeof t=="symbol"?t:t+""}function LB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zB(e,t){if(e==null)return{};var r,n,s=UB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),WB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:l=0,className:u}=e,d=zB(e,$B),m=RB({x:t,y:r,top:n,left:s,width:a,height:l},d);return!Pt(t)||!Pt(r)||!Pt(a)||!Pt(l)||!Pt(n)||!Pt(s)?null:g.createElement("path",nv({},Fi(m),{className:Hr("recharts-cross",u),d:BB(t,r,a,l,n,s)}))};function VB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){qB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qB(e,t,r){return(t=HB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),DP=(e,t,r)=>e.map(n=>"".concat(GB(n)," ").concat(t,"ms ").concat(r)).join(","),YB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Td=(e,t)=>Object.keys(t).reduce((r,n)=>g2(g2({},r),{},{[n]:e(n,t[n])}),{});function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){JB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JB(e,t,r){return(t=XB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XB(e){var t=QB(e,"string");return typeof t=="symbol"?t:t+""}function QB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dm=(e,t,r)=>e+(t-e)*r,sv=e=>{var{from:t,to:r}=e;return t!==r},$P=(e,t,r)=>{var n=Td((s,a)=>{if(sv(a)){var[l,u]=e(a.from,a.to,a.velocity);return Rn(Rn({},a),{},{from:l,velocity:u})}return a},t);return r<1?Td((s,a)=>sv(a)?Rn(Rn({},a),{},{velocity:dm(a.velocity,n[s].velocity,r),from:dm(a.from,n[s].from,r)}):a,t):$P(e,n,r-1)};function ZB(e,t,r,n,s,a){var l,u=n.reduce((x,v)=>Rn(Rn({},x),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),d=()=>Td((x,v)=>v.from,u),m=()=>!Object.values(u).filter(sv).length,f=null,p=x=>{l||(l=x);var v=x-l,j=v/r.dt;u=$P(r,u,j),s(Rn(Rn(Rn({},e),t),d())),l=x,m()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var x;(x=f)===null||x===void 0||x()})}function e7(e,t,r,n,s,a,l){var u=null,d=s.reduce((p,x)=>Rn(Rn({},p),{},{[x]:[e[x],t[x]]}),{}),m,f=p=>{m||(m=p);var x=(p-m)/n,v=Td((w,S)=>dm(...S,r(x)),d);if(a(Rn(Rn(Rn({},e),t),v)),x<1)u=l.setTimeout(f);else{var j=Td((w,S)=>dm(...S,r(1)),d);a(Rn(Rn(Rn({},e),t),j))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const t7=(e,t,r,n,s,a)=>{var l=YB(e,t);return r==null?()=>(s(Rn(Rn({},e),t)),()=>{}):r.isStepper===!0?ZB(e,t,r,l,s,a):e7(e,t,r,n,l,s,a)};var fm=1e-4,RP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],MP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),x2=(e,t)=>r=>{var n=RP(e,t);return MP(n,r)},r7=(e,t)=>r=>{var n=RP(e,t),s=[...n.map((a,l)=>a*l).slice(1),0];return MP(s,r)},n7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((s=a[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=a[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},s7=(e,t,r,n)=>{var s=x2(e,r),a=x2(t,n),l=r7(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,x=0;x<8;++x){var v=s(p)-f,j=l(p);if(Math.abs(v-f)<fm||j<fm)return a(p);p=u(p-v/j)}return a(p)};return d.isStepper=!1,d},v2=function(){return s7(...n7(...arguments))},i7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,x=d*s/1e3+l;return Math.abs(x-u)<fm&&Math.abs(p)<fm?[u,0]:[x,p]};return a.isStepper=!0,a.dt=s,a},a7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return v2(e);case"spring":return i7();default:if(e.split("(")[0]==="cubic-bezier")return v2(e)}return typeof e=="function"?e:null};function o7(e){var t,r=()=>null,n=!1,s=null,a=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(a.bind(null,m),d);return}a(d),s=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),a(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class l7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function c7(){return o7(new l7)}var u7=g.createContext(c7);function d7(e,t){var r=g.useContext(u7);return g.useMemo(()=>t??r(e),[e,t,r])}var f7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},b2={t:0},O0={t:1};function Sb(e){var t=Bi(e,f7),{isActive:r,canBegin:n,duration:s,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=d7(t.animationId,t.animationManager),[p,x]=g.useState(r?b2:O0),v=g.useRef(null);return g.useEffect(()=>{r||x(O0)},[r]),g.useEffect(()=>{if(!r||!n)return fu;var j=t7(b2,O0,a7(a),s,x,f.getTimeoutController()),w=()=>{v.current=j()};return f.start([d,l,w,s,u]),()=>{f.stop(),v.current&&v.current(),u()}},[r,n,s,a,l,d,u,f]),m(p.t)}function kb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Ed(t)),n=g.useRef(e);return n.current!==e&&(r.current=Ed(t),n.current=e),r.current}var h7=["radius"],m7=["radius"];function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){p7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hm.apply(null,arguments)}function S2(e,t){if(e==null)return{};var r,n,s=x7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k2=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,x=4;p<x;p++)f[p]=s[p]>a?a:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(a>0&&s===+s&&s>0){var v=Math.min(a,s);m="M ".concat(e,",").concat(t+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+u*v,",").concat(t,`
            L `).concat(e+r-u*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*v,`
            L `).concat(e+r,",").concat(t+n-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r-u*v,",").concat(t+n,`
            L `).concat(e+u*v,",").concat(t+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*v," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},N2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FP=e=>{var t=Bi(e,N2),r=g.useRef(null),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&s(ae)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:x,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:w}=t,S=g.useRef(u),_=g.useRef(d),E=g.useRef(a),C=g.useRef(l),T=g.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),A=kb(T,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var D=Hr("recharts-rectangle",f);if(!w){var L=Fi(t),{radius:R}=L,J=S2(L,h7);return g.createElement("path",hm({},J,{radius:typeof m=="number"?m:void 0,className:D,d:k2(a,l,u,d,m)}))}var ne=S.current,ie=_.current,q=E.current,de=C.current,W="0px ".concat(n===-1?1:n,"px"),G="".concat(n,"px 0px"),Q=DP(["strokeDasharray"],x,typeof p=="string"?p:N2.animationEasing);return g.createElement(Sb,{animationId:A,key:A,canBegin:n>0,duration:x,easing:p,isActive:w,begin:v},ae=>{var ee=gs(ne,u,ae),oe=gs(ie,d,ae),te=gs(q,a,ae),M=gs(de,l,ae);r.current&&(S.current=ee,_.current=oe,E.current=te,C.current=M);var X;j?ae>0?X={transition:Q,strokeDasharray:G}:X={strokeDasharray:W}:X={strokeDasharray:G};var me=Fi(t),{radius:xe}=me,Fe=S2(me,m7);return g.createElement("path",hm({},Fe,{radius:typeof m=="number"?m:void 0,className:D,d:k2(te,M,ee,oe,m),ref:r,style:j2(j2({},X),t.style)}))})};function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){v7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v7(e,t,r){return(t=b7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mm=Math.PI/180,j7=e=>e*180/Math.PI,ys=(e,t,r,n)=>({x:e+Math.cos(-mm*n)*r,y:t+Math.sin(-mm*n)*r}),S7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},k7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},N7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,l=k7({x:r,y:n},{x:s,y:a});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>a&&(d=2*Math.PI-d),{radius:l,angle:j7(d),angleInRadian:d}},_7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},C7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return e+l*360},E7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=N7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=_7(t),f=a,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?C2(C2({},t),{},{radius:s,angle:C7(f,t)}):null};function LP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,l=ys(t,r,n,s),u=ys(t,r,n,a);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(null,arguments)}var A7=(e,t)=>{var r=yi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},yh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/mm,p=d?s:s+a*f,x=ys(t,r,m,p),v=ys(t,r,n,p),j=d?s-a*f:s,w=ys(t,r,m*Math.cos(f*mm),j);return{center:x,circleTangency:v,lineTangency:w,theta:f}},zP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:l}=e,u=A7(a,l),d=a+u,m=ys(t,r,s,a),f=ys(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var x=ys(t,r,n,a),v=ys(t,r,n,d);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},P7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=yi(m-d),{circleTangency:p,lineTangency:x,theta:v}=yh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:a,cornerIsExternal:u}),{circleTangency:j,lineTangency:w,theta:S}=yh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-v-S;if(_<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):zP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:T,theta:A}=yh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:D,lineTangency:L,theta:R}=yh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),J=u?Math.abs(d-m):Math.abs(d-m)-A-R;if(J<0&&a===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(J>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},O7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UP=e=>{var t=Bi(e,O7),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(a<s||m===f)return null;var x=Hr("recharts-sector",p),v=a-s,j=ma(l,v,0,!0),w;return j>0&&Math.abs(m-f)<360?w=P7({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(j,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):w=zP({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:m,endAngle:f}),g.createElement("path",iv({},Fi(t),{className:x,d:w}))};function T7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(FA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:a,outerRadius:l,angle:u}=t,d=ys(n,s,a,u),m=ys(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return LP(t)}}var T0={},I0={},D0={},E2;function I7(){return E2||(E2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(D0)),D0}var A2;function D7(){return A2||(A2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(I0)),I0}var P2;function $7(){return P2||(P2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JA(),r=D7();function n(s,a,l){l&&typeof l!="number"&&t.isIterateeCall(s,a,l)&&(a=l=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),l=l===void 0?s<a?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((a-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(T0)),T0}var $0,O2;function R7(){return O2||(O2=1,$0=$7().range),$0}var M7=R7();const BP=pa(M7);function Ko(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function F7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nb(e){let t,r,n;e.length!==2?(t=Ko,r=(u,d)=>Ko(e(u),d),n=(u,d)=>e(u)-d):(t=e===Ko||e===F7?e:L7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function a(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:a}}function L7(){return 0}function WP(e){return e===null?NaN:+e}function*z7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const U7=Nb(Ko),Jd=U7.right;Nb(WP).center;class T2 extends Map{constructor(t,r=V7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(I2(this,t))}has(t){return super.has(I2(this,t))}set(t,r){return super.set(B7(this,t),r)}delete(t){return super.delete(W7(this,t))}}function I2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function B7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function W7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function V7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function q7(e=Ko){if(e===Ko)return VP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function VP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const H7=Math.sqrt(50),K7=Math.sqrt(10),G7=Math.sqrt(2);function pm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),l=a>=H7?10:a>=K7?5:a>=G7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?pm(e,t,r*2):[u,d,m]}function av(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,l]=n?pm(t,e,r):pm(e,t,r);if(!(a>=s))return[];const u=a-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function ov(e,t,r){return t=+t,e=+e,r=+r,pm(e,t,r)[2]}function lv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?ov(t,e,r):ov(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function D2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function $2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function qP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?VP:q7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),x=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),v=Math.max(r,Math.floor(t-m*p/d+x)),j=Math.min(n,Math.floor(t+(d-m)*p/d+x));qP(e,t,v,j,s)}const a=e[t];let l=r,u=n;for(ed(e,r,t),s(e[n],a)>0&&ed(e,r,n);l<u;){for(ed(e,l,u),++l,--u;s(e[l],a)<0;)++l;for(;s(e[u],a)>0;)--u}s(e[r],a)===0?ed(e,r,u):(++u,ed(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function ed(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Y7(e,t,r){if(e=Float64Array.from(z7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return $2(e);if(t>=1)return D2(e);var n,s=(n-1)*t,a=Math.floor(s),l=D2(qP(e,a).subarray(0,a+1)),u=$2(e.subarray(a+1));return l+(u-l)*(s-a)}}function J7(e,t,r=WP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),l=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return l+(u-l)*(s-a)}}function X7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Wi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cv=Symbol("implicit");function _b(){var e=new T2,t=[],r=[],n=cv;function s(a){let l=e.get(a);if(l===void 0){if(n!==cv)return n;e.set(a,l=t.push(a)-1)}return r[l%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new T2;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return _b(t,r).unknown(n)},Wi.apply(s,arguments),s}function Cb(){var e=_b().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var x=t().length,v=s<n,j=v?s:n,w=v?n:s;a=(w-j)/Math.max(1,x-d+m*2),u&&(a=Math.floor(a)),j+=(w-j-a*(x-d))*f,l=a*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=X7(x).map(function(_){return j+a*_});return r(v?S.reverse():S)}return e.domain=function(x){return arguments.length?(t(x),p()):t()},e.range=function(x){return arguments.length?([n,s]=x,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(x){return[n,s]=x,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(x){return arguments.length?(u=!!x,p()):u},e.padding=function(x){return arguments.length?(d=Math.min(1,m=+x),p()):d},e.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),p()):d},e.paddingOuter=function(x){return arguments.length?(m=+x,p()):m},e.align=function(x){return arguments.length?(f=Math.max(0,Math.min(1,x)),p()):f},e.copy=function(){return Cb(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Wi.apply(p(),arguments)}function HP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return HP(t())},e}function Q7(){return HP(Cb.apply(null,arguments).paddingInner(1))}function Eb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function KP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Xd(){}var Id=.7,gm=1/Id,Hc="\\s*([+-]?\\d+)\\s*",Dd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z7=/^#([0-9a-f]{3,8})$/,e9=new RegExp(`^rgb\\(${Hc},${Hc},${Hc}\\)$`),t9=new RegExp(`^rgb\\(${Ea},${Ea},${Ea}\\)$`),r9=new RegExp(`^rgba\\(${Hc},${Hc},${Hc},${Dd}\\)$`),n9=new RegExp(`^rgba\\(${Ea},${Ea},${Ea},${Dd}\\)$`),s9=new RegExp(`^hsl\\(${Dd},${Ea},${Ea}\\)$`),i9=new RegExp(`^hsla\\(${Dd},${Ea},${Ea},${Dd}\\)$`),R2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eb(Xd,$d,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:M2,formatHex:M2,formatHex8:a9,formatHsl:o9,formatRgb:F2,toString:F2});function M2(){return this.rgb().formatHex()}function a9(){return this.rgb().formatHex8()}function o9(){return GP(this).formatHsl()}function F2(){return this.rgb().formatRgb()}function $d(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Z7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?L2(t):r===3?new Zs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?xh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?xh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=e9.exec(e))?new Zs(t[1],t[2],t[3],1):(t=t9.exec(e))?new Zs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=r9.exec(e))?xh(t[1],t[2],t[3],t[4]):(t=n9.exec(e))?xh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=s9.exec(e))?B2(t[1],t[2]/100,t[3]/100,1):(t=i9.exec(e))?B2(t[1],t[2]/100,t[3]/100,t[4]):R2.hasOwnProperty(e)?L2(R2[e]):e==="transparent"?new Zs(NaN,NaN,NaN,0):null}function L2(e){return new Zs(e>>16&255,e>>8&255,e&255,1)}function xh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Zs(e,t,r,n)}function l9(e){return e instanceof Xd||(e=$d(e)),e?(e=e.rgb(),new Zs(e.r,e.g,e.b,e.opacity)):new Zs}function uv(e,t,r,n){return arguments.length===1?l9(e):new Zs(e,t,r,n??1)}function Zs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Eb(Zs,uv,KP(Xd,{brighter(e){return e=e==null?gm:Math.pow(gm,e),new Zs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new Zs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zs(Fl(this.r),Fl(this.g),Fl(this.b),ym(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z2,formatHex:z2,formatHex8:c9,formatRgb:U2,toString:U2}));function z2(){return`#${Ol(this.r)}${Ol(this.g)}${Ol(this.b)}`}function c9(){return`#${Ol(this.r)}${Ol(this.g)}${Ol(this.b)}${Ol((isNaN(this.opacity)?1:this.opacity)*255)}`}function U2(){const e=ym(this.opacity);return`${e===1?"rgb(":"rgba("}${Fl(this.r)}, ${Fl(this.g)}, ${Fl(this.b)}${e===1?")":`, ${e})`}`}function ym(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ol(e){return e=Fl(e),(e<16?"0":"")+e.toString(16)}function B2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new da(e,t,r,n)}function GP(e){if(e instanceof da)return new da(e.h,e.s,e.l,e.opacity);if(e instanceof Xd||(e=$d(e)),!e)return new da;if(e instanceof da)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(r-n)/u+(r<n)*6:r===a?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new da(l,u,d,e.opacity)}function u9(e,t,r,n){return arguments.length===1?GP(e):new da(e,t,r,n??1)}function da(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Eb(da,u9,KP(Xd,{brighter(e){return e=e==null?gm:Math.pow(gm,e),new da(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new da(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Zs(R0(e>=240?e-240:e+120,s,n),R0(e,s,n),R0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new da(W2(this.h),vh(this.s),vh(this.l),ym(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ym(this.opacity);return`${e===1?"hsl(":"hsla("}${W2(this.h)}, ${vh(this.s)*100}%, ${vh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W2(e){return e=(e||0)%360,e<0?e+360:e}function vh(e){return Math.max(0,Math.min(1,e||0))}function R0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ab=e=>()=>e;function d9(e,t){return function(r){return e+r*t}}function f9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function h9(e){return(e=+e)==1?YP:function(t,r){return r-t?f9(t,r,e):Ab(isNaN(t)?r:t)}}function YP(e,t){var r=t-e;return r?d9(e,r):Ab(isNaN(e)?t:e)}const V2=(function e(t){var r=h9(t);function n(s,a){var l=r((s=uv(s)).r,(a=uv(a)).r),u=r(s.g,a.g),d=r(s.b,a.b),m=YP(s.opacity,a.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function m9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function p9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function g9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),l;for(l=0;l<n;++l)s[l]=mu(e[l],t[l]);for(;l<r;++l)a[l]=t[l];return function(u){for(l=0;l<n;++l)a[l]=s[l](u);return a}}function y9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function xm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function x9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=mu(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var dv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M0=new RegExp(dv.source,"g");function v9(e){return function(){return e}}function b9(e){return function(t){return e(t)+""}}function w9(e,t){var r=dv.lastIndex=M0.lastIndex=0,n,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=dv.exec(e))&&(s=M0.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:xm(n,s)})),r=M0.lastIndex;return r<t.length&&(a=t.slice(r),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?b9(d[0].x):v9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function mu(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ab(t):(r==="number"?xm:r==="string"?(n=$d(t))?(t=n,V2):w9:t instanceof $d?V2:t instanceof Date?y9:p9(t)?m9:Array.isArray(t)?g9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x9:xm)(e,t)}function Pb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function j9(e,t){t===void 0&&(t=e,e=mu);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return a[u](l-u)}}function S9(e){return function(){return e}}function vm(e){return+e}var q2=[0,1];function Ms(e){return e}function fv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:S9(isNaN(t)?NaN:.5)}function k9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function N9(e,t,r){var n=e[0],s=e[1],a=t[0],l=t[1];return s<n?(n=fv(s,n),a=r(l,a)):(n=fv(n,s),a=r(a,l)),function(u){return a(n(u))}}function _9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=fv(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(u){var d=Jd(e,u,1,n)-1;return a[d](s[d](u))}}function Qd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pp(){var e=q2,t=q2,r=mu,n,s,a,l=Ms,u,d,m;function f(){var x=Math.min(e.length,t.length);return l!==Ms&&(l=k9(e[0],e[x-1])),u=x>2?_9:N9,d=m=null,p}function p(x){return x==null||isNaN(x=+x)?a:(d||(d=u(e.map(n),t,r)))(n(l(x)))}return p.invert=function(x){return l(s((m||(m=u(t,e.map(n),xm)))(x)))},p.domain=function(x){return arguments.length?(e=Array.from(x,vm),f()):e.slice()},p.range=function(x){return arguments.length?(t=Array.from(x),f()):t.slice()},p.rangeRound=function(x){return t=Array.from(x),r=Pb,f()},p.clamp=function(x){return arguments.length?(l=x?!0:Ms,f()):l!==Ms},p.interpolate=function(x){return arguments.length?(r=x,f()):r},p.unknown=function(x){return arguments.length?(a=x,p):a},function(x,v){return n=x,s=v,f()}}function Ob(){return pp()(Ms,Ms)}function C9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jc(e){return e=bm(Math.abs(e)),e?e[1]:NaN}function E9(e,t){return function(r,n){for(var s=r.length,a=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),a.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function A9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var P9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rd(e){if(!(t=P9.exec(e)))throw new Error("invalid format: "+e);var t;return new Tb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rd.prototype=Tb.prototype;function Tb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Tb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function O9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var JP;function T9(e,t){var r=bm(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(JP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return a===l?n:a>l?n+new Array(a-l+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+bm(e,Math.max(0,t+a-1))[0]}function H2(e,t){var r=bm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const K2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:C9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>H2(e*100,t),r:H2,s:T9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G2(e){return e}var Y2=Array.prototype.map,J2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function I9(e){var t=e.grouping===void 0||e.thousands===void 0?G2:E9(Y2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?G2:A9(Y2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Rd(p);var x=p.fill,v=p.align,j=p.sign,w=p.symbol,S=p.zero,_=p.width,E=p.comma,C=p.precision,T=p.trim,A=p.type;A==="n"?(E=!0,A="g"):K2[A]||(C===void 0&&(C=12),T=!0,A="g"),(S||x==="0"&&v==="=")&&(S=!0,x="0",v="=");var D=w==="$"?r:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",L=w==="$"?n:/[%p]/.test(A)?l:"",R=K2[A],J=/[defgprs%]/.test(A);C=C===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function ne(ie){var q=D,de=L,W,G,Q;if(A==="c")de=R(ie)+de,ie="";else{ie=+ie;var ae=ie<0||1/ie<0;if(ie=isNaN(ie)?d:R(Math.abs(ie),C),T&&(ie=O9(ie)),ae&&+ie==0&&j!=="+"&&(ae=!1),q=(ae?j==="("?j:u:j==="-"||j==="("?"":j)+q,de=(A==="s"?J2[8+JP/3]:"")+de+(ae&&j==="("?")":""),J){for(W=-1,G=ie.length;++W<G;)if(Q=ie.charCodeAt(W),48>Q||Q>57){de=(Q===46?s+ie.slice(W+1):ie.slice(W))+de,ie=ie.slice(0,W);break}}}E&&!S&&(ie=t(ie,1/0));var ee=q.length+ie.length+de.length,oe=ee<_?new Array(_-ee+1).join(x):"";switch(E&&S&&(ie=t(oe+ie,oe.length?_-de.length:1/0),oe=""),v){case"<":ie=q+ie+de+oe;break;case"=":ie=q+oe+ie+de;break;case"^":ie=oe.slice(0,ee=oe.length>>1)+q+ie+de+oe.slice(ee);break;default:ie=oe+q+ie+de;break}return a(ie)}return ne.toString=function(){return p+""},ne}function f(p,x){var v=m((p=Rd(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor(Jc(x)/3)))*3,w=Math.pow(10,-j),S=J2[8+j/3];return function(_){return v(w*_)+S}}return{format:m,formatPrefix:f}}var bh,Ib,XP;D9({thousands:",",grouping:[3],currency:["$",""]});function D9(e){return bh=I9(e),Ib=bh.format,XP=bh.formatPrefix,bh}function $9(e){return Math.max(0,-Jc(Math.abs(e)))}function R9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jc(t)/3)))*3-Jc(Math.abs(e)))}function M9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jc(t)-Jc(e))+1}function QP(e,t,r,n){var s=lv(e,t,r),a;switch(n=Rd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=R9(s,l))&&(n.precision=a),XP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=M9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=$9(s))&&(n.precision=a-(n.type==="%")*2);break}}return Ib(n)}function el(e){var t=e.domain;return e.ticks=function(r){var n=t();return av(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return QP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,l=n[s],u=n[a],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=a,a=m);f-- >0;){if(m=ov(l,u,r),m===d)return n[s]=l,n[a]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function ZP(){var e=Ob();return e.copy=function(){return Qd(e,ZP())},Wi.apply(e,arguments),el(e)}function e4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,vm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return e4(e).unknown(t)},e=arguments.length?Array.from(e,vm):[0,1],el(r)}function t4(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],l;return a<s&&(l=r,r=n,n=l,l=s,s=a,a=l),e[r]=t.floor(s),e[n]=t.ceil(a),e}function X2(e){return Math.log(e)}function Q2(e){return Math.exp(e)}function F9(e){return-Math.log(-e)}function L9(e){return-Math.exp(-e)}function z9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function U9(e){return e===10?z9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function B9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z2(e){return(t,r)=>-e(-t,r)}function Db(e){const t=e(X2,Q2),r=t.domain;let n=10,s,a;function l(){return s=B9(n),a=U9(n),r()[0]<0?(s=Z2(s),a=Z2(a),e(F9,L9)):e(X2,Q2),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let x=s(m),v=s(f),j,w;const S=u==null?10:+u;let _=[];if(!(n%1)&&v-x<S){if(x=Math.floor(x),v=Math.ceil(v),m>0){for(;x<=v;++x)for(j=1;j<n;++j)if(w=x<0?j/a(-x):j*a(x),!(w<m)){if(w>f)break;_.push(w)}}else for(;x<=v;++x)for(j=n-1;j>=1;--j)if(w=x>0?j/a(-x):j*a(x),!(w<m)){if(w>f)break;_.push(w)}_.length*2<S&&(_=av(m,f,S))}else _=av(x,v,Math.min(v-x,S)).map(a);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Rd(d)).precision==null&&(d.trim=!0),d=Ib(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(t4(r(),{floor:u=>a(Math.floor(s(u))),ceil:u=>a(Math.ceil(s(u)))})),t}function r4(){const e=Db(pp()).domain([1,10]);return e.copy=()=>Qd(e,r4()).base(e.base()),Wi.apply(e,arguments),e}function e_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function t_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $b(e){var t=1,r=e(e_(t),t_(t));return r.constant=function(n){return arguments.length?e(e_(t=+n),t_(t)):t},el(r)}function n4(){var e=$b(pp());return e.copy=function(){return Qd(e,n4()).constant(e.constant())},Wi.apply(e,arguments)}function r_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function W9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function V9(e){return e<0?-e*e:e*e}function Rb(e){var t=e(Ms,Ms),r=1;function n(){return r===1?e(Ms,Ms):r===.5?e(W9,V9):e(r_(r),r_(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},el(t)}function Mb(){var e=Rb(pp());return e.copy=function(){return Qd(e,Mb()).exponent(e.exponent())},Wi.apply(e,arguments),e}function q9(){return Mb.apply(null,arguments).exponent(.5)}function n_(e){return Math.sign(e)*e*e}function H9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function s4(){var e=Ob(),t=[0,1],r=!1,n;function s(a){var l=H9(e(a));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(a){return e.invert(n_(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,vm)).map(n_)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return s4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Wi.apply(s,arguments),el(s)}function i4(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=J7(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?n:t[Jd(r,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ko),s()},a.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return i4().domain(e).range(t).unknown(n)},Wi.apply(a,arguments)}function a4(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function l(d){return d!=null&&d<=d?s[Jd(n,d,0,r)]:a}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return a4().domain([e,t]).range(s).unknown(a)},Wi.apply(el(l),arguments)}function o4(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Jd(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return o4().domain(e).range(t).unknown(r)},Wi.apply(s,arguments)}const F0=new Date,L0=new Date;function Ln(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const l=s(a),u=s.ceil(a);return a-l<u-a?l:u},s.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),s.range=(a,l,u)=>{const d=[];if(a=s.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},s.filter=a=>Ln(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),r&&(s.count=(a,l)=>(F0.setTime(+a),L0.setTime(+l),e(F0),e(L0),Math.floor(r(F0,L0))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?l=>n(l)%a===0:l=>s.count(0,l)%a===0):s)),s}const wm=Ln(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ln(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):wm);wm.range;const Xa=1e3,Ri=Xa*60,Qa=Ri*60,lo=Qa*24,Fb=lo*7,s_=lo*30,z0=lo*365,Tl=Ln(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xa)},(e,t)=>(t-e)/Xa,e=>e.getUTCSeconds());Tl.range;const Lb=Ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getMinutes());Lb.range;const zb=Ln(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getUTCMinutes());zb.range;const Ub=Ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa-e.getMinutes()*Ri)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getHours());Ub.range;const Bb=Ln(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getUTCHours());Bb.range;const Zd=Ln(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ri)/lo,e=>e.getDate()-1);Zd.range;const gp=Ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1);gp.range;const l4=Ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));l4.range;function Xl(e){return Ln(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ri)/Fb)}const yp=Xl(0),jm=Xl(1),K9=Xl(2),G9=Xl(3),Xc=Xl(4),Y9=Xl(5),J9=Xl(6);yp.range;jm.range;K9.range;G9.range;Xc.range;Y9.range;J9.range;function Ql(e){return Ln(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Fb)}const xp=Ql(0),Sm=Ql(1),X9=Ql(2),Q9=Ql(3),Qc=Ql(4),Z9=Ql(5),eW=Ql(6);xp.range;Sm.range;X9.range;Q9.range;Qc.range;Z9.range;eW.range;const Wb=Ln(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Wb.range;const Vb=Ln(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Vb.range;const co=Ln(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ln(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});co.range;const uo=Ln(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ln(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});uo.range;function c4(e,t,r,n,s,a){const l=[[Tl,1,Xa],[Tl,5,5*Xa],[Tl,15,15*Xa],[Tl,30,30*Xa],[a,1,Ri],[a,5,5*Ri],[a,15,15*Ri],[a,30,30*Ri],[s,1,Qa],[s,3,3*Qa],[s,6,6*Qa],[s,12,12*Qa],[n,1,lo],[n,2,2*lo],[r,1,Fb],[t,1,s_],[t,3,3*s_],[e,1,z0]];function u(m,f,p){const x=f<m;x&&([m,f]=[f,m]);const v=p&&typeof p.range=="function"?p:d(m,f,p),j=v?v.range(m,+f+1):[];return x?j.reverse():j}function d(m,f,p){const x=Math.abs(f-m)/p,v=Nb(([,,S])=>S).right(l,x);if(v===l.length)return e.every(lv(m/z0,f/z0,p));if(v===0)return wm.every(Math.max(lv(m,f,p),1));const[j,w]=l[x/l[v-1][2]<l[v][2]/x?v-1:v];return j.every(w)}return[u,d]}const[tW,rW]=c4(uo,Vb,xp,l4,Bb,zb),[nW,sW]=c4(co,Wb,yp,Zd,Ub,Lb);function U0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function B0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function td(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function iW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=rd(s),f=nd(s),p=rd(a),x=nd(a),v=rd(l),j=nd(l),w=rd(u),S=nd(u),_=rd(d),E=nd(d),C={a:ae,A:ee,b:oe,B:te,c:null,d:u_,e:u_,f:EW,g:FW,G:zW,H:NW,I:_W,j:CW,L:u4,m:AW,M:PW,p:M,q:X,Q:h_,s:m_,S:OW,u:TW,U:IW,V:DW,w:$W,W:RW,x:null,X:null,y:MW,Y:LW,Z:UW,"%":f_},T={a:me,A:xe,b:Fe,B:Se,c:null,d:d_,e:d_,f:qW,g:tV,G:nV,H:BW,I:WW,j:VW,L:f4,m:HW,M:KW,p:Re,q:ke,Q:h_,s:m_,S:GW,u:YW,U:JW,V:XW,w:QW,W:ZW,x:null,X:null,y:eV,Y:rV,Z:sV,"%":f_},A={a:ne,A:ie,b:q,B:de,c:W,d:l_,e:l_,f:wW,g:o_,G:a_,H:c_,I:c_,j:yW,L:bW,m:gW,M:xW,p:J,q:pW,Q:SW,s:kW,S:vW,u:uW,U:dW,V:fW,w:cW,W:hW,x:G,X:Q,y:o_,Y:a_,Z:mW,"%":jW};C.x=D(r,C),C.X=D(n,C),C.c=D(t,C),T.x=D(r,T),T.X=D(n,T),T.c=D(t,T);function D(F,le){return function(ce){var K=[],Ye=-1,Ae=0,tt=F.length,St,pt,it;for(ce instanceof Date||(ce=new Date(+ce));++Ye<tt;)F.charCodeAt(Ye)===37&&(K.push(F.slice(Ae,Ye)),(pt=i_[St=F.charAt(++Ye)])!=null?St=F.charAt(++Ye):pt=St==="e"?" ":"0",(it=le[St])&&(St=it(ce,pt)),K.push(St),Ae=Ye+1);return K.push(F.slice(Ae,Ye)),K.join("")}}function L(F,le){return function(ce){var K=td(1900,void 0,1),Ye=R(K,F,ce+="",0),Ae,tt;if(Ye!=ce.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(Ae=B0(td(K.y,0,1)),tt=Ae.getUTCDay(),Ae=tt>4||tt===0?Sm.ceil(Ae):Sm(Ae),Ae=gp.offset(Ae,(K.V-1)*7),K.y=Ae.getUTCFullYear(),K.m=Ae.getUTCMonth(),K.d=Ae.getUTCDate()+(K.w+6)%7):(Ae=U0(td(K.y,0,1)),tt=Ae.getDay(),Ae=tt>4||tt===0?jm.ceil(Ae):jm(Ae),Ae=Zd.offset(Ae,(K.V-1)*7),K.y=Ae.getFullYear(),K.m=Ae.getMonth(),K.d=Ae.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),tt="Z"in K?B0(td(K.y,0,1)).getUTCDay():U0(td(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(tt+5)%7:K.w+K.U*7-(tt+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,B0(K)):U0(K)}}function R(F,le,ce,K){for(var Ye=0,Ae=le.length,tt=ce.length,St,pt;Ye<Ae;){if(K>=tt)return-1;if(St=le.charCodeAt(Ye++),St===37){if(St=le.charAt(Ye++),pt=A[St in i_?le.charAt(Ye++):St],!pt||(K=pt(F,ce,K))<0)return-1}else if(St!=ce.charCodeAt(K++))return-1}return K}function J(F,le,ce){var K=m.exec(le.slice(ce));return K?(F.p=f.get(K[0].toLowerCase()),ce+K[0].length):-1}function ne(F,le,ce){var K=v.exec(le.slice(ce));return K?(F.w=j.get(K[0].toLowerCase()),ce+K[0].length):-1}function ie(F,le,ce){var K=p.exec(le.slice(ce));return K?(F.w=x.get(K[0].toLowerCase()),ce+K[0].length):-1}function q(F,le,ce){var K=_.exec(le.slice(ce));return K?(F.m=E.get(K[0].toLowerCase()),ce+K[0].length):-1}function de(F,le,ce){var K=w.exec(le.slice(ce));return K?(F.m=S.get(K[0].toLowerCase()),ce+K[0].length):-1}function W(F,le,ce){return R(F,t,le,ce)}function G(F,le,ce){return R(F,r,le,ce)}function Q(F,le,ce){return R(F,n,le,ce)}function ae(F){return l[F.getDay()]}function ee(F){return a[F.getDay()]}function oe(F){return d[F.getMonth()]}function te(F){return u[F.getMonth()]}function M(F){return s[+(F.getHours()>=12)]}function X(F){return 1+~~(F.getMonth()/3)}function me(F){return l[F.getUTCDay()]}function xe(F){return a[F.getUTCDay()]}function Fe(F){return d[F.getUTCMonth()]}function Se(F){return u[F.getUTCMonth()]}function Re(F){return s[+(F.getUTCHours()>=12)]}function ke(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var le=D(F+="",C);return le.toString=function(){return F},le},parse:function(F){var le=L(F+="",!1);return le.toString=function(){return F},le},utcFormat:function(F){var le=D(F+="",T);return le.toString=function(){return F},le},utcParse:function(F){var le=L(F+="",!0);return le.toString=function(){return F},le}}}var i_={"-":"",_:" ",0:"0"},as=/^\s*\d+/,aW=/^%/,oW=/[\\^$*+?|[\]().{}]/g;function pr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function lW(e){return e.replace(oW,"\\$&")}function rd(e){return new RegExp("^(?:"+e.map(lW).join("|")+")","i")}function nd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function cW(e,t,r){var n=as.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function uW(e,t,r){var n=as.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function dW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function a_(e,t,r){var n=as.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function o_(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function mW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function pW(e,t,r){var n=as.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function gW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function l_(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function yW(e,t,r){var n=as.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function c_(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function xW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function vW(e,t,r){var n=as.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function bW(e,t,r){var n=as.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=as.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jW(e,t,r){var n=aW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function SW(e,t,r){var n=as.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function kW(e,t,r){var n=as.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function u_(e,t){return pr(e.getDate(),t,2)}function NW(e,t){return pr(e.getHours(),t,2)}function _W(e,t){return pr(e.getHours()%12||12,t,2)}function CW(e,t){return pr(1+Zd.count(co(e),e),t,3)}function u4(e,t){return pr(e.getMilliseconds(),t,3)}function EW(e,t){return u4(e,t)+"000"}function AW(e,t){return pr(e.getMonth()+1,t,2)}function PW(e,t){return pr(e.getMinutes(),t,2)}function OW(e,t){return pr(e.getSeconds(),t,2)}function TW(e){var t=e.getDay();return t===0?7:t}function IW(e,t){return pr(yp.count(co(e)-1,e),t,2)}function d4(e){var t=e.getDay();return t>=4||t===0?Xc(e):Xc.ceil(e)}function DW(e,t){return e=d4(e),pr(Xc.count(co(e),e)+(co(e).getDay()===4),t,2)}function $W(e){return e.getDay()}function RW(e,t){return pr(jm.count(co(e)-1,e),t,2)}function MW(e,t){return pr(e.getFullYear()%100,t,2)}function FW(e,t){return e=d4(e),pr(e.getFullYear()%100,t,2)}function LW(e,t){return pr(e.getFullYear()%1e4,t,4)}function zW(e,t){var r=e.getDay();return e=r>=4||r===0?Xc(e):Xc.ceil(e),pr(e.getFullYear()%1e4,t,4)}function UW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pr(t/60|0,"0",2)+pr(t%60,"0",2)}function d_(e,t){return pr(e.getUTCDate(),t,2)}function BW(e,t){return pr(e.getUTCHours(),t,2)}function WW(e,t){return pr(e.getUTCHours()%12||12,t,2)}function VW(e,t){return pr(1+gp.count(uo(e),e),t,3)}function f4(e,t){return pr(e.getUTCMilliseconds(),t,3)}function qW(e,t){return f4(e,t)+"000"}function HW(e,t){return pr(e.getUTCMonth()+1,t,2)}function KW(e,t){return pr(e.getUTCMinutes(),t,2)}function GW(e,t){return pr(e.getUTCSeconds(),t,2)}function YW(e){var t=e.getUTCDay();return t===0?7:t}function JW(e,t){return pr(xp.count(uo(e)-1,e),t,2)}function h4(e){var t=e.getUTCDay();return t>=4||t===0?Qc(e):Qc.ceil(e)}function XW(e,t){return e=h4(e),pr(Qc.count(uo(e),e)+(uo(e).getUTCDay()===4),t,2)}function QW(e){return e.getUTCDay()}function ZW(e,t){return pr(Sm.count(uo(e)-1,e),t,2)}function eV(e,t){return pr(e.getUTCFullYear()%100,t,2)}function tV(e,t){return e=h4(e),pr(e.getUTCFullYear()%100,t,2)}function rV(e,t){return pr(e.getUTCFullYear()%1e4,t,4)}function nV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Qc(e):Qc.ceil(e),pr(e.getUTCFullYear()%1e4,t,4)}function sV(){return"+0000"}function f_(){return"%"}function h_(e){return+e}function m_(e){return Math.floor(+e/1e3)}var Ic,m4,p4;iV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iV(e){return Ic=iW(e),m4=Ic.format,Ic.parse,p4=Ic.utcFormat,Ic.utcParse,Ic}function aV(e){return new Date(e)}function oV(e){return e instanceof Date?+e:+new Date(+e)}function qb(e,t,r,n,s,a,l,u,d,m){var f=Ob(),p=f.invert,x=f.domain,v=m(".%L"),j=m(":%S"),w=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),T=m("%Y");function A(D){return(d(D)<D?v:u(D)<D?j:l(D)<D?w:a(D)<D?S:n(D)<D?s(D)<D?_:E:r(D)<D?C:T)(D)}return f.invert=function(D){return new Date(p(D))},f.domain=function(D){return arguments.length?x(Array.from(D,oV)):x().map(aV)},f.ticks=function(D){var L=x();return e(L[0],L[L.length-1],D??10)},f.tickFormat=function(D,L){return L==null?A:m(L)},f.nice=function(D){var L=x();return(!D||typeof D.range!="function")&&(D=t(L[0],L[L.length-1],D??10)),D?x(t4(L,D)):f},f.copy=function(){return Qd(f,qb(e,t,r,n,s,a,l,u,d,m))},f}function lV(){return Wi.apply(qb(nW,sW,co,Wb,yp,Zd,Ub,Lb,Tl,m4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cV(){return Wi.apply(qb(tW,rW,uo,Vb,xp,gp,Bb,zb,Tl,p4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vp(){var e=0,t=1,r,n,s,a,l=Ms,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(a(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(x){var v,j;return arguments.length?([v,j]=x,l=p(v,j),m):[l(0),l(1)]}}return m.range=f(mu),m.rangeRound=f(Pb),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return a=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function tl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function g4(){var e=el(vp()(Ms));return e.copy=function(){return tl(e,g4())},yo.apply(e,arguments)}function y4(){var e=Db(vp()).domain([1,10]);return e.copy=function(){return tl(e,y4()).base(e.base())},yo.apply(e,arguments)}function x4(){var e=$b(vp());return e.copy=function(){return tl(e,x4()).constant(e.constant())},yo.apply(e,arguments)}function Hb(){var e=Rb(vp());return e.copy=function(){return tl(e,Hb()).exponent(e.exponent())},yo.apply(e,arguments)}function uV(){return Hb.apply(null,arguments).exponent(.5)}function v4(){var e=[],t=Ms;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ko),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>Y7(e,a/n))},r.copy=function(){return v4(t).domain(e)},yo.apply(r,arguments)}function bp(){var e=0,t=.5,r=1,n=1,s,a,l,u,d,m=Ms,f,p=!1,x;function v(w){return isNaN(w=+w)?x:(w=.5+((w=+f(w))-a)*(n*w<n*a?u:d),m(p?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([e,t,r]=w,s=f(e=+e),a=f(t=+t),l=f(r=+r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,v):[e,t,r]},v.clamp=function(w){return arguments.length?(p=!!w,v):p},v.interpolator=function(w){return arguments.length?(m=w,v):m};function j(w){return function(S){var _,E,C;return arguments.length?([_,E,C]=S,m=j9(w,[_,E,C]),v):[m(0),m(.5),m(1)]}}return v.range=j(mu),v.rangeRound=j(Pb),v.unknown=function(w){return arguments.length?(x=w,v):x},function(w){return f=w,s=w(e),a=w(t),l=w(r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,v}}function b4(){var e=el(bp()(Ms));return e.copy=function(){return tl(e,b4())},yo.apply(e,arguments)}function w4(){var e=Db(bp()).domain([.1,1,10]);return e.copy=function(){return tl(e,w4()).base(e.base())},yo.apply(e,arguments)}function j4(){var e=$b(bp());return e.copy=function(){return tl(e,j4()).constant(e.constant())},yo.apply(e,arguments)}function Kb(){var e=Rb(bp());return e.copy=function(){return tl(e,Kb()).exponent(e.exponent())},yo.apply(e,arguments)}function dV(){return Kb.apply(null,arguments).exponent(.5)}const dd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Cb,scaleDiverging:b4,scaleDivergingLog:w4,scaleDivergingPow:Kb,scaleDivergingSqrt:dV,scaleDivergingSymlog:j4,scaleIdentity:e4,scaleImplicit:cv,scaleLinear:ZP,scaleLog:r4,scaleOrdinal:_b,scalePoint:Q7,scalePow:Mb,scaleQuantile:i4,scaleQuantize:a4,scaleRadial:s4,scaleSequential:g4,scaleSequentialLog:y4,scaleSequentialPow:Hb,scaleSequentialQuantile:v4,scaleSequentialSqrt:uV,scaleSequentialSymlog:x4,scaleSqrt:q9,scaleSymlog:n4,scaleThreshold:o4,scaleTime:lV,scaleUtc:cV,tickFormat:QP},Symbol.toStringTag,{value:"Module"}));var rl=e=>e.chartData,fV=je([rl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Gb=(e,t,r,n)=>n?fV(e):rl(e);function Vl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(bn(t)&&bn(r))return!0}return!1}function p_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function S4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(bn(r))s=r;else if(typeof r=="function")return;if(bn(n))a=n;else if(typeof n=="function")return;var l=[s,a];if(Vl(l))return l}}function hV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Vl(n))return p_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Pt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&JN.test(s)){var d=JN.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(Pt(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&XN.test(a)){var f=XN.exec(a);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var x=[l,u];if(Vl(x))return t==null?x:p_(x,t,r)}}}var pu=1e9,mV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Jb,Jr=!0,zi="[DecimalError] ",Ll=zi+"Invalid argument: ",Yb=zi+"Exponent out of range: ",gu=Math.floor,kl=Math.pow,pV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gi,es=1e7,Vr=7,k4=9007199254740991,km=gu(k4/Vr),st={};st.absoluteValue=st.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};st.comparedTo=st.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};st.decimalPlaces=st.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Vr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};st.dividedBy=st.div=function(e){return ro(this,new this.constructor(e))};st.dividedToIntegerBy=st.idiv=function(e){var t=this,r=t.constructor;return Pr(ro(t,new r(e),0,1),r.precision)};st.equals=st.eq=function(e){return!this.cmp(e)};st.exponent=function(){return En(this)};st.greaterThan=st.gt=function(e){return this.cmp(e)>0};st.greaterThanOrEqualTo=st.gte=function(e){return this.cmp(e)>=0};st.isInteger=st.isint=function(){return this.e>this.d.length-2};st.isNegative=st.isneg=function(){return this.s<0};st.isPositive=st.ispos=function(){return this.s>0};st.isZero=function(){return this.s===0};st.lessThan=st.lt=function(e){return this.cmp(e)<0};st.lessThanOrEqualTo=st.lte=function(e){return this.cmp(e)<1};st.logarithm=st.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(gi))throw Error(zi+"NaN");if(r.s<1)throw Error(zi+(r.s?"NaN":"-Infinity"));return r.eq(gi)?new n(0):(Jr=!1,t=ro(Md(r,a),Md(e,a),a),Jr=!0,Pr(t,s))};st.minus=st.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C4(t,e):N4(t,(e.s=-e.s,e))};st.modulo=st.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(zi+"NaN");return r.s?(Jr=!1,t=ro(r,e,0,1).times(e),Jr=!0,r.minus(t)):Pr(new n(r),s)};st.naturalExponential=st.exp=function(){return _4(this)};st.naturalLogarithm=st.ln=function(){return Md(this)};st.negated=st.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};st.plus=st.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N4(t,e):C4(t,(e.s=-e.s,e))};st.precision=st.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ll+e);if(t=En(s)+1,n=s.d.length-1,r=n*Vr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};st.squareRoot=st.sqrt=function(){var e,t,r,n,s,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(zi+"NaN")}for(e=En(u),Jr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=_a(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=gu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(a=n,n=a.plus(ro(u,a,l+2)).times(.5),_a(a.d).slice(0,l)===(t=_a(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Pr(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if(t!="9999")break;l+=4}return Jr=!0,Pr(n,r)};st.times=st.mul=function(e){var t,r,n,s,a,l,u,d,m,f=this,p=f.constructor,x=f.d,v=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=x.length,m=v.length,d<m&&(a=x,x=v,v=a,l=d,d=m,m=l),a=[],l=d+m,n=l;n--;)a.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=a[s]+v[n]*x[s-n-1]+t,a[s--]=u%es|0,t=u/es|0;a[s]=(a[s]+t)%es|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Jr?Pr(e,p.precision):e};st.toDecimalPlaces=st.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Oa(e,0,pu),t===void 0?t=n.rounding:Oa(t,0,8),Pr(r,e+En(r)+1,t))};st.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ql(n,!0):(Oa(e,0,pu),t===void 0?t=s.rounding:Oa(t,0,8),n=Pr(new s(n),e+1,t),r=ql(n,!0,e+1)),r};st.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?ql(s):(Oa(e,0,pu),t===void 0?t=a.rounding:Oa(t,0,8),n=Pr(new a(s),e+En(s)+1,t),r=ql(n.abs(),!1,e+En(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};st.toInteger=st.toint=function(){var e=this,t=e.constructor;return Pr(new t(e),En(e)+1,t.rounding)};st.toNumber=function(){return+this};st.toPower=st.pow=function(e){var t,r,n,s,a,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(gi);if(u=new d(u),!u.s){if(e.s<1)throw Error(zi+"Infinity");return u}if(u.eq(gi))return u;if(n=d.precision,e.eq(gi))return Pr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,a=u.s,l){if((r=f<0?-f:f)<=k4){for(s=new d(gi),t=Math.ceil(n/Vr+4),Jr=!1;r%2&&(s=s.times(u),y_(s.d,t)),r=gu(r/2),r!==0;)u=u.times(u),y_(u.d,t);return Jr=!0,e.s<0?new d(gi).div(s):Pr(s,n)}}else if(a<0)throw Error(zi+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Jr=!1,s=e.times(Md(u,n+m)),Jr=!0,s=_4(s),s.s=a,s};st.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=En(s),n=ql(s,r<=a.toExpNeg||r>=a.toExpPos)):(Oa(e,1,pu),t===void 0?t=a.rounding:Oa(t,0,8),s=Pr(new a(s),e,t),r=En(s),n=ql(s,e<=r||r<=a.toExpNeg,e)),n};st.toSignificantDigits=st.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Oa(e,1,pu),t===void 0?t=n.rounding:Oa(t,0,8)),Pr(new n(r),e,t)};st.toString=st.valueOf=st.val=st.toJSON=st[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=En(e),r=e.constructor;return ql(e,t<=r.toExpNeg||t>=r.toExpPos)};function N4(e,t){var r,n,s,a,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Jr?Pr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),a=l-s,a){for(a<0?(n=d,a=-a,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Vr),u=l>u?l+1:u+1,a>u&&(a=u,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,n=m,m=d,d=n),r=0;a;)r=(d[--a]=d[a]+m[a]+r)/es|0,d[a]%=es;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Jr?Pr(t,p):t}function Oa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ll+e)}function _a(e){var t,r,n,s=e.length-1,a="",l=e[0];if(s>0){for(a+=l,t=1;t<s;t++)n=e[t]+"",r=Vr-n.length,r&&(a+=Uo(r)),a+=n;l=e[t],n=l+"",r=Vr-n.length,r&&(a+=Uo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var ro=(function(){function e(n,s){var a,l=0,u=n.length;for(n=n.slice();u--;)a=n[u]*s+l,n[u]=a%es|0,l=a/es|0;return l&&n.unshift(l),n}function t(n,s,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,a){for(var l=0;a--;)n[a]-=l,l=n[a]<s[a]?1:0,n[a]=l*es+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,l){var u,d,m,f,p,x,v,j,w,S,_,E,C,T,A,D,L,R,J=n.constructor,ne=n.s==s.s?1:-1,ie=n.d,q=s.d;if(!n.s)return new J(n);if(!s.s)throw Error(zi+"Division by zero");for(d=n.e-s.e,L=q.length,A=ie.length,v=new J(ne),j=v.d=[],m=0;q[m]==(ie[m]||0);)++m;if(q[m]>(ie[m]||0)&&--d,a==null?E=a=J.precision:l?E=a+(En(n)-En(s))+1:E=a,E<0)return new J(0);if(E=E/Vr+2|0,m=0,L==1)for(f=0,q=q[0],E++;(m<A||f)&&E--;m++)C=f*es+(ie[m]||0),j[m]=C/q|0,f=C%q|0;else{for(f=es/(q[0]+1)|0,f>1&&(q=e(q,f),ie=e(ie,f),L=q.length,A=ie.length),T=L,w=ie.slice(0,L),S=w.length;S<L;)w[S++]=0;R=q.slice(),R.unshift(0),D=q[0],q[1]>=es/2&&++D;do f=0,u=t(q,w,L,S),u<0?(_=w[0],L!=S&&(_=_*es+(w[1]||0)),f=_/D|0,f>1?(f>=es&&(f=es-1),p=e(q,f),x=p.length,S=w.length,u=t(p,w,x,S),u==1&&(f--,r(p,L<x?R:q,x))):(f==0&&(u=f=1),p=q.slice()),x=p.length,x<S&&p.unshift(0),r(w,p,S),u==-1&&(S=w.length,u=t(q,w,L,S),u<1&&(f++,r(w,L<S?R:q,S))),S=w.length):u===0&&(f++,w=[0]),j[m++]=f,u&&w[0]?w[S++]=ie[T]||0:(w=[ie[T]],S=1);while((T++<A||w[0]!==void 0)&&E--)}return j[0]||j.shift(),v.e=d,Pr(v,l?a+En(v)+1:a)}})();function _4(e,t){var r,n,s,a,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(En(e)>16)throw Error(Yb+En(e));if(!e.s)return new f(gi);for(Jr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(kl(2,m))/Math.LN10*2+5|0,u+=n,r=s=a=new f(gi),f.precision=u;;){if(s=Pr(s.times(e),u),r=r.times(++d),l=a.plus(ro(s,r,u)),_a(l.d).slice(0,u)===_a(a.d).slice(0,u)){for(;m--;)a=Pr(a.times(a),u);return f.precision=p,t==null?(Jr=!0,Pr(a,p)):a}a=l}}function En(e){for(var t=e.e*Vr,r=e.d[0];r>=10;r/=10)t++;return t}function W0(e,t,r){if(t>e.LN10.sd())throw Jr=!0,r&&(e.precision=r),Error(zi+"LN10 precision limit exceeded");return Pr(new e(e.LN10),t)}function Uo(e){for(var t="";e--;)t+="0";return t}function Md(e,t){var r,n,s,a,l,u,d,m,f,p=1,x=10,v=e,j=v.d,w=v.constructor,S=w.precision;if(v.s<1)throw Error(zi+(v.s?"NaN":"-Infinity"));if(v.eq(gi))return new w(0);if(t==null?(Jr=!1,m=S):m=t,v.eq(10))return t==null&&(Jr=!0),W0(w,m);if(m+=x,w.precision=m,r=_a(j),n=r.charAt(0),a=En(v),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=_a(v.d),n=r.charAt(0),p++;a=En(v),n>1?(v=new w("0."+r),a++):v=new w(n+"."+r.slice(1))}else return d=W0(w,m+2,S).times(a+""),v=Md(new w(n+"."+r.slice(1)),m-x).plus(d),w.precision=S,t==null?(Jr=!0,Pr(v,S)):v;for(u=l=v=ro(v.minus(gi),v.plus(gi),m),f=Pr(v.times(v),m),s=3;;){if(l=Pr(l.times(f),m),d=u.plus(ro(l,new w(s),m)),_a(d.d).slice(0,m)===_a(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(W0(w,m+2,S).times(a+""))),u=ro(u,new w(p),m),w.precision=S,t==null?(Jr=!0,Pr(u,S)):u;u=d,s+=2}}function g_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=gu(r/Vr),e.d=[],n=(r+1)%Vr,r<0&&(n+=Vr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Vr;n<s;)e.d.push(+t.slice(n,n+=Vr));t=t.slice(n),n=Vr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Jr&&(e.e>km||e.e<-km))throw Error(Yb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Pr(e,t,r){var n,s,a,l,u,d,m,f,p=e.d;for(l=1,a=p[0];a>=10;a/=10)l++;if(n=t-l,n<0)n+=Vr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Vr),a=p.length,f>=a)return e;for(m=a=p[f],l=1;a>=10;a/=10)l++;n%=Vr,s=n-Vr+l}if(r!==void 0&&(a=kl(10,l-s-1),u=m/a%10|0,d=t<0||p[f+1]!==void 0||m%a,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/kl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(a=En(e),p.length=1,t=t-a-1,p[0]=kl(10,(Vr-t%Vr)%Vr),e.e=gu(-t/Vr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,a=1,f--):(p.length=f+1,a=kl(10,Vr-n),p[f]=s>0?(m/kl(10,l-s)%kl(10,s)|0)*a:0),d)for(;;)if(f==0){(p[0]+=a)==es&&(p[0]=1,++e.e);break}else{if(p[f]+=a,p[f]!=es)break;p[f--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(Jr&&(e.e>km||e.e<-km))throw Error(Yb+En(e));return e}function C4(e,t){var r,n,s,a,l,u,d,m,f,p,x=e.constructor,v=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Jr?Pr(t,v):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(v/Vr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(a=s;a&&d[--a]===0;)d[a]=es-1;--d[a],d[s]+=es}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Jr?Pr(t,v):t):new x(0)}function ql(e,t,r){var n,s=En(e),a=_a(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Uo(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Uo(-s-1)+a,r&&(n=r-l)>0&&(a+=Uo(n))):s>=l?(a+=Uo(s+1-l),r&&(n=r-s-1)>0&&(a=a+"."+Uo(n))):((n=s+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(a+="."),a+=Uo(n))),e.s<0?"-"+a:a}function y_(e,t){if(e.length>t)return e.length=t,!0}function E4(e){var t,r,n;function s(a){var l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,a instanceof s){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ll+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return g_(l,a.toString())}else if(typeof a!="string")throw Error(Ll+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,pV.test(a))g_(l,a);else throw Error(Ll+a)}if(s.prototype=st,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=E4,s.config=s.set=gV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function gV(e){if(!e||typeof e!="object")throw Error(zi+"Object expected");var t,r,n,s=["precision",1,pu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(gu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ll+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ll+r+": "+n);return this}var Jb=E4(mV);gi=new Jb(1);const Sr=Jb;var yV=e=>e,A4={},P4=e=>e===A4,x_=e=>function t(){return arguments.length===0||arguments.length===1&&P4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},O4=(e,t)=>e===1?t:x_(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(l=>l!==A4).length;return a>=e?t(...n):O4(e-a,x_(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>P4(f)?u.shift():f);return t(...m,...u)}))}),wp=e=>O4(e.length,e),hv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},xV=wp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),vV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return yV;var s=r.reverse(),a=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},mv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),T4=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function I4(e){var t;return e===0?t=1:t=Math.floor(new Sr(e).abs().log(10).toNumber())+1,t}function D4(e,t,r){for(var n=new Sr(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}wp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});wp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});wp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var $4=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},R4=(e,t,r)=>{if(e.lte(0))return new Sr(0);var n=I4(e.toNumber()),s=new Sr(10).pow(n),a=e.div(s),l=n!==1?.05:.1,u=new Sr(Math.ceil(a.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Sr(d.toNumber()):new Sr(Math.ceil(d.toNumber()))},bV=(e,t,r)=>{var n=new Sr(1),s=new Sr(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new Sr(10).pow(I4(e)-1),s=new Sr(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Sr(Math.floor(e)))}else e===0?s=new Sr(Math.floor((t-1)/2)):r||(s=new Sr(Math.floor(e)));var l=Math.floor((t-1)/2),u=vV(xV(d=>s.add(new Sr(d-l).mul(n)).toNumber()),hv);return u(0,t)},M4=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Sr(0),tickMin:new Sr(0),tickMax:new Sr(0)};var l=R4(new Sr(r).sub(t).div(n-1),s,a),u;t<=0&&r>=0?u=new Sr(0):(u=new Sr(t).add(r).div(2),u=u.sub(new Sr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Sr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?M4(t,r,n,s,a+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Sr(d).mul(l)),tickMax:u.add(new Sr(m).mul(l))})};function wV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[l,u]=$4([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...hv(0,n-1).map(()=>1/0)]:[...hv(0,n-1).map(()=>-1/0),u];return t>r?mv(d):d}if(l===u)return bV(l,n,s);var{step:m,tickMin:f,tickMax:p}=M4(l,u,a,s,0),x=D4(f,p.add(new Sr(.1).mul(m)),m);return t>r?mv(x):x}function jV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=$4([r,n]);if(a===-1/0||l===1/0)return[r,n];if(a===l)return[a];var u=Math.max(t,2),d=R4(new Sr(l).sub(a).div(u-1),s,0),m=[...D4(new Sr(a),new Sr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?mv(m):m}var SV=T4(wV),kV=T4(jV),F4=e=>e.rootProps.maxBarSize,NV=e=>e.rootProps.barGap,L4=e=>e.rootProps.barCategoryGap,_V=e=>e.rootProps.barSize,jp=e=>e.rootProps.stackOffset,Xb=e=>e.options.chartName,Qb=e=>e.rootProps.syncId,z4=e=>e.rootProps.syncMethod,Zb=e=>e.options.eventEmitter,ei={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ya={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},hi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},CV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:Ya.reversed,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:Ya.type,unit:void 0},EV={allowDataOverflow:hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hi.scale,tick:hi.tick,tickCount:hi.tickCount,ticks:void 0,type:hi.type,unit:void 0},AV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ya.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},PV={allowDataOverflow:hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hi.scale,tick:hi.tick,tickCount:hi.tickCount,ticks:void 0,type:"category",unit:void 0},ew=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?AV:CV,tw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?PV:EV,kp=e=>e.polarOptions,rw=je([po,go,is],S7),U4=je([kp,rw],(e,t)=>{if(e!=null)return ma(e.innerRadius,t,0)}),B4=je([kp,rw],(e,t)=>{if(e!=null)return ma(e.outerRadius,t,t*.8)}),OV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},W4=je([kp],OV);je([ew,W4],Sp);var V4=je([rw,U4,B4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});je([tw,V4],Sp);var q4=je([Nr,kp,U4,B4,po,go],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:ma(l,s,s/2),cy:ma(u,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),zn=(e,t)=>t,Np=(e,t,r)=>r;function nw(e){return e==null?void 0:e.id}function H4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=nw(u);m.forEach((p,x)=>{var v=a==null||s?x:String(Fs(p,a,null)),j=Fs(p,u.dataKey,0),w;l.has(v)?w=l.get(v):w={},Object.assign(w,{[f]:j}),l.set(v,w)})}}),Array.from(l.values())}function _p(e){return e.stackId!=null&&e.dataKey!=null}var Cp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ep(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function TV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Un=e=>{var t=Nr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},yu=e=>e.tooltip.settings.axisId;function v_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(r),!0).forEach(function(n){IV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IV(e,t,r){return(t=DV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e){var t=$V(e,"string");return typeof t=="symbol"?t:t+""}function $V(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pv=[0,"auto"],ui={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},K4=(e,t)=>e.cartesianAxis.xAxis[t],xo=(e,t)=>{var r=K4(e,t);return r??ui},di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yd},G4=(e,t)=>e.cartesianAxis.yAxis[t],vo=(e,t)=>{var r=G4(e,t);return r??di},RV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},sw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??RV},Ls=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);case"zAxis":return sw(e,r);case"angleAxis":return ew(e,r);case"radiusAxis":return tw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},MV=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ef=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);case"angleAxis":return ew(e,r);case"radiusAxis":return tw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Y4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function J4(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var iw=e=>e.graphicalItems.cartesianItems,FV=je([zn,Np],J4),X4=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),tf=je([iw,Ls,FV],X4,{memoizeOptions:{resultEqualityCheck:Ep}}),Q4=je([tf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_p)),Z4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),LV=je([tf],Z4),eO=e=>e.map(t=>t.data).filter(Boolean).flat(1),zV=je([tf],eO,{memoizeOptions:{resultEqualityCheck:Ep}}),tO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},aw=je([zV,Gb],tO),rO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Fs(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Fs(s,n)}))):e.map(n=>({value:n})),Ap=je([aw,Ls,tf],rO);function nO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Oh(e){if(Pa(e)||e instanceof Date){var t=Number(e);if(bn(t))return t}}function b_(e){if(Array.isArray(e)){var t=[Oh(e[0]),Oh(e[1])];return Vl(t)?t:void 0}var r=Oh(e);if(r!=null)return[r,r]}function fo(e){return e.map(Oh).filter(oz)}function UV(e,t,r){return!r||typeof t!="number"||Aa(t)?[]:r.length?fo(r.flatMap(n=>{var s=Fs(e,n.dataKey),a,l;if(Array.isArray(s)?[a,l]=s:a=l=s,!(!bn(a)||!bn(l)))return[t-a,t+l]})):[]}var Bn=e=>{var t=Un(e),r=yu(e);return ef(e,t,r)},sO=je([Bn],e=>e==null?void 0:e.dataKey),BV=je([Q4,Gb,Bn],H4),iO=(e,t,r)=>{var n={},s=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=u.map(nw);return[l,{stackedData:SU(e,d,r),graphicalItems:u}]}))},gv=je([BV,Q4,jp],iO),aO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var l=EU(e,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},WV=je([Ls],e=>e.allowDataOverflow),ow=e=>{var t;if(e==null||!("domain"in e))return pv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=fo(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:pv},oO=je([Ls],ow),lO=je([oO,WV],S4),VV=je([gv,rl,zn,lO],aO,{memoizeOptions:{resultEqualityCheck:Cp}}),lw=e=>e.errorBars,qV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>nO(r,n)),_m=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},cO=(e,t,r,n,s)=>{var a,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>nO(s,_)),x=Fs(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),v=UV(u,x,p);if(v.length>=2){var j=Math.min(...v),w=Math.max(...v);(a==null||j<a)&&(a=j),(l==null||w>l)&&(l=w)}var S=b_(x);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=b_(Fs(u,t.dataKey));d!=null&&(a=a==null?d[0]:Math.min(a,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),bn(a)&&bn(l))return[a,l]},HV=je([aw,Ls,LV,lw,zn],cO,{memoizeOptions:{resultEqualityCheck:Cp}});function KV(e){var{value:t}=e;if(Pa(t)||t instanceof Date)return t}var GV=(e,t,r)=>{var n=e.map(KV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&$A(n))?BP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},uO=e=>e.referenceElements.dots,xu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),YV=je([uO,zn,Np],xu),dO=e=>e.referenceElements.areas,JV=je([dO,zn,Np],xu),fO=e=>e.referenceElements.lines,XV=je([fO,zn,Np],xu),hO=(e,t)=>{var r=fo(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},QV=je(YV,zn,hO),mO=(e,t)=>{var r=fo(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ZV=je([JV,zn],mO);function eq(e){var t;if(e.x!=null)return fo([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:fo(r)}function tq(e){var t;if(e.y!=null)return fo([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:fo(r)}var pO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?eq(n):tq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},rq=je([XV,zn],pO),nq=je(QV,rq,ZV,(e,t,r)=>_m(e,r,t)),gO=(e,t,r,n,s,a,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?_m(n,a,s):_m(a,s);return hV(t,m,e.allowDataOverflow)},sq=je([Ls,oO,lO,VV,HV,nq,Nr,zn],gO,{memoizeOptions:{resultEqualityCheck:Cp}}),iq=[0,1],yO=(e,t,r,n,s,a,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Jl(t,a);if(m&&u==null){var f;return BP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?GV(n,e,m):s==="expand"?iq:l}},cw=je([Ls,Nr,aw,Ap,jp,zn,sq],yO),xO=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(Hd(a));return u in dd?u:"point"}}},rf=je([Ls,Nr,Y4,Xb,zn],xO);function aq(e){if(e!=null){if(e in dd)return dd[e]();var t="scale".concat(Hd(e));if(t in dd)return dd[t]()}}function uw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=aq(t);if(s!=null){var a=s.domain(r).range(n);return xU(a),a}}}var vO=(e,t,r)=>{var n=ow(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Vl(e))return SV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Vl(e))return kV(e,t.tickCount,t.allowDecimals)}},dw=je([cw,ef,rf],vO),bO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Vl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,a),Math.max(l,u)]}return t},oq=je([Ls,cw,dw,zn],bO),lq=je(Ap,Ls,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(fo(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a+1]-n[a];r=Math.min(r,l)}return r/s}}),wO=je(lq,Nr,L4,is,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!bn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var l=ma(r,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),cq=(e,t)=>{var r=xo(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"xAxis",t,r.padding)},uq=(e,t)=>{var r=vo(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"yAxis",t,r.padding)},dq=je(xo,cq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),fq=je(vo,uq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),hq=je([is,dq,dp,up,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),mq=je([is,Nr,fq,dp,up,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:l}=s;return a?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),nf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return hq(e,r,n);case"yAxis":return mq(e,r,n);case"zAxis":return(s=sw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return W4(e);case"radiusAxis":return V4(e,r);default:return}},jO=je([Ls,nf],Sp),vu=je([Ls,rf,oq,jO],uw);je([tf,lw,zn],qV);function SO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Pp=(e,t)=>t,Op=(e,t,r)=>r,pq=je(lp,Pp,Op,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(SO)),gq=je(cp,Pp,Op,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(SO)),kO=(e,t)=>({width:e.width,height:t.height}),yq=(e,t)=>{var r=typeof t.width=="number"?t.width:Yd;return{width:r,height:e.height}},NO=je(is,xo,kO),xq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},vq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},bq=je(go,is,pq,Pp,Op,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=kO(t,u);l==null&&(l=xq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),wq=je(po,is,gq,Pp,Op,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=yq(t,u);l==null&&(l=vq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),jq=(e,t)=>{var r=xo(e,t);if(r!=null)return bq(e,r.orientation,r.mirror)},Sq=je([is,xo,jq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),kq=(e,t)=>{var r=vo(e,t);if(r!=null)return wq(e,r.orientation,r.mirror)},Nq=je([is,vo,kq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),_O=je(is,vo,(e,t)=>{var r=typeof t.width=="number"?t.width:Yd;return{width:r,height:e.height}}),w_=(e,t,r)=>{switch(t){case"xAxis":return NO(e,r).width;case"yAxis":return _O(e,r).height;default:return}},CO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:l}=r,u=Jl(e,n),d=t.map(m=>m.value);if(l&&u&&a==="category"&&s&&$A(d))return d}},fw=je([Nr,Ap,Ls,zn],CO),EO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,l=Jl(e,n);if(l&&(s==="number"||a!=="auto"))return t.map(u=>u.value)}},hw=je([Nr,Ap,ef,zn],EO);je([Nr,MV,rf,vu,fw,hw,nf,dw,zn],(e,t,r,n,s,a,l,u,d)=>{if(t!=null){var m=Jl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var _q=(e,t,r,n,s,a,l,u,d)=>{if(!(t==null||n==null)){var m=Jl(e,d),{type:f,ticks:p,tickCount:x}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=f==="category"&&n.bandwidth?n.bandwidth()/v:0;j=d==="angleAxis"&&a!=null&&a.length>=2?yi(a[0]-a[1])*2*j:j;var w=p||s;if(w){var S=w.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+j,value:_,offset:j}});return S.filter(_=>bn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+j,value:_,index:E,offset:j})).filter(_=>bn(_.coordinate)):n.ticks?n.ticks(x).map(_=>({coordinate:n(_)+j,value:_,offset:j})):n.domain().map((_,E)=>({coordinate:n(_)+j,value:l?l[_]:_,index:E,offset:j}))}},AO=je([Nr,ef,rf,vu,dw,nf,fw,hw,zn],_q),Cq=(e,t,r,n,s,a,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Jl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?yi(n[0]-n[1])*2*m:m,u&&a?a.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Zc=je([Nr,ef,vu,nf,fw,hw,zn],Cq),eu=je(Ls,vu,(e,t)=>{if(!(e==null||t==null))return Nm(Nm({},e),{},{scale:t})}),Eq=je([Ls,rf,cw,jO],uw);je((e,t,r)=>sw(e,r),Eq,(e,t)=>{if(!(e==null||t==null))return Nm(Nm({},e),{},{scale:t})});var Aq=je([Nr,lp,cp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),PO=e=>e.options.defaultTooltipEventType,OO=e=>e.options.validateTooltipEventTypes;function TO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function mw(e,t){var r=PO(e),n=OO(e);return TO(t,r,n)}function Pq(e){return kt(t=>mw(t,e))}var IO=(e,t)=>{var r,n=Number(t);if(!(Aa(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Oq=e=>e.tooltip.settings,qo={active:!1,index:null,dataKey:void 0,coordinate:void 0},Tq={itemInteraction:{click:qo,hover:qo},axisInteraction:{click:qo,hover:qo},keyboardInteraction:qo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},DO=ri({name:"tooltip",initialState:Tq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Fn()},removeTooltipEntrySettings:{reducer(e,t){var r=to(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Fn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Iq,removeTooltipEntrySettings:Dq,setTooltipSettingsState:$q,setActiveMouseOverItemIndex:$O,mouseLeaveItem:Rq,mouseLeaveChart:RO,setActiveClickItemIndex:Mq,setMouseOverAxisIndex:MO,setMouseClickAxisIndex:Fq,setSyncInteraction:yv,setKeyboardInteraction:xv}=DO.actions,Lq=DO.reducer;function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(n){zq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zq(e,t,r){return(t=Uq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Vq(e){return e.index!=null}var FO=(e,t,r,n)=>{if(t==null)return qo;var s=Wq(e,t,r);if(s==null)return qo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Vq(s)){if(a)return wh(wh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return wh(wh({},qo),{},{coordinate:s.coordinate})},pw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!bn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},LO=(e,t,r,n,s,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var f=s==null?void 0:s[Number(a)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},zO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===s})},sf=e=>e.options.tooltipPayloadSearcher,bu=e=>e.tooltip;function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qq(e,t,r){return(t=Hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gq(e,t){return e??t}var UO=(e,t,r,n,s,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((x,v)=>{var j,{dataDefinedOnItem:w,settings:S}=v,_=Gq(w,u),E=Array.isArray(_)?kP(_,m,f):_,C=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:n,T=S==null?void 0:S.nameKey,A;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?A=az(E,n,s):A=a(E,t,d,T),Array.isArray(A))A.forEach(L=>{var R=k_(k_({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});x.push(QN({tooltipEntrySettings:R,dataKey:L.dataKey,payload:L.payload,value:Fs(L.payload,L.dataKey),name:L.name}))});else{var D;x.push(QN({tooltipEntrySettings:S,dataKey:C,payload:A,value:Fs(A,C),name:(D=Fs(A,T))!==null&&D!==void 0?D:S==null?void 0:S.name}))}return x},p)}},gw=je([Bn,Nr,Y4,Xb,Un],xO),Yq=je([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Jq=je([Un,yu],J4),af=je([Yq,Bn,Jq],X4,{memoizeOptions:{resultEqualityCheck:Ep}}),Xq=je([af],e=>e.filter(_p)),Qq=je([af],eO,{memoizeOptions:{resultEqualityCheck:Ep}}),wu=je([Qq,rl],tO),Zq=je([Xq,rl,Bn],H4),yw=je([wu,Bn,af],rO),BO=je([Bn],ow),eH=je([Bn],e=>e.allowDataOverflow),WO=je([BO,eH],S4),tH=je([af],e=>e.filter(_p)),rH=je([Zq,tH,jp],iO),nH=je([rH,rl,Un,WO],aO),sH=je([af],Z4),iH=je([wu,Bn,sH,lw,Un],cO,{memoizeOptions:{resultEqualityCheck:Cp}}),aH=je([uO,Un,yu],xu),oH=je([aH,Un],hO),lH=je([dO,Un,yu],xu),cH=je([lH,Un],mO),uH=je([fO,Un,yu],xu),dH=je([uH,Un],pO),fH=je([oH,dH,cH],_m),hH=je([Bn,BO,WO,nH,iH,fH,Nr,Un],gO),VO=je([Bn,Nr,wu,yw,jp,Un,hH],yO),mH=je([VO,Bn,gw],vO),pH=je([Bn,VO,mH,Un],bO),qO=e=>{var t=Un(e),r=yu(e),n=!1;return nf(e,t,r,n)},HO=je([Bn,qO],Sp),KO=je([Bn,gw,pH,HO],uw),gH=je([Nr,yw,Bn,Un],CO),yH=je([Nr,yw,Bn,Un],EO),xH=(e,t,r,n,s,a,l,u)=>{if(t){var{type:d}=t,m=Jl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?yi(s[0]-s[1])*2*p:p,m&&l?l.map((x,v)=>({coordinate:n(x)+p,value:x,index:v,offset:p})):n.domain().map((x,v)=>({coordinate:n(x)+p,value:a?a[x]:x,index:v,offset:p}))}}},bo=je([Nr,Bn,gw,KO,qO,gH,yH,Un],xH),xw=je([PO,OO,Oq],(e,t,r)=>TO(r.shared,e,t)),GO=e=>e.tooltip.settings.trigger,vw=e=>e.tooltip.settings.defaultIndex,Tp=je([bu,xw,GO,vw],FO),tu=je([Tp,wu],pw),YO=je([bo,tu],IO),JO=je([Tp],e=>{if(e)return e.dataKey}),XO=je([bu,xw,GO,vw],zO),vH=je([po,go,Nr,is,bo,vw,XO,sf],LO),bH=je([Tp,vH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),wH=je([Tp],e=>e.active),jH=je([XO,tu,rl,sO,YO,sf,xw],UO);je([jH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function __(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(n){SH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SH(e,t,r){return(t=kH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _H=()=>kt(Bn),CH=()=>{var e=_H(),t=kt(bo),r=kt(KO);return cm(!e||!r?void 0:__(__({},e),{},{scale:r}),t)};function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(r),!0).forEach(function(n){EH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EH(e,t,r){return(t=AH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=PH(e,"string");return typeof t=="symbol"?t:t+""}function PH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OH=(e,t,r,n)=>{var s=t.find(a=>a&&a.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},TH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var a=s.coordinate,{radius:l}=n;return Dc(Dc(Dc({},n),ys(n.cx,n.cy,l,a)),{},{angle:a,radius:l})}var u=s.coordinate,{angle:d}=n;return Dc(Dc(Dc({},n),ys(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function IH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var QO=(e,t,r,n,s)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,x=void 0;if(yi(f-m)!==yi(p-f)){var v=[];if(yi(p-f)===yi(s[1]-s[0])){x=p;var j=f+s[1]-s[0];v[0]=Math.min(j,(j+m)/2),v[1]=Math.max(j,(j+m)/2)}else{x=m;var w=p+s[1]-s[0];v[0]=Math.min(f,(w+f)/2),v[1]=Math.max(f,(w+f)/2)}var S=[Math.min(f,(x+f)/2),Math.max(f,(x+f)/2)];if(e>S[0]&&e<=S[1]||e>=v[0]&&e<=v[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},DH=()=>kt(Xb),bw=(e,t)=>t,ZO=(e,t,r)=>r,ww=(e,t,r,n)=>n,$H=je(bo,e=>rp(e,t=>t.coordinate)),jw=je([bu,bw,ZO,ww],FO),eT=je([jw,wu],pw),RH=(e,t,r)=>{if(t!=null){var n=bu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tT=je([bu,bw,ZO,ww],zO),Cm=je([po,go,Nr,is,bo,ww,tT,sf],LO),MH=je([jw,Cm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rT=je([bo,eT],IO),FH=je([tT,eT,rl,sO,rT,sf,bw],UO),LH=je([jw],e=>({isActive:e.active,activeIndex:e.index})),zH=(e,t,r,n,s,a,l)=>{if(!(!e||!r||!n||!s)&&IH(e,l)){var u=AU(e,t),d=QO(u,a,s,r,n),m=OH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},UH=(e,t,r,n,s,a,l)=>{if(!(!e||!n||!s||!a||!r)){var u=E7(e,r);if(u){var d=PU(u,t),m=QO(d,l,a,n,s),f=TH(t,a,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},BH=(e,t,r,n,s,a,l,u)=>{if(!(!e||!t||!n||!s||!a))return t==="horizontal"||t==="vertical"?zH(e,t,n,s,a,l,u):UH(e,t,r,n,s,a,l)},WH=je(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),VH=je(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ei)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:TV}});function E_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function A_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(r),!0).forEach(function(n){qH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=KH(e,"string");return typeof t=="symbol"?t:t+""}function KH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GH={},YH={zIndexMap:Object.values(ei).reduce((e,t)=>A_(A_({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),GH)},JH=new Set(Object.values(ei));function XH(e){return JH.has(e)}var nT=ri({name:"zIndex",initialState:YH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Fn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!XH(r)&&delete e.zIndexMap[r])},prepare:Fn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Fn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Fn()}}}),{registerZIndexPortal:QH,unregisterZIndexPortal:ZH,registerZIndexPortalId:eK,unregisterZIndexPortalId:tK}=nT.actions,rK=nT.reducer;function nl(e){var{zIndex:t,children:r}=e,n=fB(),s=n&&t!==void 0&&t!==0,a=ji(),l=wn();g.useLayoutEffect(()=>s?(l(QH({zIndex:t})),()=>{l(ZH({zIndex:t}))}):fu,[l,t,s]);var u=kt(m=>WH(m,t,a));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?Fv.createPortal(r,d):null}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return(t=sK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sK(e){var t=iK(e,"string");return typeof t=="symbol"?t:t+""}function iK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return g.isValidElement(t)?g.cloneElement(t,n):g.createElement(r,n)}function oK(e){var t,{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,x=n,v=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var j,w,S;if(f==="ScatterChart")j=p,w=WB,S=ei.cursorLine;else if(f==="BarChart")j=VB(u,p,a,l),w=FP,S=ei.cursorRectangle;else if(u==="radial"&&FA(p)){var{cx:_,cy:E,radius:C,startAngle:T,endAngle:A}=LP(p);j={cx:_,cy:E,startAngle:T,endAngle:A,innerRadius:C,outerRadius:C},w=UP,S=ei.cursorLine}else j={points:T7(u,p,a)},w=IP,S=ei.cursorLine;var D=typeof d=="object"&&"className"in d?d.className:void 0,L=jh(jh(jh(jh({stroke:"#ccc",pointerEvents:"none"},a),j),ab(d)),{},{payload:x,payloadIndex:v,className:Hr("recharts-tooltip-cursor",D)});return g.createElement(nl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},g.createElement(aK,{cursor:d,cursorComp:w,cursorProps:L}))}function lK(e){var t=CH(),r=cB(),n=hp(),s=DH();return t==null||r==null||n==null||s==null?null:g.createElement(oK,vv({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var sT=g.createContext(null),cK=()=>g.useContext(sT),V0={exports:{}},O_;function uK(){return O_||(O_=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function a(d,m,f,p,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new s(f,p||d,x),j=r?r+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],v]:d._events[j].push(v):(d._events[j]=v,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,v=p.length,j=new Array(v);x<v;x++)j[x]=p[x].fn;return j},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,x,v,j){var w=r?r+m:m;if(!this._events[w])return!1;var S=this._events[w],_=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,x),!0;case 5:return S.fn.call(S.context,f,p,x,v),!0;case 6:return S.fn.call(S.context,f,p,x,v,j),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var T=S.length,A;for(C=0;C<T;C++)switch(S[C].once&&this.removeListener(m,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,x);break;default:if(!E)for(A=1,E=new Array(_-1);A<_;A++)E[A-1]=arguments[A];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return a(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return a(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,x){var v=r?r+m:m;if(!this._events[v])return this;if(!f)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===f&&(!x||j.once)&&(!p||j.context===p)&&l(this,v);else{for(var w=0,S=[],_=j.length;w<_;w++)(j[w].fn!==f||x&&!j[w].once||p&&j[w].context!==p)&&S.push(j[w]);S.length?this._events[v]=S.length===1?S[0]:S:l(this,v)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(V0)),V0.exports}var dK=uK();const fK=pa(dK);var Fd=new fK,bv="recharts.syncEvent.tooltip",T_="recharts.syncEvent.brush";function hK(e,t){if(t){var r=Number.parseInt(t,10);if(!Aa(r))return e==null?void 0:e[r]}}var mK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iT=ri({name:"options",initialState:mK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),pK=iT.reducer,{createEventEmitter:gK}=iT.actions;function yK(e){return e.tooltip.syncInteraction}var xK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aT=ri({name:"chartData",initialState:xK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:I_,setDataStartEndIndexes:vK,setComputedData:jee}=aT.actions,bK=aT.reducer,wK=["x","y"];function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D_(Object(r),!0).forEach(function(n){jK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jK(e,t,r){return(t=SK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=kK(e,"string");return typeof t=="symbol"?t:t+""}function kK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NK(e,t){if(e==null)return{};var r,n,s=_K(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _K(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function CK(){var e=kt(Qb),t=kt(Zb),r=wn(),n=kt(z4),s=kt(bo),a=hp(),l=fp(),u=kt(d=>d.rootProps.className);g.useEffect(()=>{if(e==null)return fu;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var x;if(l&&f!==null&&f!==void 0&&(x=f.payload)!==null&&x!==void 0&&x.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:j,y:w}=v,S=NK(v,wK),{x:_,y:E,width:C,height:T}=f.payload.sourceViewBox,A=$c($c({},S),{},{x:l.x+(C?(j-_)/C:0)*l.width,y:l.y+(T?(w-E)/T:0)*l.height});r($c($c({},f),{},{payload:$c($c({},f.payload),{},{coordinate:A})}))}else r(f);return}if(s!=null){var D;if(typeof n=="function"){var L={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},R=n(s,L);D=s[R]}else n==="value"&&(D=s.find(Q=>String(Q.value)===f.payload.label));var{coordinate:J}=f.payload;if(D==null||f.payload.active===!1||J==null||l==null){r(yv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:ne,y:ie}=J,q=Math.min(ne,l.x+l.width),de=Math.min(ie,l.y+l.height),W={x:a==="horizontal"?D.coordinate:q,y:a==="horizontal"?de:D.coordinate},G=yv({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(D.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(G)}}};return Fd.on(bv,d),()=>{Fd.off(bv,d)}},[u,r,t,e,n,s,a,l])}function EK(){var e=kt(Qb),t=kt(Zb),r=wn();g.useEffect(()=>{if(e==null)return fu;var n=(s,a,l)=>{t!==l&&e===s&&r(vK(a))};return Fd.on(T_,n),()=>{Fd.off(T_,n)}},[r,t,e])}function AK(){var e=wn();g.useEffect(()=>{e(gK())},[e]),CK(),EK()}function PK(e,t,r,n,s,a){var l=kt(v=>RH(v,e,t)),u=kt(Zb),d=kt(Qb),m=kt(z4),f=kt(yK),p=f==null?void 0:f.active,x=fp();g.useEffect(()=>{if(!p&&d!=null&&u!=null){var v=yv({active:a,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:x});Fd.emit(bv,d,v,u)}},[p,r,l,s,n,u,d,m,a,x])}function $_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$_(Object(r),!0).forEach(function(n){OK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OK(e,t,r){return(t=TK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TK(e){var t=IK(e,"string");return typeof t=="symbol"?t:t+""}function IK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DK(e){return e.dataKey}function $K(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(wB,t)}var M_=[],RK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function MK(e){var t,r,n=Bi(e,RK),{active:s,allowEscapeViewBox:a,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:x,position:v,reverseDirection:j,useTranslate3d:w,wrapperStyle:S,cursor:_,shared:E,trigger:C,defaultIndex:T,portal:A,axisId:D}=n,L=wn(),R=typeof T=="number"?String(T):T;g.useEffect(()=>{L($q({shared:E,trigger:C,axisId:D,active:s,defaultIndex:R}))},[L,E,C,D,s,R]);var J=fp(),ne=TP(),ie=Pq(E),{activeIndex:q,isActive:de}=(t=kt(Re=>LH(Re,ie,C,R)))!==null&&t!==void 0?t:{},W=kt(Re=>FH(Re,ie,C,R)),G=kt(Re=>rT(Re,ie,C,R)),Q=kt(Re=>MH(Re,ie,C,R)),ae=W,ee=cK(),oe=(r=s??de)!==null&&r!==void 0?r:!1,[te,M]=y8([ae,oe]),X=ie==="axis"?G:void 0;PK(ie,C,Q,X,q,oe);var me=A??ee;if(me==null||J==null||ie==null)return null;var xe=ae??M_;oe||(xe=M_),m&&xe.length&&(xe=Wz(xe.filter(Re=>Re.value!=null&&(Re.hide!==!0||n.includeHidden)),x,DK));var Fe=xe.length>0,Se=g.createElement(EB,{allowEscapeViewBox:a,animationDuration:l,animationEasing:u,isAnimationActive:f,active:oe,coordinate:Q,hasPayload:Fe,offset:p,position:v,reverseDirection:j,useTranslate3d:w,viewBox:J,wrapperStyle:S,lastBoundingBox:te,innerRef:M,hasPortalFromProps:!!A},$K(d,R_(R_({},n),{},{payload:xe,label:X,active:oe,activeIndex:q,coordinate:Q,accessibilityLayer:ne})));return g.createElement(g.Fragment,null,Fv.createPortal(Se,me),oe&&g.createElement(lK,{cursor:_,tooltipEventType:ie,coordinate:Q,payload:xe,index:q}))}var Sw=e=>null;Sw.displayName="Cell";function FK(e,t,r){return(t=LK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LK(e){var t=zK(e,"string");return typeof t=="symbol"?t:t+""}function zK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class UK{constructor(t){FK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(n){WK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WK(e,t,r){return(t=VK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VK(e){var t=qK(e,"string");return typeof t=="symbol"?t:t+""}function qK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HK={cacheSize:2e3,enableCache:!0},oT=BK({},HK),L_=new UK(oT.cacheSize),KK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z_="recharts_measurement_span";function GK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u)}var U_=(e,t)=>{try{var r=document.getElementById(z_);r||(r=document.createElement("span"),r.setAttribute("id",z_),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,KK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hu.isSsr)return{width:0,height:0};if(!oT.enableCache)return U_(t,r);var n=GK(t,r),s=L_.get(n);if(s)return s;var a=U_(t,r);return L_.set(n,a),a},B_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},XK=Object.keys(lT),Bc="NaN";function QK(e,t){return e*lT[t]}class Xs{static parse(t){var r,[,n,s]=(r=JK.exec(t))!==null&&r!==void 0?r:[];return new Xs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Aa(t)&&(this.unit=""),r!==""&&!YK.test(r)&&(this.num=NaN,this.unit=""),XK.includes(r)&&(this.num=QK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Xs(NaN,""):new Xs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Xs(NaN,""):new Xs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xs(NaN,""):new Xs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xs(NaN,""):new Xs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Aa(this.num)}}function cT(e){if(e.includes(Bc))return Bc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=B_.exec(t))!==null&&r!==void 0?r:[],l=Xs.parse(n??""),u=Xs.parse(a??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Bc;t=t.replace(B_,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,x]=(m=W_.exec(t))!==null&&m!==void 0?m:[],v=Xs.parse(f??""),j=Xs.parse(x??""),w=p==="+"?v.add(j):v.subtract(j);if(w.isNaN())return Bc;t=t.replace(W_,w.toString())}return t}var V_=/\(([^()]*)\)/;function ZK(e){for(var t=e,r;(r=V_.exec(t))!=null;){var[,n]=r;t=t.replace(V_,cT(n))}return t}function eG(e){var t=e.replace(/\s+/g,"");return t=ZK(t),t=cT(t),t}function tG(e){try{return eG(e)}catch{return Bc}}function q0(e){var t=tG(e.slice(5,-1));return t===Bc?"":t}var rG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],nG=["dx","dy","angle","className","breakAll"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function q_(e,t){if(e==null)return{};var r,n,s=sG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uT=/[ \f\n\r\t\v\u2028\u2029]+/,dT=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ss(t)||(r?s=t.toString().split(""):s=t.toString().split(uT));var a=s.map(u=>({word:u,width:bd(u,n).width})),l=r?0:bd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function iG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var fT=(e,t,r,n)=>e.reduce((s,a)=>{var{word:l,width:u}=a,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),hT=e=>e.reduce((t,r)=>t.width>r.width?t:r),aG="",H_=(e,t,r,n,s,a,l,u)=>{var d=e.slice(0,t),m=dT({breakAll:r,style:n,children:d+aG});if(!m)return[!1,[]];var f=fT(m.wordsWithComputedWidth,a,l,u),p=f.length>s||hT(f).width>Number(a);return[p,f]},oG=(e,t,r,n,s)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=Pt(a),f=String(l),p=fT(t,n,r,s);if(!m||s)return p;var x=p.length>a||hT(p).width>Number(n);if(!x)return p;for(var v=0,j=f.length-1,w=0,S;v<=j&&w<=f.length-1;){var _=Math.floor((v+j)/2),E=_-1,[C,T]=H_(f,E,d,u,a,n,r,s),[A]=H_(f,_,d,u,a,n,r,s);if(!C&&!A&&(v=_+1),C&&A&&(j=_-1),!C&&A){S=T;break}w++}return S||p},K_=e=>{var t=ss(e)?[]:e.toString().split(uT);return[{words:t,width:void 0}]},lG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:l}=e;if((t||r)&&!hu.isSsr){var u,d,m=dT({breakAll:a,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return K_(n);return oG({breakAll:a,children:n,maxLines:l,style:s},u,d,t,!!r)}return K_(n)},mT="#808080",cG={breakAll:!1,capHeight:"0.71em",fill:mT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kw=g.forwardRef((e,t)=>{var r=Bi(e,cG),{x:n,y:s,lineHeight:a,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=q_(r,rG),x=g.useMemo(()=>lG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:v,dy:j,angle:w,className:S,breakAll:_}=p,E=q_(p,nG);if(!Pa(n)||!Pa(s)||x.length===0)return null;var C=Number(n)+(Pt(v)?v:0),T=Number(s)+(Pt(j)?j:0);if(!bn(C)||!bn(T))return null;var A;switch(f){case"start":A=q0("calc(".concat(l,")"));break;case"middle":A=q0("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:A=q0("calc(".concat(x.length-1," * -").concat(a,")"));break}var D=[];if(d){var L=x[0].width,{width:R}=p;D.push("scale(".concat(Pt(R)&&Pt(L)?R/L:1,")"))}return w&&D.push("rotate(".concat(w,", ").concat(C,", ").concat(T,")")),D.length&&(E.transform=D.join(" ")),g.createElement("text",wv({},Fi(E),{ref:t,x:C,y:T,className:Hr("recharts-text",S),textAnchor:m,fill:u.includes("url")?mT:u}),x.map((J,ne)=>{var ie=J.words.join(_?"":" ");return g.createElement("tspan",{x:C,dy:ne===0?A:a,key:"".concat(ie,"-").concat(ne)},ie)}))});kw.displayName="Text";var uG=["labelRef"];function dG(e,t){if(e==null)return{};var r,n,s=fG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function G_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(r),!0).forEach(function(n){hG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hG(e,t,r){return(t=mG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(null,arguments)}var pT=g.createContext(null),gG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l,children:u}=e,d=g.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l}),[t,r,n,s,a,l]);return g.createElement(pT.Provider,{value:d},u)},gT=()=>{var e=g.useContext(pT),t=fp();return e||PP(t)},yG=g.createContext(null),xG=()=>{var e=g.useContext(yG),t=kt(q4);return e||t},vG=e=>{var{value:t,formatter:r}=e,n=ss(e.children)?t:e.children;return typeof r=="function"?r(n):n},Nw=e=>e!=null&&typeof e=="function",bG=(e,t)=>{var r=yi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},wG=(e,t,r,n,s)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:x,clockWise:v}=s,j=(m+f)/2,w=bG(p,x),S=w>=0?1:-1,_,E;switch(t){case"insideStart":_=p+S*a,E=v;break;case"insideEnd":_=x-S*a,E=!v;break;case"end":_=x+S*a,E=v;break;default:throw new Error("Unsupported position ".concat(t))}E=w<=0?E:!E;var C=ys(u,d,j,_),T=ys(u,d,j,_+(E?1:-1)*359),A="M".concat(C.x,",").concat(C.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(T.x,",").concat(T.y),D=ss(e.id)?Ed("recharts-radial-line-"):e.id;return g.createElement("text",Ja({},n,{dominantBaseline:"central",className:Hr("recharts-radial-bar-label",l)}),g.createElement("defs",null,g.createElement("path",{id:D,d:A})),g.createElement("textPath",{xlinkHref:"#".concat(D)},r))},jG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ys(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(a+l)/2,{x:v,y:j}=ys(n,s,x,m);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},jv=e=>"cx"in e&&Pt(e.cx),SG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!jv(r)&&(a=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,x=l+(d-m)/2,v=(p+x)/2,j=(d+m)/2,w=p+d/2,S=f>=0?1:-1,_=S*n,E=S>0?"end":"start",C=S>0?"start":"end",T=d>=0?1:-1,A=T*n,D=T>0?"end":"start",L=T>0?"start":"end";if(s==="top"){var R={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return gn(gn({},R),a?{height:Math.max(u-a.y,0),width:d}:{})}if(s==="bottom"){var J={x:x+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return gn(gn({},J),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(s==="left"){var ne={x:v-A,y:u+f/2,textAnchor:D,verticalAnchor:"middle"};return gn(gn({},ne),a?{width:Math.max(ne.x-a.x,0),height:f}:{})}if(s==="right"){var ie={x:v+j+A,y:u+f/2,textAnchor:L,verticalAnchor:"middle"};return gn(gn({},ie),a?{width:Math.max(a.x+a.width-ie.x,0),height:f}:{})}var q=a?{width:j,height:f}:{};return s==="insideLeft"?gn({x:v+A,y:u+f/2,textAnchor:L,verticalAnchor:"middle"},q):s==="insideRight"?gn({x:v+j-A,y:u+f/2,textAnchor:D,verticalAnchor:"middle"},q):s==="insideTop"?gn({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},q):s==="insideBottom"?gn({x:x+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},q):s==="insideTopLeft"?gn({x:p+A,y:u+_,textAnchor:L,verticalAnchor:C},q):s==="insideTopRight"?gn({x:p+d-A,y:u+_,textAnchor:D,verticalAnchor:C},q):s==="insideBottomLeft"?gn({x:x+A,y:u+f-_,textAnchor:L,verticalAnchor:E},q):s==="insideBottomRight"?gn({x:x+m-A,y:u+f-_,textAnchor:D,verticalAnchor:E},q):s&&typeof s=="object"&&(Pt(s.x)||ao(s.x))&&(Pt(s.y)||ao(s.y))?gn({x:l+ma(s.x,j),y:u+ma(s.y,f),textAnchor:"end",verticalAnchor:"end"},q):gn({x:w,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},q)},kG={offset:5,zIndex:ei.label};function Bo(e){var t=Bi(e,kG),{viewBox:r,position:n,value:s,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=xG(),p=gT(),x=n==="center"?p:f??p,v,j,w;if(r==null?v=x:jv(r)?v=r:v=PP(r),!v||ss(s)&&ss(a)&&!g.isValidElement(l)&&typeof l!="function")return null;var S=gn(gn({},t),{},{viewBox:v});if(g.isValidElement(l)){var{labelRef:_}=S,E=dG(S,uG);return g.cloneElement(l,E)}if(typeof l=="function"){if(j=g.createElement(l,S),g.isValidElement(j))return j}else j=vG(t);var C=Fi(t);if(jv(v)){if(n==="insideStart"||n==="insideEnd"||n==="end")return wG(t,n,j,C,v);w=jG(v,t.offset,t.position)}else w=SG(t,v);return g.createElement(nl,{zIndex:t.zIndex},g.createElement(kw,Ja({ref:m,className:Hr("recharts-label",u)},C,w,{textAnchor:iG(C.textAnchor)?C.textAnchor:w.textAnchor,breakAll:d}),j))}Bo.displayName="Label";var NG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(Bo,Ja({key:"label-implicit"},n)):Pa(e)?g.createElement(Bo,Ja({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===Bo?g.cloneElement(e,gn({key:"label-implicit"},n)):g.createElement(Bo,Ja({key:"label-implicit",content:e},n)):Nw(e)?g.createElement(Bo,Ja({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(Bo,Ja({},e,{key:"label-implicit"},n)):null};function _G(e){var{label:t,labelRef:r}=e,n=gT();return NG(t,n,r)||null}var H0={},K0={},Y_;function CG(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(K0)),K0}var G0={},J_;function EG(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(G0)),G0}var X_;function AG(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CG(),r=EG(),n=mb();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(H0)),H0}var Y0,Q_;function PG(){return Q_||(Q_=1,Y0=AG().last),Y0}var OG=PG();const TG=pa(OG);var IG=["valueAccessor"],DG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Em.apply(null,arguments)}function Z_(e,t){if(e==null)return{};var r,n,s=$G(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $G(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RG=e=>Array.isArray(e.value)?TG(e.value):e.value,yT=g.createContext(void 0),MG=yT.Provider,xT=g.createContext(void 0);xT.Provider;function FG(){return g.useContext(yT)}function LG(){return g.useContext(xT)}function Th(e){var{valueAccessor:t=RG}=e,r=Z_(e,IG),{dataKey:n,clockWise:s,id:a,textBreakAll:l,zIndex:u}=r,d=Z_(r,DG),m=FG(),f=LG(),p=m||f;return!p||!p.length?null:g.createElement(nl,{zIndex:u??ei.label},g.createElement(io,{className:"recharts-label-list"},p.map((x,v)=>{var j,w=ss(n)?t(x,v):Fs(x&&x.payload,n),S=ss(a)?{}:{id:"".concat(a,"-").concat(v)};return g.createElement(Bo,Em({key:"label-".concat(v)},Fi(x),d,S,{fill:(j=r.fill)!==null&&j!==void 0?j:x.fill,parentViewBox:x.parentViewBox,value:w,textBreakAll:l,viewBox:x.viewBox,index:v,zIndex:0}))})))}Th.displayName="LabelList";function zG(e){var{label:t}=e;return t?t===!0?g.createElement(Th,{key:"labelList-implicit"}):g.isValidElement(t)||Nw(t)?g.createElement(Th,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Th,Em({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var UG={radiusAxis:{},angleAxis:{}},vT=ri({name:"polarAxis",initialState:UG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:See,removeRadiusAxis:kee,addAngleAxis:Nee,removeAngleAxis:_ee}=vT.actions,BG=vT.reducer,J0={exports:{}},_r={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function WG(){if(eC)return _r;eC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function j(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case e:switch(w=w.type,w){case r:case s:case n:case d:case m:case x:return w;default:switch(w=w&&w.$$typeof,w){case l:case u:case p:case f:return w;case a:return w;default:return S}}case t:return S}}}return _r.ContextConsumer=a,_r.ContextProvider=l,_r.Element=e,_r.ForwardRef=u,_r.Fragment=r,_r.Lazy=p,_r.Memo=f,_r.Portal=t,_r.Profiler=s,_r.StrictMode=n,_r.Suspense=d,_r.SuspenseList=m,_r.isContextConsumer=function(w){return j(w)===a},_r.isContextProvider=function(w){return j(w)===l},_r.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},_r.isForwardRef=function(w){return j(w)===u},_r.isFragment=function(w){return j(w)===r},_r.isLazy=function(w){return j(w)===p},_r.isMemo=function(w){return j(w)===f},_r.isPortal=function(w){return j(w)===t},_r.isProfiler=function(w){return j(w)===s},_r.isStrictMode=function(w){return j(w)===n},_r.isSuspense=function(w){return j(w)===d},_r.isSuspenseList=function(w){return j(w)===m},_r.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===s||w===n||w===d||w===m||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===f||w.$$typeof===l||w.$$typeof===a||w.$$typeof===u||w.$$typeof===v||w.getModuleId!==void 0)},_r.typeOf=j,_r}var tC;function VG(){return tC||(tC=1,J0.exports=WG()),J0.exports}var qG=VG(),rC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",nC=null,X0=null,bT=e=>{if(e===nC&&Array.isArray(X0))return X0;var t=[];return g.Children.forEach(e,r=>{ss(r)||(qG.isFragment(r)?t=t.concat(bT(r.props.children)):t.push(r))}),X0=t,nC=e,t};function HG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>rC(s)):n=[rC(t)],bT(e).forEach(s=>{var a=Yc(s,"type.displayName")||Yc(s,"type.name");a&&n.indexOf(a)!==-1&&r.push(s)}),r}var Q0={},sC;function KG(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Q0)),Q0}var Z0,iC;function GG(){return iC||(iC=1,Z0=KG().isPlainObject),Z0}var YG=GG();const JG=pa(YG);function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){XG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XG(e,t,r){return(t=QG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QG(e){var t=ZG(e,"string");return typeof t=="symbol"?t:t+""}function ZG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(null,arguments)}var lC=(e,t,r,n,s)=>{var a=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-a/2,",").concat(t+s),l+="L ".concat(e+r-a/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},eY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tY=e=>{var t=Bi(e,eY),{x:r,y:n,upperWidth:s,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,x=g.useRef(null),[v,j]=g.useState(-1),w=g.useRef(s),S=g.useRef(a),_=g.useRef(l),E=g.useRef(r),C=g.useRef(n),T=kb(e,"trapezoid-");if(g.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var W=x.current.getTotalLength();W&&j(W)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||l!==+l||s===0&&a===0||l===0)return null;var A=Hr("recharts-trapezoid",u);if(!p)return g.createElement("g",null,g.createElement("path",Am({},Fi(t),{className:A,d:lC(r,n,s,a,l)})));var D=w.current,L=S.current,R=_.current,J=E.current,ne=C.current,ie="0px ".concat(v===-1?1:v,"px"),q="".concat(v,"px 0px"),de=DP(["strokeDasharray"],m,d);return g.createElement(Sb,{animationId:T,key:T,canBegin:v>0,duration:m,easing:d,isActive:p,begin:f},W=>{var G=gs(D,s,W),Q=gs(L,a,W),ae=gs(R,l,W),ee=gs(J,r,W),oe=gs(ne,n,W);x.current&&(w.current=G,S.current=Q,_.current=ae,E.current=ee,C.current=oe);var te=W>0?{transition:de,strokeDasharray:q}:{strokeDasharray:ie};return g.createElement("path",Am({},Fi(t),{className:A,d:lC(ee,oe,G,Q,ae),ref:x,style:oC(oC({},te),t.style)}))})},rY=["option","shapeType","propTransformer","activeClassName","isActive"];function nY(e,t){if(e==null)return{};var r,n,s=sY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return(t=aY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e){var t=oY(e,"string");return typeof t=="symbol"?t:t+""}function oY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lY(e,t){return Pm(Pm({},t),e)}function cY(e,t){return e==="symbols"}function uC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return g.createElement(FP,r);case"trapezoid":return g.createElement(tY,r);case"sector":return g.createElement(UP,r);case"symbols":if(cY(t))return g.createElement(MA,r);break;case"curve":return g.createElement(IP,r);default:return null}}function uY(e){return g.isValidElement(e)?e.props:e}function dY(e){var{option:t,shapeType:r,propTransformer:n=lY,activeClassName:s="recharts-active-shape",isActive:a}=e,l=nY(e,rY),u;if(g.isValidElement(t))u=g.cloneElement(t,Pm(Pm({},l),uY(t)));else if(typeof t=="function")u=t(l);else if(JG(t)&&typeof t!="boolean"){var d=n(t,l);u=g.createElement(uC,{shapeType:r,elementProps:d})}else{var m=l;u=g.createElement(uC,{shapeType:r,elementProps:m})}return a?g.createElement(io,{className:s},u):u}var wT=(e,t)=>{var r=wn();return(n,s)=>a=>{e==null||e(n,s,a),r($O({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},jT=e=>{var t=wn();return(r,n)=>s=>{e==null||e(r,n,s),t(Rq())}},ST=(e,t)=>{var r=wn();return(n,s)=>a=>{e==null||e(n,s,a),r(Mq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function fY(e){var{fn:t,args:r}=e,n=wn(),s=ji();return g.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Iq(a)),()=>{n(Dq(a))}}},[t,r,n,s]),null}function hY(e){var{legendPayload:t}=e,r=wn(),n=ji();return g.useLayoutEffect(()=>n?fu:(r(mB(t)),()=>{r(pB(t))}),[r,n,t]),null}var ex,mY=()=>{var[e]=g.useState(()=>Ed("uid-"));return e},pY=(ex=hD.useId)!==null&&ex!==void 0?ex:mY;function kT(e,t){var r=pY();return t||(e?"".concat(e,"-").concat(r):r)}var gY=g.createContext(void 0),yY=e=>{var{id:t,type:r,children:n}=e,s=kT("recharts-".concat(r),t);return g.createElement(gY.Provider,{value:s},n(s))},xY={cartesianItems:[],polarItems:[]},NT=ri({name:"graphicalItems",initialState:xY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Fn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=to(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Fn()},removeCartesianGraphicalItem:{reducer(e,t){var r=to(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Fn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Fn()},removePolarGraphicalItem:{reducer(e,t){var r=to(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Fn()}}}),{addCartesianGraphicalItem:vY,replaceCartesianGraphicalItem:bY,removeCartesianGraphicalItem:wY,addPolarGraphicalItem:Cee,removePolarGraphicalItem:Eee}=NT.actions,jY=NT.reducer;function SY(e){var t=wn(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?t(vY(e)):r.current!==e&&t(bY({prev:r.current,next:e})),r.current=e},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(t(wY(r.current)),r.current=null)},[t]),null}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){kY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kY(e,t,r){return(t=NY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=_Y(e,"string");return typeof t=="symbol"?t:t+""}function _Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CY={xAxis:{},yAxis:{},zAxis:{}},_T=ri({name:"cartesianAxis",initialState:CY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Fn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Fn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Fn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Fn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Fn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Fn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var l=[...a,n].slice(-3);e.yAxis[r]=fC(fC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:EY,removeXAxis:AY,addYAxis:PY,removeYAxis:OY,addZAxis:Aee,removeZAxis:Pee,updateYAxisWidth:TY}=_T.actions,IY=_T.reducer,DY=je([is],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),$Y=je([DY,po,go],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),CT=()=>kt($Y),RY="Invariant failed";function MY(e,t){throw new Error(RY)}var FY=["x","y"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){LY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LY(e,t,r){return(t=zY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BY(e,t){if(e==null)return{};var r,n,s=WY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VY(e,t){var{x:r,y:n}=e,s=BY(e,FY),a="".concat(r),l=parseInt(a,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),x=parseInt(p,10);return sd(sd(sd(sd(sd({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:x,name:t.name,radius:t.radius})}function Om(e){return g.createElement(dY,Sv({shapeType:"rectangle",propTransformer:VY,activeClassName:"recharts-active-bar"},e))}var qY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Pt(t))return t;var a=Pt(n)||ss(n);return a?t(n,s):(a||MY(),r)}},HY={},ET=ri({name:"errorBars",initialState:HY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Oee,replaceErrorBar:Tee,removeErrorBar:Iee}=ET.actions,KY=ET.reducer,GY=["children"];function YY(e,t){if(e==null)return{};var r,n,s=JY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},QY=g.createContext(XY);function ZY(e){var{children:t}=e,r=YY(e,GY);return g.createElement(QY.Provider,{value:r},t)}function AT(e,t){var r,n,s=kt(m=>xo(m,e)),a=kt(m=>vo(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ui.allowDataOverflow,u=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:di.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function eJ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=CT(),{needClipX:a,needClipY:l,needClip:u}=AT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:a?d:d-f/2,y:l?m:m-p/2,width:a?f:f*2,height:l?p:p*2}))}function tJ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&bn(e.zIndex)?e.zIndex:t}var rJ=["onMouseEnter","onMouseLeave","onClick"],nJ=["value","background","tooltipPosition"],sJ=["id"],iJ=["onMouseEnter","onClick","onMouseLeave"];function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ho.apply(null,arguments)}function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){aJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aJ(e,t,r){return(t=oJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=lJ(e,"string");return typeof t=="symbol"?t:t+""}function lJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(e,t){if(e==null)return{};var r,n,s=cJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:NP(r,t),payload:e}]};function dJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:NP(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function fJ(e){var t=kt(tu),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Tm(a,rJ),f=wT(l,n),p=jT(u),x=ST(d,n);if(!s||r==null)return null;var v=ab(s);return g.createElement(nl,{zIndex:tJ(s,ei.barBackground)},r.map((j,w)=>{var{value:S,background:_,tooltipPosition:E}=j,C=Tm(j,nJ);if(!_)return null;var T=f(j,w),A=p(j,w),D=x(j,w),L=Rs(Rs(Rs(Rs(Rs({option:s,isActive:String(w)===t},C),{},{fill:"#eee"},_),v),hb(m,j,w)),{},{onMouseEnter:T,onMouseLeave:A,onClick:D,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return g.createElement(Om,ho({key:"background-bar-".concat(w)},L))}))}function hJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Rs(Rs({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return g.createElement(MG,{value:t?s:void 0},r)}function mJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:l}=e,u=kt(tu),d=kt(JO),m=r&&String(a)===u&&(d==null||l===d),f=m?r:t;return m?g.createElement(nl,{zIndex:ei.activeBar},g.createElement(Om,ho({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))):g.createElement(Om,ho({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))}function pJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return g.createElement(Om,ho({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function gJ(e){var t,{data:r,props:n}=e,s=(t=Jo(n))!==null&&t!==void 0?t:{},{id:a}=s,l=Tm(s,sJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:x}=n,v=Tm(n,iJ),j=wT(f,d),w=jT(x),S=ST(p,d);return r?g.createElement(g.Fragment,null,r.map((_,E)=>g.createElement(io,ho({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},hb(v,_,E),{onMouseEnter:j(_,E),onMouseLeave:w(_,E),onClick:S(_,E)}),m?g.createElement(mJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):g.createElement(pJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function yJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,x=kb(t,"recharts-bar-"),[v,j]=g.useState(!1),w=!v,S=g.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),_=g.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return g.createElement(hJ,{showLabels:w,rects:n},g.createElement(Sb,{animationId:x,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:S,onAnimationStart:_,key:x},E=>{var C=E===1?n:n==null?void 0:n.map((T,A)=>{var D=p&&p[A];if(D)return Rs(Rs({},T),{},{x:gs(D.x,T.x,E),y:gs(D.y,T.y,E),width:gs(D.width,T.width,E),height:gs(D.height,T.height,E)});if(s==="horizontal"){var L=gs(0,T.height,E),R=gs(T.stackedBarStart,T.y,E);return Rs(Rs({},T),{},{y:R,height:L})}var J=gs(0,T.width,E),ne=gs(T.stackedBarStart,T.x,E);return Rs(Rs({},T),{},{width:J,x:ne})});return E>0&&(r.current=C??null),C==null?null:g.createElement(io,null,g.createElement(gJ,{props:t,data:C}))}),g.createElement(zG,{label:t.label}),t.children)}function xJ(e){var t=g.useRef(null);return g.createElement(yJ,{previousRectanglesRef:t,props:e})}var PT=0,vJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Fs(e,t)}};class bJ extends g.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Hr("recharts-bar",s),p=m;return g.createElement(io,{className:f,id:m},u&&g.createElement("defs",null,g.createElement(eJ,{clipPathId:p,xAxisId:a,yAxisId:l})),g.createElement(io,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},g.createElement(fJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),g.createElement(xJ,this.props)))}}var wJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!hu.isSsr,legendType:"rect",minPointSize:PT,xAxisId:0,yAxisId:0,zIndex:ei.bar};function jJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=AT(t,r),x=hp(),v=ji(),j=HG(e.children,Sw),w=kt(E=>JJ(E,t,r,v,e.id,j));if(x!=="vertical"&&x!=="horizontal")return null;var S,_=w==null?void 0:w[0];return _==null||_.height==null||_.width==null?S=0:S=x==="vertical"?_.height/2:_.width/2,g.createElement(ZY,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:vJ,errorBarOffset:S},g.createElement(bJ,ho({},e,{layout:x,needClip:p,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function SJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:x,cells:v,parentViewBox:j,dataStartIndex:w}=e,S=t==="horizontal"?u:l,_=f?S.scale.domain():null,E=NU({numericAxis:S}),C=S.scale(E);return p.map((T,A)=>{var D,L,R,J,ne,ie;f?D=vU(f[A+w],_):(D=Fs(T,r),Array.isArray(D)||(D=[E,D]));var q=qY(n,PT)(D[1],A);if(t==="horizontal"){var de,[W,G]=[u.scale(D[0]),u.scale(D[1])];L=YN({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:T,index:A}),R=(de=G??W)!==null&&de!==void 0?de:void 0,J=s.size;var Q=W-G;if(ne=Aa(Q)?0:Q,ie={x:L,y:x.top,width:J,height:x.height},Math.abs(q)>0&&Math.abs(ne)<Math.abs(q)){var ae=yi(ne||q)*(Math.abs(q)-Math.abs(ne));R-=ae,ne+=ae}}else{var[ee,oe]=[l.scale(D[0]),l.scale(D[1])];if(L=ee,R=YN({axis:u,ticks:m,bandSize:a,offset:s.offset,entry:T,index:A}),J=oe-ee,ne=s.size,ie={x:x.left,y:R,width:x.width,height:ne},Math.abs(q)>0&&Math.abs(J)<Math.abs(q)){var te=yi(J||q)*(Math.abs(q)-Math.abs(J));J+=te}}if(L==null||R==null||J==null||ne==null)return null;var M=Rs(Rs({},T),{},{stackedBarStart:C,x:L,y:R,width:J,height:ne,value:f?D:D[1],payload:T,background:ie,tooltipPosition:{x:L+J/2,y:R+ne/2},parentViewBox:j},v&&v[A]&&v[A].props);return M}).filter(Boolean)}function kJ(e){var t=Bi(e,wJ),r=ji();return g.createElement(yY,{id:t.id,type:"bar"},n=>g.createElement(g.Fragment,null,g.createElement(hY,{legendPayload:uJ(t)}),g.createElement(fY,{fn:dJ,args:t}),g.createElement(SY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:kU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),g.createElement(nl,{zIndex:t.zIndex},g.createElement(jJ,ho({},t,{id:n})))))}var OT=g.memo(kJ);OT.displayName="Bar";function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){NJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t,r){return(t=_J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _J(e){var t=CJ(e,"string");return typeof t=="symbol"?t:t+""}function CJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EJ=(e,t)=>t,AJ=(e,t,r)=>r,PJ=(e,t,r,n)=>n,OJ=(e,t,r,n,s)=>s,of=je([iw,OJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),TJ=je([of],e=>e==null?void 0:e.maxBarSize),IJ=(e,t,r,n,s,a)=>a,gC=(e,t,r)=>{var n=r??e;if(!ss(n))return ma(n,t,0)},DJ=je([Nr,iw,EJ,AJ,PJ],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),$J=(e,t,r,n)=>{var s=Nr(e);return s==="horizontal"?gv(e,"yAxis",r,n):gv(e,"xAxis",t,n)},RJ=(e,t,r)=>{var n=Nr(e);return n==="horizontal"?w_(e,"xAxis",t):w_(e,"yAxis",r)},MJ=(e,t,r)=>{var n={},s=e.filter(_p),a=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,x=p.map(j=>j.dataKey),v=gC(t,r,p[0].barSize);return{stackId:f,dataKeys:x,barSize:v}}),d=a.map(m=>{var f=[m.dataKey].filter(x=>x!=null),p=gC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},FJ=je([DJ,_V,RJ],MJ),LJ=(e,t,r,n,s)=>{var a,l,u=of(e,t,r,n,s);if(u!=null){var d=Nr(e),m=F4(e),{maxBarSize:f}=u,p=ss(f)?m:f,x,v;return d==="horizontal"?(x=eu(e,"xAxis",t,n),v=Zc(e,"xAxis",t,n)):(x=eu(e,"yAxis",r,n),v=Zc(e,"yAxis",r,n)),(a=(l=cm(x,v,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0}},TT=(e,t,r,n)=>{var s=Nr(e),a,l;return s==="horizontal"?(a=eu(e,"xAxis",t,n),l=Zc(e,"xAxis",t,n)):(a=eu(e,"yAxis",r,n),l=Zc(e,"yAxis",r,n)),cm(a,l)};function zJ(e,t,r,n,s){var a=n.length;if(!(a<1)){var l=ma(e,r,0,!0),u,d=[];if(bn(n[0].barSize)){var m=!1,f=r/a,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(a-1)*l,p>=r&&(p-=(a-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=a*f);var x=(r-p)/2>>0,v={offset:x-l,size:0};u=n.reduce((_,E)=>{var C,T={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:v.offset+v.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},A=[..._,T];return v=A[A.length-1].position,A},d)}else{var j=ma(t,r,0,!0);r-2*j-(a-1)*l<=0&&(l=0);var w=(r-2*j-(a-1)*l)/a;w>1&&(w>>=0);var S=bn(s)?Math.min(w,s):w;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(w+l)*C+(w-S)/2,size:S}}],d)}return u}}var UJ=(e,t,r,n,s,a,l)=>{var u=ss(l)?t:l,d=zJ(r,n,s!==a?s:a,e,u);return s!==a&&d!=null&&(d=d.map(m=>Sh(Sh({},m),{},{position:Sh(Sh({},m.position),{},{offset:m.position.offset-s/2})}))),d},BJ=je([FJ,F4,NV,L4,LJ,TT,TJ],UJ),WJ=(e,t,r,n)=>eu(e,"xAxis",t,n),VJ=(e,t,r,n)=>eu(e,"yAxis",r,n),qJ=(e,t,r,n)=>Zc(e,"xAxis",t,n),HJ=(e,t,r,n)=>Zc(e,"yAxis",r,n),KJ=je([BJ,of],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),GJ=(e,t)=>{var r=nw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(l=>l.key===r)}}}},YJ=je([$J,of],GJ),JJ=je([is,wb,WJ,VJ,qJ,HJ,KJ,Nr,Gb,TT,YJ,of,IJ],(e,t,r,n,s,a,l,u,d,m,f,p,x)=>{var{chartData:v,dataStartIndex:j,dataEndIndex:w}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||a==null||m==null)){var{data:S}=p,_;if(S!=null&&S.length>0?_=S:_=v==null?void 0:v.slice(j,w+1),_!=null)return SJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:f,displayedData:_,offset:e,cells:x,dataStartIndex:j})}}),XJ=e=>{var{chartData:t}=e,r=wn(),n=ji();return g.useEffect(()=>n?()=>{}:(r(I_(t)),()=>{r(I_(void 0))}),[t,r,n]),null},yC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},IT=ri({name:"brush",initialState:yC,reducers:{setBrushSettings(e,t){return t.payload==null?yC:t.payload}}}),{setBrushSettings:Dee}=IT.actions,QJ=IT.reducer;function ZJ(e,t,r){return(t=eX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return typeof t=="symbol"?t:t+""}function tX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _w{static create(t){return new _w(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}ZJ(_w,"EPS",1e-4);function rX(e){return(e%180+180)%180}var nX=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=rX(s),l=a*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},sX={dots:[],areas:[],lines:[]},DT=ri({name:"referenceElements",initialState:sX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=to(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=to(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=to(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:$ee,removeDot:Ree,addArea:Mee,removeArea:Fee,addLine:Lee,removeLine:zee}=DT.actions,iX=DT.reducer,aX=g.createContext(void 0),oX=e=>{var{children:t}=e,[r]=g.useState("".concat(Ed("recharts"),"-clip")),n=CT();if(n==null)return null;var{x:s,y:a,width:l,height:u}=n;return g.createElement(aX.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:s,y:a,height:u,width:l}))),t)};function ru(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function $T(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function lX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return nX(n,r)}function cX(e,t,r){var n=r==="width",{x:s,y:a,width:l,height:u}=e;return t===1?{start:n?s:a,end:n?s+l:a+u}:{start:n?s+l:a+u,end:n?s:a}}function Im(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function uX(e,t){return $T(e,t+1)}function dX(e,t,r,n,s){for(var a=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:$T(n,m)};var w=d,S,_=()=>(S===void 0&&(S=r(j,w)),S),E=j.coordinate,C=d===0||Im(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},x;m<=a.length;)if(x=p(),x)return x.v;return[]}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){fX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fX(e,t,r){return(t=hX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hX(e){var t=mX(e,"string");return typeof t=="symbol"?t:t+""}function mX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pX(e,t,r,n,s){for(var a=(n||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(x){var v=a[x],j,w=()=>(j===void 0&&(j=r(v,x)),j);if(x===l-1){var S=e*(v.coordinate+e*w()/2-d);a[x]=v=Cs(Cs({},v),{},{tickCoord:S>0?v.coordinate-S*e:v.coordinate})}else a[x]=v=Cs(Cs({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var _=Im(e,v.tickCoord,w,u,d);_&&(d=v.tickCoord-e*(w()/2+s),a[x]=Cs(Cs({},v),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return a}function gX(e,t,r,n,s,a){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var f=n[u-1],p=r(f,u-1),x=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=Cs(Cs({},f),{},{tickCoord:x>0?f.coordinate-x*e:f.coordinate}),f.tickCoord!=null){var v=Im(e,f.tickCoord,()=>p,d,m);v&&(m=f.tickCoord-e*(p/2+s),l[u-1]=Cs(Cs({},f),{},{isShow:!0}))}}for(var j=a?u-1:u,w=function(E){var C=l[E],T,A=()=>(T===void 0&&(T=r(C,E)),T);if(E===0){var D=e*(C.coordinate-e*A()/2-d);l[E]=C=Cs(Cs({},C),{},{tickCoord:D<0?C.coordinate-D*e:C.coordinate})}else l[E]=C=Cs(Cs({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var L=Im(e,C.tickCoord,A,d,m);L&&(d=C.tickCoord+e*(A()/2+s),l[E]=Cs(Cs({},C),{},{isShow:!0}))}},S=0;S<j;S++)w(S);return l}function yX(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(Pt(d)||hu.isSsr){var x;return(x=uX(s,Pt(d)?d:0))!==null&&x!==void 0?x:[]}var v=[],j=u==="top"||u==="bottom"?"width":"height",w=f&&j==="width"?bd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(C,T)=>{var A=typeof m=="function"?m(C.value,T):C.value;return j==="width"?lX(bd(A,{fontSize:t,letterSpacing:r}),w,p):bd(A,{fontSize:t,letterSpacing:r})[j]},_=s.length>=2?yi(s[1].coordinate-s[0].coordinate):1,E=cX(a,_,j);return d==="equidistantPreserveStart"?dX(_,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?v=gX(_,E,S,s,l,d==="preserveStartEnd"):v=pX(_,E,S,s,l),v.filter(C=>C.isShow))}var xX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+a,m=l+d+u+(r?n:0);return Math.round(m)}return 0},vX=["axisLine","width","height","className","hide","ticks","axisType"],bX=["viewBox"],wX=["viewBox"];function kv(e,t){if(e==null)return{};var r,n,s=jX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(null,arguments)}function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){SX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SX(e,t,r){return(t=kX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=NX(e,"string");return typeof t=="symbol"?t:t+""}function NX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _X={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ei.axis};function CX(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=_n(_n(_n({},d),Jo(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!l||a==="bottom"&&l);m=_n(_n({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(a==="left"&&!l||a==="right"&&l);m=_n(_n({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return g.createElement("line",Hl({},m,{className:Hr("recharts-cartesian-axis-line",Yc(u,"className"))}))}function EX(e,t,r,n,s,a,l,u,d){var m,f,p,x,v,j,w=u?-1:1,S=e.tickSize||l,_=Pt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=f=e.coordinate,x=r+ +!u*s,p=x-w*S,j=p-w*d,v=_;break;case"left":p=x=e.coordinate,f=t+ +!u*n,m=f-w*S,v=m-w*d,j=_;break;case"right":p=x=e.coordinate,f=t+ +u*n,m=f+w*S,v=m+w*d,j=_;break;default:m=f=e.coordinate,x=r+ +u*s,p=x+w*S,j=p+w*d,v=_;break}return{line:{x1:m,y1:p,x2:f,y2:x},tick:{x:v,y:j}}}function AX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function PX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function OX(e){var{option:t,tickProps:r,value:n}=e,s,a=Hr(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,_n(_n({},r),{},{className:a}));else if(typeof t=="function")s=t(_n(_n({},r),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Hr(l,t==null?void 0:t.className)),s=g.createElement(kw,Hl({},r,{className:l}),n)}return s}var TX=g.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:a,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x,y:v,width:j,height:w,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:T,events:A,axisType:D}=e,L=yX(_n(_n({},T),{},{ticks:r}),E,C),R=AX(f,p),J=PX(f,p),ne=Jo(T),ie=ab(n),q={};typeof s=="object"&&(q=s);var de=_n(_n({},ne),{},{fill:"none"},q),W=L.map(ae=>_n({entry:ae},EX(ae,x,v,j,w,f,S,p,_))),G=W.map(ae=>{var{entry:ee,line:oe}=ae;return g.createElement(io,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},s&&g.createElement("line",Hl({},de,oe,{className:Hr("recharts-cartesian-axis-tick-line",Yc(s,"className"))})))}),Q=W.map((ae,ee)=>{var{entry:oe,tick:te}=ae,M=_n(_n(_n(_n({textAnchor:R,verticalAnchor:J},ne),{},{stroke:"none",fill:a},ie),te),{},{index:ee,payload:oe,visibleTicksCount:L.length,tickFormatter:l,padding:d},m);return g.createElement(io,Hl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},hb(A,oe,ee)),n&&g.createElement(OX,{option:n,tickProps:M,value:"".concat(typeof l=="function"?l(oe.value,ee):oe.value).concat(u||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},Q.length>0&&g.createElement(nl,{zIndex:ei.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:t},Q)),G.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},G))}),IX=g.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:l,ticks:u,axisType:d}=e,m=kv(e,vX),[f,p]=g.useState(""),[x,v]=g.useState(""),j=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return xX({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=g.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),T=C.fontSize,A=C.letterSpacing;(T!==f||A!==x)&&(p(T),v(A))}}},[f,x]);return l||n!=null&&n<=0||s!=null&&s<=0?null:g.createElement(nl,{zIndex:e.zIndex},g.createElement(io,{className:Hr("recharts-cartesian-axis",a)},g.createElement(CX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Jo(e)}),g.createElement(TX,{ref:w,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(gG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(_G,{label:e.label,labelRef:e.labelRef}),e.children)))}),DX=g.memo(IX,(e,t)=>{var{viewBox:r}=e,n=kv(e,bX),{viewBox:s}=t,a=kv(t,wX);return ru(r,s)&&ru(n,a)}),Cw=g.forwardRef((e,t)=>{var r=Bi(e,_X);return g.createElement(DX,Hl({},r,{ref:t}))});Cw.displayName="CartesianAxis";var $X=["dangerouslySetInnerHTML","ticks"],RX=["id"],MX=["domain"],FX=["domain"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function Dm(e,t){if(e==null)return{};var r,n,s=LX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zX(e){var t=wn();return g.useLayoutEffect(()=>(t(EY(e)),()=>{t(AY(e))}),[e,t]),null}var UX=e=>{var{xAxisId:t,className:r}=e,n=kt(wb),s=ji(),a="xAxis",l=kt(S=>vu(S,a,t,s)),u=kt(S=>AO(S,a,t,s)),d=kt(S=>NO(S,t)),m=kt(S=>Sq(S,t)),f=kt(S=>K4(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:x}=e,v=Dm(e,$X),{id:j}=f,w=Dm(f,RX);return g.createElement(Cw,Nv({},v,w,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Hr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:u,axisType:a}))},BX={allowDataOverflow:ui.allowDataOverflow,allowDecimals:ui.allowDecimals,allowDuplicatedCategory:ui.allowDuplicatedCategory,height:ui.height,hide:!1,mirror:ui.mirror,orientation:ui.orientation,padding:ui.padding,reversed:ui.reversed,scale:ui.scale,tickCount:ui.tickCount,type:ui.type,xAxisId:0},WX=e=>{var t,r,n,s,a,l=Bi(e,BX);return g.createElement(g.Fragment,null,g.createElement(zX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),g.createElement(UX,l))},VX=(e,t)=>{var{domain:r}=e,n=Dm(e,MX),{domain:s}=t,a=Dm(t,FX);return ru(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ru({domain:r},{domain:s}):!1},RT=g.memo(WX,VX);RT.displayName="XAxis";var qX=["dangerouslySetInnerHTML","ticks"],HX=["id"],KX=["domain"],GX=["domain"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function $m(e,t){if(e==null)return{};var r,n,s=YX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JX(e){var t=wn();return g.useLayoutEffect(()=>(t(PY(e)),()=>{t(OY(e))}),[e,t]),null}var XX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=g.useRef(null),l=g.useRef(null),u=kt(wb),d=ji(),m=wn(),f="yAxis",p=kt(A=>vu(A,f,t,d)),x=kt(A=>_O(A,t)),v=kt(A=>Nq(A,t)),j=kt(A=>AO(A,f,t,d)),w=kt(A=>G4(A,t));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!x||Nw(s)||g.isValidElement(s)||w==null)){var A=a.current;if(A){var D=A.getCalculatedWidth();Math.round(x.width)!==Math.round(D)&&m(TY({id:t,width:D}))}}},[j,x,m,s,t,n,w]),x==null||v==null||w==null)return null;var{dangerouslySetInnerHTML:S,ticks:_}=e,E=$m(e,qX),{id:C}=w,T=$m(w,HX);return g.createElement(Cw,_v({},E,T,{ref:a,labelRef:l,scale:p,x:v.x,y:v.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:x.width,height:x.height,className:Hr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:j,axisType:f}))},QX={allowDataOverflow:di.allowDataOverflow,allowDecimals:di.allowDecimals,allowDuplicatedCategory:di.allowDuplicatedCategory,hide:!1,mirror:di.mirror,orientation:di.orientation,padding:di.padding,reversed:di.reversed,scale:di.scale,tickCount:di.tickCount,type:di.type,width:di.width,yAxisId:0},ZX=e=>{var t,r,n,s,a,l=Bi(e,QX);return g.createElement(g.Fragment,null,g.createElement(JX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),g.createElement(XX,l))},eQ=(e,t)=>{var{domain:r}=e,n=$m(e,KX),{domain:s}=t,a=$m(t,GX);return ru(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ru({domain:r},{domain:s}):!1},MT=g.memo(ZX,eQ);MT.displayName="YAxis";var tx={exports:{}},rx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function tQ(){if(bC)return rx;bC=1;var e=nu();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,l=e.useMemo,u=e.useDebugValue;return rx.useSyncExternalStoreWithSelector=function(d,m,f,p,x){var v=s(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function S(A){if(!_){if(_=!0,E=A,A=p(A),x!==void 0&&j.hasValue){var D=j.value;if(x(D,A))return C=D}return C=A}if(D=C,r(E,A))return D;var L=p(A);return x!==void 0&&x(D,L)?(E=A,D):(E=A,C=L)}var _=!1,E,C,T=f===void 0?null:f;return[function(){return S(m())},T===null?void 0:function(){return S(T())}]},[m,f,p,x]);var w=n(d,v[0],v[1]);return a(function(){j.hasValue=!0,j.value=w},[w]),u(w),w},rx}var wC;function rQ(){return wC||(wC=1,tx.exports=tQ()),tx.exports}rQ();function nQ(e){e()}function sQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var jC={notify(){},get:()=>[]};function iQ(e,t){let r,n=jC,s=0,a=!1;function l(w){f();const S=n.subscribe(w);let _=!1;return()=>{_||(_=!0,S(),p())}}function u(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return a}function f(){s++,r||(r=e.subscribe(d),n=sQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=jC)}function x(){a||(a=!0,f())}function v(){a&&(a=!1,p())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:x,tryUnsubscribe:v,getListeners:()=>n};return j}var aQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oQ=aQ(),lQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cQ=lQ(),uQ=()=>oQ||cQ?g.useLayoutEffect:g.useEffect,dQ=uQ(),nx=Symbol.for("react-redux-context"),sx=typeof globalThis<"u"?globalThis:{};function fQ(){if(!g.createContext)return{};const e=sx[nx]??(sx[nx]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var hQ=fQ();function mQ(e){const{children:t,context:r,serverState:n,store:s}=e,a=g.useMemo(()=>{const d=iQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=g.useMemo(()=>s.getState(),[s]);dQ(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=r||hQ;return g.createElement(u.Provider,{value:a},t)}var pQ=mQ,gQ=(e,t)=>t,Ew=je([gQ,Nr,q4,Un,HO,bo,$H,is],BH),Aw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FT=Li("mouseClick"),LT=Gd();LT.startListening({actionCreator:FT,effect:(e,t)=>{var r=e.payload,n=Ew(t.getState(),Aw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Fq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Cv=Li("mouseMove"),zT=Gd();zT.startListening({actionCreator:Cv,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=mw(n,n.tooltip.settings.shared),a=Ew(n,Aw(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(MO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(RO()))}});var SC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},UT=ri({name:"rootProps",initialState:SC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:SC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),yQ=UT.reducer,{updateOptions:xQ}=UT.actions,BT=ri({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Uee}=BT.actions,vQ=BT.reducer,WT=Li("keyDown"),VT=Li("focus"),Pw=Gd();Pw.startListening({actionCreator:WT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(pw(s,wu(r))),u=bo(r);if(a==="Enter"){var d=Cm(r,"axis","hover",String(s.index));t.dispatch(xv({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=Aq(r),f=m==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,x=l+p*f;if(!(u==null||x>=u.length||x<0)){var v=Cm(r,"axis","hover",String(x));t.dispatch(xv({active:!0,activeIndex:x.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});Pw.startListening({actionCreator:VT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",l=Cm(r,"axis","hover",String(a));t.dispatch(xv({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var $i=Li("externalEvent"),qT=Gd();qT.startListening({actionCreator:$i,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:bH(r),activeDataKey:JO(r),activeIndex:tu(r),activeLabel:YO(r),activeTooltipIndex:tu(r),isTooltipActive:wH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var bQ=je([bu],e=>e.tooltipItemPayloads),wQ=je([bQ,sf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var l=t(a,r);return l}}}),HT=Li("touchMove"),KT=Gd();KT.startListening({actionCreator:HT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=mw(n,n.tooltip.settings.shared);if(s==="axis"){var a=Ew(n,Aw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(MO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(TU),f=(l=d.getAttribute(IU))!==null&&l!==void 0?l:void 0,p=wQ(t.getState(),m,f);t.dispatch($O({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var jQ=ZA({brush:QJ,cartesianAxis:IY,chartData:bK,errorBars:KY,graphicalItems:jY,layout:hU,legend:gB,options:pK,polarAxis:BG,polarOptions:vQ,referenceElements:iX,rootProps:yQ,tooltip:Lq,zIndex:rK}),SQ=function(t){return F8({reducer:jQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([LT.middleware,zT.middleware,Pw.middleware,qT.middleware,KT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(dP({type:"raf"}))},devTools:hu.devToolsEnabled})};function kQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ji(),a=g.useRef(null);if(s)return r;a.current==null&&(a.current=SQ(t));var l=pb;return g.createElement(pQ,{context:l,store:a.current},r)}function NQ(e){var{layout:t,margin:r}=e,n=wn(),s=ji();return g.useEffect(()=>{s||(n(uU(t)),n(cU(r)))},[n,s,t,r]),null}function _Q(e){var t=wn();return g.useEffect(()=>{t(xQ(e))},[t,e]),null}function kC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=kT("".concat(n).concat(t)),a=wn();return g.useLayoutEffect(()=>(a(eK({zIndex:t,elementId:s,isPanorama:r})),()=>{a(tK({zIndex:t,isPanorama:r}))}),[a,t,s,r]),g.createElement("g",{id:s})}function NC(e){var{children:t,isPanorama:r}=e,n=kt(VH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),a=n.filter(l=>l>0);return g.createElement(g.Fragment,null,s.map(l=>g.createElement(kC,{key:l,zIndex:l,isPanorama:r})),t,a.map(l=>g.createElement(kC,{key:l,zIndex:l,isPanorama:r})))}var CQ=["children"];function EQ(e,t){if(e==null)return{};var r,n,s=AQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(null,arguments)}var PQ={width:"100%",height:"100%",display:"block"},OQ=g.forwardRef((e,t)=>{var r=uB(),n=dB(),s=TP();if(!Xo(r)||!Xo(n))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),g.createElement(yA,Rm({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:PQ,ref:t}),a)}),TQ=e=>{var{children:t}=e,r=kt(dp);if(!r)return null;var{width:n,height:s,y:a,x:l}=r;return g.createElement(yA,{width:n,height:s,x:l,y:a},t)},_C=g.forwardRef((e,t)=>{var{children:r}=e,n=EQ(e,CQ),s=ji();return s?g.createElement(TQ,null,g.createElement(NC,{isPanorama:!0},r)):g.createElement(OQ,Rm({ref:t},n),g.createElement(NC,{isPanorama:!1},r))});function IQ(){var e=wn(),[t,r]=g.useState(null),n=kt(OU);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;bn(a)&&a!==n&&e(fU(a))}},[t,e,n]),r}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){$Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t,r){return(t=RQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RQ(e){var t=MQ(e,"string");return typeof t=="symbol"?t:t+""}function MQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kl.apply(null,arguments)}var FQ=()=>(AK(),null);function Mm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var LQ=g.forwardRef((e,t)=>{var r,n,s=g.useRef(null),[a,l]=g.useState({containerWidth:Mm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Mm((n=e.style)===null||n===void 0?void 0:n.height)}),u=g.useCallback((m,f)=>{l(p=>{var x=Math.round(m),v=Math.round(f);return p.containerWidth===x&&p.containerHeight===v?p:{containerWidth:x,containerHeight:v}})},[]),d=g.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var x=j=>{var{width:w,height:S}=j[0].contentRect;u(w,S)},v=new ResizeObserver(x);v.observe(m),s.current=v}},[t,u]);return g.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),g.createElement(g.Fragment,null,g.createElement(mp,{width:a.containerWidth,height:a.containerHeight}),g.createElement("div",Kl({ref:d},e)))}),zQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=g.useState({containerWidth:Mm(r),containerHeight:Mm(n)}),l=g.useCallback((d,m)=>{a(f=>{var p=Math.round(d),x=Math.round(m);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),u=g.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return g.createElement(g.Fragment,null,g.createElement(mp,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",Kl({ref:u},e)))}),UQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return g.createElement(g.Fragment,null,g.createElement(mp,{width:r,height:n}),g.createElement("div",Kl({ref:t},e)))}),BQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return ao(r)||ao(n)?g.createElement(zQ,Kl({},e,{ref:t})):g.createElement(UQ,Kl({},e,{ref:t}))});function WQ(e){return e===!0?LQ:BQ}var VQ=g.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:x,onTouchEnd:v,onTouchMove:j,onTouchStart:w,style:S,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,T=g.useRef(null),A=wn(),[D,L]=g.useState(null),[R,J]=g.useState(null),ne=IQ(),ie=jb(),q=(ie==null?void 0:ie.width)>0?ie.width:_,de=(ie==null?void 0:ie.height)>0?ie.height:s,W=g.useCallback(F=>{ne(F),typeof t=="function"&&t(F),L(F),J(F),F!=null&&(T.current=F)},[ne,t,L,J]),G=g.useCallback(F=>{A(FT(F)),A($i({handler:a,reactEvent:F}))},[A,a]),Q=g.useCallback(F=>{A(Cv(F)),A($i({handler:m,reactEvent:F}))},[A,m]),ae=g.useCallback(F=>{A(RO()),A($i({handler:f,reactEvent:F}))},[A,f]),ee=g.useCallback(F=>{A(Cv(F)),A($i({handler:p,reactEvent:F}))},[A,p]),oe=g.useCallback(()=>{A(VT())},[A]),te=g.useCallback(F=>{A(WT(F.key))},[A]),M=g.useCallback(F=>{A($i({handler:l,reactEvent:F}))},[A,l]),X=g.useCallback(F=>{A($i({handler:u,reactEvent:F}))},[A,u]),me=g.useCallback(F=>{A($i({handler:d,reactEvent:F}))},[A,d]),xe=g.useCallback(F=>{A($i({handler:x,reactEvent:F}))},[A,x]),Fe=g.useCallback(F=>{A($i({handler:w,reactEvent:F}))},[A,w]),Se=g.useCallback(F=>{C&&A(HT(F)),A($i({handler:j,reactEvent:F}))},[A,C,j]),Re=g.useCallback(F=>{A($i({handler:v,reactEvent:F}))},[A,v]),ke=WQ(E);return g.createElement(sT.Provider,{value:D},g.createElement(wL.Provider,{value:R},g.createElement(ke,{width:q??(S==null?void 0:S.width),height:de??(S==null?void 0:S.height),className:Hr("recharts-wrapper",n),style:DQ({position:"relative",cursor:"default",width:q,height:de},S),onClick:G,onContextMenu:M,onDoubleClick:X,onFocus:oe,onKeyDown:te,onMouseDown:me,onMouseEnter:Q,onMouseLeave:ae,onMouseMove:ee,onMouseUp:xe,onTouchEnd:Re,onTouchMove:Se,onTouchStart:Fe,ref:W},g.createElement(FQ,null),r)))}),qQ=["width","height","responsive","children","className","style","compact","title","desc"];function HQ(e,t){if(e==null)return{};var r,n,s=KQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GQ=g.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:l,style:u,compact:d,title:m,desc:f}=e,p=HQ(e,qQ),x=Jo(p);return d?g.createElement(g.Fragment,null,g.createElement(mp,{width:r,height:n}),g.createElement(_C,{otherAttributes:x,title:m,desc:f},a)):g.createElement(VQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(_C,{otherAttributes:x,title:m,desc:f,ref:t},g.createElement(oX,null,a)))});function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(null,arguments)}var YQ={top:5,right:5,bottom:5,left:5},JQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:YQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},XQ=g.forwardRef(function(t,r){var n,s=Bi(t.categoricalChartProps,JQ),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return g.createElement(kQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:a},g.createElement(XJ,{chartData:m.data}),g.createElement(NQ,{layout:s.layout,margin:s.margin}),g.createElement(_Q,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),g.createElement(GQ,Ev({},s,{ref:r})))}),QQ=["axis","item"],ZQ=g.forwardRef((e,t)=>g.createElement(XQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:QQ,tooltipPayloadSearcher:hK,categoricalChartProps:e,ref:t}));const $a="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",GT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function eZ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const xi={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return eZ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function tZ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),YT(e)}async function rZ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return YT(new Uint8Array(n))}function YT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function nZ(e){const t=tZ(),r=await rZ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:xi.clientId,response_type:"code",redirect_uri:xi.redirectUri,response_mode:"query",scope:xi.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${xi.tenantId}/oauth2/v2.0/authorize?${n}`}async function sZ(e){const t=`https://login.microsoftonline.com/${xi.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:xi.clientId,scope:xi.scopes.join(" "),code:e,redirect_uri:xi.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const a=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}}async function iZ(e){const t=`https://login.microsoftonline.com/${xi.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:xi.clientId,scope:xi.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const a=await n.json();throw console.error("Token refresh error:",a),new Error(`Failed to refresh access token: ${a.error_description||a.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function JT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch states: ${a.statusText}`);const l=await a.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function EC(e){const t=new Set;for(const r of GT)try{(await JT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function Av(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(a,l="")=>{const u=l?`${l}\\${a.name}`:a.name;let d=[u];return a.children&&a.children.length>0&&a.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function aZ(e,t,r=[]){var n;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return Av(e);try{const s=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const w=r.map(S=>`'${S}'`).join(", ");s.push(`[System.State] IN (${w})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(w=>w.id).slice(0,200);if(m.length===0)return[];const f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.AreaPath,System.TeamProject&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const x=await p.json(),v=new Set,j=((n=e.project)==null?void 0:n.toLowerCase())||"";return x.value&&Array.isArray(x.value)&&x.value.forEach(w=>{var E,C,T;if((((C=(E=w.fields)==null?void 0:E["System.TeamProject"])==null?void 0:C.toLowerCase())||"")!==j)return;const _=(T=w.fields)==null?void 0:T["System.AreaPath"];_&&v.add(_)}),Array.from(v).sort()}catch(s){return console.error("Error fetching area paths for type/state:",s),[]}}async function oZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const s=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(S=>`'${S}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items by state: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const d=u.workItems.map(S=>S.id).slice(0,200);if(d.length===0)return{types:[],areaPaths:[],tags:[]};const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const p=await f.json(),x=new Set,v=new Set,j=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(S=>{var A,D,L,R,J;if((((D=(A=S.fields)==null?void 0:A["System.TeamProject"])==null?void 0:D.toLowerCase())||"")!==w)return;const E=(L=S.fields)==null?void 0:L["System.WorkItemType"],C=(R=S.fields)==null?void 0:R["System.AreaPath"],T=(J=S.fields)==null?void 0:J["System.Tags"];E&&x.add(E),C&&v.add(C),T&&T.split(";").map(ne=>ne.trim()).forEach(ne=>{ne&&j.add(ne)})}),{types:Array.from(x).sort((S,_)=>S.localeCompare(_)),areaPaths:Array.from(v).sort((S,_)=>S.localeCompare(_)),tags:Array.from(j).sort((S,_)=>S.localeCompare(_))}}catch(n){return console.error("Error fetching types and area paths for states:",n),{types:[],areaPaths:[],tags:[]}}}async function lZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,a)=>s.localeCompare(a))}async function cZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(w=>`[System.AreaPath] UNDER '${w}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[]};const d=u.workItems.map(w=>w.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const p=await f.json(),x=new Set,v=new Set,j=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(w=>{var S;if(w.fields){if((((S=w.fields["System.TeamProject"])==null?void 0:S.toLowerCase())||"")!==j)return;w.fields["System.WorkItemType"]&&x.add(w.fields["System.WorkItemType"]),w.fields["System.State"]&&v.add(w.fields["System.State"])}}),{types:Array.from(x).sort(),states:Array.from(v).sort()}}catch(n){return console.error("Error fetching types and states for area path:",n),{types:[],states:[]}}}async function uZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(S=>`[System.Tags] CONTAINS '${S}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[],areaPaths:[]};const d=u.workItems.map(S=>S.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const p=await f.json(),x=new Set,v=new Set,j=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(S=>{var _;if(S.fields){if((((_=S.fields["System.TeamProject"])==null?void 0:_.toLowerCase())||"")!==w)return;S.fields["System.WorkItemType"]&&x.add(S.fields["System.WorkItemType"]),S.fields["System.State"]&&v.add(S.fields["System.State"]),S.fields["System.AreaPath"]&&j.add(S.fields["System.AreaPath"])}}),{types:Array.from(x).sort(),states:Array.from(v).sort(),areaPaths:Array.from(j).sort()}}catch(n){return console.error("Error fetching types and states for tags:",n),{types:[],states:[],areaPaths:[]}}}async function dZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(w=>`'${w}'`).join(", ");s.push(`[System.State] IN (${j})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const j=n.map(w=>`[System.AreaPath] UNDER '${w}'`);s.push(`(${j.join(" OR ")})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const x=await p.json(),v=new Set;return x.value&&Array.isArray(x.value)&&x.value.forEach(j=>{j.fields&&j.fields["System.Tags"]&&j.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&v.add(S)})}),Array.from(v).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function AC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await a.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=a.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await fZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function fZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const a=s.workItems.map(f=>f.id).slice(0,200);if(a.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${a.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(x=>x.trim()).forEach(x=>{x&&m.add(x)})}),Array.from(m)}function hZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function mZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await sZ(t);return sessionStorage.removeItem("oauth_state"),s}async function pZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await nZ(e);window.location.href=r}async function PC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:a}=e;if(!a)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),x=200,v=[];for(let C=0;C<f.length;C+=x){const A=f.slice(C,C+x).join(","),D=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${A}&fields=${p}&api-version=7.0`,L=await fetch(D,{headers:{Authorization:`Bearer ${a}`}});if(!L.ok)throw new Error(`Failed to fetch work items: ${L.status} ${L.statusText}`);const R=await L.json();R.value&&Array.isArray(R.value)&&v.push(...R.value)}if(v.length===0)return[];const j=new Map,w=new Map,S=new Map,_=10;for(let C=0;C<v.length;C+=_){const T=v.slice(C,C+_);await Promise.all(T.map(async A=>{try{const D=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${A.id}?$expand=relations&api-version=7.0`,L=await fetch(D,{headers:{Authorization:`Bearer ${a}`}});if(L.ok){const R=await L.json();if(R.relations){for(const J of R.relations)if(J.rel==="System.LinkTypes.Hierarchy-Forward"){const ne=J.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(ne){const ie=parseInt(ne[1],10);j.set(A.id,ie)}}}}}catch(D){console.error(`Error fetching relations for work item ${A.id}:`,D)}}))}const E=Array.from(new Set(j.values()));if(E.length>0){const C=E.slice(0,200).join(","),T=["System.Id","System.Title","System.WorkItemType"].join(","),A=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${T}&api-version=7.0`;try{const D=await fetch(A,{headers:{Authorization:`Bearer ${a}`}});if(D.ok){const L=await D.json();for(const R of L.value)S.set(R.id,R.fields["System.Title"]||""),R.fields["System.WorkItemType"]==="Epic"&&w.set(R.id,R.fields["System.Title"]||"")}}catch(D){console.error("Error fetching parent work items:",D)}}return v.map(C=>{let T=null;const A=j.get(C.id);if(A&&(T=w.get(A)||null,!T)){const D=S.get(A)}if(!T&&C.fields){const L=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(R=>R.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(R))];for(const R of L){const J=C.fields[R];if(J!=null){if(typeof J=="string"&&J.trim()!==""){const ne=parseInt(J.trim());if(!isNaN(ne)&&ne>0){if(T=w.get(ne)||null,T)break}else{T=J.trim();break}}else if(typeof J=="number"&&(T=w.get(J)||null,T))break}}}return{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:T||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function OC(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?r=d:console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function TC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const aa=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10);return new Date(n,s,a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},Na=e=>new Date(e)<new Date,XT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",IC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],gZ=e=>e?e.trim().toLowerCase():"",yZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Ih=(e,t,r)=>Math.min(Math.max(e,t),r),xZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Ow=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},vZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},bZ=e=>vZ(Ow(e))>.6?"#111827":"#FFFFFF",DC=(e,t)=>{const{r,g:n,b:s}=Ow(e),a=1+t/100,l=Ih(Math.round(r*a),0,255),u=Ih(Math.round(n*a),0,255),d=Ih(Math.round(s*a),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},wZ=(e,t)=>{const{r,g:n,b:s}=Ow(e);return`rgba(${r}, ${n}, ${s}, ${Ih(t,0,1)})`},Wr=(e,t)=>{const r=xZ(t);if(r){const l=bZ(r);return{background:r,text:l,border:DC(r,-20),badgeBackground:wZ(r,.15),badgeText:l,hoverBackground:DC(r,-5),hoverText:l}}const n=gZ(e),s=n?yZ(n)%IC.length:0,a=IC[s];return{background:a.bg,text:a.text,border:a.border,badgeBackground:`${a.bg}1A`,badgeText:a.text,hoverBackground:a.bg,hoverText:a.text}};function jZ({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:a=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:x="",onNewProductNameChange:v,newProductColor:j,onNewProductColorChange:w,onCreateProduct:S,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:T="e.g., Catalyst Cloud",allowDelete:A=!1,onRequestDeleteProduct:D}){const[L,R]=g.useState(!1),J=g.useRef(null),ne=g.useRef(null),[ie,q]=g.useState(!1),[de,W]=g.useState(!1),G=g.useMemo(()=>t.find(Se=>Se.id===r)??null,[t,r]),Q=(G==null?void 0:G.name)??s??"",ae=Q?Wr(Q,(G==null?void 0:G.color_hex)??null):null,ee=u||a||t.length===0;g.useEffect(()=>{if(!L)return;function Se(ke){J.current&&!J.current.contains(ke.target)&&R(!1)}function Re(ke){ke.key==="Escape"&&R(!1)}return document.addEventListener("mousedown",Se),document.addEventListener("keydown",Re),()=>{document.removeEventListener("mousedown",Se),document.removeEventListener("keydown",Re)}},[L]);const oe=Se=>{n(Se),R(!1)},te=!!(p&&v&&S),M=te&&ie,X=!!w,me=j??"#2D4660",xe=!!(e&&e.trim().length>0),Fe=xe||te;return i.jsxs("div",{className:`space-y-3 ${f}`,children:[i.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),i.jsxs("div",{className:"relative",ref:J,style:Fe?void 0:{marginTop:"-12px"},children:[Fe&&i.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[xe&&i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),te&&i.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:M?i.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[i.jsx("input",{type:"text",value:x,onChange:Se=>{W(!1),v==null||v(Se.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:j&&x.trim().length>0?j:"#D1D5DB"}}),X&&x.trim().length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>{var Se;return(Se=ne.current)==null?void 0:Se.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${j?"":"border-gray-300 bg-white"}`,style:j?{backgroundColor:j,borderColor:j}:void 0,"aria-label":"Choose product color",children:!j&&i.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),i.jsx("input",{ref:ne,type:"color",value:me,onChange:Se=>{W(!1),w==null||w(Se.target.value)},className:"sr-only"}),x.trim().length>0&&i.jsx("button",{type:"button",onClick:()=>W(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${de?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),x.trim().length>0&&j&&de&&i.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):i.jsx("button",{type:"button",onClick:()=>q(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),i.jsxs("button",{type:"button",onClick:()=>!ee&&R(Se=>!Se),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${ee?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!ee&&ae?{borderColor:ae.border}:void 0,"aria-expanded":L,"aria-haspopup":"listbox",children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[ae&&i.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:ae.background,borderColor:ae.border},"aria-hidden":"true"}),i.jsx("span",{className:`truncate ${Q?"":"text-gray-400"}`,style:ae?{color:ae.background}:void 0,children:Q||(t.length===0?"No products available":d)})]}),i.jsx(ts,{className:`ml-2 h-4 w-4 transition-transform ${L?"rotate-180":""} ${ee?"text-gray-300":"text-gray-500"}`})]}),L&&!ee&&i.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:i.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(Se=>{const Re=Wr(Se.name,Se.color_hex??null),ke=r===Se.id;return i.jsxs("div",{className:"product-picker__item",style:{"--product-color":Re.background,"--product-light-bg":Re.badgeBackground,"--product-border-color":Re.border},children:[i.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>oe(Se.id),"aria-selected":ke,children:[i.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),i.jsx("span",{className:"flex-1 truncate font-medium",children:Se.name}),ke&&i.jsx(kr,{className:"h-4 w-4 text-gray-400"})]}),A&&D&&i.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),R(!1),D(Se)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${Se.name}`,title:"Delete product",children:i.jsx(ha,{className:"h-4 w-4"})})]},Se.id)})})}),a&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&i.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!a&&!l&&m&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),te&&E&&M&&i.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const $C=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],RC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},SZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return $C[t%$C.length]};function Cr(e,t){const r=e.product_id??e.productId??null;if(r&&t){const a=RC(t[r]);if(a)return a}const n=RC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return SZ(s)}const kZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],MC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function NZ({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:a=!1,variant:l="default"}){const[u,d]=g.useState(!1),m=g.useRef(null);g.useEffect(()=>{function S(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,x=l==="green"?"border-green-600":"border-gray-300",v=l==="green"?"text-green-600":"text-gray-400",j=l==="green"?"bg-green-50":"bg-blue-50",w=l==="green"?"text-green-600":"text-[#1E5461]";return i.jsxs("div",{ref:m,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!a&&d(!u),className:`w-full px-3 py-2 border ${x} rounded-md min-h-[38px] flex items-center justify-between ${a?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),i.jsx(ts,{className:`h-4 w-4 ${v} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>i.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?j:""}`,children:[i.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&i.jsx(kr,{className:`h-4 w-4 ${w}`})]},S))})]})}function fd({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:a=!1,disabled:l=!1}){const[u,d]=g.useState(!1),[m,f]=g.useState(""),p=g.useRef(null),x=g.useRef(null);g.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),g.useEffect(()=>{u&&a&&x.current&&x.current.focus()},[u,a]);const v=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},j=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},w=_=>{_.stopPropagation(),r([])},S=a&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return i.jsxs("div",{ref:p,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?i.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&i.jsx("button",{type:"button",onClick:E=>j(_,E),className:"ml-1 hover:text-[#173B65]",children:i.jsx(Es,{className:"h-3 w-3"})})]},_))}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&i.jsx("button",{type:"button",onClick:w,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Es,{className:"h-4 w-4"})}),i.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a&&i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsx("input",{ref:x,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),i.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(_=>i.jsxs("div",{onClick:()=>v(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[i.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&i.jsx(kr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function _Z({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s}){const[a,l]=g.useState(new Set);g.useEffect(()=>{e&&r&&r.length>0&&l(new Set(r.map(x=>x.id)))},[e,r]);const u=x=>{l(v=>{const j=new Set(v);return j.has(x)?j.delete(x):j.add(x),j})},d=()=>{r&&(a.size===r.length?l(new Set):l(new Set(r.map(x=>x.id))))},m=async()=>{if(!r)return;const x=r.filter(v=>a.has(v.id));await n(x),t()},f=async()=>{!r||!s||(await s(),t())},p=a.size;return i.jsx(xn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:i.jsx("div",{className:"space-y-4",children:r&&r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:i.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),i.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),d()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&a.size===r.length?i.jsx(Nd,{className:"w-5 h-5 text-green-600"}):i.jsx(_d,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(x=>{const v=a.has(x.id);return i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${v?"bg-blue-50":""}`,onClick:()=>u(x.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u(x.id)},className:"flex items-center justify-center w-5 h-5",children:v?i.jsx(Nd,{className:"w-5 h-5 text-green-600"}):i.jsx(_d,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.title}),x.description&&x.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[x.description.replace(/<[^>]*>/g,"").substring(0,100),x.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),x.tags&&x.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[x.tags.slice(0,3).map((j,w)=>i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},w)),x.tags.length>3&&i.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",x.tags.length-3]})]})]}),x.azureDevOpsId&&i.jsx(Dp,{id:x.azureDevOpsId,url:x.azureDevOpsUrl||""})]})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:i.jsx("div",{className:"flex items-center",children:x.workItemType==="Epic"?i.jsx($n,{className:"w-5 h-5 text-green-600"}):x.workItemType==="Feature"?i.jsx(Xv,{className:"w-5 h-5 text-purple-600"}):x.workItemType?i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:x.workItemType}):null})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:x.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:x.state})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:x.workItemType!=="Epic"&&x.epic?i.jsx(lf,{name:x.epic}):i.jsx("span",{className:"text-xs text-gray-400",children:""})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:x.areaPath?i.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:x.areaPath,children:x.areaPath}):i.jsx("span",{className:"text-xs text-gray-400",children:""})})]},x.id)})})]})})}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[p," of ",r.length," selected"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(wt,{variant:"primary",onClick:m,disabled:p===0,className:"flex items-center",children:[i.jsx(yn,{className:"h-4 w-4 mr-2"}),"Add ",p," Feature",p!==1?"s":""]}),s&&i.jsxs(wt,{variant:"danger",onClick:f,className:"flex items-center",children:[i.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ir,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function CZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:a,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:x,onFetchTypesAndStatesForTags:v,onFetchTypesAndAreaPathsForStates:j,resetSignal:w}){const S=GT,[_,E]=g.useState(!1),[C,T]=g.useState(null),[A,D]=g.useState(!1),[L,R]=g.useState(!1),[J,ne]=g.useState(!1),[ie,q]=g.useState(0),de=g.useRef(null),W=g.useRef(!1),G=g.useRef(!1),Q=g.useRef(null),ae=g.useRef(e),ee=g.useRef(null),oe=g.useRef(!1),te=g.useRef(!1),M=g.useRef(!1),X=g.useRef(null),me=g.useRef(!1),xe=g.useRef(!1),Fe=g.useRef([]),Se=g.useRef([]),Re=g.useRef([]),ke=g.useRef(null),F=g.useRef(null),le=g.useRef([]),ce=g.useRef([]),K=g.useRef([]),Ye={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:Ae,handleSubmit:tt,watch:St,control:pt,setValue:it,reset:er}=Cd({defaultValues:Ye}),z=g.useCallback(()=>{xe.current=!0,er({...Ye}),E(!1),oe.current=!1,te.current=!1,M.current=!1,me.current=!1,G.current=!1,Q.current=null,X.current!==null&&(clearTimeout(X.current),X.current=null),ke.current!==null&&(clearTimeout(ke.current),ke.current=null),F.current=null,le.current=[],ce.current=[],K.current=[],setTimeout(()=>{xe.current=!1},500)},[er]);g.useEffect(()=>{z()},[w,z]);const V=St("workItemTypes"),Z=St("states"),Ne=St("areaPaths"),Oe=St("tags");g.useEffect(()=>{if(te.current||me.current||oe.current||M.current||xe.current){Fe.current=V||[],Se.current=Z||[],Re.current=Ne||[];return}const Ve=V.length<Fe.current.length,gt=Z.length<Se.current.length,xt=Ne.length<Re.current.length;if(Ve||gt||xt){F.current=Date.now(),Fe.current=V||[],Se.current=Z||[],Re.current=Ne||[],xe.current=!0,ke.current!==null&&clearTimeout(ke.current);const Le=async()=>{Ve&&(le.current=[]),gt&&(ce.current=[]),xt&&(K.current=[]),V&&V.length>0?(m&&await m(V[0]),f&&await f(V[0],Z||[]),p&&await p(V[0],Z||[],Ne||[])):Z&&Z.length>0&&j?await j(Z):Ne&&Ne.length>0&&x&&await x(Ne),setTimeout(()=>{ke.current=null,setTimeout(()=>{xe.current=!1,setTimeout(()=>{F.current=null},2e3)},1e3)},500)};ke.current=window.setTimeout(()=>{Le()},100)}else Fe.current=V||[],Se.current=Z||[],Re.current=Ne||[]},[V,Z,Ne,Oe,m,f,p,j,x]);const _e=St("query"),Te=g.useCallback((Ve,gt,xt,Le,He,et)=>{const vt=[];if(Ve&&Ve.length>0)if(Ve.length===1)vt.push(`[System.WorkItemType] = '${Ve[0]}'`);else{const ct=Ve.map(Ht=>`'${Ht}'`).join(", ");vt.push(`[System.WorkItemType] IN (${ct})`)}if(gt&&gt.length>0)if(gt.length===1)vt.push(`[System.State] = '${gt[0]}'`);else{const ct=gt.map(Ht=>`'${Ht}'`).join(", ");vt.push(`[System.State] IN (${ct})`)}if(xt&&xt.length>0)if(xt.length===1)vt.push(`[System.AreaPath] UNDER '${xt[0]}'`);else{const ct=xt.map(Ht=>`[System.AreaPath] UNDER '${Ht}'`);vt.push(`(${ct.join(" OR ")})`)}if(Le&&Le.length>0){const ct=Le.map(Ht=>`[System.Tags] CONTAINS '${Ht}'`);vt.push(`(${ct.join(" OR ")})`)}return et&&He&&vt.push(`(${He})`),vt.length>0?vt.join(" AND "):void 0},[]);g.useEffect(()=>{if(!(oe.current||te.current||M.current||me.current||X.current!==null)&&m){if(!V||V.length===0){m(void 0);return}m(V[0])}},[V,m]),g.useEffect(()=>{if(oe.current||te.current||me.current||!f)return;(async()=>{R(!0);try{await f(V&&V.length>0?V[0]:void 0,Z||[])}finally{R(!1)}})()},[V,Z,f]),g.useEffect(()=>{if(te.current||oe.current||M.current||X.current!==null||me.current||!p||!V||V.length===0)return;const Ve=async()=>{ne(!0);try{await p(V[0],Z||[],Ne||[])}finally{ne(!1)}},gt=setTimeout(()=>{Ve()},100);return()=>{clearTimeout(gt),ne(!1)}},[V,Z,Ne,p]),g.useEffect(()=>{if(!x||te.current||M.current||!Ne||Ne.length===0)return;const Ve=V&&V.length>0,gt=Z&&Z.length>0;Ve&&gt||(oe.current=!0,x(Ne).then(({types:xt,states:Le})=>{xt.length>0&&!Ve&&it("workItemTypes",xt,{shouldDirty:!1}),Le.length>0&&!gt&&it("states",Le,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{oe.current=!1},300)}))},[Ne,V,Z,x,it]),g.useEffect(()=>{var Bt,Vt,Wt;if(!v||xe.current||ke.current!==null||oe.current||M.current)return;if(F.current!==null){if(Date.now()-F.current<5e3)return;F.current=null}const Ve=((V==null?void 0:V.length)||0)<(((Bt=Fe.current)==null?void 0:Bt.length)||0),gt=((Z==null?void 0:Z.length)||0)<(((Vt=Se.current)==null?void 0:Vt.length)||0),xt=((Ne==null?void 0:Ne.length)||0)<(((Wt=Re.current)==null?void 0:Wt.length)||0),Le=V||[],He=Z||[],et=Ne||[],vt=le.current||[],ct=ce.current||[],Ht=K.current||[],ar=vt.length>0&&Le.length<vt.length&&Le.every(Gt=>vt.includes(Gt)),Er=ct.length>0&&He.length<ct.length&&He.every(Gt=>ct.includes(Gt)),Ze=Ht.length>0&&et.length<Ht.length&&et.every(Gt=>Ht.includes(Gt));if(Ve||gt||xt||ar||Er||Ze){Fe.current=V||[],Se.current=Z||[],Re.current=Ne||[],F.current=Date.now();return}if(!Oe||Oe.length===0){X.current!==null&&(clearTimeout(X.current),X.current=null),me.current=!1,Q.current=null,G.current=!1,F.current=null,le.current=[],ce.current=[],K.current=[];return}te.current=!0,me.current=!0,Q.current=Date.now(),X.current!==null&&clearTimeout(X.current),X.current=window.setTimeout(()=>{X.current=null,setTimeout(()=>{me.current=!1,Q.current=null,G.current=!0,q(Gt=>Gt+1)},500)},1500),v(Oe).then(({types:Gt,states:tr,areaPaths:Rr})=>{Gt.length>0,tr.length>0,Rr.length>0,Gt.length>0&&(it("workItemTypes",Gt,{shouldDirty:!1}),Fe.current=Gt,le.current=Gt),tr.length>0&&(it("states",tr,{shouldDirty:!1}),Se.current=tr,ce.current=tr),Rr.length>0&&(it("areaPaths",Rr,{shouldDirty:!1}),Re.current=Rr,K.current=Rr),Gt.length>0&&(G.current=!0,setTimeout(()=>{const Yt=ae.current,sr=ee.current;!me.current&&!te.current&&X.current===null&&Yt.enabled&&Yt.accessToken&&sr?(de.current!==null&&(window.clearTimeout(de.current),de.current=null),sr(),G.current=!1):q(rr=>rr+1)},2100))}).finally(()=>{setTimeout(()=>{te.current=!1},500)})},[Oe,v,it]),g.useEffect(()=>{!j||oe.current||te.current||!Z||Z.length===0||V&&V.length>0||(M.current=!0,j(Z).then(({types:gt})=>{gt.length>0&&it("workItemTypes",gt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{M.current=!1},300)}))},[Z,V,j,it]),g.useEffect(()=>{if(Z&&Z.length>0&&s.length>0){const Ve=Z.filter(gt=>s.includes(gt));Ve.length!==Z.length&&it("states",Ve)}},[s,Z,it]),g.useEffect(()=>{if(Ne&&Ne.length>0&&a.length>0){const Ve=Ne.filter(gt=>a.includes(gt));Ve.length!==Ne.length&&(it("areaPaths",Ve),Ve.length===0&&it("tags",[]))}},[a,Ne,it]),g.useEffect(()=>{if(Oe&&Oe.length>0&&l.length>0){const Ve=Oe.filter(gt=>l.includes(gt));Ve.length!==Oe.length&&it("tags",Ve)}},[l,Oe,it]);const ut=g.useCallback(async()=>{if(!e.enabled||!e.accessToken||!V||V.length===0){T(null);return}try{D(!0);const Ve=V[0],gt=Te(V||[],Z||[],Ne||[],Oe||[],_e||"",_);let xt="";gt?xt=`SELECT [System.Id] FROM WorkItems WHERE ${gt}`:xt=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${Ve}' AND [System.State] = 'Active'`;const Le=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,He=await fetch(Le,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:xt})});if(!He.ok)throw new Error(`Azure DevOps query failed: ${He.status} ${He.statusText}`);const et=await He.json(),vt=et.workItems?et.workItems.length:0;T(vt)}catch(Ve){console.error("[FilterForm] Error fetching feature count:",Ve),T(null)}finally{D(!1)}},[e,V,Z,Ne,Oe,_e,_,Te]);g.useEffect(()=>{ae.current=e,ee.current=ut},[e,ut]),g.useEffect(()=>{if(de.current!==null&&(window.clearTimeout(de.current),de.current=null),!V||V.length===0){T(null);return}if(G.current&&V&&V.length>0){const Ve=!me.current&&!te.current&&X.current===null,gt=Q.current===null||Date.now()-Q.current>=2100;if(Ve||gt){G.current=!1;const xt=ae.current,Le=ee.current;xt.enabled&&xt.accessToken&&Le&&Le();return}return}if(me.current||te.current||X.current!==null){G.current=!0;return}return e.enabled&&e.accessToken?de.current=window.setTimeout(()=>{ut()},300):T(null),()=>{de.current!==null&&(window.clearTimeout(de.current),de.current=null)}},[V,Z,Ne,Oe,_e,_,e.enabled,e.accessToken,ut,ie]),g.useEffect(()=>{if(d&&!W.current&&u){const Ve=u.length;T(Ve)}W.current=d||!1},[d,u]),g.useEffect(()=>{u&&u.length>0?T(u.length):u&&u.length===0&&T(0)},[u]),g.useEffect(()=>{const Ve=Te(V||[],Z||[],Ne||[],Oe||[],_e||"",_),gt={...e,workItemType:V&&V.length>0?V[0]:e.workItemType||"Feature",query:Ve,states:Z&&Z.length>0?Z:void 0,areaPath:Ne&&Ne.length>0?Ne[0]:void 0,tags:Oe&&Oe.length>0?Oe:void 0},xt=window.setTimeout(()=>{t(gt)},100);return()=>{window.clearTimeout(xt)}},[V,Z,Ne,Oe,_e,_,Te,t]);const Dt=async Ve=>{await r()};return i.jsxs("form",{onSubmit:tt(Dt),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[i.jsx(lF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:z,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),i.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),i.jsx(cd,{name:"workItemTypes",control:pt,render:({field:Ve})=>i.jsx(fd,{options:S,value:Ve.value,onChange:Ve.onChange,placeholder:"Select types..."})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),i.jsx(cd,{name:"states",control:pt,render:({field:Ve})=>i.jsx(fd,{options:s,value:Ve.value,onChange:Ve.onChange,placeholder:"Select states...",disabled:s.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(a==null?void 0:a.length)||0})]}),i.jsx(cd,{name:"areaPaths",control:pt,render:({field:Ve})=>i.jsx(fd,{options:a,value:Ve.value,onChange:Ve.onChange,placeholder:"Select area paths...",searchable:!0,disabled:a.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:L?"Loading area paths...":a.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),i.jsx(cd,{name:"tags",control:pt,render:({field:Ve})=>i.jsx(fd,{options:l,value:Ve.value,onChange:Ve.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!J})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!V||V.length===0?"Select work item type to see tags":J?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),i.jsx("input",{...Ae("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),i.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",i.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(wt,{variant:"gold",type:"submit",disabled:(()=>{const Ve=((V==null?void 0:V.length)??0)>0,gt=((Z==null?void 0:Z.length)??0)>0,xt=((Ne==null?void 0:Ne.length)??0)>0,Le=((Oe==null?void 0:Oe.length)??0)>0,He=_e&&_e.trim().length>0;return n||A||!(Ve||gt||xt||Le||He)})(),className:"flex items-center",children:[n&&i.jsx(Ul,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":(()=>{const Ve=C!==null?C:(u==null?void 0:u.length)??null;return Ve!==null?`Preview ${Ve} Feature${Ve!==1?"s":""}`:"Preview Features"})()]})})]})}function EZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:a,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[x,v]=g.useState(null),[j,w]=g.useState(!1),[S,_]=g.useState("#2D4660"),[E,C]=g.useState(null),[T,A]=g.useState(!1);g.useRef(null);const D="2099-12-31",L=ce=>ce?ce.split("T")[0]===D:!1,R=ce=>{if(!ce||typeof ce!="string")return new Date;const Ye=ce.split("T")[0].split(" ")[0].split("-");if(Ye.length!==3)return new Date;const Ae=parseInt(Ye[0],10),tt=parseInt(Ye[1],10),St=parseInt(Ye[2],10);if(isNaN(Ae)||isNaN(tt)||isNaN(St))return new Date;const pt=new Date(Ae,tt-1,St,0,0,0,0);return isNaN(pt.getTime())?new Date:pt},J=ce=>{if(!ce||isNaN(ce.getTime()))return new Date().toISOString().split("T")[0];const K=ce.getFullYear(),Ye=String(ce.getMonth()+1).padStart(2,"0"),Ae=String(ce.getDate()).padStart(2,"0");return`${K}-${Ye}-${Ae}`},ne=(ce,K)=>{const Ye=ce.getFullYear(),Ae=ce.getMonth(),tt=ce.getDate();return new Date(Ye,Ae,tt+K,0,0,0,0)},ie=g.useMemo(()=>{const ce={};return u.forEach(K=>{K.id&&K.name&&(ce[K.id]=K.name)}),ce},[u]),{register:q,handleSubmit:de,watch:W,reset:G,control:Q,setValue:ae,formState:{errors:ee}}=Cd({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:L(e.startDate)?"":e.startDate.split("T")[0],endDate:L(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});g.useEffect(()=>{const ce=L(e.startDate)?"":e.startDate.split("T")[0],K=L(e.endDate)?"":e.endDate.split("T")[0];G({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:ce,endDate:K,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),Fe.current=ce},[e,G]);const oe=e.productName??e.product_name??l??"",te=e.productId??e.product_id??"";g.useEffect(()=>{if(!u.length)return;if(te){u.some(Ye=>Ye.id===te)&&ae("productId",te,{shouldDirty:!1,shouldTouch:!1});return}if(!oe)return;const ce=u.find(K=>K.name.toLowerCase()===oe.toLowerCase());ce&&ae("productId",ce.id,{shouldDirty:!1,shouldTouch:!1})},[u,te,oe,ae]);const M=W("useAutoVotes"),X=W("productId"),me=W("startDate"),xe=W("endDate"),Fe=g.useRef(""),Se=g.useCallback(async ce=>{const K=me,Ye=xe;if(ce==="startDate"&&!K){let Ae;if(X)try{const pt=(await AS(X)).filter(it=>it.id!==e.id);if(pt.length>0){let it=null;pt.forEach(er=>{const z=er.end_date||er.endDate;if(z&&!L(z)){const V=R(z);(!it||V>it)&&(it=V)}}),it?Ae=ne(it,1):Ae=new Date}else Ae=new Date}catch(St){console.error("Error calculating dates for product:",St),Ae=new Date}else Ae=new Date;const tt=ne(Ae,14);ae("startDate",J(Ae),{shouldDirty:!0}),Ye||ae("endDate",J(tt),{shouldDirty:!0})}else if(ce==="endDate"&&!Ye){let Ae;if(K)Ae=R(K);else{if(X)try{const pt=(await AS(X)).filter(it=>it.id!==e.id);if(pt.length>0){let it=null;pt.forEach(er=>{const z=er.end_date||er.endDate;if(z&&!L(z)){const V=R(z);(!it||V>it)&&(it=V)}}),it?Ae=ne(it,1):Ae=new Date}else Ae=new Date}catch(St){console.error("Error calculating dates for product:",St),Ae=new Date}else Ae=new Date;ae("startDate",J(Ae),{shouldDirty:!0})}const tt=ne(Ae,14);ae("endDate",J(tt),{shouldDirty:!0})}},[me,xe,X,ae]);g.useEffect(()=>{if(me&&me!==Fe.current&&xe){Fe.current=me;const ce=R(me),K=ne(ce,14);ae("endDate",J(K),{shouldDirty:!0})}},[me,xe,ae]);const Re=g.useMemo(()=>!E||!X?u:u.map(ce=>ce.id===X?{...ce,color_hex:E}:ce),[u,E,X]);g.useEffect(()=>{if(!X)return;u.some(K=>K.id===X)||ae("productId","",{shouldDirty:!0,shouldTouch:!0})},[X,u,ae]),g.useEffect(()=>{if(X&&u.length>0){const ce=u.find(K=>K.id===X);if(ce){const K=ce.color_hex??null;v(K),_(K||"#2D4660"),C(null),w(!1)}}else X||(v(null),_("#2D4660"),C(null),w(!1))},[X,u]);const ke=M?Math.max(1,Math.floor(t/2)):W("votesPerUser"),F=async(ce,K=!1)=>{try{r({...ce,isDraft:K})}catch(Ye){throw console.error("ERROR in handleFormSubmit:",Ye),Ye}},le=async()=>{const ce=W();await F(ce,!0)};return i.jsxs("form",{onSubmit:de(ce=>F(ce),ce=>{}),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const ce=Re.find(pt=>pt.id===X)??null,K=X?ie[X]??null:null,Ye=(ce==null?void 0:ce.name)??K??oe??"No Product",Ae=(ce==null?void 0:ce.color_hex)||null,tt=ce?Wr(ce.name,Ae??null):null,St=(tt==null?void 0:tt.background)||null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:St||"#2D4660"}}),i.jsx("span",{className:"text-gray-900",children:Ye})]})})()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),i.jsx("input",{...q("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ee.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:ee.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),i.jsx("textarea",{...q("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ee.goal&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:ee.goal.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",...q("startDate",{required:!L(e.startDate)&&!L(e.endDate)?"Start date is required":!1}),value:W("startDate")||"",onFocus:ce=>{W("startDate")||Se("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${ee.startDate?"border-red-500":"border-gray-300"}`,style:W("startDate")?{}:{color:"transparent"},onBlur:ce=>{ce.target.value?ce.target.style.color="":ce.target.style.color="transparent"}}),ee.startDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:ee.startDate.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",...q("endDate",{required:!L(e.startDate)&&!L(e.endDate)?"End date is required":!1}),value:W("endDate")||"",onFocus:ce=>{W("endDate")||Se("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${ee.endDate?"border-red-500":"border-gray-300"}`,style:W("endDate")?{}:{color:"transparent",position:"relative"},onBlur:ce=>{ce.target.value?ce.target.style.color="":ce.target.style.color="transparent"}}),ee.endDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:ee.endDate.message})]})]}),i.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"checkbox",...q("useAutoVotes"),className:"hidden"}),i.jsx("button",{type:"button",onClick:()=>ae("useAutoVotes",!M,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:M?i.jsx(Nd,{className:"w-5 h-5 text-green-600"}):i.jsx(_d,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("label",{onClick:()=>ae("useAutoVotes",!M,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",ke," votes"]})]})]}),!M&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("input",{type:"number",min:"1",...q("votesPerUser",{required:M?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ee.votesPerUser&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:ee.votesPerUser.message})]})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(wt,{variant:"danger",type:"button",onClick:()=>s(),disabled:a,className:"flex items-center gap-2",children:[i.jsx(ha,{className:"h-4 w-4"}),a?"Deleting...":"Delete Session"]}),i.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[i.jsx(wt,{variant:"secondary",type:"button",onClick:le,children:"Save Draft"}),i.jsx(wt,{variant:"primary",type:"button",onClick:async ce=>{ce.preventDefault(),ce.stopPropagation(),W(),await de(K=>F(K,!1),K=>{alert("Please fix form errors: "+JSON.stringify(K))})()},children:"Save Changes"})]})]}),j&&X&&(()=>{const ce=Re.find(K=>K.id===X);return ce?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{w(!1),v(ce.color_hex??null),_(ce.color_hex??"#2D4660"),C(null)},children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:K=>K.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:K=>{_(K.target.value),v(K.target.value)},ref:K=>{K&&j&&setTimeout(()=>K.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsx("button",{type:"button",onClick:()=>{if(!X||!S)return;const K=Re.find(Ae=>Ae.id===X);if(!K)return;if((K.color_hex||null)===S){w(!1);return}C(S),v(S),w(!1)},disabled:T,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:T?i.jsx(Ul,{className:"h-8 w-8 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function AZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:a,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:x,votingSession:v,azureDevOpsConfig:j,onUpdateAzureDevOpsConfig:w,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:T,availableStates:A,availableAreaPaths:D,availableTags:L,previewFeatures:R,showPreviewModal:J,setShowPreviewModal:ne,onConfirmSync:ie,onReplaceAll:q,onUpdateVotingSession:de,onFetchStatesForType:W,onFetchAreaPathsForTypeAndState:G,onFetchTagsForTypeStateAndAreaPath:Q,onFetchTypesAndStatesForAreaPath:ae,onFetchTypesAndStatesForTags:ee,onFetchTypesAndAreaPathsForStates:oe,suggestedFeatures:te,otherSessions:M,onPromoteSuggestion:X,onMoveSuggestion:me,onEditSuggestion:xe,onDeleteSuggestion:Fe,adminPerspective:Se="session",projectOptions:Re}){const ke=ti(),{currentUser:F,currentSession:le,setCurrentSession:ce}=Ia(),[K,Ye]=g.useState(()=>j.project?[j.project]:Re[0]?[Re[0]]:[]),[Ae,tt]=g.useState(0);g.useEffect(()=>{j.project?Ye([j.project]):Re.length>0?Ye([Re[0]]):Ye([])},[j.project,Re]);const[St,pt]=g.useState(!1),[it,er]=g.useState(!1),[z,V]=g.useState(!1),[Z,Ne]=g.useState(!1),Oe=g.useRef(null),[_e,Te]=g.useState(!1),[ut,Dt]=g.useState(!1),[Ve,gt]=g.useState(!1),[xt,Le]=g.useState(0),[He,et]=g.useState(0),vt=g.useRef(null),[ct,Ht]=g.useState(null),[ar,Er]=g.useState(!1),[Ze,Bt]=g.useState(null),[Vt,Wt]=g.useState(null),[Gt,tr]=g.useState(""),[Rr,Yt]=g.useState(null),[sr,dr]=g.useState(!1),[rr,Wn]=g.useState(null),[Xt,os]=g.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[Mr,gr]=g.useState([]),[fr,rn]=g.useState(null),[Fr,An]=g.useState(!1),[jr,Or]=g.useState(null),[Vn,qn]=g.useState(!1),[Vi,cn]=g.useState(null),[xs,vs]=g.useState(!1),[xr,Pn]=g.useState([]),[Ar,Qt]=g.useState(!1),[or,re]=g.useState([]),[Pe,Ue]=g.useState(!1),[We,Je]=g.useState(null),[Ie,Ot]=g.useState(null),[Rt,Tt]=g.useState(null),[Ke,vr]=g.useState(""),[lr,Lr]=g.useState(null),[Ut,un]=g.useState(!1),[br,Hn]=g.useState(!1),[zs,ls]=g.useState("#2D4660"),[Si,nr]=g.useState(!1),[Qr,yr]=g.useState(!1),qi=g.useMemo(()=>{const U={};return or.forEach(k=>{k.id&&k.name&&(U[k.id]=k.name)}),U},[or]),Mt=g.useMemo(()=>{const U={};return or.forEach(k=>{k.id&&k.color_hex&&(U[k.id]=k.color_hex)}),U},[or]),Us=g.useMemo(()=>Cr({...v,product_id:v.product_id??(le==null?void 0:le.product_id)??v.productId??null,product_name:null},qi),[v,le,qi]),ni=g.useMemo(()=>{const U=v.product_id??v.productId??null;return U?Mt[U]??null:null},[v,Mt]),dn=g.useMemo(()=>Wr(Us,ni),[Us,ni]),Hi=g.useRef(null);g.useEffect(()=>{(async()=>{if(!F)return;const k=await Ui(F.id);Dt(k);const{data:$}=await Ee.from("session_admins").select("session_id").eq("user_id",F.id).limit(1);gt($&&$.length>0)})()},[F]);const Ki=g.useCallback(async()=>{const U=(le==null?void 0:le.id)||(v==null?void 0:v.id);if(!U){Le(0),et(0);return}try{const[k,$]=await Promise.all([Wd(U).catch(ge=>(console.error("[AdminDashboard] Error loading admins:",ge),[])),Bh(U).catch(ge=>(console.error("[AdminDashboard] Error loading stakeholders:",ge),[]))]);Le(k.length),et($.length)}catch(k){console.error("[AdminDashboard] Error loading admin/stakeholder counts:",k),Le(0),et(0)}},[le==null?void 0:le.id,v]);g.useEffect(()=>{Ki()},[Ki]),g.useEffect(()=>{const U=()=>{Ki()};return window.addEventListener("focus",U),()=>window.removeEventListener("focus",U)},[Ki]),g.useEffect(()=>{const U=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId)??null;if(!U){Hi.current=null,re([]),Je(null);return}if(Hi.current===U)return;let k=!1;return(async()=>{Ue(!0),Je(null);try{const ge=await Ga(U);if(k)return;re(ge),Hi.current=U}catch(ge){if(k)return;console.error("Error loading products for admin dashboard:",ge),eo!=null&&eo(ge)?Je("Products are not configured yet. Please create the `products` table in Supabase."):Je("Unable to load products. Please try again."),re([]),Hi.current=null}finally{k||Ue(!1)}})(),()=>{k=!0}},[F==null?void 0:F.tenant_id,F==null?void 0:F.tenantId]);const bs=g.useCallback(async()=>{if(Ie){nr(!0);try{await _E(Ie.id),re(U=>U.filter(k=>k.id!==Ie.id)),Ot(null)}catch(U){console.error("Error deleting product from admin dashboard:",U),Je("Failed to delete product. Please try again.")}finally{nr(!1)}}},[Ie]),si=g.useCallback(U=>{const k=U.filter($=>$==null?void 0:$.trim()).map($=>$.trim());if(Ye(k),k.length>0&&k[0]!==(j.project||"")){const $={...j,project:k[0]};w($)}tt($=>$+1)},[j,w]),{register:Kn,handleSubmit:Zr,reset:cs}=Cd({defaultValues:{reason:"",details:""}}),{control:ws,handleSubmit:zr,reset:fn,register:nn,formState:{errors:Gi}}=Cd({defaultValues:{reason:"",details:""}}),As="2099-12-31",Ps=U=>U?U.split("T")[0]===As:!1,Yi=U=>{if(!U.is_active){const k=!U.title||U.title==="Untitled Session"||U.title.trim()==="",$=!U.goal||U.goal.trim()==="";return k||$}return!1},Os=(U=>{if(Yi(U))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Kh};const k=new Date,$=U.startDate||U.start_date,ge=U.endDate||U.end_date,fe=new Date($),we=new Date(ge);return k<fe?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Xm}:k>we?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:ir}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:kr}})(v),Ra=Os.icon,sl=i.jsxs("span",{className:`inline-flex items-center ${Os.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Os.color}`,children:[i.jsx(Ra,{className:`${Os.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Os.text]}),sn=g.useMemo(()=>{const U=$=>{const ge=$.type==="reopen",fe=$.createdAt||null,we=$.actorName||"Admin",P=fe?` ${aa(fe)}`:"";return{id:$.id,type:$.type,reason:$.reason,details:$.details??null,title:ge?`Reopened${P} by ${we}`:`Ended early${P} by ${we}`,description:`${$.reason}${$.details?": "+$.details:""}`,iconBgClass:ge?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:ge?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:ge?"text-[#1E5461]":"text-[#C89212]",textColorClass:ge?"text-[#1E5461]":"text-[#6A4234]"}};if(xr.length>0)return xr.map($=>U($));const k=[];return v.reopenReason&&k.push({id:"fallback-reopen",sessionId:(le==null?void 0:le.id)||"",type:"reopen",reason:v.reopenReason,details:v.reopenDetails??null,actorName:v.reopenedBy||"Admin",actorId:null,createdAt:v.reopenedAt||v.endDate}),v.endedEarlyReason&&k.push({id:"fallback-ended-early",sessionId:(le==null?void 0:le.id)||"",type:"ended-early",reason:v.endedEarlyReason,details:v.endedEarlyDetails??null,actorName:v.endedEarlyBy||"Admin",actorId:null,createdAt:v.originalEndDate||v.endDate}),k.map($=>U($))},[xr,v.reopenReason,v.reopenDetails,v.reopenedAt,v.reopenedBy,v.endedEarlyReason,v.endedEarlyDetails,v.originalEndDate,v.endDate,v.endedEarlyBy,le==null?void 0:le.id]);g.useEffect(()=>{sn.length<=2&&Qt(!1)},[sn.length]);const Bs=g.useCallback(async()=>{if(!(le!=null&&le.id)){Pn([]);return}try{const U=await w$(le.id);Pn(U)}catch(U){console.error("Error loading session status notes:",U)}},[le==null?void 0:le.id]);g.useEffect(()=>{Bs()},[Bs]);const Ts=g.useCallback(U=>{U.stopPropagation(),le&&ce(le);const k=v.product_id||v.productId||"",$=k?`/users?filter=session-admin&product=${k}`:"/users?filter=session-admin";ke($)},[le,ce,ke,v]),ki=g.useCallback(U=>{U.stopPropagation(),le&&ce(le);const k=v.product_id||v.productId||"",$=k?`/users?filter=stakeholder&product=${k}`:"/users?filter=stakeholder";ke($)},[le,ce,ke,v]),jo=g.useCallback(async U=>{if(le!=null&&le.id)try{const k=await j$({session_id:le.id,type:U.type,reason:U.reason,details:U.details??null,actor_id:U.actorId??null,actor_name:U.actorName||"Admin"});Pn($=>{const ge=$.findIndex(fe=>fe.id===k.id);if(ge!==-1){const fe=[...$];return fe[ge]=k,fe}return[k,...$]})}catch(k){console.error("Error logging session status note:",k)}},[le==null?void 0:le.id]);g.useEffect(()=>{rr&&(os({title:rr.title,summary:rr.summary??"",whatWouldItDo:rr.whatWouldItDo??"",howWouldItWork:rr.howWouldItWork??""}),gr(rr.attachment_urls?[...rr.attachment_urls]:[]),rn(null))},[rr]),g.useEffect(()=>{Vt&&M.length>0?tr(M[0].id):tr(""),Yt(null)},[Vt,M]);const il=U=>{const k=U.isDraft||!1,$="2099-12-31",ge=U.startDate&&U.startDate.trim()?U.startDate:$,fe=U.endDate&&U.endDate.trim()?U.endDate:$,we=U.productId&&U.productId.trim()!==""?U.productId:null,P=we&&or.find(H=>H.id===we)||null,I={...v,title:U.title.trim()||"Untitled Session",goal:U.goal.trim()||"",votesPerUser:U.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(U.votesPerUser),useAutoVotes:U.useAutoVotes,startDate:new Date(ge).toISOString(),endDate:new Date(fe+"T23:59:59").toISOString(),isActive:k?!1:v.isActive,product_id:(P==null?void 0:P.id)??null,product_name:null};de(I),pt(!1)},Ma=U=>{var ge,fe;const k=new Date().toISOString(),$={...v,originalEndDate:v.endDate,endDate:k,isActive:!1,endedEarlyBy:(F==null?void 0:F.name)||"Admin",endedEarlyReason:U.reason,endedEarlyDetails:(ge=U.details)!=null&&ge.trim()?U.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};de($),jo({type:"ended-early",reason:U.reason,details:(fe=U.details)!=null&&fe.trim()?U.details.trim():null,actorName:(F==null?void 0:F.name)||"Admin",actorId:(F==null?void 0:F.id)??null}),er(!1),cs()},Ji=U=>{var ge,fe;const k=new Date;k.setDate(k.getDate()+7);const $={...v,endDate:k.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:U.reason,reopenDetails:(ge=U.details)!=null&&ge.trim()?U.details.trim():null,reopenedBy:(F==null?void 0:F.name)||"Admin",reopenedAt:new Date().toISOString()};de($),jo({type:"reopen",reason:U.reason,details:(fe=U.details)!=null&&fe.trim()?U.details.trim():null,actorName:(F==null?void 0:F.name)||"Admin",actorId:(F==null?void 0:F.id)??null}),V(!1),fn()},hn=async(U,k)=>{const $={...j,organization:U,project:k};w($),T()},us=U=>{Wn(U)},wr=async()=>{if(!rr)return;const U=Xt.title.trim();if(!U){rn("Title is required.");return}An(!0),rn(null);try{await xe(rr.id,{title:U,summary:Xt.summary.trim()?Xt.summary.trim():null,whatWouldItDo:Xt.whatWouldItDo.trim()?Xt.whatWouldItDo.trim():null,howWouldItWork:Xt.howWouldItWork.trim()?Xt.howWouldItWork.trim():null,attachment_urls:Mr.length>0?Mr:null}),Wn(null),gr([])}catch(k){console.error("Error updating suggestion:",k),rn("Failed to update the suggestion. Please try again.")}finally{An(!1)}},Xi=async()=>{if(Vt){if(!Gt){Yt("Please select a session.");return}try{if(!await qv(Gt)){Yt("The selected session no longer exists. Please refresh and try again.");return}}catch{Yt("The selected session no longer exists. Please refresh and try again.");return}dr(!0),Yt(null);try{await me(Vt.id,Gt),Wt(null)}catch(U){console.error("Error moving suggestion:",U),Yt("Failed to move the suggestion. Please try again.")}finally{dr(!1)}}},Gn=async()=>{if(ct){Er(!0),Bt(null);try{await X(ct.id),Ht(null)}catch(U){console.error("Error promoting suggestion:",U),Bt("Failed to move the suggestion into the current session.")}finally{Er(!1)}}},Ni=async()=>{if(jr){qn(!0),cn(null);try{await Fe(jr.id),Or(null)}catch(U){console.error("Error deleting suggestion:",U),cn("Failed to delete the suggestion. Please try again.")}finally{qn(!1)}}},_i=g.useCallback(()=>{pt(!1),a()},[a]);return g.useEffect(()=>{if(!Z)return;const U=k=>{Oe.current&&!Oe.current.contains(k.target)&&Ne(!1)};return document.addEventListener("mousedown",U),document.addEventListener("touchstart",U,{passive:!0}),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("touchstart",U)}},[Z]),g.useEffect(()=>{if(!_e)return;const U=k=>{vt.current&&!vt.current.contains(k.target)&&Te(!1)};return document.addEventListener("mousedown",U),document.addEventListener("touchstart",U,{passive:!0}),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("touchstart",U)}},[_e]),i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>ke("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ip,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),F&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[F.name,ut&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx($n,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!ut&&Ve&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]})]})]})]}),i.jsxs("div",{ref:Oe,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[v.isActive&&i.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(Zn,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),i.jsxs("button",{onClick:()=>ke(Se==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[Se==="system"?i.jsx(Yr,{className:"mr-2 h-4 w-4"}):i.jsx(Mn,{className:"mr-2 h-4 w-4"}),Se==="system"?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>ke("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Mn,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),i.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Ne(!Z),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),Z&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[v.isActive&&i.jsxs("button",{onClick:()=>{Ne(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Zn,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),i.jsxs("button",{onClick:()=>{Ne(!1),ke(Se==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[Se==="system"?i.jsx(Yr,{className:"h-4 w-4 mr-2 text-gray-700"}):i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),Se==="system"?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>{Ne(!1),ke("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs("button",{onClick:()=>{Ne(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ah,{className:"h-4 w-4 mr-2 text-gray-700"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Ne(!1),pt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),i.jsxs("button",{onClick:()=>{Ne(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Us?"3.5rem":"0"},children:[Us&&i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:dn.background,color:dn.text,borderColor:dn.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(v.product_id||v.productId)&&yr(!0)},onMouseLeave:()=>yr(!1),onClick:U=>{const k=v.product_id||v.productId;if(!k)return;U.stopPropagation(),U.preventDefault();const $=or.find(ge=>ge.id===k);$&&(Tt($),vr($.name||""),Lr($.color_hex||null),ls($.color_hex||"#2D4660"))},children:[i.jsx(Ix,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Us}),(v.product_id||v.productId)&&Qr&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Kh,{className:"h-4 w-4",style:{color:dn.text}})})]}),i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:v.title})]}),i.jsxs("div",{ref:vt,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:Ts,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#576C71] text-white hover:bg-[#1E5461]",children:[i.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Admins",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:xt})]}),i.jsxs("button",{onClick:ki,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#1E5461] text-white hover:bg-[#576C71]",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Stakeholders",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:He})]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs(wt,{variant:"gold",onClick:s,className:"flex items-center",children:[i.jsx(Ah,{className:"h-4 w-4 mr-2"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs(wt,{variant:"primary",onClick:()=>pt(!0),className:"flex items-center",children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Te(!_e),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),_e&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:U=>{Te(!1),Ts(U)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Yr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admins",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:xt})]}),i.jsxs("button",{onClick:U=>{Te(!1),ki(U)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Stakeholders",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:He})]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs("button",{onClick:()=>{Te(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ah,{className:"h-4 w-4 mr-2 text-gray-700"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Te(!1),pt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),Pe&&i.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),We&&i.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:We}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),Ps(v.startDate)||Ps(v.endDate)?i.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("p",{className:`text-[#2D4660] font-medium ${v.originalEndDate?"line-through text-gray-400":""}`,children:[aa(v.startDate)," - ",aa(v.originalEndDate||v.endDate)]}),v.originalEndDate&&v.endedEarlyBy&&i.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[i.jsxs("span",{children:["Ended Early by ",v.endedEarlyBy]}),v.endedEarlyReason&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(ir,{className:"h-3 w-3 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[i.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",v.endedEarlyReason]}),v.endedEarlyDetails&&i.jsx("div",{className:"whitespace-normal",children:v.endedEarlyDetails}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("p",{className:"text-[#2D4660] font-medium",children:v.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:v.votesPerUser})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center",children:sl}),(v.isActive||Na(v.endDate))&&i.jsx(wt,{variant:v.isActive?"danger":"primary",onClick:()=>{v.isActive?er(!0):(fn(),V(!0))},className:"text-xs px-2 py-1 ml-2",children:v.isActive?"End Early":"Reopen"})]})]})]}),v.goal&&v.goal.trim()||sn.length>0?i.jsx("div",{className:"pt-3",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[v.goal&&v.goal.trim()&&i.jsxs("div",{className:"flex-[2] relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsxs("div",{className:"relative flex items-start gap-5",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Xv,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:v.goal})]})]})]}),sn.length>0&&i.jsxs("div",{className:"flex-[1] rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[(sn.length===1||sn.length>2)&&i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.length===1&&i.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),sn.length>2&&i.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px] ml-auto",children:[i.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Ar?i.jsx(zc,{className:"h-2.5 w-2.5"}):i.jsx(yn,{className:"h-2.5 w-2.5"})}),i.jsx("button",{type:"button",onClick:()=>Qt(U=>!U),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Ar?"Show Less":"Show More"})]})]}),i.jsx("div",{className:"space-y-3",children:sn.slice(0,Ar?sn.length:2).map(U=>{const k=U.type==="reopen"?Ul:ir;return i.jsxs("div",{className:`flex items-start gap-3 text-sm ${U.textColorClass}`,children:[i.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${U.iconBgClass} ${U.iconBorderClass} border rounded-lg`,children:i.jsx(k,{className:`h-3.5 w-3.5 ${U.iconColorClass}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:U.title}),i.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:U.description})]})]},U.id)})}),sn.length>2&&!Ar&&i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})]})}):null]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:MC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),j.enabled?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[i.jsx(kr,{className:"h-5 w-5 text-green-600 mr-2"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[i.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Organization:"})," ",j.organization]}),i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Project:"}),i.jsx("div",{className:"min-w-[150px]",children:i.jsx(fd,{options:Re,value:K,onChange:si,placeholder:"Select projects..."})})]}),j.lastSyncTime&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",aa(j.lastSyncTime)]})]})]}),i.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),i.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[i.jsx(Es,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),i.jsx(CZ,{config:j,onUpdateConfig:w,onPreview:S,isFetching:E,availableStates:A,availableAreaPaths:D,availableTags:L,previewFeatures:R,showPreviewModal:J,onFetchStatesForType:W,onFetchAreaPathsForTypeAndState:G,onFetchTagsForTypeStateAndAreaPath:Q,onFetchTypesAndStatesForAreaPath:ae,onFetchTypesAndStatesForTags:ee,onFetchTypesAndAreaPathsForStates:oe,resetSignal:Ae})]}):i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[i.jsx("img",{src:MC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),i.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),i.jsx(wt,{variant:"primary",onClick:()=>hn("newmill",K[0]||Re[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?i.jsxs(i.Fragment,{children:[i.jsx(Ul,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&i.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[te.length," ",te.length===1?"suggestion":"suggestions"]}),te.length>1&&i.jsx(wt,{variant:"gold",onClick:()=>vs(!xs),className:"text-xs px-3 py-1 flex items-center gap-1",children:xs?i.jsxs(i.Fragment,{children:[i.jsx(zc,{className:"h-3.5 w-3.5"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(yn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),te.length===0?i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):i.jsx("div",{className:`space-y-4 pr-1 ${xs?"":"max-h-[360px] overflow-y-auto"}`,children:te.map(U=>{const k=U.requester_name||U.requester_email||"Anonymous";return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"md:flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:U.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",i.jsx("span",{className:"font-medium text-[#1E5461]",children:k}),U.requester_email&&i.jsxs(i.Fragment,{children:[" ","(",i.jsx("a",{href:`mailto:${U.requester_email}`,className:"text-[#1E5461] hover:underline",children:U.requester_email}),")"]})," on ",aa(U.created_at)]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[i.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[i.jsxs(wt,{variant:"primary",onClick:()=>{Bt(null),Ht(U)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(VM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),i.jsxs(wt,{variant:"secondary",onClick:()=>{M.length>0&&Wt(U)},disabled:M.length===0,className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(on,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),i.jsxs(wt,{variant:"secondary",onClick:()=>us(U),className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(yd,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),i.jsxs(wt,{variant:"danger",onClick:()=>{cn(null),Or(U)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(ha,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),M.length===0&&i.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ir,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:U.summary&&U.summary.length>0?U.summary:"No summary provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Jv,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:U.whatWouldItDo&&U.whatWouldItDo.length>0?U.whatWouldItDo:"No details provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(VF,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:U.howWouldItWork&&U.howWouldItWork.length>0?U.howWouldItWork:"No implementation details provided."})]})]}),U.attachment_urls&&U.attachment_urls.length>0&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Cl,{className:"h-4 w-4 text-[#2D4660]"}),i.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",U.attachment_urls.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:U.attachment_urls.map(($,ge)=>{const fe=$.match(/\.(jpg|jpeg|png|gif|webp)$/i),we=$.match(/\.pdf$/i),P=$.split("/").pop()||`attachment-${ge+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[fe?i.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:$,alt:P,className:"w-full h-full object-cover"})}):we?i.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(Cl,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(Cl,{className:"h-8 w-8 text-gray-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:P.length>18?`${P.substring(0,18)}...`:P})]},ge)})})]})]})},U.id)})})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),i.jsxs(wt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[i.jsx(yn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),i.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),i.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),i.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(U=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:i.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[U.title,U.azureDevOpsId&&i.jsx("div",{className:"mt-1",children:i.jsx(Dp,{id:U.azureDevOpsId,url:U.azureDevOpsUrl||""})})]})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:i.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:U.description||i.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:U.epic&&i.jsx(lf,{name:U.epic})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:U.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:U.state})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:i.jsx("div",{className:"text-gray-600",children:U.areaPath&&typeof U.areaPath=="string"&&U.areaPath.trim()!==""?i.jsx("div",{className:"max-w-xs break-words",children:U.areaPath}):i.jsx("span",{className:"text-gray-400",children:"-"})})}),i.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:U.tags&&U.tags.length>0?i.jsxs("div",{className:"flex flex-wrap gap-1",children:[U.tags.slice(0,3).map((k,$)=>i.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:k},$)),U.tags.length>3&&i.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",U.tags.length-3]})]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:U.votes}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>f(U),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:i.jsx(yd,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>n(U.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:i.jsx(ha,{className:"h-5 w-5"})})]})]},U.id))})]})})]}),i.jsx(xn,{isOpen:ct!==null,onClose:()=>{ar||(Ht(null),Bt(null))},title:"Move Suggestion to Current Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:ct==null?void 0:ct.title})," into the current session so it can be managed and voted on."]}),Ze&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Ze}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(wt,{variant:"secondary",onClick:()=>{ar||(Ht(null),Bt(null))},disabled:ar,children:"Cancel"}),i.jsx(wt,{variant:"primary",onClick:Gn,disabled:ar,children:ar?"Moving...":"Move to Current Session"})]})]})}),i.jsx(xn,{isOpen:Vt!==null,onClose:()=>{sr||(Wt(null),Yt(null))},title:"Move to Future Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:Vt==null?void 0:Vt.title}),"."]}),M.length>0?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),i.jsx("select",{value:Gt,onChange:U=>tr(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:sr,children:M.map(U=>i.jsxs("option",{value:U.id,children:[U.title," (Starts ",aa(U.startDate),")"]},U.id))})]}):i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Rr&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Rr}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(wt,{variant:"secondary",onClick:()=>{sr||(Wt(null),Yt(null))},disabled:sr,children:"Cancel"}),i.jsx(wt,{variant:"primary",onClick:Xi,disabled:sr||M.length===0,children:sr?"Moving...":"Move to Session"})]})]})}),i.jsx(xn,{isOpen:rr!==null,onClose:()=>{Fr||(Wn(null),rn(null))},title:"Edit Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:Xt.title,onChange:U=>os(k=>({...k,title:U.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Fr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),i.jsx("textarea",{value:Xt.summary,onChange:U=>os(k=>({...k,summary:U.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Fr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),i.jsx("textarea",{value:Xt.whatWouldItDo,onChange:U=>os(k=>({...k,whatWouldItDo:U.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Fr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),i.jsx("textarea",{value:Xt.howWouldItWork,onChange:U=>os(k=>({...k,howWouldItWork:U.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Fr})]}),Mr.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Mr.map((U,k)=>{const $=U.match(/\.(jpg|jpeg|png|gif|webp)$/i),ge=U.match(/\.pdf$/i),fe=U.split("/").pop()||`attachment-${k+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[$?i.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:U,alt:fe,className:"w-full h-full object-cover"})}):ge?i.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(Cl,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(Cl,{className:"h-8 w-8 text-gray-600"})}),i.jsx("button",{type:"button",onClick:()=>{gr(we=>we.filter((P,I)=>I!==k))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:Fr,"aria-label":`Remove ${fe}`,children:i.jsx(Es,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:fe.length>18?`${fe.substring(0,18)}...`:fe})]},k)})}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),fr&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:fr}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(wt,{variant:"primary",onClick:wr,disabled:Fr,children:Fr?"Saving...":"Save Changes"})})]})}),i.jsx(xn,{isOpen:jr!==null,onClose:()=>{Vn||(Or(null),cn(null))},title:"Delete Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold text-[#591D0F]",children:jr==null?void 0:jr.title}),"? This action cannot be undone."]}),Vi&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Vi}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(wt,{variant:"secondary",onClick:()=>{Vn||(Or(null),cn(null))},disabled:Vn,children:"Cancel"}),i.jsx(wt,{variant:"danger",onClick:Ni,disabled:Vn,children:Vn?"Deleting...":"Delete"})]})]})}),i.jsx(xn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:i.jsx(LC,{onSubmit:U=>{t(U),d(!1)},onCancel:()=>d(!1)})}),i.jsx(xn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&i.jsx(LC,{feature:m,onSubmit:U=>{r({...m,...U}),f(null)},onCancel:()=>f(null)})}),i.jsx(xn,{isOpen:St,onClose:()=>pt(!1),title:"Edit Session Settings",children:i.jsx(EZ,{session:v,featureCount:e.length,onSubmit:il,onCancel:()=>pt(!1),onRequestDeleteSession:_i,isDeletingSession:l,productName:Us,products:or,isLoadingProducts:Pe,productError:We,onRequestDeleteProduct:U=>Ot(U),onProductColorUpdated:async()=>{const U=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId)??null;if(U)try{const k=await Ga(U);re(k)}catch(k){console.error("Error refreshing products after color update:",k)}}})}),Ie&&i.jsxs(xn,{isOpen:!0,onClose:()=>Ot(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:Ie.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(wt,{variant:"secondary",onClick:()=>Ot(null),disabled:Si,children:"Cancel"}),i.jsx(wt,{variant:"danger",onClick:bs,disabled:Si,children:Si?"Deleting...":"Delete"})]})]}),i.jsx(_Z,{isOpen:J,onClose:()=>ne(!1),previewFeatures:R,onConfirmSync:ie,onReplaceAll:q}),i.jsx(xn,{isOpen:z,onClose:()=>{V(!1),fn()},title:"Reopen Session",children:i.jsxs("form",{onSubmit:zr(Ji),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),i.jsx(cd,{control:ws,name:"reason",rules:{required:"Please select a reason"},render:({field:U})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsx(NZ,{options:kZ,value:U.value,onChange:U.onChange,placeholder:"Select a reason..."}),Gi.reason&&i.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:Gi.reason.message})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...nn("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(wt,{variant:"secondary",type:"button",onClick:()=>{V(!1),fn()},children:"Cancel"}),i.jsx(wt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),i.jsx(xn,{isOpen:it,onClose:()=>{er(!1),cs()},title:"End Session Early",children:i.jsxs("form",{onSubmit:Zr(Ma),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsxs("select",{...Kn("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a reason..."}),i.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),i.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),i.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),i.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),i.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),i.jsx("option",{value:"Low Participation",children:"Low participation rate"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Kn("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[i.jsx("p",{className:"font-medium mb-1",children:"Note:"}),i.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(wt,{variant:"secondary",type:"button",onClick:()=>{er(!1),cs()},children:"Cancel"}),i.jsx(wt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Rt&&i.jsx(xn,{isOpen:!0,onClose:()=>{Tt(null),vr(""),Lr(null),Hn(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Ke,onChange:U=>vr(U.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{ls(lr||"#2D4660"),Hn(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:lr?{backgroundColor:lr}:{backgroundColor:"#ffffff"},children:!lr&&i.jsx("img",{src:XT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:lr||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(wt,{variant:"secondary",onClick:()=>{Tt(null),vr(""),Lr(null),Hn(!1)},disabled:Ut,children:"Cancel"}),i.jsx(wt,{variant:"primary",onClick:async()=>{if(!(!(Rt!=null&&Rt.id)||!Ke.trim())){un(!0);try{await NE(Rt.id,{name:Ke.trim(),color_hex:lr});const U=(F==null?void 0:F.tenant_id)??(F==null?void 0:F.tenantId);if(U){const k=await Ga(U);re(k.sort(($,ge)=>$.name.localeCompare(ge.name)))}Tt(null),vr(""),Lr(null),Hn(!1),onProductColorUpdated&&onProductColorUpdated()}catch(U){console.error("Error updating product:",U),alert("Failed to update product. Please try again.")}finally{un(!1)}}},disabled:Ut||!Ke.trim(),children:Ut?"Updating...":"Update Product"})]})]})}),br&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Hn(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:U=>U.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:zs,onChange:U=>ls(U.target.value),ref:U=>{U&&br&&setTimeout(()=>U.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Lr(zs),Hn(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:zs,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}const FC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],PZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},OZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},TZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],Tw=(e,t,r)=>e?{label:"System Admin",className:"bg-[#C89212] text-white",icon:i.jsx($n,{className:"h-3.5 w-3.5 mr-1"})}:t?{label:"Session Admin",className:"bg-[#576C71] text-white",icon:i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1"})}:r?{label:"Stakeholder",className:"bg-[#8B5A4A] text-white",icon:i.jsx(ms,{className:"h-3.5 w-3.5 mr-1"})}:null,Fm=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},Lm=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",Iw=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",IZ=e=>e<=0?"bg-[#EEE8E7]":e<=2?"bg-[#F0ECEB]":e<=4?"bg-[#FAF4E7]":"bg-[#E9EEEF]",DZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},$Z=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},hd=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",kh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},RZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Ip({src:e,alt:t,style:r,className:n,...s}){const[a,l]=g.useState(!1);return a?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):i.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const wt=jt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:a="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return i.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${a}`,...l,children:t})});class xn extends g.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:a="max-w-2xl",hideCloseButton:l=!1,hideHeader:u=!1}=this.props;return t?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:l?void 0:r,"aria-hidden":"true"}),i.jsxs("div",{className:`inline-block w-full ${a} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[u?!l&&i.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(Es,{className:"h-5 w-5"})})}):i.jsxs("div",{className:"flex items-start justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Jv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!l&&i.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsx("div",{className:u?"-mt-4":"mt-2 overflow-visible",children:s})]})]})}):null}}const lf=jt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:hd(t,r),a=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return i.jsxs("div",{className:a,children:[i.jsx(IF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),i.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),Dp=jt.memo(function({id:t,url:r}){return t?i.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[i.jsx(nF,{className:"h-3 w-3 mr-1"}),"#",t]}):null});jt.memo(function({endDate:t}){const r=Fm(t),n=Lm(r),s=Iw(r);return i.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:`h-5 w-5 mr-2 ${n}`}),i.jsxs("div",{children:[i.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",aa(t)]}),i.jsx("div",{className:"text-sm mt-1",children:r<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function MZ({isShuffling:e,onShuffle:t}){const[r,n]=g.useState("Shuffle Features"),s=g.useRef(null);return g.useEffect(()=>(e?s.current=window.setInterval(()=>{n(RZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),i.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[i.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:i.jsx(_F,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Dh=jt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:a,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[i.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[i.jsx("div",{className:f,children:d==="delete"?i.jsx(ha,{className:"h-5 w-5"}):i.jsx(ir,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),i.jsx("div",{className:"p-4 bg-white space-y-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),i.jsx("button",{type:"button",onClick:()=>{s(),a()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),FZ=jt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:a,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=g.useState(!1),[x,v]=g.useState(!1),j=async()=>{if(!(!m||x)){v(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{v(!1)}}},w=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return i.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${w()}`,children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&i.jsx("div",{className:"flex justify-end mb-4",children:i.jsx(Dp,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?i.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):i.jsxs("div",{className:"mb-4 flex-grow",children:[i.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&i.jsx("div",{className:"transition-all duration-300",children:f?i.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[i.jsx(kr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:"Thank you! Your request has been sent."})]}):i.jsxs("button",{onClick:j,disabled:x,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(ir,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:x?"Sending...":"Ask Product Owner for more info"})]})})]}),a&&i.jsx("div",{className:"mt-auto pt-3",children:i.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&i.jsx(lf,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),i.jsx("div",{className:"flex items-center space-x-2",children:r===0?i.jsx("button",{onClick:()=>a(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>a(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:i.jsx(ts,{className:"h-6 w-6"})}),i.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),i.jsx("button",{onClick:()=>a(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:i.jsx(XM,{className:"h-6 w-6"})})]})})]})})]})})});function LZ({feature:e,onClose:t}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:i.jsx(Es,{className:"h-5 w-5"})})]}),e.voters.length===0?i.jsx("p",{className:"text-gray-500",children:"No votes yet"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:r.name}),i.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),i.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function zZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:a,votingSession:l,effectiveVotesPerUser:u,onLogout:d,currentUser:m,isSystemAdmin:f,isSessionAdmin:p,isStakeholder:x}){const v=ti(),[j,w]=g.useState(!1),S=g.useRef(null);g.useEffect(()=>{if(!j)return;const A=D=>{S.current&&!S.current.contains(D.target)&&w(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[j]);const _=g.useMemo(()=>[...e].sort((A,D)=>D.votes-A.votes),[e]),E=g.useMemo(()=>_.slice(0,10).map(A=>({name:A.title,votes:A.votes,id:A.id})),[_]),C=Fm(l.endDate),T=Lm(C);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>v("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ip,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>v("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Na(l.endDate)?"Final Voting Results":"Current Voting Results"}),m&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.name,(()=>{const A=Tw(f,p,x);return A&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${A.className}`,children:[A.icon,A.label]})})()]})]})]}),i.jsxs("div",{ref:S,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs(wt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(rs,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(wt,{variant:"danger",onClick:r,children:"Reset All Votes"}),i.jsxs(wt,{variant:"gray",onClick:d,className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>w(!j),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),j&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{w(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{w(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[i.jsx(ha,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),i.jsxs("button",{onClick:()=>{w(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:l.title})]}),l.isActive&&i.jsx("div",{className:`${Iw(C)} relative z-10 rounded-md p-3 inline-block border ${C<=2?"border-[#6A4234]/20":C<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:`h-4 w-4 mr-2 ${T}`}),i.jsx("span",{className:`${T} font-medium`,children:C<=0?"Voting ends today!":`${C} ${C===1?"day":"days"} remaining until ${aa(l.endDate)}`})]}),i.jsx("span",{className:`${T} font-medium`,children:"Voting Active"})]})})]}),i.jsx("div",{className:"text-sm text-gray-600 mb-4",children:i.jsxs("span",{children:["Votes per user: ",u]})}),i.jsx("div",{className:"h-72",children:i.jsx(oB,{width:"100%",height:"100%",children:i.jsxs(ZQ,{data:E,margin:{top:20,right:30,left:20,bottom:60},children:[i.jsx(RT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),i.jsx(MT,{}),i.jsx(MK,{}),i.jsx(OT,{dataKey:"votes",fill:"#3B82F6",children:E.map((A,D)=>i.jsx(Sw,{fill:D%2===0?"#2d4660":"#4f6d8e"},`cell-${D}`))})]})})})]}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),i.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((A,D)=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:D+1}),i.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[A.title,A.azureDevOpsId&&i.jsx("div",{className:"mt-1",children:i.jsx(Dp,{id:A.azureDevOpsId,url:A.azureDevOpsUrl||""})})]}),i.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:A.epic&&i.jsx(lf,{name:A.epic})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.votes}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("button",{onClick:()=>a(A.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:A.voters.length===0,children:[i.jsx(Mn,{className:"h-4 w-4 mr-1"}),A.voters.length," ",A.voters.length===1?"user":"users"]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>t(A.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:A.votes===0,children:"Reset Votes"})})]},A.id))})]})})]}),s&&i.jsx(LZ,{feature:e.find(A=>A.id===s),onClose:()=>a(null)})]})}function UZ({navigate:e,votingSession:t}){return i.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",i.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),i.jsx(wt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function QT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const a=new Date().getFullYear(),l=[];l.push({key:"stakeholder",label:"Stakeholder View",icon:i.jsx(Mn,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:i.jsx(Yr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:i.jsx($n,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),x=u.indexOf(f.key);return p-x});const d=s&&l.length>0;return i.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:x})=>{const v=e===m,j=!x;return i.jsxs("button",{onClick:x,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${v?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!v?"opacity-60 cursor-not-allowed":""}`,children:[p,i.jsx("span",{children:f})]},m)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsxs("p",{children:[" ",a," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function LC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:a}}=Cd({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:FC[0]}});return i.jsxs("form",{onSubmit:s(t),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.description&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),i.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:FC.map(l=>i.jsx("option",{value:l,children:l},l))}),a.epic&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.epic.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx(wt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),i.jsxs(wt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function BZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:a,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,x]=g.useState(!1),v=Object.values(l).reduce((S,_)=>S+_,0),j=u.filter(S=>l[S.id]>0),w=Tw(d,m,f);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Ip,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&i.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),w&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${w.className}`,children:[w.icon,w.label]})]})]})]}),i.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&i.jsxs(wt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(rs,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),i.jsx("span",{className:"md:hidden",children:"Admin"})]}),i.jsxs(wt,{variant:"gray",onClick:()=>a("/sessions"),className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),i.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",i.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",i.jsx("span",{className:"font-semibold",children:t.title}),"."]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),i.jsxs("div",{className:"space-y-3",children:[j.map(S=>i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&i.jsx("div",{className:"mt-1",children:i.jsx(lf,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),i.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),i.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),i.jsx("span",{className:"text-[#2d4660]",children:v})]})})]})]}),i.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start text-left",children:[i.jsx(RF,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",i.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),i.jsxs(wt,{variant:"gold",onClick:()=>x(!0),className:"mx-auto text-lg py-3 px-8",children:[i.jsx(Ul,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),i.jsx(Dh,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>x(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const zC=jt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:a,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:x,onLogout:v,onSuggestionSubmitted:j,isSystemAdmin:w,isSessionAdmin:S,isStakeholder:_}){const[E,C]=g.useState([...t]),[T,A]=g.useState(!1),[D,L]=g.useState("idle"),[R,J]=g.useState(!1),[ne,ie]=g.useState({}),[q,de]=g.useState(!0),[W,G]=g.useState(!1),[Q,ae]=g.useState(!1),[ee,oe]=g.useState(""),[te,M]=g.useState(""),[X,me]=g.useState(""),[xe,Fe]=g.useState(""),[Se,Re]=g.useState(!1),[ke,F]=g.useState(null),[le,ce]=g.useState(!1),[K,Ye]=g.useState(!1),[Ae,tt]=g.useState([]),[St,pt]=g.useState([]),it=g.useRef(null),er=g.useRef(null),z=Tw(w,S,_);g.useEffect(()=>{if(!W)return;const Le=He=>{er.current&&!er.current.contains(He.target)&&G(!1)};return document.addEventListener("mousedown",Le),document.addEventListener("touchstart",Le,{passive:!0}),()=>{document.removeEventListener("mousedown",Le),document.removeEventListener("touchstart",Le)}},[W]),g.useEffect(()=>{C([...t])},[t]),g.useEffect(()=>{async function Le(){if(!r||!x){de(!1);return}try{const et=(await Lo(x)).filter(vt=>vt.user_id===r.id);if(et.length>0){const vt={};et.forEach(ct=>{vt[ct.feature_id]=ct.vote_count}),ie(vt),J(!0)}else J(!1),ie({})}catch(He){console.error("Error checking existing votes:",He),J(!1)}finally{de(!1)}}Le()},[r,x]);const V=g.useCallback(async()=>{if(!(!r||!x))try{await k$(x,r.id),J(!1),ie({})}catch(Le){console.error("Error changing votes:",Le),alert("Failed to reset votes. Please try again.")}},[r,x]),Z=g.useCallback(()=>{T||(A(!0),L("fadeOut"),setTimeout(()=>{L("rearranging"),setTimeout(()=>{C($Z(t)),L("fadeIn"),setTimeout(()=>{L("idle"),A(!1)},400)},200)},400))},[t,T]),Ne=g.useCallback(async Le=>{const He=t.find(et=>et.id===Le);if(!(!He||!r))try{await A$({session_id:x,feature_id:Le,feature_title:He.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(et){throw console.error("Error submitting info request:",et),alert("Failed to submit request. Please try again."),et}},[t,r,x]),Oe=g.useCallback(()=>{F(null),ce(!1),ae(!0)},[]),_e=g.useCallback(()=>{Se||(St.forEach(Le=>{Le&&URL.revokeObjectURL(Le)}),ae(!1),F(null),ce(!1),oe(""),M(""),me(""),Fe(""),tt([]),pt([]),it.current&&(it.current.value=""))},[Se,St]),Te=g.useCallback(Le=>{const He=Array.from(Le.target.files||[]),et=[],vt=[],ct=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];He.forEach(Ze=>{ct.includes(Ze.type)&&(et.push(Ze),Ze.type.startsWith("image/")?vt.push(URL.createObjectURL(Ze)):vt.push(""))});const Ht=3-Ae.length,ar=et.slice(0,Ht),Er=vt.slice(0,Ht);tt(Ze=>[...Ze,...ar]),pt(Ze=>[...Ze,...Er]),it.current&&(it.current.value="")},[Ae]),ut=g.useCallback(Le=>{tt(He=>{const et=He[Le];return et&&et.type.startsWith("image/")?pt(vt=>{const ct=vt[Le];return ct&&URL.revokeObjectURL(ct),vt.filter((Ht,ar)=>ar!==Le)}):pt(vt=>vt.filter((ct,Ht)=>Ht!==Le)),He.filter((vt,ct)=>ct!==Le)})},[]);g.useEffect(()=>()=>{St.forEach(Le=>{Le&&URL.revokeObjectURL(Le)})},[St]);const Dt=g.useCallback(async Le=>{var Ht,ar;Le.preventDefault();const He=ee.trim(),et=te.trim(),vt=X.trim(),ct=xe.trim();if(!He){F("Please provide a brief title for your suggestion.");return}if(!x){F("Unable to link this suggestion to the current session.");return}try{Re(!0),F(null);const Er=[];if(Ae.length>0)for(let Bt=0;Bt<Ae.length;Bt++){const Vt=Ae[Bt],Wt=Vt.name.split(".").pop(),Gt=`${Date.now()}-${Bt}.${Wt}`,tr=`suggestions/${x}/${Gt}`;try{const{data:Rr,error:Yt}=await Ee.storage.from("feature-attachments").upload(tr,Vt,{cacheControl:"3600",upsert:!1});if(Yt)console.error("Error uploading file:",Yt),((Ht=Yt.message)!=null&&Ht.includes("Bucket not found")||(ar=Yt.message)!=null&&ar.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:sr}}=Ee.storage.from("feature-attachments").getPublicUrl(tr);Er.push(sr)}}catch(Rr){console.error("Error uploading file:",Rr)}}const Ze=await P$({session_id:x,title:He,description:et||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:vt||null,howWouldItWork:ct||null,attachment_urls:Er.length>0?Er:null});try{const Vt=(await Wd(x)).map(Wt=>{var Gt;return(Gt=Wt.user)==null?void 0:Gt.email}).filter(Wt=>!!Wt);if(Vt.length>0){const Wt=(m==null?void 0:m.title)||"this session",Gt=(r==null?void 0:r.name)||"A user",tr=(r==null?void 0:r.email)||"",Rr="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",Yt=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",sr=`${window.location.origin}${Yt}/admin`,dr=Xt=>Xt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),rr=Xt=>dr(Xt).replace(/\n/g,"<br />"),Wn=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Rr}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${dr(Wt)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${dr(Gt)}</strong>${tr?` (${dr(tr)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${dr(He)}</h3>
              
              ${et?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${rr(et)}</span>
              </p>
              `:""}
              
              ${vt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${rr(vt)}</span>
              </p>
              `:""}
              
              ${ct?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${rr(ct)}</span>
              </p>
              `:""}
              
              ${Er.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${Er.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${sr}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(Vt.map(Xt=>Yo({to:Xt,subject:`New Feature Suggestion: ${He}`,html:Wn}).catch(os=>{console.error(`Failed to send email to ${Xt}:`,os)})))}}catch(Bt){console.error("Error sending admin emails:",Bt)}j==null||j(Ze),ae(!1),oe(""),M(""),me(""),Fe(""),tt([]),pt([]),it.current&&(it.current.value=""),Ye(!0)}catch(Er){console.error("Error submitting feature suggestion:",Er),F("We were unable to submit your suggestion. Please try again in a moment.")}finally{Re(!1)}},[te,ee,X,xe,Ae,r,x,m,j]);if(!r)return null;if(q)return i.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(R)return i.jsx(BZ,{currentUser:r,votingSession:m,onChangeVotes:V,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:ne,features:t,isSystemAdmin:w,isSessionAdmin:S,isStakeholder:_});const Ve=p-s,gt=Ve===0,xt=m.isActive;return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Ip,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&i.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),z&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${z.className}`,children:[z.icon,z.label]})]})]})]}),i.jsxs("div",{ref:er,className:"relative z-40 flex items-start md:items-center",children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&i.jsxs(wt,{variant:"primary",onClick:u,className:"flex items-center",children:[i.jsx(rs,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(wt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),i.jsxs(wt,{variant:"gray",onClick:v,className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>G(!W),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),W&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[d&&i.jsxs("button",{onClick:()=>{G(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsx("button",{onClick:()=>{G(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),i.jsxs("button",{onClick:()=>{G(!1),v()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:m.title})]})}),m.goal&&m.goal.trim()&&i.jsx("div",{className:"pt-3 border-t border-gray-200 mb-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Xv,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const Le=Fm(m.endDate),He=Lm(Le),et=Iw(Le);return i.jsx("div",{className:`${et} rounded-md p-3 md:p-4 border ${Le<=2?"border-[#6A4234]/20":Le<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0",children:[i.jsx(on,{className:`h-5 w-5 mr-2 ${He}`}),i.jsxs("div",{className:"leading-tight",children:[i.jsxs("span",{className:`font-medium ${He}`,children:["Voting ends: ",aa(m.endDate)]}),i.jsx("div",{className:"text-sm -mt-0.5",children:Le<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${He}`,children:[i.jsx("span",{className:"font-semibold text-lg",children:Le})," ",Le===1?"day":"days"," remaining"]})})]})]}),i.jsx("div",{className:"flex items-center justify-center md:justify-end flex-1 min-w-0",children:i.jsx("div",{className:"leading-tight",children:i.jsxs("div",{className:"flex items-center justify-center md:justify-start",children:[i.jsx(Zn,{className:`h-[30px] w-[30px] mr-2 ${He}`}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none",children:[i.jsxs("div",{className:"flex items-baseline justify-center md:justify-start",children:[i.jsx("span",{className:`${He} mr-1`,style:{fontSize:"14px"},children:"You have"}),i.jsx("span",{className:`${He} font-semibold text-2xl`,children:Ve}),i.jsxs("span",{className:`${He} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${He} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!xt&&i.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:i.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[i.jsx(Xm,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Voting is currently ",Na(m.endDate)?"closed":"not yet open",".",Na(m.endDate)?` Voting ended on ${aa(m.endDate)}.`:` Voting will open on ${aa(m.startDate)}.`]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs(wt,{variant:"gold",onClick:Oe,className:"flex items-center justify-center w-full md:w-auto",children:[i.jsx(Jv,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&i.jsx(MZ,{isShuffling:T,onShuffle:Z})]})]}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(Le=>{const He=n[Le.id]||0;return i.jsx(FZ,{feature:Le,userVoteCount:He,remainingVotes:Ve,votingIsActive:xt,onVote:a,isShuffling:T,shuffleStage:D,currentUser:r,onRequestInfo:Ne},Le.id)})}),s>0&&(()=>{const Le=Fm(m.endDate),He=Lm(Le),et=IZ(Le);return i.jsx("div",{className:`fixed bottom-0 left-0 right-0 ${et} rounded-t-md border-t ${Le<=2?"border-[#6A4234]/20":Le<=4?"border-[#C89212]/20":"border-[#1E5461]/20"} p-3 md:p-4 z-50`,children:i.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-center",children:[i.jsx("div",{className:"flex items-center flex-1 min-w-0 justify-center",style:{paddingLeft:"60px",width:"100px"},children:i.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zn,{className:`h-[30px] w-[30px] mr-2 ${He}`,style:{marginLeft:"-88px"}}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[i.jsx("span",{className:`${He} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),i.jsx("span",{className:`${He} font-semibold text-2xl`,children:Ve}),i.jsxs("span",{className:`${He} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${He} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})}),i.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${gt?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!gt,children:"Submit Votes"})]})})})(),i.jsx(xn,{isOpen:Q,onClose:_e,title:"Suggest a Feature",maxWidth:"max-w-lg",children:i.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",i.jsx("strong",{children:"future sessions"}),".",i.jsx("br",{}),"Suggestions will not be added to the current session."]}),ke&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:ke}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),i.jsx("input",{type:"text",value:ee,onChange:Le=>oe(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:Se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),i.jsx("textarea",{value:te,onChange:Le=>M(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:Se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),i.jsx("textarea",{value:X,onChange:Le=>me(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:Se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),i.jsx("textarea",{value:xe,onChange:Le=>Fe(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:Se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:it,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:Te,disabled:Se||Ae.length>=3,className:"hidden",id:"suggestion-file-input"}),i.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${Se||Ae.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(Cl,{className:"h-4 w-4 mr-2"}),Ae.length>=3?"Maximum 3 files":"Attach Files"]}),Ae.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:Ae.map((Le,He)=>{const et=Le.type.startsWith("image/"),vt=Le.type==="application/pdf",ct=St[He]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[et&&ct?i.jsx("img",{src:ct,alt:Le.name,className:"w-full h-full object-cover"}):vt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(Cl,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>ut(He),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${Le.name}`,children:i.jsx(Es,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:Le.name.length>15?`${Le.name.substring(0,15)}...`:Le.name})]},He)})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(wt,{type:"button",variant:"secondary",onClick:_e,disabled:Se,children:"Close"}),i.jsxs(wt,{type:"submit",variant:"primary",disabled:Se,className:"flex items-center",children:[Se&&i.jsx(Ul,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),i.jsx(xn,{isOpen:K,onClose:()=>Ye(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),i.jsx("p",{className:"text-sm text-gray-500",children:"The session admins have been notified and will review your suggestion."})]})})]})});function ix({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:a,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Ia(),p=ti(),x=async()=>{try{await Ee.auth.signOut()}catch{}try{l(null)}catch{}a(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};g.useEffect(()=>{const re=new URLSearchParams(window.location.search),Pe=re.has("code")||re.has("error"),Ue=localStorage.getItem("voting_system_current_session");!n&&!Pe&&!Ue&&p("/sessions")},[n,p]);const v=g.useMemo(()=>{const re=new URLSearchParams(window.location.search);return re.has("code")||re.has("error")},[]),[j,w]=g.useState([]),[S,_]=g.useState(!0),[E,C]=g.useState(TZ),[T,A]=g.useState(r?"results":t||v?"admin":"voting"),[D,L]=g.useState(t||v||r),[R,J]=g.useState(null),[ne,ie]=g.useState(!1),[q,de]=g.useState(null),[W,G]=g.useState({...PZ,votesPerUser:e}),[Q,ae]=g.useState(OZ),[ee,oe]=g.useState(TC()),[te,M]=g.useState([]),[X,me]=g.useState([]),[xe,Fe]=g.useState([]),[Se,Re]=g.useState(!1),[ke,F]=g.useState(null),[le,ce]=g.useState(null),[K,Ye]=g.useState(!1),[Ae,tt]=g.useState([]),[St,pt]=g.useState([]),[it,er]=g.useState(d?"system":"session"),[z,V]=g.useState({}),[Z,Ne]=g.useState(0),[Oe,_e]=g.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Te,ut]=g.useState(!1),Dt=g.useRef(!1),Ve=g.useRef(!1),gt=g.useRef(null),xt=g.useMemo(()=>W.useAutoVotes?Math.max(1,Math.floor(j.length/2)):W.votesPerUser,[W.useAutoVotes,W.votesPerUser,j.length]),Le=g.useRef(!1);g.useEffect(()=>{if(Le.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const Pe=new URLSearchParams(window.location.search),Ue=Pe.has("code")||Pe.has("error");if(Ue&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Ue||Dt.current)){if(!n){console.log("No session available yet, waiting...");return}Le.current=!0,Dt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Je=await mZ();if(Je){const Ie=new Date(Date.now()+Je.expiresIn*1e3).toISOString(),Ot={...Q,accessToken:Je.accessToken,refreshToken:Je.refreshToken,tokenExpiresAt:Ie,enabled:!0,clientId:xi.clientId,tenantId:xi.tenantId};await bl(n.id,Ot),ae(Ot);const Rt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",Rt),p(Rt,{replace:!0})}}catch(Je){console.error("OAuth callback error:",Je),F("Failed to authenticate with Azure DevOps");const Ie="/admin";sessionStorage.removeItem("oauth_return_path"),p(Ie,{replace:!0})}finally{Le.current=!1}}})()},[n,p,Q]),g.useEffect(()=>{r&&T!=="results"?A("results"):t&&T!=="admin"?A("admin"):!t&&!r&&T==="admin"&&A("voting")},[t,r,T]);const He=g.useCallback(re=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),re&&sessionStorage.setItem("oauth_action",re),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),pZ()},[]),et=g.useCallback(async re=>{if(!re.accessToken||!re.refreshToken||!re.tokenExpiresAt)throw new Error("Not authenticated");if(hZ(re.tokenExpiresAt)){const Pe=await iZ(re.refreshToken),Ue=new Date(Date.now()+Pe.expiresIn*1e3).toISOString(),We={...re,accessToken:Pe.accessToken,tokenExpiresAt:Ue};return n&&(await bl(n.id,We),ae(We)),Pe.accessToken}return re.accessToken},[n]),vt=g.useCallback(async()=>{if(!n)return[];const[re,Pe]=await Promise.all([ja(n.id),Lo(n.id)]);return re.map(Ue=>{const Je=Pe.filter(Ot=>Ot.feature_id===Ue.id).map(Ot=>({userId:Ot.user_id,name:Ot.user_name,email:Ot.user_email,voteCount:Ot.vote_count})),Ie=Je.reduce((Ot,Rt)=>Ot+Rt.voteCount,0);return{id:Ue.id,title:Ue.title,description:Ue.description,epic:Ue.epic,state:Ue.state,areaPath:Ue.area_path,tags:Ue.tags||[],azureDevOpsId:Ue.azure_devops_id,azureDevOpsUrl:Ue.azure_devops_url,votes:Ie,voters:Je}})},[n]),ct=g.useCallback(async()=>{if(n)try{const re=await $S(n.id);tt(re)}catch(re){console.error("Error loading feature suggestions:",re)}},[n]),Ht=g.useCallback(async()=>{if(n)try{const re=await Go(),Pe=new Date,Ue=[];for(const We of re)if(!(We.id===n.id||new Date(We.start_date)<=Pe))try{await qv(We.id)&&Ue.push({id:We.id,title:We.title,startDate:We.start_date})}catch{console.warn(`Session ${We.id} no longer exists, skipping from future sessions list`)}pt(Ue)}catch(re){console.error("Error loading future sessions:",re),pt([])}},[n]),ar=g.useCallback(re=>{tt(Pe=>[re,...Pe]),ct(),Ht()},[ct,Ht]),Er=g.useCallback(async(re,Pe)=>{await O$(re,Pe),await ct()},[ct]),Ze=g.useCallback(async re=>{await T$(re),await ct()},[ct]),Bt=g.useCallback(async(re,Pe)=>{await I$(re,Pe),await ct()},[ct]),Vt=g.useCallback(async re=>{await D$(re);const Pe=await vt();w(Pe),await ct()},[vt,ct]);g.useEffect(()=>{async function re(){if(n&&!(Ve.current&&gt.current===n.id)){gt.current=n.id,Ve.current=!0;try{_(!0);const[Pe,Ue]=await Promise.all([ja(n.id),Lo(n.id)]),We=Pe.map(Ie=>{const Rt=Ue.filter(Ke=>Ke.feature_id===Ie.id).map(Ke=>({userId:Ke.user_id,name:Ke.user_name,email:Ke.user_email,voteCount:Ke.vote_count})),Tt=Rt.reduce((Ke,vr)=>Ke+vr.voteCount,0);return{id:Ie.id,title:Ie.title,description:Ie.description,epic:Ie.epic,state:Ie.state,areaPath:Ie.area_path,tags:Ie.tags||[],azureDevOpsId:Ie.azure_devops_id,azureDevOpsUrl:Ie.azure_devops_url,votes:Tt,voters:Rt}});w(We),G({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Je=await _$(n.id);ae(Je?{organization:Je.organization||"newmill",project:Je.project||"Product",accessToken:Je.access_token,refreshToken:Je.refresh_token,tokenExpiresAt:Je.token_expires_at,tenantId:Je.tenant_id,clientId:Je.client_id,enabled:Je.enabled,workItemType:Je.work_item_type||"Feature",query:Je.query,lastSyncTime:Je.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Ie=await $S(n.id);tt(Ie)}catch(Ie){console.error("Error loading feature suggestions:",Ie)}}catch(Pe){console.error("Error loading data:",Pe),w([])}finally{_(!1),Ve.current=!1}}}re()},[n==null?void 0:n.id]),g.useEffect(()=>{async function re(){const Pe=TC(),Ue=Q.project;if(oe(Pe),M([]),me([]),Fe([]),Q.enabled&&Q.accessToken&&Ue)try{const We=await et(Q),Je={...Q,accessToken:We,project:Ue},[Ie,Ot,Rt,Tt]=await Promise.all([lZ(Je).catch(Ke=>(console.error("Error loading Azure DevOps projects:",Ke),Pe)),EC(Je),Av(Je),AC(Je)]);Q.project===Ue&&(oe(Ie.length>0?Ie:Pe),M(Ot),me(Rt),Fe(Tt))}catch(We){console.error("Error loading filter options:",We),Q.project===Ue&&oe(Pe)}}re()},[Q.enabled,Q.accessToken,Q.project,et]);const Wt=g.useCallback(async(re,Pe)=>{if(!(!Q.enabled||!Q.accessToken))try{const Ue=await et(Q),We={...Q,accessToken:Ue},Je=re?await JT(We,re):await EC(We);M(Je)}catch(Ue){console.error("Error loading states for work item type:",Ue)}},[Q,et]),Gt=g.useCallback(async re=>{if(!Q.enabled||!Q.accessToken)return{types:[],states:[]};try{const Pe=await et(Q),Ue={...Q,accessToken:Pe};return await cZ(Ue,re)}catch(Pe){return console.error("Error fetching types and states for area path:",Pe),{types:[],states:[]}}},[Q,et]),tr=g.useCallback(async re=>{if(!Q.enabled||!Q.accessToken)return{types:[],areaPaths:[]};try{const Pe=await et(Q),Ue={...Q,accessToken:Pe},We=await oZ(Ue,re);return We.areaPaths.length>0&&me(We.areaPaths),We}catch(Pe){return console.error("Error fetching types and area paths for states:",Pe),{types:[],areaPaths:[]}}},[Q,et]),Rr=g.useCallback(async re=>{if(!Q.enabled||!Q.accessToken)return{types:[],states:[],areaPaths:[]};try{const Pe=await et(Q),Ue={...Q,accessToken:Pe},We=await uZ(Ue,re);return We.states.length>0&&M(We.states),We.areaPaths.length>0&&me(We.areaPaths),We}catch(Pe){return console.error("Error fetching types, states, and area paths for tags:",Pe),{types:[],states:[],areaPaths:[]}}},[Q,et]),Yt=g.useCallback(async(re,Pe=[],Ue=[])=>{if(!(!Q.enabled||!Q.accessToken))try{const We=await et(Q),Je={...Q,accessToken:We},Ie=re?await dZ(Je,re,Pe,Ue):await AC(Je);Fe(Ie)}catch(We){console.error("Error loading tags for type, state, and area path:",We)}},[Q,et]),sr=g.useCallback(async(re,Pe=[])=>{if(!(!Q.enabled||!Q.accessToken))try{const Ue=await et(Q),We={...Q,accessToken:Ue},Je=re?await aZ(We,re,Pe):await Av(We);me(Je)}catch(Ue){console.error("Error loading area paths for type and state:",Ue)}},[Q,et]);g.useEffect(()=>{const re=async()=>{const Ue=DZ(W.startDate,W.endDate);if(W.isActive!==Ue){const We={...W,isActive:Ue};G(We);try{n!=null&&n.id&&await DS(n.id,{title:We.title,goal:We.goal,votes_per_user:We.votesPerUser,start_date:We.startDate,end_date:We.endDate,is_active:We.isActive})}catch(Je){console.error("Error updating voting session status:",Je)}}};re();const Pe=setInterval(re,6e5);return()=>clearInterval(Pe)},[W,n==null?void 0:n.id]),g.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",T==="admin"&&(ct(),Ht())},[T,ct,Ht]),g.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const dr=g.useCallback(async(re=Q)=>{if(!re.organization||!re.project||!n){F("Organization and project name are required");return}try{Re(!0),F(null);const Pe=await et(re),Ue={...re,accessToken:Pe},We=await PC(Ue),Je=OC(We);for(const Ke of Je){const lr=(await ja(n.id)).find(un=>un.azure_devops_id===Ke.azureDevOpsId),Lr=kh(Ke.description),Ut=hd(Lr,300);lr?await by(lr.id,{title:Ke.title,description:Ut,epic:Ke.epic||null,state:Ke.state,areaPath:Ke.areaPath,tags:Ke.tags,azure_devops_id:Ke.azureDevOpsId,azure_devops_url:Ke.azureDevOpsUrl}):await oh({session_id:n.id,title:Ke.title,description:Ut,epic:Ke.epic||null,state:Ke.state,areaPath:Ke.areaPath,tags:Ke.tags,azure_devops_id:Ke.azureDevOpsId,azure_devops_url:Ke.azureDevOpsUrl})}const Ie=await ja(n.id),Ot=await Lo(n.id),Rt=Ie.map(Ke=>{const lr=Ot.filter(Ut=>Ut.feature_id===Ke.id).map(Ut=>({userId:Ut.user_id,name:Ut.user_name,email:Ut.user_email,voteCount:Ut.vote_count})),Lr=lr.reduce((Ut,un)=>Ut+un.voteCount,0);return{id:Ke.id,title:Ke.title,description:Ke.description,epic:Ke.epic,state:Ke.state,areaPath:Ke.area_path,tags:Ke.tags||[],azureDevOpsId:Ke.azure_devops_id,azureDevOpsUrl:Ke.azure_devops_url,votes:Lr,voters:lr}});w(Rt);const Tt={...Ue,lastSyncTime:new Date().toISOString()};await bl(n.id,Tt),ae(Tt)}catch(Pe){console.error("Azure DevOps sync error:",Pe),Pe instanceof Error&&Pe.message==="Not authenticated"?(F("Please authenticate with Azure DevOps"),He()):F("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Re(!1)}},[Q,n,et,He]),rr=g.useCallback(async()=>{if(!Q.organization||!Q.project){F("Organization and project name are required");return}try{Re(!0),F(null);const re=await et(Q),Pe={...Q,accessToken:re},Ue=await PC(Pe),Je=OC(Ue).map(Ie=>({...Ie,description:hd(kh(Ie.description),300)}));ce(Je),Ye(!0)}catch(re){console.error("Azure DevOps preview error:",re),re instanceof Error&&re.message==="Not authenticated"?(F("Please authenticate with Azure DevOps"),He()):F("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Re(!1)}},[Q,et,He]),Wn=g.useCallback(async()=>{if(!(!le||!n))try{Re(!0);const re=await ja(n.id);for(const Ie of re)await IS(Ie.id);for(const Ie of le){const Ot=kh(Ie.description),Rt=hd(Ot,300);await oh({session_id:n.id,title:Ie.title,description:Rt,epic:Ie.epic||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl})}const Pe=await ja(n.id),Ue=await Lo(n.id),We=Pe.map(Ie=>{const Rt=Ue.filter(Ke=>Ke.feature_id===Ie.id).map(Ke=>({userId:Ke.user_id,name:Ke.user_name,email:Ke.user_email,voteCount:Ke.vote_count})),Tt=Rt.reduce((Ke,vr)=>Ke+vr.voteCount,0);return{id:Ie.id,title:Ie.title,description:Ie.description,epic:Ie.epic,state:Ie.state,areaPath:Ie.area_path,tags:Ie.tags||[],azureDevOpsId:Ie.azure_devops_id,azureDevOpsUrl:Ie.azure_devops_url,votes:Tt,voters:Rt}});w(We);const Je={...Q,lastSyncTime:new Date().toISOString()};await bl(n.id,Je),ae(Je)}catch(re){console.error("Azure DevOps replace all error:",re),F("Failed to replace all features from Azure DevOps.")}finally{Re(!1),ce(null)}},[le,n,Q]),Xt=g.useCallback(async re=>{if(!(!re||re.length===0||!n))try{Re(!0);for(const Ie of re){const Rt=(await ja(n.id)).find(vr=>vr.azure_devops_id===Ie.azureDevOpsId),Tt=kh(Ie.description),Ke=hd(Tt,300);Rt?await by(Rt.id,{title:Ie.title,description:Ke,epic:Ie.epic||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl}):await oh({session_id:n.id,title:Ie.title,description:Ke,epic:Ie.epic||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl})}const Pe=await ja(n.id),Ue=await Lo(n.id),We=Pe.map(Ie=>{const Rt=Ue.filter(Ke=>Ke.feature_id===Ie.id).map(Ke=>({userId:Ke.user_id,name:Ke.user_name,email:Ke.user_email,voteCount:Ke.vote_count})),Tt=Rt.reduce((Ke,vr)=>Ke+vr.voteCount,0);return{id:Ie.id,title:Ie.title,description:Ie.description,epic:Ie.epic,state:Ie.state,areaPath:Ie.area_path,tags:Ie.tags||[],azureDevOpsId:Ie.azure_devops_id,azureDevOpsUrl:Ie.azure_devops_url,votes:Tt,voters:Rt}});w(We);const Je={...Q,lastSyncTime:new Date().toISOString()};await bl(n.id,Je),ae(Je)}catch(Pe){console.error("Azure DevOps sync error:",Pe),F("Failed to sync features from Azure DevOps.")}finally{Re(!1),ce(null)}},[le,n,Q]),os=g.useCallback(async()=>{if(n)try{const re={organization:Q.organization||"newmill",project:Q.project||"Product",workItemType:Q.workItemType||"Feature",query:Q.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await bl(n.id,re),ae(re),F(null)}catch(re){console.error("Error disconnecting Azure DevOps:",re),F("Failed to disconnect from Azure DevOps")}},[Q,n]);g.useEffect(()=>{(async()=>{const Pe=sessionStorage.getItem("oauth_action");if(Pe&&!(!Q.enabled||!Q.accessToken))try{Pe==="preview"?await rr():Pe==="sync"&&await dr()}finally{sessionStorage.removeItem("oauth_action")}})()},[Q.enabled,Q.accessToken,rr,dr]);const Mr=g.useCallback(()=>{p("/admin")},[p]),gr=g.useCallback(()=>{if(t){p("/vote");return}L(!1),er(d?"system":"session"),A("voting")},[d,t,p]),fr=g.useCallback(()=>{L(!0),er("session"),t?T!=="admin"&&A("admin"):T!=="voting"&&A("voting")},[t,T]),rn=g.useCallback(()=>{d&&(L(!0),er("system"),t?T!=="admin"&&A("admin"):T!=="voting"&&A("voting"))},[T,d,t]),Fr=g.useCallback(async re=>{if(n)try{const Pe=await oh({session_id:n.id,title:re.title,description:re.description,epic:re.epic});w(Ue=>[...Ue,{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic,votes:0,voters:[]}]),ie(!1)}catch(Pe){console.error("Error adding feature:",Pe),alert("Failed to add feature")}},[n]),An=g.useCallback(async re=>{try{await by(re.id,{title:re.title,description:re.description,epic:re.epic}),w(Pe=>Pe.map(Ue=>Ue.id===re.id?re:Ue)),J(null)}catch(Pe){console.error("Error updating feature:",Pe),alert("Failed to update feature")}},[]),jr=g.useCallback(async re=>{try{await IS(re),w(Pe=>Pe.filter(Ue=>Ue.id!==re))}catch(Pe){console.error("Error deleting feature:",Pe),alert("Failed to delete feature")}},[]),Or=g.useCallback(re=>{_e(Pe=>({...Pe,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:re}))},[]),Vn=g.useCallback(async()=>{const re=Oe.targetId;if(!(!re||!n))try{await x$(n.id,re);const Pe=await vt();w(Pe)}catch(Pe){console.error("Error resetting votes:",Pe),alert("Failed to reset votes")}},[Oe.targetId,n,vt]),qn=g.useCallback(()=>{_e(re=>({...re,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Vi=g.useCallback(()=>{_e(re=>({...re,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),cn=g.useCallback(async()=>{if(n){ut(!0);try{await y$(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(re){console.error("Error deleting session:",re),alert("Failed to delete session. Please try again.")}finally{ut(!1),_e(re=>({...re,showDeleteSession:!1}))}}},[n,p,l,u]),xs=g.useCallback(async()=>{if(n)try{await N$(n.id);const re=await vt();w(re)}catch(re){console.error("Error resetting all votes:",re),alert("Failed to reset all votes")}},[n,vt]),vs=g.useCallback((re,Pe)=>{if(!s||!W.isActive)return;const Ue=z[re]||0;let We=Ue;if(Pe)if(Z<xt)We=Ue+1;else return;else if(Ue>0)We=Ue-1;else return;V(Je=>{const Ie={...Je};return We===0?delete Ie[re]:Ie[re]=We,Ie}),Ne(Je=>Pe?Je+1:Je-1)},[s,z,Z,W.isActive,xt]),xr=g.useCallback(async()=>{if(!(!s||!W.isActive||!n)&&!(Z<xt))try{for(const[We,Je]of Object.entries(z))Je>0&&await S$({session_id:n.id,feature_id:We,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Je});const re=await ja(n.id),Pe=await Lo(n.id),Ue=re.map(We=>{const Ie=Pe.filter(Rt=>Rt.feature_id===We.id).map(Rt=>({userId:Rt.user_id,name:Rt.user_name,email:Rt.user_email,voteCount:Rt.vote_count})),Ot=Ie.reduce((Rt,Tt)=>Rt+Tt.voteCount,0);return{id:We.id,title:We.title,description:We.description,epic:We.epic,state:We.state,areaPath:We.area_path,tags:We.tags||[],azureDevOpsId:We.azure_devops_id,azureDevOpsUrl:We.azure_devops_url,votes:Ot,voters:Ie}});w(Ue),A("thankyou")}catch(re){console.error("Error submitting votes:",re),alert("Failed to submit votes. Please try again.")}},[s,n,Z,z,W.isActive,xt]),Pn=g.useCallback(async re=>{var Ot,Rt;const Pe={title:re.title,goal:re.goal,votes_per_user:re.votesPerUser,start_date:re.startDate,end_date:re.endDate,is_active:re.isActive,use_auto_votes:re.useAutoVotes,product_id:re.product_id??null,product_name:null},Ue={},We=(Tt,Ke)=>{Tt!==void 0&&(Ue[Ke]=Tt)};We(re.originalEndDate,"original_end_date"),We(re.endedEarlyBy,"ended_early_by"),We(re.endedEarlyReason,"ended_early_reason"),We(re.endedEarlyDetails,"ended_early_details"),We(re.reopenReason,"reopen_reason"),We(re.reopenDetails,"reopen_details"),We(re.reopenedBy,"reopened_by"),We(re.reopenedAt,"reopened_at");const Je={...Pe,...Ue},Ie=async Tt=>{n!=null&&n.id?await DS(n.id,Tt):await E$(Tt)};try{await Ie(Je),G(re),n!=null&&n.id&&l({...n,title:Pe.title??n.title,goal:Pe.goal??n.goal,votes_per_user:Pe.votes_per_user??n.votes_per_user,use_auto_votes:Pe.use_auto_votes??n.use_auto_votes,start_date:Pe.start_date??n.start_date,end_date:Pe.end_date??n.end_date,is_active:Pe.is_active??n.is_active,product_id:Pe.product_id!==void 0?Pe.product_id??null:re.product_id??n.product_id??null,product_name:null,original_end_date:Ue.original_end_date??n.original_end_date??null,ended_early_by:Ue.ended_early_by??n.ended_early_by??null,ended_early_reason:Ue.ended_early_reason??n.ended_early_reason??null,ended_early_details:Ue.ended_early_details??n.ended_early_details??null,reopen_reason:Ue.reopen_reason??n.reopen_reason??null,reopen_details:Ue.reopen_details??n.reopen_details??null,reopened_by:Ue.reopened_by??n.reopened_by??null,reopened_at:Ue.reopened_at??n.reopened_at??null})}catch(Tt){const Ke=((Rt=(Ot=Tt==null?void 0:Tt.message)==null?void 0:Ot.toLowerCase)==null?void 0:Rt.call(Ot))??"",vr=Ke.includes("column")&&(Ke.includes("reopen_reason")||Ke.includes("reopen_details")||Ke.includes("reopened_by")||Ke.includes("reopened_at")||Ke.includes("original_end_date")||Ke.includes("ended_early_by")||Ke.includes("ended_early_reason")||Ke.includes("ended_early_details")),lr=Ke.includes("product_name")||Ke.includes('"product_name"'),Lr=Ke.includes("product_id")||Ke.includes('"product_id"');if(vr||lr||Lr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",Tt);try{const Ut={...Pe};lr&&delete Ut.product_name,Lr&&delete Ut.product_id,await Ie(Ut),G(re),n!=null&&n.id&&l({...n,title:Ut.title??n.title,goal:Ut.goal??n.goal,votes_per_user:Ut.votes_per_user??n.votes_per_user,use_auto_votes:Ut.use_auto_votes??n.use_auto_votes,start_date:Ut.start_date??n.start_date,end_date:Ut.end_date??n.end_date,is_active:Ut.is_active??n.is_active,product_id:Ut.product_id!==void 0?Ut.product_id??null:re.productId??n.product_id??null,product_name:null,original_end_date:re.originalEndDate??n.original_end_date??null,ended_early_by:re.endedEarlyBy??n.ended_early_by??null,ended_early_reason:re.endedEarlyReason??n.ended_early_reason??null,ended_early_details:re.endedEarlyDetails??n.ended_early_details??null,reopen_reason:re.reopenReason??n.reopen_reason??null,reopen_details:re.reopenDetails??n.reopen_details??null,reopened_by:re.reopenedBy??n.reopened_by??null,reopened_at:re.reopenedAt??n.reopened_at??null})}catch(Ut){console.error("Error updating voting session (fallback):",Ut),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",Tt),alert("Failed to update voting session settings")}},[n,l]),Ar=g.useCallback(async re=>{if(n){ae(re);try{await bl(n.id,{organization:re.organization,project:re.project,accessToken:re.accessToken,refreshToken:re.refreshToken,tokenExpiresAt:re.tokenExpiresAt,tenantId:re.tenantId,clientId:re.clientId,enabled:re.enabled,workItemType:re.workItemType,query:re.query,lastSyncTime:re.lastSyncTime})}catch(Pe){console.error("Error saving config:",Pe)}}},[n]),Qt=g.useCallback(()=>{t||n?p("/results"):A("results")},[t,n,p]),or=g.useMemo(()=>{if(t)return i.jsx(AZ,{features:j,onAddFeature:Fr,onUpdateFeature:An,onDeleteFeature:jr,onShowResults:Qt,onRequestDeleteSession:Vi,isDeletingSession:Te,showAddForm:ne,setShowAddForm:ie,editingFeature:R,setEditingFeature:J,onLogout:x,onShowVoterView:gr,votingSession:W,azureDevOpsConfig:Q,onUpdateAzureDevOpsConfig:Ar,onPreviewAzureDevOpsFeatures:rr,onDisconnectAzureDevOps:os,isFetchingAzureDevOps:Se,azureFetchError:ke,onInitiateOAuth:He,availableStates:te,availableAreaPaths:X,availableTags:xe,previewFeatures:le,showPreviewModal:K,setShowPreviewModal:Ye,onConfirmSync:Xt,onReplaceAll:Wn,onUpdateVotingSession:Pn,onFetchStatesForType:Wt,onFetchAreaPathsForTypeAndState:sr,onFetchTagsForTypeStateAndAreaPath:Yt,onFetchTypesAndStatesForAreaPath:Gt,onFetchTypesAndStatesForTags:Rr,onFetchTypesAndAreaPathsForStates:tr,suggestedFeatures:Ae,otherSessions:St,onPromoteSuggestion:Vt,onMoveSuggestion:Bt,onEditSuggestion:Er,onDeleteSuggestion:Ze,adminPerspective:it,projectOptions:ee});switch(T==="admin"&&!t?"voting":T){case"voting":return i.jsx(zC,{features:j,currentUser:s,pendingVotes:z,pendingUsedVotes:Z,onVote:vs,onSubmitVotes:xr,onToggleAdmin:Mr,isAdmin:D,votingSession:W,navigate:p,effectiveVotesPerUser:xt,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:ar,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return i.jsx(zZ,{features:j,onResetVotes:Or,onResetAllVotes:qn,onBack:r?()=>p("../admin"):()=>A("admin"),showVotersList:q,setShowVotersList:de,votingSession:W,effectiveVotesPerUser:xt,onLogout:x,currentUser:s,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"thankyou":return i.jsx(UZ,{navigate:p,votingSession:W});default:return i.jsx(zC,{features:j,currentUser:s,pendingVotes:z,pendingUsedVotes:Z,onVote:vs,onSubmitVotes:xr,onToggleAdmin:Mr,isAdmin:D,votingSession:W,navigate:p,effectiveVotesPerUser:xt,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:ar,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f})}},[T,j,s,z,Z,vs,xr,Mr,D,W,Or,qn,q,de,Fr,An,jr,ne,ie,R,J,Q,Ar,dr,rr,os,Se,ke,He,le,K,Ye,Xt,p,xt,t,te,X,xe,Wt,n,gr,ar,Ae,St,Vt,Bt,Er,Ze,it,ee,Qt]);return n?S?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!D&&T!=="voting"&&T!=="thankyou"?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):i.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[i.jsx("div",{className:"flex-grow",children:or}),i.jsx(QT,{currentRole:D?it==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:gr,onSelectSessionAdmin:D||d?fr:void 0,onSelectSystemAdmin:d?rn:void 0,showRoleToggle:!0}),i.jsx(Dh,{show:Oe.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Vn,onCancel:()=>_e(re=>({...re,showReset:!1})),confirmText:"Reset",type:"reset"}),i.jsx(Dh,{show:Oe.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:xs,onCancel:()=>_e(re=>({...re,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),i.jsx(Dh,{show:Oe.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:cn,onCancel:()=>_e(re=>({...re,showDeleteSession:!1})),confirmText:Te?"Deleting":"Delete Session",type:"delete"})]}):i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}async function UC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function WZ(){const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,a]=g.useState(""),[l,u]=g.useState(!1),[d,m]=g.useState(null),[f,p]=g.useState(""),[x,v]=g.useState(""),{currentUser:j,setCurrentUser:w,setCurrentSession:S}=Ia(),_=ti(),[E]=Mv(),C=async A=>{A.preventDefault(),a(""),t(!0);try{const D=await Al(f.toLowerCase(),x);console.log("[LoginScreen] User created/retrieved:",D),w(D);const L=E.get("session");if(L){console.log("[LoginScreen] Session code found, loading session...");const R=await g$(L);if(R){S(R),console.log("[LoginScreen] Checking user roles...");const[J,ne,ie]=await Promise.all([Ui(D.id),qm(R.id,D.id),Hv(R.id,D.email)]);if(J||ne)_("/admin");else if(ie)_("/vote");else{a("You are not authorized to access this voting session."),t(!1);return}}else{a("Invalid session code."),t(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),_("/sessions")}catch(D){console.error("[LoginScreen] Login error:",D),a(`Failed to log in: ${D instanceof Error?D.message:"Unknown error"}. Please try again.`),t(!1)}};g.useEffect(()=>{const A=sessionStorage.getItem("oauth_error");A&&(a(A),sessionStorage.removeItem("oauth_error"));const D=E.get("error"),L=E.get("error_description"),R=E.get("error_code");if(D){const J=L?decodeURIComponent(L):"An authentication error occurred.";D==="invalid_request"&&J.includes("AADSTS9002325")?a('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):R==="unexpected_failure"&&J.includes("email")?a("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):a(`Authentication failed: ${J}`),_("/login",{replace:!0})}},[E,_]),g.useEffect(()=>{const A=E.get("token"),D=E.get("action"),L=E.get("email"),R=E.get("product");A&&D&&L&&R&&(D==="grant-admin"||D==="grant-stakeholder")&&(async()=>{var ne,ie;try{t(!0),a("");const de=`${Ee.supabaseUrl}/functions/v1/grant-access`;let W;try{W=await fetch(de,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee.supabaseKey}`},body:JSON.stringify({token:A,action:D,email:L,productId:R})})}catch(le){throw(ne=le.message)!=null&&ne.includes("CORS")||(ie=le.message)!=null&&ie.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+le.message):le}if(!W.ok){let le="Failed to grant access";try{le=(await W.json()).error||le}catch{le=`Server returned ${W.status}: ${W.statusText}`}throw new Error(le)}const G=await W.json(),Q=L.split("@")[0].replace(/\./g," "),ae=G.productName||"the product",ee=D==="grant-admin"?"Session Admin":"Stakeholder";let oe=Q;try{const le=await kE(L);le&&(oe=le.name)}catch{}const te=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",M=`${window.location.origin}${te}/login`,X="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",xe=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <div style="position: relative; display: inline-block;">
        <div style="position: absolute; bottom: 0; left: 0; width: 300px; height: 200px; background-image: url('https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png'); background-position: bottom left; background-repeat: no-repeat; background-size: contain; opacity: 0.2; z-index: 0; pointer-events: none;"></div>
        <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${X}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${oe},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${ee}</strong> access to all voting sessions for <strong style="color: #2d4660;">${ae}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${M}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Fe=`
Access Granted - Feature Voting System

Hello ${oe},

Your access request has been approved! You have been granted ${ee} access to all voting sessions for ${ae}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${M}

This is an automated message from the Feature Voting System.
          `;let Se=[];try{const le=await PE(R);Se=Array.from(new Set(le.map(ce=>{var K;return(K=ce.user)==null?void 0:K.email}).filter(ce=>!!ce).map(ce=>ce.toLowerCase())))}catch(le){console.error("Error getting session admins for product:",le),j!=null&&j.email&&(Se=[j.email.toLowerCase()])}const Re=Se.length>0?`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${X}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted Confirmation</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You have successfully granted <strong style="color: #2d4660;">${ee}</strong> access to <strong style="color: #2d4660;">${oe}</strong> (${L}) for all sessions in <strong style="color: #2d4660;">${ae}</strong>.</p>
            
            <!-- Status Box -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <strong style="color: #166534; font-size: 14px;"> Access Granted</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Role: <strong>${ee}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    User: <strong>${oe}</strong> (${L})
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Product: <strong>${ae}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Status: <strong>Email notification sent to requester</strong>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">The requester has been notified and can now access all voting sessions for this product.</p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${M}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`:null,ke=Se.length>0?`
Access Granted Confirmation - Feature Voting System

Hello,

You have successfully granted ${ee} access to ${oe} (${L}) for all sessions in ${ae}.

Status: Access Granted
Role: ${ee}
User: ${oe} (${L})
Product: ${ae}
Email notification sent to requester: Yes

The requester has been notified and can now access all voting sessions for this product.

Login: ${M}

This is an automated message from the Feature Voting System.
          `:null,F=[Yo({to:L,subject:`Access Granted - ${ae} - Feature Voting System`,text:Fe,html:xe})];Se.length>0&&Re&&ke&&Se.forEach(le=>{F.push(Yo({to:le,subject:`Access Granted: ${oe} - ${ae} - Feature Voting System`,text:ke,html:Re}))});try{await Promise.all(F)}catch(le){console.error("Error sending emails:",le)}m({roleName:ee,productName:ae,requesterName:oe,requesterEmail:L}),_("/login",{replace:!0})}catch(q){console.error("Error granting access:",q),a(q.message||"Failed to grant access. Please try again."),_("/login",{replace:!0})}finally{t(!1)}})()},[E,_]);const T=async()=>{a(""),n(!0);try{const A=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",D=`${window.location.origin}${A}/sessions`,{error:L}=await Ee.auth.signInWithOAuth({provider:"azure",options:{redirectTo:D,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:D}}});L&&(a("Failed to sign in with Azure AD. Please try again."),n(!1))}catch(A){console.error("Azure login error:",A),a("Failed to sign in with Azure AD. Please try again."),n(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),i.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-name",name:"name",type:"text",autoComplete:"name",required:!0,value:x,onChange:A=>v(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:f,onChange:A=>p(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})})]}),s&&i.jsx("div",{className:"rounded-md bg-red-50 p-4 mt-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})})}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:T,disabled:r,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.5:1},onMouseEnter:A=>{r||(A.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:A=>{r||(A.currentTarget.style.backgroundColor="#FFFFFF")},children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),i.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:HF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),i.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),i.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[i.jsx("p",{children:"Simply enter your name and email to access"}),i.jsx("p",{children:"voting sessions you've been invited to"})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),i.jsx(VZ,{isOpen:l,onClose:jt.useCallback(()=>u(!1),[])}),d&&i.jsx(xn,{isOpen:!0,onClose:()=>m(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(kr,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",i.jsx("span",{className:"font-semibold text-green-700",children:d.roleName})," access to"]}),i.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:d.requesterName}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:d.requesterEmail}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),i.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:d.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const VZ=jt.memo(function({isOpen:t,onClose:r}){const[n,s]=g.useState(""),[a,l]=g.useState(""),[u,d]=g.useState(""),[m,f]=g.useState([]),[p,x]=g.useState(!1),[v,j]=g.useState(!1),[w,S]=g.useState(!1),[_,E]=g.useState(""),[C,T]=g.useState(!1),A=jt.useRef(null),D=jt.useRef(!1),L=jt.useRef(null),R=jt.useRef(null);g.useEffect(()=>{t&&!D.current?(async()=>{x(!0);try{const G=await Uh();f(G),D.current=!0}catch(G){console.error("Error loading products:",G),E("Failed to load products. Please try again.")}finally{x(!1)}})():t||(s(""),l(""),d(""),S(!1),E(""),D.current=!1)},[t]),g.useEffect(()=>{function W(G){A.current&&!A.current.contains(G.target)&&T(!1)}return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const J=jt.useCallback(W=>{s(W.target.value)},[]),ne=jt.useCallback(W=>{l(W.target.value)},[]),ie=async W=>{if(W.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!a.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}j(!0);try{const G=await PE(u);if(G.length===0){E("No administrators found for this product. Please contact your system administrator."),j(!1);return}const Q=m.find(Se=>Se.id===u),ae=(Q==null?void 0:Q.name)||"the selected product",ee=Array.from(new Set(G.map(Se=>{var Re;return(Re=Se.user)==null?void 0:Re.email}).filter(Boolean))),oe=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",te=`${window.location.origin}${oe}/login`,M=await UC(a,u,"grant-admin"),X=await UC(a,u,"grant-stakeholder"),xe=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${ae}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${ae}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${a}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${ae}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${te}?token=${M}&action=grant-admin&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${te}?token=${X}&action=grant-stakeholder&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${te}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Fe=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${ae}.

Requester Name: ${n}
Requester Email: ${a}
Product: ${ae}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${te}

This is an automated message from the Feature Voting System.
      `;try{const Se=ee.map(Re=>Yo({to:Re,subject:`Access Request for ${ae} - Feature Voting System`,text:Fe,html:xe}));await Promise.all(Se),S(!0)}catch(Se){console.error("Email service failed:",Se);let Re="Failed to send email through the system.";Se instanceof Error||Se!=null&&Se.message?Re=Se.message:typeof Se=="string"&&(Re=Se),(Re.includes("validation_error")||Re.includes("403"))&&(Re="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${Re}. Please check the Supabase Edge Function logs for details.`),j(!1);return}}catch(G){console.error("Error sending access request:",G),E("Failed to send access request. Please try again or contact your administrator.")}finally{j(!1)}},q=m.find(W=>W.id===u),de=q?Wr(q.name,q.color_hex??null):null;return i.jsx(xn,{isOpen:t,onClose:r,title:w?"":"Request Access",maxWidth:"max-w-lg",hideHeader:w,children:w?i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(kr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),i.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:q==null?void 0:q.name}),i.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):i.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),i.jsx("input",{ref:L,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{ref:R,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:a,onChange:ne,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),i.jsxs("div",{ref:A,className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>T(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[q&&de&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:de.background}}),i.jsx("span",{className:q?"text-gray-900":"text-gray-400",children:q?q.name:"Select a product..."})]}),i.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(W=>{const G=Wr(W.name,W.color_hex??null),Q=u===W.id;return i.jsxs("div",{onClick:()=>{d(W.id),T(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${Q?"bg-[#2d4660]/5":""}`,children:[G&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:G.background}}),i.jsx("span",{className:"text-sm text-gray-900",children:W.name})]},W.id)})})]})]}),_&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(wt,{variant:"secondary",onClick:r,disabled:v,children:"Cancel"}),i.jsx(wt,{variant:"primary",type:"submit",disabled:v,className:"flex items-center",children:v?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function qZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=Ia(),a=ti(),[l]=Mv(),[u,d]=g.useState(!0),[m,f]=g.useState(!1),p=g.useRef(!1),[x,v]=g.useState([]),[j,w]=g.useState({}),[S,_]=g.useState({}),[E,C]=g.useState({}),[T,A]=g.useState({}),[D,L]=g.useState({}),[R,J]=g.useState(!1),[ne,ie]=g.useState("admin"),[q,de]=g.useState(!1),W=g.useRef(null),[G,Q]=g.useState({}),[ae,ee]=g.useState({}),[oe,te]=g.useState(!1),[M,X]=g.useState(!0),[me,xe]=g.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[Fe,Se]=g.useState({}),[Re,ke]=g.useState(!1),[F,le]=g.useState([]),[ce,K]=g.useState(""),[Ye,Ae]=g.useState(""),[tt,St]=g.useState(null),[pt,it]=g.useState(null),[er,z]=g.useState(!1),[V,Z]=g.useState(!1),[Ne,Oe]=g.useState(!1),[_e,Te]=g.useState(null),[ut,Dt]=g.useState(!1),[Ve,gt]=g.useState(!1),[xt,Le]=g.useState(!1),[He,et]=g.useState(null),[vt,ct]=g.useState(!1),[Ht,ar]=g.useState("#2D4660"),Er=g.useRef(null),[Ze,Bt]=g.useState(new Set),[Vt,Wt]=g.useState(null),[Gt,tr]=g.useState(null),[Rr,Yt]=g.useState(!1),[sr,dr]=g.useState(!1),[rr,Wn]=g.useState(null),[Xt,os]=g.useState(null),[Mr,gr]=g.useState(null),[fr,rn]=g.useState(null),[Fr,An]=g.useState(""),[jr,Or]=g.useState(null),[Vn,qn]=g.useState(!1),[Vi,cn]=g.useState(!1),[xs,vs]=g.useState("#2D4660"),[xr,Pn]=g.useState(!1),[Ar,Qt]=g.useState([]),[or,re]=g.useState([]),[Pe,Ue]=g.useState(""),[We,Je]=g.useState(""),[Ie,Ot]=g.useState(""),[Rt,Tt]=g.useState(!1),[Ke,vr]=g.useState(""),[lr,Lr]=g.useState(null),[Ut,un]=g.useState(!1),[br,Hn]=g.useState(null),zs=()=>Hn(null),ls=Ar.map(P=>P.user_email.toLowerCase()),Si=ls.length>0&&ls.every(P=>or.includes(P));g.useEffect(()=>{const P=l.get("error"),I=l.get("error_description"),H=l.get("error_code");if(P){let ue="Authentication failed.";H==="unexpected_failure"&&(I!=null&&I.includes("email"))?ue="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":I&&(ue=decodeURIComponent(I)),sessionStorage.setItem("oauth_error",ue),a("/login",{replace:!0})}},[l,a]),g.useEffect(()=>{(async()=>{if(!oe||!e)return;const I=e.tenant_id??e.tenantId??null;if(!I){le([]),K(""),Te("No tenant assigned. Products cannot be loaded.");return}Z(!0),Te(null);try{const ue=await Ga(I);le(ue),K($e=>{if(Rr&&$e&&ue.some(pe=>pe.id===$e))return $e;if(Vt){const Ce=ue.find(pe=>{var ve;return((ve=pe.name)==null?void 0:ve.toLowerCase().trim())===Vt.toLowerCase().trim()});if(Ce!=null&&Ce.id)return Wt(null),Ce.id}return Rr&&$e||""}),Q($e=>{const Ce={...$e};return ue.forEach(pe=>{pe.id&&pe.name&&(Ce[pe.id]=pe.name)}),Ce}),ee($e=>{const Ce={...$e};return ue.forEach(pe=>{pe.id&&pe.color_hex&&(Ce[pe.id]=pe.color_hex)}),Ce})}catch(H){console.error("Error loading products for modal:",H),eo!=null&&eo(H)?Te("Products are not configured yet. Please create the `products` table in Supabase."):Te("Unable to load products. You can still create a session without a product tag."),le([]),K("")}finally{Z(!1)}})()},[oe,e]);const nr=P=>{if(!P||typeof P!="string")return console.error("[parseLocalDate] Invalid date string:",P),new Date;const H=P.split("T")[0].split(" ")[0].split("-");if(H.length!==3)return console.error("[parseLocalDate] Invalid date format:",P),new Date;const ue=parseInt(H[0],10),$e=parseInt(H[1],10),Ce=parseInt(H[2],10);if(isNaN(ue)||isNaN($e)||isNaN(Ce))return console.error("[parseLocalDate] Invalid date components:",{year:ue,month:$e,day:Ce}),new Date;const pe=new Date(ue,$e-1,Ce,0,0,0,0);return isNaN(pe.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:ue,month:$e,day:Ce,dateString:P}),new Date):pe},Qr=P=>{if(!P||isNaN(P.getTime()))return console.error("[formatDateToISO] Invalid date:",P),new Date().toISOString().split("T")[0];const I=P.getFullYear(),H=String(P.getMonth()+1).padStart(2,"0"),ue=String(P.getDate()).padStart(2,"0");return`${I}-${H}-${ue}`},yr=(P,I)=>{const H=P.getFullYear(),ue=P.getMonth(),$e=P.getDate();return new Date(H,ue,$e+I,0,0,0,0)},qi=()=>{const P="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let I="";for(let H=0;H<8;H++)I+=P.charAt(Math.floor(Math.random()*P.length));return I},Mt=()=>{xe({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),Se({}),Ae(""),St(null),Te(null),Dt(!1),gt(!1),Le(!1),et(null),ct(!1),ar("#2D4660"),Wt(null),X(!0),Yt(!1),dr(!1)},Us=(P=!1)=>{const I={};if(P||(me.title.trim()||(I.title="Session title is required"),me.goal.trim()||(I.goal="Session goal is required")),me.useAutoVotes||(me.votesPerUser<1&&(I.votesPerUser="Votes per user must be at least 1"),me.votesPerUser>100&&(I.votesPerUser="Votes per user cannot exceed 100")),P){if(me.startDate&&me.endDate){const H=nr(me.startDate);nr(me.endDate)<=H&&(I.endDate="End date must be after start date")}}else if((!me.startDate||!me.startDate.trim())&&(I.startDate="Start date is required"),(!me.endDate||!me.endDate.trim())&&(I.endDate="End date is required"),me.startDate&&me.endDate&&me.startDate.trim()&&me.endDate.trim()){const H=nr(me.startDate);nr(me.endDate)<=H&&(I.endDate="End date must be after start date")}if(!P){const H=Ye.trim().length>0;!_e&&F.length>0&&!ce&&!He&&!ut&&!H&&(I.product="Please select a product or enter a new product name"),ut&&!H&&(I.product="Please enter a product name or select an existing product")}return Se(I),Object.keys(I).length===0},ni=P=>{const{name:I,value:H}=P.target;xe(ue=>{const $e={...ue,[I]:I==="votesPerUser"?parseInt(H)||0:H};if(I==="startDate"&&H){const Ce=nr(H),pe=yr(Ce,14);$e.endDate=Qr(pe)}return $e}),Fe[I]&&Se(ue=>{const $e={...ue};return delete $e[I],$e})},dn=async P=>{if(P==="startDate"&&!me.startDate){let I;if(ce)try{const Ce=x.filter(pe=>pe.product_id===ce);if(Ce.length>0){let pe=nr(Ce[0].end_date);Ce.forEach(ve=>{const ft=nr(ve.end_date);ft>pe&&(pe=ft)}),I=yr(pe,1)}else I=new Date}catch(Ce){console.error("Error calculating dates for product:",Ce),I=new Date}else I=new Date;const H=Qr(I),ue=nr(H),$e=yr(ue,14);xe(Ce=>({...Ce,startDate:H,endDate:Ce.endDate||Qr($e)}))}else if(P==="endDate"&&!me.endDate){let I;if(me.startDate)I=nr(me.startDate);else if(ce)try{const ue=x.filter($e=>$e.product_id===ce);if(ue.length>0){let $e=nr(ue[0].end_date);ue.forEach(Ce=>{const pe=nr(Ce.end_date);pe>$e&&($e=pe)}),I=yr($e,1)}else I=new Date}catch(ue){console.error("Error calculating dates for product:",ue),I=new Date}else I=new Date;const H=yr(I,14);xe(ue=>({...ue,endDate:Qr(H),startDate:ue.startDate||Qr(I)}))}},Hi=async()=>{if(!(!pt||!e)){z(!0);try{await _E(pt.id),le(P=>P.filter(I=>I.id!==pt.id)),Q(P=>{const I={...P};return delete I[pt.id],I}),ee(P=>{const I={...P};return delete I[pt.id],I}),ce===pt.id&&K("")}catch(P){console.error("Error deleting product:",P),alert("Failed to delete product. Please try again.")}finally{z(!1),it(null)}}},Ki=async()=>{if(e&&Us(!0)){ke(!0);try{const P=qi(),I=e.tenant_id??e.tenantId??null;let H=ce&&ce.trim()!==""?ce:null;const ue=Ye.trim(),$e=ue.length>0;let Ce=null,pe=null;if(He?(Ce=He.name,pe=He.color):$e&&(Ce=ue,pe=tt),Ce&&I)try{const Nt=F.find(De=>De.name.toLowerCase().trim()===Ce.toLowerCase().trim());if(Nt)H=Nt.id;else{const De=await wx(I,Ce,pe||void 0);H=De.id,le(bt=>[...bt,De].sort((Ge,ot)=>Ge.name.localeCompare(ot.name))),Q(bt=>({...bt,[De.id]:De.name})),ee(bt=>{const Ge={...bt};return De.color_hex&&(Ge[De.id]=De.color_hex),Ge})}}catch(Nt){console.error("Error creating product during draft save:",Nt)}const ve=me.startDate&&me.startDate.trim()?me.startDate:fn,ft=me.endDate&&me.endDate.trim()?me.endDate:fn,At=`${ve}T00:00:00`,at=`${ft}T23:59:59`,Ft=await jx({title:me.title.trim()||"Untitled Session",goal:me.goal.trim()||"",votes_per_user:me.votesPerUser||10,use_auto_votes:me.useAutoVotes,start_date:At,end_date:at,is_active:!1,session_code:P,access_type:"invite-only",product_id:H??null,product_name:null});try{await Il(Ft.id,e.id)}catch(Nt){console.error("Error adding session admin for draft:",Nt)}await r(),p.current=!1,await si(),hn()}catch(P){console.error("Error saving draft:",P),Se(I=>({...I,submit:P.message||"Failed to save draft. Please try again."}))}finally{ke(!1)}}},bs=async P=>{if(P.preventDefault(),!!e&&Us(!1)){ke(!0);try{const I=qi(),H=e.tenant_id??e.tenantId??null;let ue=ce&&ce.trim()!==""?ce:null;const $e=Ye.trim(),Ce=$e.length>0,pe=ce&&ce.trim()!=="";let ve=null,ft=null;if(He?(ve=He.name,ft=He.color):Ce&&(ve=$e,ft=tt),ve){const bt=F.find(Ge=>Ge.name.toLowerCase().trim()===ve.toLowerCase().trim());if(bt)ue=bt.id;else if(H)try{const Ge=await wx(H,ve,ft||void 0);ue=Ge.id,le(ot=>[...ot,Ge].sort((Lt,rt)=>Lt.name.localeCompare(rt.name))),Q(ot=>({...ot,[Ge.id]:Ge.name})),ee(ot=>{const Lt={...ot};return Ge.color_hex&&(Lt[Ge.id]=Ge.color_hex),Lt})}catch(Ge){console.error("Error creating product during session creation:",Ge),Se(ot=>({...ot,submit:"Failed to create product. Please try again."})),ke(!1);return}else{console.error("No tenantId available to create product"),Se(Ge=>({...Ge,submit:"Unable to create product: No tenant assigned."})),ke(!1);return}}if(ue&&me.startDate&&me.endDate&&me.startDate.trim()&&me.endDate.trim()){const bt=x.filter(It=>It.product_id===ue),Ge=me.startDate.split("T")[0],ot=me.endDate.split("T")[0];if(bt.find(It=>{const yt=It.start_date.split("T")[0],Zt=It.end_date.split("T")[0];return yt===Ge&&Zt===ot})){const It=G[ue]||"this product";Se(yt=>({...yt,submit:`A session with the same dates (${zr(me.startDate)} - ${zr(me.endDate)}) already exists for ${It}. Please choose different dates.`})),ke(!1);return}const rt=await EE(ue);if(rt){const It=nr(rt.end_date);if(nr(me.startDate)<=It){const Zt=G[ue]||"this product";Se(Kr=>({...Kr,submit:`There is already an active session for ${Zt}. The new session must start after ${zr(rt.end_date)}.`})),ke(!1);return}}}const At=`${me.startDate}T00:00:00`,at=`${me.endDate}T23:59:59`,Ft=await jx({title:me.title,goal:me.goal,votes_per_user:me.votesPerUser,use_auto_votes:me.useAutoVotes,start_date:At,end_date:at,is_active:!0,session_code:I,access_type:"invite-only",product_id:ue??null,product_name:null});try{await Il(Ft.id,e.id)}catch(bt){console.error("Error adding session admin (session was created successfully):",bt),(bt==null?void 0:bt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const De=await qv(Ft.id)||Ft;if(De.product_id&&H)try{const Ge=(await Ga(H)).find(ot=>ot.id===De.product_id);Ge&&(Q(ot=>({...ot,[Ge.id]:Ge.name})),Ge.color_hex&&Ge.color_hex.trim()!==""&&ee(ot=>({...ot,[Ge.id]:Ge.color_hex})))}catch(bt){console.error("Error loading product for lookup:",bt)}t(De),await r(),await si(),te(!1),Mt(),setTimeout(()=>{a("/admin")},100)}catch(I){console.error("Error creating session from modal:",I),Se(H=>({...H,submit:"Failed to create session. Please try again."}))}finally{ke(!1)}}};g.useEffect(()=>{if(!q)return;const P=I=>{W.current&&!W.current.contains(I.target)&&de(!1)};return document.addEventListener("mousedown",P),document.addEventListener("touchstart",P,{passive:!0}),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",P)}},[q]);const si=g.useCallback(async()=>{var P;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const H=Cx(e.email)||await Ui(e.id);J(H);let ue;H?ue=await Go():ue=await CE(e.id);const $e=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Ce={},pe={};if($e)try{const Nt=await Ga($e);Ce=Nt.reduce((De,bt)=>(bt.id&&bt.name&&(De[bt.id]=bt.name),De),{}),pe=Nt.reduce((De,bt)=>(bt.id&&bt.color_hex&&(De[bt.id]=bt.color_hex),De),{})}catch(Nt){console.error("Error loading products for session selection:",Nt)}const ve={},ft={},At={},at={},Ft={};for(let Nt=0;Nt<ue.length;Nt++){const De=ue[Nt];try{const[bt,Ge,ot,Lt,rt,It]=await Promise.all([H?Promise.resolve(!0):qm(De.id,e.id),Hv(De.id,e.email),ja(De.id),Lo(De.id).catch(Zt=>(console.warn(`Failed to load votes for session ${De.id}:`,Zt),[])),Wd(De.id).catch(()=>[]),Bh(De.id).catch(()=>[])]);ve[De.id]={isAdmin:bt,isStakeholder:Ge},ft[De.id]=ot.length,at[De.id]=rt.length,Ft[De.id]=It.length;const yt=Lt.some(Zt=>Zt.user_id===e.id);At[De.id]=yt}catch(bt){console.warn(`Error loading data for session ${De.id}:`,bt),ve[De.id]={isAdmin:!1,isStakeholder:!1},ft[De.id]=0,at[De.id]=0,Ft[De.id]=0,At[De.id]=!1}}await r(),v(ue),w(ve),_(ft),C(At),A(at),L(Ft),Q(Ce),ee(pe)}catch(I){console.error("Error loading sessions:",I),(P=I==null?void 0:I.message)!=null&&P.includes("Failed to fetch")||(I==null?void 0:I.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),v([]),w({}),_({}),C({})):(v([]),w({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);g.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const I=setTimeout(()=>{f(!1),e||a("/login",{replace:!0})},3e3);return()=>clearTimeout(I)}if(m&&e&&f(!1),!m){if(!e&&!s){a("/login",{replace:!0});return}e&&!s&&!p.current&&si()}},[e,s,a,m]);const Kn=P=>{const I=S[P.id]||0;if(P.use_auto_votes){const H=Math.max(1,Math.floor(I/2));return{votes:H,displayText:`${H} votes/user`,isAuto:!0,formula:`Auto: ${I} ${I===1?"feature":"features"}  2 = ${H}`}}else return{votes:P.votes_per_user,displayText:`${P.votes_per_user} votes/user`,isAuto:!1,formula:""}},Zr=P=>{t(P);const I=j[P.id];ne==="stakeholder"?a("/vote"):I!=null&&I.isAdmin?a("/admin"):a("/vote")},cs=P=>{t(P),a("/vote")},ws=async()=>{try{await Ee.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}de(!1),a("/login",{replace:!0})},zr=P=>{const H=P.split("T")[0].split(" ")[0].split("-");if(H.length!==3)return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,at=>`'${at.slice(-2)}`);const ue=parseInt(H[0],10),$e=parseInt(H[1],10)-1,Ce=parseInt(H[2],10);return new Date(ue,$e,Ce).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,ft=>`'${ft.slice(-2)}`)},fn="2099-12-31",nn=P=>P?P.split("T")[0]===fn:!1,Gi=P=>{if(!P.is_active){const I=!P.title||P.title==="Untitled Session"||P.title.trim()==="",H=!P.goal||P.goal.trim()==="";return I||H}return!1},As=P=>{if(Gi(P))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Kh};const I=new Date,H=new Date(P.start_date),ue=new Date(P.end_date);return I<H?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Xm}:I>ue?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:ir}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:kr}},Ps=P=>[...P].sort((I,H)=>{const ue=I!=null&&I.end_date?Date.parse(I.end_date):0;return(H!=null&&H.end_date?Date.parse(H.end_date):0)-ue}),Yi=P=>P.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),wo=P=>Yi(P).replace(/\n/g,"<br />"),Os=P=>{const I=Cr(P,G);return I?`${I}  ${P.title}`:`You're invited to vote: ${P.title}`},Ra=(P,I)=>{const H=Cr(P,G);return`Hello,

You're invited to participate in the "${H?`${H}  ${P.title}`:P.title}" feature voting session.

`+(P.goal?`Goal: ${P.goal}

`:"")+`Voting Period: ${nn(P.start_date)||nn(P.end_date)?"Dates not set":`${zr(P.start_date)} - ${zr(P.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},sl=(P,I)=>{const H="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const ue=Cr(P,G),$e=ue?`${ue}  ${P.title}`:P.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${H}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${$e}"</strong> feature voting session.</p>
            
            ${P.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${Yi(P.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${nn(P.start_date)||nn(P.end_date)?"Dates not set":`${zr(P.start_date)} - ${zr(P.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${I}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the session admin team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},sn=async(P,I)=>{P.stopPropagation();const H=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ue=`${window.location.origin}${H}/login?session=${I.session_code}`;vr(""),Lr(I),Ot(ue),Ue(Os(I)),Je(Ra(I)),Pn(!0),Tt(!0),Qt([]),re([]);try{const Ce=(await Bh(I.id)).filter(At=>!!At.user_email),pe=await bx(),ve=new Set(pe.map(At=>At.email.toLowerCase())),ft=Ce.filter(At=>ve.has(At.user_email.toLowerCase()));Qt(ft),re(ft.map(At=>At.user_email.toLowerCase())),ft.length===0&&(Ce.length>0?vr("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):vr("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch($e){console.error("Error loading stakeholders:",$e),vr($e.message||"Failed to load stakeholders for this session.")}finally{Tt(!1)}},Bs=(P,I)=>{P.stopPropagation(),t(I),a("/results")},Ts=()=>{Pn(!1),Qt([]),re([]),Lr(null),vr("")},ki=P=>{re(I=>{const H=P.toLowerCase();return I.includes(H)?I.filter(ue=>ue!==H):[...I,H]})},jo=()=>{re(Si?[]:ls)},il=async()=>{if(!lr)return;if(or.length===0){vr("Select at least one stakeholder to email.");return}vr(""),un(!0);const P=or.length,I=lr.title,H=We||Ra(lr),ue=Pe||Os(lr),$e=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${Ie}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let Ce;if(We){const pe="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let ve=wo(H);Ie&&ve.includes(Yi(Ie))&&(ve=ve.replace(new RegExp(Yi(Ie),"g"),"")),ve=ve+$e,Ce=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${pe}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${ve}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else Ce=sl(lr,Ie);try{await Promise.all(or.map(ve=>Yo({to:ve,subject:ue,text:H,html:Ce})));const pe=Ar.filter(ve=>or.includes(ve.user_email.toLowerCase())).map(ve=>({name:ve.user_name||"Unnamed Stakeholder",email:ve.user_email}));Ts(),Hn({sessionTitle:I,count:P,stakeholders:pe})}catch(pe){console.error("Error sending stakeholder invites:",pe),vr(pe.message||"Failed to send invites. Please try again.")}finally{un(!1)}},Ma=(P,I)=>{P.stopPropagation(),t(I);const H=I.product_id||I.productId||"",ue=H?`/users?filter=session-admin&product=${H}`:"/users?filter=session-admin";a(ue)},Ji=(P,I)=>{P.stopPropagation(),t(I);const H=I.product_id||I.productId||"",ue=H?`/users?filter=stakeholder&product=${H}`:"/users?filter=stakeholder";a(ue)},hn=()=>{te(!1),Yt(!1),dr(!1),Mt(),K("")};if(u)return i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const us=Ps(x),wr=R?us:us.filter(P=>{var I;return(I=j[P.id])==null?void 0:I.isAdmin}),Xi=R?[]:us.filter(P=>{var I,H;return((I=j[P.id])==null?void 0:I.isStakeholder)&&!((H=j[P.id])!=null&&H.isAdmin)}),Gn=R||wr.length>0,Ni=R&&ne==="system-admin",_i=ne==="stakeholder"?us.filter(P=>As(P).text==="Active"):[],U=ne==="admin"||ne==="system-admin"?wr:[],k=ne==="admin"?Xi:[],$=(P,I)=>{const H={};return P.forEach(ue=>{const $e=Cr(ue,I);if(!$e||$e==="No Product"||$e.trim()==="")return;const Ce=$e.toLowerCase().trim();H[Ce]||(H[Ce]=[]),H[Ce].push(ue)}),H},ge=P=>{Bt(I=>{const H=new Set(I);return H.has(P)?H.delete(P):H.add(P),H})},fe=(P,I,H,ue)=>{const $e=ue||H||P,Ce=async pe=>{if(!H)return;pe.stopPropagation();let ve=F.find(ft=>ft.id===H);if(!ve){const ft=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(ft)try{ve=(await Ga(ft)).find(at=>at.id===H),ve&&le(at=>at.find(Nt=>Nt.id===H)?at:[...at,ve].sort((Nt,De)=>Nt.name.localeCompare(De.name)))}catch(At){console.error("Error loading product for edit:",At)}}ve&&(rn(ve),An(ve.name||""),Or(ve.color_hex||null),vs(ve.color_hex||"#2D4660"))};return i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:I.background,color:I.text,borderColor:I.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{H&&ne!=="stakeholder"&&Gn&&os($e)},onMouseLeave:()=>os(null),onClick:ne!=="stakeholder"&&Gn?Ce:void 0,children:[i.jsx(Ix,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:P}),H&&Xt===$e&&ne!=="stakeholder"&&Gn&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Kh,{className:"h-4 w-4",style:{color:I.text}})})]})},we=(P,I,H,ue,$e,Ce,pe,ve=!0,ft)=>i.jsxs(i.Fragment,{children:[ve&&fe(I,H,ft),i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"w-full px-6 py-2 rounded-t-md border-b border-gray-200",style:{backgroundColor:H.background,color:H.text},children:i.jsx("h3",{className:"text-lg font-semibold",children:P.title})}),i.jsxs("div",{className:"flex flex-col flex-1",style:{padding:"15px"},children:[(()=>{const At=Nt=>{if(!Nt||nn(Nt))return 0;const De=new Date(Nt),bt=new Date;bt.setHours(0,0,0,0),De.setHours(0,0,0,0);const Ge=De.getTime()-bt.getTime();return Math.ceil(Ge/(1e3*60*60*24))};let at="Cast your Votes",Ft=!1;if(ue.text==="Upcoming"){const Nt=At(P.start_date);at=`Cast your Vote in ${Nt} ${Nt===1?"day":"days"}`,Ft=!0}else ue.text==="Closed"||ue.text==="Draft"?(at="Voting Session Closed",Ft=!0):ue.text==="Active"?(at="Cast your Votes",Ft=!1):(at="Voting Session Closed",Ft=!0);return i.jsxs("button",{onClick:Nt=>{Nt.stopPropagation(),Ft||cs(P)},disabled:Ft,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mb-4 ${Ft?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:Ft?{cursor:"not-allowed"}:{},children:[i.jsx(Zn,{className:`h-4 w-4 mr-2 ${Ft?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${Ft?"text-gray-500":"text-[#1E6154]"}`,children:at})]})})(),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:P.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:"h-4 w-4 mr-2"}),nn(P.start_date)||nn(P.end_date)?i.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("span",{children:[zr(P.start_date)," - ",zr(P.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${ue.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ue.color}`,children:[i.jsx($e,{className:`${ue.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ue.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[P.id]||0," ",S[P.id]===1?"feature":"features"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:I})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Zn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"break-words",children:Ce.displayText}),Ce.isAuto&&i.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[i.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ce.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),ue.text!=="Upcoming"&&ue.text!=="Draft"&&i.jsxs("button",{onClick:At=>Bs(At,P),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[i.jsx(Ah,{className:"h-3 w-3 mr-1"}),ue.text==="Closed"?"Final Results":"Current Results"]})]})]}),ne!=="stakeholder"&&i.jsxs("div",{className:"flex items-center justify-center min-h-[48px] border-t border-gray-200 text-sm text-gray-600",children:[i.jsxs("button",{onClick:At=>{At.stopPropagation(),Ma(At,P)},className:"flex items-center mr-3 text-[#2D4660] hover:text-[#1D3144] hover:underline cursor-pointer",children:[i.jsx(Yr,{className:"h-4 w-4 mr-1.5"}),T[P.id]!==void 0?T[P.id]:0," Session Admin",T[P.id]!==1?"s":""]}),i.jsx("span",{className:"text-gray-400",children:""}),i.jsxs("button",{onClick:At=>{At.stopPropagation(),Ji(At,P)},className:"flex items-center ml-3 text-[#1E5461] hover:text-[#576C71] hover:underline cursor-pointer",children:[i.jsx(Mn,{className:"h-4 w-4 mr-1.5"}),D[P.id]!==void 0?D[P.id]:0," Stakeholder",D[P.id]!==1?"s":""]})]})]}),i.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const At=Gi(P),at=pe||At;return i.jsxs("div",{className:`relative inline-block w-full ${at?"group":""}`,children:[i.jsxs("button",{onClick:Ft=>sn(Ft,P),disabled:at,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${at?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:at?{cursor:"not-allowed"}:{},children:[i.jsx(du,{className:`h-4 w-4 mr-2 ${at?"text-gray-500":"text-blue-600"}`}),i.jsx("span",{className:`text-sm font-medium ${at?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),at&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[At?"Draft Session":"Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]})]});return s||m||u&&!e?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>a("/sessions")}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,R&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx($n,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!R&&wr.length>0&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]}),!R&&wr.length===0&&Xi.length>0&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(ms,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder"]})]})]})]}),i.jsxs("div",{ref:W,className:"relative z-40 md:justify-end",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[R&&(ne==="admin"||ne==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>a("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(R||wr.length>0)&&(ne==="admin"||ne==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{Mt(),Yt(!1),X(!0),K(""),te(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[i.jsx(yn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),i.jsx("span",{className:"sm:hidden",children:"Create"})]})}),i.jsxs("button",{onClick:ws,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden justify-end",children:i.jsx("button",{onClick:()=>de(!q),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),q&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[R&&(ne==="admin"||ne==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{de(!1),a("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(R||wr.length>0)&&(ne==="admin"||ne==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{Mt(),de(!1),X(!0),te(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(yn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),i.jsxs("button",{onClick:()=>{de(!1),ws()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),x.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[i.jsx(Zn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),R&&i.jsxs("button",{onClick:()=>{Mt(),X(!0),te(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(yn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):i.jsxs("div",{className:"space-y-8",children:[ne==="stakeholder"&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(Zn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const P=_i.filter(pe=>{const ve=Cr(pe,G);return ve&&ve!=="No Product"&&ve.trim()!==""}),I=_i.filter(pe=>{const ve=Cr(pe,G);return!ve||ve==="No Product"||ve.trim()===""}),H=$(P,G),ue=[],$e=[],Ce=[];return Object.entries(H).forEach(([pe,ve])=>{ve.length>=2?ue.push({key:pe,sessions:ve}):ve.length===1?$e.push({key:pe,sessions:ve}):Ce.push(...ve)}),i.jsxs("div",{className:"space-y-8",children:[ue.map(({key:pe,sessions:ve})=>{var ot,Lt;const ft=Ze.has(pe),At=ft?ve:ve.slice(0,3),at=ve.length>3?ve.length-3:0,Ft=Cr(ve[0],G),Nt=(ot=ve[0])!=null&&ot.product_id?ae[ve[0].product_id]:void 0,De=Wr(Ft,Nt),bt=(rt,It)=>{const yt=rt.replace("#",""),Zt=parseInt(yt.substring(0,2),16),Kr=parseInt(yt.substring(2,4),16),mn=parseInt(yt.substring(4,6),16);return`rgba(${Zt}, ${Kr}, ${mn}, ${It})`},Ge=De.background?bt(De.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ge,borderColor:De.border||"#E5E7EB",padding:"24px",marginTop:ne==="stakeholder"?"25px":void 0},children:[fe(Ft,De,(Lt=ve[0])==null?void 0:Lt.product_id,pe),at>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ge(pe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ft?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ts,{className:"h-4 w-4"})]})})}),Gn&&ne!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:rt=>{var mn;rt.stopPropagation();const It=(mn=ve[0])==null?void 0:mn.product_id,yt=Cr(ve[0],G);It&&K(It),yt&&yt!=="No Product"&&Wt(yt);let Zt=ve.length>0?nr(ve[0].end_date):new Date;ve.forEach(Ws=>{const js=nr(Ws.end_date);js>Zt&&(Zt=js)});const Kr=yr(Zt,1);yr(Kr,14),Mt(),K(It),Yt(!0),X(!1),dr(!0),te(!0)},onMouseEnter:()=>tr(pe),onMouseLeave:()=>tr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},title:`Create new session for ${Ft}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:At.map((rt,It)=>{const yt=As(rt),Zt=yt.text==="Closed",Kr=yt.icon,mn=Kn(rt),Ws=E[rt.id],js=Cr(rt,G),$p=rt.product_id?ae[rt.product_id]:void 0,Rp=Wr(js,$p);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Rp.border,borderWidth:"1px",opacity:Zt&&Mr!==rt.id?.75:1},onMouseEnter:()=>gr(rt.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(rt),children:i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Ws?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):yt.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(ir,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:rt.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:rt.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[zr(rt.start_date)," - ",zr(rt.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${yt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${yt.color}`,children:[i.jsx(Kr,{className:`${yt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),yt.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[rt.id]||0," ",S[rt.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:js})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:mn.displayText}),mn.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[mn.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:Mp=>{Mp.stopPropagation(),Zt||Zr(rt)},disabled:Zt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Zt?"bg-gray-100 text-gray-500 cursor-not-allowed":Ws?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Zt?{cursor:"not-allowed"}:{},children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),Ws?"View or Change Votes":"Cast Your Votes"]})})]})},rt.id)})}),at>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ge(pe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ft?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ts,{className:"h-4 w-4"})]})})})]})},pe)}),$e.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:ne==="stakeholder"?"30px":"50px"},children:$e.map(({key:pe,sessions:ve})=>{var De,bt;const ft=Cr(ve[0],G),At=(De=ve[0])!=null&&De.product_id?ae[ve[0].product_id]:void 0,at=Wr(ft,At),Ft=(Ge,ot)=>{const Lt=Ge.replace("#",""),rt=parseInt(Lt.substring(0,2),16),It=parseInt(Lt.substring(2,4),16),yt=parseInt(Lt.substring(4,6),16);return`rgba(${rt}, ${It}, ${yt}, ${ot})`},Nt=at.background?Ft(at.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Nt,borderColor:at.border||"#E5E7EB",padding:"24px",marginTop:ne==="stakeholder"?"25px":void 0},children:[fe(ft,at,(bt=ve[0])==null?void 0:bt.product_id,pe),Gn&&ne!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{var yt;Ge.stopPropagation();const ot=(yt=ve[0])==null?void 0:yt.product_id,Lt=Cr(ve[0],G);ot&&K(ot),Lt&&Lt!=="No Product"&&Wt(Lt);let rt=nr(ve[0].end_date);const It=yr(rt,1);yr(It,14),Mt(),K(ot),Yt(!0),X(!1),dr(!0),te(!0)},onMouseEnter:()=>tr(pe),onMouseLeave:()=>tr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:at.background||"#C89212",color:at.text||"#FFFFFF"},title:`Create new session for ${ft}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),ve.map(Ge=>{const ot=As(Ge),Lt=ot.text==="Closed",rt=ot.icon,It=Kn(Ge);E[Ge.id];const yt=Cr(Ge,G),Zt=Ge.product_id?ae[Ge.product_id]:void 0,Kr=Wr(yt,Zt);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Kr.border,borderWidth:"1px",opacity:Lt&&Mr!==Ge.id?.75:1},onMouseEnter:()=>gr(Ge.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(Ge),children:we(Ge,yt,Kr,ot,rt,It,Lt,!1,Ge.product_id)},Ge.id)})]})},pe)})}),(Ce.length>0||I.length>0)&&i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Ce,...I].map(pe=>{const ve=As(pe),ft=ve.text==="Closed",At=ve.icon,at=Kn(pe),Ft=E[pe.id],Nt=Cr(pe,G),De=pe.product_id?ae[pe.product_id]:void 0,bt=Wr(Nt,De),Ge=Ce.includes(pe);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:bt.border,borderWidth:"1px",opacity:ft&&Mr!==pe.id?.75:1},onMouseEnter:()=>gr(pe.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(pe),children:[fe(Nt,bt,pe.product_id),Ge&&Gn&&ne!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:ot=>{ot.stopPropagation();const Lt=pe.product_id,rt=Cr(pe,G);Lt&&K(Lt),rt&&rt!=="No Product"&&Wt(rt);const It=nr(pe.end_date),yt=yr(It,1);yr(yt,14),Mt(),K(Lt),Yt(!0),X(!1),dr(!0),te(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:bt.background||"#C89212",color:bt.text||"#FFFFFF"},onMouseEnter:ot=>{const Lt=bt.background||"#C89212";ot.currentTarget.style.backgroundColor=Lt,ot.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:ot=>{ot.currentTarget.style.backgroundColor=bt.background||"#C89212",ot.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Nt}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Ft?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):ve.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(ir,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:pe.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:pe.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[zr(pe.start_date)," - ",zr(pe.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${ve.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ve.color}`,children:[i.jsx(At,{className:`${ve.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ve.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[pe.id]||0," ",S[pe.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Nt})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:at.displayText}),at.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[at.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:ot=>{ot.stopPropagation(),ft||Zr(pe)},disabled:ft,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ft?"bg-gray-100 text-gray-500 cursor-not-allowed":Ft?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ft?{cursor:"not-allowed"}:{},children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),Ft?"View or Change Votes":"Cast Your Votes"]})})]})]},pe.id)})})]})})()]}),(ne==="admin"||ne==="system-admin")&&i.jsxs(i.Fragment,{children:[ne==="admin"&&k.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(Zn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:k.map(P=>{const I=As(P),H=I.text==="Closed",ue=I.icon,$e=Kn(P),Ce=E[P.id],pe=Cr(P,G),ve=P.product_id?ae[P.product_id]:void 0,ft=Wr(pe,ve);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:ft.border,borderWidth:"1px",opacity:H&&Mr!==P.id?.75:1},onMouseEnter:()=>gr(P.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(P),children:[i.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:ft.background,color:ft.text,borderColor:ft.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[i.jsx(Ix,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis",children:pe})]}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Ce?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):I.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(ir,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:P.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:P.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(on,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[zr(P.start_date)," - ",zr(P.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${I.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${I.color}`,children:[i.jsx(ue,{className:`${I.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),I.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[P.id]||0," ",S[P.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:pe})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:$e.displayText}),$e.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[$e.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:At=>{At.stopPropagation(),H||Zr(P)},disabled:H,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${H?"bg-gray-100 text-gray-500 cursor-not-allowed":Ce?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:H?{cursor:"not-allowed"}:{},children:[i.jsx(Zn,{className:"h-4 w-4 mr-2"}),Ce?"View or Change Votes":"Cast Your Votes"]})})]})]},P.id)})})]}),U.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[i.jsx(rs,{className:"h-5 w-5 mr-2"}),Ni?"All Sessions (System Admin)":"Sessions You Manage"]}),Ni&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",U.length," total sessions across the organization."]})]}),(()=>{const P=U.filter(pe=>{const ve=Cr(pe,G);return ve&&ve!=="No Product"&&ve.trim()!==""}),I=U.filter(pe=>{const ve=Cr(pe,G);return!ve||ve==="No Product"||ve.trim()===""}),H=$(P,G),ue=[],$e=[],Ce=[];return Object.entries(H).forEach(([pe,ve])=>{ve.length>=2?ue.push({key:pe,sessions:ve}):ve.length===1?$e.push({key:pe,sessions:ve}):Ce.push(...ve)}),i.jsxs("div",{className:"space-y-8",children:[ue.map(({key:pe,sessions:ve})=>{var ot,Lt;const ft=Ze.has(pe),At=ft?ve:ve.slice(0,3),at=ve.length>3?ve.length-3:0,Ft=Cr(ve[0],G),Nt=(ot=ve[0])!=null&&ot.product_id?ae[ve[0].product_id]:void 0,De=Wr(Ft,Nt),bt=(rt,It)=>{const yt=rt.replace("#",""),Zt=parseInt(yt.substring(0,2),16),Kr=parseInt(yt.substring(2,4),16),mn=parseInt(yt.substring(4,6),16);return`rgba(${Zt}, ${Kr}, ${mn}, ${It})`},Ge=De.background?bt(De.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ge,borderColor:De.border||"#E5E7EB",padding:"24px"},children:[fe(Ft,De,(Lt=ve[0])==null?void 0:Lt.product_id,pe),at>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ge(pe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ft?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ts,{className:"h-4 w-4"})]})})}),(R||ne==="admin"||ne==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:rt=>{var mn;rt.stopPropagation();const It=(mn=ve[0])==null?void 0:mn.product_id,yt=Cr(ve[0],G);It&&K(It),yt&&yt!=="No Product"&&Wt(yt);let Zt=ve.length>0?nr(ve[0].end_date):new Date;ve.forEach(Ws=>{const js=nr(Ws.end_date);js>Zt&&(Zt=js)});const Kr=yr(Zt,1);yr(Kr,14),Mt(),K(It),Yt(!0),X(!1),dr(!0),te(!0)},onMouseEnter:()=>tr(pe),onMouseLeave:()=>tr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},title:`Create new session for ${Ft}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[At.map(rt=>{const It=As(rt),yt=It.icon,Zt=Kn(rt),Kr=It.text==="Closed",mn=Cr(rt,G),Ws=rt.product_id?ae[rt.product_id]:void 0,js=Wr(mn,Ws);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:js.border,borderWidth:"1px",opacity:Kr&&Mr!==rt.id?.75:1},onMouseEnter:()=>gr(rt.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(rt),children:we(rt,mn,js,It,yt,Zt,Kr,!1,rt.product_id)},rt.id)}),ve.length===2&&i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),i.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:De.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>Wn(pe),onMouseLeave:()=>Wn(null),onClick:rt=>{var mn;rt.stopPropagation();const It=(mn=ve[0])==null?void 0:mn.product_id,yt=Cr(ve[0],G);It&&K(It),yt&&yt!=="No Product"&&Wt(yt);let Zt=ve.length>0?nr(ve[0].end_date):new Date;ve.forEach(Ws=>{const js=nr(Ws.end_date);js>Zt&&(Zt=js)});const Kr=yr(Zt,1);yr(Kr,14),Mt(),K(It),Yt(!0),X(!1),dr(!0),te(!0)},children:i.jsxs("div",{className:"flex flex-col h-full items-center justify-center relative rounded-lg transition-all duration-300",style:{padding:"15px",backgroundColor:"transparent",backgroundImage:Gt===pe||rr===pe?`radial-gradient(circle at center, ${De.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Gt===pe||rr===pe)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),i.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),i.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),i.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),i.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),i.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),i.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),i.jsx(Oc,{className:"absolute top-6 left-12",size:8,style:{color:De.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),i.jsx(Oc,{className:"absolute top-9 right-12",size:6,style:{color:De.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),i.jsx(Oc,{className:"absolute bottom-9 left-6",size:7,style:{color:De.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),i.jsx(Oc,{className:"absolute bottom-5 right-12",size:5,style:{color:De.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx(Oc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:De.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),i.jsx(Oc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:De.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),i.jsx(Pc,{className:"absolute top-2 left-6",size:6,style:{color:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),i.jsx(Pc,{className:"absolute top-11 right-6",size:5,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),i.jsx(Pc,{className:"absolute bottom-10 left-10",size:7,style:{color:De.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),i.jsx(Pc,{className:"absolute bottom-2 right-8",size:6,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),i.jsx(Pc,{className:"absolute top-1/2 left-2",size:5,style:{color:De.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),i.jsx(Pc,{className:"absolute top-1/2 right-2",size:6,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),i.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Gt===pe||rr===pe?1:0,transformOrigin:"center center",animation:Gt===pe||rr===pe?"growFromCenter 0.3s ease-out forwards":"none"},children:[i.jsx(yn,{className:"h-8 w-8",style:{color:De.background||"#C89212"}}),i.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:De.background||"#C89212"},children:[i.jsx("span",{children:"Create"}),i.jsx("span",{children:"New Session"})]})]})]})})]})]}),at>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ge(pe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ft?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ts,{className:"h-4 w-4"})]})})})]})},pe)}),$e.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:"50px"},children:$e.map(({key:pe,sessions:ve})=>{var De,bt;const ft=Cr(ve[0],G),At=(De=ve[0])!=null&&De.product_id?ae[ve[0].product_id]:void 0,at=Wr(ft,At),Ft=(Ge,ot)=>{const Lt=Ge.replace("#",""),rt=parseInt(Lt.substring(0,2),16),It=parseInt(Lt.substring(2,4),16),yt=parseInt(Lt.substring(4,6),16);return`rgba(${rt}, ${It}, ${yt}, ${ot})`},Nt=at.background?Ft(at.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Nt,borderColor:at.border||"#E5E7EB",padding:"24px"},children:[fe(ft,at,(bt=ve[0])==null?void 0:bt.product_id,pe),(R||ne==="admin"||ne==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{var yt;Ge.stopPropagation();const ot=(yt=ve[0])==null?void 0:yt.product_id,Lt=Cr(ve[0],G);ot&&K(ot),Lt&&Lt!=="No Product"&&Wt(Lt);let rt=nr(ve[0].end_date);const It=yr(rt,1);yr(It,14),Mt(),K(ot),Yt(!0),X(!1),dr(!0),te(!0)},onMouseEnter:()=>tr(pe),onMouseLeave:()=>tr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:at.background||"#C89212",color:at.text||"#FFFFFF"},title:`Create new session for ${ft}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),ve.map(Ge=>{const ot=As(Ge),Lt=ot.text==="Closed",rt=ot.icon,It=Kn(Ge);E[Ge.id];const yt=Cr(Ge,G),Zt=Ge.product_id?ae[Ge.product_id]:void 0,Kr=Wr(yt,Zt);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Kr.border,borderWidth:"1px",opacity:Lt&&Mr!==Ge.id?.75:1},onMouseEnter:()=>gr(Ge.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(Ge),children:we(Ge,yt,Kr,ot,rt,It,Lt,!1,Ge.product_id)},Ge.id)})]})},pe)})}),(Ce.length>0||I.length>0)&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Ce,...I].map(pe=>{const ve=As(pe),ft=ve.icon,At=Kn(pe),at=ve.text==="Closed",Ft=Cr(pe,G),Nt=pe.product_id?ae[pe.product_id]:void 0,De=Wr(Ft,Nt),bt=Ce.includes(pe);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:De.border,borderWidth:"1px",opacity:at&&Mr!==pe.id?.75:1},onMouseEnter:()=>gr(pe.id),onMouseLeave:()=>gr(null),onClick:()=>Zr(pe),children:[bt&&(R||ne==="admin"||ne==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{Ge.stopPropagation();const ot=pe.product_id,Lt=Cr(pe,G);ot&&K(ot),Lt&&Lt!=="No Product"&&Wt(Lt);const rt=nr(pe.end_date),It=yr(rt,1);yr(It,14),Mt(),K(ot),Yt(!0),X(!1),dr(!0),te(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},onMouseEnter:Ge=>{const ot=De.background||"#C89212";Ge.currentTarget.style.backgroundColor=ot,Ge.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Ge=>{Ge.currentTarget.style.backgroundColor=De.background||"#C89212",Ge.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Ft}`,children:i.jsx(yn,{className:"h-5 w-5"})})}),we(pe,Ft,De,ve,ft,At,at,!0,pe.product_id)]},pe.id)}),U.length===2&&Ce.length+I.length>0&&i.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow border border-gray-200",children:i.jsx("div",{className:"flex flex-col h-full items-end justify-center",style:{padding:"15px"},children:i.jsxs("button",{onClick:()=>{X(!0),te(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[i.jsx(yn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),i.jsx(xn,{isOpen:oe,onClose:hn,title:"Create Voting Session",maxWidth:"max-w-3xl",children:i.jsxs("form",{onSubmit:bs,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!ut&&!He?Rr&&ce?i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const P=F.find($e=>$e.id===ce),I=(P==null?void 0:P.name)||G[ce]||"Unknown Product",H=(P==null?void 0:P.color_hex)||ae[ce],ue=Wr(I,H);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:ue.background||"#2D4660",borderColor:ue.border||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:I})]})})()}):i.jsx("div",{className:"space-y-3",style:{marginTop:0},children:i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(jZ,{label:"",products:F,value:ce,onChange:async P=>{if(K(P),P){Ae("");try{const I=x.filter(H=>H.product_id===P);if(I.length>0){let H=nr(I[0].end_date);I.forEach(Ce=>{const pe=nr(Ce.end_date);pe>H&&(H=pe)});const ue=yr(H,1),$e=yr(ue,14);xe(Ce=>({...Ce,startDate:Qr(ue),endDate:Qr($e)}))}else{const H=new Date,ue=yr(H,14);xe($e=>({...$e,startDate:Qr(H),endDate:Qr(ue)}))}}catch(I){console.error("Error calculating dates for selected product:",I);const H=new Date,ue=yr(H,14);xe($e=>({...$e,startDate:Qr(H),endDate:Qr(ue)}))}}Fe.product&&Se(I=>{const H={...I};return delete H.product,H})},isLoading:V,error:_e,disabled:V||F.length===0||sr,placeholder:"Select a product",helperText:!V&&F.length===0&&!_e&&M?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:M,onRequestDeleteProduct:M?(P=>{it(P)}):void 0,className:"w-full"})}),M&&i.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[i.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),i.jsxs("button",{type:"button",onClick:()=>Dt(!0),disabled:V,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(yn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):He?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{et(null),Ae(He.name),St(He.color),Dt(!0),gt(!0),Le(!1)},children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:He.color||"#2D4660",borderColor:He.color||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:He.name}),i.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):M&&ut?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[i.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),i.jsx("input",{type:"text",value:Ye,onChange:P=>{Ae(P.target.value),P.target.value.trim()&&!Ve&&setTimeout(()=>gt(!0),200),_e&&Te(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),Ve&&i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[i.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),i.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),i.jsx("button",{type:"button",onClick:()=>{ar(tt||"#2D4660"),ct(!0),setTimeout(()=>{var P;(P=document.getElementById("native-color-input"))==null||P.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:tt?{backgroundColor:tt}:{backgroundColor:"#ffffff"},children:!tt&&i.jsx("img",{src:XT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,Fe.product&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.product]}),_e&&(ut||!!He)&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),_e]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),i.jsx("input",{ref:Er,type:"text",name:"title",value:me.title,onChange:ni,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Fe.title?"border-red-500":"border-gray-300"}`}),Fe.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:me.goal,onChange:ni,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Fe.goal?"border-red-500":"border-gray-300"}`}),Fe.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.goal]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("button",{type:"button",onClick:()=>xe(P=>({...P,useAutoVotes:!P.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:me.useAutoVotes?i.jsx(Nd,{className:"w-5 h-5 text-green-600"}):i.jsx(_d,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("label",{onClick:()=>xe(P=>({...P,useAutoVotes:!P.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",i.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!me.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:me.votesPerUser,onChange:ni,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Fe.votesPerUser?"border-red-500":"border-gray-300"}`}),Fe.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:me.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),i.jsx("input",{type:"date",name:"startDate",value:me.startDate||"",onChange:ni,onFocus:P=>{me.startDate||dn("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Fe.startDate?"border-red-500":"border-gray-300"}`,style:me.startDate?{}:{color:"transparent"},onBlur:P=>{P.target.value?P.target.style.color="":P.target.style.color="transparent"}}),Fe.startDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.startDate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),i.jsx("input",{type:"date",name:"endDate",value:me.endDate||"",onChange:ni,onFocus:P=>{me.endDate||dn("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Fe.endDate?"border-red-500":"border-gray-300"}`,style:me.endDate?{}:{color:"transparent",position:"relative"},onBlur:P=>{P.target.value?P.target.style.color="":P.target.style.color="transparent"}}),Fe.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),Fe.endDate]})]})]}),(me.startDate||me.endDate)&&i.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("div",{}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{xe(P=>({...P,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),Fe.submit&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-2"}),Fe.submit]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(wt,{type:"button",variant:"secondary",onClick:Ki,disabled:Re||!sr&&!ce&&!(ut&&Ye.trim()&&tt)&&!He,children:Re?"Saving...":"Save Draft"}),i.jsx(wt,{type:"submit",variant:ut&&Ye.trim()&&tt?"gold":"primary",disabled:Re||!sr&&!ce&&!(ut&&Ye.trim()&&tt)&&!He,className:`transition-all duration-500 ease-in-out ${ut&&Ye.trim()&&tt?"relative overflow-hidden":""}`,children:Re?"Creating...":ut&&Ye.trim()&&tt?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"relative z-10 flex items-center",children:[i.jsx(yn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),i.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),vt&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>ct(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:P=>P.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:Ht,onChange:P=>ar(P.target.value),ref:P=>{P&&vt&&setTimeout(()=>P.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{St(Ht),ct(!1),setTimeout(()=>{var P;(P=Er.current)==null||P.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Ht,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),ne==="stakeholder"&&x.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Zn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),ne==="admin"&&k.length>0&&U.length===0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Zn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),ne==="admin"&&U.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Mn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),i.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),ne==="system-admin"&&i.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Yr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-purple-900",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),i.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),i.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),i.jsx(QT,{currentRole:R&&ne==="system-admin"?"system-admin":ne==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>ie("stakeholder"),onSelectSessionAdmin:()=>ie("admin"),onSelectSystemAdmin:R?()=>ie("system-admin"):void 0,showRoleToggle:Gn||R}),i.jsxs(xn,{isOpen:xr,onClose:()=>{Ut||Ts()},title:lr?(()=>{const P=Cr(lr,G);return P?`${P}  ${lr.title}`:`Email Stakeholders  ${lr.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[i.jsxs("div",{className:"space-y-6",children:[Ke&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Ke}),Rt?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Ar.length,")"]}),Ar.length>0&&i.jsx("button",{type:"button",onClick:jo,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:Si?"Deselect All":"Select All"})]}),i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Ar.length===0?i.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Ar.map(P=>{const I=P.user_email.toLowerCase(),H=or.includes(I);return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>ki(P.user_email),children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.user_name||"Unnamed Stakeholder"}),i.jsx("p",{className:"text-xs text-gray-500",children:P.user_email})]}),i.jsx("button",{type:"button",onClick:ue=>{ue.stopPropagation(),ki(P.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:H?i.jsx(Nd,{className:"w-5 h-5 text-green-600"}):i.jsx(_d,{className:"w-5 h-5 text-gray-400"})})]},P.id)})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",value:Pe,onChange:P=>Ue(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),i.jsx("textarea",{value:We,onChange:P=>Je(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),i.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[i.jsx(wt,{variant:"secondary",onClick:Ts,disabled:Ut,children:"Cancel"}),i.jsx(wt,{variant:"primary",onClick:il,disabled:Ut||Ar.length===0||or.length===0,children:Ut?"Sending...":`Send to ${or.length} Stakeholder${or.length===1?"":"s"}`})]})]}),i.jsx(xn,{isOpen:!!br,onClose:zs,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:i.jsxs("div",{className:"py-6 px-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(br==null?void 0:br.count)??0," stakeholder",(br==null?void 0:br.count)===1?"":"s"," for"," ",i.jsx("span",{className:"font-semibold text-gray-900",children:br==null?void 0:br.sessionTitle}),"."]})]}),(br==null?void 0:br.stakeholders)&&br.stakeholders.length>0&&i.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:br.stakeholders.map((P,I)=>i.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.name}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.email})]}),i.jsx(kr,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},I))})]})]})}),pt&&i.jsxs(xn,{isOpen:!0,onClose:()=>it(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:pt.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(wt,{variant:"secondary",onClick:()=>it(null),disabled:er,children:"Cancel"}),i.jsx(wt,{variant:"danger",onClick:Hi,disabled:er,children:er?"Deleting":"Delete"})]})]}),fr&&i.jsx(xn,{isOpen:!0,onClose:()=>{rn(null),An(""),Or(null),cn(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Fr,onChange:P=>An(P.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{vs(jr||"#2D4660"),cn(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:jr?{backgroundColor:jr}:{backgroundColor:"#ffffff"},children:!jr&&i.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:jr||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(wt,{variant:"secondary",onClick:()=>{rn(null),An(""),Or(null),cn(!1)},disabled:Vn,children:"Cancel"}),i.jsx(wt,{variant:"primary",onClick:async()=>{if(!(!(fr!=null&&fr.id)||!Fr.trim())){qn(!0);try{await NE(fr.id,{name:Fr.trim(),color_hex:jr});const P=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(P){const I=await Ga(P);le(I.sort(($e,Ce)=>$e.name.localeCompare(Ce.name)));const H={},ue={};I.forEach($e=>{H[$e.id]=$e.name||"",$e.color_hex&&(ue[$e.id]=$e.color_hex)}),Q(H),ee(ue)}rn(null),An(""),Or(null),cn(!1),await r(),await si()}catch(P){console.error("Error updating product:",P),alert("Failed to update product. Please try again.")}finally{qn(!1)}}},disabled:Vn||!Fr.trim(),children:Vn?"Updating...":"Update Product"})]})]})}),Vi&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>cn(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:P=>P.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:xs,onChange:P=>vs(P.target.value),ref:P=>{P&&Vi&&setTimeout(()=>P.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Or(xs),cn(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:xs,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}function HZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Ia(),s=ti(),a=async()=>{try{await Ee.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=g.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=g.useState({}),[f,p]=g.useState(!1),[x,v]=g.useState(!1),[j,w]=g.useState([]),[S,_]=g.useState(""),[E,C]=g.useState(""),[T,A]=g.useState(!1),[D,L]=g.useState(!1),[R,J]=g.useState(null),[ne,ie]=g.useState(!1),[q,de]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!e)return;const te=await Ui(e.id);ie(te);const{data:M}=await Ee.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);de(M&&M.length>0)})()},[e]),g.useEffect(()=>{(async()=>{var M;if(!e){w([]),_("");return}const te=e.tenant_id??e.tenantId??null;if(!te){w([]),_(""),J("No tenant assigned. Products cannot be loaded.");return}A(!0),J(null);try{const X=await Ga(te);w(X),_(((M=X[0])==null?void 0:M.id)??"")}catch(X){console.error("Error loading products for create session:",X),eo!=null&&eo(X)?J("Products are not configured yet. Please create the `products` table in Supabase."):J("Unable to load products. You can still create a session without a product tag."),w([]),_("")}finally{A(!1)}})()},[e]);const W=()=>{const oe="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let te="";for(let M=0;M<8;M++)te+=oe.charAt(Math.floor(Math.random()*oe.length));return te},G=()=>{const oe={};l.title.trim()||(oe.title="Session title is required"),l.goal.trim()||(oe.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(oe.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(oe.votesPerUser="Votes per user cannot exceed 100"));const te=new Date(l.startDate);return new Date(l.endDate)<=te&&(oe.endDate="End date must be after start date"),!R&&j.length>0&&!S&&(oe.product="Please select a product for this session"),m(oe),Object.keys(oe).length===0},Q=async oe=>{if(oe.preventDefault(),!(!G()||!e)){p(!0);try{const te=W(),M=j.find(me=>me.id===S)||null;if(M!=null&&M.id&&await EE(M.id)){m({submit:`There is already an active session for ${M.name}. Each product can only have one active session at a time.`}),p(!1);return}const X=await jx({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:te,product_id:(M==null?void 0:M.id)??null,product_name:null});await Il(X.id,e.id),await r(),v(!0),setTimeout(()=>{t(X),s("/admin")},3e3)}catch(te){console.error("Error creating session:",te),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},ae=async()=>{if(!e)return;const oe=e.tenant_id??e.tenantId??null;if(!oe){J("Cannot create products because no tenant is associated with your account.");return}const te=E.trim();if(!te){J("Product name is required.");return}L(!0),J(null);try{const M=await wx(oe,te);w(X=>[...X,M].sort((xe,Fe)=>xe.name.localeCompare(Fe.name))),_(M.id),C("")}catch(M){console.error("Error creating product:",M),J(M instanceof Error?M.message:"Unable to create product. Please try again.")}finally{L(!1)}},ee=oe=>{const{name:te,value:M}=oe.target;u(X=>({...X,[te]:te==="votesPerUser"?parseInt(M)||0:M})),d[te]&&m(X=>{const me={...X};return delete me[te],me})};return x?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),i.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Jm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,ne&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!ne&&q&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),i.jsx("input",{type:"text",name:"title",value:l.title,onChange:ee,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),d.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:l.goal,onChange:ee,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),d.goal]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),T?i.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):j.length>0?i.jsxs("select",{value:S,onChange:oe=>{_(oe.target.value),d.product&&m(te=>{const M={...te};return delete M.product,M})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[i.jsx("option",{value:"",children:"Select a product"}),j.map(oe=>i.jsx("option",{value:oe.id,children:oe.name},oe.id))]}):i.jsx("p",{className:"text-sm text-gray-500",children:R??"No products found. Add a product below to associate this session."}),d.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),d.product]}),R&&j.length>0&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:R}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"text",value:E,onChange:oe=>{C(oe.target.value),R&&J(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),i.jsx("button",{type:"button",onClick:ae,disabled:D,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Adding...":"Add Product"})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(Zn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:oe=>u(te=>({...te,useAutoVotes:oe.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),i.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:ee,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(on,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),i.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:ee,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(on,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),i.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:ee,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Mn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),i.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),i.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-2"}),d.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[i.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function KZ({products:e,value:t,onChange:r,label:n,error:s}){const[a,l]=g.useState(!1),u=g.useRef(null);g.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Wr(d.name,d.color_hex??null):null;return i.jsxs("div",{ref:u,className:"relative",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>l(!a),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),i.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${a?"transform rotate-180":""}`})]}),a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Wr(f.name,f.color_hex??null),x=t===f.id;return i.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),x&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function GZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ia(),s=ti(),a=async()=>{try{await Ee.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=g.useState([]),[d,m]=g.useState(!0),[f,p]=g.useState(!1),[x,v]=g.useState({name:"",email:""}),[j,w]=g.useState({}),[S,_]=g.useState(!1),[E,C]=g.useState(!1),T=g.useRef(null),[A,D]=g.useState([]),[L,R]=g.useState(""),[J,ne]=g.useState([]),[ie,q]=g.useState([]),[de,W]=g.useState({}),[G,Q]=g.useState(!1),[ae,ee]=g.useState(!1);g.useEffect(()=>{if(!E)return;const ke=F=>{T.current&&!T.current.contains(F.target)&&C(!1)};return document.addEventListener("mousedown",ke),document.addEventListener("touchstart",ke,{passive:!0}),()=>{document.removeEventListener("mousedown",ke),document.removeEventListener("touchstart",ke)}},[E]),g.useEffect(()=>{if(!e){s("/sessions");return}M(),oe()},[e,s]),g.useEffect(()=>{(async()=>{if(!t)return;const F=await Ui(t.id);Q(F);const{data:le}=await Ee.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);ee(le&&le.length>0)})()},[t]);const oe=async()=>{try{const ke=await Uh(),F=await Go(),le=new Date,ce=ke.filter(Ye=>F.some(Ae=>Ae.product_id!==Ye.id?!1:new Date(Ae.end_date)>=le));D(ce);const K={};ce.forEach(Ye=>{K[Ye.id]=Ye.name}),W(K)}catch(ke){console.error("Error loading products:",ke)}},te=async ke=>{try{const F=await Go(),le=new Date,ce=F.filter(K=>K.product_id!==ke?!1:new Date(K.end_date)>=le);ne(ce)}catch(F){console.error("Error loading sessions:",F),ne([])}};g.useEffect(()=>{L?(te(L),q([])):(ne([]),q([]))},[L]);const M=async()=>{if(e){m(!0);try{const ke=await Bh(e.id);u(ke)}catch(ke){console.error("Error loading stakeholders:",ke)}finally{m(!1)}}},X=ke=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ke),me=ke=>{const F=new Date,le=new Date(ke.start_date),ce=new Date(ke.end_date);return ke.is_active&&F>=le&&F<=ce?{text:"Active",color:"text-green-600"}:F<le?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},xe=ke=>{const F=new Date(ke.start_date),le=new Date(ke.end_date),ce=F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),K=le.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ce} - ${K}`},Fe=async ke=>{ke.preventDefault();const F={};if(x.name.trim()||(F.name="Name is required"),x.email.trim()?X(x.email)||(F.email="Invalid email address"):F.email="Email is required",L||(F.product="Please select a product"),ie.length===0&&(F.sessions="Please select at least one session"),w(F),!(Object.keys(F).length>0)){_(!0);try{for(const le of ie)await OE({session_id:le,user_name:x.name,user_email:x.email,has_voted:!1});for(const le of ie){const ce=J.find(K=>K.id===le);if(ce)try{const K=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Ye=`${window.location.origin}${K}/login?session=${ce.session_code}`;await Yo({to:x.email,subject:`You're invited to vote: ${ce.title}`,text:`Hi,

You've been invited to vote in "${ce.title}".

Open: ${Ye}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${ce.title}</strong>.</p><p><a href="${Ye}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const K=TE(ce,x.email,(t==null?void 0:t.name)||"");window.location.href=K}catch{}}}await M(),v({name:"",email:""}),R(""),q([]),p(!1),w({})}catch(le){console.error("Error adding stakeholder:",le),w({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},Se=async ke=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await kx(e.id,ke),await M()}catch(F){console.error("Error removing stakeholder:",F),alert("Failed to remove stakeholder")}},Re=ke=>{const le=ke.split("T")[0].split(" ")[0].split("-");let ce;if(le.length===3){const K=parseInt(le[0],10),Ye=parseInt(le[1],10)-1,Ae=parseInt(le[2],10);ce=new Date(K,Ye,Ae);const tt=ke.match(/T(\d{2}):(\d{2}):(\d{2})/);tt&&ce.setHours(parseInt(tt[1],10),parseInt(tt[2],10),parseInt(tt[3],10))}else ce=new Date(ke);return ce.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Jm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,G&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!G&&ae&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:T,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx($l,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx($l,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(ms,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),i.jsx("div",{className:"mt-6",children:i.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[i.jsx($l,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(ke=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ms,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:ke.user_name})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),ke.user_email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ke.has_voted?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[i.jsx(Xm,{className:"h-3 w-3 mr-1"}),"Pending"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Re(ke.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>Se(ke.user_email),className:"text-red-600 hover:text-red-900",children:i.jsx(ha,{className:"h-5 w-5"})})})]},ke.id))})]})})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),i.jsx("button",{onClick:()=>{p(!1),v({name:"",email:""}),R(""),q([]),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",value:x.name,onChange:ke=>v(F=>({...F,name:ke.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),j.name&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),j.name]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),i.jsx("input",{type:"email",value:x.email,onChange:ke=>v(F=>({...F,email:ke.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),j.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),j.email]})]}),i.jsxs("div",{children:[i.jsx(KZ,{products:A,value:L,onChange:R,label:"Product *",error:!!j.product}),j.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),j.product]})]}),L&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),J.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:J.map(ke=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:ie.includes(ke.id),onChange:F=>{F.target.checked?q(le=>[...le,ke.id]):q(le=>le.filter(ce=>ce!==ke.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:ke.title}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:xe(ke)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${me(ke).color}`,children:me(ke).text})})]})]},ke.id))}),j.sessions&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),j.sessions]})]}),j.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-2"}),j.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),v({name:"",email:""}),R(""),q([]),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function YZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ia(),s=ti(),a=async()=>{try{await Ee.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=g.useState([]),[d,m]=g.useState(!0),[f,p]=g.useState(!1),[x,v]=g.useState({email:""}),[j,w]=g.useState({}),[S,_]=g.useState(!1),[E,C]=g.useState(!1),T=g.useRef(null),[A,D]=g.useState(!1),[L,R]=g.useState(!1);g.useEffect(()=>{if(!E)return;const W=G=>{T.current&&!T.current.contains(G.target)&&C(!1)};return document.addEventListener("mousedown",W),document.addEventListener("touchstart",W,{passive:!0}),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchstart",W)}},[E]),g.useEffect(()=>{if(!e){s("/sessions");return}J()},[e,s]),g.useEffect(()=>{(async()=>{if(!t)return;const G=await Ui(t.id);D(G);const{data:Q}=await Ee.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);R(Q&&Q.length>0)})()},[t]);const J=async()=>{if(e){m(!0);try{const W=await Wd(e.id);u(W)}catch(W){console.error("Error loading admins:",W)}finally{m(!1)}}},ne=W=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W),ie=async W=>{W.preventDefault();const G={};if(x.email.trim()?ne(x.email)||(G.email="Invalid email address"):G.email="Email is required",l.some(Q=>Q.user.email.toLowerCase()===x.email.toLowerCase())&&(G.email="This user is already an admin"),w(G),!(Object.keys(G).length>0)&&e){_(!0);try{const Q=x.email.split("@")[0].replace(/\./g," ");await v$(e.id,x.email,Q);try{const ae=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${ae}/login?session=${e.session_code}`;await Yo({to:x.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${ee}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${ee}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ae=TE(e,x.email,(t==null?void 0:t.name)||"");window.location.href=ae}catch{}}await J(),v({email:""}),p(!1)}catch(Q){console.error("Error adding admin:",Q),w({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},q=async W=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(W===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Sx(e.id,W),await J()}catch(G){console.error("Error removing admin:",G),alert("Failed to remove admin")}}},de=W=>{const Q=W.split("T")[0].split(" ")[0].split("-");let ae;if(Q.length===3){const ee=parseInt(Q[0],10),oe=parseInt(Q[1],10)-1,te=parseInt(Q[2],10);ae=new Date(ee,oe,te);const M=W.match(/T(\d{2}):(\d{2}):(\d{2})/);M&&ae.setHours(parseInt(M[1],10),parseInt(M[2],10),parseInt(M[3],10))}else ae=new Date(W);return ae.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Jm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,A&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!A&&L&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:T,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx($l,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx($l,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(W=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Yr,{className:"h-5 w-5 text-blue-500 mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[W.user.name,W.user.id===(t==null?void 0:t.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),W.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de(W.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>q(W.user_id),className:`text-red-600 hover:text-red-900 ${W.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:W.user.id===(t==null?void 0:t.id)||l.length===1,title:W.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:i.jsx(ha,{className:"h-5 w-5"})})})]},W.id))})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Yr,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Manage features and voting settings for this session"}),i.jsx("li",{children:"Add and remove stakeholders for this session"}),i.jsx("li",{children:"View voting results and analytics for this session"}),i.jsx("li",{children:"Add and remove other session admins"})]}),i.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),i.jsx("button",{onClick:()=>{p(!1),v({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:x.email,onChange:W=>v(G=>({...G,email:W.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),j.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),j.email]})]}),j.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-2"}),j.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),v({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function JZ(){const{currentUser:e,sessions:t}=Ia(),r=ti(),[n,s]=g.useState([]),[a,l]=g.useState(!0),[u,d]=g.useState(!1);g.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const x=new Set;for(const v of t)(await Wd(v.id)).forEach(w=>{w.user&&w.user.email&&x.add(w.user.email)});s(Array.from(x))}catch(x){console.error("Error loading admin emails:",x)}finally{l(!1)}},f=()=>{const x=encodeURIComponent(" Request: Add me to Feature Voting System"),v=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),j=n.length>0?`mailto:${n.join(",")}?subject=${x}&body=${v}`:`mailto:?subject=${x}&body=${v}`;window.location.href=j,d(!0)},p=()=>{r("/login")};return a?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:i.jsx(hF,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),i.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),i.jsx("div",{className:"p-6",children:u?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(kr,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),i.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[i.jsx(yk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Mn,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),i.jsx("p",{className:"text-xs",children:n.join(", ")})]}):i.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[i.jsx(du,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(yk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function XZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Ia(),n=ti(),s=async()=>{try{await Ee.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[a,l]=g.useState([]),[u,d]=g.useState(!0),[m,f]=g.useState(!1),[p,x]=g.useState({email:""}),[v,j]=g.useState({}),[w,S]=g.useState(!1),[_,E]=g.useState(!1),C=g.useRef(null),[T,A]=g.useState(!1),[D,L]=g.useState(!1);g.useEffect(()=>{if(!_)return;const de=W=>{C.current&&!C.current.contains(W.target)&&E(!1)};return document.addEventListener("mousedown",de),document.addEventListener("touchstart",de,{passive:!0}),()=>{document.removeEventListener("mousedown",de),document.removeEventListener("touchstart",de)}},[_]),g.useEffect(()=>{R()},[]),g.useEffect(()=>{(async()=>{if(!e)return;const W=await Ui(e.id);A(W);const{data:G}=await Ee.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);L(G&&G.length>0)})()},[e]);const R=async()=>{d(!0);try{let de=await Nx();de.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Wh(e.id),de=await Nx()),l(de)}catch(de){console.error("Error loading system admins:",de)}finally{d(!1)}},J=de=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de),ne=async de=>{de.preventDefault();const W={};if(p.email.trim()?J(p.email)||(W.email="Invalid email address"):W.email="Email is required",a.some(G=>G.user.email.toLowerCase()===p.email.toLowerCase())&&(W.email="This user is already a system admin"),j(W),!(Object.keys(W).length>0)){S(!0);try{const G=p.email.split("@")[0].replace(/\./g," "),Q=await Al(p.email,G);await Wh(Q.id);try{const ae=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${ae}/login`;await Yo({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${ee}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${ee}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const ae=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${ae}/login`,oe=encodeURIComponent("You're a System Admin: Feature Voting System"),te=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${ee}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${oe}&body=${te}`}catch{}}await R(),x({email:""}),f(!1)}catch(G){console.error("Error adding system admin:",G),j({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},ie=async de=>{const W=a.reduce((G,Q)=>new Date(Q.created_at)<new Date(G.created_at)?Q:G);if(de===W.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(a.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(de===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await _x(de),await R()}catch(G){console.error("Error removing system admin:",G),alert("Failed to remove system admin")}},q=de=>{const G=de.split("T")[0].split(" ")[0].split("-");let Q;if(G.length===3){const ae=parseInt(G[0],10),ee=parseInt(G[1],10)-1,oe=parseInt(G[2],10);Q=new Date(ae,ee,oe);const te=de.match(/T(\d{2}):(\d{2}):(\d{2})/);te&&Q.setHours(parseInt(te[1],10),parseInt(te[2],10),parseInt(te[3],10))}else Q=new Date(de);return Q.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Jm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,T&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&D&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:C,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx($l,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),i.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx($l,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),i.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx($n,{className:"h-8 w-8 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),i.jsx("p",{className:"text-3xl font-bold",children:a.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",a.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const de=a.reduce((W,G)=>new Date(G.created_at)<new Date(W.created_at)?G:W);return a.map(W=>{const G=W.user_id===de.user_id;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx($n,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[W.user.name,W.user.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),G&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),W.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(W.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>ie(W.user_id),className:`text-red-600 hover:text-red-900 ${W.user.id===(e==null?void 0:e.id)||a.length===1||G?"opacity-50 cursor-not-allowed":""}`,disabled:W.user.id===(e==null?void 0:e.id)||a.length===1||G,title:G?"Cannot remove the original system admin":W.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":a.length===1?"Cannot remove the last system admin":"Remove system admin",children:i.jsx(ha,{className:"h-5 w-5"})})})]},W.id)})})()})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx($n,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Full access to all voting sessions across the system"}),i.jsx("li",{children:"Create and manage any voting session"}),i.jsx("li",{children:"Add and remove other system administrators"}),i.jsx("li",{children:"Manage session admins and stakeholders for any session"}),i.jsx("li",{children:"View all results and analytics system-wide"})]}),i.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),i.jsx("button",{onClick:()=>{f(!1),x({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:p.email,onChange:de=>x(W=>({...W,email:de.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${v.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),v.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-1"}),v.email]})]}),v.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(ir,{className:"h-4 w-4 mr-2"}),v.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),x({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:w,children:w?"Adding...":"Add System Admin"})]})]})]})})]})}async function QZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:a},error:l}=await Ee.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!a)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=a.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=a.user)==null?void 0:n.identities)==null?void 0:s.some(w=>w.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=a.provider_token||a.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,x=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!x.ok){const w=await x.text();let S="";throw x.status===401?(S="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",w)):x.status===403?(S='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",w)):x.status===400?(S="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",w)):(S=`Unable to search users (${x.status}). Please try again.`,console.error("Azure AD search error:",x.status,w)),new Error(S)}return((await x.json()).value||[]).map(w=>({id:w.id,displayName:w.displayName||"",mail:w.mail||w.userPrincipalName||"",userPrincipalName:w.userPrincipalName||"",givenName:w.givenName,surname:w.surname,jobTitle:w.jobTitle,department:w.department})).sort((w,S)=>{const _=w.displayName.toLowerCase(),E=S.displayName.toLowerCase();return _.localeCompare(E)})}catch(a){throw console.error("Error searching Azure AD users:",a),a}}const id=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function $h({products:e,value:t,onChange:r,label:n,error:s,onProductChange:a}){const[l,u]=g.useState(!1),d=g.useRef(null);g.useEffect(()=>{function p(x){d.current&&!d.current.contains(x.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Wr(m.name,m.color_hex??null):null;return i.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),i.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const x=Wr(p.name,p.color_hex??null),v=t===p.id;return i.jsxs("div",{onClick:()=>{r(p.id),u(!1),a&&a()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${v?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:x.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),v&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function ZZ({products:e,value:t,onChange:r}){const[n,s]=g.useState(!1),a=g.useRef(null),l=g.useRef(null),[u,d]=g.useState({top:0,left:0,width:0});g.useEffect(()=>{function p(x){a.current&&!a.current.contains(x.target)&&l.current&&!l.current.contains(x.target)&&s(!1)}return n&&(document.addEventListener("mousedown",p),l.current&&requestAnimationFrame(()=>{if(l.current){const x=l.current.getBoundingClientRect();d({top:x.bottom+window.scrollY+4,left:x.left+window.scrollX,width:x.width})}})),()=>document.removeEventListener("mousedown",p)},[n]);const m=e.find(p=>p.id===t),f=n?i.jsxs("div",{ref:a,className:"fixed bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:`${u.top}px`,left:`${u.left}px`,width:"300px",zIndex:99999},children:[i.jsxs("div",{onClick:()=>{r(""),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100 ${t?"":"bg-gray-50"}`,children:[i.jsx("span",{className:"text-base text-gray-900",children:"All Products"}),!t&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]}),e.length===0?i.jsx("div",{className:"px-4 py-2.5 text-base text-gray-500 text-center",children:"Loading products..."}):e.map(p=>{const x=Wr(p.name,p.color_hex??null),v=t===p.id;return i.jsxs("div",{onClick:()=>{r(p.id),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${v?"bg-blue-50":""}`,children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:x.background}}),i.jsx("span",{className:"text-base text-gray-900 flex-1",children:p.name}),v&&i.jsx(kr,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},p.id)})]}):null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative min-w-[200px]",children:i.jsxs("div",{ref:l,onClick:()=>s(!n),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base bg-white cursor-pointer flex items-center justify-between hover:bg-gray-50",children:[i.jsx("span",{className:`text-base truncate ${t?"text-gray-900":"text-gray-500"}`,children:m?m.name:"All Products"}),i.jsx(ts,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]})}),n&&Fv.createPortal(f,document.body)]})}function eee({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:a,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return i.jsxs("div",{className:"space-y-3 overflow-visible",children:[i.jsx("div",{className:"overflow-visible",children:i.jsx($h,{products:e,value:r,onChange:x=>{n(x),a(!0)},label:"Product *"})}),r&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{a(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(x=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:l.includes(x.id),onChange:()=>u(x.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(x)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${d(x).color}`,children:d(x).text})})]})]},x.id))})]})]})]})}function tee(){var _i,U;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=Ia(),s=ti(),[a]=Mv(),[l,u]=g.useState([]),[d,m]=g.useState([]),[f,p]=g.useState(!0),[x,v]=g.useState(""),[j,w]=g.useState("all"),[S,_]=g.useState(!1),[E,C]=g.useState(null),[T,A]=g.useState({}),[D,L]=g.useState(null),[R,J]=g.useState(null),[ne,ie]=g.useState(null),q=k=>{const $=new Date,ge=k.filter(fe=>{const we=fe.start_date?new Date(fe.start_date):null,P=fe.end_date?new Date(fe.end_date):null;return we&&$<we||P&&$>P?!1:!!(we&&$>=we&&(!P||$<=P))});return ge.length===0?null:ge.sort((fe,we)=>{const P=fe.start_date?new Date(fe.start_date).getTime():0;return(we.start_date?new Date(we.start_date).getTime():0)-P})[0]},de=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),W=g.useRef(null),G=g.useRef({}),Q=g.useRef(null),ae=g.useRef(!1),[ee,oe]=g.useState(!1),[te,M]=g.useState(!1),[X,me]=g.useState([]),[xe,Fe]=g.useState("system-admin"),[Se,Re]=g.useState(!0),[ke,F]=g.useState(!1),[le,ce]=g.useState(null),[K,Ye]=g.useState(null),[Ae,tt]=g.useState([]),[St,pt]=g.useState({adminSessions:[],stakeholderSessions:[]}),[it,er]=g.useState(""),[z,V]=g.useState(!0),[Z,Ne]=g.useState([]),[Oe,_e]=g.useState(!1),[Te,ut]=g.useState(null),[Dt,Ve]=g.useState(!1),[gt,xt]=g.useState(null),[Le,He]=g.useState(new Set),[et,vt]=g.useState(new Map),[ct,Ht]=g.useState(!1),[ar,Er]=g.useState(!1),[Ze,Bt]=g.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Vt,Wt]=g.useState(id()),[Gt,tr]=g.useState(!0),[Rr,Yt]=g.useState(null),[sr,dr]=g.useState({sessionAdmin:!1,stakeholder:!1}),[rr,Wn]=g.useState("User Management"),[Xt,os]=g.useState([]),[Mr,gr]=g.useState([]),[fr,rn]=g.useState(""),[Fr,An]=g.useState([]),[jr,Or]=g.useState(""),[Vn,qn]=g.useState([]),[Vi,cn]=g.useState(!1),[xs,vs]=g.useState(null),[xr,Pn]=g.useState(!0),[Ar,Qt]=g.useState(!0),[or,re]=g.useState(""),Pe=!!jr&&(Ar||Ze.sessionAdminIds.length>0),Ue=!!fr&&(xr||Ze.stakeholderSessionIds.length>0),We=((_i=Xt.find(k=>k.id===jr))==null?void 0:_i.name)||"",Je=((U=Xt.find(k=>k.id===fr))==null?void 0:U.name)||"",Ie=k=>{const $=k.map(fe=>Ae.find(we=>we.id===fe)).filter(fe=>!!fe);return $.length===0?"":$.map(fe=>fe.title||"Unnamed Session").join(", ")},Ot=Pe?`${We||"Selected Product"}  ${Ar?"All Sessions":Ie(Ze.sessionAdminIds)||"Sessions selected"}`:"",Rt=Ue?`${Je||"Selected Product"}  ${xr?"All Sessions":Ie(Ze.stakeholderSessionIds)||"Sessions selected"}`:"",Tt=(()=>{const k=[];return Ze.isSystemAdmin&&k.push("System Admin"),Pe&&k.push("Session Admin"),Ue&&k.push("Stakeholder"),k})(),Ke=k=>{if(Tt.length===0)return k?"Creating User...":"Create User";const $=Tt.join(" & ");return k?`Adding ${$}...`:`Add ${$}`},[vr,lr]=g.useState(!1),[Lr,Ut]=g.useState(null),[un,br]=g.useState(""),[Hn,zs]=g.useState(""),[ls,Si]=g.useState(!1),nr=async k=>{k&&(k.preventDefault(),k.stopPropagation());try{await Ee.auth.signOut()}catch($){console.error("Error signing out:",$)}try{r(null)}catch($){console.error("Error clearing session:",$)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch($){console.error("Error clearing storage:",$)}_(!1),s("/login",{replace:!0})};g.useEffect(()=>{if(!S)return;const k=$=>{W.current&&!W.current.contains($.target)&&_(!1)};return document.addEventListener("mousedown",k),document.addEventListener("touchstart",k,{passive:!0}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[S]),g.useEffect(()=>{if(!E){A({});return}const $=setTimeout(()=>{const ge=G.current[E];ge&&requestAnimationFrame(()=>{const fe=ge.getBoundingClientRect();window.innerWidth<768?A({[E]:{top:`${fe.bottom+4}px`,right:`${window.innerWidth-fe.right+4}px`,left:"auto"}}):A({[E]:{}})})},0);return()=>clearTimeout($)},[E]),g.useEffect(()=>{if(!E)return;const k=$=>{const ge=G.current[E];ge&&!ge.contains($.target)&&C(null)};return document.addEventListener("mousedown",k),document.addEventListener("touchstart",k,{passive:!0}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[E]);const Qr=g.useCallback(async()=>{try{const k=await Uh();gr(k);const $=new Date,ge=k.filter(fe=>Ae.some(we=>we.product_id!==fe.id?!1:new Date(we.end_date)>=$));os(ge)}catch(k){console.error("Error loading products:",k)}},[Ae]),yr=g.useCallback(async()=>{try{const k=await Uh();console.log("Loaded products:",k),gr(k)}catch(k){console.error("Error loading all products:",k),gr([])}},[]),qi=()=>{Or(""),qn([]),Bt(k=>({...k,sessionAdminIds:[]})),Qt(!0),dr(k=>({...k,sessionAdmin:!1}))},Mt=()=>{rn(""),Bt(k=>({...k,stakeholderSessionIds:[]})),Pn(!0),dr(k=>({...k,stakeholder:!1}))},Us=k=>{if(!k){An([]);return}const $=new Date,ge=Ae.filter(fe=>fe.product_id!==k?!1:new Date(fe.end_date)>=$);An(ge)};g.useEffect(()=>{fr?Us(fr):An([])},[fr,Ae]);const ni=k=>{if(!k){qn([]);return}const $=new Date,ge=Ae.filter(fe=>fe.product_id!==k?!1:new Date(fe.end_date)>=$);qn(ge)};g.useEffect(()=>{jr?ni(jr):qn([])},[jr,Ae]),g.useEffect(()=>{const k=a.get("filter");k==="session-admin"?(Wn("Session Admin Management"),w("session-admin")):k==="stakeholder"?(Wn("Stakeholder Management"),w("stakeholder")):Wn("User Management")},[a]);const dn=async k=>{p(!0);try{const[$,ge,fe]=await Promise.all([bx(),Ee.from("session_admins").select("user_id, session_id, created_at").then(({data:Ce,error:pe})=>pe?(console.error("Error fetching all admin relations:",pe),[]):Ce||[]),Ee.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:Ce,error:pe})=>pe?(console.error("Error fetching all stakeholder relations:",pe),[]):Ce||[])]),we=new Map;ge.forEach(Ce=>{we.has(Ce.user_id)||we.set(Ce.user_id,[]),we.get(Ce.user_id).push({session_id:Ce.session_id,created_at:Ce.created_at})});const P=new Map;fe.forEach(Ce=>{var ve;const pe=((ve=Ce.user_email)==null?void 0:ve.toLowerCase())||"";pe&&(P.has(pe)||P.set(pe,[]),P.get(pe).push({session_id:Ce.session_id,created_at:Ce.created_at}))});const I=new Map(k.map(Ce=>[Ce.id,Ce])),H=await Promise.all($.map(async Ce=>{const pe=await p$(Ce.id),ve=[],ft=[];(we.get(Ce.id)||[]).forEach(Nt=>{const De=I.get(Nt.session_id);De&&ve.push({...De,assignedAt:Nt.created_at,assignedBy:"System",assignedByName:"System"})});const at=Ce.email.toLowerCase();return(P.get(at)||[]).forEach(Nt=>{const De=I.get(Nt.session_id);De&&ft.push({...De,assignedAt:Nt.created_at,assignedBy:"System",assignedByName:"System"})}),{...Ce,roles:pe,adminInSessions:ve,stakeholderInSessions:ft}}));u(H);const ue=new Map;H.forEach(Ce=>{const pe=Ce.email.toLowerCase().trim();ue.has(pe)||ue.set(pe,[]),ue.get(pe).push(Ce.id)});const $e=new Map;ue.forEach((Ce,pe)=>{Ce.length>1&&$e.set(pe,Ce)}),vt($e)}catch($){console.error("Error loading users:",$)}finally{p(!1)}},Hi=async()=>{if(e){Re(!0);try{const k=await Go(),[$,ge]=await Promise.all([Ui(e.id),Ee.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:we,error:P})=>P?(console.error("Error fetching admin sessions:",P),[]):(we||[]).map(I=>I.session_id))]);oe($);const fe=ge;if($)tt(k),await Promise.all([Ki(),dn(k)]);else{const we=fe.length>0;if(M(we),me(fe),!we){s("/sessions");return}const P=k.filter(I=>fe.includes(I.id));tt(P),Fe("session-admin"),await dn(P)}await Qr()}catch(k){console.error("Error checking access:",k),s("/sessions")}finally{Re(!1)}}},Ki=async()=>{try{const k=["chris.rodes@newmill.com","spencer.faull@newmill.com"],$=new Set,ge=await Nx();if(ge.length>0){const we=ge.reduce((P,I)=>new Date(I.created_at)<new Date(P.created_at)?I:P);xt(we.user_id),$.add(we.user_id)}(await bx()).forEach(we=>{k.includes(we.email.toLowerCase())&&$.add(we.id)}),He($)}catch(k){console.error("Error loading protected accounts:",k)}},bs=k=>{if(k.id===gt)return"Original Admin";const $=k.email.toLowerCase();return $==="chris.rodes@newmill.com"?"Manager":$==="spencer.faull@newmill.com"?"Portfolio Owner":null},si=k=>{const $=k.email.toLowerCase().trim(),ge=et.get($);return ge?ge.length>1:!1},Kn=k=>{const $=k.email.toLowerCase().trim(),ge=et.get($);return ge?ge.length:1},Zr=()=>{let k=[...l];if(xe==="session-admin"&&Ae.length>0){const $=new Set(Ae.map(ge=>ge.id));k=k.filter(ge=>{var P,I;if(ge.id===(e==null?void 0:e.id))return!0;const fe=(P=ge.adminInSessions)==null?void 0:P.some(H=>H&&$.has(H.id)),we=(I=ge.stakeholderInSessions)==null?void 0:I.some(H=>H&&$.has(H.id));return!!fe||!!we})}if(x.trim()){const $=x.toLowerCase();k=k.filter(ge=>ge.name.toLowerCase().includes($)||ge.email.toLowerCase().includes($))}(j!=="all"||or)&&(k=k.filter($=>{const ge=[...$.adminInSessions||[],...$.stakeholderInSessions||[]];let fe=ge;if(or&&(fe=ge.filter(we=>(we.product_id||we.productId)===or)),or&&fe.length===0)return!1;if(j!=="all")switch(j){case"system-admin":return $.roles.isSystemAdmin;case"session-admin":return or?fe.some(we=>{var P;return(P=$.adminInSessions)==null?void 0:P.some(I=>I.id===we.id)}):$.roles.sessionAdminCount>0;case"stakeholder":return or?fe.some(we=>{var P;return(P=$.stakeholderInSessions)==null?void 0:P.some(I=>I.id===we.id)}):$.roles.stakeholderSessionCount>0;case"none":return!$.roles.isSystemAdmin&&$.roles.sessionAdminCount===0&&$.roles.stakeholderSessionCount===0;default:return!0}return!0})),m(k)},cs=k=>{const $=[...k.adminInSessions||[],...k.stakeholderInSessions||[]],ge=new Set;return $.forEach(fe=>{const we=fe.product_id||fe.productId;we&&ge.add(we)}),Mr.filter(fe=>ge.has(fe.id))};g.useEffect(()=>{e&&yr()},[e,yr]),g.useEffect(()=>{if(!e){s("/login");return}if(!ae.current)return ae.current=!0,Hi(),()=>{}},[e]),g.useEffect(()=>{const k=a.get("filter");k&&["system-admin","session-admin","stakeholder","none"].includes(k)&&w(k);const $=a.get("product");$&&re($)},[a]),g.useEffect(()=>{a.get("filter")||(xe==="session-admin"?(j==="system-admin"||j==="session-admin"||j==="all")&&w("stakeholder"):xe==="system-admin"&&(a.get("filter")||w("all")))},[xe,a,j]);const ws=g.useCallback(()=>{Zr()},[l,x,j,or,xe,Ae,e]);g.useEffect(()=>{ws()},[ws]),g.useEffect(()=>{function k($){Q.current&&!Q.current.contains($.target)&&Wt(ge=>({...ge,showResults:!1}))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const zr=async k=>{try{const $=[],ge=[];for(const fe of Ae)await qm(k,fe.id)&&$.push(fe.id),await b$(k,fe.id)&&ge.push(fe.id);pt({adminSessions:$,stakeholderSessions:ge})}catch($){console.error("Error loading user session memberships:",$)}},fn=async(k,$)=>{Ye(k),ce($),er(""),V(!0),Ne([]),F(!0),C(null),Xt.length===0&&await Qr(),await zr(k.id)},nn=()=>{F(!1),ce(null),Ye(null),er(""),V(!0),Ne([]),pt({adminSessions:[],stakeholderSessions:[]})},Gi=(k,$)=>{if(!$)return[];const ge=new Date;return k.filter(fe=>fe.product_id!==$?!1:new Date(fe.end_date)>=ge)},As=async()=>{if(!K||!le)return;if(!it){alert("Please select a product first.");return}let k=[];if(z)k=Gi(Gn(le),it).map(ge=>ge.id);else{if(Z.length===0){alert("Please select at least one session.");return}k=Z}if(k.length===0){alert("No sessions available for this product.");return}try{for(const $ of k)le==="session-admin"?await Il($,K.id):le==="stakeholder"?await PS($,K.email,K.name):le==="remove-stakeholder"&&await kx($,K.email);nn(),await dn(Ae)}catch($){console.error("Error modifying user session role:",$);const ge=($==null?void 0:$.message)||($==null?void 0:$.toString())||"Unknown error";console.error("Full error details:",$),alert(`Failed to ${le==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${ge}

Please check the console for more details.`)}},Ps=async(k,$)=>{if(C(null),!!confirm(`Are you sure you want to ${$?"remove":"grant"} system admin access for this user?`))try{$?await _x(k):await Wh(k),await dn(Ae)}catch(ge){console.error("Error toggling system admin:",ge),alert("Failed to update system admin status. Please try again.")}},Yi=async(k,$)=>{C(null);const ge=xe==="session-admin"?`Are you sure you want to remove ${$} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${$}? This will remove them from all sessions and revoke system admin access.`;if(confirm(ge))try{if(xe==="system-admin"&&await _x(k),xe==="session-admin"){for(const fe of X)try{await Sx(fe,k)}catch(we){console.error(`Error removing session admin from ${fe}:`,we)}for(const fe of X)try{await TS(fe,k)}catch(we){console.error(`Error removing stakeholder from ${fe}:`,we)}}else for(const fe of Ae)try{await Sx(fe.id,k),await TS(fe.id,k)}catch{}await dn(Ae)}catch(fe){console.error("Error removing roles:",fe),alert("Failed to remove roles. Please try again.")}},wo=async(k,$)=>{const ge=l.find(fe=>fe.id===k);if(ge){if(xe==="session-admin"){if(ge.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const fe=`Are you sure you want to remove ${$} as a stakeholder from all sessions you manage?`;if(!confirm(fe))return;try{let we=0;for(const P of Ae)try{await kx(P.id,ge.email),we++}catch(I){console.error(`Error removing stakeholder from session ${P.id}:`,I)}await dn(Ae),we>0?alert(`${$} has been removed as a stakeholder from ${we} session(s) you manage.`):alert(`${$} was not a stakeholder in any of the sessions you manage.`)}catch(we){console.error("Error removing stakeholder:",we),alert("Failed to remove stakeholder. Please try again.")}return}ut(ge),_e(!0)}},Os=async()=>{var k;if(Te){if(Le.has(Te.id)){const $=bs(Te);alert(`Cannot delete this protected account${$?` (${$})`:""}. This protects against accidentally locking important users out of the system.`),_e(!1),ut(null);return}Ve(!0);try{if(!e)throw new Error("You must be logged in to delete users");const ge=`${Ee.supabaseUrl}/functions/v1/delete-user`,fe=await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee.supabaseKey}`},body:JSON.stringify({userId:Te.id,currentUserId:e.id})});if(!fe.ok){let I="Failed to delete user";try{I=(await fe.json()).error||I}catch{I=`Server returned ${fe.status}: ${fe.statusText}`}throw new Error(I)}const we=await fe.json();u(I=>I.filter(H=>H.id!==Te.id)),_e(!1);const P=Te.id;ut(null);try{await dn(Ae)}catch(I){console.error("Error reloading users after deletion:",I)}}catch($){console.error("Error deleting user:",$);const ge=($==null?void 0:$.message)||((k=$==null?void 0:$.error)==null?void 0:k.message)||"Unknown error";u(fe=>!fe.find(P=>P.id===(Te==null?void 0:Te.id))&&Te?[...fe,Te].sort((P,I)=>(P.name||P.email).localeCompare(I.name||I.email)):fe),alert(`Failed to delete user: ${ge}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await dn(Ae)}catch(fe){console.error("Error reloading users after failed deletion:",fe)}}finally{Ve(!1)}}},Ra=()=>{_e(!1),ut(null)},sl=async()=>{if(!Lr)return;if(!un.trim()){alert("Name is required");return}if(!Hn.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Hn.trim())){alert("Please enter a valid email address");return}Si(!0);try{const{error:$}=await Ee.from("users").update({name:un.trim(),email:Hn.trim().toLowerCase()}).eq("id",Lr.id);if($)throw $;u(ge=>ge.map(fe=>fe.id===Lr.id?{...fe,name:un.trim(),email:Hn.trim().toLowerCase()}:fe)),lr(!1),Ut(null),br(""),zs("")}catch($){console.error("Error updating user:",$),alert("Failed to update user. Please try again.")}finally{Si(!1)}},sn=()=>{_(!1),Ht(!0),Bt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Wt(id()),rn(""),An([]),Or(""),qn([]),Qr(),tr(!0)},Bs=()=>{Ht(!1),Bt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Wt(id()),rn(""),An([]),Or(""),qn([]),Pn(!0),Qt(!0),dr({sessionAdmin:!1,stakeholder:!1}),tr(!0)};g.useEffect(()=>{(async()=>{var ge,fe,we,P;try{const{data:{session:I}}=await Ee.auth.getSession();if(I){const H=((fe=(ge=I.user)==null?void 0:ge.app_metadata)==null?void 0:fe.provider)==="azure"||((P=(we=I.user)==null?void 0:we.identities)==null?void 0:P.some(ue=>ue.provider==="azure"));Yt(H||!1)}else Yt(!1)}catch(I){console.error("Error checking Azure sign-in status:",I),Yt(!1)}})();const{data:{subscription:$}}=Ee.auth.onAuthStateChange((ge,fe)=>{var we,P,I,H;if(fe){const ue=((P=(we=fe.user)==null?void 0:we.app_metadata)==null?void 0:P.provider)==="azure"||((H=(I=fe.user)==null?void 0:I.identities)==null?void 0:H.some($e=>$e.provider==="azure"));Yt(ue||!1)}else Yt(!1)});return()=>{$.unsubscribe()}},[]);const Ts=async()=>{try{const k=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:$}=await Ee.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${k}/users`,scopes:"email openid profile User.ReadBasic.All"}});$&&(console.error("Azure sign-in error:",$),Wt(ge=>({...ge,error:"Failed to sign in with Microsoft. Please try again."})))}catch(k){console.error("Azure sign-in error:",k),Wt($=>({...$,error:"Failed to sign in with Microsoft. Please try again."}))}},ki=async k=>{if(Wt($=>({...$,searchTerm:k,isSearching:!0,showResults:!1,error:""})),!k||k.trim().length<2){Wt($=>({...$,results:[],isSearching:!1,error:""}));return}try{const $=await QZ(k);Wt(ge=>({...ge,results:$,isSearching:!1,showResults:$.length>0,error:""}))}catch($){console.error("Error searching Azure AD users:",$);const ge=($==null?void 0:$.message)||"Failed to search company users. Please try again.";Wt(fe=>({...fe,results:[],isSearching:!1,showResults:!1,error:ge}))}},jo=k=>{let $="";if(k.givenName&&k.surname)$=`${k.givenName} ${k.surname}`;else if(k.displayName){const ge=k.displayName.trim();if(ge.includes(",")){const fe=ge.split(",").map(we=>we.trim());fe.length===2?$=`${fe[1]} ${fe[0]}`:$=ge}else $=ge}else $=k.mail||k.userPrincipalName||"";Bt({...Ze,name:$,email:k.mail||k.userPrincipalName}),Wt(id()),tr(!1)},il=async()=>{if(!Ze.name.trim()||!Ze.email.trim()){alert("Please fill in all required fields (Name, Email)");return}Er(!0);try{const{data:k,error:$}=await Ee.from("users").insert({name:Ze.name.trim(),email:Ze.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if($)throw $;if(!k)throw new Error("User creation failed");const ge=k.id;if(xe==="system-admin"&&Ze.isSystemAdmin&&await Wh(ge),xe==="system-admin"&&sr.sessionAdmin&&jr)if(Ar)for(const P of Vn)try{await Il(P.id,ge)}catch(I){console.error(`Error adding session admin role to session ${P.id}:`,I)}else for(const P of Ze.sessionAdminIds)try{await Il(P,ge)}catch(I){console.error("Error adding session admin role:",I)}console.log("Adding stakeholder to sessions:",Ze.stakeholderSessionIds),console.log("View mode:",xe),console.log("User admin sessions:",X),console.log("All sessions:",Ae.map(P=>({id:P.id,title:P.title})));let fe=[];if(xe==="session-admin"?fr&&xr?fe=Fr.map(P=>P.id):fr&&!xr&&(fe=Ze.stakeholderSessionIds):xe==="system-admin"&&sr.stakeholder&&fr&&(xr?fe=Fr.map(P=>P.id):fe=Ze.stakeholderSessionIds),fe.length===0)console.log("No stakeholder sessions to add");else{for(const P of fe){if(xe==="session-admin"&&!Ae.some(H=>H.id===P)){console.warn(`Skipping session ${P} - not in managed sessions`);continue}try{console.log(`Adding ${Ze.email} as stakeholder to session ${P}`);const I=await PS(P,Ze.email,Ze.name);console.log(`Successfully added stakeholder to session ${P}:`,I)}catch(I){console.error(`Error adding stakeholder role to session ${P}:`,I);const H=(I==null?void 0:I.message)||(I==null?void 0:I.toString())||"Unknown error";alert(`Warning: Failed to add ${Ze.email} to session ${P}.

Error: ${H}`)}}console.log("Finished adding stakeholder roles")}let we="User";Ze.isSystemAdmin?we="System Admin":sr.sessionAdmin&&jr&&(Ar||Ze.sessionAdminIds.length>0)?we="Session Admin":(xe==="session-admin"&&fr&&(xr||Ze.stakeholderSessionIds.length>0)||xe==="system-admin"&&sr.stakeholder&&fr&&(xr||Ze.stakeholderSessionIds.length>0))&&(we="Stakeholder"),Bs(),await dn(Ae),vs({email:Ze.email,userType:we}),cn(!0)}catch(k){console.error("Error creating user:",k),alert(`Failed to create user: ${k.message||"Unknown error"}`)}finally{Er(!1)}},Ma=k=>{Bt($=>({...$,sessionAdminIds:$.sessionAdminIds.includes(k)?$.sessionAdminIds.filter(ge=>ge!==k):[...$.sessionAdminIds,k]}))},Ji=k=>{Bt($=>({...$,stakeholderSessionIds:$.stakeholderSessionIds.includes(k)?$.stakeholderSessionIds.filter(ge=>ge!==k):[...$.stakeholderSessionIds,k]}))},hn=k=>{const ge=k.split("T")[0].split(" ")[0].split("-");if(ge.length!==3)return new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const fe=parseInt(ge[0],10),we=parseInt(ge[1],10)-1,P=parseInt(ge[2],10);return new Date(fe,we,P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},us=k=>{const $=new Date,ge=new Date(k.start_date),fe=new Date(k.end_date);return k.is_active&&$>=ge&&$<=fe?{text:"Active",color:"text-green-600"}:$<ge?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},wr=k=>{const $=new Date(k.start_date),ge=new Date(k.end_date),fe=$.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),we=ge.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${fe} - ${we}`},Xi=k=>k.roles.isSystemAdmin?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx($n,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):k.roles.sessionAdminCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",k.roles.sessionAdminCount,")"]}):k.roles.stakeholderSessionCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(ms,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",k.roles.stakeholderSessionCount,")"]}):i.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Gn=k=>k?k==="session-admin"?Ae.filter($=>!St.adminSessions.includes($.id)):k==="remove-stakeholder"?Ae.filter($=>St.stakeholderSessions.includes($.id)&&(xe==="system-admin"||X.includes($.id))):Ae.filter($=>!St.stakeholderSessions.includes($.id)):[],Ni=(k,$)=>$?$==="session-admin"?k.roles.sessionAdminCount<Ae.length:k.roles.stakeholderSessionCount<Ae.length:!1;return Se||f?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:Se?"Checking access...":"Loading users..."})]})}):ee?i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:wi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:rr}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.name,ee&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx($n,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!ee&&te&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]})]})]})]}),i.jsxs("div",{ref:W,className:"relative z-40 flex-shrink-0 ml-2",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[(ee||te)&&i.jsxs("button",{onClick:sn,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),xe==="session-admin"?"Add Stakeholder":"Add User"]}),(ee||te)&&n&&i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),nr(k)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>_(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(mi,{className:"h-5 w-5 text-gray-700"})})}),S&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[(ee||te)&&i.jsxs("button",{onClick:()=>{_(!1),sn()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-5 w-5 mr-3 text-green-600"}),i.jsx("span",{className:"text-base",children:xe==="session-admin"?"Add Stakeholder":"Add User"})]}),(ee||te)&&n&&i.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Yr,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),i.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),i.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(rs,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"My Sessions"})]}),i.jsxs("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),_(!1),nr(k)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",style:{overflow:"visible",position:"relative"},children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",style:{position:"relative"},children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(vk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:k=>v(k.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),x&&i.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsx(ZZ,{products:Mr,value:or,onChange:re}),i.jsxs("select",{value:j==="system-admin"&&xe==="session-admin"?"session-admin":j,onChange:k=>w(k.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[xe!=="session-admin"&&i.jsx("option",{value:"all",children:"All Roles"}),xe!=="session-admin"&&i.jsx("option",{value:"system-admin",children:"System Admin"}),xe!=="session-admin"&&i.jsx("option",{value:"session-admin",children:"Session Admin"}),i.jsx("option",{value:"stakeholder",children:"Stakeholder"}),i.jsx("option",{value:"none",children:"No Role"})]}),i.jsx("button",{onClick:()=>{v(""),re(""),w("all")},disabled:!x&&!or&&j==="all",className:"inline-flex items-center justify-center px-3 py-2.5 md:py-2 border border-gray-300 rounded-lg bg-white text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 disabled:hover:bg-white",title:"Clear all filters",children:i.jsx(aF,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?i.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:x||j!=="all"||or?"No users found matching your filters.":"No users found."}):d.map(k=>{var $,ge;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:k.name||k.email}),k.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),k.roles.isSystemAdmin&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),k.roles.sessionAdminCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",k.roles.sessionAdminCount,")"]}),k.roles.stakeholderSessionCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",k.roles.stakeholderSessionCount,")"]}),bs(k)&&i.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",bs(k),")"]}),si(k)&&i.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Kn(k),")"]})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:k.email}),(()=>{const fe=cs(k);return fe.length>0?i.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.jsx("span",{className:"font-medium",children:fe.length===1?"Product:":"Products:"}),i.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:fe.map(we=>{const P=Wr(we.name,we.color_hex??null);return i.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:P.background}}),we.name]},we.id)})})]}):null})()]}),i.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:i.jsxs("div",{className:"relative",ref:fe=>{G.current[k.id]=fe},children:[i.jsx("button",{onClick:()=>C(E===k.id?null:k.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${k.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id),title:k.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(xk,{className:"h-5 w-5 text-gray-600"})}),E===k.id&&k.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:T[k.id]||{},children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),xe==="system-admin"&&i.jsxs(i.Fragment,{children:[k.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>Ps(k.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx($n,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>Ps(k.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx($n,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ni(k,"session-admin")&&i.jsxs("button",{onClick:()=>fn(k,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(Yr,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ni(k,"stakeholder")&&i.jsxs("button",{onClick:()=>fn(k,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(ms,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),xe==="session-admin"&&k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&k.stakeholderInSessions.some(fe=>X.includes(fe.id))&&i.jsxs("button",{onClick:()=>fn(k,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Yu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(k.roles.isSystemAdmin||k.roles.sessionAdminCount>0||k.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Yi(k.id,k.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Yu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(xe==="system-admin"||xe==="session-admin"&&k.roles.stakeholderSessionCount>0&&(($=k.stakeholderInSessions)==null?void 0:$.some(fe=>Ae.some(we=>we.id===fe.id)))&&!de.has(k.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),xe==="system-admin"&&i.jsxs("button",{onClick:()=>{Ut(k),br(k.name),zs(k.email),lr(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(yd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(xe==="system-admin"||xe==="session-admin"&&k.roles.stakeholderSessionCount>0&&((ge=k.stakeholderInSessions)==null?void 0:ge.some(fe=>Ae.some(we=>we.id===fe.id))))&&!de.has(k.email)&&i.jsxs("button",{onClick:()=>{C(null),wo(k.id,k.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${k.id===(e==null?void 0:e.id)||xe==="system-admin"&&Le.has(k.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id)||xe==="system-admin"&&Le.has(k.id),children:[i.jsx(ha,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:xe==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:xe==="session-admin"?"Remove from all your sessions":k.id===(e==null?void 0:e.id)?"Cannot delete your own account":Le.has(k.id)?`Cannot delete protected account${bs(k)?` (${bs(k)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),i.jsx("div",{className:"mt-2",children:Xi(k)})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),i.jsxs("div",{className:"space-y-1",children:[k.roles.sessionAdminCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(bk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:[k.roles.sessionAdminCount," as Session Admin"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const we=q(k.adminInSessions)||k.adminInSessions[0],P=k.adminInSessions.length>1,I=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="admin";return i.jsxs(i.Fragment,{children:[we&&i.jsxs("button",{onClick:async H=>{H.stopPropagation(),await r(we),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:we.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(we)})]}),P&&i.jsxs("button",{onClick:H=>{H.stopPropagation(),J(I?null:{userId:k.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:I?i.jsx(zc,{className:"h-2.5 w-2.5"}):i.jsx(yn,{className:"h-2.5 w-2.5"})}),I?"Hide":"Show"]}),I&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:k.adminInSessions.filter(H=>H.id!==(we==null?void 0:we.id)).map(H=>i.jsxs("button",{onClick:async ue=>{ue.stopPropagation(),await r(H),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:H.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(H)})]},H.id))})]})})()})]}),k.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(ms,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[k.roles.stakeholderSessionCount," as Stakeholder"]})]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const we=q(k.stakeholderInSessions)||k.stakeholderInSessions[0],P=k.stakeholderInSessions.length>1,I=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[we&&i.jsxs("button",{onClick:async H=>{H.stopPropagation(),await r(we),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:we.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(we)})]}),P&&i.jsxs("button",{onClick:H=>{H.stopPropagation(),J(I?null:{userId:k.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:I?i.jsx(zc,{className:"h-2.5 w-2.5"}):i.jsx(yn,{className:"h-2.5 w-2.5"})}),I?"Hide":"Show"]}),I&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:k.stakeholderInSessions.filter(H=>H.id!==(we==null?void 0:we.id)).map(H=>i.jsxs("button",{onClick:async ue=>{ue.stopPropagation(),await r(H),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:H.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(H)})]},H.id))})]})})()})]}),k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[i.jsx(on,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?hn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx("div",{className:"space-y-3",children:(()=>{const we=q(k.adminInSessions)||k.adminInSessions[0];k.adminInSessions.length>1;const P=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="admin";return i.jsxs(i.Fragment,{children:[we&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:we.assignedAt?hn(we.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",we.assignedByName||"System"]})]}),P&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:k.adminInSessions.filter(I=>I.id!==(we==null?void 0:we.id)).map(I=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:I.assignedAt?hn(I.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",I.assignedByName||"System"]})]},I.id))})]})})()}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsx("div",{className:"space-y-3",children:(()=>{const we=q(k.stakeholderInSessions)||k.stakeholderInSessions[0];k.stakeholderInSessions.length>1;const P=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[we&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:we.assignedAt?hn(we.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",we.assignedByName||"System"]})]}),P&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:k.stakeholderInSessions.filter(I=>I.id!==(we==null?void 0:we.id)).map(I=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:I.assignedAt?hn(I.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",I.assignedByName||"System"]})]},I.id))})]})})()})})]})]})]})]},k.id)})}),i.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:x||j!=="all"||or?"No users found matching your filters.":"No users found."})}):d.map(k=>{var $,ge,fe,we;return i.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>L(k.id),onMouseLeave:()=>L(null),children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[k.name,k.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),bs(k)&&i.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",bs(k),")"]}),si(k)&&i.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Kn(k),")"]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:k.email}),(()=>{const P=cs(k);return P.length>0?i.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.jsx("span",{className:"font-medium",children:P.length===1?"Product:":"Products:"}),i.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:P.map(I=>{const H=Wr(I.name,I.color_hex??null);return i.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:H.background}}),I.name]},I.id)})})]}):null})()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:Xi(k)}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-gray-400",children:"None"}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var $e;const P=(($e=k.adminInSessions)==null?void 0:$e.length)||0,I=P>1,H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="admin",ue=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(bk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:["Session Admin in ",P," session",P!==1?"s":""]}),I&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[H?i.jsx(zc,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):i.jsx(yn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:H?"Hide":"Show"})]})]});return I?i.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),J(H?null:{userId:k.id,role:"admin"})},className:"text-left",children:i.jsx(ue,{})}):i.jsx(ue,{})})()}),(()=>{const I=q(k.adminInSessions)||k.adminInSessions[0],H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="admin";return i.jsxs(i.Fragment,{children:[I&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>ie(`${k.id}-${I.id}`),onMouseLeave:()=>ie(null),onClick:async ue=>{ue.stopPropagation(),await r(I),s("/admin")},children:[ne===`${k.id}-${I.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:I.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(I)})]})]}),H&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.adminInSessions.filter(ue=>ue.id!==(I==null?void 0:I.id)).map((ue,$e)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>ie(`${k.id}-${ue.id}`),onMouseLeave:()=>ie(null),onClick:async Ce=>{Ce.stopPropagation(),await r(ue),s("/admin")},children:[ne===`${k.id}-${ue.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ue.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(ue)})]})]},ue.id))})]})})()]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var $e;const P=(($e=k.stakeholderInSessions)==null?void 0:$e.length)||0,I=P>1,H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="stakeholder",ue=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(ms,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:["Stakeholder in ",P," session",P!==1?"s":""]}),I&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[H?i.jsx(zc,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):i.jsx(yn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:H?"Hide":"Show"})]})]});return I?i.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),J(H?null:{userId:k.id,role:"stakeholder"})},className:"text-left",children:i.jsx(ue,{})}):i.jsx(ue,{})})()}),(()=>{const I=q(k.stakeholderInSessions)||k.stakeholderInSessions[0],H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[I&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>ie(`${k.id}-${I.id}`),onMouseLeave:()=>ie(null),onClick:async ue=>{ue.stopPropagation(),await r(I),s("/admin")},children:[ne===`${k.id}-${I.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:I.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(I)})]})]}),H&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.stakeholderInSessions.filter(ue=>ue.id!==(I==null?void 0:I.id)).map((ue,$e)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>ie(`${k.id}-${ue.id}`),onMouseLeave:()=>ie(null),onClick:async Ce=>{Ce.stopPropagation(),await r(ue),s("/admin")},children:[ne===`${k.id}-${ue.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ue.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(ue)})]})]},ue.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[i.jsx(on,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?hn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(on,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?hn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),(()=>{const I=q(k.adminInSessions)||k.adminInSessions[0];k.adminInSessions.length>1;const H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="admin";return i.jsxs(i.Fragment,{children:[I&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>ie(`${k.id}-${I.id}`),onMouseLeave:()=>ie(null),onClick:async ue=>{ue.stopPropagation(),await r(I),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:I.assignedAt?hn(I.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",I.assignedByName||"System"]})]})}),H&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.adminInSessions.filter(ue=>ue.id!==(I==null?void 0:I.id)).map((ue,$e)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>ie(`${k.id}-${ue.id}`),onMouseLeave:()=>ie(null),onClick:async Ce=>{Ce.stopPropagation(),await r(ue),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ue.assignedAt?hn(ue.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ue.assignedByName||"System"]})]})},ue.id))})]})})()]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[(!k.adminInSessions||k.adminInSessions.length===0)&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(on,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?hn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[i.jsx(ms,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:"Stakeholder"})]})}),(()=>{const I=q(k.stakeholderInSessions)||k.stakeholderInSessions[0];k.stakeholderInSessions.length>1;const H=(R==null?void 0:R.userId)===k.id&&(R==null?void 0:R.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[I&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>ie(`${k.id}-${I.id}`),onMouseLeave:()=>ie(null),onClick:async ue=>{ue.stopPropagation(),await r(I),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:I.assignedAt?hn(I.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",I.assignedByName||"System"]})]})}),H&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.stakeholderInSessions.filter(ue=>ue.id!==(I==null?void 0:I.id)).map((ue,$e)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>ie(`${k.id}-${ue.id}`),onMouseLeave:()=>ie(null),onClick:async Ce=>{Ce.stopPropagation(),await r(ue),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(on,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ue.assignedAt?hn(ue.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",ue.assignedByName||"System"]})]})},ue.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${D===k.id?k.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:P=>{G.current[k.id]=P},children:[i.jsx("button",{onClick:()=>C(E===k.id?null:k.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:k.id===(e==null?void 0:e.id),title:k.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(xk,{className:"h-5 w-5 text-gray-600"})}),E===k.id&&k.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:(($=G.current[k.id])==null?void 0:$.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((ge=G.current[k.id])==null?void 0:ge.getBoundingClientRect().right)??0)},children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),xe==="system-admin"&&i.jsxs(i.Fragment,{children:[k.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>Ps(k.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx($n,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>Ps(k.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx($n,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ni(k,"session-admin")&&i.jsxs("button",{onClick:()=>fn(k,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(Yr,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ni(k,"stakeholder")&&i.jsxs("button",{onClick:()=>fn(k,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(ms,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),xe==="session-admin"&&k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&k.stakeholderInSessions.some(P=>X.includes(P.id))&&i.jsxs("button",{onClick:()=>fn(k,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Yu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(k.roles.isSystemAdmin||k.roles.sessionAdminCount>0||k.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Yi(k.id,k.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Yu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(xe==="system-admin"||xe==="session-admin"&&k.roles.stakeholderSessionCount>0&&((fe=k.stakeholderInSessions)==null?void 0:fe.some(P=>Ae.some(I=>I.id===P.id)))&&!de.has(k.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),xe==="system-admin"&&i.jsxs("button",{onClick:()=>{Ut(k),br(k.name),zs(k.email),lr(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(yd,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(xe==="system-admin"||xe==="session-admin"&&k.roles.stakeholderSessionCount>0&&((we=k.stakeholderInSessions)==null?void 0:we.some(P=>Ae.some(I=>I.id===P.id))))&&!de.has(k.email)&&i.jsxs("button",{onClick:()=>{C(null),wo(k.id,k.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${k.id===(e==null?void 0:e.id)||xe==="system-admin"&&Le.has(k.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id)||xe==="system-admin"&&Le.has(k.id),children:[i.jsx(ha,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:xe==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:xe==="session-admin"?"Remove from all your sessions":k.id===(e==null?void 0:e.id)?"Cannot delete your own account":Le.has(k.id)?`Cannot delete protected account${bs(k)?` (${bs(k)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},k.id)})})]}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx($n,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:l.filter(k=>k.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Yr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",i.jsx("strong",{children:l.filter(k=>k.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:l.filter(k=>k.roles.stakeholderSessionCount>0).length})]})]})]})})]}),i.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mn,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx($n,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Yr,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ms,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.stakeholderSessionCount>0).length})]})]})]})}),(ee||te)&&i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>{(te||ee)&&Fe("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xe==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[i.jsx(Yr,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),i.jsxs("button",{onClick:()=>{ee&&Fe("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xe==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!ee,title:ee?"System Admin View":"Only available for System Admins",children:[i.jsx($n,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),i.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),ke&&K&&le&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:nn,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:k=>k.stopPropagation(),children:i.jsxs("div",{className:"p-6 overflow-visible",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:le==="session-admin"?"Add Session Admin":le==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),i.jsx("p",{className:"text-sm text-gray-600",children:le==="remove-stakeholder"?i.jsxs(i.Fragment,{children:["Select sessions to remove ",i.jsx("strong",{children:K.name})," as a stakeholder."]}):i.jsxs(i.Fragment,{children:["Select sessions to add ",i.jsx("strong",{children:K.name})," as ",le==="session-admin"?"an admin":"a stakeholder","."]})})]}),i.jsx("button",{onClick:nn,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mb-6",children:i.jsx(eee,{products:Xt,sessions:Gn(le),selectedProductId:it,onProductChange:k=>{er(k),Ne([]),V(!0)},useAllSessions:z,onToggleAllSessions:k=>{V(k),k&&Ne([])},selectedSessionIds:Z,onSessionToggle:k=>{Z.includes(k)?Ne(Z.filter($=>$!==k)):Ne([...Z,k])},getSessionStatus:us,formatSessionDateRange:wr,filterSessions:Gi})}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:As,disabled:!it||!z&&Z.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${it&&(z||Z.length>0)?le==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const $=(z?Gi(Gn(le),it||"").length:Z.length)>1;return le==="remove-stakeholder"?`Remove from Session${$?"s":""}`:le==="session-admin"?`Add to Session${$?"s":""} as Session Admin`:`Add to Session${$?"s":""} as a Stakeholder`})()})})]})})}),Oe&&Te&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:i.jsx(Yu,{className:"h-6 w-6 text-red-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),i.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(ms,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:Te.name}),i.jsx("div",{className:"text-sm text-gray-500",children:Te.email})]})]}),i.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),Te.roles.isSystemAdmin&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx($n,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),Te.roles.sessionAdminCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(Yr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",Te.roles.sessionAdminCount," session",Te.roles.sessionAdminCount!==1?"s":""]})]}),Te.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",Te.roles.stakeholderSessionCount," session",Te.roles.stakeholderSessionCount!==1?"s":""]})]}),!Te.roles.isSystemAdmin&&Te.roles.sessionAdminCount===0&&Te.roles.stakeholderSessionCount===0&&i.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),Te.adminInSessions&&Te.adminInSessions.length>0||Te.stakeholderInSessions&&Te.stakeholderInSessions.length>0?i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[Te.adminInSessions&&Te.adminInSessions.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(Yr,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",Te.adminInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:Te.adminInSessions.map(k=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",k.title||"Unnamed Session"]},k.id))})]}),Te.stakeholderInSessions&&Te.stakeholderInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(ms,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",Te.stakeholderInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:Te.stakeholderInSessions.map(k=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",k.title||"Unnamed Session"]},k.id))})]})]})]}):null,i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),i.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"User account will be permanently deleted"}),i.jsx("li",{children:"All authentication access will be revoked"}),i.jsx("li",{children:"User will be removed from all sessions"}),i.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ra,disabled:Dt,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{onClick:Os,disabled:Dt,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Dt?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),ct&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Bs,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:k=>k.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:i.jsx(Mn,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:xe==="session-admin"?"Add New Stakeholder":"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:xe==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),i.jsx("button",{onClick:Bs,disabled:ar,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[Gt?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),Rr===!1?i.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),i.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),i.jsxs("button",{type:"button",onClick:Ts,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[i.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"relative",ref:Q,children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(vk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:Vt.searchTerm,onChange:k=>{const $=k.target.value;Wt(ge=>({...ge,searchTerm:$})),ki($)},onFocus:()=>{Vt.results.length>0&&Wt(k=>({...k,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),Vt.isSearching&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Vt.showResults&&Vt.results.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Vt.results.map(k=>i.jsxs("button",{type:"button",onClick:()=>jo(k),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:k.displayName}),i.jsx("div",{className:"text-sm text-gray-500",children:k.mail||k.userPrincipalName}),k.jobTitle&&i.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:k.jobTitle})]},k.id))}),Vt.error&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[i.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),i.jsx("div",{className:"mb-2",children:Vt.error}),Vt.error.includes("User.ReadBasic.All")&&i.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[i.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[i.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),i.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),i.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),i.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Vt.searchTerm.length>=2&&!Vt.isSearching&&Vt.results.length===0&&!Vt.error&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):i.jsx("div",{children:i.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{tr(!0),Wt(id())},children:"Search Company Users again"})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:Ze.name,onChange:k=>Bt({...Ze,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Ze.email,onChange:k=>Bt({...Ze,email:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),xe==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx($n,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Ze.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:Ze.isSystemAdmin,onChange:k=>Bt({...Ze,isSystemAdmin:k.target.checked}),className:"sr-only"}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Ze.isSystemAdmin?"#C89212":"#ffffff"},children:Ze.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),xe==="system-admin"&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>dr(k=>({sessionAdmin:!k.sessionAdmin,stakeholder:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:Pe?"scale(1.2)":"scale(1)"},children:i.jsx(Yr,{className:"h-4 w-4 text-[#576C71]"})}),i.jsx("span",{children:"Session Admin"}),Pe&&Ot&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Ot})]}),Pe&&i.jsx("button",{type:"button",onClick:qi,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),i.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${sr.sessionAdmin?"rotate-180":""}`})]}),sr.sessionAdmin&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx($h,{products:Xt,value:jr,onChange:k=>{Or(k),Bt($=>({...$,sessionAdminIds:[]})),Qt(!0)},label:"Product *"})}),jr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>Qt(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ar?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{Qt(!0),Bt(k=>({...k,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ar?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Ar&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Ar&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Vn.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Vn.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.sessionAdminIds.includes(k.id),onChange:()=>Ma(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${us(k).color}`,children:us(k).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)})]})]},k.id))})]})]})]})]}),xe==="session-admin"?i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ze.stakeholderSessionIds.length>0&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ze.stakeholderSessionIds.length})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsx($h,{products:Xt,value:fr,onChange:k=>{rn(k),Bt($=>({...$,stakeholderSessionIds:[]})),Pn(!0)},label:"Product *"})}),fr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{Pn(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{Pn(!0),Bt(k=>({...k,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),xr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!xr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Fr.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Fr.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(k.id),onChange:()=>Ji(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${us(k).color}`,children:us(k).text})})]})]},k.id))})]})]})]})]}):i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>dr(k=>({stakeholder:!k.stakeholder,sessionAdmin:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:Ue?"scale(1.2)":"scale(1)"},children:i.jsx(ms,{className:"h-4 w-4 text-[#8B5A4A]"})}),i.jsx("span",{children:"Stakeholder"}),Ue&&Rt&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Rt})]}),Ue&&i.jsx("button",{type:"button",onClick:Mt,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),i.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${sr.stakeholder?"rotate-180":""}`})]}),sr.stakeholder&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx($h,{products:Xt,value:fr,onChange:k=>{rn(k),Bt($=>({...$,stakeholderSessionIds:[]})),Pn(!0)},label:"Product *"})}),fr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{Pn(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{Pn(!0),Bt(k=>({...k,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${xr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),xr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!xr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Fr.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Fr.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(k.id),onChange:()=>Ji(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${us(k).color}`,children:us(k).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)})]})]},k.id))})]})]})]})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:i.jsx("button",{onClick:il,disabled:!!(ar||!Ze.name.trim()||!Ze.email.trim()||xe==="session-admin"&&(!fr||!xr&&Ze.stakeholderSessionIds.length===0)||xe==="system-admin"&&sr.sessionAdmin&&jr&&!Ar&&Ze.sessionAdminIds.length===0||xe==="system-admin"&&sr.stakeholder&&fr&&!xr&&Ze.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ar?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ke(!0)]}):Ke(!1)})})]})})}),vr&&Lr&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:i.jsx(yd,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),i.jsx("button",{onClick:()=>{lr(!1),Ut(null),br(""),zs("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:un,onChange:k=>br(k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:ls})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Hn,onChange:k=>zs(k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:ls})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{lr(!1),Ut(null),br(""),zs("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:ls,children:"Cancel"}),i.jsx("button",{onClick:sl,disabled:ls||!un.trim()||!Hn.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ls?"Updating...":"Update User"})]})]})})}),Vi&&xs&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(kr,{className:"h-6 w-6 text-green-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[xs.userType," Created Successfully!"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),i.jsx("button",{onClick:()=>{cn(!1),vs(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(Es,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),i.jsx("div",{className:"text-sm font-medium text-gray-900",children:xs.email})]})})}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(ld,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"ml-2",children:[i.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),i.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>{cn(!1),vs(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const ree="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",nee=()=>i.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:i.jsx("img",{src:ree,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function see(){return i.jsx(IM,{children:i.jsxs(F$,{children:[i.jsx(nee,{}),i.jsx(D5,{basename:"/feature-voting-app",children:i.jsxs(u5,{children:[i.jsx(li,{path:"/",element:i.jsx(l5,{to:"/login",replace:!0})}),i.jsx(li,{path:"/login",element:i.jsx(WZ,{})}),i.jsx(li,{path:"/sessions",element:i.jsx(qZ,{})}),i.jsx(li,{path:"/create-session",element:i.jsx(HZ,{})}),i.jsx(li,{path:"/manage-stakeholders",element:i.jsx(GZ,{})}),i.jsx(li,{path:"/manage-admins",element:i.jsx(YZ,{})}),i.jsx(li,{path:"/vote",element:i.jsx(ix,{adminMode:!1})}),i.jsx(li,{path:"/admin",element:i.jsx(ix,{adminMode:!0})}),i.jsx(li,{path:"/results",element:i.jsx(ix,{resultsMode:!0})}),i.jsx(li,{path:"/unauthorized",element:i.jsx(JZ,{})}),i.jsx(li,{path:"/system-admins",element:i.jsx(XZ,{})}),i.jsx(li,{path:"/users",element:i.jsx(tee,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}vD.createRoot(document.getElementById("root")).render(i.jsx(see,{}));
